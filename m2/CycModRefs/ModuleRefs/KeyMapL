@database KeyMapL
@node Main "KeyMapL"

Procedures

   @{" AskKeyMapDefault " link Modul 20}            @{" MapANSI " link Modul 25}                     @{" MapRawKey " link Modul 21}
   @{" SetKeyMapDefault " link Modul 19}         

Constants

   @{" keymapMinVersion " link Modul 10}            @{" keymapName " link Modul 12}               

Variables

   @{" keymapBase " link Modul 7}               

Type-Declarations

   @{" StrPtr " link Modul 14}                   

@endnode
@node Modul "am2:ModuleRefs/KeyMapL.def"
DEFINITION MODULE KeyMapL{"keymap.library",36};

FROM SYSTEM     IMPORT ADDRESS;
FROM InputEvent	IMPORT InputEventPtr;

IMPORT ed:ExecD,kd:KeyMapD,Reg;

VAR
 keymapBase:ed.LibraryPtr;

CONST
 keymapMinVersion=36;
 keymapName="keymap.library";

TYPE
 StrPtr=ADDRESS;

(* ---   functions in V36 or higher  (distributed as Release 2.0)   --- *)

PROCEDURE SetKeyMapDefault(keyMap{Reg.A0}:kd.KeyMapPtr); CODE -30;
PROCEDURE AskKeyMapDefault():kd.KeyMapPtr; CODE -36;
PROCEDURE MapRawKey(event{Reg.A0}:InputEventPtr;buffer{Reg.A1}:StrPtr;
                    length{Reg.D1}:INTEGER;
                    keyMap{Reg.A2}:kd.KeyMapPtr):INTEGER; CODE -42;

PROCEDURE MapANSI(string{Reg.A0}:StrPtr;count{Reg.D0}:LONGINT;
                  buffer{Reg.A1}:ADDRESS;length{Reg.D1}:LONGINT;
                  keyMap{Reg.A2}:kd.KeyMapPtr):LONGINT; CODE -48;


END KeyMapL.

@endnode
