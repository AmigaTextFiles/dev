DEFINITION MODULE FileSystem;

(* (C) Copyright 1994 Marcel Timmermans. All rights reserved. *)

FROM SYSTEM IMPORT ADDRESS,BYTE;
IMPORT DosD;

CONST
  BufSize=1024;

TYPE
  Response=(done,notdone,memErr,openfileErr,readErr,writeErr,
            bufErr,seekErr,deleteErr);
  FileMode=(read,write);
  FileModeSet=SET OF FileMode;
  File=RECORD
    handle:DosD.FileHandlePtr;
    res:Response;
    eof:BOOLEAN;
    mode:FileModeSet;
    buffer:ARRAY[0..BufSize-1] OF CHAR;
    bufPos,
    bufLen,
    pos:LONGINT;
  END;

PROCEDURE Lookup(VAR file:File; name:ARRAY OF CHAR;new:BOOLEAN);

PROCEDURE ReadBytes(VAR file:File; adr:ADDRESS; size:LONGINT);
PROCEDURE ReadChar(VAR file:File; VAR ch:CHAR);
PROCEDURE ReadByteBlock(VAR file:File; VAR block:ARRAY OF BYTE);

PROCEDURE WriteBytes(VAR file:File; adr:ADDRESS; size:LONGINT);
PROCEDURE WriteChar(VAR file:File; ch:CHAR);
PROCEDURE WriteByteBlock(VAR file:File; VAR block:ARRAY OF BYTE);

PROCEDURE GetPos(VAR file:File; VAR Pos:LONGINT);
PROCEDURE SetPos(VAR file:File;Pos:LONGINT);

PROCEDURE Delete(VAR file:File);

PROCEDURE Length(VAR file:File; VAR len:LONGINT);

PROCEDURE Close(VAR file:File);


END FileSystem.
