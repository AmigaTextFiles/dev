@database HYPER:Modula-2/DosSupport
@node Main "HYPER:Modula-2/DosSupport"

Prozeduren

   @{" Close " link Modul 14}                       @{" CreateDir " link Modul 22}                   @{" DupLock " link Modul 18}
   @{" DupLockFromFH " link Modul 30}               @{" Lock " link Modul 15}                        @{" Open " link Modul 12}
   @{" OpenFromLock " link Modul 36}                @{" ParentDir " link Modul 20}                   @{" ParentOfFH " link Modul 39}
   @{" UnLock " link Modul 17}                   

@endnode
@node Modul "HYPER:Modula-2/DosSupport.def.guide"
DEFINITION MODULE DosSupport;
(*$ NameChk:=FALSE LargeVars:=FALSE *)
(* 9.6.90/bp
 * Dies sind alle Dos-Prozeduren, die ein neues Lock oder
 * FileHandle erzeugen.
 * Die Objekte werden in einer Liste vermerkt und bei
 * Programmende wieder freigegeben.
 *)

FROM SYSTEM IMPORT ADDRESS;
IMPORT d:DosD;

PROCEDURE @{" Open " link HYPER:Autodocs/dos/Open() }(name:ADDRESS; accessMode:LONGINT)
            :d.@{" FileHandlePtr " link HYPER:Modula-2/DosD.def.guide/Modul 204};
PROCEDURE @{" Close " link HYPER:Autodocs/dos/Close() }(file:d.@{" FileHandlePtr " link HYPER:Modula-2/DosD.def.guide/Modul 204});
PROCEDURE @{" Lock " link HYPER:Autodocs/dos/Lock() }(name:ADDRESS; accessMode:LONGINT)
            :d.@{" FileLockPtr " link HYPER:Modula-2/DosD.def.guide/Modul 206};
PROCEDURE @{" UnLock " link HYPER:Autodocs/dos/UnLock() }(lock:d.@{" FileLockPtr " link HYPER:Modula-2/DosD.def.guide/Modul 206});
PROCEDURE @{" DupLock " link HYPER:Autodocs/dos/DupLock() }(lock:d.@{" FileLockPtr " link HYPER:Modula-2/DosD.def.guide/Modul 206})
            :d.@{" FileLockPtr " link HYPER:Modula-2/DosD.def.guide/Modul 206};
PROCEDURE @{" ParentDir " link HYPER:Autodocs/dos/ParentDir() }(lock:d.@{" FileLockPtr " link HYPER:Modula-2/DosD.def.guide/Modul 206})
            :d.@{" FileLockPtr " link HYPER:Modula-2/DosD.def.guide/Modul 206};
PROCEDURE @{" CreateDir " link HYPER:Autodocs/dos/CreateDir() }(name:ADDRESS)
            :d.@{" FileLockPtr " link HYPER:Modula-2/DosD.def.guide/Modul 206};

(*
 * Die folgenden Prozeduren sind nur benutzbar,
 * wenn  DosL.dosVersion >= 36 ist!
 * Andernfalls: Programmabbruch!
 *)
PROCEDURE @{" DupLockFromFH " link HYPER:Autodocs/dos/DupLockFromFH() }(fh:d.@{" FileHandlePtr " link HYPER:Modula-2/DosD.def.guide/Modul 204}
		):d.@{" FileLockPtr " link HYPER:Modula-2/DosD.def.guide/Modul 206};

(* Achtung: wandelt bei Erfolg das Lock in ein
 * FileHandle um!
 *)
PROCEDURE @{" OpenFromLock " link HYPER:Autodocs/dos/OpenFromLock() }(lock:d.@{" FileLockPtr " link HYPER:Modula-2/DosD.def.guide/Modul 206}
		):d.@{" FileHandlePtr " link HYPER:Modula-2/DosD.def.guide/Modul 204};

PROCEDURE @{" ParentOfFH " link HYPER:Autodocs/dos/ParentOfFH() }(fh:d.@{" FileHandlePtr " link HYPER:Modula-2/DosD.def.guide/Modul 204}
		):d.@{" FileLockPtr " link HYPER:Modula-2/DosD.def.guide/Modul 206};

END DosSupport.def

@endnode
