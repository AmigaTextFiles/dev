@database HYPER:Modula-2/IFFParseD
@node Main "HYPER:Modula-2/IFFParseD"

Konstanten

   @{" idCAT " link Modul 89}                       @{" idFORM " link Modul 87}                      @{" idLIST " link Modul 88}
   @{" idNULL " link Modul 91}                      @{" idPROP " link Modul 90}                      @{" iffRead " link Modul 24}
   @{" iffReturn2client " link Modul 85}            @{" iffWrite " link Modul 26}                    @{" iffcmdCleanup " link Modul 109}
   @{" iffcmdEntry " link Modul 113}                 @{" iffcmdExit " link Modul 114}                  @{" iffcmdInit " link Modul 108}
   @{" iffcmdPurgelci " link Modul 115}              @{" iffcmdRead " link Modul 110}                  @{" iffcmdSeek " link Modul 112}
   @{" iffcmdWrite " link Modul 111}                 @{" ifferrEoc " link Modul 75}                   @{" ifferrEof " link Modul 73}
   @{" ifferrMangled " link Modul 81}               @{" ifferrNohook " link Modul 84}                @{" ifferrNomem " link Modul 77}
   @{" ifferrNoscope " link Modul 76}               @{" ifferrNotiff " link Modul 83}                @{" ifferrRead " link Modul 78}
   @{" ifferrSeek " link Modul 80}                  @{" ifferrSyntax " link Modul 82}                @{" ifferrWrite " link Modul 79}
   @{" ifflciCOLLECTION " link Modul 94}            @{" ifflciENTRYHANDLER " link Modul 95}          @{" ifflciEXITHANDLER " link Modul 96}
   @{" ifflciPROP " link Modul 93}                  @{" iffparseName " link Modul 7}                @{" iffparseRawstep " link Modul 100}
   @{" iffparseScan " link Modul 98}                @{" iffparseStep " link Modul 99}                @{" iffsizeUnknown " link Modul 106}
   @{" iffsliProp " link Modul 104}                  @{" iffsliRoot " link Modul 102}                  @{" iffsliTop " link Modul 103}


Typ-Deklarationen

   @{" ClipboardHandle " link Modul 66}             @{" ClipboardHandlePtr " link Modul 71}          @{" CollectionItem " link Modul 60}
   @{" CollectionItemPtr " link Modul 59}           @{" ContextNode " link Modul 36}                 @{" ContextNodePtr " link Modul 43}
   @{" IFFFlagSet " link Modul 15}                  @{" IFFFlags " link Modul 10}                    @{" IFFHandle " link Modul 17}
   @{" IFFHandlePtr " link Modul 22}                @{" IFFStreamCmd " link Modul 28}                @{" IFFStreamCmdPtr " link Modul 34}
   @{" LocalContextItem " link Modul 45}            @{" LocalContextItemPtr " link Modul 51}         @{" StoredProperty " link Modul 53}
   @{" StoredPropertyPtr " link Modul 57}        

@endnode
@node Modul "HYPER:Modula-2/IFFParseD.def.guide"
DEFINITION MODULE IFFParseD; (*$ Implementation:=FALSE *)
(* 16-Apr-1992/cn *)

FROM SYSTEM IMPORT ADDRESS,BITSET,CAST;
FROM ExecD IMPORT @{" MinNode " link HYPER:Modula-2/ExecD.def.guide/Modul 26},@{" MsgPort " link HYPER:Modula-2/ExecD.def.guide/Modul 360};
FROM Clipboard IMPORT @{" IOClipReq " link HYPER:Modula-2/Clipboard.def.guide/Modul 34};

CONST
  iffparseName="iffparse.library";

TYPE
 @{" IFFFlags " link HYPER:Modula-2/IFFParseD.def.guide/Modul 10}=(
  write,fSeek,rSeek,iff3,iff4,iff5,iff6,iff7,iff8,iff9,iff10,iff11,
  iff12,iff13,iff14,iff15,iff16
 );
 @{" IFFFlagSet " link HYPER:Modula-2/IFFParseD.def.guide/Modul 15}=SET OF @{" IFFFlags " link HYPER:Modula-2/IFFParseD.def.guide/Modul 10};

 @{" IFFHandle " link HYPER:Modula-2/IFFParseD.def.guide/Modul 17}=RECORD
  stream:ADDRESS;
  flags:@{" IFFFlagSet " link HYPER:Modula-2/IFFParseD.def.guide/Modul 15};
  depth:LONGINT;
 END;
 @{" IFFHandlePtr " link HYPER:Modula-2/IFFParseD.def.guide/Modul 22}=POINTER TO @{" IFFHandle " link HYPER:Modula-2/IFFParseD.def.guide/Modul 17};

CONST
 iffRead=@{" IFFFlagSet " link HYPER:Modula-2/IFFParseD.def.guide/Modul 15}{};
 iffWrite=@{" IFFFlagSet " link HYPER:Modula-2/IFFParseD.def.guide/Modul 15}{write};

TYPE
 @{" IFFStreamCmd " link HYPER:Modula-2/IFFParseD.def.guide/Modul 28}=RECORD
  command:LONGINT;
  buf:ADDRESS;
  nBytes:LONGINT;
 END;
 @{" IFFStreamCmdPtr " link HYPER:Modula-2/IFFParseD.def.guide/Modul 34}=POINTER TO @{" IFFStreamCmd " link HYPER:Modula-2/IFFParseD.def.guide/Modul 28};

 @{" ContextNode " link HYPER:Modula-2/IFFParseD.def.guide/Modul 36}=RECORD
  node:@{" MinNode " link HYPER:Modula-2/ExecD.def.guide/Modul 26};
  id:LONGINT;
  type:LONGINT;
  size:LONGINT;
  scan:LONGINT;
 END;
 @{" ContextNodePtr " link HYPER:Modula-2/IFFParseD.def.guide/Modul 43}=POINTER TO @{" ContextNode " link HYPER:Modula-2/IFFParseD.def.guide/Modul 36};

 @{" LocalContextItem " link HYPER:Modula-2/IFFParseD.def.guide/Modul 45}=RECORD
  node:@{" MinNode " link HYPER:Modula-2/ExecD.def.guide/Modul 26};
  id:LONGCARD;
  type:LONGCARD;
  ident:LONGCARD;
 END;
 @{" LocalContextItemPtr " link HYPER:Modula-2/IFFParseD.def.guide/Modul 51}=POINTER TO @{" LocalContextItem " link HYPER:Modula-2/IFFParseD.def.guide/Modul 45};

 @{" StoredProperty " link HYPER:Modula-2/IFFParseD.def.guide/Modul 53}=RECORD
  size:LONGINT;
  data:ADDRESS;
 END;
 @{" StoredPropertyPtr " link HYPER:Modula-2/IFFParseD.def.guide/Modul 57}=POINTER TO @{" StoredProperty " link HYPER:Modula-2/IFFParseD.def.guide/Modul 53};

 @{" CollectionItemPtr " link HYPER:Modula-2/IFFParseD.def.guide/Modul 59}=POINTER TO @{" CollectionItem " link HYPER:Modula-2/IFFParseD.def.guide/Modul 60};
 @{" CollectionItem " link HYPER:Modula-2/IFFParseD.def.guide/Modul 60}=RECORD
  next:@{" CollectionItemPtr " link HYPER:Modula-2/IFFParseD.def.guide/Modul 59};
  size:LONGINT;
  data:ADDRESS;
 END;

 @{" ClipboardHandle " link HYPER:Modula-2/IFFParseD.def.guide/Modul 66}=RECORD
  req:@{" IOClipReq " link HYPER:Modula-2/Clipboard.def.guide/Modul 34};
  cbPort:@{" MsgPort " link HYPER:Modula-2/ExecD.def.guide/Modul 360};
  satisfyPort:@{" MsgPort " link HYPER:Modula-2/ExecD.def.guide/Modul 360};
 END;
 @{" ClipboardHandlePtr " link HYPER:Modula-2/IFFParseD.def.guide/Modul 71}=POINTER TO @{" ClipboardHandle " link HYPER:Modula-2/IFFParseD.def.guide/Modul 66};

CONST
 ifferrEof=-1;
 ifferrEoc=-2;
 ifferrNoscope=-3;
 ifferrNomem=-4;
 ifferrRead=-5;
 ifferrWrite=-6;
 ifferrSeek=-7;
 ifferrMangled=-8;
 ifferrSyntax=-9;
 ifferrNotiff=-10;
 ifferrNohook=-11;
 iffReturn2client=-12;

 idFORM=CAST(LONGINT,'FORM');
 idLIST=CAST(LONGINT,'LIST');
 idCAT=CAST(LONGINT,'CAT ');
 idPROP=CAST(LONGINT,'PROP');
 idNULL=CAST(LONGINT,'    ');

 ifflciPROP=CAST(LONGINT,'prop');
 ifflciCOLLECTION=CAST(LONGINT,'coll');
 ifflciENTRYHANDLER=CAST(LONGINT,'enhd');
 ifflciEXITHANDLER=CAST(LONGINT,'exhd');

 iffparseScan=0;
 iffparseStep=1;
 iffparseRawstep=2;

 iffsliRoot=1;
 iffsliTop=2;
 iffsliProp=3;

 iffsizeUnknown=-1;

 iffcmdInit=0;
 iffcmdCleanup=1;
 iffcmdRead=2;
 iffcmdWrite=3;
 iffcmdSeek=4;
 iffcmdEntry=5;
 iffcmdExit=6;
 iffcmdPurgelci=7;

END IFFParseD.noimp

@endnode
