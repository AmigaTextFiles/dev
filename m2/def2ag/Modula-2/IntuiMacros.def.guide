@database HYPER:Modula-2/IntuiMacros
@node Main "HYPER:Modula-2/IntuiMacros"

Prozeduren

   @{" ItemNum " link Modul 18}                     @{" MenuItemUserData " link Modul 54}            @{" MenuNum " link Modul 17}
   @{" MenuUserData " link Modul 52}                @{" ShiftItem " link Modul 22}                   @{" ShiftMenu " link Modul 21}
   @{" ShiftNum " link Modul 30}                    @{" ShiftSub " link Modul 23}                    @{" SubNum " link Modul 19}


Typ-Deklarationen

   @{" ExtMenu " link Modul 40}                     @{" ExtMenuItem " link Modul 46}                 @{" ExtMenuItemPtr " link Modul 50}
   @{" ExtMenuPtr " link Modul 45}               

@endnode
@node Modul "HYPER:Modula-2/IntuiMacros.def.guide"
DEFINITION MODULE IntuiMacros;
(*$ LargeVars:=FALSE NameChk:=FALSE *)
(* 19-Aug-92 /bp *)
(*
 * Diese Prozeduren sind in der Schnittstelle
 * der Programmiersprache C als Macros definiert.
 *
 * In Modula-2 müssen diese als Prozeduren ver-
 * wirklicht werden. Die ersten drei Prozeduren
 * zerlegen den Code, der von Intuition bei einer
 * Menuauswahl geliefert wird in die einzelnen
 * Teile, während die anderen drei Prozeduren
 * einen solchen Wert zusammensetzen.
 *)

IMPORT S:SYSTEM, I:IntuitionD;

PROCEDURE MenuNum(code{0}: CARDINAL): CARDINAL;
PROCEDURE ItemNum(code{0}: CARDINAL): CARDINAL;
PROCEDURE SubNum(code{0}: CARDINAL): CARDINAL;

PROCEDURE ShiftMenu(code{0}: CARDINAL): CARDINAL;
PROCEDURE ShiftItem(code{0}: CARDINAL): CARDINAL;
PROCEDURE ShiftSub(code{0}: CARDINAL): CARDINAL;
(*
 In der vorherigen Version wurde die Prozedur ShiftSub fälschlicherweise
 ShiftNum genannt. Damit bestehende Programme die diese Funktion unter
 dem altent Namen verwenden, ist sie hier noch enthalten.
 Alle neuen Programme sollten die identische Funktion ShiftSub verwenden.
*)
PROCEDURE ShiftNum(code{0}: CARDINAL): CARDINAL;

(*
 * Macros für GadTools:
 * Menu und MenuItem können ab V36 ein Feld userData enthalten,
 * das durch GadToolsL.CreateMenusA initialisiert wird.
 * Die beiden folgenden Prozeduren liefern den Inhalt des Feldes.
 * Sinnvoller wäre allerdings ein Typ ExtMenu(Item), dessen Feld
 * userData gleich den gewünschten (Long)typ hat.
 *)
TYPE
  @{" ExtMenu " link HYPER:Modula-2/IntuiMacros.def.guide/Modul 40} = RECORD
    m: I.@{" Menu " link HYPER:Modula-2/IntuitionD.def.guide/Modul 91};
    userData: S.ADDRESS;
  END;
  @{" ExtMenuPtr " link HYPER:Modula-2/IntuiMacros.def.guide/Modul 45} = POINTER TO @{" ExtMenu " link HYPER:Modula-2/IntuiMacros.def.guide/Modul 40};
  @{" ExtMenuItem " link HYPER:Modula-2/IntuiMacros.def.guide/Modul 46} = RECORD
    i: I.@{" MenuItem " link HYPER:Modula-2/IntuitionD.def.guide/Modul 118};
    userData: S.ADDRESS;
  END;
  @{" ExtMenuItemPtr " link HYPER:Modula-2/IntuiMacros.def.guide/Modul 50} = POINTER TO @{" ExtMenuItem " link HYPER:Modula-2/IntuiMacros.def.guide/Modul 46};

PROCEDURE MenuUserData(m{8}: I.@{" MenuPtr " link HYPER:Modula-2/IntuitionD.def.guide/Modul 62}): S.ADDRESS;

PROCEDURE MenuItemUserData(i{8}: I.@{" MenuItemPtr " link HYPER:Modula-2/IntuitionD.def.guide/Modul 61}): S.ADDRESS;

END IntuiMacros.

@endnode
