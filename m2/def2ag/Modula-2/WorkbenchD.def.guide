@database HYPER:Modula-2/WorkbenchD
@node Main "HYPER:Modula-2/WorkbenchD"

Konstanten

   @{" amVersion " link Modul 93}                   @{" diskMagic " link Modul 20}                   @{" diskRevision " link Modul 22}
   @{" diskVersion " link Modul 21}                 @{" drawerDataFileSize " link Modul 71}          @{" gadgetBackFill " link Modul 24}
   @{" noIconPosition " link Modul 26}              @{" oldDrawerDataFileSize " link Modul 69}       @{" workbenchName " link Modul 17}


Typ-Deklarationen

   @{" AppIconPtr " link Modul 96}                  @{" AppMenuItemPtr " link Modul 99}              @{" AppMessage " link Modul 106}
   @{" AppMessagePtr " link Modul 122}               @{" AppWindowPtr " link Modul 124}                @{" DiskObject " link Modul 78}
   @{" DiskObjectPtr " link Modul 91}               @{" DrawerData " link Modul 60}                  @{" DrawerDataPtr " link Modul 67}
   @{" FreeList " link Modul 47}                    @{" FreeListPtr " link Modul 51}                 @{" MType " link Modul 101}
   @{" OldDrawerData " link Modul 53}               @{" OldDrawerDataPtr " link Modul 58}            @{" WBArg " link Modul 28}
   @{" WBArgPtr " link Modul 33}                    @{" WBArgumentsPtr " link Modul 35}              @{" WBObjectType " link Modul 73}
   @{" WBStartup " link Modul 37}                   @{" WBStartupPtr " link Modul 45}             

@endnode
@node Modul "HYPER:Modula-2/WorkbenchD.def.guide"
DEFINITION MODULE WorkbenchD; (*$Implementation:=FALSE*)
(* 17-May-1992/cn *)

FROM SYSTEM IMPORT ADDRESS,BPTR,LONGSET;

FROM DosD IMPORT
 @{" FileLockPtr " link HYPER:Modula-2/DosD.def.guide/Modul 206};

FROM ExecD IMPORT
 @{" Message " link HYPER:Modula-2/ExecD.def.guide/Modul 376},@{" MsgPortPtr " link HYPER:Modula-2/ExecD.def.guide/Modul 375},@{" List " link HYPER:Modula-2/ExecD.def.guide/Modul 30};

FROM IntuitionD IMPORT
 @{" Gadget " link HYPER:Modula-2/IntuitionD.def.guide/Modul 206},@{" GadgetFlags " link HYPER:Modula-2/IntuitionD.def.guide/Modul 163},@{" GadgetFlagSet " link HYPER:Modula-2/IntuitionD.def.guide/Modul 170},@{" NewWindow " link HYPER:Modula-2/IntuitionD.def.guide/Modul 496};

FROM GraphicsD IMPORT
 @{" ViewModeSet " link HYPER:Modula-2/GraphicsD.def.guide/Modul 1052};

CONST
 workbenchName="workbench.library";

 diskMagic=0E310H;
 diskVersion=1;
 diskRevision=1;

 gadgetBackFill=@{" GadgetFlagSet " link HYPER:Modula-2/IntuitionD.def.guide/Modul 170}{gadgHBox};

 noIconPosition=MIN(LONGINT);

TYPE
 @{" WBArg " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 28}=RECORD
  lock:@{" FileLockPtr " link HYPER:Modula-2/DosD.def.guide/Modul 206};
  name:ADDRESS
 END;
 @{" WBArgPtr " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 33}=POINTER TO @{" WBArg " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 28};

 @{" WBArgumentsPtr " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 35}=POINTER TO ARRAY [0..255] OF @{" WBArg " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 28};

 @{" WBStartup " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 37}=RECORD
  message:@{" Message " link HYPER:Modula-2/ExecD.def.guide/Modul 376};
  process:@{" MsgPortPtr " link HYPER:Modula-2/ExecD.def.guide/Modul 375};
  segment:BPTR;
  numArgs:LONGINT;
  toolWindow:ADDRESS;
  argList:@{" WBArgumentsPtr " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 35};
 END;
 @{" WBStartupPtr " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 45}=POINTER TO @{" WBStartup " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 37};

 @{" FreeList " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 47}=RECORD
  numFree:INTEGER;
  memList:@{" List " link HYPER:Modula-2/ExecD.def.guide/Modul 30}
 END;
 @{" FreeListPtr " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 51}=POINTER TO @{" FreeList " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 47};

 @{" OldDrawerData " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 53}=RECORD
  newWindow:@{" NewWindow " link HYPER:Modula-2/IntuitionD.def.guide/Modul 496};
  currentX:LONGINT;
  currentY:LONGINT;
 END;
 @{" OldDrawerDataPtr " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 58}=POINTER TO @{" OldDrawerData " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 53};

 (*36*)@{" DrawerData " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 60}=RECORD
        newWindow:@{" NewWindow " link HYPER:Modula-2/IntuitionD.def.guide/Modul 496};
        currentX:LONGINT;
        currentY:LONGINT;
        flags:LONGSET;
        viewModes:@{" ViewModeSet " link HYPER:Modula-2/GraphicsD.def.guide/Modul 1052}
       END;
 (*36*)@{" DrawerDataPtr " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 67}=POINTER TO @{" DrawerData " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 60};

CONST
 oldDrawerDataFileSize=SIZE(@{" OldDrawerData " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 53});
 drawerDataFileSize=SIZE(@{" DrawerData " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 60});

TYPE
 @{" WBObjectType " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 73}=(
  wb0,disk,drawer,tool,project,garbage,device,kick,appicon
 );

 @{" DiskObject " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 78}=RECORD
  magic:CARDINAL;
  version:CARDINAL;
  gadget:@{" Gadget " link HYPER:Modula-2/IntuitionD.def.guide/Modul 206};
  type:@{" WBObjectType " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 73};
  defaultTool:ADDRESS;
  toolTypes:ADDRESS;
  currentX:LONGINT;
  currentY:LONGINT;
  drawerData:@{" DrawerDataPtr " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 67};
  toolWindow:ADDRESS;
  stackSize:LONGINT
 END;
 @{" DiskObjectPtr " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 91}=POINTER TO @{" DiskObject " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 78};

CONST
 amVersion=1;

TYPE
 @{" AppIconPtr " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 96};

 @{" AppMenuItemPtr " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 99};

 @{" MType " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 101}=(
  mt0,pstd,toolExit,diskChange,timer,closeDown,ioProc
  ,appWindow,appIcon,appMenuItem,copyExit,iconPut
 );

 @{" AppMessage " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 106}=RECORD
  message:@{" Message " link HYPER:Modula-2/ExecD.def.guide/Modul 376};
  pad0:SHORTINT; (* Muss auf 0 gesetzt werden! *)
  type:@{" MType " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 101};
  userData:LONGINT;
  id:LONGCARD;
  numArgs:LONGINT;
  argList:@{" WBArgumentsPtr " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 35};
  version:CARDINAL;
  class:CARDINAL;
  mouseX:INTEGER;
  mouseY:INTEGER;
  seconds:LONGCARD;
  micros:LONGCARD;
  reserved:ARRAY[0..7] OF LONGINT;
 END;
 @{" AppMessagePtr " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 122}=POINTER TO @{" AppMessage " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 106};

 @{" AppWindowPtr " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 124};

END WorkbenchD.noimp

@endnode
