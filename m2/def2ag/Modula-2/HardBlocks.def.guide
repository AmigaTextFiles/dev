@database HYPER:Modula-2/HardBlocks
@node Main "HYPER:Modula-2/HardBlocks"

Konstanten

   @{" badBlock " link Modul 7}                    @{" fileSysHeader " link Modul 9}               @{" loadSeg " link Modul 10}
   @{" locationLimit " link Modul 12}               @{" nil " link Modul 13}                         @{" partition " link Modul 8}
   @{" rigidDisk " link Modul 5}                

Typ-Deklarationen

   @{" BadBlockBlock " link Modul 65}               @{" BadBlockEntry " link Modul 61}               @{" FileSysHeaderBlock " link Modul 96}
   @{" LoadSegBlock " link Modul 120}                @{" PartitionBlock " link Modul 81}              @{" PartitionFlagSet " link Modul 80}
   @{" PartitionFlags " link Modul 75}              @{" RigidDiskBlock " link Modul 23}              @{" RigidDiskFlagSet " link Modul 21}
   @{" RigidDiskFlags " link Modul 15}           

@endnode
@node Modul "HYPER:Modula-2/HardBlocks.def.guide"
DEFINITION MODULE HardBlocks; (*$ Implementation:=FALSE *)
(* 16-Apr-1992/cn *)

FROM SYSTEM IMPORT LONGSET;

CONST
 rigidDisk="RDSK";
 badBlock="BADB";
 partition="PART";
 fileSysHeader="FSHD";
 loadSeg="LSEG";

 locationLimit=16;
 nil=0FFFFFFFFH;

TYPE
 @{" RigidDiskFlags " link HYPER:Modula-2/HardBlocks.def.guide/Modul 15}=(
  last,lastLun,lastId,noReselect,diskId,ctrlId,synch,rdf7,
  rdf8,rdf9,rdf10,rdf11,rdf12,rdf13,rdf14,rdf15,
  rdf16
 );
 @{" RigidDiskFlagSet " link HYPER:Modula-2/HardBlocks.def.guide/Modul 21}=SET OF @{" RigidDiskFlags " link HYPER:Modula-2/HardBlocks.def.guide/Modul 15};

 @{" RigidDiskBlock " link HYPER:Modula-2/HardBlocks.def.guide/Modul 23}=RECORD
  id:ARRAY [0..3] OF CHAR;
  summedLongs:LONGCARD;
  chkSum:LONGINT;
  hostID:LONGCARD;
  blockBytes:LONGCARD;
  flags:@{" RigidDiskFlagSet " link HYPER:Modula-2/HardBlocks.def.guide/Modul 21};
  badBlockList:LONGCARD;
  partitionList:LONGCARD;
  fileSysHeaderList:LONGCARD;
  driveInit:LONGCARD;
  reserved1:ARRAY [0..5] OF LONGCARD;
  cylinders:LONGCARD;
  sectors:LONGCARD;
  heads:LONGCARD;
  interleave:LONGCARD;
  park:LONGCARD;
  reserved2:ARRAY [0..2] OF LONGCARD;
  writePreComp:LONGCARD;
  reducedWrite:LONGCARD;
  stepRate:LONGCARD;
  reserved3:ARRAY [0..4] OF LONGCARD;
  blocksLo:LONGCARD;
  blocksHi:LONGCARD;
  loCylinder:LONGCARD;
  hiCylinder:LONGCARD;
  cylBlocks:LONGCARD;
  autoParkSeconds:LONGCARD;
  reserved4:ARRAY [0..1] OF LONGCARD;
  diskVendor:ARRAY [0..7] OF CHAR;
  diskProduct:ARRAY [0..15] OF CHAR;
  diskRevision:ARRAY [0..3] OF CHAR;
  controllerVendor:ARRAY [0..7] OF CHAR;
  controllerProduct:ARRAY [0..15] OF CHAR;
  controllerRevision:ARRAY [0..3] OF CHAR;
  reserved5:ARRAY [0..9] OF LONGCARD;
 END;

 @{" BadBlockEntry " link HYPER:Modula-2/HardBlocks.def.guide/Modul 61}=RECORD
  badBlock:LONGCARD;
  goodBlock:LONGCARD;
 END;
 @{" BadBlockBlock " link HYPER:Modula-2/HardBlocks.def.guide/Modul 65}=RECORD
  id:ARRAY [0..3] OF CHAR;
  summedLongs:LONGCARD;
  chkSum:LONGINT;
  hostId:LONGCARD;
  next:LONGCARD;
  reserved:LONGCARD;
  blockPairs:ARRAY [0..60] OF @{" BadBlockEntry " link HYPER:Modula-2/HardBlocks.def.guide/Modul 61};
 END;

 @{" PartitionFlags " link HYPER:Modula-2/HardBlocks.def.guide/Modul 75}=(
  bootable,noMount,pf2,pf3,pf4,pf5,pf6,pf7,
  pf8,pf9,pf10,pf11,pf12,pf13,pf14,pf15,
  pf16
 );
 @{" PartitionFlagSet " link HYPER:Modula-2/HardBlocks.def.guide/Modul 80}=SET OF @{" PartitionFlags " link HYPER:Modula-2/HardBlocks.def.guide/Modul 75};
 @{" PartitionBlock " link HYPER:Modula-2/HardBlocks.def.guide/Modul 81}=RECORD
  id:ARRAY [0..3] OF CHAR;
  summedLongs:LONGCARD;
  chkSum:LONGINT;
  hostID:LONGCARD;
  next:LONGCARD;
  flags:@{" PartitionFlagSet " link HYPER:Modula-2/HardBlocks.def.guide/Modul 80};
  reserved1:ARRAY [0..1] OF LONGCARD;
  devFlags:LONGSET;
  driveName:ARRAY [0..31] OF CHAR;
  reserved2:ARRAY [0..14] OF LONGCARD;
  environment:ARRAY [0..16] OF LONGCARD;
  ereserved:ARRAY [0..14] OF LONGCARD;
 END;

 @{" FileSysHeaderBlock " link HYPER:Modula-2/HardBlocks.def.guide/Modul 96}=RECORD
  id:ARRAY [0..3] OF CHAR;
  summedLongs:LONGCARD;
  chkSum:LONGINT;
  hostID:LONGCARD;
  next:LONGCARD;
  flags:LONGSET;
  reserved1:ARRAY [0..1] OF LONGCARD;
  dosType:LONGCARD;
  version:LONGCARD;
  patchFlags:LONGSET;
  type:LONGCARD;
  task:LONGCARD;
  lock:LONGCARD;
  handler:LONGCARD;
  stackSize:LONGCARD;
  priority:LONGINT;
  startup:LONGINT;
  segListBlocks:LONGINT;
  globalVec:LONGINT;
  reserved2:ARRAY [0..22] OF LONGCARD;
  reserved3:ARRAY [0..20] OF LONGCARD;
 END;

 @{" LoadSegBlock " link HYPER:Modula-2/HardBlocks.def.guide/Modul 120}=RECORD
  id:ARRAY [0..3] OF CHAR;
  summedLongs:LONGCARD;
  chkSum:LONGINT;
  hostID:LONGCARD;
  next:LONGCARD;
  loadData:ARRAY [0..122] OF LONGCARD;
 END;

END HardBlocks.noimp

@endnode
