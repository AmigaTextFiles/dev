@database HYPER:Modula-2/Audio
@node Main "HYPER:Modula-2/Audio"

Konstanten

   @{" allocFailed " link Modul 30}                 @{" allocMaxprec " link Modul 12}                @{" allocMinprec " link Modul 11}
   @{" allocate " link Modul 22}                    @{" audioName " link Modul 6}                   @{" channelStolen " link Modul 31}
   @{" finish " link Modul 16}                      @{" free " link Modul 14}                        @{" hardChannels " link Modul 9}
   @{" lock " link Modul 18}                        @{" noAllocation " link Modul 29}                @{" noUnit " link Modul 21}
   @{" noWait " link Modul 26}                      @{" perVol " link Modul 17}                      @{" pervol " link Modul 24}
   @{" setPrec " link Modul 15}                     @{" syncCycle " link Modul 25}                   @{" waitCycle " link Modul 19}
   @{" writeMessage " link Modul 27}             

Typ-Deklarationen

   @{" IOAudio " link Modul 33}                     @{" IOAudioPtr " link Modul 44}               

@endnode
@node Modul "HYPER:Modula-2/Audio.def.guide"
DEFINITION MODULE Audio; (*$ Implementation:=FALSE *)
(* 10-Mar-1992/cn *)

FROM SYSTEM IMPORT ADDRESS;
FROM ExecD IMPORT nonstd,@{" IOFlagSet " link HYPER:Modula-2/ExecD.def.guide/Modul 431},@{" IORequest " link HYPER:Modula-2/ExecD.def.guide/Modul 437},@{" Message " link HYPER:Modula-2/ExecD.def.guide/Modul 376};

CONST
 audioName="audio.device";

 hardChannels=4;

 allocMinprec=-128;
 allocMaxprec=127;

 free=nonstd+0;
 setPrec=nonstd+1;
 finish=nonstd+2;
 perVol=nonstd+3;
 lock=nonstd+4;
 waitCycle=nonstd+5;

 noUnit=32;
 allocate=noUnit+0;

 pervol=@{" IOFlagSet " link HYPER:Modula-2/ExecD.def.guide/Modul 431}{4};
 syncCycle=@{" IOFlagSet " link HYPER:Modula-2/ExecD.def.guide/Modul 431}{5};
 noWait=@{" IOFlagSet " link HYPER:Modula-2/ExecD.def.guide/Modul 431}{6};
 writeMessage=@{" IOFlagSet " link HYPER:Modula-2/ExecD.def.guide/Modul 431}{7};

 noAllocation=-10;
 allocFailed=-11;
 channelStolen=-12;

TYPE
 @{" IOAudio " link HYPER:Modula-2/Audio.def.guide/Modul 33}=RECORD
  request:@{" IORequest " link HYPER:Modula-2/ExecD.def.guide/Modul 437};
  allocKey:INTEGER;
  data:ADDRESS;
  length:LONGCARD;
  period:CARDINAL;
  volume:CARDINAL;
  cycles:CARDINAL;
  writeMsg:@{" Message " link HYPER:Modula-2/ExecD.def.guide/Modul 376};
 END;
 @{" IOAudioPtr " link HYPER:Modula-2/Audio.def.guide/Modul 44}=POINTER TO @{" IOAudio " link HYPER:Modula-2/Audio.def.guide/Modul 33};

END Audio.noimp

@endnode
