@database HYPER:Modula-2/Narrator
@node Main "HYPER:Modula-2/Narrator"

Konstanten

   @{" cantAlloc " link Modul 15}                   @{" centPhonErr " link Modul 27}                 @{" dCentErr " link Modul 26}
   @{" defArtic " link Modul 40}                    @{" defCentral " link Modul 41}                  @{" defF0Enthus " link Modul 43}
   @{" defF0Pert " link Modul 42}                   @{" defFreq " link Modul 32}                     @{" defMode " link Modul 39}
   @{" defPitch " link Modul 29}                    @{" defPriority " link Modul 44}                 @{" defRate " link Modul 30}
   @{" defSex " link Modul 38}                      @{" defVol " link Modul 31}                      @{" expunged " link Modul 18}
   @{" female " link Modul 34}                      @{" freqErr " link Modul 24}                     @{" makeBad " link Modul 13}
   @{" male " link Modul 33}                        @{" manual " link Modul 37}                      @{" maxCent " link Modul 55}
   @{" maxFreq " link Modul 51}                     @{" maxPitch " link Modul 49}                    @{" maxRate " link Modul 47}
   @{" maxVol " link Modul 53}                      @{" minCent " link Modul 54}                     @{" minFreq " link Modul 50}
   @{" minPitch " link Modul 48}                    @{" minRate " link Modul 46}                     @{" minVol " link Modul 52}
   @{" modeErr " link Modul 23}                     @{" narratorName " link Modul 8}                @{" natural " link Modul 35}
   @{" noAudLib " link Modul 12}                    @{" noMem " link Modul 11}                       @{" noWrite " link Modul 17}
   @{" phonErr " link Modul 19}                     @{" pitchErr " link Modul 21}                    @{" rateErr " link Modul 20}
   @{" robotic " link Modul 36}                     @{" sexErr " link Modul 22}                      @{" unimpl " link Modul 16}
   @{" unitErr " link Modul 14}                     @{" volErr " link Modul 25}                   

Typ-Deklarationen

   @{" IONarrator " link Modul 146}                  @{" IONarratorPtr " link Modul 147}               @{" IONewNarrator " link Modul 148}
   @{" IONewNarratorPtr " link Modul 149}            @{" Mouth " link Modul 125}                       @{" MouthPtr " link Modul 132}
   @{" Narrator " link Modul 76}                    @{" NarratorFlagSet " link Modul 59}             @{" NarratorFlags " link Modul 57}
   @{" NarratorPtr " link Modul 91}                 @{" NewMouth " link Modul 134}                    @{" NewMouthPtr " link Modul 141}
   @{" NewNarrator " link Modul 93}                 @{" NewNarratorPtr " link Modul 123}           

@endnode
@node Modul "HYPER:Modula-2/Narrator.def.guide"
DEFINITION MODULE @{" Narrator " link HYPER:Modula-2/Narrator.def.guide/Modul 76}; (*$ Implementation:=FALSE *)
(* 05-May-92/cn *)

FROM SYSTEM IMPORT ADDRESS,BYTE,LONGSET;

FROM ExecD
 IMPORT @{" IOStdReq " link HYPER:Modula-2/ExecD.def.guide/Modul 447};

CONST
 narratorName="narrator.device";

 noMem=-2;
 noAudLib=-3;
 makeBad=-4;
 unitErr=-5;
 cantAlloc=-6;
 unimpl=-7;
 noWrite=-8;
 expunged=-9;
 phonErr=-20;
 rateErr=-21;
 pitchErr=-22;
 sexErr=-23;
 modeErr=-24;
 freqErr=-25;
 volErr=-26;
 dCentErr=-27;
 centPhonErr=-28;

 defPitch=110;
 defRate=150;
 defVol=64;
 defFreq=22200;
 male=0;
 female=1;
 natural=0;
 robotic=1;
 manual=2;
 defSex=male;
 defMode=natural;
 defArtic=100;
 defCentral=0;
 defF0Pert=0;
 defF0Enthus=32;
 defPriority=100;

 minRate=40;
 maxRate=400;
 minPitch=65;
 maxPitch=320;
 minFreq=5000;
 maxFreq=28000;
 minVol=0;
 maxVol=64;
 minCent=0;
 maxCent=100;

TYPE
 @{" NarratorFlags " link HYPER:Modula-2/Narrator.def.guide/Modul 57}=(newIORB,wordSync,sylSync,nf3,nf4,nf5,nf6,nf7);
 @{" NarratorFlagSet " link HYPER:Modula-2/Narrator.def.guide/Modul 59}=SET OF @{" NarratorFlags " link HYPER:Modula-2/Narrator.def.guide/Modul 57};

(*
 Eine 1:1 Umsetzung der C-Schnittstelle wäre zwar möglich,
 führte jedoch dazu, daß Programme, die dies Modul importieren,
 unter Kickstart 1.3 nicht mehr laufen!

 Das Device ab Version 36/37 sieht in der Mouth-Message die
 eingetragene Länge an und füllt entsprechend die Felder
 width, height, shape und pad aus.

 Für die vom Device angenommene Größe des Mouth-RECORDs
 ist allein der in voice.message.message.length eingetragene
 Wert (wird durch CreateExtIO() eingetragen!) maßgebend,
 die voice.flags haben hier keinen Einfluß"
*)

 @{" Narrator " link HYPER:Modula-2/Narrator.def.guide/Modul 76}=RECORD
  message:@{" IOStdReq " link HYPER:Modula-2/ExecD.def.guide/Modul 447};
  rate:CARDINAL;
  pitch:CARDINAL;
  mode:CARDINAL;
  sex:CARDINAL;
  chMasks:ADDRESS;
  nmMasks:CARDINAL;
  volume:CARDINAL;
  sampFreq:CARDINAL;
  mouths:SHORTCARD;
  chanMask:SHORTCARD;
  numChan:SHORTCARD;
  (*37*)flags:@{" NarratorFlagSet " link HYPER:Modula-2/Narrator.def.guide/Modul 59};
 END;
 @{" NarratorPtr " link HYPER:Modula-2/Narrator.def.guide/Modul 91}=POINTER TO @{" Narrator " link HYPER:Modula-2/Narrator.def.guide/Modul 76};

 @{" NewNarrator " link HYPER:Modula-2/Narrator.def.guide/Modul 93}=RECORD
  message:@{" IOStdReq " link HYPER:Modula-2/ExecD.def.guide/Modul 447};
  rate:CARDINAL;
  pitch:CARDINAL;
  mode:CARDINAL;
  sex:CARDINAL;
  chMasks:ADDRESS;
  nmMasks:CARDINAL;
  volume:CARDINAL;
  sampFreq:CARDINAL;
  mouths:SHORTCARD;
  chanMask:SHORTCARD;
  numChan:SHORTCARD;
  (*37*)flags:@{" NarratorFlagSet " link HYPER:Modula-2/Narrator.def.guide/Modul 59};
  (*36*)f0Enthusiasm:SHORTCARD;
  (*36*)f0Perturb:SHORTCARD;
  (*36*)f1Adj:SHORTINT;
  (*36*)f2Adj:SHORTINT;
  (*36*)f3Adj:SHORTINT;
  (*36*)a1Adj:SHORTINT;
  (*36*)a2Adj:SHORTINT;
  (*36*)a3Adj:SHORTINT;
  (*36*)articulate:SHORTCARD;
  (*36*)centralize:SHORTCARD;
  (*36*)centphon:ADDRESS;
  (*36*)avBias:SHORTINT;
  (*36*)afBias:SHORTINT;
  (*36*)priority:SHORTINT;
  (*36*)pad1:SHORTINT;
 END;
 @{" NewNarratorPtr " link HYPER:Modula-2/Narrator.def.guide/Modul 123}=POINTER TO @{" NewNarrator " link HYPER:Modula-2/Narrator.def.guide/Modul 93};

 @{" Mouth " link HYPER:Modula-2/Narrator.def.guide/Modul 125}=RECORD
  voice:@{" Narrator " link HYPER:Modula-2/Narrator.def.guide/Modul 76};
  width:SHORTCARD;
  height:SHORTCARD;
  shape:BYTE;
  pad:BYTE;
 END;
 @{" MouthPtr " link HYPER:Modula-2/Narrator.def.guide/Modul 132}=POINTER TO @{" Mouth " link HYPER:Modula-2/Narrator.def.guide/Modul 125};

 @{" NewMouth " link HYPER:Modula-2/Narrator.def.guide/Modul 134}=RECORD
  voice:@{" NewNarrator " link HYPER:Modula-2/Narrator.def.guide/Modul 93};
  width:SHORTCARD;
  height:SHORTCARD;
  shape:BYTE;
  (*37*)sync:@{" NarratorFlagSet " link HYPER:Modula-2/Narrator.def.guide/Modul 59};
 END;
 @{" NewMouthPtr " link HYPER:Modula-2/Narrator.def.guide/Modul 141}=POINTER TO @{" NewMouth " link HYPER:Modula-2/Narrator.def.guide/Modul 134};

(*
 Synonyme mit einheitlicher Namensgebung
*)
 @{" IONarrator " link HYPER:Modula-2/Narrator.def.guide/Modul 146}=@{" Narrator " link HYPER:Modula-2/Narrator.def.guide/Modul 76};
 @{" IONarratorPtr " link HYPER:Modula-2/Narrator.def.guide/Modul 147}=@{" NarratorPtr " link HYPER:Modula-2/Narrator.def.guide/Modul 91};
 @{" IONewNarrator " link HYPER:Modula-2/Narrator.def.guide/Modul 148}=@{" NewNarrator " link HYPER:Modula-2/Narrator.def.guide/Modul 93};
 @{" IONewNarratorPtr " link HYPER:Modula-2/Narrator.def.guide/Modul 149}=@{" NewNarratorPtr " link HYPER:Modula-2/Narrator.def.guide/Modul 123};

END @{" Narrator " link HYPER:Modula-2/Narrator.def.guide/Modul 76}.noimp

@endnode
