@database HYPER:Modula-2/AslD
@node Main "HYPER:Modula-2/AslD"

Konstanten

   @{" aslFileRequest " link Modul 22}              @{" aslFontRequest " link Modul 23}              @{" aslName " link Modul 18}
   @{" aslPattern " link Modul 300}                  @{" aslScreenModeRequest " link Modul 24}        @{" aslTB " link Modul 20}
   @{" fofFilterFunc " link Modul 190}               @{" fofIntuiFunc " link Modul 188}                @{" frfFilterFunc " link Modul 121}
   @{" frfIntuiFunc " link Modul 119}                @{" tfoDoBackPen " link Modul 171}                @{" tfoDoDrawMode " link Modul 173}
   @{" tfoDoFrontPen " link Modul 170}               @{" tfoDoStyle " link Modul 172}                  @{" tfoFilterFunc " link Modul 178}
   @{" tfoFixedWidthOnly " link Modul 175}           @{" tfoFlags " link Modul 169}                    @{" tfoHookFunc " link Modul 179}
   @{" tfoInitialBackPen " link Modul 166}           @{" tfoInitialDrawMode " link Modul 167}          @{" tfoInitialFlags " link Modul 164}
   @{" tfoInitialFrontPen " link Modul 165}          @{" tfoInitialHeight " link Modul 160}            @{" tfoInitialLeftEdge " link Modul 157}
   @{" tfoInitialName " link Modul 161}              @{" tfoInitialSize " link Modul 162}              @{" tfoInitialStyle " link Modul 163}
   @{" tfoInitialTopEdge " link Modul 158}           @{" tfoInitialWidth " link Modul 159}             @{" tfoIntuiMsgFunc " link Modul 147}
   @{" tfoLocale " link Modul 152}                   @{" tfoMaxHeight " link Modul 177}                @{" tfoMinHeight " link Modul 176}
   @{" tfoModeList " link Modul 181}                 @{" tfoNegativeText " link Modul 155}             @{" tfoPositiveText " link Modul 154}
   @{" tfoPrivateIDCMP " link Modul 146}             @{" tfoPubScreenName " link Modul 145}            @{" tfoScreen " link Modul 144}
   @{" tfoSleepWindow " link Modul 148}              @{" tfoTextAttr " link Modul 151}                 @{" tfoTitleText " link Modul 153}
   @{" tfoUserData " link Modul 149}                 @{" tfoWindow " link Modul 142}                   @{" tfrAcceptPattern " link Modul 108}
   @{" tfrDoMultiSelect " link Modul 101}            @{" tfrDoPatterns " link Modul 102}               @{" tfrDoSaveMode " link Modul 100}
   @{" tfrDrawersOnly " link Modul 104}              @{" tfrFilterDrawers " link Modul 109}            @{" tfrFilterFunc " link Modul 105}
   @{" tfrFlags1 " link Modul 98}                   @{" tfrFlags2 " link Modul 99}                   @{" tfrHookFunc " link Modul 110}
   @{" tfrInitialDrawer " link Modul 95}            @{" tfrInitialFile " link Modul 94}              @{" tfrInitialHeight " link Modul 93}
   @{" tfrInitialLeftEdge " link Modul 90}          @{" tfrInitialPattern " link Modul 96}           @{" tfrInitialTopEdge " link Modul 91}
   @{" tfrInitialWidth " link Modul 92}             @{" tfrIntuiMsgFunc " link Modul 80}             @{" tfrLocale " link Modul 85}
   @{" tfrNegativeText " link Modul 88}             @{" tfrPositiveText " link Modul 87}             @{" tfrPrivateIDCMP " link Modul 79}
   @{" tfrPubScreenName " link Modul 78}            @{" tfrRejectIcons " link Modul 106}              @{" tfrRejectPattern " link Modul 107}
   @{" tfrScreen " link Modul 77}                   @{" tfrSleepWindow " link Modul 81}              @{" tfrTextAttr " link Modul 84}
   @{" tfrTitleText " link Modul 86}                @{" tfrUserData " link Modul 82}                 @{" tfrWindow " link Modul 75}
   @{" tsmCustomSMList " link Modul 270}             @{" tsmDoAutoScroll " link Modul 258}             @{" tsmDoDepth " link Modul 256}
   @{" tsmDoHeight " link Modul 255}                 @{" tsmDoOverscanType " link Modul 257}           @{" tsmDoWidth " link Modul 254}
   @{" tsmFilterFunc " link Modul 268}               @{" tsmInitialAutoScroll " link Modul 249}        @{" tsmInitialDisplayDepth " link Modul 247}
   @{" tsmInitialDisplayHeight " link Modul 246}     @{" tsmInitialDisplayID " link Modul 244}         @{" tsmInitialDisplayWidth " link Modul 245}
   @{" tsmInitialHeight " link Modul 243}            @{" tsmInitialInfoLeftEdge " link Modul 251}      @{" tsmInitialInfoOpened " link Modul 250}
   @{" tsmInitialInfoTopEdge " link Modul 252}       @{" tsmInitialLeftEdge " link Modul 240}          @{" tsmInitialOverscanType " link Modul 248}
   @{" tsmInitialTopEdge " link Modul 241}           @{" tsmInitialWidth " link Modul 242}             @{" tsmIntuiMsgFunc " link Modul 230}
   @{" tsmLocale " link Modul 235}                   @{" tsmMaxDepth " link Modul 267}                 @{" tsmMaxHeight " link Modul 265}
   @{" tsmMaxWidth " link Modul 263}                 @{" tsmMinDepth " link Modul 266}                 @{" tsmMinHeight " link Modul 264}
   @{" tsmMinWidth " link Modul 262}                 @{" tsmNegativeText " link Modul 238}             @{" tsmPositiveText " link Modul 237}
   @{" tsmPrivateIDCMP " link Modul 229}             @{" tsmPropertyFlags " link Modul 260}            @{" tsmPropertyMask " link Modul 261}
   @{" tsmPubScreenName " link Modul 228}            @{" tsmScreen " link Modul 227}                   @{" tsmSleepWindow " link Modul 231}
   @{" tsmTextAttr " link Modul 234}                 @{" tsmTitleText " link Modul 236}                @{" tsmUserData " link Modul 232}
   @{" tsmWindow " link Modul 225}                

Typ-Deklarationen

   @{" AslTags " link Modul 294}                     @{" DisplayMode " link Modul 218}                 @{" DisplayModePtr " link Modul 223}
   @{" FOFlag " link Modul 183}                      @{" FOFlagSet " link Modul 186}                   @{" FRFlag1 " link Modul 112}
   @{" FRFlag1Set " link Modul 115}                  @{" FRFlag2 " link Modul 116}                     @{" FRFlag2Set " link Modul 118}
   @{" Fil1FlagSet " link Modul 289}                 @{" Fil1Flags " link Modul 287}                   @{" FileReqFlagSet " link Modul 286}
   @{" FileReqFlags " link Modul 281}                @{" FileRequester " link Modul 55}               @{" FileRequesterPtr " link Modul 73}
   @{" FontReqFlagSet " link Modul 293}              @{" FontReqFlags " link Modul 290}                @{" FontRequester " link Modul 126}
   @{" FontRequesterPtr " link Modul 140}            @{" ScreenModeRequester " link Modul 195}         @{" ScreenModeRequesterPtr " link Modul 216}
   @{" StrPtr " link Modul 50}                   

@endnode
@node Modul "HYPER:Modula-2/AslD.def.guide"
DEFINITION MODULE AslD;(*$Implementation:=FALSE*)
(* 04-Aug-1992/bp *)

FROM SYSTEM IMPORT ADDRESS,LONGSET;

FROM ExecD IMPORT
 @{" Node " link HYPER:Modula-2/ExecD.def.guide/Modul 18};

FROM GraphicsD IMPORT
 @{" DimensionInfo " link HYPER:Modula-2/GraphicsD.def.guide/Modul 442},@{" DrawModeSet " link HYPER:Modula-2/GraphicsD.def.guide/Modul 811},@{" PropertyFlagSet " link HYPER:Modula-2/GraphicsD.def.guide/Modul 416},@{" TextAttr " link HYPER:Modula-2/GraphicsD.def.guide/Modul 913},@{" TTextAttr " link HYPER:Modula-2/GraphicsD.def.guide/Modul 920};

FROM UtilityD IMPORT
 @{" TagItemPtr " link HYPER:Modula-2/UtilityD.def.guide/Modul 22},tagUser;

FROM WorkbenchD IMPORT
 @{" WBArgumentsPtr " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 35};


CONST
 aslName="asl.library";
 aslTB=tagUser+80000H;

 aslFileRequest=0;
 aslFontRequest=1;
 aslScreenModeRequest=2;(*38*)


(*
 * Die Tags aslHookFunk(nicht mehr benutzen!), tfrHookFunc, tfoHookFunc
 * erwarten eine Prozeduradresse. Die Prozedur muss in M2Amiga
 * deklariert werden als
 *
 * PROCEDURE FileFunction(
 *  req:FileRequesterPtr; obj:ADDRESS; mask:LONGSET):LONGINT;
 *
 * bzw.
 *
 * PROCEDURE FontFunction(
 *  req:FontRequesterPtr; obj:ADDRESS; mask:LONGSET):LONGINT;
 *
 * Wichtig ist, dass die Funktionen mit den Compileroptionen
 * (*$
 *   LoadA4:=TRUE ParDealloc:=FALSE CaseChk:=FALSE NilChk:=FALSE
 *   OverflowChk:=FALSE RangeChk:=FALSE ReturnChk:=FALSE StackChk:=FALSE
 * *)
 * übersetzt werden.
 *
 *)


TYPE

(*=============================================================*)
 @{" StrPtr " link HYPER:Modula-2/Arts.def.guide/Modul 20}=POINTER TO ARRAY [0..511] OF CHAR;

 @{" FileRequester " link HYPER:Modula-2/AslD.def.guide/Modul 55}=RECORD
  reserved1:ADDRESS;
  file:@{" StrPtr " link HYPER:Modula-2/Arts.def.guide/Modul 20};
  dir:@{" StrPtr " link HYPER:Modula-2/Arts.def.guide/Modul 20};
  reserved2:ADDRESS;
  reserved3:SHORTCARD;
  reserved4:SHORTCARD;
  reserved5:ADDRESS;
  leftEdge,topEdge:INTEGER;
  width,height:INTEGER;
  reserved6:INTEGER;
  numArgs:LONGINT;
  argList:@{" WBArgumentsPtr " link HYPER:Modula-2/WorkbenchD.def.guide/Modul 35};
  userData:ADDRESS;
  reserved7:ADDRESS;
  reserved8:ADDRESS;
  pat:@{" StrPtr " link HYPER:Modula-2/Arts.def.guide/Modul 20};
 END;
 @{" FileRequesterPtr " link HYPER:Modula-2/AslD.def.guide/Modul 73}=POINTER TO @{" FileRequester " link HYPER:Modula-2/AslD.def.guide/Modul 55};

CONST (* t steht für TagItem, fr für FileRequester *)
 tfrWindow          =aslTB+2;
 tfrScreen          =aslTB+40;(*38*)
 tfrPubScreenName   =aslTB+41;(*38*)
 tfrPrivateIDCMP    =aslTB+42;(*38*)
 tfrIntuiMsgFunc    =aslTB+70;(*38*)
 tfrSleepWindow     =aslTB+43;(*38*)
 tfrUserData        =aslTB+52;(*38*)

 tfrTextAttr        =aslTB+51;(*38*)
 tfrLocale          =aslTB+50;(*38*)
 tfrTitleText       =aslTB+1;
 tfrPositiveText    =aslTB+18;
 tfrNegativeText    =aslTB+19;

 tfrInitialLeftEdge =aslTB+3;
 tfrInitialTopEdge  =aslTB+4;
 tfrInitialWidth    =aslTB+5;
 tfrInitialHeight   =aslTB+6;
 tfrInitialFile     =aslTB+8;
 tfrInitialDrawer   =aslTB+9;
 tfrInitialPattern  =aslTB+10;

 tfrFlags1          =aslTB+20;
 tfrFlags2          =aslTB+22;
 tfrDoSaveMode      =aslTB+44;(*38*)
 tfrDoMultiSelect   =aslTB+45;(*38*)
 tfrDoPatterns      =aslTB+46;(*38*)

 tfrDrawersOnly     =aslTB+47;(*38*)
 tfrFilterFunc      =aslTB+49;(*38*)
 tfrRejectIcons     =aslTB+60;(*38*)
 tfrRejectPattern   =aslTB+61;(*38*)
 tfrAcceptPattern   =aslTB+62;(*38*)
 tfrFilterDrawers   =aslTB+63;(*38*)
 tfrHookFunc        =aslTB+7;

TYPE
 @{" FRFlag1 " link HYPER:Modula-2/AslD.def.guide/Modul 112}=(frDoPatterns,fr1,fr2,frDoMultiSelect,
          frPrivateIDCMP,frDoSaveMode,frIntuiFunc,frFilterFunc);
 @{" FRFlag1Set " link HYPER:Modula-2/AslD.def.guide/Modul 115}=SET OF @{" FRFlag1 " link HYPER:Modula-2/AslD.def.guide/Modul 112};
 @{" FRFlag2 " link HYPER:Modula-2/AslD.def.guide/Modul 116}=(frDrawersOnly,frFilterDrawers,(*38*)frRejectIcons,fr3,
          fr4,fr5,fr6,fr7);
 @{" FRFlag2Set " link HYPER:Modula-2/AslD.def.guide/Modul 118}=SET OF @{" FRFlag2 " link HYPER:Modula-2/AslD.def.guide/Modul 116};
CONST
 frfIntuiFunc =LONGSET{ORD(frIntuiFunc)};
 frfFilterFunc=LONGSET{ORD(frFilterFunc)};



(*=============================================================*)
TYPE
 @{" FontRequester " link HYPER:Modula-2/AslD.def.guide/Modul 126}=RECORD
  reserved1:ARRAY [0..1] OF ADDRESS;
  attr:@{" TextAttr " link HYPER:Modula-2/GraphicsD.def.guide/Modul 913};
  frontPen:SHORTCARD;
  backPen:SHORTCARD;
  drawMode:@{" DrawModeSet " link HYPER:Modula-2/GraphicsD.def.guide/Modul 811};
  userData:ADDRESS;
  leftEdge:INTEGER;(*38*)
  topEdge:INTEGER; (*38*)
  width:INTEGER;   (*38*)
  height:INTEGER;  (*38*)
  tAttr:@{" TTextAttr " link HYPER:Modula-2/GraphicsD.def.guide/Modul 920}; (*38*)
 END;
 @{" FontRequesterPtr " link HYPER:Modula-2/AslD.def.guide/Modul 140}=POINTER TO @{" FontRequester " link HYPER:Modula-2/AslD.def.guide/Modul 126};

CONST (* t steht für TagItem, fo für FontRequester *)
 tfoWindow          =aslTB+2;
 tfoScreen          =aslTB+40;(*38*)
 tfoPubScreenName   =aslTB+41;(*38*)
 tfoPrivateIDCMP    =aslTB+42;(*38*)
 tfoIntuiMsgFunc    =aslTB+70;(*38*)
 tfoSleepWindow     =aslTB+43;(*38*)
 tfoUserData        =aslTB+52;(*38*)

 tfoTextAttr        =aslTB+51;(*38*)
 tfoLocale          =aslTB+50;(*38*)
 tfoTitleText       =aslTB+1;
 tfoPositiveText    =aslTB+18;
 tfoNegativeText    =aslTB+19;

 tfoInitialLeftEdge =aslTB+3;
 tfoInitialTopEdge  =aslTB+4;
 tfoInitialWidth    =aslTB+5;
 tfoInitialHeight   =aslTB+6;
 tfoInitialName     =aslTB+10;
 tfoInitialSize     =aslTB+11;
 tfoInitialStyle    =aslTB+12;
 tfoInitialFlags    =aslTB+13;
 tfoInitialFrontPen =aslTB+14;
 tfoInitialBackPen  =aslTB+15;
 tfoInitialDrawMode =aslTB+59;(*38*)

 tfoFlags           =aslTB+20;
 tfoDoFrontPen      =aslTB+44;(*38*)
 tfoDoBackPen       =aslTB+45;(*38*)
 tfoDoStyle         =aslTB+46;(*38*)
 tfoDoDrawMode      =aslTB+47;(*38*)

 tfoFixedWidthOnly  =aslTB+48;(*38*)
 tfoMinHeight       =aslTB+16;
 tfoMaxHeight       =aslTB+17;
 tfoFilterFunc      =aslTB+49;(*38*)
 tfoHookFunc        =aslTB+7;

 tfoModeList        =aslTB+21;

TYPE
 @{" FOFlag " link HYPER:Modula-2/AslD.def.guide/Modul 183}=(foDoFrontPen,foDoBackPen,foDoStyle,foDoDrawMode,
         foFixedWidthOnly,foPrivateIDCMP,foIntuiFunc,foFilterFunc);
 @{" FOFlagSet " link HYPER:Modula-2/AslD.def.guide/Modul 186}=SET OF @{" FOFlag " link HYPER:Modula-2/AslD.def.guide/Modul 183};

CONST
 fofIntuiFunc =LONGSET{ORD(foIntuiFunc)};
 fofFilterFunc=LONGSET{ORD(foFilterFunc)};



(*=============================================================*)
TYPE
 @{" ScreenModeRequester " link HYPER:Modula-2/AslD.def.guide/Modul 195}=RECORD (*38*)
  displayID:LONGCARD;
  displayWidth:LONGCARD;
  displayHeight:LONGCARD;
  displayDepth:CARDINAL;
  overscanType:CARDINAL;
  autoScroll:INTEGER; (* BOOL *)
  bitMapWidth:LONGCARD;
  bitMapHeight:LONGCARD;
  leftEdge:INTEGER;
  topEdge:INTEGER;
  width:INTEGER;
  height:INTEGER;
  infoOpened:INTEGER; (* BOOL *)
  infoLeftEdge:INTEGER;
  infoTopEdge:INTEGER;
  infoWidth:INTEGER;
  infoHeight:INTEGER;
  userData:ADDRESS;
 END;
 @{" ScreenModeRequesterPtr " link HYPER:Modula-2/AslD.def.guide/Modul 216}=POINTER TO @{" ScreenModeRequester " link HYPER:Modula-2/AslD.def.guide/Modul 195};(*38*)

 @{" DisplayMode " link HYPER:Modula-2/AslD.def.guide/Modul 218}=RECORD(*38*)
  node:@{" Node " link HYPER:Modula-2/ExecD.def.guide/Modul 18};
  dimensionInfo:@{" DimensionInfo " link HYPER:Modula-2/GraphicsD.def.guide/Modul 442};
  propertyFlags:@{" PropertyFlagSet " link HYPER:Modula-2/GraphicsD.def.guide/Modul 416};
 END;
 @{" DisplayModePtr " link HYPER:Modula-2/AslD.def.guide/Modul 223}=POINTER TO @{" DisplayMode " link HYPER:Modula-2/AslD.def.guide/Modul 218};(*38*)

CONST (* t steht für TagItem, sm für ScreenModeRequester *)
 tsmWindow               =aslTB+2;  (*38*)
 tsmScreen               =aslTB+40; (*38*)
 tsmPubScreenName        =aslTB+41; (*38*)
 tsmPrivateIDCMP         =aslTB+42; (*38*)
 tsmIntuiMsgFunc         =aslTB+70; (*38*)
 tsmSleepWindow          =aslTB+43; (*38*)
 tsmUserData             =aslTB+52; (*38*)

 tsmTextAttr             =aslTB+51; (*38*)
 tsmLocale               =aslTB+50; (*38*)
 tsmTitleText            =aslTB+1;  (*38*)
 tsmPositiveText         =aslTB+18; (*38*)
 tsmNegativeText         =aslTB+19; (*38*)

 tsmInitialLeftEdge      =aslTB+3;  (*38*)
 tsmInitialTopEdge       =aslTB+4;  (*38*)
 tsmInitialWidth         =aslTB+5;  (*38*)
 tsmInitialHeight        =aslTB+6;  (*38*)
 tsmInitialDisplayID     =aslTB+100;(*38*)
 tsmInitialDisplayWidth  =aslTB+101;(*38*)
 tsmInitialDisplayHeight =aslTB+102;(*38*)
 tsmInitialDisplayDepth  =aslTB+103;(*38*)
 tsmInitialOverscanType  =aslTB+104;(*38*)
 tsmInitialAutoScroll    =aslTB+105;(*38*)
 tsmInitialInfoOpened    =aslTB+106;(*38*)
 tsmInitialInfoLeftEdge  =aslTB+107;(*38*)
 tsmInitialInfoTopEdge   =aslTB+108;(*38*)

 tsmDoWidth              =aslTB+109;(*38*)
 tsmDoHeight             =aslTB+110;(*38*)
 tsmDoDepth              =aslTB+111;(*38*)
 tsmDoOverscanType       =aslTB+112;(*38*)
 tsmDoAutoScroll         =aslTB+113;(*38*)

 tsmPropertyFlags        =aslTB+114;(*38*)
 tsmPropertyMask         =aslTB+115;(*38*)
 tsmMinWidth             =aslTB+116;(*38*)
 tsmMaxWidth             =aslTB+117;(*38*)
 tsmMinHeight            =aslTB+118;(*38*)
 tsmMaxHeight            =aslTB+119;(*38*)
 tsmMinDepth             =aslTB+120;(*38*)
 tsmMaxDepth             =aslTB+121;(*38*)
 tsmFilterFunc           =aslTB+122;(*38*)

 tsmCustomSMList         =aslTB+123;(*38*)



(*
 * ------------------------------------------------------------------ *
 * !!!!!!!! OBSOLET !!!!!!!
 * Die folgenden Deklarationen sind aus Kompatibilitätsgründen noch
 * vorhanden. Bitte nicht mehr benutzen! Sie werden in der nächsten
 * Revision dieses Moduls entfernt.
 *)
   TYPE
    @{" FileReqFlags " link HYPER:Modula-2/AslD.def.guide/Modul 281}=(
     filPatGad,fil1,fil2,filMultiSelect,filNewIDCMP,filSave,filDoMsgFunc
     ,filDoWildFunc
    );
    @{" FileReqFlagSet " link HYPER:Modula-2/AslD.def.guide/Modul 286}=SET OF @{" FileReqFlags " link HYPER:Modula-2/AslD.def.guide/Modul 281};
    @{" Fil1Flags " link HYPER:Modula-2/AslD.def.guide/Modul 287}=(
     fil1NoFiles,fil1MatchDirs,fil12,fil13,fil14,fil15,fil16,fil17);
    @{" Fil1FlagSet " link HYPER:Modula-2/AslD.def.guide/Modul 289}=SET OF @{" Fil1Flags " link HYPER:Modula-2/AslD.def.guide/Modul 287};
    @{" FontReqFlags " link HYPER:Modula-2/AslD.def.guide/Modul 290}=(
     fonFrontColor,fonBackColor,fonStyles,fonDrawMode,fonFixedWidth
     ,fonNewIDCMP,fonDoMsgFunc,fonDoWildFunc);
    @{" FontReqFlagSet " link HYPER:Modula-2/AslD.def.guide/Modul 293}=SET OF @{" FontReqFlags " link HYPER:Modula-2/AslD.def.guide/Modul 290};
    @{" AslTags " link HYPER:Modula-2/AslD.def.guide/Modul 294}=(aslDummy:=tagUser+080000H,
     aslHail,aslWindow,aslLeftEdge,aslTopEdge,aslWidth,aslHeight,
     aslHookFunc,aslFile,aslDir,aslFontName,aslFontHeight,aslFontStyles,
     aslFontFlags,aslFrontPen,aslBackPen,aslMinHeight,aslMaxHeight,
     aslOKText,aslCancelText,aslFuncFlags,aslModeList,aslExtFlags1
    );
   CONST
    aslPattern=aslFontName;

END AslD.noimp

@endnode
