@database HYPER:Modula-2/ExpansionL
@node Main "HYPER:Modula-2/ExpansionL"

Prozeduren

   @{" AddBootNode " link Modul 15}                 @{" AddConfigDev " link Modul 21}                @{" AddDosNode " link Modul 23}
   @{" AllocConfigDev " link Modul 28}              @{" AllocExpansionMem " link Modul 30}           @{" ConfigBoard " link Modul 34}
   @{" FindConfigDev " link Modul 38}               @{" FreeConfigDev " link Modul 43}               @{" FreeExpansionMem " link Modul 45}
   @{" GetCurrentBinding " link Modul 49}           @{" MakeDosNode " link Modul 53}                 @{" ObtainConfigBinding " link Modul 56}
   @{" ReadExpansionByte " link Modul 58}           @{" ReadExpansionRom " link Modul 62}            @{" ReleaseConfigBinding " link Modul 66}
   @{" RemConfigDev " link Modul 68}                @{" SetCurrentBinding " link Modul 71}           @{" WriteExpansionByte " link Modul 75}


Konstanten

   @{" expansionMinVersion " link Modul 11}         @{" expansionName " link Modul 13}            

Variablen

   @{" expansionBase " link Modul 9}               @{" expansionVersion " link Modul 7}         

@endnode
@node Modul "HYPER:Modula-2/ExpansionL.def.guide"
DEFINITION MODULE ExpansionL {"expansion.library", 33};
(* 10-Mar-1992/cn *)

FROM SYSTEM IMPORT ADDRESS,BYTE,LONGSET;
FROM DosD IMPORT @{" DeviceNodePtr " link HYPER:Modula-2/DosD.def.guide/Modul 579};
IMPORT d:ExpansionD,R;

VAR
 expansionVersion:INTEGER;
 expansionBase:d.@{" ExpansionBasePtr " link HYPER:Modula-2/ExpansionD.def.guide/Modul 163};

CONST
 expansionMinVersion=33;
 expansionName="expansion.library";

PROCEDURE(*36*) @{" AddBootNode " link HYPER:Autodocs/expansion/AddBootNode() }(
                 bootPri{R.D0}:SHORTINT;
                 flags{R.D1}:LONGSET;
                 deviceNode{R.A0}:@{" DeviceNodePtr " link HYPER:Modula-2/DosD.def.guide/Modul 579};
                 configDev{R.A1}:d.@{" ConfigDevPtr " link HYPER:Modula-2/ExpansionD.def.guide/Modul 114}):BOOLEAN; CODE -36;

PROCEDURE @{" AddConfigDev " link HYPER:Autodocs/expansion/AddConfigDev() }(configDev{R.A0}:d.@{" ConfigDevPtr " link HYPER:Modula-2/ExpansionD.def.guide/Modul 114}); CODE -30;

PROCEDURE @{" AddDosNode " link HYPER:Autodocs/expansion/AddDosNode() }(
           bootPri{R.D0}:SHORTINT;
           flags{R.D1}:LONGSET;
           deviceNode{R.A0}:@{" DeviceNodePtr " link HYPER:Modula-2/DosD.def.guide/Modul 579}):BOOLEAN; CODE -150;

PROCEDURE @{" AllocConfigDev " link HYPER:Autodocs/expansion/AllocConfigDev() }():d.@{" ConfigDevPtr " link HYPER:Modula-2/ExpansionD.def.guide/Modul 114}; CODE -48;

PROCEDURE @{" AllocExpansionMem " link HYPER:Autodocs/expansion/AllocExpansionMem() }(
           numSlots{R.D0}:LONGCARD;
           slotOffset{R.D1}:LONGCARD):ADDRESS; CODE -54;

PROCEDURE @{" ConfigBoard " link HYPER:Autodocs/expansion/ConfigBoard() }(
           board{R.A0}:ADDRESS;
           configDev{R.A1}:d.@{" ConfigDevPtr " link HYPER:Modula-2/ExpansionD.def.guide/Modul 114}):LONGINT; CODE -60;

PROCEDURE @{" FindConfigDev " link HYPER:Autodocs/expansion/FindConfigDev() }(
           oldConfigDev{R.A0}:d.@{" ConfigDevPtr " link HYPER:Modula-2/ExpansionD.def.guide/Modul 114};
           manufacturer{R.D0}:LONGINT;
           product{R.D1}:LONGINT):d.@{" ConfigDevPtr " link HYPER:Modula-2/ExpansionD.def.guide/Modul 114}; CODE -72;

PROCEDURE @{" FreeConfigDev " link HYPER:Autodocs/expansion/FreeConfigDev() }(configDev{R.A0}:d.@{" ConfigDevPtr " link HYPER:Modula-2/ExpansionD.def.guide/Modul 114}); CODE -84;

PROCEDURE @{" FreeExpansionMem " link HYPER:Autodocs/expansion/FreeExpansionMem() }(
           startSlot{R.D0}:ADDRESS;
           numSlots{R.D1}:LONGCARD); CODE -90;

PROCEDURE @{" GetCurrentBinding " link HYPER:Autodocs/expansion/GetCurrentBinding() }(
           currentBinding{R.A0}:d.@{" CurrentBindingPtr " link HYPER:Modula-2/ExpansionD.def.guide/Modul 136};
           bindingSize{R.D0}:INTEGER):LONGINT; CODE -138;

PROCEDURE @{" MakeDosNode " link HYPER:Autodocs/expansion/MakeDosNode() }(
           parmPacket{R.A0}:d.@{" ParameterPktPtr " link HYPER:Modula-2/ExpansionD.def.guide/Modul 190}):@{" DeviceNodePtr " link HYPER:Modula-2/DosD.def.guide/Modul 579}; CODE -144;

PROCEDURE @{" ObtainConfigBinding " link HYPER:Autodocs/expansion/ObtainConfigBinding() }(); CODE -120;

PROCEDURE @{" ReadExpansionByte " link HYPER:Autodocs/expansion/ReadExpansionByte() }(
           board{R.A0}:ADDRESS;
           offset{R.D0}:LONGCARD):SHORTCARD; CODE -96;

PROCEDURE @{" ReadExpansionRom " link HYPER:Autodocs/expansion/ReadExpansionRom() }(
           board{R.A0}:ADDRESS;
           configDev{R.A1}:d.@{" ConfigDevPtr " link HYPER:Modula-2/ExpansionD.def.guide/Modul 114}); CODE -102;

PROCEDURE @{" ReleaseConfigBinding " link HYPER:Autodocs/expansion/ReleaseConfigBinding() }(); CODE -126;

PROCEDURE @{" RemConfigDev " link HYPER:Autodocs/expansion/RemConfigDev() }(
           configDev{R.A0}:d.@{" ConfigDevPtr " link HYPER:Modula-2/ExpansionD.def.guide/Modul 114}); CODE -108;

PROCEDURE @{" SetCurrentBinding " link HYPER:Autodocs/expansion/SetCurrentBinding() }(
           currentBinding{R.A0}:d.@{" CurrentBindingPtr " link HYPER:Modula-2/ExpansionD.def.guide/Modul 136};
           bindingSize{R.D0}:INTEGER); CODE -132;

PROCEDURE @{" WriteExpansionByte " link HYPER:Autodocs/expansion/WriteExpansionByte() }(
           board{R.A0}:ADDRESS;
           offset{R.D0}:LONGCARD;
           byte{R.D1}:BYTE); CODE -114;

END ExpansionL.

@endnode
