@database HYPER:Modula-2/FileSystem
@node Main "HYPER:Modula-2/FileSystem"

Prozeduren

   @{" Close " link Modul 29}                       @{" Delete " link Modul 30}                      @{" GetPos " link Modul 32}
   @{" Length " link Modul 33}                      @{" Lookup " link Modul 27}                      @{" ReadByteBlock " link Modul 36}
   @{" ReadBytes " link Modul 40}                   @{" ReadChar " link Modul 34}                    @{" SetPos " link Modul 31}
   @{" WriteByteBlock " link Modul 38}              @{" WriteBytes " link Modul 42}                  @{" WriteChar " link Modul 35}


Typ-Deklarationen

   @{" CHARPtr " link Modul 9}                     @{" File " link Modul 18}                        @{" FileMode " link Modul 16}
   @{" FileModeSet " link Modul 17}                 @{" Response " link Modul 11}                 

@endnode
@node Modul "HYPER:Modula-2/FileSystem.def.guide"
DEFINITION MODULE FileSystem;
(*$ LargeVars:=FALSE NameChk:=FALSE *)
(* 2.0 / 29.5.87 / ms *)

FROM SYSTEM IMPORT
 ADDRESS,BYTE;
FROM DosD IMPORT
 @{" FileHandlePtr " link HYPER:Modula-2/DosD.def.guide/Modul 204};

TYPE
  @{" CHARPtr " link HYPER:Modula-2/FileSystem.def.guide/Modul 9}=POINTER TO CHAR;
  @{" Response " link HYPER:Modula-2/FileSystem.def.guide/Modul 11}=(
    done,notdone,lockErr,openErr,readErr,writeErr,
    seekErr,memErr,inUse,notFound,diskWriteProtected,
    deviceNotMounted,diskFull,deleteProtected,
    writeProtected,notDosDisk,noDisk);
  @{" FileMode " link HYPER:Modula-2/FileSystem.def.guide/Modul 16}=(read,write,noBuffer);
  @{" FileModeSet " link HYPER:Modula-2/FileSystem.def.guide/Modul 17}=SET OF @{" FileMode " link HYPER:Modula-2/FileSystem.def.guide/Modul 16};
  @{" File " link HYPER:Modula-2/FileSystem.def.guide/Modul 18}=RECORD
    bufa,ela,ina,topa: @{" CHARPtr " link HYPER:Modula-2/FileSystem.def.guide/Modul 9};
    bufPos,filePos: LONGINT;
    file: @{" FileHandlePtr " link HYPER:Modula-2/DosD.def.guide/Modul 204};
    mode: @{" FileModeSet " link HYPER:Modula-2/FileSystem.def.guide/Modul 17};
    eof: BOOLEAN;
    res: @{" Response " link HYPER:Modula-2/FileSystem.def.guide/Modul 11};
  END;

PROCEDURE Lookup(VAR f: @{" File " link HYPER:Modula-2/FileSystem.def.guide/Modul 18}; name: ARRAY OF CHAR;
                 bufferSize: CARDINAL; new: BOOLEAN);
PROCEDURE @{" Close " link HYPER:Autodocs/dos/Close() }(VAR f: @{" File " link HYPER:Modula-2/FileSystem.def.guide/Modul 18});
PROCEDURE Delete(VAR f: @{" File " link HYPER:Modula-2/FileSystem.def.guide/Modul 18});
PROCEDURE SetPos(VAR f: @{" File " link HYPER:Modula-2/FileSystem.def.guide/Modul 18}; pos: LONGINT);
PROCEDURE GetPos(VAR f: @{" File " link HYPER:Modula-2/FileSystem.def.guide/Modul 18}; VAR pos: LONGINT);
PROCEDURE Length(VAR f: @{" File " link HYPER:Modula-2/FileSystem.def.guide/Modul 18}; VAR pos: LONGINT);
PROCEDURE ReadChar(VAR f: @{" File " link HYPER:Modula-2/FileSystem.def.guide/Modul 18}; VAR ch: CHAR);
PROCEDURE WriteChar(VAR f: @{" File " link HYPER:Modula-2/FileSystem.def.guide/Modul 18}; ch: CHAR);
PROCEDURE ReadByteBlock(VAR f: @{" File " link HYPER:Modula-2/FileSystem.def.guide/Modul 18};
                        VAR block: ARRAY OF BYTE);
PROCEDURE WriteByteBlock(VAR f: @{" File " link HYPER:Modula-2/FileSystem.def.guide/Modul 18};
                         VAR block: ARRAY OF BYTE);
PROCEDURE ReadBytes(VAR f: @{" File " link HYPER:Modula-2/FileSystem.def.guide/Modul 18}; adr: ADDRESS;
                    len: LONGINT; VAR actual: LONGINT);
PROCEDURE WriteBytes(VAR f: @{" File " link HYPER:Modula-2/FileSystem.def.guide/Modul 18}; adr: ADDRESS;
                     len: LONGINT; VAR actual: LONGINT);

END FileSystem.

@endnode
