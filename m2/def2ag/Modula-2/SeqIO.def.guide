@database HYPER:Modula-2/SeqIO
@node Main "HYPER:Modula-2/SeqIO"

Prozeduren

   @{" CloseSeq " link Modul 36}                    @{" OpenSeqIn " link Modul 32}                   @{" OpenSeqOut " link Modul 34}
   @{" SeqGetB " link Modul 44}                     @{" SeqGetL " link Modul 48}                     @{" SeqGetLQuick " link Modul 50}
   @{" SeqGetW " link Modul 46}                     @{" SeqInB " link Modul 43}                      @{" SeqInCount " link Modul 51}
   @{" SeqInL " link Modul 47}                      @{" SeqInLQuick " link Modul 49}                 @{" SeqInLen " link Modul 54}
   @{" SeqInPos " link Modul 53}                    @{" SeqInW " link Modul 45}                      @{" SeqOk " link Modul 38}
   @{" SeqOutB " link Modul 56}                     @{" SeqOutCount " link Modul 60}                 @{" SeqOutL " link Modul 58}
   @{" SeqOutLQuick " link Modul 59}                @{" SeqOutPos " link Modul 62}                   @{" SeqOutW " link Modul 57}


Typ-Deklarationen

   @{" SeqKey " link Modul 6}                   

@endnode
@node Modul "HYPER:Modula-2/SeqIO.def.guide"
DEFINITION MODULE SeqIO;
(* 7.6.90/bp *)
(*$ NameChk:=FALSE *)

FROM SYSTEM IMPORT BYTE, WORD, ADDRESS;

TYPE
   @{" SeqKey " link HYPER:Modula-2/SeqIO.def.guide/Modul 6}; (* Opaque. Geiht Di nix an! *)

(*
 * Modul für gepuffertes File-I/O.
 * Bei Programmende werden alle Files geschlossen.
 *
 * buffSize muß MINDESTENS 4 und durch 4 teilbar sein!
 * Bei einem Fehler wird die Datei sofort geschlossen.
 * Es ist aber trotzdem noch ein CloseSeq erforderlich.
 * Es kann auch bei einem Fehler immer einfach weiter
 * geschrieben werden. Beim Schreiben wird der übergebene
 * Wert dann ignoriert.
 * SeqInxx liefert nach einem Fehler immer 0 zurück.
 *
 * Es werden keinerlei Überprüfungen auf einen gültigen
 * Key vorgenommen!
 * Methode beim Lesen/Schreiben:
 * OpenSeqxx, SeqIn/Outyy,
 * IF SeqOk THEN ... ELSE ... END; CloseSeqxx;
 *
 * Die ..Quick.. Prozeduren dürfen nur dann benutzt
 * werden, wenn inerhalb der gesamten Datei NUR mit
 * Langworten gearbeitet wird!
 *)

PROCEDURE OpenSeqIn(VAR key:@{" SeqKey " link HYPER:Modula-2/SeqIO.def.guide/Modul 6}; name:ARRAY OF CHAR;
			buffSize:INTEGER):BOOLEAN;
PROCEDURE OpenSeqOut(VAR key:@{" SeqKey " link HYPER:Modula-2/SeqIO.def.guide/Modul 6}; name:ARRAY OF CHAR;
			buffSize:INTEGER):BOOLEAN;
PROCEDURE CloseSeq(VAR key:@{" SeqKey " link HYPER:Modula-2/SeqIO.def.guide/Modul 6});

PROCEDURE SeqOk(key{8}:@{" SeqKey " link HYPER:Modula-2/SeqIO.def.guide/Modul 6}):BOOLEAN;
(* TRUE, wenn soweit kein Fehler aufgetreten ist. *)

(* Die SeqGetxx rufen einfach die SeqInxx auf. *)

PROCEDURE SeqInB(key{8}:@{" SeqKey " link HYPER:Modula-2/SeqIO.def.guide/Modul 6}):CHAR;
PROCEDURE SeqGetB(key{8}:@{" SeqKey " link HYPER:Modula-2/SeqIO.def.guide/Modul 6}; VAR b{9}:BYTE);
PROCEDURE SeqInW(key{8}:@{" SeqKey " link HYPER:Modula-2/SeqIO.def.guide/Modul 6}):INTEGER;
PROCEDURE SeqGetW(key{8}:@{" SeqKey " link HYPER:Modula-2/SeqIO.def.guide/Modul 6}; VAR w{9}:WORD);
PROCEDURE SeqInL(key{8}:@{" SeqKey " link HYPER:Modula-2/SeqIO.def.guide/Modul 6}):LONGINT;
PROCEDURE SeqGetL(key{8}:@{" SeqKey " link HYPER:Modula-2/SeqIO.def.guide/Modul 6}; VAR l{9}:ADDRESS);
PROCEDURE SeqInLQuick(key{8}:@{" SeqKey " link HYPER:Modula-2/SeqIO.def.guide/Modul 6}):LONGINT;
PROCEDURE SeqGetLQuick(key{8}:@{" SeqKey " link HYPER:Modula-2/SeqIO.def.guide/Modul 6}; VAR l{9}:ADDRESS);
PROCEDURE SeqInCount(key:@{" SeqKey " link HYPER:Modula-2/SeqIO.def.guide/Modul 6}; adr:ADDRESS;
                     cnt:CARDINAL);
PROCEDURE SeqInPos(key{8}:@{" SeqKey " link HYPER:Modula-2/SeqIO.def.guide/Modul 6}):LONGINT;
PROCEDURE SeqInLen(key{8}:@{" SeqKey " link HYPER:Modula-2/SeqIO.def.guide/Modul 6}):LONGINT;

PROCEDURE SeqOutB(key{8}:@{" SeqKey " link HYPER:Modula-2/SeqIO.def.guide/Modul 6}; b{0}:BYTE);
PROCEDURE SeqOutW(key{8}:@{" SeqKey " link HYPER:Modula-2/SeqIO.def.guide/Modul 6}; w{0}:WORD);
PROCEDURE SeqOutL(key{8}:@{" SeqKey " link HYPER:Modula-2/SeqIO.def.guide/Modul 6}; l{0}:ADDRESS);
PROCEDURE SeqOutLQuick(key{8}:@{" SeqKey " link HYPER:Modula-2/SeqIO.def.guide/Modul 6}; b{0}:ADDRESS);
PROCEDURE SeqOutCount(key{8}:@{" SeqKey " link HYPER:Modula-2/SeqIO.def.guide/Modul 6}; adr{9}:ADDRESS;
                      cnt{0}:CARDINAL);
PROCEDURE SeqOutPos(key{8}:@{" SeqKey " link HYPER:Modula-2/SeqIO.def.guide/Modul 6}):LONGINT;
(* Liefert die momentane Länge des Files zurück *)

END SeqIO.

@endnode
