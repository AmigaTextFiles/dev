@database HYPER:Modula-2/Printer
@node Main "HYPER:Modula-2/Printer"

Konstanten

   @{" bms " link Modul 80}                         @{" cam " link Modul 83}                         @{" den1 " link Modul 43}
   @{" den2 " link Modul 42}                        @{" den3 " link Modul 41}                        @{" den4 " link Modul 40}
   @{" den5 " link Modul 39}                        @{" den6 " link Modul 38}                        @{" density3 " link Modul 121}
   @{" density5 " link Modul 123}                    @{" density6 " link Modul 124}                    @{" density7 " link Modul 125}
   @{" densityMask " link Modul 127}                 @{" dimensionMask " link Modul 129}               @{" dumpRPort " link Modul 14}
   @{" extend " link Modul 92}                      @{" fnt0 " link Modul 51}                        @{" fnt1 " link Modul 52}
   @{" fnt10 " link Modul 61}                       @{" fnt2 " link Modul 53}                        @{" fnt3 " link Modul 54}
   @{" fnt4 " link Modul 55}                        @{" fnt5 " link Modul 56}                        @{" fnt6 " link Modul 57}
   @{" fnt7 " link Modul 58}                        @{" fnt8 " link Modul 59}                        @{" fnt9 " link Modul 60}
   @{" hts " link Modul 84}                         @{" ind " link Modul 19}                         @{" jfy0 " link Modul 69}
   @{" jfy1 " link Modul 71}                        @{" jfy3 " link Modul 70}                        @{" jfy5 " link Modul 66}
   @{" jfy6 " link Modul 68}                        @{" jfy7 " link Modul 67}                        @{" lms " link Modul 77}
   @{" nel " link Modul 20}                         @{" perf " link Modul 75}                        @{" perf0 " link Modul 76}
   @{" pld " link Modul 50}                         @{" plu " link Modul 49}                         @{" printerName " link Modul 9}
   @{" prop0 " link Modul 64}                       @{" prop1 " link Modul 63}                       @{" prop2 " link Modul 62}
   @{" prtCommand " link Modul 13}                  @{" query " link Modul 15}                       @{" raw " link Modul 93}
   @{" rawWrite " link Modul 12}                    @{" ri " link Modul 21}                          @{" rin " link Modul 18}
   @{" ris " link Modul 17}                         @{" rms " link Modul 78}                         @{" sbc " link Modul 30}
   @{" sfc " link Modul 29}                         @{" sgr0 " link Modul 22}                        @{" sgr1 " link Modul 27}
   @{" sgr22 " link Modul 28}                       @{" sgr23 " link Modul 24}                       @{" sgr24 " link Modul 26}
   @{" sgr3 " link Modul 23}                        @{" sgr4 " link Modul 25}                        @{" shorp0 " link Modul 31}
   @{" shorp1 " link Modul 33}                      @{" shorp2 " link Modul 32}                      @{" shorp3 " link Modul 35}
   @{" shorp4 " link Modul 34}                      @{" shorp5 " link Modul 37}                      @{" shorp6 " link Modul 36}
   @{" slpp " link Modul 74}                        @{" slrm " link Modul 82}                        @{" stbm " link Modul 81}
   @{" sus0 " link Modul 48}                        @{" sus1 " link Modul 45}                        @{" sus2 " link Modul 44}
   @{" sus3 " link Modul 47}                        @{" sus4 " link Modul 46}                        @{" tbc0 " link Modul 86}
   @{" tbc1 " link Modul 88}                        @{" tbc3 " link Modul 87}                        @{" tbc4 " link Modul 89}
   @{" tbcall " link Modul 90}                      @{" tbsall " link Modul 91}                      @{" tms " link Modul 79}
   @{" tss " link Modul 65}                         @{" verp0 " link Modul 72}                       @{" verp1 " link Modul 73}
   @{" vts " link Modul 85}                      

Typ-Deklarationen

   @{" Error " link Modul 95}                       @{" IODRPReq " link Modul 131}                    @{" IODRPReqPtr " link Modul 151}
   @{" IOPrinter " link Modul 165}                   @{" IOPrinterPtr " link Modul 166}                @{" IOPrtCmdReq " link Modul 100}
   @{" IOPrtCmdReqPtr " link Modul 113}              @{" PrinterIO " link Modul 153}                   @{" PrinterIOPtr " link Modul 160}
   @{" Special " link Modul 115}                     @{" SpecialSet " link Modul 119}               

@endnode
@node Modul "HYPER:Modula-2/Printer.def.guide"
DEFINITION MODULE Printer; (*$ Implementation:=FALSE *)
(* 07-May-1992/cn 16-Aug-92/bp *)

FROM ExecD IMPORT
 nonstd,@{" DevicePtr " link HYPER:Modula-2/ExecD.def.guide/Modul 420},@{" IOFlagSet " link HYPER:Modula-2/ExecD.def.guide/Modul 431},@{" Message " link HYPER:Modula-2/ExecD.def.guide/Modul 376},@{" UnitPtr " link HYPER:Modula-2/ExecD.def.guide/Modul 429},@{" IORequest " link HYPER:Modula-2/ExecD.def.guide/Modul 437};

FROM GraphicsD IMPORT
 @{" ColorMapPtr " link HYPER:Modula-2/GraphicsD.def.guide/Modul 30},@{" RastPortPtr " link HYPER:Modula-2/GraphicsD.def.guide/Modul 51},@{" ViewModeSet " link HYPER:Modula-2/GraphicsD.def.guide/Modul 1052};

CONST
 printerName="printer.device";

 rawWrite=nonstd+0;
 prtCommand=nonstd+1;
 dumpRPort=nonstd+2;
 query=nonstd+3;

 ris=0;
 rin=1;
 ind=2;
 nel=3;
 ri=4;
 sgr0=5;
 sgr3=6;
 sgr23=7;
 sgr4=8;
 sgr24=9;
 sgr1=10;
 sgr22=11;
 sfc=12;
 sbc=13;
 shorp0=14;
 shorp2=15;
 shorp1=16;
 shorp4=17;
 shorp3=18;
 shorp6=19;
 shorp5=20;
 den6=21;
 den5=22;
 den4=23;
 den3=24;
 den2=25;
 den1=26;
 sus2=27;
 sus1=28;
 sus4=29;
 sus3=30;
 sus0=31;
 plu=32;
 pld=33;
 fnt0=34;
 fnt1=35;
 fnt2=36;
 fnt3=37;
 fnt4=38;
 fnt5=39;
 fnt6=40;
 fnt7=41;
 fnt8=42;
 fnt9=43;
 fnt10=44;
 prop2=45;
 prop1=46;
 prop0=47;
 tss=48;
 jfy5=49;
 jfy7=50;
 jfy6=51;
 jfy0=52;
 jfy3=53;
 jfy1=54;
 verp0=55;
 verp1=56;
 slpp=57;
 perf=58;
 perf0=59;
 lms=60;
 rms=61;
 tms=62;
 bms=63;
 stbm=64;
 slrm=65;
 cam=66;
 hts=67;
 vts=68;
 tbc0=69;
 tbc3=70;
 tbc1=71;
 tbc4=72;
 tbcall=73;
 tbsall=74;
 extend=75;
 raw=76;

TYPE
 @{" Error " link HYPER:Modula-2/Printer.def.guide/Modul 95}=(
  noErr,cancel,notGraphics,invertHam,badDimension,
  dimensionOvflow,internalMemory,bufferMemory,tookControl
 );
 @{" IOPrtCmdReq " link HYPER:Modula-2/Printer.def.guide/Modul 100}=RECORD
  message:@{" Message " link HYPER:Modula-2/ExecD.def.guide/Modul 376};
  device:@{" DevicePtr " link HYPER:Modula-2/ExecD.def.guide/Modul 420};
  unit:@{" UnitPtr " link HYPER:Modula-2/ExecD.def.guide/Modul 429};
  command:CARDINAL;
  flags:@{" IOFlagSet " link HYPER:Modula-2/ExecD.def.guide/Modul 431};
  error:@{" Error " link HYPER:Modula-2/Printer.def.guide/Modul 95};
  prtCommand:CARDINAL;
  parm0:SHORTCARD;
  parm1:SHORTCARD;
  parm2:SHORTCARD;
  parm3:SHORTCARD;
 END;
 @{" IOPrtCmdReqPtr " link HYPER:Modula-2/Printer.def.guide/Modul 113}=POINTER TO @{" IOPrtCmdReq " link HYPER:Modula-2/Printer.def.guide/Modul 100};

 @{" Special " link HYPER:Modula-2/Printer.def.guide/Modul 115}=(
  milCols,milRows,fullCols,fullRows,fracCols,fracRows,center,aspect,
  density1,density2,density4,noFormFeed,trustMe,noPrint,s14,s15
 );
 @{" SpecialSet " link HYPER:Modula-2/Printer.def.guide/Modul 119}=SET OF @{" Special " link HYPER:Modula-2/Printer.def.guide/Modul 115};

CONST
 density3=@{" SpecialSet " link HYPER:Modula-2/Printer.def.guide/Modul 119}{density1,density2};
 density5=@{" SpecialSet " link HYPER:Modula-2/Printer.def.guide/Modul 119}{density1,density4};
 density6=@{" SpecialSet " link HYPER:Modula-2/Printer.def.guide/Modul 119}{density2,density4};
 density7=@{" SpecialSet " link HYPER:Modula-2/Printer.def.guide/Modul 119}{density1..density4};

 densityMask=@{" SpecialSet " link HYPER:Modula-2/Printer.def.guide/Modul 119}{density1..density4};

 dimensionMask=@{" SpecialSet " link HYPER:Modula-2/Printer.def.guide/Modul 119}{milCols..fracRows,aspect};

TYPE
 @{" IODRPReq " link HYPER:Modula-2/Printer.def.guide/Modul 131}=RECORD
  message:@{" Message " link HYPER:Modula-2/ExecD.def.guide/Modul 376};
  device:@{" DevicePtr " link HYPER:Modula-2/ExecD.def.guide/Modul 420};
  unit:@{" UnitPtr " link HYPER:Modula-2/ExecD.def.guide/Modul 429};
  command:CARDINAL;
  flags:@{" IOFlagSet " link HYPER:Modula-2/ExecD.def.guide/Modul 431};
  error:@{" Error " link HYPER:Modula-2/Printer.def.guide/Modul 95};
  rastPort:@{" RastPortPtr " link HYPER:Modula-2/GraphicsD.def.guide/Modul 51};
  colorMap:@{" ColorMapPtr " link HYPER:Modula-2/GraphicsD.def.guide/Modul 30};
  modesHi:CARDINAL;     (* muss auf 0 gesetzt werden! *)
  modes:@{" ViewModeSet " link HYPER:Modula-2/GraphicsD.def.guide/Modul 1052};
  srcX:CARDINAL;
  srcY:CARDINAL;
  srcWidth:CARDINAL;
  srcHeight:CARDINAL;
  destCols:LONGINT;
  destRows:LONGINT;
  special:@{" SpecialSet " link HYPER:Modula-2/Printer.def.guide/Modul 119};
 END;
 @{" IODRPReqPtr " link HYPER:Modula-2/Printer.def.guide/Modul 151}=POINTER TO @{" IODRPReq " link HYPER:Modula-2/Printer.def.guide/Modul 131};

 @{" PrinterIO " link HYPER:Modula-2/Printer.def.guide/Modul 153} = RECORD
   CASE :INTEGER OF
   | 0: ios:   @{" IORequest " link HYPER:Modula-2/ExecD.def.guide/Modul 437};
   | 1: iodrp: @{" IODRPReq " link HYPER:Modula-2/Printer.def.guide/Modul 131};
   | 2: iopc:  @{" IOPrtCmdReq " link HYPER:Modula-2/Printer.def.guide/Modul 100};
   END;
 END;
 @{" PrinterIOPtr " link HYPER:Modula-2/Printer.def.guide/Modul 160} = POINTER TO @{" PrinterIO " link HYPER:Modula-2/Printer.def.guide/Modul 153};
 
(*
 Synonyme mit einheitlicher Namensgebung
*)
 @{" IOPrinter " link HYPER:Modula-2/Printer.def.guide/Modul 165}=@{" IOPrtCmdReq " link HYPER:Modula-2/Printer.def.guide/Modul 100};
 @{" IOPrinterPtr " link HYPER:Modula-2/Printer.def.guide/Modul 166}=@{" IOPrtCmdReqPtr " link HYPER:Modula-2/Printer.def.guide/Modul 113};

END Printer.noimp

@endnode
