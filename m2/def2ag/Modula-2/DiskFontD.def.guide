@database HYPER:Modula-2/DiskFontD
@node Main "HYPER:Modula-2/DiskFontD"

Konstanten

   @{" dfhId " link Modul 23}                       @{" diskfontName " link Modul 15}                @{" fchId " link Modul 21}
   @{" maxFontName " link Modul 19}                 @{" maxFontPath " link Modul 18}                 @{" tfhId " link Modul 22}


Typ-Deklarationen

   @{" AvailFont " link Modul 68}                   @{" AvailFontHeader " link Modul 78}             @{" AvailFontHeaderPtr " link Modul 82}
   @{" AvailFontTypeSet " link Modul 30}            @{" AvailFontTypes " link Modul 25}              @{" AvailFontsSet " link Modul 31}
   @{" DiskFontHeader " link Modul 55}              @{" DiskFontHeaderPtr " link Modul 66}           @{" FontContents " link Modul 33}
   @{" FontContentsHeader " link Modul 48}          @{" FontContentsHeaderPtr " link Modul 53}       @{" TAvailFont " link Modul 73}
   @{" TFontContents " link Modul 40}            

@endnode
@node Modul "HYPER:Modula-2/DiskFontD.def.guide"
DEFINITION MODULE DiskFontD; (*$Implementation:=FALSE*)
(* 16-May-1992/cn *)

FROM SYSTEM IMPORT ADDRESS,BPTR;

FROM ExecD IMPORT
 @{" Node " link HYPER:Modula-2/ExecD.def.guide/Modul 18};

FROM GraphicsD IMPORT
 @{" FontFlagSet " link HYPER:Modula-2/GraphicsD.def.guide/Modul 821},@{" FontStyleSet " link HYPER:Modula-2/GraphicsD.def.guide/Modul 816},@{" TextAttr " link HYPER:Modula-2/GraphicsD.def.guide/Modul 913},@{" TTextAttr " link HYPER:Modula-2/GraphicsD.def.guide/Modul 920},@{" TextAttrPtr " link HYPER:Modula-2/GraphicsD.def.guide/Modul 58},@{" TextFont " link HYPER:Modula-2/GraphicsD.def.guide/Modul 932}
 ,@{" TextFontPtr " link HYPER:Modula-2/GraphicsD.def.guide/Modul 61};

FROM UtilityD IMPORT
 @{" TagItem " link HYPER:Modula-2/UtilityD.def.guide/Modul 16},@{" TagItemPtr " link HYPER:Modula-2/UtilityD.def.guide/Modul 22};

CONST
 diskfontName="diskfont.library";

 maxFontPath=256;
 maxFontName=32;

 fchId=0F00H;
 tfhId=0F02H;
 dfhId=0F80H;

TYPE
 @{" AvailFontTypes " link HYPER:Modula-2/DiskFontD.def.guide/Modul 25}=(
  memory,disk,scaled,af3,af4,af5,af6,af7,af8
  ,af9,af10,af11,af12,af13,af14,a15,tagged
 );
 @{" AvailFontTypeSet " link HYPER:Modula-2/DiskFontD.def.guide/Modul 30}=SET OF [memory..a15];
 @{" AvailFontsSet " link HYPER:Modula-2/DiskFontD.def.guide/Modul 31}=SET OF @{" AvailFontTypes " link HYPER:Modula-2/DiskFontD.def.guide/Modul 25};

 @{" FontContents " link HYPER:Modula-2/DiskFontD.def.guide/Modul 33}=RECORD
  fileName:ARRAY [0..maxFontPath-1] OF CHAR;
  ySize:CARDINAL;
  style:@{" FontStyleSet " link HYPER:Modula-2/GraphicsD.def.guide/Modul 816};
  flags:@{" FontFlagSet " link HYPER:Modula-2/GraphicsD.def.guide/Modul 821};
 END;

 (*36*)@{" TFontContents " link HYPER:Modula-2/DiskFontD.def.guide/Modul 40}=RECORD
        fileName:ARRAY [0..maxFontPath-3] OF CHAR;
        tagCount:CARDINAL;
        ySize:CARDINAL;
        style:@{" FontStyleSet " link HYPER:Modula-2/GraphicsD.def.guide/Modul 816};
        flags:@{" FontFlagSet " link HYPER:Modula-2/GraphicsD.def.guide/Modul 821};
       END;

 @{" FontContentsHeader " link HYPER:Modula-2/DiskFontD.def.guide/Modul 48}=RECORD
  fileId:CARDINAL;
  numEntries:CARDINAL;
  (* fc:ARRAY [0..numEntries-1] OF (T)FontContents *)
 END;
 @{" FontContentsHeaderPtr " link HYPER:Modula-2/DiskFontD.def.guide/Modul 53}=POINTER TO @{" FontContentsHeader " link HYPER:Modula-2/DiskFontD.def.guide/Modul 48};

 @{" DiskFontHeader " link HYPER:Modula-2/DiskFontD.def.guide/Modul 55}=RECORD
  df:@{" Node " link HYPER:Modula-2/ExecD.def.guide/Modul 18};
  fileId:CARDINAL;
  revision:CARDINAL;
  CASE :INTEGER OF
  |0: segment:BPTR;
  |1: tagList:@{" TagItemPtr " link HYPER:Modula-2/UtilityD.def.guide/Modul 22};
  END;
  name:ARRAY [0..maxFontName-1] OF CHAR;
  tf:@{" TextFont " link HYPER:Modula-2/GraphicsD.def.guide/Modul 932}
 END;
 @{" DiskFontHeaderPtr " link HYPER:Modula-2/DiskFontD.def.guide/Modul 66}=POINTER TO @{" DiskFontHeader " link HYPER:Modula-2/DiskFontD.def.guide/Modul 55};

 @{" AvailFont " link HYPER:Modula-2/DiskFontD.def.guide/Modul 68}=RECORD
  type:@{" AvailFontTypeSet " link HYPER:Modula-2/DiskFontD.def.guide/Modul 30};
  attr:@{" TextAttr " link HYPER:Modula-2/GraphicsD.def.guide/Modul 913};
 END;

 @{" TAvailFont " link HYPER:Modula-2/DiskFontD.def.guide/Modul 73}=RECORD
  type:@{" AvailFontTypeSet " link HYPER:Modula-2/DiskFontD.def.guide/Modul 30};
  attr:@{" TTextAttr " link HYPER:Modula-2/GraphicsD.def.guide/Modul 920};
 END;

 @{" AvailFontHeader " link HYPER:Modula-2/DiskFontD.def.guide/Modul 78}=RECORD
  numEntries:CARDINAL;
  (*af:ARRAY [0..numEntries-1] OF (T)AvailFont;*)
 END;
 @{" AvailFontHeaderPtr " link HYPER:Modula-2/DiskFontD.def.guide/Modul 82}=POINTER TO @{" AvailFontHeader " link HYPER:Modula-2/DiskFontD.def.guide/Modul 78};

END DiskFontD.noimp

@endnode
