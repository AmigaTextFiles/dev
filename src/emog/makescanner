; Let flex generate a basic scanner
flex <scanner.lex -ot:dummy.c

; Some versions of flex are generating a defect
; source where "#if YY_MAIN" is written instead
; of "#ifdef YY_MAIN" . This will be fixed with
; the following sed-script. The problematic
; point is the skeleton used by flex but this
; patch is easier to use for everyone and doesn't
; require any changing at your system.
sed -f patch.sed t:dummy.c >t:scanner.c

; Generate the scanner binary
gcc t:scanner.c -lfl -ot:scanner

; Copy the binary to current directory
cd >env:currentdir
copy t:scanner $currentdir/scanner

