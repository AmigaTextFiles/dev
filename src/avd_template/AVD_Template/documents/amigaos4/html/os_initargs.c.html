<html>
<head>
  <title>../../../amigaos4/source/os_initargs.c</title>
</head>
<body bgcolor="#ffffff" text="#000000">
<pre>
<font color="#444444">/*
 *---------------------------------------------------------------------
 * Original Author: Jamie Krueger
 * Creation Date  : 9/25/2003
 *---------------------------------------------------------------------
 * Copyright (c) 2005 BITbyBIT Software Group, All Rights Reserved.
 *
 * This software is the confidential and proprietary information of
 * BITbyBIT Software Group (Confidential Information).  You shall not
 * disclose such Confidential Information and shall use it only in
 * accordance with the terms of the license agreement you entered into
 * with BITbyBIT Software Group.
 *
 * BITbyBIT SOFTWARE GROUP MAKES NO REPRESENTATIONS OR WARRANTIES ABOUT THE
 * SUITABILITY OF THE SOFTWARE, EITHER EXPRESS OR IMPLIED, INCLUDING
 * FITNESS FOR A PARTICULAR PURPOSE, OR NON-INFRINGEMENT. 
 * BITbyBIT Software Group LLC SHALL NOT BE LIABLE FOR ANY DAMAGES SUFFERED BY
 * LICENSEE AS A RESULT OF USING, MODIFYING OR DISTRIBUTING THIS
 * SOFTWARE OR ITS DERIVATIVES.
 *---------------------------------------------------------------------
 *
 * Template Application for writing AVD aware software
 *
 * Project: AVD_Template
 *
 * Function Name: os_InitArgs()
 *
 * Description: Handles the command line parsing, placing
 *              the results into a AVDAPP project structure
 *
 * Entry Values: pOSApp = Pointer to the Project's OS Specific Structure
 *               argc   = Total number of command arguments
 *               argv   = pointer to an array of argument strings
 *
 * Exit Values: AVD_ERRORCODE if any. (eg. AVDERR_NOERROR)
 *
 * $VER: $
 * $History: os_initargs.c $
 * 
 * *****************  Version 1  *****************
 */</font>

<font color="0000ff"><strong>#include <font color="#008000">&quot;os_main.h&quot;</font></strong></font>
<font color="0000ff"><strong>#include <font color="#008000">&lt;common.h&gt;</font></strong></font>

<font color="#2040a0">AVD_ERRORCODE</font> <font color="#2040a0">os_InitArgs</font><font color="4444FF">(</font> <font color="#2040a0">OSAPP</font> <font color="4444FF">*</font><font color="#2040a0">pOSApp</font>, <strong>int</strong> <font color="#2040a0">argc</font>, <strong>char</strong> <font color="4444FF">*</font><font color="#2040a0">argv</font><font color="4444FF">[</font><font color="4444FF">]</font> <font color="4444FF">)</font>
<font color="4444FF"><strong>{</strong></font>
    <font color="#2040a0">AVD_ERRORCODE</font> <font color="#2040a0">Results</font>           <font color="4444FF">=</font> <font color="#2040a0">AVDERR_INITARGSFAILED</font><font color="4444FF">;</font>
    <font color="#2040a0">STRPTR</font>        <font color="#2040a0">pCenterWin</font>       <font color="4444FF">=</font> <font color="#2040a0">NULL</font><font color="4444FF">;</font>
    <font color="#2040a0">STRPTR</font>        <font color="#2040a0">pPopUp</font>           <font color="4444FF">=</font> <font color="#2040a0">NULL</font><font color="4444FF">;</font>
    <font color="#2040a0">uint16</font>        <font color="#2040a0">nInitialDefWidth</font>  <font color="4444FF">=</font> <font color="#2040a0">DEFAULT_WINWIDTH</font><font color="4444FF">;</font>
    <font color="#2040a0">uint16</font>        <font color="#2040a0">nInitialDefHeight</font> <font color="4444FF">=</font> <font color="#2040a0">DEFAULT_WINHEIGHT</font><font color="4444FF">;</font>

    <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">AVD_NULL</font> <font color="4444FF">!</font><font color="4444FF">=</font> <font color="#2040a0">pOSApp</font> <font color="4444FF">)</font>
    <font color="4444FF"><strong>{</strong></font>
        <font color="#444444">/* Parse the Icon's Tool Types or CLI command line arguments */</font>
        <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">pToolTypes</font> <font color="4444FF">=</font> <font color="4444FF">(</font><font color="#2040a0">ArgArrayInit</font><font color="4444FF">(</font><font color="#2040a0">argc</font>,<font color="4444FF">(</font><font color="#2040a0">CONST_STRPTR</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">argv</font><font color="4444FF">)</font><font color="4444FF">)</font> <font color="4444FF">)</font>
        <font color="4444FF"><strong>{</strong></font>
            <font color="#2040a0">Results</font> <font color="4444FF">=</font> <font color="#2040a0">AVDERR_NOERROR</font><font color="4444FF">;</font>

            <font color="#444444">/*
             * Check for specified Help Request [-?|-h|-help]
             */</font>
            <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">NULL</font> <font color="4444FF">!</font><font color="4444FF">=</font> <font color="#2040a0">ArgString</font><font color="4444FF">(</font><font color="4444FF">(</font><font color="#2040a0">CONST_STRPTR</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">pToolTypes</font>,<font color="#008000">&quot;?&quot;</font>,<font color="4444FF">(</font><font color="#2040a0">STRPTR</font><font color="4444FF">)</font><font color="#2040a0">NULL</font><font color="4444FF">)</font> <font color="4444FF">)</font>
            <font color="4444FF"><strong>{</strong></font>
                <font color="#2040a0">Results</font> <font color="4444FF">=</font> <font color="#2040a0">AVDERR_HELPREQUEST</font><font color="4444FF">;</font>
            <font color="4444FF"><strong>}</strong></font>
            <strong>else</strong> <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">NULL</font> <font color="4444FF">!</font><font color="4444FF">=</font> <font color="#2040a0">ArgString</font><font color="4444FF">(</font><font color="4444FF">(</font><font color="#2040a0">CONST_STRPTR</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">pToolTypes</font>,<font color="#008000">&quot;-?&quot;</font>,<font color="4444FF">(</font><font color="#2040a0">STRPTR</font><font color="4444FF">)</font><font color="#2040a0">NULL</font><font color="4444FF">)</font> <font color="4444FF">)</font>
            <font color="4444FF"><strong>{</strong></font>
                <font color="#2040a0">Results</font> <font color="4444FF">=</font> <font color="#2040a0">AVDERR_HELPREQUEST</font><font color="4444FF">;</font>
            <font color="4444FF"><strong>}</strong></font>
            <strong>else</strong> <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">NULL</font> <font color="4444FF">!</font><font color="4444FF">=</font> <font color="#2040a0">ArgString</font><font color="4444FF">(</font><font color="4444FF">(</font><font color="#2040a0">CONST_STRPTR</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">pToolTypes</font>,<font color="#008000">&quot;-h&quot;</font>,<font color="4444FF">(</font><font color="#2040a0">STRPTR</font><font color="4444FF">)</font><font color="#2040a0">NULL</font><font color="4444FF">)</font> <font color="4444FF">)</font>
            <font color="4444FF"><strong>{</strong></font>
                <font color="#2040a0">Results</font> <font color="4444FF">=</font> <font color="#2040a0">AVDERR_HELPREQUEST</font><font color="4444FF">;</font>
            <font color="4444FF"><strong>}</strong></font>
            <strong>else</strong> <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">NULL</font> <font color="4444FF">!</font><font color="4444FF">=</font> <font color="#2040a0">ArgString</font><font color="4444FF">(</font><font color="4444FF">(</font><font color="#2040a0">CONST_STRPTR</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">pToolTypes</font>,<font color="#008000">&quot;-help&quot;</font>,<font color="4444FF">(</font><font color="#2040a0">STRPTR</font><font color="4444FF">)</font><font color="#2040a0">NULL</font><font color="4444FF">)</font> <font color="4444FF">)</font>
            <font color="4444FF"><strong>{</strong></font>
                <font color="#2040a0">Results</font> <font color="4444FF">=</font> <font color="#2040a0">AVDERR_HELPREQUEST</font><font color="4444FF">;</font>
            <font color="4444FF"><strong>}</strong></font>
            <strong>else</strong> <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">NULL</font> <font color="4444FF">!</font><font color="4444FF">=</font> <font color="#2040a0">ArgString</font><font color="4444FF">(</font><font color="4444FF">(</font><font color="#2040a0">CONST_STRPTR</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">pToolTypes</font>,<font color="#008000">&quot;--help&quot;</font>,<font color="4444FF">(</font><font color="#2040a0">STRPTR</font><font color="4444FF">)</font><font color="#2040a0">NULL</font><font color="4444FF">)</font> <font color="4444FF">)</font>
            <font color="4444FF"><strong>{</strong></font>
                <font color="#2040a0">Results</font> <font color="4444FF">=</font> <font color="#2040a0">AVDERR_HELPREQUEST</font><font color="4444FF">;</font>
            <font color="4444FF"><strong>}</strong></font>

            <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">AVDERR_NOERROR</font> <font color="4444FF">=</font><font color="4444FF">=</font> <font color="#2040a0">Results</font> <font color="4444FF">)</font>
            <font color="4444FF"><strong>{</strong></font>
                <font color="#444444">/*
                 * Check for specified Version Request [-version|--version]
                 */</font>
                <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">NULL</font> <font color="4444FF">!</font><font color="4444FF">=</font> <font color="#2040a0">ArgString</font><font color="4444FF">(</font><font color="4444FF">(</font><font color="#2040a0">CONST_STRPTR</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">pToolTypes</font>,<font color="#008000">&quot;-version&quot;</font>,<font color="4444FF">(</font><font color="#2040a0">STRPTR</font><font color="4444FF">)</font><font color="#2040a0">NULL</font><font color="4444FF">)</font> <font color="4444FF">)</font>
                <font color="4444FF"><strong>{</strong></font>
                    <font color="#2040a0">Results</font> <font color="4444FF">=</font> <font color="#2040a0">AVDERR_VERSIONREQUEST</font><font color="4444FF">;</font>
                <font color="4444FF"><strong>}</strong></font>
                <strong>else</strong> <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">NULL</font> <font color="4444FF">!</font><font color="4444FF">=</font> <font color="#2040a0">ArgString</font><font color="4444FF">(</font><font color="4444FF">(</font><font color="#2040a0">CONST_STRPTR</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">pToolTypes</font>,<font color="#008000">&quot;--version&quot;</font>,<font color="4444FF">(</font><font color="#2040a0">STRPTR</font><font color="4444FF">)</font><font color="#2040a0">NULL</font><font color="4444FF">)</font> <font color="4444FF">)</font>
                <font color="4444FF"><strong>{</strong></font>
                    <font color="#2040a0">Results</font> <font color="4444FF">=</font> <font color="#2040a0">AVDERR_VERSIONREQUEST</font><font color="4444FF">;</font>
                <font color="4444FF"><strong>}</strong></font>
            <font color="4444FF"><strong>}</strong></font>
            
            <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">AVDERR_NOERROR</font> <font color="4444FF">=</font><font color="4444FF">=</font> <font color="#2040a0">Results</font> <font color="4444FF">)</font>
            <font color="4444FF"><strong>{</strong></font>
                <font color="#444444">/* Parse for CX_PRIORITY - Default = 0 */</font>
                <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oNewBroker</font>.<font color="#2040a0">nb_Pri</font> <font color="4444FF">=</font> <font color="4444FF">(</font><font color="#2040a0">BYTE</font><font color="4444FF">)</font><font color="#2040a0">ArgInt</font><font color="4444FF">(</font><font color="4444FF">(</font><font color="#2040a0">CONST_STRPTR</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">pToolTypes</font>,<font color="#2040a0">TN_CX_PRIORITY</font>,<font color="#FF0000">0</font><font color="4444FF">)</font><font color="4444FF">;</font>
                <font color="#444444">/* Parse for CX_POPKEY - Default = DEFAULT_POPKEY_STR */</font>
                <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">pPopKey</font> <font color="4444FF">=</font> <font color="4444FF">(</font><font color="#2040a0">uint8</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">ArgString</font><font color="4444FF">(</font><font color="4444FF">(</font><font color="#2040a0">CONST_STRPTR</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">pToolTypes</font>,<font color="#2040a0">TN_CX_POPKEY</font>,<font color="#2040a0">DEFAULT_POPKEY_STR</font><font color="4444FF">)</font><font color="4444FF">;</font>
                <font color="#444444">/* Parse for HIDEKEY - Default = DEFAULT_HIDEKEY_STR */</font>
                <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">pHideKey</font> <font color="4444FF">=</font> <font color="4444FF">(</font><font color="#2040a0">uint8</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">ArgString</font><font color="4444FF">(</font><font color="4444FF">(</font><font color="#2040a0">CONST_STRPTR</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">pToolTypes</font>,<font color="#2040a0">TN_HIDEKEY</font>,<font color="#2040a0">DEFAULT_HIDEKEY_STR</font><font color="4444FF">)</font><font color="4444FF">;</font>
                <font color="#444444">/* Parse for CX_POPUP - Default = &quot;yes&quot; */</font>
                <font color="#2040a0">pPopUp</font> <font color="4444FF">=</font> <font color="#2040a0">ArgString</font><font color="4444FF">(</font><font color="4444FF">(</font><font color="#2040a0">CONST_STRPTR</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">pToolTypes</font>,<font color="#2040a0">TN_CX_POPUP</font>,<font color="#008000">&quot;yes&quot;</font><font color="4444FF">)</font><font color="4444FF">;</font>
                <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">IIcon</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">MatchToolValue</font><font color="4444FF">(</font><font color="4444FF">(</font><font color="#2040a0">CONST_STRPTR</font><font color="4444FF">)</font><font color="#2040a0">pPopUp</font>,<font color="#008000">&quot;no&quot;</font><font color="4444FF">)</font> <font color="4444FF">)</font>
                <font color="4444FF"><strong>{</strong></font>
                    <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">bOpenOnStart</font> <font color="4444FF">=</font> <font color="#2040a0">FALSE</font><font color="4444FF">;</font>
                <font color="4444FF"><strong>}</strong></font>
                <font color="#444444">/* Parse for PUBSCREEN - Default = NULL (System Default PubScreen) */</font>
                <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">sPubScreenName</font> <font color="4444FF">=</font> <font color="#2040a0">ArgString</font><font color="4444FF">(</font><font color="4444FF">(</font><font color="#2040a0">CONST_STRPTR</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">pToolTypes</font>,<font color="#2040a0">TN_PUBSCREEN</font>,<font color="4444FF">(</font><font color="#2040a0">STRPTR</font><font color="4444FF">)</font><font color="#2040a0">NULL</font><font color="4444FF">)</font><font color="4444FF">;</font>
                <font color="#444444">/* Obtain the specified Public screen, or fallback and grab the default Public Screen */</font>
                <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">NULL</font> <font color="4444FF">=</font><font color="4444FF">=</font> <font color="4444FF">(</font><font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">screen</font> <font color="4444FF">=</font> <font color="#2040a0">IIntuition</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">LockPubScreen</font><font color="4444FF">(</font><font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">sPubScreenName</font><font color="4444FF">)</font><font color="4444FF">)</font> <font color="4444FF">)</font>
                <font color="4444FF"><strong>{</strong></font>
                    <font color="#444444">/* If we can't get the intended Public Screen, then grab the default one */</font>
                    <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">screen</font> <font color="4444FF">=</font> <font color="#2040a0">IIntuition</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">LockPubScreen</font><font color="4444FF">(</font><font color="#2040a0">NULL</font><font color="4444FF">)</font><font color="4444FF">;</font>
                <font color="4444FF"><strong>}</strong></font>
                <font color="#444444">/*
                 * Parse Initial sizes to open window at
                 */</font>
                <font color="#444444">/* Set our final &quot;default&quot; window position values */</font>
                <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">bCenterWin</font> <font color="4444FF">=</font> <font color="#2040a0">TRUE</font><font color="4444FF">;</font>
                <font color="#444444">/* Set our final &quot;default&quot; window size values */</font>
                <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oWindowSize</font>.<font color="#2040a0">Left</font> <font color="4444FF">=</font> <font color="4444FF">(</font><font color="#2040a0">WORD</font><font color="4444FF">)</font><font color="#2040a0">ArgInt</font><font color="4444FF">(</font><font color="4444FF">(</font><font color="#2040a0">CONST_STRPTR</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">pToolTypes</font>,<font color="#2040a0">TN_LEFT</font>,<font color="4444FF">-</font><font color="#FF0000">1</font><font color="4444FF">)</font><font color="4444FF">;</font>
                <strong>if</strong> <font color="4444FF">(</font> <font color="4444FF">-</font><font color="#FF0000">1</font> <font color="4444FF">!</font><font color="4444FF">=</font> <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oWindowSize</font>.<font color="#2040a0">Left</font> <font color="4444FF">)</font>
                <font color="4444FF"><strong>{</strong></font>
                    <font color="#444444">/* If a Left or Top value was specified, then do not Centered flag */</font>
                    <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">bCenterWin</font> <font color="4444FF">=</font> <font color="#2040a0">FALSE</font><font color="4444FF">;</font>
                <font color="4444FF"><strong>}</strong></font>
                <strong>else</strong>
                <font color="4444FF"><strong>{</strong></font>
                    <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oWindowSize</font>.<font color="#2040a0">Left</font> <font color="4444FF">=</font> <font color="#2040a0">DEFAULT_WINLEFT</font><font color="4444FF">;</font>
                <font color="4444FF"><strong>}</strong></font>
                <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oWindowSize</font>.<font color="#2040a0">Top</font> <font color="4444FF">=</font> <font color="4444FF">(</font><font color="#2040a0">WORD</font><font color="4444FF">)</font><font color="#2040a0">ArgInt</font><font color="4444FF">(</font><font color="4444FF">(</font><font color="#2040a0">CONST_STRPTR</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">pToolTypes</font>,<font color="#2040a0">TN_TOP</font>,<font color="4444FF">-</font><font color="#FF0000">1</font><font color="4444FF">)</font><font color="4444FF">;</font>
                <strong>if</strong> <font color="4444FF">(</font> <font color="4444FF">-</font><font color="#FF0000">1</font> <font color="4444FF">!</font><font color="4444FF">=</font> <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oWindowSize</font>.<font color="#2040a0">Top</font> <font color="4444FF">)</font>
                <font color="4444FF"><strong>{</strong></font>
                    <font color="#444444">/* If a Left or Top value was specified, then do not Centered flag */</font>
                    <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">bCenterWin</font> <font color="4444FF">=</font> <font color="#2040a0">FALSE</font><font color="4444FF">;</font>
                <font color="4444FF"><strong>}</strong></font>
                <strong>else</strong>
                <font color="4444FF"><strong>{</strong></font>
                    <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oWindowSize</font>.<font color="#2040a0">Top</font>  <font color="4444FF">=</font> <font color="#2040a0">DEFAULT_WINTOP</font><font color="4444FF">;</font>
                <font color="4444FF"><strong>}</strong></font>
                <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oWindowSize</font>.<font color="#2040a0">Width</font>  <font color="4444FF">=</font> <font color="4444FF">(</font><font color="#2040a0">WORD</font><font color="4444FF">)</font><font color="#2040a0">ArgInt</font><font color="4444FF">(</font><font color="4444FF">(</font><font color="#2040a0">CONST_STRPTR</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">pToolTypes</font>,<font color="#2040a0">TN_WIDTH</font>,<font color="#2040a0">nInitialDefWidth</font><font color="4444FF">)</font><font color="4444FF">;</font>
                <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oWindowSize</font>.<font color="#2040a0">Height</font> <font color="4444FF">=</font> <font color="4444FF">(</font><font color="#2040a0">WORD</font><font color="4444FF">)</font><font color="#2040a0">ArgInt</font><font color="4444FF">(</font><font color="4444FF">(</font><font color="#2040a0">CONST_STRPTR</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">pToolTypes</font>,<font color="#2040a0">TN_HEIGHT</font>,<font color="#2040a0">nInitialDefHeight</font><font color="4444FF">)</font><font color="4444FF">;</font>
                <font color="#444444">/* Set our final &quot;default&quot; window position values */</font>
                <font color="#2040a0">pCenterWin</font> <font color="4444FF">=</font> <font color="#2040a0">ArgString</font><font color="4444FF">(</font><font color="4444FF">(</font><font color="#2040a0">CONST_STRPTR</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">pToolTypes</font>,<font color="#2040a0">TN_CENTERED</font>,<font color="#008000">&quot;&quot;</font><font color="4444FF">)</font><font color="4444FF">;</font>
                <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">IIcon</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">MatchToolValue</font><font color="4444FF">(</font><font color="#2040a0">pCenterWin</font>,<font color="#008000">&quot;yes&quot;</font><font color="4444FF">)</font> <font color="4444FF">)</font>
                <font color="4444FF"><strong>{</strong></font>
                    <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">bCenterWin</font> <font color="4444FF">=</font> <font color="#2040a0">TRUE</font><font color="4444FF">;</font>
                <font color="4444FF"><strong>}</strong></font>
                <strong>else</strong> <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">IIcon</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">MatchToolValue</font><font color="4444FF">(</font><font color="#2040a0">pCenterWin</font>,<font color="#008000">&quot;true&quot;</font><font color="4444FF">)</font> <font color="4444FF">)</font>
                <font color="4444FF"><strong>{</strong></font>
                    <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">bCenterWin</font> <font color="4444FF">=</font> <font color="#2040a0">TRUE</font><font color="4444FF">;</font>
                <font color="4444FF"><strong>}</strong></font>
                <strong>else</strong> <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">IIcon</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">MatchToolValue</font><font color="4444FF">(</font><font color="#2040a0">pCenterWin</font>,<font color="#008000">&quot;no&quot;</font><font color="4444FF">)</font> <font color="4444FF">)</font>
                <font color="4444FF"><strong>{</strong></font>
                    <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">bCenterWin</font> <font color="4444FF">=</font> <font color="#2040a0">FALSE</font><font color="4444FF">;</font>
                <font color="4444FF"><strong>}</strong></font>
                <strong>else</strong> <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">IIcon</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">MatchToolValue</font><font color="4444FF">(</font><font color="#2040a0">pCenterWin</font>,<font color="#008000">&quot;false&quot;</font><font color="4444FF">)</font> <font color="4444FF">)</font>
                <font color="4444FF"><strong>{</strong></font>
                    <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">bCenterWin</font> <font color="4444FF">=</font> <font color="#2040a0">FALSE</font><font color="4444FF">;</font>
                <font color="4444FF"><strong>}</strong></font>
                <font color="#444444">/* Set our default Zoom size to &quot;Full Screen&quot; */</font>
                <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">screen</font> <font color="4444FF">)</font>
                <font color="4444FF"><strong>{</strong></font>
                    <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oZoomSize</font>.<font color="#2040a0">Width</font>  <font color="4444FF">=</font> <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">screen</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">Width</font><font color="4444FF">;</font>
                    <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oZoomSize</font>.<font color="#2040a0">Height</font> <font color="4444FF">=</font> <font color="4444FF">(</font><font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">screen</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">Height</font> <font color="4444FF">-</font> <font color="#FF0000">1</font><font color="4444FF">)</font><font color="4444FF">;</font>
                <font color="4444FF"><strong>}</strong></font>
                <strong>else</strong>
                <font color="4444FF"><strong>{</strong></font>
                    <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oZoomSize</font>.<font color="#2040a0">Width</font>    <font color="4444FF">=</font> <font color="#2040a0">DEFAULT_ZOOM_WIDTH</font><font color="4444FF">;</font>
                    <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oZoomSize</font>.<font color="#2040a0">Height</font>   <font color="4444FF">=</font> <font color="#2040a0">DEFAULT_ZOOM_HEIGHT</font><font color="4444FF">;</font>
                <font color="4444FF"><strong>}</strong></font>
            <font color="4444FF"><strong>}</strong></font>
        <font color="4444FF"><strong>}</strong></font>
        <strong>else</strong>
        <font color="4444FF"><strong>{</strong></font>
            <font color="#444444">/*
             * No arguments provided so setup based on defaults only
             */</font>

            <font color="#444444">/* Setup defaults for Broker structure */</font>
            <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oNewBroker</font>.<font color="#2040a0">nb_Pri</font> <font color="4444FF">=</font> <font color="4444FF">(</font><font color="#2040a0">BYTE</font><font color="4444FF">)</font><font color="#FF0000">0</font><font color="4444FF">;</font>
            <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">pPopKey</font>           <font color="4444FF">=</font> <font color="4444FF">(</font><font color="#2040a0">uint8</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">DEFAULT_POPKEY_STR</font><font color="4444FF">;</font>
            <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">pHideKey</font>          <font color="4444FF">=</font> <font color="4444FF">(</font><font color="#2040a0">uint8</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">DEFAULT_HIDEKEY_STR</font><font color="4444FF">;</font>
            <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">bOpenOnStart</font>      <font color="4444FF">=</font> <font color="#2040a0">TRUE</font><font color="4444FF">;</font>

            <font color="#444444">/* Parse for PUBSCREEN - Default = NULL (System Default PubScreen) */</font>
            <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">sPubScreenName</font>    <font color="4444FF">=</font> <font color="4444FF">(</font><font color="#2040a0">STRPTR</font><font color="4444FF">)</font><font color="#2040a0">NULL</font><font color="4444FF">;</font>
            <font color="#444444">/* Obtain the system current default Public Screen */</font>
            <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">screen</font>            <font color="4444FF">=</font> <font color="#2040a0">IIntuition</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">LockPubScreen</font><font color="4444FF">(</font><font color="#2040a0">NULL</font><font color="4444FF">)</font><font color="4444FF">;</font>
            <font color="#444444">/*
             * Parse Initial sizes to open window at
             */</font>
            <font color="#444444">/* Set our final &quot;default&quot; window size values */</font>
            <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oWindowSize</font>.<font color="#2040a0">Left</font>   <font color="4444FF">=</font> <font color="4444FF">(</font><font color="#2040a0">WORD</font><font color="4444FF">)</font><font color="#2040a0">DEFAULT_WINLEFT</font><font color="4444FF">;</font>
            <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oWindowSize</font>.<font color="#2040a0">Top</font>    <font color="4444FF">=</font> <font color="4444FF">(</font><font color="#2040a0">WORD</font><font color="4444FF">)</font><font color="#2040a0">DEFAULT_WINTOP</font><font color="4444FF">;</font>
            <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oWindowSize</font>.<font color="#2040a0">Width</font>  <font color="4444FF">=</font> <font color="4444FF">(</font><font color="#2040a0">WORD</font><font color="4444FF">)</font><font color="#2040a0">nInitialDefWidth</font><font color="4444FF">;</font>
            <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oWindowSize</font>.<font color="#2040a0">Height</font> <font color="4444FF">=</font> <font color="4444FF">(</font><font color="#2040a0">WORD</font><font color="4444FF">)</font><font color="#2040a0">nInitialDefHeight</font><font color="4444FF">;</font>
            <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">bCenterWin</font>         <font color="4444FF">=</font> <font color="#2040a0">TRUE</font><font color="4444FF">;</font>
            <font color="#444444">/* Set our default Zoom size to &quot;Full Screen&quot; */</font>
            <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">screen</font> <font color="4444FF">)</font>
            <font color="4444FF"><strong>{</strong></font>
                <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oZoomSize</font>.<font color="#2040a0">Width</font>    <font color="4444FF">=</font> <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">screen</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">Width</font><font color="4444FF">;</font>
                <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oZoomSize</font>.<font color="#2040a0">Height</font>   <font color="4444FF">=</font> <font color="4444FF">(</font><font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">screen</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">Height</font> <font color="4444FF">-</font> <font color="#FF0000">1</font><font color="4444FF">)</font><font color="4444FF">;</font>
            <font color="4444FF"><strong>}</strong></font>
            <strong>else</strong>
            <font color="4444FF"><strong>{</strong></font>
                <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oZoomSize</font>.<font color="#2040a0">Width</font>    <font color="4444FF">=</font> <font color="#2040a0">DEFAULT_ZOOM_WIDTH</font><font color="4444FF">;</font>
                <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oZoomSize</font>.<font color="#2040a0">Height</font>   <font color="4444FF">=</font> <font color="#2040a0">DEFAULT_ZOOM_HEIGHT</font><font color="4444FF">;</font>
            <font color="4444FF"><strong>}</strong></font>
            <font color="#2040a0">Results</font> <font color="4444FF">=</font> <font color="#2040a0">AVDERR_NOERROR</font><font color="4444FF">;</font>
        <font color="4444FF"><strong>}</strong></font>

        <font color="#444444">/* Store our Hot Key(s) as Code/Qualifier pairs */</font>
        <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">pHideKey</font> <font color="4444FF">)</font>
        <font color="4444FF"><strong>{</strong></font>
            <font color="#2040a0">ICommodities</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">ParseIX</font><font color="4444FF">(</font><font color="4444FF">(</font><font color="#2040a0">CONST_STRPTR</font><font color="4444FF">)</font><font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">pHideKey</font>,<font color="4444FF">(</font><font color="#2040a0">IX</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="4444FF">&amp;</font><font color="#2040a0">pOSApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oHideKey</font><font color="4444FF">)</font><font color="4444FF">;</font>
        <font color="4444FF"><strong>}</strong></font>

    <font color="4444FF"><strong>}</strong></font>
    <strong>return</strong><font color="4444FF">(</font> <font color="4444FF">(</font><font color="#2040a0">AVD_ERRORCODE</font><font color="4444FF">)</font><font color="#2040a0">Results</font> <font color="4444FF">)</font><font color="4444FF">;</font>
<font color="4444FF"><strong>}</strong></font>
</pre>
<hr>
syntax highlighted by <a href="http://www.palfrader.org/code2html">Code2HTML</a>, v. 0.9.1
</body>
</html>
