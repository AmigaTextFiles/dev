<html>
<head>
  <title>../../../amigaos4/source/functions/os_openlibs.c</title>
</head>
<body bgcolor="#ffffff" text="#000000">
<pre>
<font color="#444444">/*
 *---------------------------------------------------------------------
 * Original Author: Jamie Krueger
 * Creation Date  : 02/16/2005
 *---------------------------------------------------------------------
 * Copyright (c) 2005 BITbyBIT Software Group, All Rights Reserved.
 *
 * This software is the confidential and proprietary information of
 * BITbyBIT Software Group (Confidential Information).  You shall not
 * disclose such Confidential Information and shall use it only in
 * accordance with the terms of the license agreement you entered into
 * with BITbyBIT Software Group LLC.
 *
 * BITbyBIT Software Group LLC MAKES NO REPRESENTATIONS OR WARRANTIES ABOUT
 * THE SUITABILITY OF THE SOFTWARE, EITHER EXPRESS OR IMPLIED, INCLUDING
 * FITNESS FOR A PARTICULAR PURPOSE, OR NON-INFRINGEMENT. BITbyBIT Software
 * Group LLC SHALL NOT BE LIABLE FOR ANY DAMAGES SUFFERED BY
 * LICENSEE AS A RESULT OF USING, MODIFYING OR DISTRIBUTING THIS
 * SOFTWARE OR ITS DERIVATIVES.
 *---------------------------------------------------------------------
 *
 * Tool for Browsing the AmigaOS 4 SDK
 *
 * Project: AVD_Template
 *
 * Description: This function Initializes system library not handled by -lauto
 *              
 * $VER: os_OpenLibs() 1.0.0.0
 * 
 */</font>

<font color="#444444">/* Include Operating Specific Functions header file */</font>
<font color="0000ff"><strong>#include <font color="#008000">&quot;os_functions.h&quot;</font></strong></font>

<font color="#444444">/* Global Library Interfaces */</font>
<strong>struct</strong> <font color="#2040a0">Library</font>          <font color="4444FF">*</font><font color="#2040a0">CxBase</font>          <font color="4444FF">=</font> <font color="#2040a0">NULL</font><font color="4444FF">;</font>
<strong>struct</strong> <font color="#2040a0">CommoditiesIFace</font> <font color="4444FF">*</font><font color="#2040a0">ICommodities</font>    <font color="4444FF">=</font> <font color="#2040a0">NULL</font><font color="4444FF">;</font>
<strong>struct</strong> <font color="#2040a0">Library</font>          <font color="4444FF">*</font><font color="#2040a0">IntuitionBase</font>   <font color="4444FF">=</font> <font color="#2040a0">NULL</font><font color="4444FF">;</font>
<strong>struct</strong> <font color="#2040a0">IntuitionIFace</font>   <font color="4444FF">*</font><font color="#2040a0">IIntuition</font>      <font color="4444FF">=</font> <font color="#2040a0">NULL</font><font color="4444FF">;</font>
<strong>struct</strong> <font color="#2040a0">Library</font>          <font color="4444FF">*</font><font color="#2040a0">GadToolsBase</font>    <font color="4444FF">=</font> <font color="#2040a0">NULL</font><font color="4444FF">;</font>
<strong>struct</strong> <font color="#2040a0">GadToolsIFace</font>    <font color="4444FF">*</font><font color="#2040a0">IGadTools</font>       <font color="4444FF">=</font> <font color="#2040a0">NULL</font><font color="4444FF">;</font>
<strong>struct</strong> <font color="#2040a0">Library</font>          <font color="4444FF">*</font><font color="#2040a0">IconBase</font>        <font color="4444FF">=</font> <font color="#2040a0">NULL</font><font color="4444FF">;</font>
<strong>struct</strong> <font color="#2040a0">IconIFace</font>        <font color="4444FF">*</font><font color="#2040a0">IIcon</font>           <font color="4444FF">=</font> <font color="#2040a0">NULL</font><font color="4444FF">;</font>
<strong>struct</strong> <font color="#2040a0">Library</font>          <font color="4444FF">*</font><font color="#2040a0">KeymapBase</font>      <font color="4444FF">=</font> <font color="#2040a0">NULL</font><font color="4444FF">;</font>
<strong>struct</strong> <font color="#2040a0">KeymapIFace</font>      <font color="4444FF">*</font><font color="#2040a0">IKeymap</font>         <font color="4444FF">=</font> <font color="#2040a0">NULL</font><font color="4444FF">;</font>
<strong>struct</strong> <font color="#2040a0">Library</font>          <font color="4444FF">*</font><font color="#2040a0">DateBrowserBase</font> <font color="4444FF">=</font> <font color="#2040a0">NULL</font><font color="4444FF">;</font>
<strong>struct</strong> <font color="#2040a0">DateBrowserIFace</font> <font color="4444FF">*</font><font color="#2040a0">IDateBrowser</font>    <font color="4444FF">=</font> <font color="#2040a0">NULL</font><font color="4444FF">;</font>
<strong>struct</strong> <font color="#2040a0">Library</font>          <font color="4444FF">*</font><font color="#2040a0">PaletteBase</font>     <font color="4444FF">=</font> <font color="#2040a0">NULL</font><font color="4444FF">;</font>
<strong>struct</strong> <font color="#2040a0">PaletteIFace</font>     <font color="4444FF">*</font><font color="#2040a0">IPalette</font>        <font color="4444FF">=</font> <font color="#2040a0">NULL</font><font color="4444FF">;</font>
<strong>struct</strong> <font color="#2040a0">Library</font>          <font color="4444FF">*</font><font color="#2040a0">PartitionBase</font>   <font color="4444FF">=</font> <font color="#2040a0">NULL</font><font color="4444FF">;</font>
<strong>struct</strong> <font color="#2040a0">PartitionIFace</font>   <font color="4444FF">*</font><font color="#2040a0">IPartition</font>      <font color="4444FF">=</font> <font color="#2040a0">NULL</font><font color="4444FF">;</font>
<strong>struct</strong> <font color="#2040a0">Library</font>          <font color="4444FF">*</font><font color="#2040a0">PopupMenuBase</font>   <font color="4444FF">=</font> <font color="#2040a0">NULL</font><font color="4444FF">;</font>
<strong>struct</strong> <font color="#2040a0">PopupMenuIFace</font>   <font color="4444FF">*</font><font color="#2040a0">IPopupMenu</font>      <font color="4444FF">=</font> <font color="#2040a0">NULL</font><font color="4444FF">;</font>
<strong>struct</strong> <font color="#2040a0">Library</font>          <font color="4444FF">*</font><font color="#2040a0">SketchBoardBase</font> <font color="4444FF">=</font> <font color="#2040a0">NULL</font><font color="4444FF">;</font>
<strong>struct</strong> <font color="#2040a0">SketchBoardIFace</font> <font color="4444FF">*</font><font color="#2040a0">ISketchBoard</font>    <font color="4444FF">=</font> <font color="#2040a0">NULL</font><font color="4444FF">;</font>

<font color="#2040a0">BOOL</font> <font color="#2040a0">os_OpenLibs</font><font color="4444FF">(</font> <font color="#2040a0">OSAPP</font> <font color="4444FF">*</font><font color="#2040a0">pOSApp</font> <font color="4444FF">)</font>
<font color="4444FF"><strong>{</strong></font>
    <font color="#2040a0">BOOL</font> <font color="#2040a0">bResult</font> <font color="4444FF">=</font> <font color="#2040a0">FALSE</font><font color="4444FF">;</font>

    <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">pOSApp</font> <font color="4444FF">)</font>
    <font color="4444FF"><strong>{</strong></font>
        <font color="#444444">/* Obtain the Main Interface to the Exec from the only static location within the system (4) */</font>
        <strong>struct</strong> <font color="#2040a0">ExecIFace</font> <font color="4444FF">*</font><font color="#2040a0">IExec</font> <font color="4444FF">=</font> <font color="4444FF">(</font><strong>struct</strong> <font color="#2040a0">ExecIFace</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="4444FF">(</font><font color="4444FF">*</font><font color="4444FF">(</font><strong>struct</strong> <font color="#2040a0">ExecBase</font> <font color="4444FF">*</font><font color="4444FF">*</font><font color="4444FF">)</font><font color="#FF0000">4</font><font color="4444FF">)</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">MainInterface</font><font color="4444FF">;</font>
        
        <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">CxBase</font> <font color="4444FF">=</font> <font color="#2040a0">IExec</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">OpenLibrary</font><font color="4444FF">(</font><font color="#008000">&quot;commodities.library&quot;</font>,<font color="#FF0000">50</font><font color="4444FF">)</font> <font color="4444FF">)</font>
        <font color="4444FF"><strong>{</strong></font>
            <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">ICommodities</font> <font color="4444FF">=</font> <font color="4444FF">(</font><strong>struct</strong> <font color="#2040a0">CommoditiesIFace</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">IExec</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">GetInterface</font><font color="4444FF">(</font><font color="#2040a0">CxBase</font>,<font color="#008000">&quot;main&quot;</font>,<font color="#FF0000">1</font>,<font color="#2040a0">NULL</font><font color="4444FF">)</font> <font color="4444FF">)</font>
            <font color="4444FF"><strong>{</strong></font>
                <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">IntuitionBase</font> <font color="4444FF">=</font> <font color="#2040a0">IExec</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">OpenLibrary</font><font color="4444FF">(</font><font color="#008000">&quot;intuition.library&quot;</font>,<font color="#FF0000">50</font><font color="4444FF">)</font> <font color="4444FF">)</font>
                <font color="4444FF"><strong>{</strong></font>
                    <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">IIntuition</font> <font color="4444FF">=</font> <font color="4444FF">(</font><strong>struct</strong> <font color="#2040a0">IntuitionIFace</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">IExec</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">GetInterface</font><font color="4444FF">(</font><font color="#2040a0">IntuitionBase</font>,<font color="#008000">&quot;main&quot;</font>,<font color="#FF0000">1</font>,<font color="#2040a0">NULL</font><font color="4444FF">)</font> <font color="4444FF">)</font>
                    <font color="4444FF"><strong>{</strong></font>
                        <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">GadToolsBase</font> <font color="4444FF">=</font> <font color="#2040a0">IExec</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">OpenLibrary</font><font color="4444FF">(</font><font color="#008000">&quot;gadtools.library&quot;</font>,<font color="#FF0000">50</font><font color="4444FF">)</font> <font color="4444FF">)</font>
                        <font color="4444FF"><strong>{</strong></font>
                            <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">IGadTools</font> <font color="4444FF">=</font> <font color="4444FF">(</font><strong>struct</strong> <font color="#2040a0">GadToolsIFace</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">IExec</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">GetInterface</font><font color="4444FF">(</font><font color="#2040a0">GadToolsBase</font>,<font color="#008000">&quot;main&quot;</font>,<font color="#FF0000">1</font>,<font color="#2040a0">NULL</font><font color="4444FF">)</font> <font color="4444FF">)</font>
                            <font color="4444FF"><strong>{</strong></font>
                                <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">IconBase</font> <font color="4444FF">=</font> <font color="#2040a0">IExec</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">OpenLibrary</font><font color="4444FF">(</font><font color="#008000">&quot;icon.library&quot;</font>,<font color="#FF0000">50</font><font color="4444FF">)</font> <font color="4444FF">)</font>
                                <font color="4444FF"><strong>{</strong></font>
                                    <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">IIcon</font> <font color="4444FF">=</font> <font color="4444FF">(</font><strong>struct</strong> <font color="#2040a0">IconIFace</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">IExec</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">GetInterface</font><font color="4444FF">(</font><font color="#2040a0">IconBase</font>,<font color="#008000">&quot;main&quot;</font>,<font color="#FF0000">1</font>,<font color="#2040a0">NULL</font><font color="4444FF">)</font> <font color="4444FF">)</font>
                                    <font color="4444FF"><strong>{</strong></font>
                                        <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">KeymapBase</font> <font color="4444FF">=</font> <font color="#2040a0">IExec</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">OpenLibrary</font><font color="4444FF">(</font><font color="#008000">&quot;keymap.library&quot;</font>,<font color="#FF0000">50</font><font color="4444FF">)</font> <font color="4444FF">)</font>
                                        <font color="4444FF"><strong>{</strong></font>
                                            <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">IKeymap</font> <font color="4444FF">=</font> <font color="4444FF">(</font><strong>struct</strong> <font color="#2040a0">KeymapIFace</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">IExec</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">GetInterface</font><font color="4444FF">(</font><font color="#2040a0">KeymapBase</font>,<font color="#008000">&quot;main&quot;</font>,<font color="#FF0000">1</font>,<font color="#2040a0">NULL</font><font color="4444FF">)</font> <font color="4444FF">)</font>
                                            <font color="4444FF"><strong>{</strong></font>
                                                <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">DateBrowserBase</font> <font color="4444FF">=</font> <font color="#2040a0">IExec</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">OpenLibrary</font><font color="4444FF">(</font><font color="#008000">&quot;gadgets/datebrowser.gadget&quot;</font>,<font color="#FF0000">50</font><font color="4444FF">)</font> <font color="4444FF">)</font>
                                                <font color="4444FF"><strong>{</strong></font>
                                                    <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">IDateBrowser</font> <font color="4444FF">=</font> <font color="4444FF">(</font><strong>struct</strong> <font color="#2040a0">DateBrowserIFace</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">IExec</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">GetInterface</font><font color="4444FF">(</font><font color="#2040a0">DateBrowserBase</font>,<font color="#008000">&quot;main&quot;</font>,<font color="#FF0000">1</font>,<font color="#2040a0">NULL</font><font color="4444FF">)</font> <font color="4444FF">)</font>
                                                    <font color="4444FF"><strong>{</strong></font>
                                                        <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">PaletteBase</font> <font color="4444FF">=</font> <font color="#2040a0">IExec</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">OpenLibrary</font><font color="4444FF">(</font><font color="#008000">&quot;gadgets/palette.gadget&quot;</font>,<font color="#FF0000">50</font><font color="4444FF">)</font> <font color="4444FF">)</font>
                                                        <font color="4444FF"><strong>{</strong></font>
                                                            <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">IPalette</font> <font color="4444FF">=</font> <font color="4444FF">(</font><strong>struct</strong> <font color="#2040a0">PaletteIFace</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">IExec</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">GetInterface</font><font color="4444FF">(</font><font color="#2040a0">PaletteBase</font>,<font color="#008000">&quot;main&quot;</font>,<font color="#FF0000">1</font>,<font color="#2040a0">NULL</font><font color="4444FF">)</font> <font color="4444FF">)</font>
                                                            <font color="4444FF"><strong>{</strong></font>
                                                                <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">PartitionBase</font> <font color="4444FF">=</font> <font color="#2040a0">IExec</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">OpenLibrary</font><font color="4444FF">(</font><font color="#008000">&quot;gadgets/partition.gadget&quot;</font>,<font color="#FF0000">46</font><font color="4444FF">)</font> <font color="4444FF">)</font>
                                                                <font color="4444FF"><strong>{</strong></font>
                                                                    <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">IPartition</font> <font color="4444FF">=</font> <font color="4444FF">(</font><strong>struct</strong> <font color="#2040a0">PartitionIFace</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">IExec</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">GetInterface</font><font color="4444FF">(</font><font color="#2040a0">PartitionBase</font>,<font color="#008000">&quot;main&quot;</font>,<font color="#FF0000">1</font>,<font color="#2040a0">NULL</font><font color="4444FF">)</font> <font color="4444FF">)</font>
                                                                    <font color="4444FF"><strong>{</strong></font>
                                                                        <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">PopupMenuBase</font> <font color="4444FF">=</font> <font color="#2040a0">IExec</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">OpenLibrary</font><font color="4444FF">(</font><font color="#008000">&quot;popupmenu.class&quot;</font>,<font color="#FF0000">50</font><font color="4444FF">)</font> <font color="4444FF">)</font>
                                                                        <font color="4444FF"><strong>{</strong></font>
                                                                            <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">IPopupMenu</font> <font color="4444FF">=</font> <font color="4444FF">(</font><strong>struct</strong> <font color="#2040a0">PopupMenuIFace</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">IExec</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">GetInterface</font><font color="4444FF">(</font><font color="#2040a0">PopupMenuBase</font>,<font color="#008000">&quot;main&quot;</font>,<font color="#FF0000">1</font>,<font color="#2040a0">NULL</font><font color="4444FF">)</font> <font color="4444FF">)</font>
                                                                            <font color="4444FF"><strong>{</strong></font>
                                                                                <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">SketchBoardBase</font> <font color="4444FF">=</font> <font color="#2040a0">IExec</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">OpenLibrary</font><font color="4444FF">(</font><font color="#008000">&quot;gadgets/sketchboard.gadget&quot;</font>,<font color="#FF0000">51</font><font color="4444FF">)</font> <font color="4444FF">)</font>
                                                                                <font color="4444FF"><strong>{</strong></font>
                                                                                    <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">ISketchBoard</font> <font color="4444FF">=</font> <font color="4444FF">(</font><strong>struct</strong> <font color="#2040a0">SketchBoardIFace</font> <font color="4444FF">*</font><font color="4444FF">)</font><font color="#2040a0">IExec</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">GetInterface</font><font color="4444FF">(</font><font color="#2040a0">SketchBoardBase</font>,<font color="#008000">&quot;main&quot;</font>,<font color="#FF0000">1</font>,<font color="#2040a0">NULL</font><font color="4444FF">)</font> <font color="4444FF">)</font>
                                                                                    <font color="4444FF"><strong>{</strong></font>
                                                                                        <font color="#2040a0">bResult</font> <font color="4444FF">=</font> <font color="#2040a0">TRUE</font><font color="4444FF">;</font>
                                                                                    <font color="4444FF"><strong>}</strong></font>
                                                                                <font color="4444FF"><strong>}</strong></font>
                                                                            <font color="4444FF"><strong>}</strong></font>
                                                                        <font color="4444FF"><strong>}</strong></font>
                                                                    <font color="4444FF"><strong>}</strong></font>
                                                                <font color="4444FF"><strong>}</strong></font>
                                                            <font color="4444FF"><strong>}</strong></font>
                                                        <font color="4444FF"><strong>}</strong></font>
                                                    <font color="4444FF"><strong>}</strong></font>
                                                <font color="4444FF"><strong>}</strong></font>
                                            <font color="4444FF"><strong>}</strong></font>
                                        <font color="4444FF"><strong>}</strong></font>
                                    <font color="4444FF"><strong>}</strong></font>
                                <font color="4444FF"><strong>}</strong></font>
                            <font color="4444FF"><strong>}</strong></font>
                        <font color="4444FF"><strong>}</strong></font>
                    <font color="4444FF"><strong>}</strong></font>
                <font color="4444FF"><strong>}</strong></font>
            <font color="4444FF"><strong>}</strong></font>
        <font color="4444FF"><strong>}</strong></font>

        <font color="#444444">/* If even one library or Interface did not setup, call os_CloseLibs() to cleanup */</font>
        <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">FALSE</font> <font color="4444FF">=</font><font color="4444FF">=</font> <font color="#2040a0">bResult</font> <font color="4444FF">)</font> <font color="#2040a0">os_CloseLibs</font><font color="4444FF">(</font><font color="#2040a0">pOSApp</font><font color="4444FF">)</font><font color="4444FF">;</font>
    <font color="4444FF"><strong>}</strong></font>
    <strong>return</strong><font color="4444FF">(</font> <font color="#2040a0">bResult</font> <font color="4444FF">)</font><font color="4444FF">;</font>
<font color="4444FF"><strong>}</strong></font>
</pre>
<hr>
syntax highlighted by <a href="http://www.palfrader.org/code2html">Code2HTML</a>, v. 0.9.1
</body>
</html>
