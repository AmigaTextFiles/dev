<html>
<head>
  <title>../../../common/source/initargs.c</title>
</head>
<body bgcolor="#ffffff" text="#000000">
<pre>
<font color="#444444">/*
 *---------------------------------------------------------------------
 * Original Author: Jamie Krueger
 * Creation Date  : 9/25/2003
 *---------------------------------------------------------------------
 * Copyright (c) 2005 BITbyBIT Software Group, All Rights Reserved.
 *
 * This software is the confidential and proprietary information of
 * BITbyBIT Software Group (Confidential Information).  You shall not
 * disclose such Confidential Information and shall use it only in
 * accordance with the terms of the license agreement you entered into
 * with BITbyBIT Software Group.
 *
 * BITbyBIT SOFTWARE GROUP MAKES NO REPRESENTATIONS OR WARRANTIES ABOUT THE
 * SUITABILITY OF THE SOFTWARE, EITHER EXPRESS OR IMPLIED, INCLUDING
 * FITNESS FOR A PARTICULAR PURPOSE, OR NON-INFRINGEMENT. 
 * BITbyBIT Software Group LLC SHALL NOT BE LIABLE FOR ANY DAMAGES SUFFERED BY
 * LICENSEE AS A RESULT OF USING, MODIFYING OR DISTRIBUTING THIS
 * SOFTWARE OR ITS DERIVATIVES.
 *---------------------------------------------------------------------
 *
 * Template Application for writing AVD aware software
 *
 * Project: AVD_Template
 *
 * Function Name: AVD_InitArgs()
 *
 * Description: Handles the command line parsing, placing
 *              the results into a AVDAPP project structure
 *
 * Entry Values: pApp = Pointer to the Project's AVDAPP Structure
 *               argc = Total number of command arguments
 *               argv = pointer to an array of argument strings
 *
 * Exit Values: AVD_ERRORCODE if any. (eg. AVDERR_NOERROR)
 *
 * $VER: initargs.c 1.0.0.0
 * 
 */</font>

<font color="0000ff"><strong>#include <font color="#008000">&quot;common.h&quot;</font></strong></font>

<font color="#2040a0">AVD_ERRORCODE</font> <font color="#2040a0">AVD_InitArgs</font><font color="4444FF">(</font> <font color="#2040a0">AVDAPP</font> <font color="4444FF">*</font><font color="#2040a0">pApp</font>, <strong>int</strong> <font color="#2040a0">argc</font>, <strong>char</strong> <font color="4444FF">*</font><font color="#2040a0">argv</font><font color="4444FF">[</font><font color="4444FF">]</font> <font color="4444FF">)</font>
<font color="4444FF"><strong>{</strong></font>
    <font color="#2040a0">AVD_ERRORCODE</font> <font color="#2040a0">Results</font>         <font color="4444FF">=</font> <font color="#2040a0">AVDERR_INITARGSFAILED</font><font color="4444FF">;</font>
    <strong>char</strong>          <font color="4444FF">*</font><font color="#2040a0">sArgument</font>      <font color="4444FF">=</font> <font color="#2040a0">AVD_NULL</font><font color="4444FF">;</font>
    <strong>int</strong>           <font color="#2040a0">nLastArgc</font>       <font color="4444FF">=</font> <font color="#FF0000">0</font><font color="4444FF">;</font>
    <font color="#2040a0">AVD_BOOL</font>      <font color="#2040a0">bReadCfg</font>        <font color="4444FF">=</font> <font color="#2040a0">AVD_TRUE</font><font color="4444FF">;</font>

    <strong>if</strong> <font color="4444FF">(</font> <font color="4444FF">(</font><font color="#2040a0">AVD_NULL</font> <font color="4444FF">!</font><font color="4444FF">=</font> <font color="#2040a0">pApp</font><font color="4444FF">)</font> <font color="4444FF">&amp;</font><font color="4444FF">&amp;</font> <font color="4444FF">(</font><font color="#2040a0">AVD_NULL</font> <font color="4444FF">!</font><font color="4444FF">=</font> <font color="#2040a0">argv</font><font color="4444FF">)</font> <font color="4444FF">)</font>
    <font color="4444FF"><strong>{</strong></font>

<font color="0000ff"><strong>#ifdef INCLUDE_COMMON_ARGS<font color="#444444"> /* The AmigaOS version(s) take care of these in os_InitArgs() */</font></strong></font>
        <font color="#444444">/*
         * Check for VERSION REQUEST: [-V] (uppercase) [--version|-version] (Ignoring case)
         */</font>
        <font color="#2040a0">sArgument</font> <font color="4444FF">=</font> <font color="#2040a0">AVD_ReturnArg</font><font color="4444FF">(</font><font color="#008000">&quot;-V&quot;</font>,<font color="#2040a0">ARG_MATCHESLABEL</font>,<font color="#2040a0">ARG_MATCHCASE</font>,<font color="#FF0000">1</font>,<font color="4444FF">(</font><strong>int</strong> <font color="4444FF">*</font><font color="4444FF">)</font><font color="4444FF">&amp;</font><font color="#2040a0">nLastArgc</font>,<font color="#2040a0">argc</font>,<font color="#2040a0">argv</font><font color="4444FF">)</font><font color="4444FF">;</font>
        <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">AVD_NULL</font> <font color="4444FF">=</font><font color="4444FF">=</font> <font color="#2040a0">sArgument</font> <font color="4444FF">)</font> <font color="#2040a0">sArgument</font> <font color="4444FF">=</font> <font color="#2040a0">AVD_ReturnArg</font><font color="4444FF">(</font><font color="#008000">&quot;--version&quot;</font>,<font color="#2040a0">ARG_MATCHESLABEL</font>,<font color="#2040a0">ARG_IGNORECASE</font>,<font color="#FF0000">1</font>,<font color="4444FF">(</font><strong>int</strong> <font color="4444FF">*</font><font color="4444FF">)</font><font color="4444FF">&amp;</font><font color="#2040a0">nLastArgc</font>,<font color="#2040a0">argc</font>,<font color="#2040a0">argv</font><font color="4444FF">)</font><font color="4444FF">;</font>
        <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">AVD_NULL</font> <font color="4444FF">=</font><font color="4444FF">=</font> <font color="#2040a0">sArgument</font> <font color="4444FF">)</font> <font color="#2040a0">sArgument</font> <font color="4444FF">=</font> <font color="#2040a0">AVD_ReturnArg</font><font color="4444FF">(</font><font color="#008000">&quot;-version&quot;</font>,<font color="#2040a0">ARG_MATCHESLABEL</font>,<font color="#2040a0">ARG_IGNORECASE</font>,<font color="#FF0000">1</font>,<font color="4444FF">(</font><strong>int</strong> <font color="4444FF">*</font><font color="4444FF">)</font><font color="4444FF">&amp;</font><font color="#2040a0">nLastArgc</font>,<font color="#2040a0">argc</font>,<font color="#2040a0">argv</font><font color="4444FF">)</font><font color="4444FF">;</font>
        <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">AVD_NULL</font> <font color="4444FF">!</font><font color="4444FF">=</font> <font color="#2040a0">sArgument</font> <font color="4444FF">)</font>
        <font color="4444FF"><strong>{</strong></font>
            <font color="#2040a0">pApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oApp</font>.<font color="#2040a0">bVersionRequest</font> <font color="4444FF">=</font> <font color="#2040a0">AVD_TRUE</font><font color="4444FF">;</font>
            <font color="#2040a0">Results</font> <font color="4444FF">=</font> <font color="#2040a0">AVDERR_NOERROR</font><font color="4444FF">;</font>
            <font color="#2040a0">bReadCfg</font> <font color="4444FF">=</font> <font color="#2040a0">AVD_FALSE</font><font color="4444FF">;</font> <font color="#444444">/* Version requests are mutually-exclusive with all other arguments */</font>
        <font color="4444FF"><strong>}</strong></font>

        <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">AVD_TRUE</font> <font color="4444FF">=</font><font color="4444FF">=</font> <font color="#2040a0">bReadCfg</font> <font color="4444FF">)</font>
        <font color="4444FF"><strong>{</strong></font>
            <font color="#444444">/*
             * Check for USAGE REQUEST: [-h|--help|-help|--usage|-usage] (Ignoring case)
             */</font>
            <font color="#2040a0">sArgument</font> <font color="4444FF">=</font> <font color="#2040a0">AVD_ReturnArg</font><font color="4444FF">(</font><font color="#008000">&quot;-h&quot;</font>,<font color="#2040a0">ARG_MATCHESLABEL</font>,<font color="#2040a0">ARG_IGNORECASE</font>,<font color="#FF0000">1</font>,<font color="4444FF">(</font><strong>int</strong> <font color="4444FF">*</font><font color="4444FF">)</font><font color="4444FF">&amp;</font><font color="#2040a0">nLastArgc</font>,<font color="#2040a0">argc</font>,<font color="#2040a0">argv</font><font color="4444FF">)</font><font color="4444FF">;</font>
            <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">AVD_NULL</font> <font color="4444FF">=</font><font color="4444FF">=</font> <font color="#2040a0">sArgument</font> <font color="4444FF">)</font> <font color="#2040a0">sArgument</font> <font color="4444FF">=</font> <font color="#2040a0">AVD_ReturnArg</font><font color="4444FF">(</font><font color="#008000">&quot;--help&quot;</font>,<font color="#2040a0">ARG_MATCHESLABEL</font>,<font color="#2040a0">ARG_IGNORECASE</font>,<font color="#FF0000">1</font>,<font color="4444FF">(</font><strong>int</strong> <font color="4444FF">*</font><font color="4444FF">)</font><font color="4444FF">&amp;</font><font color="#2040a0">nLastArgc</font>,<font color="#2040a0">argc</font>,<font color="#2040a0">argv</font><font color="4444FF">)</font><font color="4444FF">;</font>
            <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">AVD_NULL</font> <font color="4444FF">=</font><font color="4444FF">=</font> <font color="#2040a0">sArgument</font> <font color="4444FF">)</font> <font color="#2040a0">sArgument</font> <font color="4444FF">=</font> <font color="#2040a0">AVD_ReturnArg</font><font color="4444FF">(</font><font color="#008000">&quot;-help&quot;</font>,<font color="#2040a0">ARG_MATCHESLABEL</font>,<font color="#2040a0">ARG_IGNORECASE</font>,<font color="#FF0000">1</font>,<font color="4444FF">(</font><strong>int</strong> <font color="4444FF">*</font><font color="4444FF">)</font><font color="4444FF">&amp;</font><font color="#2040a0">nLastArgc</font>,<font color="#2040a0">argc</font>,<font color="#2040a0">argv</font><font color="4444FF">)</font><font color="4444FF">;</font>
            <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">AVD_NULL</font> <font color="4444FF">=</font><font color="4444FF">=</font> <font color="#2040a0">sArgument</font> <font color="4444FF">)</font> <font color="#2040a0">sArgument</font> <font color="4444FF">=</font> <font color="#2040a0">AVD_ReturnArg</font><font color="4444FF">(</font><font color="#008000">&quot;--usage&quot;</font>,<font color="#2040a0">ARG_MATCHESLABEL</font>,<font color="#2040a0">ARG_IGNORECASE</font>,<font color="#FF0000">1</font>,<font color="4444FF">(</font><strong>int</strong> <font color="4444FF">*</font><font color="4444FF">)</font><font color="4444FF">&amp;</font><font color="#2040a0">nLastArgc</font>,<font color="#2040a0">argc</font>,<font color="#2040a0">argv</font><font color="4444FF">)</font><font color="4444FF">;</font>
            <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">AVD_NULL</font> <font color="4444FF">=</font><font color="4444FF">=</font> <font color="#2040a0">sArgument</font> <font color="4444FF">)</font> <font color="#2040a0">sArgument</font> <font color="4444FF">=</font> <font color="#2040a0">AVD_ReturnArg</font><font color="4444FF">(</font><font color="#008000">&quot;-usage&quot;</font>,<font color="#2040a0">ARG_MATCHESLABEL</font>,<font color="#2040a0">ARG_IGNORECASE</font>,<font color="#FF0000">1</font>,<font color="4444FF">(</font><strong>int</strong> <font color="4444FF">*</font><font color="4444FF">)</font><font color="4444FF">&amp;</font><font color="#2040a0">nLastArgc</font>,<font color="#2040a0">argc</font>,<font color="#2040a0">argv</font><font color="4444FF">)</font><font color="4444FF">;</font>
            <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">AVD_NULL</font> <font color="4444FF">!</font><font color="4444FF">=</font> <font color="#2040a0">sArgument</font> <font color="4444FF">)</font>
            <font color="4444FF"><strong>{</strong></font>
                <font color="#2040a0">pApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oApp</font>.<font color="#2040a0">bHelpRequest</font> <font color="4444FF">=</font> <font color="#2040a0">AVD_TRUE</font><font color="4444FF">;</font>
                <font color="#2040a0">Results</font> <font color="4444FF">=</font> <font color="#2040a0">AVDERR_NOERROR</font><font color="4444FF">;</font>
                <font color="#2040a0">bReadCfg</font> <font color="4444FF">=</font> <font color="#2040a0">AVD_FALSE</font><font color="4444FF">;</font> <font color="#444444">/* Usage requests are mutually-exclusive with all other arguments */</font>
            <font color="4444FF"><strong>}</strong></font>
        <font color="4444FF"><strong>}</strong></font>
<font color="0000ff"><strong>#endif</strong></font>

        <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">AVD_TRUE</font> <font color="4444FF">=</font><font color="4444FF">=</font> <font color="#2040a0">bReadCfg</font> <font color="4444FF">)</font>
        <font color="4444FF"><strong>{</strong></font>
            <font color="#444444">/*
             * Throw in OS layer arguments (like Configuration filename, etc.)
             */</font>
            <font color="#2040a0">Results</font> <font color="4444FF">=</font> <font color="#2040a0">os_InitArgs</font><font color="4444FF">(</font><font color="4444FF">&amp;</font><font color="#2040a0">pApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oOSApp</font>,<font color="#2040a0">argc</font>,<font color="#2040a0">argv</font><font color="4444FF">)</font><font color="4444FF">;</font>
            <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">AVDERR_NOERROR</font> <font color="4444FF">!</font><font color="4444FF">=</font> <font color="#2040a0">Results</font> <font color="4444FF">)</font>
            <font color="4444FF"><strong>{</strong></font>
                <font color="#2040a0">bReadCfg</font> <font color="4444FF">=</font> <font color="#2040a0">AVD_FALSE</font><font color="4444FF">;</font> <font color="#444444">/* Stop reading further args on any error */</font>
                <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">AVDERR_HELPREQUEST</font> <font color="4444FF">=</font><font color="4444FF">=</font> <font color="#2040a0">Results</font> <font color="4444FF">)</font>
                <font color="4444FF"><strong>{</strong></font>
                    <font color="#444444">/* If this is just a help/usage request, then set the HelpRequest Flag and clear the Error code */</font>
                    <font color="#2040a0">pApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oApp</font>.<font color="#2040a0">bHelpRequest</font> <font color="4444FF">=</font> <font color="#2040a0">AVD_TRUE</font><font color="4444FF">;</font>
                    <font color="#2040a0">Results</font> <font color="4444FF">=</font> <font color="#2040a0">AVDERR_NOERROR</font><font color="4444FF">;</font>
                <font color="4444FF"><strong>}</strong></font>
                <strong>else</strong> <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">AVDERR_VERSIONREQUEST</font> <font color="4444FF">=</font><font color="4444FF">=</font> <font color="#2040a0">Results</font> <font color="4444FF">)</font>
                <font color="4444FF"><strong>{</strong></font>
                    <font color="#444444">/* If this is just a Version request, then set the VersionRequest Flag and clear the Error code */</font>
                    <font color="#2040a0">pApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oApp</font>.<font color="#2040a0">bVersionRequest</font> <font color="4444FF">=</font> <font color="#2040a0">AVD_TRUE</font><font color="4444FF">;</font>
                    <font color="#2040a0">Results</font> <font color="4444FF">=</font> <font color="#2040a0">AVDERR_NOERROR</font><font color="4444FF">;</font>
                <font color="4444FF"><strong>}</strong></font>
            <font color="4444FF"><strong>}</strong></font>
        <font color="4444FF"><strong>}</strong></font>

<font color="0000ff"><strong>#ifdef INCLUDE_CONFIG_FILE</strong></font>
        <font color="#444444">/* If no mutually-exclusive items have been found, read in the Configuration File */</font>
        <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">AVD_TRUE</font> <font color="4444FF">=</font><font color="4444FF">=</font> <font color="#2040a0">bReadCfg</font> <font color="4444FF">)</font>
        <font color="4444FF"><strong>{</strong></font>
            <font color="#444444">/*
             * Ask OS layer to read in last known Configuration (into pApp)
             * The results here are consider informational only, as not being able
             * to read in the configuration file is not necessarily an error.
             */</font>
            <font color="#2040a0">Results</font> <font color="4444FF">=</font> <font color="#2040a0">os_ReadConfig</font><font color="4444FF">(</font><font color="4444FF">&amp;</font><font color="#2040a0">pApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oApp</font>,<font color="4444FF">&amp;</font><font color="#2040a0">pApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oOSApp</font>,<font color="#2040a0">AVD_NULL</font><font color="4444FF">)</font><font color="4444FF">;</font>
        <font color="4444FF"><strong>}</strong></font>
<font color="0000ff"><strong>#endif</strong></font>

<font color="0000ff"><strong>#ifdef INCLUDE_COMMON_ARGS</strong></font>
        <font color="#444444">/*
         * If no mutually-exclusive items have been found, continue parsing the command line.
         * Further options found here will override those within the configuration file.
         */</font>
        <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">AVD_TRUE</font> <font color="4444FF">=</font><font color="4444FF">=</font> <font color="#2040a0">bReadCfg</font> <font color="4444FF">)</font>
        <font color="4444FF"><strong>{</strong></font>
            <font color="#444444">/*
             * Check for QUIET REQUEST: [--quiet|-quiet] (Ignoring case)
             */</font>
            <font color="#2040a0">sArgument</font> <font color="4444FF">=</font> <font color="#2040a0">AVD_ReturnArg</font><font color="4444FF">(</font><font color="#008000">&quot;--quiet&quot;</font>,<font color="#2040a0">ARG_MATCHESLABEL</font>,<font color="#2040a0">ARG_IGNORECASE</font>,<font color="#FF0000">1</font>,<font color="4444FF">(</font><strong>int</strong> <font color="4444FF">*</font><font color="4444FF">)</font><font color="4444FF">&amp;</font><font color="#2040a0">nLastArgc</font>,<font color="#2040a0">argc</font>,<font color="#2040a0">argv</font><font color="4444FF">)</font><font color="4444FF">;</font>
            <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">AVD_NULL</font> <font color="4444FF">=</font><font color="4444FF">=</font> <font color="#2040a0">sArgument</font> <font color="4444FF">)</font> <font color="#2040a0">sArgument</font> <font color="4444FF">=</font> <font color="#2040a0">AVD_ReturnArg</font><font color="4444FF">(</font><font color="#008000">&quot;-quiet&quot;</font>,<font color="#2040a0">ARG_MATCHESLABEL</font>,<font color="#2040a0">ARG_IGNORECASE</font>,<font color="#FF0000">1</font>,<font color="4444FF">(</font><strong>int</strong> <font color="4444FF">*</font><font color="4444FF">)</font><font color="4444FF">&amp;</font><font color="#2040a0">nLastArgc</font>,<font color="#2040a0">argc</font>,<font color="#2040a0">argv</font><font color="4444FF">)</font><font color="4444FF">;</font>
            <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">AVD_NULL</font> <font color="4444FF">!</font><font color="4444FF">=</font> <font color="#2040a0">sArgument</font> <font color="4444FF">)</font>
            <font color="4444FF"><strong>{</strong></font>
                <font color="#2040a0">pApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oApp</font>.<font color="#2040a0">bQuiet</font> <font color="4444FF">=</font> <font color="#2040a0">AVD_TRUE</font><font color="4444FF">;</font>
            <font color="4444FF"><strong>}</strong></font>

            <font color="#444444">/*
             * Check for VERBOSE REQUEST: [-v] (lowercase) [--verbose|-verbose] (Ignoring case)
             */</font>
            <font color="#2040a0">sArgument</font> <font color="4444FF">=</font> <font color="#2040a0">AVD_ReturnArg</font><font color="4444FF">(</font><font color="#008000">&quot;-v&quot;</font>,<font color="#2040a0">ARG_MATCHESLABEL</font>,<font color="#2040a0">ARG_MATCHCASE</font>,<font color="#FF0000">1</font>,<font color="4444FF">(</font><strong>int</strong> <font color="4444FF">*</font><font color="4444FF">)</font><font color="4444FF">&amp;</font><font color="#2040a0">nLastArgc</font>,<font color="#2040a0">argc</font>,<font color="#2040a0">argv</font><font color="4444FF">)</font><font color="4444FF">;</font>
            <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">AVD_NULL</font> <font color="4444FF">=</font><font color="4444FF">=</font> <font color="#2040a0">sArgument</font> <font color="4444FF">)</font> <font color="#2040a0">sArgument</font> <font color="4444FF">=</font> <font color="#2040a0">AVD_ReturnArg</font><font color="4444FF">(</font><font color="#008000">&quot;--verbose&quot;</font>,<font color="#2040a0">ARG_MATCHESLABEL</font>,<font color="#2040a0">ARG_IGNORECASE</font>,<font color="#FF0000">1</font>,<font color="4444FF">(</font><strong>int</strong> <font color="4444FF">*</font><font color="4444FF">)</font><font color="4444FF">&amp;</font><font color="#2040a0">nLastArgc</font>,<font color="#2040a0">argc</font>,<font color="#2040a0">argv</font><font color="4444FF">)</font><font color="4444FF">;</font>
            <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">AVD_NULL</font> <font color="4444FF">=</font><font color="4444FF">=</font> <font color="#2040a0">sArgument</font> <font color="4444FF">)</font> <font color="#2040a0">sArgument</font> <font color="4444FF">=</font> <font color="#2040a0">AVD_ReturnArg</font><font color="4444FF">(</font><font color="#008000">&quot;-verbose&quot;</font>,<font color="#2040a0">ARG_MATCHESLABEL</font>,<font color="#2040a0">ARG_IGNORECASE</font>,<font color="#FF0000">1</font>,<font color="4444FF">(</font><strong>int</strong> <font color="4444FF">*</font><font color="4444FF">)</font><font color="4444FF">&amp;</font><font color="#2040a0">nLastArgc</font>,<font color="#2040a0">argc</font>,<font color="#2040a0">argv</font><font color="4444FF">)</font><font color="4444FF">;</font>
            <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">AVD_NULL</font> <font color="4444FF">!</font><font color="4444FF">=</font> <font color="#2040a0">sArgument</font> <font color="4444FF">)</font>
            <font color="4444FF"><strong>{</strong></font>
                <font color="#2040a0">pApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oApp</font>.<font color="#2040a0">bVerbose</font> <font color="4444FF">=</font> <font color="#2040a0">AVD_TRUE</font><font color="4444FF">;</font>
            <font color="4444FF"><strong>}</strong></font>
<font color="0000ff"><strong>#endif</strong></font>

<font color="0000ff"><strong>#ifdef INCLUDE_CONFIG_FILE</strong></font>
            <font color="#444444">/*
             * Check for SAVE CONFIGURATION REQUEST: [--save|-save] (Ignoring case)
             */</font>
            <font color="#2040a0">sArgument</font> <font color="4444FF">=</font> <font color="#2040a0">AVD_ReturnArg</font><font color="4444FF">(</font><font color="#008000">&quot;--save&quot;</font>,<font color="#2040a0">ARG_MATCHESLABEL</font>,<font color="#2040a0">ARG_IGNORECASE</font>,<font color="#FF0000">1</font>,<font color="4444FF">(</font><strong>int</strong> <font color="4444FF">*</font><font color="4444FF">)</font><font color="4444FF">&amp;</font><font color="#2040a0">nLastArgc</font>,<font color="#2040a0">argc</font>,<font color="#2040a0">argv</font><font color="4444FF">)</font><font color="4444FF">;</font>
            <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">AVD_NULL</font> <font color="4444FF">=</font><font color="4444FF">=</font> <font color="#2040a0">sArgument</font> <font color="4444FF">)</font> <font color="#2040a0">sArgument</font> <font color="4444FF">=</font> <font color="#2040a0">AVD_ReturnArg</font><font color="4444FF">(</font><font color="#008000">&quot;-save&quot;</font>,<font color="#2040a0">ARG_MATCHESLABEL</font>,<font color="#2040a0">ARG_IGNORECASE</font>,<font color="#FF0000">1</font>,<font color="4444FF">(</font><strong>int</strong> <font color="4444FF">*</font><font color="4444FF">)</font><font color="4444FF">&amp;</font><font color="#2040a0">nLastArgc</font>,<font color="#2040a0">argc</font>,<font color="#2040a0">argv</font><font color="4444FF">)</font><font color="4444FF">;</font>
            <strong>if</strong> <font color="4444FF">(</font> <font color="#2040a0">AVD_NULL</font> <font color="4444FF">!</font><font color="4444FF">=</font> <font color="#2040a0">sArgument</font> <font color="4444FF">)</font>
            <font color="4444FF"><strong>{</strong></font>
                <font color="#444444">/* Ask OS layer to write updated Configuration (from pApp) */</font>
                <font color="#2040a0">Results</font> <font color="4444FF">=</font> <font color="#2040a0">os_SaveConfig</font><font color="4444FF">(</font><font color="4444FF">&amp;</font><font color="#2040a0">pApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oApp</font>,<font color="4444FF">&amp;</font><font color="#2040a0">pApp</font><font color="4444FF">-</font><font color="4444FF">&gt;</font><font color="#2040a0">oOSApp</font>,<font color="#2040a0">AVD_NULL</font><font color="4444FF">)</font><font color="4444FF">;</font>
            <font color="4444FF"><strong>}</strong></font>
<font color="0000ff"><strong>#endif</strong></font>

<font color="0000ff"><strong>#ifdef INCLUDE_COMMON_ARGS</strong></font>
        <font color="4444FF"><strong>}</strong></font>
<font color="0000ff"><strong>#endif</strong></font>

    <font color="4444FF"><strong>}</strong></font>
    <strong>return</strong><font color="4444FF">(</font> <font color="4444FF">(</font><font color="#2040a0">AVD_ERRORCODE</font><font color="4444FF">)</font><font color="#2040a0">Results</font> <font color="4444FF">)</font><font color="4444FF">;</font>
<font color="4444FF"><strong>}</strong></font>
</pre>
<hr>
syntax highlighted by <a href="http://www.palfrader.org/code2html">Code2HTML</a>, v. 0.9.1
</body>
</html>
