<html>
<head>
 <title>Scroller_XYUnlimited</title>
</head>
<body bgcolor=#FFFFFF>

Dieser Algorithmus und der von <a href="xylimited-de.html">Scroller_XYLimited</a>
sind sehr ähnlich. Der wichtigste Unterschied ist, daß die Höhe der Bitmap nicht
mehr von der Breite des Levels abhängt. Dennoch sollte man diesen Algorithmus
nicht als die beste Wahl ansehen, weil er auch ein paar Nachteile hat.<p>

Zusätzlich zu der "normalen" Extrahöhe von 2 * BLOCKHÖHE brauchen wir hier nur
eine zusätzliche Pixelzeile. Die Gesamthöhe der Bitmap beträgt also 289 (256 +
16 * 2 + 1). Beim Scroller_XYLimited gab es an der unteren Grenze der Bitmap
einen Bereich, der durch horizontales Scrollen in Anspruch genommen wird.
Je breiter das Level, desto größer mußte also auch dieser Bereich sein. Diesen
Bereich gibt es auch hier, mit dem Unterschied, daß er stets nur eine Zeile
hoch ist.<p>

Wie kann das funktionieren? Ganz einfach. Wir schränken das horizontale
Scrolling in der Bitmap (!) ein, so daß sich für videoposx nur Werte zwischen
0 und BITMAPBREITE - 1 ergeben. Wenn durch Scrolling videoposx eigentlich den Wert
BITMAPBREITE erhalten müßte, dann setzen wir videoposx auf 0 und erhöhen als
Ausgleich videoposy um eine Planeline (!). Wenn durch Scrolling videoposx eigentlich
den Wert -1 erhalten müßte, dann setzen wir videoposx auf BITMAPBREITE - 1 und
vermindern als Ausgleich videoposy um eine Planeline (!).<p>

Für videoposy müssen wir natürlich jetzt Planelines als Einheit verwenden. Auch
sonst ändert sich einiges am Quelltext. Beim Blitten der Blöcke müssen wir
manchmal den Blit in 2 Schritte aufteilen, weil videoposy von videoposx beeinflußt
wird. Beim Scroller_XYLimited müssen Blöcke nie in 2 Schritten geblittet werden,
nur BOBs. Außerdem muß durch Kontrolle und evtl. Anpassung der Blit-Ziel-Koordinaten
dafür gesorgt werden, daß die Block-Blits nur im normalen Bitmapbereich passieren,
also nicht in der Extrazeile. Block-Blits passieren also nur im Bereich
(0,0) - (BITMAPBREITE - 1, BITMAPHÖHE - 1). BITMAPHÖHE ist in unserem Fall
übrigens 288 und nicht 289.<p>

Ein paar Probleme gibt's auch beim Video-Splitting. Da dieses nicht im sichtbaren
Bereich einer Rasterzeile möglich ist, muß die Extrazeile zu Hilfe genommen werden.
Vom Bitmapanfang kopieren wir nach Beendigung aller Scroll-Routinen so viele Bytes
in die Extrazeile, damit auch die unterste dargestellte (!) Zeile der Bitmap komplett
hintereinander im Speicher steht. Auch die Berechnung der VIDEOSPLIT Plane Pointer
ist ein wenig anders, weil videoposx nur Werte zwischen 0 und BITMAPBREITE - 1
hat, also nur eine Planeline 'umfaßt'. Deshalb muß videoposy mit in die Berechnung
einbezogen werden, damit die Adressen auf der richtigen Planeline liegen.<p>

Beim Blitten von BOBs ist zu beachten, daß dies nach dem Spezial-Blit in die
Extrazeile passieren muß.<p>

Verwenden sollten sie diesen Algorithmus nicht! Wenn sie auf seine positiven
Eigenschaften nicht verzichten können, dann sollten Sie sich
<a href="xyunlimited2-de.html">Scroller_XYUnlimited2</a> anschauen. Dort werden
die Dinge zwar sehr ähnlich gelöst, aber mit weit weniger Nachteilen.


</body>
</html>
