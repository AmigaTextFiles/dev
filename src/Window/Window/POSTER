Article 5072 of net.micro.amiga:
Relay-Version: version B 2.10.3 4.3bsd-beta 6/6/85; site well.UUCP
Path: well!ptsfa!qantel!lll-lcc!lll-crg!rutgers!caip!cbmvax!andy
From: andy@cbmvax.cbm.UUCP (Andy Finkel)
Newsgroups: net.micro.amiga
Subject: Creating a DOS Window in a Custom Screen
Message-ID: <901@cbmvax.cbmvax.cbm.UUCP>
Date: 15 Oct 86 17:04:17 GMT
Date-Received: 16 Oct 86 11:44:54 GMT
Reply-To: andy@cbmvax.UUCP (Andy Finkel)
Organization: Commodore Technology, West Chester, PA
Lines: 302

Tricks with AmigaDOS, part II.

As you may recall, part one was all about finding the window pointer and
console.device IO Request Block from a DOS window.  Part II is about how
to go the other way: make an Intuition window into a DOS window.  

Specifically, this is used to get a DOS window to open in a custom
screen. There are reasons why this is something you might want to do...
like, oh, using the Execute command to initialize a new disk in a program
that doesn't use the Workbench screen.

We all knew it was possible...remember the first ABasic ? (by MetaCompCo)


For those of you writing shells...under V1.2 the ability to switch a
window in or out of RAW mode via an AmigaDOS packet can be used to
good advantage when combined with this.


There are 3 files:  window.c which contains most of the program, console.asm
which contains the assembler interface calls to the BCPL routines of 
AmigaDOS, and window.i, the include file I use when I am doing tricks
like this.

Break up the file into its component parts, compile, assemble, and link.

Two warning...under the pressure of 1.2 I've only compiled it under the
Greenhills C cross compiler running on the Sun...so some slight changes
may be needed for other compilers.  I'm only linking with the amiga.lib 
on this one.

The other warning...to finish this quickly (as some people need it now)
I used 3 of the BCPL global routines.  (Sorry).  Actually, I
only had to use 2 (finddevice and loaddevice) but as long as I
was doing it, I went ahead and used the DOS sendpacket).  Assembler versions
of those functions are possible (I think, sigh).

Anyway, another completed chapter in the mysteries of AmigaDos.

				andy finkel
				Commodore-Amiga



----------------------CUT HERE------------------------------------------
-------------------------CUT HERE *********************

-- 

			andy finkel
			Commodore(Amiga)
			{ihnp4|seismo|allegra}!cbmvax!andy
		or	 pyramid!amiga!andy

Any expressed opinions are mine; but feel free to share.

I disclaim all responsibilities, all shapes, all sizes, all colors.

"Remember, no matter where you grow, there you are." - Buckaroo Bonsai.


