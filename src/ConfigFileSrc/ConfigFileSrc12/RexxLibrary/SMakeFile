#
#		$PROJECT: RexxConfigFile.library
#		$FILE: SMakeFile
#		$DESCRIPTION: SAS/C Make File.
#
#		(C) Copyright 1997 Marcel Karas
#			 All Rights Reserved.
#

.c.o:
#	SC RESOPTS $(GST) $(CFLAGS) $(OPTIMIZE) CPU=$(CPU) DISASM=$*.s OBJNAME=$*.o $*.c
	SC RESOPTS $(GST) $(CFLAGS) $(OPTIMIZE) CPU=$(CPU) OBJNAME=$*.o $*.c

.asm.o:
	ASM $*.asm

FUNCS		= Funcs/

CFLAGS	= NODEBUG STREQ STRMERGE NOSTKCHK NOVER PARMS=R MATH=S PPBUF=2000000 MEMSIZE=H CNEST
# DEBUG=LINE
LFLAGS	= SC SD NOICONS

OPTIMIZE	= OPT OPTGO OPTSCHED OPTINLOCAL OPTSIZE OPTCOMP=0 OPTDEP=6 OPTRDEP=6 OPTLOOP
#OPTIMIZE	= 
GST		= GST=RXCF.GST GSTIMM
LIBS		= LIB:sc.lib
CPU		= 000
#CPU		= 060

OBJS		=	RomTag.o LibCode.o Dispatch.o RexxVar.o Misc.o CFConv.o \
				$(FUNCS)Open&Close.o \
				$(FUNCS)Read&Write.o \
				$(FUNCS)Add.o \
				$(FUNCS)New.o \
				$(FUNCS)Dispose.o \
				$(FUNCS)Clone.o \
				$(FUNCS)Remove.o \
				$(FUNCS)Clear.o \
				$(FUNCS)Change.o \
				$(FUNCS)Find.o \
				$(FUNCS)Get.o \
				$(FUNCS)Lock.o \
				$(FUNCS)Unlock.o \
				$(FUNCS)Next.o \
				$(FUNCS)Last.o \
				$(FUNCS)GetName.o \
				$(FUNCS)GetOf.o \
				$(FUNCS)Header.o

All: RXCF.GST RexxConfigFile.library

RexxConfigFile.library: $(OBJS)
	SLink WITH <<
$(OBJS)
MAP MapFile f,h,l,o,s,x WIDTH 86
LIB $(LIBS) $(LFLAGS)
TO $@2
<
	HunkShort $@2 $@
	Copy $@ TO LIBS: NOREQ
	Flush rexxconfigfile.library

RXCF.GST: PreInclude.c INCLUDE:Libraries/ConfigFile.h LibBase.h CFConv.h Misc.h
	GST >NIL: UNLOAD $@
	SC RESOPTS NOOBJNAME PPBUF=2000000 MEMSIZE=H MAKEGST=$@ PreInclude.c
	GST $@

ad:
	AutoDoc -a -s -C -I  \
	$(FUNCS)Open&Close.c \
	$(FUNCS)Read&Write.c \
	$(FUNCS)Add.c \
	$(FUNCS)New.c \
	$(FUNCS)Dispose.c \
	$(FUNCS)Clone.c \
	$(FUNCS)Remove.c \
	$(FUNCS)Clear.c \
	$(FUNCS)Change.c \
	$(FUNCS)Find.c \
	$(FUNCS)Get.c \
	$(FUNCS)Lock.c \
	$(FUNCS)Unlock.c \
	$(FUNCS)Next.c \
	$(FUNCS)Last.c \
	$(FUNCS)GetName.c \
	$(FUNCS)GetOf.c \
	$(FUNCS)Header.c >RexxConfigFile.doc
	CleanSpaces RexxConfigFile.doc
	AD2AG RexxConfigFile.doc

br:
	SC:C/BumpRev 1 RexxConfigFile.library

RomTag.o: RomTag.asm RexxConfigFile.library_rev.i
LibCode.o: LibCode.c LibBase.h
Misc.o: Misc.c Misc.h
