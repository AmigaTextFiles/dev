.key file/a,cmd,desc
.bra {
.ket }
.def desc=file_id.diz
failat 21
if {cmd} eq "execute"
 if exists s:playtune
  execute s:playtune "{file}" QUIET
 endif
 skip end
endif
if $xpkstatus eq 1
 execute env:viewdiz/modules/xpk "{file}" cmd={cmd} desc="{desc}"
 skip end
Endif
if {cmd} eq "read"
 moduledescript x "{desc}" "{file}" >nil:
 if warn
  delete >nil: "{desc}"
 endif
endif
if {cmd} eq "write"
 moduledescript d "{file}" >nil:
 moduledescript a "{desc}" "{file}" >nil:
 if warn
  filenote "{file}" "`type "{desc}"`"
 endif
endif
if {cmd} eq "delete"
 moduledescript d "{file}" >nil:
endif
if {cmd} eq "info"
 setenv viewdiz/.minf "*"{file}*"" rwxd 5 _Play (mod.#?|mod15.#?|med.#?) "PT/MED module"
endif
lab end
;$VER: ViewDIZ-MOD.module 1.2 (1.9.98) Mikael Lund