all: libs:wangi.library

libs:wangi.library: wangi.o 
      slink with <<
LIBPREFIX _LIB 
LIBFD wangi.fd 
to wangi.library 
FROM lib:libent.o lib:libinit.o wangi.o 
lib lib:sc.lib 
noicons
SD 
libversion 1 librevision 0
<
# copy library to LIBS:
      slink from wangi.library to wangi.library noicons
# create pragma file
      fd2pragma wangi.fd wangi_pragmas.h
# create HSPascal unit definition
      fdtopas wangi.fd wangi.PAS
# work around fdtopas bug...
      splat -o " xassembler" "; xassembler" wangi.PAS
# compile a test program
      hspc test.pas /Upas:,pas:units /B
# copyto LIBS:
      Copy *.library TO LIBS: CLONE
# flush old library
      flushlibs

wangi.o: wangi.c
      sc libcode wangi.c

      