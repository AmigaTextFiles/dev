; Make the FindXXX distribution
; (to get out from the commands, remove all "QUIET", ">NIL:" and "q" flags)

failat 21

; cleanup
delete >NIL: T:FindXXX#? T:#?.DIZ ALL QUIET

; Make temp dirs in T:
makedir T:FindXXX
makedir T:FindXXXSrc

copy #? TO T:FindXXX QUIET DATES
copy /FindXXX.info T:FindXXX.info
copy T:FindXXX/#? TO T:FindXXXSrc QUIET DATES
copy /FindXXX.info T:FindXXXSrc.info

Delete T:FindXXX/#?.(c|o|h|i|p|rev|lnk) T:FindXXX/#?src#? QUIET
Delete T:FindXXX/makedist T:FindXXX/smakefile T:FindXXX/scoptions QUIET
Delete T:FindXXXSrc/FindXXX QUIET
Delete T:FindXXXSrc/#?.o QUIET

Umentiler T:FindXXX/FindXXX.guide QUIET
Umentiler T:FindXXX/FindXXX.readme QUIET
Umentiler T:FindXXX/FILE_ID.DIZ QUIET
rename T:FindXXX/FILE_ID.DIZ T:FILE_ID.DIZ
Copy T:FindXXX/FindXXX.readme T:FindXXX.readme

Umentiler T:FindXXXSrc/FindXXXSrc.readme T:FindXXXSrc.readme QUIET
Umentiler T:FindXXXSrc/srcFILE_ID.DIZ T:sFILE_ID.DIZ QUIET

lha -arxZq a T:FindXXX.lha T:FindXXX/#? T:FindXXX.info T:FILE_ID.DIZ
pcd T:
lha2lzx FindXXX.lha FindXXX.lzx
pcd

delete T:FILE_ID.DIZ QUIET
rename T:sFILE_ID.DIZ T:FILE_ID.DIZ

lha -arxZq a T:FindXXXSrc.lha T:FindXXXSrc/#? T:FindXXXSrc.info T:FILE_ID.DIZ
pcd T:
lha2lzx FindXXXSrc.lha FindXXXSrc.lzx
pcd

; cleanup
delete T:FindXXX T:FindXXX.info T:FindXXXSrc T:FindXXXSrc.info T:#?.diz ALL QUIET
