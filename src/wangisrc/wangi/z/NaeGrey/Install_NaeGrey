; NaeGrey Install script for use with CBM installer.
; $VER: NaeGrey_Install 1.0

(set @default-dest "SYS:")

; copy NaeGreyPatch to C:
(copylib
	(prompt "Copying NaeGreyPatch")
	(confirm)
	(help @copylib-help)
	(source "NaeGreyPatch")
	(dest "C:")
)

; set NaeGrey's pure flag
(run "protect NaeGrey p ADD")

; copy NaeGrey to WBStartup
(copylib
	(prompt "Copying NaeGrey")
	(confirm)
	(help @copylib-help)
	(source "NaeGrey")
	(dest "SYS:WBStartup")
	(infos)
	(noposition)
)

; find out if the user wants NaeGrey made resident
(set res 
	(askbool
		(prompt "Do you want the NaeGrey command made resident?")
		(help "If NaeGrey is not made resident then it will be loaded off disk each time a screen is opened\n" @askbool-help)
		(default 1)
	)
)

; set action accordingly
(if (= res 1)
	(set cmdline "resident SYS:WBStartup/NaeGrey\n")
	(set cmdline "path SYS:WBStartup ADD\n")
)

; modify the user-startup file
(startup "NaeGrey"
	(prompt "Adding lines to user-startup")
	(help "These lines must be added to your user-startup...\n\n"@startup-help)
	(command cmdline
	         "C:NaeGreyPatch\n"
	)
)

; and exit :)
(exit "A reboot is required.\nI hope you find NaeGrey useful.\nLSK _\\\\//")