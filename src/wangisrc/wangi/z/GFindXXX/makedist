; Make the GFindXXX distribution
; (to get out from the commands, remove all "QUIET", ">NIL:" and "q" flags)

failat 21

; cleanup
delete >NIL: T:GFindXXX#? T:#?.DIZ ALL QUIET

; Make temp dirs in T:
makedir T:GFindXXX
makedir T:GFindXXXSrc

copy #? TO T:GFindXXX QUIET DATES
copy at:www/make259 TO T:GFindXXX QUIET DATES
copy /GFindXXX.info T:GFindXXX.info
copy T:GFindXXX/#? TO T:GFindXXXSrc QUIET DATES
copy /GFindXXX.info T:GFindXXXSrc.info

Delete T:GFindXXX/#?.(c|o|h|i|p|rev|lnk) T:GFindXXX/#?src#? QUIET
Delete T:GFindXXX/makedist T:GFindXXX/smakefile T:GFindXXX/scoptions QUIET
Delete T:GFindXXXSrc/GFindXXX QUIET
Delete T:GFindXXXSrc/#?.o QUIET

Umentiler T:GFindXXX/GFindXXX.guide QUIET
Umentiler T:GFindXXX/GFindXXX.readme QUIET
Umentiler T:GFindXXX/FILE_ID.DIZ QUIET
rename T:GFindXXX/FILE_ID.DIZ T:FILE_ID.DIZ
Copy T:GFindXXX/GFindXXX.readme T:GFindXXX.readme

Umentiler T:GFindXXXSrc/GFindXXXSrc.readme T:GFindXXXSrc.readme QUIET
Umentiler T:GFindXXXSrc/srcFILE_ID.DIZ T:sFILE_ID.DIZ QUIET

lha -arxZq a T:GFindXXX.lha T:GFindXXX/#? T:GFindXXX.info T:FILE_ID.DIZ
pcd T:
lha2lzx GFindXXX.lha GFindXXX.lzx
pcd

delete T:FILE_ID.DIZ QUIET
rename T:sFILE_ID.DIZ T:FILE_ID.DIZ

lha -arxZq a T:GFindXXXSrc.lha T:GFindXXXSrc/#? T:GFindXXXSrc.info T:FILE_ID.DIZ
pcd T:
lha2lzx GFindXXXSrc.lha GFindXXXSrc.lzx
pcd

; cleanup
delete T:GFindXXX T:GFindXXX.info T:GFindXXXSrc T:GFindXXXSrc.info T:#?.diz ALL QUIET
