#
# DMakefile  V3.1
#
# Makefile for ToolManager 3.1 (Converter)
#
# Copyright (C) 1990-98 Stefan Becker
#
# This source code is for educational purposes only. You may study it
# and copy ideas or algorithms from it for your own projects. It is
# not allowed to use any of the source codes (in full or in parts)
# in other programs. Especially it is not allowed to create variants
# of ToolManager or ToolManager-like programs from this source code.
#
TMPDIR = T:
PRE    = $(TMPDIR)tmconv.m
FLAGS  = -3.1 -mi -mRR -ms
IDIRS  = -I//Developer/C/include
#CFLAGS = $(FLAGS) -DDEBUG=1 -d1 $(IDIRS) -proto -H$(PRE)=converter.h -c
#CFLAGS = $(FLAGS) -DDEBUG=0 -d1 $(IDIRS) -proto -H$(PRE)=converter.h -c
CFLAGS = $(FLAGS) $(IDIRS) -proto -H$(PRE)=converter.h -c
#LFLAGS = $(FLAGS) -d1
LFLAGS = $(FLAGS)
#LIBS   = -ldebug -lc -lamiga31 -lamiga31s
LIBS   = -lc

CSRCS  = converter.c scan.c \
         exec.c image.c sound.c menu.c icon.c dock.c access.c \
         memory.c misc.c debug.c
COBJS  = $(CSRCS:"*.c":"$(TMPDIR)conv*.o")
DOBJ   = $(COBJS:"*debug.o")
MEOBJ  = $(COBJS:"*memory.o")
MIOBJ  = $(COBJS:"*misc.o")

DEST   = //Prefs/Converter

all      : $(DEST)

$(DEST)  : $(COBJS)
         dcc $(LFLAGS) -o %(left) %(right) $(LIBS)

$(COBJS) : $(CSRCS)
         dcc $(CFLAGS) -o %(left) %(right)

$(COBJS) : $(PRE)

$(DOBJ)  : /global_debug.c

$(MEOBJ) : /global_memory.c

$(MIOBJ) : /global_misc.c

$(PRE)   : converter.h /global.h DMakefile
         -Delete %(left) QUIET

clean    :
         -Delete $(PRE) $(COBJS) QUIET
