#
# DMakefile  V3.1
#
# Makefile for ToolManager 3.1 (Preferences editor)
#
# Copyright (C) 1990-98 Stefan Becker
#
# This source code is for educational purposes only. You may study it
# and copy ideas or algorithms from it for your own projects. It is
# not allowed to use any of the source codes (in full or in parts)
# in other programs. Especially it is not allowed to create variants
# of ToolManager or ToolManager-like programs from this source code.
#
TMPDIR = T:
PRE    = $(TMPDIR)tmprefs.m
FLAGS  = -3.1 -mi -mRR -ms
IDIRS  = -I //Developer/C/include -I Work:MUI/Developer/C/Include
#CFLAGS = $(FLAGS) -DDEBUG=1 -d1 $(IDIRS) -proto -H$(PRE)=toolmanager.h -c
#CFLAGS = $(FLAGS) -DDEBUG=0 -d1 $(IDIRS) -proto -H$(PRE)=toolmanager.h -c
CFLAGS = $(FLAGS) $(IDIRS) -proto -H$(PRE)=toolmanager.h -c
#LFLAGS = $(FLAGS) -d1
LFLAGS = $(FLAGS)
#LIBS   = -l0 -ldebug -lc -lamiga31 -lamiga31s
LIBS   = -l0 -lamiga31 -lc
LANG   = ÃeÓtina dansk deutsch français italiano norsk polski português srpski svenska
CDIR   = //Locale/Catalogs/
CATD   = $(LANG:"*":"$(CDIR)*")
CATF   = $(LANG:"*":"$(CDIR)*/toolmanagerprefs.catalog")
TRANS  = $(LANG:"*":"*.ct")
LOCD   = toolmanagerprefs.cd
LOCH   = locale.h
LOCE   = empty.ct

CSRCS  = toolmanager.c mainwindow.c listpanel.c listtree.c \
         base.c exec.c image.c sound.c menu.c icon.c dock.c access.c group.c \
         config.c global.c popasl.c droparea.c entrylist.c \
         clipwindow.c cliplist.c entries.c locale.c memory.c misc.c debug.c
COBJS  = $(CSRCS:"*.c":"$(TMPDIR)prefs*.o")
DOBJ   = $(COBJS:"*debug.o")
MEOBJ  = $(COBJS:"*memory.o")
MIOBJ  = $(COBJS:"*misc.o")
AOBJ   = $(TMPDIR)prefsboopsi.o

DEST   = //Prefs/ToolManager

all      : program locale

program  : $(DEST)

$(DEST)  : $(COBJS) $(AOBJ)
         dcc $(LFLAGS) -o %(left) %(right) $(LIBS)

$(COBJS) : $(CSRCS)
         dcc $(CFLAGS) -o %(left) %(right)

$(COBJS) : $(PRE)

$(DOBJ)  : /global_debug.c

$(MEOBJ) : /global_memory.c

$(MIOBJ) : /global_misc.c

$(AOBJ)  : /global_boopsi.a
         das -o %(left) %(right)

$(PRE)   : toolmanager.h $(LOCH) /global.h DMakefile
         -Delete %(left) QUIET

locale   : $(LOCE) $(CATD) $(CATF)

$(LOCH) : $(LOCD)
      CatComp %(right) CFILE %(left) NOARRAY NOBLOCK NOCODE

$(LOCE) : $(LOCD)
      CatComp %(right) CTFILE %(left)

$(CATF) : $(TRANS)
      CatComp $(LOCD) %(right) CATALOG %(left)

$(CATF) : $(LOCD)

$(CATD) : $(CATD)
      MakeDir %(left)

clean    :
         -Delete $(PRE) $(COBJS) $(AOBJ) $(LOCH) $(LOCE) QUIET
