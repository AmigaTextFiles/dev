@DATABASE BtoC_Doc

@NODE main "BtoC version 3.1"

                           BtoC, version 3.2
                           DecrunchBR2, v3.1
                           DecrunchBR3, v1.0
                Copyright © 1992-1995 by Stefano Reksten
                      of 3AM - The Three Amigos !!!

 CONTENTS OF THIS GUIDE:

 · @{"DISCLAIMER" link Disclaimer}
 · @{"COPYRIGHT" link Copyright}
 · @{"WHAT'S BTOC? WHAT DOES BTOC NEED?" link Intro}
 · @{"USING BTOC FROM CLI" link CLI_usage}
 · @{"USING BTOC FROM WORKBENCH" link Workbench_usage}
 · @{"DATA COMPRESSION" link Compression}
 · @{"THINGS TO REMEMBER" link Remember}
 · @{"HISTORY, TO DO" link History}
 · @{"ABOUT LOCALE" link LOCALE}
 · @{"KNOWN BUGS" link Bugs}
 · @{"HOW TO CONTACT THE AUTHOR" link Author}
@ENDNODE

@NODE Disclaimer

 DISCLAIMER
 ---------------------------------------------------------------------------
 The author is  NOT  responsible for  the  suitability or  accuracy of  this
 documentation and/or the program(s)  it describes.  Any damage  directly or
 indirectly caused by the use or  misuse of this  documentation  and/or  the
 program(s) it describes is the sole responsibility of the user her/him self
 ---------------------------------------------------------------------------

@ENDNODE

@NODE Copyright

 COPYRIGHT
 ---------------------------------------------------------------------------
 BtoC v3.2,  Copyright © 1992-1995 by Stefano Reksten.  All rights reserved.
 This program may be distributed  non-commercially only  providing that  the
 executable,  source  code,  documentation  and   copyright  notices  remain
 unchanged and  are included with the distribution.
 The archive must contain the following directories/files:

	BtoC_v3.2/
		Catalogs/
			Italiano/
				BtoC.catalog
		BtoC.guide
		BtoC.guide.info
		BtoC32
		BtoC32.info
		ExplodeStuff/
			DecrunchBR2.o
			DecrunchBR3.o
		Sources/
			Catalogs/
				BtoC.ct
				BtoC_Italiano.cd
			dtcmp/
				PowerPacker.c
				RLECompress.c
				XPK.c
			dtexpl/
				DecrunchBR2.c
				DecrunchBR3.c
			dtgen/
				mask-imagedata.c
				offsets-image.c
				palette.c
			misc/
				appicon.c
				locale.c
				Misc.c
				ParmSay.c
			askfile.c
			btoc.c
			btoc.h
			configuration.c
			decodeilbm.c
			diskIO.c
			menu-gadgets.c
			smakefile
	BtoC_v3.2.info

 Please note that the Sources directory comes in an archive.

 Of course Fred Fish is allowed to include this program in his library.
 I know there are other people doing like Fred: they are allowed to distri-
 bute the archive if the former conditions are respected.

 This program is CARDWARE. If you use it you *MUST* send @{"me" link AUTHOR} a postcard from
 your city/country.  He who uses this program not having sent me a postcard
 can be prosecuted by diarrhoea, data loss, expired driving licence. I aint
 asking a lotta money from your pockets, just a stamp! :-)

 (BtoC was SHAREWARE but NO-ONE ever registered. So I decided to give it to
 the masses for free just to - hopefully - have the program's sources on an
 Aminet CD. As THIS is your concept of supporting shareware,  these will be
 the last programs I'll upload.)
 
@ENDNODE

@NODE Intro

 What's BtoC ?

 This program  is written to  allow the user  to transform  any picture file
 (providing that you use 3.0+ and have the appropriate  datatypes installed,
 otherwise just IFF ILBM files, sorry... ;-) in C (or Assembler) source code
 for Image structures  along with their data,  or in sprite data (for 16, 32
 and 64 bit wide AGA sprites!) or in ANSI escape sequences to draw a picture
 by simply typing the file to your CLI window.
 It is also possible to save the picture's palette in a wide range of tables
 like those used for the LoadRGB4/LoadRGB32/SetRB4/SetRGB32,  or even create
 an ECS copperlist, or an AGA one. The program is also capable of creating a
 mask of the picture (for blitter use) and to select or deselect one or more
 bitplanes, and much more.
 You can save in C, in Assembler or in Raw data everything you want to, just
 in three global files or each picture in his "source" files.  If you prefer
 to save Raw data in one global file, the program will give you the possibi-
 ty to write to disk the offsets from the beginning of that source file.
 Data compression is supported via two internal compressors, PowerPacker and
 XPK.

 ---------------------------------------------------------------------------

 What does BtoC need?

 ·  Kickstart 2.04.

 ·  Disk space enough to store your files!

 ·  PowerPacker.library, XPKmaster.library and some compressors if you want
    your data compressed. These libraries can be found separately on Aminet.

@ENDNODE

@NODE CLI_usage

 How to use BtoC ?

 CLI usage:

 BtoC32
 DT=DataType/K,
 PT=PaletteType/K,
 MT=MaskType/K,
 I=Image/S,
 FD=ForceDepth/N,
 N0=NoBpl0/S,N1=NoBpl1/S,N2=NoBpl2/S,N3=NoBpl3/S,
 N4=NoBpl4/S,N5=NoBpl5/S,N6=NoBpl6/S,N7=NoBpl7/S,
 O=Offsets/S,
 CO=Compression/K,
 CSUB=CompressionSubtype/K,
 DS=DataSave/K,
 PS=PaletteSave/K,
 MS=MaskSave/K,IS=ImageSave/K,
 OS=OffsetsSave/K,
 S=ShowIFF/S,
 SA=SpriteAttached/S,
 L=LowercaseLabels/S,
 Cont=ContinueOnError/S,
 C=CGlobal/K,
 A=AsmGlobal/K,
 R=RawGlobal,
 F=File/A/M

 DT=DataType/K:

	Used to specify which data you want to create. Can be one of
	the following strings:
	None, Image, Chunky, Sprite16, Sprite32, Sprite64, ANSI_New, ANSI_Old.
	(Case insensitive.) Default is None.
	NOTE:  If creating sprites, the depth must be 2 bitplanes for
	       4 colors sprites or 4 bitplanes for 16 colors sprites.
	       Sprites will be high as the picture they come from, but
	       wide as much as requested (they will be cut automatically).
	       Anyway image depth can be forced and some bitplanes can be
	       deselected (see below).
	NOTE:  If creating ANSI data, depth must be 3 bitplanes or
	       less (due to console device's limitation). Data created
	       with ANSI_New will be compatible only with version 36 (KS2.0)
	       or upper of console.device, but it will be smaller and
	       faster to type. Moreover, ANSI data will be automatically
	       put in a RAW file, overriding DataSave option.

 PT=PaletteType/K:

	Used to specify which palette you want to create. Can be one
	of the following strings:
	None, SetRGB4, LoadRGB4, SetRGB32, LoadRGB32, Copperlist,
	AA_Copperlist, IFF_CMAP.
	(Case insensitive.) Default is None.

 MT=MaskType/K:

	Used to specify which mask you want to create. Can be one of
	the following strings:
	None, All, Selected.
	(Case insensitive.) Default is None.

 I=Image/S:

	Used to specify if an Image structure is wanted. The structure
	will have its fields filled with appropriate values calculated
	from the current picture.
	(Case insensitive.) Default is image not wanted.

 FD=ForceDepth/N:

	Used to coherce the depth of the picture. Useful when writing
	ANSI data (picture must be 3 bitplanes depth), or sprite data
	(picture must be 2 or 4 bitplanes depth).
	Can be a number from 0 to 8 (0 means always original depth).
	If depth is forced to a value greater than its original value
	then added bitplanes will be filled with zeroes.
	(Case insensitive.) Default is to keep always the picture's
	original depth.

 N0=NoBpl0/S, ..., N7=NoBpl7/S:

	Used to switch off a bitplane. It will be replaced with an
	empty one. (Case insensitive.) Default switches ON only all
	the bitplanes of the picture.

 O=Offsets/S:

	Used to write offsets of data saved in a Raw file. Offsets
	of course cannot be saved on a Raw file, but only to a C or
	Assembler source file. (Case insensitive.) Default is offsets
	not wanted.

 CO=Compression/K:

	Can be one of the following:
	None, BYTERUN2, BYTERUN3, PowerPacker, XPK.
	(Case insensitive.) Default is data not crunched.
	SEE ALSO next option.

 CSUB=CompressionSubtype/K:

	If Compression is PowerPacker must be one of the following:
	Fast, Mediocre, Good, Very_good, Best.
	If Compression is XPK must be the library name without 'xpk'
	and '.library'. (E.G.: 'NUKE', 'HUFF', but NOT 'xpkNUKE.library').
	(Case insensitive.)

 DS=DataSave/K, PS=PaletteSave/K, MS=MaskSave/K,IS=ImageSave/K:

	Can be one of the following strings:
	C, Asm, Raw.
	(Case insensitive.) Default is C. This parameter specifies
	whether data should be saved in a C source, in an Asm one or
	as raw data.

 OS=OffsetsSave/K:

	Can be one of the following strings:
	C, Asm.
	(Case insensitive.) Default is C. This parameter specifies if
	offsets should be saved in a C source or an Asm one.

 S=ShowIFF/S:

	If this flag is set picture will be shown while writing its
	data to disk. After that, the screen containing it will be
	closed.
	(Case insensitive.) Default is not to show the picture.

 SA=SpriteAttached/S:

	This flag must be specified if you want to create data for
	attached sprites (16 colors sprites).
	NOTE: Depth must be 4 bitplanes (or forced to), to have
	16 colors. See also ForceDepth command.
	(Case insensitive.) Default is sprites not attached.

 L=LowercaseLabels/S:

	Specifying this, all the labels that will be generated will
	be in lower case.
	(Case insensitive.) Default is to keep all the labels like
	the filename.
	NOTE: As the labels are kept EXACTLY like the filename, you
	      are adviced NOT to use '.' (or '->', etc :-) in the
	      picture's filename, unless you want a compiler error.

 Cont=ContinueOnError/S:

	If an error is encountered while processing a picture (or
	more than one) and this flag is not set, the program will stop
	its execution, giving the control back to you. Otherwise the
	work will go on until finished.
	(Case insensitive.) Default is to stop on error.

 C=CGlobal/K, A=AsmGlobal/K, R=RawGlobal:

	Used to specify the global filenames. If CGlobal is speci-
	fied, then all data that is to be written in C will be writ-
	ten in that file. The same for AsmGlobal and for RawGlobal.
	If one of them is NOT specified then data will be saved on
	a file composed by the original picture's name followed by
	'.c', '.asm' or '.raw', for EACH picture.
	(Case insensitive.) Default is no global file.
	E.G.: "btoc32 DataType image PaletteType loadrgb32 ImageSave
	      C PaletteSave Asm Image CGlobal out1 F pic1 pic2 pic3"
	      will convert files pic1 pic2 pic3 saving image and
	      imagedata on out1.c, while saving their palette on
	      pic1.asm, pic2.asm, pic3.asm.

 F=File/A/M

	Used to specify the names of the files to be converted.
	If no name is specified, BtoC will open its GUI. The options
	specified in the command line will be overriden by those saved
	in BtoC.config.


 If there is not enough disk space for your output file on the disk, it will
 be cut to the size it had before the last operation (or deleted if it was
 made from scrap).

@ENDNODE

@NODE Workbench_usage

 Workbench usage:

 Launching BtoC by clicking on its icon or from CLI with no args
 will force him to open its Graphic User Interface. Here you can
 specify the equivalent of the @{"CLI options" link cliusage} by chosing them from
 the menus. To process an image, just select the 'Process' option.

 More features:

 ·  Started in this way, BtoC will search for its "BtoC.config"
    file, so you will need not to set all the parameters every time.
    This file can be updated automatically on exit or from user's
    choice.

 ·  You can load a new palette from another ILBM file.

 ·  The window is an AppWindow that will automatically process
    all the icons dropped on it. The window can be closed to get
    an AppIcon that behaves in the same manner. To get back to
    the window, double-click on the AppIcon.

 ·  You can specify the default coordinates for the AppIcon by
    filling the XPOS, YPOS entries in the icon's toolarray.
    -1 is NO_ICON_POSITION: Workbench will pick a reasonable
    place for the icon.

 ·  You can drop more than one icon on the AppIcon/AppWindow.
    These will be immediately processed. If a drawer (or a disk)
    is dragged in, all the files inside will be processed. Anyway
    note that recursive directory scanning is *not* done.

 ·  Press RETURN and the first string gadget will be activated.
    If you continue to press return to the last one, the string
    gadget will be deactivated. (Using TAB key you can run back
    and forth through the string gadgets.)

 ·  The file requester, when invoked to load a picture file, will
    exclude files of other kind. (Will use DataTypes if available,
    otherwise just ckeck if the files are of ILBM type.)

 I think this should be more comfortable to you ;-)

@ENDNODE

@NODE Compression

Since its first version BtoC is able to compress data with custom
routines, based on the well-known ByteRun1 algorhythm. Now BtoC
supports XPK and PowerPacker to give you more control on data
compression. To compress data you just have to select a compression
mode via the [sub]menus (or with the CO=Compression, CSUB=Compression-
Subtype commands from CLI - see @{"CLI options" link CLI_usage}).

To decrunch data compressed with BYTERUN2 or BYTERUN3 I enclosed the
object modules in the drawer named ExplodeStuff. These were created
with SAS_C v6.55. Of course you can adapt them to your compiler if
you want, just re-compile their sources :-)

	NAME
	DecrunchBRx (where 'x' is '2' or '3')

	SYNOPSIS
	result = DecrunchBRx( dest_ptr, source_ptr )
	D0		     A0		 A1

	BOOL DecrunchBRx( UBYTE *, UBYTE * )


	FUNCTION
	Store in a0 the address of an allocated block of CHIP memory
	large enough  to contain  the  decompressed raw  image data.
	Store in a1 the address of the  compressed  raw  image data.
	If data was not compressed with BYTERUN2 (or BYTERUN3) DecrunchBRx
	simply returns FALSE, else decrunches data and returns TRUE.

	NOTE
    My algorythm's name was BYTERUN2 because it is just an improvement
    of ByteRun1. But while reading the datatype/pictureclass.h include
    file, I discovered there *IS* (or there *SHOULD BE* ???) a ByteRun2
    compression algorythm. I was very lazy and refused to change my
    algorythm's name, and I still am nowadays, so having made another
    improvement to the compression algorythm I strove to find a name
    that would sound appropriate and I called it BYTERUN3!!! :-)
    So please remember my BYTERUN2 is different from ByteRun2 (anyway if
    you know HOW ByteRun2 works, pls. e-mail @{"me" link author}!)

@ENDNODE

@NODE Remember

 THINGS TO REMEMBER:

 ·  The *MOST IMPORTANT* thing to remember is that if you don't specify
    a destination file or path your output files will be saved in the
    same directory of the pictures, *NOT* in the current working dir.

 ·  Files choosen from CLI will be processed in their order, choosen with
    an ASL requester will be processed in alphabetical order, and choosen
    dragging them in the AppIcon/AppWindow, in the 'clicking order'.

 ·  Remember not to insert any character that can be 'misunderstood' in
    your pictures' name, if you want to save a C or ASM source without
    having to modify them manually (e.g.: try to compile a C source
    having a colormap called 'My.pic->01' :-)

 ·  Send me a postcard!

@ENDNODE

@NODE History

 History:

 ... previous versions were removed since it's a completely NEW program
     (except for the crunching routine).

 v3.0: After more than a year, the program has been totally
	rewritten for AGA compatibility, adding chunky, ANSI and Sprite
	data generation, and changing the Graphic User Interface.

 v3.1: After having discovered that this program was also an
    Enforcer-hit-generator I bought a MMU and started debugging it.
    Some features added, some routines improved. Works fine with v39
    AllocBitMap, cuts to previous size files that could not be written
    due to disk-full error.

 v3.2: Bug related to cutting to previous size squashed; program localized,
    some bugs in image data and mask (when too small) removed. Configuration
    file defaults now to BtoC.config instead of BTOC:BtoC.config. BYTERUN3
    compression added. Datatypes support. Filter functions in ASL requester.
    PowerPacker and XPK support added.
    Icons support the NewIcon package by Nicola Salmoria.
    Program is now (sigh) FREEWARE.

 To do:

 Simple palette editor? (Hah, this lasts from version 1.0!)

@ENDNODE

@NODE LOCALE "ABOUT LOCALE"

 ---------------------------------------------------------------------------
 As I think it's real fun and nice to have a program that speaks my language
 I encloded some catalogs. If you see that your beloved language is not here
 with the others, you can do the following actions:

 · Build a .ct file for your language. You can find the BtoC.cd file in the
   Sources/Catalogs directory.
 · Fill in the entries.
 · Send it back to @{"me" link AUTHOR} and I will compile and enclose it in the archive,
   and consider you a registered user.

 The following catalogs were compiled by

 Italiano:  me! :-)

 ---------------------------------------------------------------------------
@ENDNODE

@NODE Bugs

 KNOWN BUGS:

 Well this program passed through Enforcer and seemed to work correctly.
 Anyway there could be some bugs left, so if you find that some data
 generation routine doesn't actually work the way it should or if you find
 any other bug (or something weird or have any nice idea, flames, reports
 or something else), write to @{"me" link author}!

 Moreover tell me if you found that this program:
 · created copperlists (both ECS and AGA) correctly,
 · compressed data correctly using PowerPacker / XPK,
 · satisfied your needs.

 (I have no ß-testers and much time to test everything...)

@ENDNODE

@NODE Author

 E-mail your messages to 

    rekststef@unisi.it

 Or, to send me postcards, A4000s, CD32, girls :-) ...

    Stefano Reksten c/o Naimi,
    viale Cavour, 40
    53100 Siena
    Italy

@ENDNODE
