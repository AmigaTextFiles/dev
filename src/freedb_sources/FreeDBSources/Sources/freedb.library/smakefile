# Makefile for freedb.library

MODNAME = freedb.library
FILE = $(MODNAME)

# Compiler
C_COMPILER = sc
C_COMPILER_OPTS = NOSTACKCHECK STRINGMERGE NOCHECKABORT COMMENTNEST\
OPTIMIZE DATAMEMORY=FAST OPTIMIZERSCHEDULER OPTIMIZERINLINELOCAL\
OPTIMIZERTIME INCLUDEDIR=sc:miamiinc INCLUDEDIR=sc:amitcpinc IDLEN 128

# Assembler
ASSEMBLER = a68k
ASSEMBLER_OPTS = -iainc:

# Linker
LINKER = slink
LINKER_OPTS = NOICONS SC SD ND

# C sources
C_SOURCES = libinit.c init.c dispatch.c alloc.c toc.c di.c localdisc.c\
freedb.c options.c handle.c match.c playmsf.c loc.c proc.c lineread.c\
ap.c freedbproc.c appclass.c sprintf.c

#Asm sources
ASM_SOURCES = libent.asm endcode.asm

# Objects
OBJECTS = libent.o libinit.o endcode.o init.o dispatch.o alloc.o toc.o\
di.o localdisc.o freedb.o options.o handle.o match.o playmsf.o\
loc.o proc.o lineread.o ap.o freedbproc.o appclass.o sprintf.o

# Libs
LIBS = LIB:amiga.lib LIB:debug.lib LIB:sc.lib

# Built module
$(FILE): $(OBJECTS) $(LIBS)
         $(LINKER) <with <
FROM $(OBJECTS) TO $(FILE) LIB $(LIBS) $(LINKER_OPTS)
<

# Rules
.c.o:
        $(C_COMPILER) $(C_COMPILER_OPTS) $*.c

.asm.o:
        $(ASSEMBLER) $(ASSEMBLER_OPTS) $*.asm

# Dependences
libent.o:       libent.asm freedb.library_rev.i
libinit.o:      libinit.c freedbbase.h freedb.library_rev.h
endcode.o:      endcode.asm
init.o:         init.c freedb.h macros.h freedbbase.h scsi2.h msg.h freedb_protos.h freedb.library_rev.h
dispatch.o:     dispatch.c freedb.h macros.h freedbbase.h scsi2.h msg.h freedb_protos.h freedb.library_rev.h
alloc.o:        alloc.c freedb.h macros.h freedbbase.h scsi2.h msg.h freedb_protos.h freedb.library_rev.h
toc.o:          toc.c freedb.h macros.h freedbbase.h scsi2.h msg.h freedb_protos.h freedb.library_rev.h
di.o:           di.c freedb.h macros.h freedbbase.h scsi2.h msg.h freedb_protos.h freedb.library_rev.h
localdisc.o:    localdisc.c freedb.h macros.h freedbbase.h scsi2.h msg.h freedb_protos.h freedb.library_rev.h
freedb.o:       freedb.c freedb.h freedbmui.h macros.h freedbbase.h scsi2.h msg.h freedb_protos.h freedb.library_rev.h
options.o:      options.c freedb.h macros.h freedbbase.h scsi2.h msg.h freedb_protos.h freedb.library_rev.h
handle.o:       handle.c proc.h freedb.h lineread.h macros.h freedbbase.h scsi2.h msg.h freedb_protos.h freedb.library_rev.h
match.o:        match.c freedb.h macros.h freedbbase.h scsi2.h msg.h freedb_protos.h freedb.library_rev.h
playmsf.o:      playmsf.c freedb.h macros.h freedbbase.h scsi2.h msg.h freedb_protos.h freedb.library_rev.h
loc.o:          loc.c freedb.h macros.h freedbbase.h scsi2.h msg.h freedb_protos.h freedb.library_rev.h
proc.o:         proc.c proc.h freedb.h lineread.h macros.h freedbbase.h scsi2.h msg.h freedb_protos.h freedb.library_rev.h
lineread.o:     lineread.c freedb.h proc.h macros.h freedbbase.h scsi2.h msg.h freedb_protos.h lineread.h freedb.library_rev.h
ap.o:           ap.c freedb.h macros.h freedbbase.h scsi2.h msg.h freedb_protos.h freedb.library_rev.h
freedbproc.o:   freedbproc.c freedb.h freedbmui.h macros.h freedbbase.h scsi2.h msg.h freedb_protos.h freedb.library_rev.h
appclass.o:     appclass.c freedbmui.h macros.h freedbbase.h scsi2.h msg.h freedb_protos.h freedb.library_rev.h
sprintf.o:      sprintf.c freedb.h macros.h freedbbase.h scsi2.h msg.h freedb_protos.h freedb.library_rev.h
