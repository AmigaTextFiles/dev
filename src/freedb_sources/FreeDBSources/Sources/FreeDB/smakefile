# Makefile for FreeDB

MODNAME = FreeDB
FILE = $(MODNAME)

# Compiler
C_COMPILER = sc
C_COMPILER_OPTS = NOSTACKCHECK STRINGMERGE NOCHECKABORT COMMENTNEST\
OPTIMIZE DATAMEMORY=FAST OPTIMIZERSCHEDULER OPTIMIZERINLINELOCAL\
OPTIMIZERTIME IDLEN 128

# Assembler
ASSEMBLER = a68k
ASSEMBLER_OPTS = -iainc:

# Linker
LINKER = slink
LINKER_OPTS = NOICONS SC SD ND

# C sources
C_SOURCES = FreeDB.c parsearg.c request.c

#Asm sources
ASM_SOURCES =

# Objects
OBJECTS = FreeDB.o parsearg.o request.o

# Libs
LIBS = LIB:amiga.lib LIB:sc.lib

# Built module
$(FILE): $(OBJECTS) $(LIBS)
         $(LINKER) <with <
FROM $(OBJECTS) TO $(FILE) LIB $(LIBS) $(LINKER_OPTS)
<

# Rules
.c.o:
        $(C_COMPILER) $(C_COMPILER_OPTS) $*.c

.asm.o:
        $(ASSEMBLER) $(ASSEMBLER_OPTS) $*.asm

# Dependences
FreeDB.o:   FreeDB.c FreeDB.h macros.h FreeDB_rev.h
parsearg.o: parsearg.c FreeDB.h macros.h FreeDB_rev.h
request.o:  request.c FreeDB.h macros.h FreeDB_rev.h
