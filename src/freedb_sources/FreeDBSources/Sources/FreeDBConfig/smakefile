# Makefile for FreeDBConfig.mcc

MODNAME = MUI:LIBS/MUI/FreeDBConfig.mcc
FILE = $(MODNAME)

# Compiler
C_COMPILER      = sc
C_COMPILER_OPTS = NOSTACKCHECK STRINGMERGE NOCHECKABORT COMMENTNEST OPTIMIZE DATAMEMORY=FAST OPTIMIZERSCHEDULER OPTIMIZERINLINELOCAL OPTIMIZERTIME IDLEN 128

# Assembler
ASSEMBLER      = a68k
ASSEMBLER_OPTS = -iainc:

# Linker
LINKER      = slink
LINKER_OPTS = NOICONS SC SD ND

# C sources
C_SOURCES = libinit.c init.c utils.c siteslist.c class.c loc.c

#Asm sources
ASM_SOURCES = libent.asm endcode.asm

# Objects
OBJECTS = libent.o libinit.o endcode.o init.o utils.o siteslist.o class.o loc.o

# Libs
LIBS = LIB:amiga.lib LIB:debug.lib LIB:sc.lib

# Built module
$(FILE):    $(OBJECTS) $(LIBS)

        $(LINKER) <with <
FROM $(OBJECTS) TO $(FILE) LIB $(LIBS) $(LINKER_OPTS)
<

# Rules
.c.o:
            $(C_COMPILER) $(C_COMPILER_OPTS) $*.c

.asm.o:
            $(ASSEMBLER) $(ASSEMBLER_OPTS) $*.asm

# Dependences
libent.o:    libent.asm FreeDBConfig.mcc_rev.i
libinit.o:   libinit.c base.h macros.h FreeDBConfig.mcc_rev.h
endcode.o:   endcode.asm
init.o:      init.c class.h base.h msg.h class_protos.h macros.h FreeDBConfig.mcc_rev.h
utils.o:     utils.c class.h base.h msg.h class_protos.h macros.h FreeDBConfig.mcc_rev.h
siteslist.o: siteslist.c class.h base.h msg.h class_protos.h macros.h FreeDBConfig.mcc_rev.h
class.o:     class.c class.h base.h msg.h class_protos.h macros.h FreeDBConfig.mcc_rev.h
loc.o:       loc.c class.h base.h msg.h class_protos.h macros.h FreeDBConfig.mcc_rev.h
