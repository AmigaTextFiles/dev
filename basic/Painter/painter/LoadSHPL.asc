;
;  LoadSHPL  - Shapeliste Lader
;
; filename$ = Shapeliste-File (#?.shpl)

shp=0   ;erstes Shape

If ReadFile(0,filename$)
  FileInput 0
  a$=Edit$(20)
  If a$="PAINTER V1.0 SHPL"        ;Kennung
    pfad$=Edit$(400)               ;Hauptverzeichnis
    While NOT Eof(0)
      sn$=Edit$(200)               ;ShapeName

      l=SearchBegin(sn$,32,1)      ;pruefen ob die HotSpot-Def.
      If l                         ;noch hinten dransteht
        name$=Left$(sn$,l-1)       ;also: ShapeName Xhot Yhot
        sn$=UnRight$(sn$,l)        ;jeweils mit Leerzeichen getrennt
        l=SearchBegin(sn$,32,1)    ;
        xhp=Val(Left$(sn$,l-1))
        sn$=UnRight$(sn$,l)
        yhp=Val(Left$(sn$,l-1))
      Else                         ;wenn nichts dahinter steht,
        name$=sn$                  ;dann ist der HotSpot bei (0,0)
        xhp=0
        yhp=0
      End If

      If Exists(pfad$+name$)
        LoadShape shp,pfad$+name$  ;Shape laden
        Handle shp,xhp,yhp         ;HotSpot setzen
        shp+1                      ;Shapenummer+1
      EndIf

    Wend
  Else
    ;eventuell Fehlermeldung `Keine Shapeliste!`
  End If

  DefaultInput
  CloseFile 0

EndIf
