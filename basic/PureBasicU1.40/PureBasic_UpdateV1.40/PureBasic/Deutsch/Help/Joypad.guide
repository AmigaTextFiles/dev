@DATABASE Joypad
$VER: PureBasic - Joypad Library (05.03.2000) © Fantaisie Software
@NODE MAIN "Joypad"

  @{b}PureBasic - Joypad Library@{ub}

    PureBasic bietet vollen Zugriff auf Joypads, angeschlossen
    in den Ports 0,1,2 oder 3. Es unterstützt Standard-Joysticks
    (1 Knopf) und CD32-ähnliche Joypads (7 Knöpfe).
    Dafür wird die lowlevel.library benutzt, um systemfreundlich
    zu arbeiten. Stellen Sie also sicher, diese bei Ihrem finalen
    Produkt mitzuliefern, da sie nur Bestandteil von Rom3.1 ist.
    Die lowlevel.library ist im Extras-Ordner von PureBasic
    enthalten.

  @{b}Befehlsübersicht:@{ub}

    @{" InitJoypad       " LINK InitJoypad}
    @{" JoypadButtons    " LINK JoypadButtons}
    @{" JoypadMovement   " LINK JoypadMovement}
    @{" PressedRawKey    " LINK PressedRawKey}

  @{b}Beispiel:@{ub}

    @{" Joypad Beispiel  " LINK "PureBasic:Examples/Sources/Joypad.pb/Main"}

@ENDNODE


@NODE InitJoypad

    @{b}SYNTAX@{ub}
  Result.l = InitJoypad()

    @{b}FUNCTION@{ub}
  Initialisiert die gesamte Joypad Umgebung zur späteren Benutzung. Dieser
  Befehl versucht, die lowlevel.library zu öffnen. Wenn dies fehlschlägt,
  liegt es möglicherweise an der nicht gefundenen Library. Sie müssen
  diese Funktion vor allen anderen Befehlen aus dieser PureBasic Library
  aufrufen.

@ENDNODE


@NODE JoypadMovement

    @{b}SYNTAX@{ub}
  Movement.w = JoypadMovemnt(Port)

    @{b}FUNCTION@{ub}
  Gibt die aktuelle Joypad Bewegung (auf X- und Y-Achse) zurück, die gerade
  am angegebenen Port stattfindet. Hier eine Liste der möglichen Rückgabe-
  werte:

    0: Keine Aktivität
    1: Hoch
    2: Hoch-Rechts
    3: Rechts
    4: Runter-Rechts
    5: Runter
    6: Runter-Links
    7: Links
    8: Hoch-Links


  Anmerkungen zu den Ports:

    Port 0: Am Amiga. Traditionell belegt mit der Maus.
    Port 1: Am Amiga. Nahe dem ersten Port, belegt mit einem Joystick.
    Port 2: Benötigt einen externen Adapter.
    Port 3: Benötigt einen externen Adapter.

@ENDNODE


@NODE JoypadButtons

    @{b}SYNTAX@{ub}
  PressedButtons.l = JoypadButtons(Port)

    @{b}FUNCTION@{ub}
  Gibt eine Long-Variable mit einer Maske der gerade gedrückten Knöpfe
  zurück. Jede Zahl an Knöpfen kann zur selben Zeit gedrückt sein.

  Um zu ermitteln, welcher Knopf gerade gedrückt wird, müssen Sie die
  folgenden Konstanten (selbsterklärend) benutzen, welche in der
  AmigaOS_Small Resident-Datei (wird beim Start von PureBasic automatisch
  geladen) deklariert sind:

  #PB_JOYPAD_BUTTON1
  #PB_JOYPAD_BUTTON2
  #PB_JOYPAD_BUTTON3
  #PB_JOYPAD_BUTTON4
  #PB_JOYPAD_BUTTON5
  #PB_JOYPAD_BUTTON6
  #PB_JOYPAD_BUTTON7

  Abfragen werden beispielhaft wie folgt durchgeführt:

    If PressedButtons & #PB_JOYPAD_BUTTON1
      PrintN("Knopf 1 wird gedrückt !")
      B1 = 1
    EndIf

    If PressedButtons & #PB_JOYPAD_BUTTON7
      PrintN("Knopf 7 wird gedrückt !")
      B7 = 1
    EndIf


    If B1=1 And B7=1
      PrintN("Knöpfe 1 & 7 sind gleichzeitig gedrückt !")
    EndIf

@ENDNODE


@NODE PressedRawKey

    @{b}SYNTAX@{ub}
  Key = PressedRawKey()

    @{b}STATEMENT@{ub}
  Gibt den "Roh"-Code (raw code) einer gerade gedrückten Taste zurück,
  oder NULL wenn keine Taste gedrückt ist. Rawkey Codes sind dieselben
  auf jedem Amiga, unabhängig von der benutzten Tastatur. Rawkeys sind
  keine ASCII Werte.

@ENDNODE
