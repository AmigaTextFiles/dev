@DATABASE Joypad
$VER: PureBasic - Joypad library (10.03.2000) © Fantaisie Software
@NODE MAIN "Joypad"

  @{b}PureBasic - Joypad library@{ub}

    Cette bibliothèque vous permet de contrôler les joysticks/joypads
    branchés sur les ports 0, 1, 2 ou 3 de l'Amiga. Jusqu'à 7 boutons
    sont supportés (joypad CD32). La bibliothèque Amiga 'lowlevel.library'
    est utilisé pour permettre une compatibilité totale avec le système.
    Vous devez donc vous assurez que l'utilisateur de votre programme
    possède bien cette bibliothèque. Il est conseillé de l'inclure
    avec la distribution de votre programme (elle se trouve dans
    le répertoire PureBasic/Extras).

  @{b}Commandes disponibles:@{ub}

    @{" InitJoypad       " LINK InitJoypad}
    @{" JoypadButtons    " LINK JoypadButtons}
    @{" JoypadMovement   " LINK JoypadMovement}
    @{" PressedRawKey    " LINK PressedRawKey}

  @{b}Exemple:@{ub}

    @{" Joypad example   " LINK "PureBasic:Examples/Sources/Joypad.pb/Main"}

@ENDNODE


@NODE InitJoypad

    @{b}SYNTAX@{ub}
  Resultat.l = InitJoypad()

    @{b}FUNCTION@{ub}
  Initialise l'environnement nécessaire à la future gestion des joysticks.
  Si le 'Resultat' est NULL, alors la bibliothèque 'lowlevel.library'
  n'est pas disponible. Vous devez appeler cette commande avant d'utiliser
  une commande de cette bibliothèque.

@ENDNODE


@NODE JoypadMovement

    @{b}SYNTAX@{ub}
  Mouvement.w = JoypadMovemnt(Port)

    @{b}FUNCTION@{ub}
  Revoie le mouvement actuel du joystick (sur l'axe X et Y) qui
  est branché dans le 'Port' spécifié. Voici la liste des
  valeurs possibles:

    0: Aucun mouvement
    1: Haut
    2: Diagonale Haut-Droite
    3: Droite
    4: Diagonale Bas-Droite
    5: Bas
    6: Diagonale Bas-Gauche
    7: Gauche
    8: Diagonale Haut-Gauche


  Note à propos des ports:

    Port 0: Situé directement sur l'Amiga (port le plus à doite).
            Il est en principe utilisé par la souris.
    Port 1: Situé directement sur l'Amiga (à coté du port 0)
    Port 2: Nécessite un adaptateur externe spécial
    Port 3: Nécessite un adaptateur externe spécial

@ENDNODE


@NODE JoypadButtons

    @{b}SYNTAX@{ub}
  PressedButtons.l = JoypadButtons(Port)

    @{b}FUNCTION@{ub}
  Renvoie une valeur décrivant quels sont les boutons actuellement
  appuyés sur un 'Port' donné. Tous les boutons peuvent être appuyés
  en même temps si nécessaire.

  Pour savoir quels boutons sont appuyés, il faut utiliser les constantes
  suivantes, déjà déclarée dans le fichier AmigaOS_Small:

  #PB_JOYPAD_BUTTON1
  #PB_JOYPAD_BUTTON2
  #PB_JOYPAD_BUTTON3
  #PB_JOYPAD_BUTTON4
  #PB_JOYPAD_BUTTON5
  #PB_JOYPAD_BUTTON6
  #PB_JOYPAD_BUTTON7

  Ensuite il suffit de faire une opération 'AND' (&) sur la valeur
  'PressedButtons' et voir si le résultat est nul ou non. S'il n'est
  pas nul, le bouton est appuyé:


    If PressedButtons & #PB_JOYPAD_BUTTON1
      PrintN("Le bouton 1 est appuyé !")
      B1 = 1
    EndIf

    If PressedButtons & #PB_JOYPAD_BUTTON7
      PrintN("Le bouton 7 est appuyé !")
      B7 = 1
    EndIf


    If B1=1 And B7=1
      PrintN("Les boutons 1 et 7 sont appuyés en même temps !")
    EndIf

@ENDNODE


@NODE PressedRawKey

    @{b}SYNTAX@{ub}
  Key = PressedRawKey()

    @{b}STATEMENT@{ub}
  Renvoie le code brut (RawKey) de la touche actuellement appuyée.
  Ce code est fonction de la position de la touche sur le clavier,
  pas de sa lettre (par example le RawKey de la touche 'A' d'un
  clavier AZERTY aura la meme valeur que la touche 'Q' d'un clavier
  QWERTY). Une valeur RawKey n'est pas une valeur ASCII.

  C'est très utile pour les touches 'ESC', 'ENTER',...

@ENDNODE
