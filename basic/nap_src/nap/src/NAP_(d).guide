@database "NAP/NAP.guide"
@master "NAP/NAP.dok"

@node Main "Einleitung"
@TOC Inhaltsverzeichnis
@NEXT Aufruf

 @{"NAP - New ACE Preprocessor" link Inhaltsverzeichnis}                              @{"Version 2.02" link History}


 Einleitung

 NAP ist ein Präprozessor für die Programmiersprache ACE (AmigaBasic
 Compiler with Extras) von David Benn. Momentan existieren drei Prä-
 prozessoren für ACE:

  (1) APP
      Der mitgelieferte Präprozessor. Er entfernt ACE-Kommentare und
      bindet INCLUDE-Dateien ein.
  (2) ACPP
      Die ACE-Version des C-Präprozessors CPP.  Die Änderung besteht
      allerdings nur darin, daß der Path auf ACE: gesetzt wurde. Die
      Stärke dieses Präprozessors liegt darin,  daß er sämtliche @{"Di-" link Direktiven}
      @{"rektiven" link Direktiven} (Präprozessorkommandos) erkennt. Desweiteren entfernt
      er C-Kommentare.
  (3) NAP
      Dieser Präprozessor ist genau für  ACE  zugeschneidert. Er er-
      kennt fast alle (einschließlich der wichtigsten!)  @{"Direktiven" link Direktiven},
      entfernt ACE-Kommentare  genauso wie C-Kommentare und  besitzt
      desweiteren noch einige Präprozessor-unspezifische Routinen.

                                                      @{"Daniel Seifert" link autor}
                              Berlin-Hellersdorf, den 04. Mai 1997
@endnode

@node Inhaltsverzeichnis "AmigaGUIDE Anleitung für NAP 2.02"
@TOC Inhaltsverzeichnis
@PREV Main
@NEXT Benutzung

 |\   |       |¯¯¯¯|       |¯¯¯¯|                        Version 2.02
 | \  |       |____|       |____|                         19.05.1997
 |  \ |       |    |       |
 |   \| e w   |    | C E   |     r e p r o c e s s o r


 Inhaltsverzeichnis:


 · @{"Einleitung" link Main}
 · @{"Benutzung" link Benutzung}
 · @{"Aufruf" link Aufruf}
   · @{"Optionen" link Optionen}
   · @{"Direktiven" link Direktiven}
 · @{"Bekannte Fehler" link bugs}
 · @{"Zukünftige Versionen" link future}
 · @{"Danksagungen" link greetings}
 · @{"Copyright" link Copyright}
 · @{"Über den Autor" link autor}

 · @{"History" link history}
 · @{"Ende" quit}


 Anmerkung:
  Die Aktionen, die NAP durchführt, und einige Besonderheiten werden
  im jeweiligen Unterkapitel von "@{"Optionen" link Optionen}" erläutert.
@endnode

@node Abbruch
@TOC Inhaltsverzeichnis

 Sollten Sie irgendwann einmal das Bedürfnis haben,  NAP  bei  seiner
 Arbeit zu unterbrechen, so können Sie dies problemlos tun, indem Sie
 CTRL-C drücken.
@endnode

@node Benutzung
@TOC Inhaltsverzeichnis
@PREV Inhaltsverzeichnis
@NEXT Aufruf

 Kopieren Sie die neueste Version von NAP nach ACE:BIN/

 Ersetzen Sie dann in Ihrem bas Script  (falls Sie von der Shell  aus
 arbeiten), den Aufruf von APP oder ACPP durch den von NAP. Die Para-
 meter sind dieselben.  Sollten noch  Optionen übergeben worden sein,
 so  müssen  diese  entfernt  werden  oder  durch  die entsprechenden
 @{"Optionen von NAP" link Optionen} ersetzt werden.

 Falls Sie AIDE von Herbert Breuer benutzen, so geben Sie einfach bei
 der Rubrik  "Precompiler"  unter  "other"  NAP ein und speichern die
 Konfigurationsdatei.
@endnode

@node Aufruf
@TOC Inhaltsverzeichnis
@PREV Benutzung
@NEXT Optionen

 Die  folgenden  2 Absätze sind nur wichtig für User,  die nicht AIDE
 benutzen:

   NAP kann grundsätzlich nur von der CLI oder der  Shell  aufgerufen
   werden. Von dort müssen ihm mindestens  zwei  Parameter  übergeben
   werden, nämlich die Eingabe- und die Ausgabedatei. NAP ist, im Ge-
   gensatz zu ACPP, nicht in der Lage, von der Standardeingabe zu le-
   sen oder zur Standardausgabe zu schreiben.
   Zu beachten ist,  daß die Ausgabedatei beim Start von NAP gelöscht
   wird.  Wenn eine der beiden Dateien nicht geöffnet werden kann, so
   wird mit einer Fehlermeldung abgebrochen.

 Zusätzlich zu den eben  genannten Parametern  können noch @{" Optionen " link Optionen}
 mit übergeben werden. Diese müssen mit einem Bindestrich eingeleitet
 werden.  Benötigt eine Option einen  zusätzlichen Parameter,  so ist
 dieser direkt  (ohne Leerzeichen)  an die Option dranzuhängen.  Nach
 diesem Parameter muß  immer ein Leerzeichen  folgen.  Darauffolgende
 Optionen müssen mit einem neuen Bindestrich eingeleitet werden.  An-
 sonsten ist es egal, an welcher Stelle die Optionen stehen. Sie kön-
 nen auch ohne weiteres zusammengefaßt werden (-tz anstatt @{"-t" link OptionT} @{"-z" link OptionZ}). Um
 den Konventionen zu folgen, rate ich aber,  die Optionen vor die Da-
 teinamen zu setzen.
@endnode

@node Optionen
@TOC Inhaltsverzeichnis
@PREV Aufruf
@NEXT Buffer

 NAP bietet verschiedene Optionen an. Der Großteil von ihnen sind so-
 genannte Schalter,  mit denen bestimmte Aktionen an- oder abgeschal-
 tet werden.
 Die restlichen Optionen benötigen noch einen zusätzlichen Parameter.

 Bei der Angabe von Optionen ist die  Groß-  und  Kleinschreibung un-
 wichtig.  Achten Sie aber darauf,  daß das für den Parameter <token>
 bei den Optionen -d und -u nicht gilt. (siehe @{"Direktiven" link Direktiven})

 Optionen

  @{"-b<kB>" link Buffer}                   setze Buffergröße in Kilobytes
  @{"-d<token>[<=value>]" link OptionD}      definiere ein Token
  @{"-p<path>" link Includepath}                 setze Path für die Includedateien
  @{"-u<token>" link OptionU}                entfernt ein Token

  @{"-c" link OptionC}   :   Kommentare nicht entfernen
  @{"-e" link OptionE}   :   Fehlermeldungen unterdrücken
  @{"-h" link OptionH}   :   Hilfetext
  @{"-i" link OptionI}   :   @{"#Define" link Direktiven}s ignorieren
  @{"-l" link OptionL}   :   leere Zeilen nicht zusammenfassen
  @{"-q" link OptionQ}   :   @{"#Define" link Direktiven}s als CONST-Anweisung schreiben
  @{"-s" link OptionS}   :   unbenutzte Strukturen entfernen
  @{"-t" link OptionT}   :   Überwachung anschalten (Tracing)
  @{"-z" link OptionZ}   :   Zeitmessung
@endnode

@node Buffer
@TOC Inhaltsverzeichnis
@PREV Optionen
@NEXT OptionD

 Um NAP schneller und effizienter zu machen,  wurde eine eigene Lese-
 routine geschrieben, welche mit einem @{"Buffer" link DefBuffer} arbeitet.
 Dieser hat standardmäßig eine Größe von 100 Kilobytes  (das sind ge-
 nau 102400 Bytes + 5 Bytes für die Verwaltung) und wird für jede ge-
 öffnete Datei angelegt. Grundsätzlich gilt aber, daß der Buffer nie-
 mals größer als die Datei ist.  Sollte die Datei also kleiner  sein,
 wird nur soviel Speicher reserviert, wie nötig.
 Am schnellsten ist NAP,  wenn es stets die gesamte Datei in den Buf-
 fer schreiben kann und nicht nochmal nachladen muß. Hundert Kilobyte
 sollten dafür wirklich genug sein.  Für Extremisten ist es aber  er-
 laubt, die Buffergröße bis zu 640 Kilobyte hochzuschrauben. Aber das
 ACE-Programm, daß diese Größe hat, möchte ich nicht debuggen ;-)
 Wahrscheinlicher ist, daß man die Buffergröße mit der -b Option her-
 unterschraubt, zum Beispiel, wenn man nicht soviel Speicher hat.
@endnode

@node DefBuffer "Definition Buffer"
@TOC Inhaltsverzeichnis
@PREV Buffer
@NEXT Buffer

 Buffer : Speicherbereich  (auch  möglich:  Datei),  in welchen kurz-
          fristig Daten abgelegt werden,  um entweder schnelleren Zu-
          griff zu erhalten  oder um sie für weitere Arbeiten  aufzu-
          heben oder zu sammeln.
@endnode

@node OptionD "-d<token>[=value]"
@TOC Inhaltsverzeichnis
@PREV Buffer
@NEXT IncludePath

 Im Prinzip macht diese Option nichts anderes, als wenn man innerhalb
 des Sourcecodes schreiben würde:
        @{"#DEFINE" link Direktive} <token> <value>
 Sollten Sie [=value] weglassen, so wird die "1" als Wert genommen.
@endnode

@node Includepath "-p<path>"
@TOC Inhaltsverzeichnis
@PREV OptionD
@NEXT OptionU

 Diese Option legt fest, in welchem Path nach den Includedateien ge-
 sucht werden soll. Sie können 9 verschiedene Paths definieren, all-
 erdings sind 3 bereits vergeben. Bleiben Ihnen also noch 6.
 Bereits definiert sind:  ACEINCLUDE:
                          ACE:
                          ACE:INCLUDE/
@endnode

@node OptionU "-u<token>"
@TOC Inhaltsverzeichnis
@PREV IncludePath
@NEXT OptionC

 Im Prinzip macht diese Option nichts anderes, als wenn man innerhalb
 des Sourcecodes schreiben würde:
        @{"#UNDEF" link Direktiven} <token>
@endnode

@node OptionC "-c"
@TOC Inhaltsverzeichnis
@PREV OptionU
@NEXT OptionE

 Standardmäßig entfernt ACE alle @{"Kommentare" link Kommentare}, sowohl die ACE-typischen
 als auch die von C.
 Falls Sie diese Option benutzen, läßt NAP die Kommentare aber stehen
 und wandelt nur die C-Kommentare in ACE-Kommentare um (damit es beim
 Kompilieren keinen Ärger gibt :-).
@endnode

@node Kommentare
@TOC Inhaltsverzeichnis
@PREV OptionC
@NEXT OptionC

   NAP erkennt folgende Kommentare:

      '      : Einzeilenkommentar
      { }    : Blockkommentar, kann sich auch über mehrere Zeilen er-
               strecken
      /* */  : Blockkommentar, wird automatisch in { } umgewandelt
@endnode

@node OptionE "-e"
@TOC Inhaltsverzeichnis
@PREV OptionC
@NEXT OptionH

 Beim Bearbeiten der Eingabedatei und der dazugehörigen Includedatei-
 en kann es passieren, daß NAP in ihnen einen @{"Fehler" link Fehler} findet.
 Dieser Fehler führt zwar nicht zum Abbruch, wird aber angezeigt. Mit
 dieser Option unterdrücken Sie die  Ausgabe der  Fehlermeldung  (aus
 welchem Grund auch immer).
 Auch schwerwiegende Fehler, die zum vorzeitigen Beenden von NAP füh-
 ren (Speichermangel) werden dann nicht mehr angezeigt.
@endnode

@node Fehler
@TOC Inhaltsverzeichnis
@PREV OptionE
@NEXT OptionE

 - #IF ohne #ENDIF
 - #ELIF außerhalb von #IF --- #ENDIF
 - zu viele #ENDIF
 - korruptes #DEFINE (Parameter fehlt)
 - Includedatei nicht gefunden (kein @{" Abbruch " link Abbruch}, die Konsequenzen beim
   Kompilieren sollten Ihnen aber klar sein)
 - ...
@endnode

@node OptionH "-h"
@TOC Inhaltsverzeichnis
@PREV OptionE
@NEXT OptionI

 Diese Option gibt einen seitenlangen Text aus,  in dem alle Optionen
 ganz kurz erklärt werden. Anschließend beendet sich NAP.
@endnode

@node OptionI "-i"
@TOC Inhaltsverzeichnis
@PREV OptionH
@NEXT OptionL

 Normalerweise werden @{"#DEFINE" link Direktiven}s von NAP bearbeitet,  mit dieser Option
 werden #DEFINE Anweisungen aber einfach ignoriert.
@endnode

@node OptionL "-l"
@TOC Inhaltsverzeichnis
@PREV OptionI
@NEXT OptionQ

 Normalerweise faßt NAP Leerzeilen zusammen. Mit dieser Option schal-
 ten sie diese Funktion aus
 Beachten Sie aber,  daß eine  Leerzeile nur als solche erkannt wird,
 wenn in ihr absolut kein Zeichen drin steht. (Auch kein Leerzeichen,
 selbst wenn die Zeile dann immer noch leer aussieht!)
@endnode

@node OptionQ "-q"
@TOC Inhaltsverzeichnis
@PREV OptionL
@NEXT OptionS

 Normalerweise werden @{"#DEFINE" link Direktiven}s von NAP bearbeitet,  mit dieser Option
 bürdet NAP aber ACE diese Arbeit auf.  Das geschieht, indem #DEFINEs
 einfach durch CONSTs ersetzt werden.
 Beachten Sie aber,  daß dann  keine  Parameter mehr übergeben werden
 können !!! Desweiteren kann es Probleme geben, wenn Sie via @{"#INCLUDE" link Direktiven}
 Includefiles einbinden,  die Strukturen enthalten,  bei  denen  z.B.
 ADDRESS durch NodePtr (was via @{"#DEFINE" link Direktiven} definiert wurde) ersetzt wird
 (was dann natürlich bei der Option -q nicht mehr erkannt wird!)
@endnode

@node OptionS "-s"
@TOC Inhaltsverzeichnis
@PREV OptionQ
@NEXT OptionT

 Diese Funktion schaltet eine der herausragendsten Funktionen von NAP
 an :))  NAP entfernt dann nämlich Strukturen, die nicht benutzt wer-
 den.

 Wem das Entfernen unbenutzter Strukturen dämlich erscheint (immerhin
 werden die von ACE ja sowieso ignoriert),  sollte sich mal das  fol-
 gende Beispiel durchlesen.

 Man nehme sich das  Beispielsprogramm  GadTools.b,  welches sich ir-
 gendwo im ACE-Archiv herumtreiben muß.  Jetzt jage man es durch ACPP
 und dann durch NAP.


                  ACPP GadTools.b ram:gt_acpp.b <Return>
                  NAP -s GadTools.b ram:gt_nap.b <Return>


 Na, etwas aufgefallen?  Tja,  gt_nap.b  ist kleiner,  läßt sich auch
 schneller kompilieren. Warum? Geben wir doch mal folgendes ein:


                  NAP -st GadTools.b ram:gt_nap.b <Return>


 Mit der Option @{"-t" link OptionT} schalten Sie nämlich die Überwachungsfunktion ein.
 Da kommt jetzt viel Text,  uns interessiert aber bloß der  Rest.  Da
 zählt NAP nämlich auf, welche Strukturen gebraucht werden und welche
 entfernt werden.

 Da  GadTools.b Dutzende von  Includedateien  einbindet,  kommen dann
 letztendlich ungefähr 110 (!!) Strukturen zusammen. ABER: Von diesen
 hundertundzehn werden nicht einmal zwanzig gebraucht ...
 Und übrigens:   Für Leute mit wenig Speicher macht es schon was aus,
 ob ACE die anderen  90  Strukturen im Speicher behalten muß, weil es
 ja nicht wissen kann, daß es sie nicht braucht.

 Überzeugt ???
@endnode

@node OptionT "-t"
@TOC Inhaltsverzeichnis
@PREV OptionS
@NEXT OptionZ

 Seit v2.00 wurde die -t Option  (t steht für TRACE) stark erweitert.
 Sie gibt, während NAP läuft, Informationen für den User aus,  so daß
 der einerseits sehen kann, was NAP da macht,  andererseits aber auch
 sehen kann, welche Datei NAP's Fehler aufdeckt (oder so).

 Ausgegeben wird:

    - Dateinamen der Includedatei, inklusive Dateinummer
    - Auftreten von Definitionen und Deklarationen von Strukturen so-
      wie, welche Strukturen eine andere Struktur noch benötigt (nur,
      wenn Option @{"-s" link OptionS} benutzt wird).
    - welche  Strukturen entfernt  werden und welche benötigt  werden
      (wiederum nur, wenn @{"-s" link OptionS} benutzt wird).
@endnode

@node OptionZ "-z"
@TOC Inhaltsverzeichnis
@PREV OptionT
@NEXT Direktiven

 Mit dieser Option wird mitgeteilt,  daß  NAP  nach Beendigung seiner
 Arbeit doch bitte angeben soll,  wie lange es gebraucht hat  (in Se-
 kunden!)
@endnode

@node Direktiven
@TOC Inhaltsverzeichnis
@PREV OptionT
@NEXT Bugs

 NAP unterstützt folgende Direktiven:

           IF
           IF DEFINED
           IFDEF
           IFNDEF
           ELSE
           ELIF (dasselbe wie ELSE IF, was aber von NAP nicht erkannt
                 wird!)
           ENDIF
           INCLUDE
           DEFINE
           UNDEF

 Nicht erkannt werden folgende Direktiven:

           PRAGMA
           ASSERT
           DEBUG
           NODEBUG
           ERROR

 Meiner Meinung spielen letztere auch keine große Rolle (mal ganz ab-
 gesehen davon, daß ich nicht weiß, was sie genau bewirken).
 Für alle, die sich mit den Direktiven noch nicht so genau auskennen,
 hier eine kurze Erläuterung für alle unterstützten Direktiven:

 Grundsätzlich  wird eine  Direktive mit einem Doppelkreuz (#) einge-
 leitet,  daß am Zeilenanfang steht.  Die  Direktive steht ohne Leer-
 zeichen hinter dem Doppelkreuz. Die meisten Direktiven verlangen zu-
 sätzlich noch einige Parameter.

 --------------------------------------------------------------------

 IF <expression>

 Expression ist ein @{"mathematischer Ausdruck" link mathAusdruck}.  Sollte dieser  Ausdruck
 logisch wahr sein (kleiner oder größer 0), so wird der folgende  Ab-
 schnitt übernommen,  anderenfalls  entfernt.  Der  Abschnitt  endet,
 wenn eine ELIF, ELSE oder ENDIF Direktive folgt. IF-Direktiven  dür-
 fen verschachtelt sein.

 --------------------------------------------------------------------

 IF DEFINED <token>

 Ist wahr, wenn <token> bereits mit DEFINE definiert wurde (s.u.).

 --------------------------------------------------------------------

 IFDEF <token>

 Ist wahr, wenn <token> bereits mit DEFINE definiert wurde (s.u.).

 --------------------------------------------------------------------

 IFNDEF <token>

 Ist wahr, wenn <token> noch nicht mit Define definiert wurde (s.u.).

 --------------------------------------------------------------------

 ELSE

 Muß auf eine IF- oder ELIF-Direktive folgen.  Der folgende Abschnitt
 wird ausgeführt,  wenn die Aussage bei der letzen  IF-Direktive  lo-
 gisch  falsch  war.  Beachten Sie,  daß innerhalb einer IF-Direktive
 nur eine ELSE-Direktive sein darf, NAP da allerdings nicht aufpaßt.

 --------------------------------------------------------------------

 ELIF <expression>

 Kombination von "ELSE IF".  Beachten Sie, daß ELIF bei NAP nicht be-
 sonders gut implementiert ist.  Fehler bei der Bearbeitung von ELIF-
 Direktiven sind also sehr wahrscheinlich.

 --------------------------------------------------------------------

 ENDIF

 Beendet eine IF-Direktive.

 --------------------------------------------------------------------

 INCLUDE <filename>

 Hier müssen die spitzen Klammern übrigens wirklich um den Dateinamen
 herumbleiben!  Die INCLUDE-Direktive bewirkt, daß die angegebene Da-
 tei an der momentanen Position eingefügt wird. Da Includedateien un-
 tereinander verschachtelt sind, ist es sehr gut möglich, daß diesel-
 be Datei zweimal eingebunden werden soll. Das wird aber einmal durch
 NAP selbst  und das andere Mal durch den Aufbau der Includedatei un-
 terbunden.

 --------------------------------------------------------------------

 DEFINE <token> <value>

 Definiert <token> als <value>. Wenn Sie zum Beispiel schreiben:
       #DEFINE eins 1
 dann wird ab sofort immer eine 1 eingesetzt, wenn das Wort "eins" im
 Quellcode gefunden wird.
 Beachten Sie, daß bei <token> zwischen der Groß- und Kleinschreibung
 unterschieden  wird.  "eins", "EINS" und "Eins" sind also alles ver-
 schiedene Token!!!
 Auf Token werden Sie vor allem in den Includedateien stoßen.  Gucken
 Sie sich doch ein paar davon an und Sie werden verstehen,  warum Sie
 sie brauchen.
 Selbstverständlich können Sie auch Parameter angeben.  Fügen Sie bei
 Token (ohne Leerzeichen!) eine durch Klammern umschlossene und durch
 Kommas separierte Liste von Variablennamen an und in <value> werden
 diese Variablen dann durch übergebene Werte ersetzt.

 Beispiel aus <ACE/ACEdef.h>:

     #define box(x1,y1,x2,y2) LINE (x1,y1)-(x2,y2),,b
     box(10,10,100,200)

 wird zu

     LINE (10,10)-(100,200),,b

 Beachten Sie,  daß innerhalb von <token> keine Leerzeichen sein dür-
 fen, dies bei <value> aber nichts ausmacht.

 Wenn  <value>  besonders groß ist,  können Sie es auf mehrere Zeilen
 aufsplitten, indem Sie am Ende der Zeile einen  Backslash  "\"  oder
 eine Tilde "~" schreiben und <value> in der nächsten Zeile fortsetz-
 en.  Damit  unterstützt  NAP sowohl die C- als auch die ACE-typische
 Schreibweise.

 --------------------------------------------------------------------

 UNDEF <token>

 Hebt "#define <token> <value>" wieder auf.

 --------------------------------------------------------------------
@endnode

@node mathAusdruck
@TITLE "Mathematischer Ausdruck der IF- und ELIF-Direktiven"
@TOC Inhaltsverzeichnis
@PREV Direktiven
@NEXT Direktiven

 NAP  unterstützt  Addition,  Subtraktion,  Multiplikation,  Division
 (ganzzahlig und mit Rest) sowie Klammerrechnung.  Die  Rechenzeichen
 sind identisch mit denen von ACE.  Der  Ausdruck  wird  mathematisch
 korrekt berechnet (Klammer- vor Punkt- vor Strichrechnung).
 Das Ergebnis ist im ACE-Format SINGLE (REAL).  Aus diesem Grund sind
 geringe Abweichungen beim Ergebnis möglich.

 ACHTUNG: 1/3 * 3 - 1 ist mathematisch 0, durch die Ungenauigkeit von
          SINGLE ist das Ergebnis bei NAP aber -0.0000001.

 Das Zahlenformat ist Dezimal. Wollen Sie Hexadezimal- oder Binärzah-
 len verwenden, so müssen Sie ihnen das ACE-spezifische Präfix voran-
 stellen.
@endnode

@node bugs
@TOC Inhaltsverzeichnis
@PREV Direktiven
@NEXT Future
@TITLE "Bekannte Fehler"

 * Aufgrund der Verwendung von SINGLE können die bei der IF- und ELIF
   Direktive erhaltenen Werte geringfügig abweichen. (@{"Bsp" link mathAusdruck})
 * ELIF-Direktiven sind extrem fehleranfällig.  Am besten, Sie lassen
   die Finger davon, bis der Fehler behoben ist.  ELSE  ist  da schon
   sicherer,  es sei denn,  es wird zusammen  mit ELIF verwendet oder
   nach einer  IF-Direktive  zweimal  aufgerufen  (was dann aber Ihre
   Schuld wäre!)
 * Falls auf Strukturen nur über SIZEOF zugesprochen wird,  sie  aber
   nicht deklariert werden (auch nicht indirekt), werden diese Struk-
   turen entfernt (natürlich nur mit Option @{"-s" link OptionS}).
   Umgehung des Fehlers:
     Struktur einfach deklarieren:
         DECLARE STRUCT <struct-name> *dummyptr
     Es wird so gut wie kein Speicher verschwendet (4 Bytes) !!!

 Falls Sie noch Fehler finden, dann schreiben Sie @{"mir" link autor} bitte umgehend,
 damit ich den Fehler so schnell wie möglich entfernen kann !! (siehe
 @{"History" link history} für bereits entfernte Fehler)
@endnode

@node future
@TOC Inhaltsverzeichnis
@PREV bugs
@NEXT Greetings
@TITLE "Zukünftige Versionen"

 Meine Pläne, was in den nächsten Versionen verwirklicht werden könn-
 te.  Die bei  Version 1.1 aufgeführten Punkte wurden übrigens so gut
 wie alle hier umgesetzt!

 * entfernen der @{"Fehler" link bugs}
 * Unterstützung weiterer @{"Direktiven" link Direktiven}
 * weitere Optionen (siehe Anleitung von ACPP)
 * weitere Geschwindigkeitssteigerungen
 * ...

 Ihre Ideen sind natürlich auch gefragt.  Wenn Sie welche haben, dann
 schreiben Sie sie @{"mir" link autor} doch. Danke schön.
@endnode

@node greetings
@TOC Inhaltsverzeichnis
@PREV future
@NEXT Copyright
@TITLE "Danksagungen und Grüße"

 Danke geht an ...

  David Benn, Autor von ACE, für seine Hilfe und seinen Rat bei eini-
  gen Problemen sowie dafür, daß er ACE entwickelt hat.

  Herbert Breuer  für seine  Hilfe bei den  Assemblerroutinen und für
  Hinweise und Ratschläge. Desweiteren Danke dafür, daß er seine Zeit
  geopfert hat,  um  NAP  zu  testen.  Sämtliche Bugs, soweit ich sie
  nicht bereits vorher gefunden hatte, wurden von ihm entdeckt.
  (Kein Wunder, er ist ja auch der einzige Benutzer. Oder alle ander-
   en halten sich nicht an das, was im Kapitel @{"Copyright" link Copyright} steht!)

  all die  User,  die NAP noch benutzen werden  und  über  eventuelle
  @{"Mängel" link bugs} großzügig hinwegsehen.
@endnode

@node Copyright
@TOC Inhaltsverzeichnis
@PREV Greetings
@NEXT Autor

 NAP - New ACE Preprocessor                              Version 2.03
                                                          25.07.1997
							  07.06.1998

 Diese Version von  NAP,  sowie alle @{"vorausgehenden" link history},  unterstehen dem
 Copyright von @{"Daniel Seifert" link autor}.

 Seit 2.03 ist der Sourcecode wieder beigefügt und NAP steht jetzt
 unter der GPL:

   NAP 2.03, a preprocessor for ACE
   Copyright (C) 1997/98 by Daniel Seifert 

   This program is free software; you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation; either version 2 of the License, or   
   (at your option) any later version.

   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.

   You should have received a copy of the GNU General Public License
   along with this program; if not, write to the Free Software 
   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA

@endnode

@node Autor
@TOC Inhaltsverzeichnis
@PREV Copyright
@NEXT History

(B) Contacting the author

My name is Daniel Seifert and I'm born in 1978. At the moment I'm
studying  at  the  "1st  Grammar  School  Hellersdorf"  (Leonard-
Bernstein-Gymnasium) whereas Hellersdorf is the eastermost suburb
of Berlin  which is the capital of Germany, as you probably know,
don't you?
My favourite subjects are Maths, English and,  of course,  compu-
ting.

If you want to contact me, there are three possibilities:

 (a) E-Mail (preferred, except for the picture card! :-)

     You can reach me at dseifert@berlin.sireco.net

 (b) snail mail

     Please do only expect an answer if you enclose  some  money
     for my costs (postage, ...). I am a little bit out of money
     (aren't student always ? ;-)) so I just don't want to spend
     my money on this.
     (Err, I almost forgot my address ;-)

              Daniel Seifert
              Elsenborner Weg 25
              12621 Berlin
              GERMANY

 (c) telephone

     Well, I cannot imagine that anybody wants to contact me
     this way. But anyway: call (+49) [0]30 5669471 and ask
     for Daniel.



Happy ACEing ;)

@endnode

@node History
@TOC Inhaltsverzeichnis
@PREV Autor

 RemoveStuff (Vorgänger von NAP)

 Version 1.0 :

   - 17.02.1996 : Entfernen von ACE-Kommentaren
   - 18.02.1996 : Entfernen von unbenutzten Strukturen
   - 22.02.1996 : Betaversion fertig
   - 26.02.1996 : Pass zwei wird nun im Speicher abgewickelt. Dadurch
                  wird das ganze drastisch schneller.
   - 27.02.1996 : fertig



 NAP

 Version 1.0 :

   - 02.03.1996 - 17.03.1996 :
                  Bearbeiten von #INCLUDE Anweisungen,  Entfernen von
                  C-Kommentaren, Defines werden als CONST geschrieben

 Version 1.1 :

   - 23.03.1996 : Anzeige der aktuellen Datei verbessert
   - 28.03.1996 : Dateien können nun auch von anderen  Verzeichnissen
                  included werden und nicht nur von ACEINCLUDE:
   - 29.03.1996 : Optimierungen
   - 18.03.1996 - 27.03.1996 :
                  Eigene  INSTR-Routine  in Assembler geschrieben und
                  ein Subprogramm ebenfalls in Assembler neugeschrie-
                  ben.
   - 04.04.1996 : Einbau der Assemblerroutinen nach kleineren Proble-
                  men endlich geschafft
   - 07.04.1996 : Optimierungen und Neuschreibung der LEGAL-Routine

 Version 2.00 :

   - 19.06.1996 : Unterstützung der DEFINE-Direktive
   - 20.06.1996 : jetzt auch mit Parametern
   - 23.06.1996 : Bug gefunden, am 24.06.1996 behoben
   - 25.06.1996 : Code wurde so groß, daß ich ihn in zwei Teile auf-
                  teilen mußte
   - 28.06.1996 : Benutzung von xRead/xWrite anstatt von PRINT/INPUT
   - 29.06.1996 : LEGAL-Routine in Assembler neugeschrieben
   - 01.07.1996 : IsAlreadyInList-Routine in Assembler neugeschrieben
   - 12.07.1996 : NAP benutzt nun _List und Node aus EXEC/LISTS.H und
                  EXEC/NODES.H  anstatt  meiner  eigenen  verketteten
                  Listen.  Deshalb können jetzt auch die dafür vorge-
                  sehenen Betriebssystemfunktionen benutzt werden.
   - 16.07.1996 : alle ="" und <>"" durch PEEK/POKE = 0 oder <> 0 er-
                  setzt
   - 17.07.1996 : Lese-Routine erhält 255-Byte Buffer
   - 19.07.1996 : UNDEF-Direktive wird von nun an unterstützt
   - 22.07.1996 : Lese-Routine neugeschrieben
   - 23.07.1996 : die  Aufgabenverteilung  der  Subprogramme geändert
                  (Entfernen von Kommentaren nun in AddToTemp)
   - 24.07.1996 : Fehler in der Lese-Routine entfernt
   - 25.07.1996 : dt. Anleitung geschrieben
   - 26.07.1996 : englische Anleitung geschrieben
   - 02.08.1996 : Optionen p,  u  und d eingebaut,  Unterstützung der
                  Direktiven IF DEFINED, ELSE, IFNDEF und IFDEF
   - 04.08.1996 : schrieb Unterprogramm ParseExpr  (berechnet  mathe-
                  matische Ausdrücke), Unterstützung von IF und ELIF
   - 25.08.1996 : Fehler in ParseExpr entfernt
   - 01.09.1996 : Tabulatoren sind jetzt im Quellcode erlaubt
   - 03.09.1996 : Optionen z und t eingebaut
   - 04.09.1996 : Option l eingebaut
   - 08.09.1996 : schrieb  AmigaGuide-Anleitungen  und änderte USAGE-
                  Anzeige
   - 24.09.1996 : Division durch 0  und weiterer Fehler aus ParseExpr
                  entfernt, verschachtelte Klammern sind nun übrigens
                  auch erlaubt.
                  fertig

 Version 2.01 :

   - 27.09.1996 : Herbert Breuer berichtete einen Bug: wenn -b64 dann
                  wird die Datei nicht bis zum Ende bearbeitet.
   - 01.10.1996 : Option t erweitert, einen weiteren Bug gefunden und
                  behoben (die Variable inComment wurde auch gesetzt,
                  wenn "{" in einem String war, da die Anweisung dazu
                  außerhalb der entsprechenden IF-Anweisung war)
   - 03.10.1996 : fand den Grund für den Fehler, den Herbert fand: da
                  ich nur immer Sorgen hatte, daß kleinere Buffergrö-
                  ßen nicht funktionieren habe ich -b64 nie getestet,
                  -b32 lief ja immer.  Aber da ich meine eigene Lese-
                  Routine verwende, muß ich im Buffer abspeichern, wo
                  der Cursor gerade steht. Das wird in zwei Bytes ge-
                  macht.  Zuerst wurde das "von Hand" codiert  (0 bis
                  65536 möglich),  später aber  durch  POKEW  ersetzt
                  (-32767 bis +32768 möglich). Dadurch  funktionieren
                  natürlich nur Buffer bis zu einer Größe von 32  Ki-
                  lobyte.  Das wurde behoben,  indem  jetzt POKEL und
                  vier Bytes benutzt werden.
   - 04.10.1996 : schrieb neue Anleitung
   - 07.10.1996 : fertig

 Version 2.02 :

   - 31.03.1997 -
     06.04.1997 : Optimierungen,  einige Optionen  haben jetzt andere
                  Default-Einstellungen.
   - ?          : weitere Geschwindigkeitssteigerungen
   - 20.04.1997 : Anleitung ergänzt und Zeigerfehler entfernt.
   - 06.05.1997 : Fehler entfernt: beim Check, ob der Text in "" ist,
                  wurde beim Finden des schließenden " wieder ein Byte
                  zurückgegangen, sodaß es nochmal gelesen wurde ...
   - 09.05.1997 : einige Bugs gefunden (beim Parsen von Macros)  und
                  die Routine zum Umwandeln der C- in ACE-Kommentare
                  neugeschrieben
   - 10.05.1997 : um Option -x erweitert
   - 19.05.1997 : neucompiliert (mit SuperOptimizer 2.01 und PhxAss OPT)

 Version 2.03 :

   - 19.06.1997 : bei Fehlern wird der Rückgabewert nun gesetzt

@endnode
