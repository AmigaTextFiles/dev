From ace@appcomp.utas.edu.au Fri Mar  3 10:53:07 1995
Received: from  (server@localhost.utas.edu.au [127.0.0.1]) by leven.appcomp.utas.edu.au (8.6.4/8.6.4) with SMTP id KAA00952; Fri, 3 Mar 1995 10:08:38 +1100
Date: Fri, 3 Mar 1995 10:08:38 +1100
Message-Id: <9503021905.axc4@augs.se>
Originator: ace@appcomp.utas.edu.au
Errors-To: A.D.Gray@appcomp.utas.edu.au
Reply-To: <ace@appcomp.utas.edu.au>
Sender: ace@appcomp.utas.edu.au
Version: 5.31 -- Copyright (c) 1991, Anastasios Kotsikonas
From: Nils_Sjoholm@augs.se (Nils Sjoholm)
To: Multiple recipients of list <ace@appcomp.utas.edu.au>
Subject: editor
Status: OR


Hello all

I have some bad news and some god news.
The bad news is that if you want to have errorreport
in a editor you can't use app. App removes any comments
and includes files, both screws up Ace errorreport on linenumber.

The god news?
In this mail there is a rexxscript for GoldEd to show
errors from Ace. It's a quick hack but it works. It will
just show the first error.

As it stands it must be used with AIDE but you can change
ErrorFileName path to whatever. Just do a 'QUERY PATH VAR'
and set the path to the current directory. It all depends
were the ace.err file is.

It's not hard to change this to use with other editors.

Remember you can't use app which means you can't have
any #include.




----------------------------CUT-----------------------
/* $VER: 0.9, ?1995 Nils Sjwholm. Show Error from ace.err */

OPTIONS RESULTS                             /* enable return codes     */

if (LEFT(ADDRESS(), 6) ~= "GOLDED") then    /* not started by GoldEd ? */
    address 'GOLDED.1'

'LOCK CURRENT'                              /* lock GUI, gain access   */
OPTIONS FAILAT 6                            /* ignore warnings         */
SIGNAL ON SYNTAX                            /* ensure clean exit       */


/* ------------------------ INSERT YOUR CODE HERE: ------------------- */

/*

ShowAceError.ged

Just put this in the menu of GoldEd, if you don't know how, read the
manual.

*/

ErrorFileName = "ACE:AIDE/ace.err"

IF Exists(ErrorFileName) THEN

    DO
        R     = Open('ERRORS', ErrorFileName, 'R')
        bytes = Seek('ERRORS', 0, 'E')
        R     = Close('ERRORS')
    END
ELSE
    bytes = 0

IF (bytes > 0) THEN

    DO

    R = Open(logfile, ErrorFileName, 'R')
        dummy = ReadLn(logfile)
        dummy = ReadLn(logfile)
        Marker = ReadLn(logfile)
        WhichColumn = Pos('^',marker,1)
        ErrText = ReadLn(logfile)
        ErrText = DelStr(ErrText,1,3)
        NumberOfWords = Words(ErrText)
        LineNo = Word(ErrText,NumberOfWords)
        LineNo = DelStr(LineNo,Length(LineNo))
        test = Close(logfile)
        'GOTO COLUMN=' && WhichColumn
        'GOTO LINE=' && LineNo
        'MARK SET'
        'REQUEST BODY="' && ErrText && '"'
END; ELSE DO
   'REQUEST BODY="No Errors Found"'
END


/* ---------------------------- END OF YOUR CODE --------------------- */

'UNLOCK' /* VERY important: unlock GUI */
EXIT

SYNTAX:

SAY "Sorry, error line" SIGL ":" ERRORTEXT(RC) ":-("
'UNLOCK'
EXIT
-----------------------CUT------------------------------

Rds

Nisse



-- Via DLG Pro v1.0



