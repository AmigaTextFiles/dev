

NOTE! integers are in big endian format.


WLA-GB object file format "WLA9"


header:

bytes   description

  4     format information,
        "WLA9" - WLA-GB object file version 7 (30-Aug-2000)
  1     rom name status (0 = no name, 1 = name)
 16     rom name
  1     rom type
  1     ram size
  1     empty fill
  1     cartridge type
  1     licenseecode old / new (0 = old, 1 = new)
  1     licenseecodeold
  1     licenseecodenew c1
  1     licenseecodenew c2
  1     compute checksum (0 = no, 1 = yes)
  1     compute complement check (0 = no, 1 = yes)

rom bank map:

  1     amount of entries (0 = general bank size follows, 1 = bank size list follows).
  4     general bank size (int)
  ...
  4     bank size (int).
  ...

memory map:

  1     amount of entries (1-255)
  ...
  4     slot address (int)
  4     slot size (int)
  ...

exported value definitions:

  4     amount of definitions (int)
  ...
  n     definition label (0 terminated)
  4     value (int)
  ...

labels:

  4     amount of labels (int)
  ...
  n     label (0 terminated)
  1     section (0 = no section, 1 - 255 = section id)
  4     relative address (int)
  4     bank number (int)
  1     slot number (0-255)
  ...

outside references:

  4     amount of references (int)
  ...
  n     label (0 terminated)
  1     type (0 = direct, 1 = relative)
  1     section (0 = no section, 1 - 255 = section id)
  4     relative address (int)
  4     bank number (int)
  1     slot number (0-255)
  ...

pending calculations:

  4     amount of pending calculations (int)
  ...
  1     result type (0 = 8bit, 1 = 16bit, 2 = 24bit)
  1     section (0 = no section, 1 - 255 = section id)
  4     relative address (int)
  4     line number (int)
  4     bank number (int)
  1     slot number (0-255)
  1     amount of stack items
  ...
  1     type
  1     sign (0 = positive, 1 = negative)
  4     value (int) OR
  n     string (0 terminated)
  ...
  ...

data area:

  ...
  1     type (0 = data block, 1 = section)
  ...

data block:

  4     address (int)
  4     amount of bytes (int)
  n     data

section:

  n     name (terminated with 0 (if free), 1 (if forced) or 2 (if overwrite)
  4     relative address (int)
  4     bank number (int)
  1     slot number (0-255)
  4     size (int)
  n     data





WLA-Z80/6502/6510/65816 object file format "WLAB"


header:

bytes   description

  4     format information,
        "WLAB" - WLA-Z80/6502/6510/65816 object file version 5 (31-Jan-2001)
  4     amount of rom banks (int)
  1     empty fill
  1     compute checksum (0 = no, 1 = sms)

rom bank map:

  1     amount of entries (0 = general bank size follows, 1 = bank size list follows)
  4     general bank size (int)
  ...
  4     bank size (int).
  ...

memory map:

  1     amount of entries (1-255)
  ...
  4     slot address (int)
  4     slot size (int)
  ...

exported value definitions:

  4     amount of definitions (int)
  ...
  n     definition label (0 terminated)
  4     value (int)
  ...

labels:

  4     amount of labels (int)
  ...
  n     label (0 terminated)
  1     section (0 = no section, 1 - 255 = section id)
  4     relative address (int)
  4     bank number (int)
  1     slot number (0-255)
  ...

outside references:

  4     amount of references (int)
  ...
  n     label (0 terminated)
  1     type (0 = direct, 1 = relative)
  1     section (0 = no section, 1 - 255 = section id)
  4     relative address (int)
  4     bank number (int)
  1     slot number (0-255)
  ...

pending calculations:

  4     amount of pending calculations (int)
  ...
  1     result type (0 = 8bit, 1 = 16bit, 2 = 24bit)
  1     section (0 = no section, 1 - 255 = section id)
  4     relative address (int)
  4     line number (int)
  4     bank number (int)
  1     slot number (0-255)
  1     amount of stack items
  ...
  1     type
  1     sign (0 = positive, 1 = negative)
  4     value (int) OR
  n     string (0 terminated)
  ...
  ...

data area:

  ...
  1     type (0 = data block, 1 = section)
  ...

data block:

  4     address (int)
  4     amount of bytes (int)
  n     data

section:

  n     name (terminated with 0 (if free), 1 (if forced) or 2 (if overwrite), 3 (if header) or 4 (if semifree)
  4     relative address (int)
  4     bank number (int)
  1     slot number (0-255)
  4     size (int)
  n     data





WLA-GB/Z80/6502/6510/65816 library file format "WLAP"


header:

bytes   description

  4     format information,
        "WLAP" - WLA-GB/Z80/6502/6510/65816 library file version 5 (30-Aug-2000)

exported value definitions:

  4     amount of definitions (int)
  ...
  n     definition label (0 terminated)
  4     value (int)
  ...

labels:

  4     amount of labels (int)
  ...
  n     label (0 terminated)
  1     section (1 - 255 = section id)
  4     relative address (int)
  ...

outside references:

  4     amount of references (int)
  ...
  n     label (0 terminated)
  1     type (0 = direct, 1 = relative)
  1     section (1 - 255 = section id)
  4     relative address (int)
  ...

pending calculations:

  4     amount of pending calculations (int)
  ...
  1     result type (0 = 8bit, 1 = 16bit, 2 = 24bit)
  1     section (1 - 255 = section id)
  4     relative address (int)
  4     line number (int)
  1     amount of stack items
  ...
  1     type
  1     sign (0 = positive, 1 = negative)
  4     value (int) OR
  n     string (0 terminated)
  ...
  ...

sections:

  ...
  n     name (0 terminated)
  4     amount of bytes (int)
  n     data
  ...
