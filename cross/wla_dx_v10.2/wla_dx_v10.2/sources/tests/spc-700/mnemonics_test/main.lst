; WLALINK ($VER: wlalink 5.17 (24.6.2022)) listing file
; 2022-06-24 14:19:31

;Line Bank Slot PC   Offset Hex                             Source
                                                            
                                                            ;»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»
                                                            ; a small example testing spc-700 parsing
                                                            ; written by ville helin <ville.helin@iki.fi> in 2021
                                                            ;»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»
                                                            
                                                            .MEMORYMAP
                                                            SlotSize $10000
                                                            DeFaUlTsLoT 0
                                                            slOt 0 $0000
                                                            .ENDME
                                                            
                                                            .ROMBANKMAP
                                                            BANKStotal 1
                                                            BaNKSiZE $10000
                                                            BaNKs 1
                                                            .ENDRO
                                                            
                                                            ;»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»
                                                            ; tests
                                                            ;»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»
                                                            
                                                            .bank 0 slot 0
                                                            
                                                            // bits for settings
                                                            .define SETTINGS_BIT_AUDIO    0
                                                            .define SETTINGS_BIT_JOYSTICK 1
                                                            .define SETTINGS_BIT_KEYBOARD 2
                                                            
                                                            // bits for cheat_codes
                                                            .define CHEAT_CODES_BIT_1 0
                                                            .define CHEAT_CODES_BIT_2 1
                                                            .define CHEAT_CODES_BIT_3 2
                                                            
                                                            .org 0
                                                            
                                                            .section "VARIABLES" force
                                                            settings:
   39 0000 0000 0000 0000   00                                  .db 0
                                                            cheat_codes:
   41 0000 0000 0001 0001   00                                  .db 0
                                                            .ends
                                                            
                                                            .org $200
                                                            
                                                            ; @BT result.rom
                                                            
                                                            .section "TEST01" force
   49 0000 0000 0200 0200   30 31 3E                            .db "01>"                                       ; @BT TEST-01 01 START
   50 0000 0000 0203 0203   53 00 00                            bbc settings.SETTINGS_BIT_KEYBOARD,label_1      ; @BT 53 00 00
                                                            label_1:
   52 0000 0000 0206 0206   02 00                               set1 settings.SETTINGS_BIT_AUDIO                ; @BT 02 00
   53 0000 0000 0208 0208   6A 01 00                            and1 C,/cheat_codes.CHEAT_CODES_BIT_1           ; @BT 6A 01 00
   54 0000 0000 020B 020B   4A 01 00                            and1 C,cheat_codes.CHEAT_CODES_BIT_1            ; @BT 4A 01 00
   55 0000 0000 020E 020E   3C 30 31                            .db "<01"                                       ; @BT END
                                                            .ends
                                                            
                                                            .section "TEST02" force
   59 0000 0000 0211 0211   30 32 3E                            .db "02>"                                       ; @BT TEST-02 02 START
   60 0000 0000 0214 0214   53 00 00                            bbc settings,SETTINGS_BIT_KEYBOARD,label_2      ; @BT 53 00 00
                                                            label_2:
   62 0000 0000 0217 0217   02 00                               set1 settings,SETTINGS_BIT_AUDIO                ; @BT 02 00
   63 0000 0000 0219 0219   6A 01 00                            and1 C,/cheat_codes,CHEAT_CODES_BIT_1           ; @BT 6A 01 00
   64 0000 0000 021C 021C   4A 01 00                            and1 C,cheat_codes,CHEAT_CODES_BIT_1            ; @BT 4A 01 00
   65 0000 0000 021F 021F   3C 30 32                            .db "<02"                                       ; @BT END
                                                            .ends
                                                            
                                                            .define TCALL_0  0
                                                            .define TCALL_1  1
                                                            .define TCALL_15 15
                                                                    
                                                            .section "TEST03" force
   73 0000 0000 0222 0222   30 33 3E                            .db "03>"                                       ; @BT TEST-03 03 START
   74 0000 0000 0225 0225   87 01                               adc a, [SETTINGS_BIT_JOYSTICK+X]                ; @BT 87 01
   75 0000 0000 0227 0227   97 01                               adc a, [SETTINGS_BIT_JOYSTICK]+Y                ; @BT 97 01
   76 0000 0000 0229 0229   01                                  tcall 0                                         ; @BT 01
   77 0000 0000 022A 022A   11                                  tcall TCALL_1 + 0                               ; @BT 11
   78 0000 0000 022B 022B   F1                                  tcall TCALL_1 * 10 - 10 + TCALL_15              ; @BT F1
   79 0000 0000 022C 022C   4E 01 00                            tclr1 !cheat_codes                              ; @BT 4E 01 00
   80 0000 0000 022F 022F   0E 01 00                            tset1 !cheat_codes                              ; @BT 0E 01 00
   81 0000 0000 0232 0232   3C 30 33                            .db "<03"                                       ; @BT END
                                                            .ends
