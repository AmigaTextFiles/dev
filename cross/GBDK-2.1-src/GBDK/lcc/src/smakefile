all: rcc

clean:
	rm *.o *.lnk dagcheck.c z80.c

rcc: alloc.o bind.o bytecode.o dag.o dagcheck.o decl.o enode.o error.o expr.o event.o \
		init.o inits.o input.o lex.o list.o main.o prof.o profio.o simp.o \
		stmt.o string.o sym.o output.o trace.o tree.o types.o \
		null.o symbolic.o gen.o z80.o
	sc LINK alloc.o bind.o bytecode.o dag.o dagcheck.o decl.o enode.o error.o expr.o event.o \
		init.o inits.o input.o lex.o list.o main.o prof.o profio.o simp.o \
		stmt.o string.o sym.o output.o trace.o tree.o types.o \
		null.o symbolic.o gen.o z80.o TO rcc

alloc.o: alloc.c c.h
	sc alloc.c
bind.o: bind.c
	sc bind.c
bytecode.o: bytecode.c c.h
	sc bytecode.c
dag.o: dag.c c.h
	sc dag.c
dagcheck.o: dagcheck.c c.h
	sc dagcheck.c
dagcheck.c: dagcheck.md
	//lburg/lburg dagcheck.md > dagcheck.c
decl.o: decl.c c.h
	sc decl.c
enode.o: enode.c c.h
	sc enode.c
error.o: error.c c.h
	sc error.c
event.o: event.c c.h
	sc event.c
expr.o: expr.c c.h
	sc expr.c
gen.o: gen.c c.h
	sc gen.c
init.o: init.c c.h
	sc init.c
inits.o: inits.c
	sc inits.c
input.o: input.c c.h
	sc input.c
lex.o: lex.c c.h
	sc lex.c
list.o: list.c c.h
	sc list.c
main.o: main.c c.h
	sc main.c
null.o: null.c c.h
	sc null.c
output.o: output.c c.h
	sc output.c
prof.o: prof.c c.h
	sc prof.c
profio.o: profio.c c.h
	sc profio.c
simp.o: simp.c c.h
	sc simp.c
stmt.o: stmt.c c.h
	sc stmt.c
string.o: string.c
	sc string.c
sym.o: sym.c c.h
	sc sym.c
symbolic.o: symbolic.c c.h
	sc symbolic.c
trace.o: trace.c c.h
	sc trace.c
tree.o:	tree.c c.h
	sc tree.c
types.o: types.c c.h
	sc types.c

z80.o: z80.c opt.c c.h
	sc z80.c
z80.c: z80.md
	//lburg/lburg z80.md > z80.c
