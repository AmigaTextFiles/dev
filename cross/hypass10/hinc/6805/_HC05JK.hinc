@DATABASE
@NODE MAIN HC05JK
* 68HC05JK HyperSource© include file for MC 68HC05-J1 and MC 68HC705-K1
* © 1998 RST Ralf Steines Trier, ALL RIGHTS RESERVED
*
* source: MUCBBS, HC05 C-headers (except PROM)
*

    @{" HC05JK  CPU-CORE     " link "HC05JK_CPU-CORE"}
    @{" HC05JK  INTERRUPTS   " link "HC05JK_INTERRUPTS"}

    @{" HC05JK  IO-PORTS     " link "HC05JK_IO-PORTS"}

    @{" HC05JK  TIMERS       " link "HC05JK_TIMERS"}
    @{" HC705K1 PROM         " link "HC705K1_PROM"}

@ENDNODE
@NODE HC05JK_CPU-CORE
************************
*       CPU CORE       *
************************

; SUPPORTS: STOP WAIT MUL


@ENDNODE
@NODE HC05JK_INTERRUPTS
****************************
*    INTERRUPT VECTORS     *
****************************

  V_TMR     = IRQS+$08 ;
  V_IRQ     = IRQS+$0A ;
  V_SWI     = IRQS+$0C ;
  V_RES     = IRQS+$0E ;


@ENDNODE
@NODE HC05JK_IO-PORTS
****************************
*   INPUT/ OUTPUT PORTS    *
****************************

  PORTA     = REGS+$00 ; PORT A DATA REGISTER

        PA7       = %10000000   ; I/O
        PA6       = %01000000   ; I/O
        PA5       = %00100000   ; I/O
        PA4       = %00010000   ; I/O
        PA3       = %00001000   ; I/O
        PA2       = %00000100   ; I/O
        PA1       = %00000010   ; I/O
        PA0       = %00000001   ; I/O

  PORTB     = REGS+$01 ; PORT B DATA REGISTER

      .IFND HAS_16PINS ; HC05J1 ONLY
        PB5       = %00100000   ; I/O
        PB4       = %00010000   ; I/O
        PB3       = %00001000   ; I/O
        PB2       = %00000100   ; I/O
      .ENDIF
        PB1       = %00000010   ; I/O
        PB0       = %00000001   ; I/O

  DDRA      = REGS+$04 ; DATA DIRECTION REGISTER FOR PORT A

        DDA7      = %10000000   ; *0=IN 1=OUT
        DDA6      = %01000000   ; *0=IN 1=OUT
        DDA5      = %00100000   ; *0=IN 1=OUT
        DDA4      = %00010000   ; *0=IN 1=OUT
        DDA3      = %00001000   ; *0=IN 1=OUT
        DDA2      = %00000100   ; *0=IN 1=OUT
        DDA1      = %00000010   ; *0=IN 1=OUT
        DDA0      = %00000001   ; *0=IN 1=OUT

  DDRB      = REGS+$05 ; DATA DIRECTION REGISTER FOR PORT B

      .IFND HAS_16PINS ; HC05J1 ONLY
        DDB5      = %00100000   ; *0=IN 1=OUT
        DDB4      = %00010000   ; *0=IN 1=OUT
        DDB3      = %00001000   ; *0=IN 1=OUT
        DDB2      = %00000100   ; *0=IN 1=OUT
      .ENDIF
        DDB1      = %00000010   ; *0=IN 1=OUT
        DDB0      = %00000001   ; *0=IN 1=OUT

@ENDNODE
@NODE HC05JK_TIMERS
****************************
*     TIMER REGISTERS      *
****************************

  TCSR     = $08 ;  TIMER CONTROL AND STATUS REGISTER

        TOF       = %10000000   ; TIMER OVERFLOW FLAG
                                ; *0= NO OVERFLOW
                                ;  1= OVERFLOW OCCURED

        RTIF      = %01000000   ; REAL TIME INTERRUPT FLAG
                                ; *0= NO RTI
                                ;  1= RTI OCCURED

        TOFE      = %00100000   ; TIMER OVERFLOW ENABLE
                                ; *0= DISABLED
                                ;  1= ENABLED


        RTIE      = %00010000   ; REAL TIME INTERRUPT ENABLE
                                ; *0= DISABLED
                                ;  1= ENABLED

        RT1       = %00000010   ; REAL TIME INTERRUPT RATE SELECT
        RT0       = %00000001   ;  RT1 RT0   RTI RATE  COP RATE
                                ;   0   0     8.2 ms.   57.4 ms.
                                ;   0   1    16.4 ms.  114.8 ms.
                                ;   1   0    32.8 ms.  229.6 ms.
                                ;   1   1    65.5 ms.  458.5 ms.


  TCR      = REGS+$09 ; TIMER COUNTER REGISTER

  WATCHDOG = IRQS+$00 ; WATCHDOG REGISTER


@ENDNODE
@NODE HC705K1_PROM
****************************
*  PROGRAMMING REGISTERS   *
****************************

 .IFD HAS_K1PROM       ; HC705K1 ONLY

* THESE REGISTERS HAVE TO GET DESCRIBED LIKE ALL OTHERS
* source: ADEV11 include file, ONCE.src

  ISCR        = $0A   ; INTERRUPT STATUS AND CONTROL REGISTER
                      ;  This register, programmed to $00, indicates
                      ;  that all external interrupts are disabled.

  PEBSR       = $0E   ;

  PESCR       = $0F   ; PERSONALITY EPROM STATUS AND CONTROL REGISTER ?

  PDRA        = $10   ;

  PBRB        = $11   ;

  MOR         = $17   ; MASK OPTION REGISTER
                      ;  This register, programmed to $00, indicates:
                      ;   -pulldowns resistors enabled on both
                      ;    port A and port B, unless overridden by software.
                      ;   -oscillator configured as a two-pin oscillator,
                      ;    so PB1 is available for use as a GPIO pin.
                      ;   -oscillator is configured to accept external clock
                      ;    input
                      ;   -STOP instruction is not converted to WAIT
                      ;   -PA0:3 pins not configured for external interrupt
                      ;   -the low-voltage reset is disabled
                      ;   -interrupt pins are edge-triggerred rather than
                      ;    edge and level-triggered
                      ;   -COP watchdog is disabled

  EPROG       = $18   ; 64-BIT PERSONALITY EPROM PROGRAMMING REGISTER ?

  TESTRE      = $1F   ; FACTORY TEST REGISTER ?

 .ENDIF

@ENDNODE

