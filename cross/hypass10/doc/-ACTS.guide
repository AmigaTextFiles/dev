@DATABASE $VER: HypAss 1.0 Actions.guide (19.7.96) ©1998 RST Ralf Steines Trier, ALL RIGHTS RESERVED
@NODE MAIN "HypAss ACTION buttons"
@TOC hass:HypAss.guide/main
  HypAss ACTION button overview  @{" Gen. ACTION info " link General_ACTION_info} *** READ THIS FIRST ***
  © 1998 RST Ralf Steines Trier, ALL RIGHTS RESERVED

    Each HyperSource© node offers these action buttons:

        @{"  Navigator  " LINK   NAVIGATOR     }  Window title navigate info
        @{"  Contents   " LINK   ACT_CONTENTS  }  Root page of actal listing
        @{"  Index      " LINK   ACT_INDEX     }  Cross reference table: TODO
        @{"  Help       " LINK   ACT_HELP      }  HypAss documenation homepage
        @{"  Retrace    " LINK   ACT_RETRACE   }  Jump back to where we came from
        @{"  Browse < > " LINK   ACT_BROWSE    }  Jump to previous/next node

        @{"  Status     " LINK   ACT_STATUS    }  Listing internal status page
        @{"  Inc+Obj    " LINK   ACT_INC_OBJ   }  Listing internal file overview
        @{"  Macros     " LINK   ACT_MACROS    }  Listing internal macro overview
        @{"  Lab+Sym    " LINK   ACT_LAB_SYM   }  External label+symbol table
        @{"  Object     " LINK   ACT_OBJECT    }  External batch to view object
        @{"  Trans      " LINK   ACT_TRANS     }  External batch to transfer object
        @{"  Edit       " LINK   ACT_EDIT      }  External batch to edit source
        @{"  Assemble   " LINK   ACT_ASSEMBLE  }  External batch to assemble source

        @{" Viewer Slot " link HyperSource_Viewer_Slot}  External batch to view this all
@ENDNODE
----------------------------------------------------------------------------
@NODE General_ACTION_info
  General ACTION information

    HypAss may create a listing (for each pass) which is not only a plain
    ASCII document, but an interactive tool to have access to most of the
    features of this development system. Once the listing has been enabled
    by the @{" LST/S shell argument " link hass:doc/-args.guide/SHELL_ARG_LST}, and the @{" V=VIEW/S shell argument " link hass:doc/-args.guide/SHELL_ARG_VIEW} was set,
    a viewer will be invoced to show us the listing result. You may easily
    configurate your personal viewer via the AmigaGuide® library context
    sensitive @{" HyperSource viewer slot " link HyperSource_Viewer_Slot}. This part of the document describes
    each interactive element you may access from within this viewer.


@ENDNODE
----------------------------------------------------------------------------
@NODE NAVIGATOR
  HypAss NAVIGATOR information

    This is no button but the window frame text!

    Wherever you are in a HyperSource© listing file you have a NAVIGATOR
    display in the actual window frame top. (Not in info pages)

    It looks like this:

    [2] Listing of HSRC:demo/xass.hsrc/main (1)


    Within the brackets to the left you see the pass which has created this
    node. Next you get a localized 'Listing of' and the link path to the
    node we are in. Whithin the parentheses to the right you see the
    source line number where this node starts. This may be a good help
    when you use the '< browse >' buttons to navigate to an error line.
    Future releases will have an error index page.


@ENDNODE
----------------------------------------------------------------------------
@NODE ACT_CONTENTS
  HypAss CONTENTS action button

    This button links to the root page of your actual HyperSource© file.
    From there you get linked to the home page of your projects database
    tree be prsessing this button. So the worst that could happen is that
    you have to click this button twice to access all your work.


@ENDNODE
----------------------------------------------------------------------------
@NODE ACT_INDEX
  HypAss INDEX action button

    This button is reserved for the cross reference table, getting created
    by HypAss one day. The cross reference table will give a complete index
    of all parts of your program and an invocation matrix overview.

    (I wonder how this will look like)


@ENDNODE
----------------------------------------------------------------------------
@NODE ACT_HELP
  HypAss HELP action button

    Wherever you are within a HyperSource© listing file, you will get linked
    to the home page of the HypAss documentation tree, by pressing HELP.
    To access the original AmigaGuide help file, just press help again when
    you are whithin the HypAss documentation. This feature just works with
    AmigaGuide V39+, due to the fact that V34 release does not support the
    '\@HELP' command. But it will just ignore these unknown commands, and
    link to its normal help database.


@ENDNODE
----------------------------------------------------------------------------
@NODE ACT_RETRACE
  HypAss RETRACE action button

    This button does exactly what it does within any AmigaGuide® document:
    It links back to the last node we came from.


@ENDNODE
----------------------------------------------------------------------------
@NODE ACT_BROWSE
  HypAss BROWSE action button

    These buttons do exactly what they do within any AmigaGuide® document:
    They link to the physically next or last node within your actual
    database.

    You may specify by the commands '@NEXT' and '@PREV' within your source
    file where to browse next, if the node is not physically previous or
    next to the actual one. These commands will also appear within the
    listing then, and will not be modified by HypAss, so use them only for
    database internal links!


@ENDNODE
----------------------------------------------------------------------------
@NODE ACT_STATUS
  HypAss STATUS action button

    This button is a link to a listing internal stored copy of the status
    information which normally gets prompted to the standard output when
    assembly is finished.

    This status contains a lot of information about the actually processed
    project, and is a good conservation of the main parameters used.

    It looks like this:

    Source:   HSRC:demo/xass.hsrc/main
      Code:          8000 -> 82D0     =       720 bytes
      Data:          1000 -> 1004     =         4 bytes
      Ram:           2000 -> 2004     =         4 bytes
      Auto:          3000 -> 3004     =         4 bytes
      Source:       11336    Syntax:    XASS    Includes:    14
      Lines:          619    Math:       HYP    Labels:      18 of 2000
      Passes:           2    Cpu:       6502    Symbols:     32 of 2000
      Memory:      357080    Object:     CBM    Macros:       6
      Time:       00:03.9    Dummies:      7    FwrdRefs:     9
    3 error(s) in pass 1.
    3 error(s) in pass 2.

    On top you always see the path and name of the root node of the actually
    processed HyperSource© database. You may enter this file just by double-
    clicking it. Note that you will get linked to the source file.

    Next you get an overview of all touched segments, each one showing the
    minimum and maximum program counter that appeared WHILE CREATING DATA.
    So currently will not get displayed if you use the segment to define
    memory locations. You see in the example that I created bytes in any
    segment. This is currently possible, but should not be used for future
    compatiblity. The code segment gets treated special, while its space
    defines the object libraries write buffer size in fast mode.

    Next you see three columns of data:      (read them as columns!)

    The left one displays some information about the assembler performance.
    The total source+include size, the total source lines including macro
    lines (even repetitive), and the required passes, currently always 2,
    what is prelimary. A very unusual feature is the display of the memory
    consumption of HypAss while assembling. HypAss makes a guess when it gets
    launched if it should enable its low memory mode, the actual free memory
    situation gets stored, and each 100 lines the memory scan gets repeated.
    The minimum free memory situation that appeared during assembly gets
    subtracted at the end and evaluates to this value. Note that this value
    will be wrong if you launch multiple HypAss' asynchronously!
    The last information is the required time which I needn't describe here.
    Because of the fact that this must appear in the listing there's *no*
    file creation time for the listing included in this value (how can it?),
    but it will be included in lowmem mode.

    The middle column shows the raw assembler configuration. You get a brief
    information what kind of assembler syntax, which expression evaluator
    and which processor library was used to create the named object format.
    The last value counts syntax collissions with obsolete pseudo dummies.

    The right column gives you statistical information about the created
    assembler internal objects, which directly influent your memory con-
    sumption. (Imagine that a small 10000 lines project may create up to
    50000 allocated memory chunks, depending on your macro and include
    nesting depth, and the amount of labels, symbols, macros and forward
    references).

    And last but not least you will get an information how many errors
    occured in each pass or just a 'no errors' prompt.


@ENDNODE
----------------------------------------------------------------------------
@NODE ACT_INC_OBJ
  HypAss Inc+Obj action button

    This button is a link to a listing internal stored table of all
    envolved source, include and object files.

    It looks like this:

    Includes overview:

          object   level          size      include filename
        ------------------------------------------------------------
            0        0            9957    HSRC:demo/xass.hsrc/main
            1        1             170     hsrc:demo/_test.inc/main
            1        2              86      hsrc:demo/_tests.inc/main
            1        2              86      hsrc:demo/_tests.inc/main
            1        2              86      hsrc:demo/_tests.inc/main
        ------------------------------------------------------------
                                 10384


    Objects overview:

            from    to            size    segment / object filename
        ------------------------------------------------------------
             8000  82D0            720    CODE
             1000  1004              4    DATA
             2000  2004              4    RAM
             3000  3004              4    AUTO
        ------------------------------------------------------------
             1000  82D0          29392    HSRC:demo/xass.cbm/main


    The includes overview shows a list, always starting with the root file
    of our actual database, followed by all envolved includes, listed in
    their include nesting level depth hirarchy. Each file gets displayed as
    a node path to the root node of each HyperSource© include file, and may
    be entered just by double clicking it. You will get linked to the
    source file then.

    The objects overview table displays a list of all touched segments,
    as described in the status information page. But here you also get
    shown which binary image frame results of the sum of all segments.
    You see that the size information is not evaluated by adding the
    segment sizes. If you have choosen a binary object format, this will
    be your filesize (plus some object specific bytes).

    As usual we also have a link to the object file here. Be careful if
    you have a binary object, because the onliest existing binary.datatype
    which I know (V39.11) is extreme unfriendly to Multiview, and may
    crash your machine. Use the "Object" action button in any node header
    and a new independant copy of Multiview gets launched. When used in
    this way, the datatype works quite well (it just misses the last bytes).
    For safety the node name 'main' will not appear for V34 AmigaGuide® if
    the object is of binary type, because the amigaguide executable loads
    until the end of your HD then, but without nodename the screen will just
    beep when double clicking this binary object.

    Due to the fact that you may config these buttons there should be no
    problem to find another binary viewer. But be carefull with hypertext
    links to binary data, especially with none-datatype-amigaguide!


@ENDNODE
----------------------------------------------------------------------------
@NODE ACT_MACROS
  HypAss Macros action button

    This button is a link to a listing internal stored table of all
    defined macros, their size and pass parameters.

    It looks like this:

    Macros overview:

        macroname                        size   parameters  calls
        ------------------------------------------------------------
        test                              146       0         8
        test2                              62       0         3
        test3                              49       1         3
        test4                              67       2         3
        testm                              22       0         2
        TESTM                              22       0         4
        ------------------------------------------------------------
                                          368


    To the left you see the name of each macro, up to 32 characters, then
    the macro body source code size and the minimum requirered pass
    parameters you must apply to avoid an error. Note that only the XASS
    macro system may specify the mimimum required NARG in the macro title.
    To the right you see the invocation counter for each macro.

    If you want to do 'state of the art' HyperSource© programming, you
    should encapsulate each macro definition within its own node. The result
    will be that you may double click any macro name in your source file and
    you will get linked to its contents!

    The same you should do then with any routine you access via 'JSR' or
    'JMP' family instructions. Then you may run through your programm as if
    you were a CPU, just the RTS/RTI is now the 'Retrace' button!

    I'm thinking of emulator capabilities within the CPU-libraries, to run
    in single step mode through a HyperSource© database tree...
    (With PPC this should also be possible in realtime)

    This is just a question of manyears, and how to share an AmigaGuide®
    context in a legal way. Maybe I could force AmigaTechnologies® to
    implement CPU emulator methods in AmigaGuide® contexts, or I write a
    HypEmu.datatype myself.

    I could imagine that anybody who has ever witten an emulator for our
    great Amiga can't await the PPC!


@ENDNODE
----------------------------------------------------------------------------
@NODE ACT_LAB_SYM
  HypAss Lab+Sym action button

    This button is a link to an external created label and symbol table,
    which may be reincluded by HypAss again. In the moment this is just a
    plain ASCII file, to allow another assembler to share data with HypAss.
    I'm not shure if this will not be a HyperSource© page in future. The
    need to have cross reference table and direct links to label and symbol
    definition and invocation lines will force to detach from compatiblity
    here. I maybe implement common sense symboltable libraries to run in-
    circuit emulators until HypEmu.datatype is finished.

    This button of course only appears if such a table creation was enabled
    by the 'SYM/S' switch in shell arguments.

    This table consists of a separate label table (all these funny names
    left to our none-equ pseudos) and a symbol table (for all these equates
    assigned by .equ of .set family pseudos), and if additionally the 'LOC'
    switch was set there will be a third table with all labels and symbols
    which are local to macros.


@ENDNODE
----------------------------------------------------------------------------
@NODE ACT_OBJECT
  HypAss Object action button

    This button launches one of two external batch files to display the
    actually created object file, depending on the object format category
    to be displayed. Possible categories are binary and hex in the moment.

    The batch files can be found in hass:tools and are named viewobj_bin
    and viewobj_hex. This will also be a good help for our <3.x friends,
    having no datatypes system. HypAss passes 1 argument to the file, the
    object filename including full path.

    If you still own KickStart V34, you may directly put executables in
    place, since I remember that batch files couldn't receive arguments
    there due to the mess of a '.key' command.


@ENDNODE
----------------------------------------------------------------------------
@NODE ACT_TRANS
  HypAss Trans action button

    This button launches an external batch file to transfer the actually
    created object file to wherever we need to. I was dreaming of such a
    button since I know intuition driven assemblers. It's developer's
    port to reality within HyperSource©. It launches a batch file which
    can be found in hass:tools/trans. This batch again should contain a
    requestchoice-like-requester to select the utility you want to envolve.
    To be the most flexible, I have not included this requester in HypAss,
    mostly because of possible context-sensitivity. HypAss passes 4 args
    to this batch file: The localized title 'transfer object' and the
    localized body text 'Choose transfer method' both to be displayed within
    the requester. The third argument is the actually created object file,
    including path, and the fourth one is the object format ID again. I
    guess this is the most flexible port to external environment.

    The template to parse these arguments is this one:

        .key title/A,body/A,file/A,format/A

    I have choosen the title and body texts unquoted, to avoid nested double
    quotes, because otherwise there would be no way to find a program which
    can run on any OS version. This means that currently there's no space
    permitted in the locale string within these 2 texts. But for this it's
    much easier to built requesters and add extensions. Maybe this will
    change in future.


@ENDNODE
----------------------------------------------------------------------------
@NODE ACT_EDIT
  HypAss Edit action button

    This button launches one of four external batch files to start your
    favourite text editor and feed it with the actual source file, depending
    on the KickVersion() and on the source file type. This editor may be an
    AmigaGuide based editor or a plain ASCII editor. The batch files can be
    found in hass:tools and are named editsrc_os0 and editsrc_os36 for usual
    source files and edithsrc_os0 and edithsrc_os36 for HyperSource© files.
    HypAss passes 3 arguments to the OS V36+ batch files: The source file to
    be edited, the node name we are in, and the absolute line number where
    our node begins. This was also choosen for highest flexibility. If you
    use an editor which can be linked to a database internal node as for
    example heddley, you just have to connect the first 2 arguments by a
    slash (/) and you have a hypertext-node-path. If you use an editor which
    can jump to a line, you take the first and third argument and pass it to
    this editor. The OS V0+ batches just receive one argument, the source
    file name with full path, so Kick34 friends may put an executable in
    place.

    The template to parse the V36+ arguments is this one:

        .key file/A,node/A,line/a


    If you write "backends" for your (maybe ARexx hostable) editor, please
    send them to me and I will include them in the next release and in the
    installer shit, hmm, no, script. And don't forget to specify the editor
    and version number, and test it some weeks before you send me the
    results to be spread. Don't forget to include a version within this
    script.


@ENDNODE
----------------------------------------------------------------------------
@NODE ACT_ASSEMBLE
  HypAss Assemble action button

    This is the pride of HypAss. From within any node you may press this
    button, and the current database will be shut down, and one of four
    external batch files get launched to assemble the same database again,
    with the same arguments as you have used when assembling it the last
    time (doesn't matter when this was). When assembly is finished you will
    get thrown the same listing in your face again. Currently you get linked
    to the main node of the file you assembled, but I plan that HypAss will
    remember your most recent position within this database and link there
    again after assembly.

    The decision which batch will be launched depends on the version number
    of the actual amigaguide.library. This gets detected in 4 levels, each
    level having an own batch which gets started:

      hass:tools/assemble_ag40  found amigaguide.library V40+
      hass:tools/assemble_ag39  found amigaguide.library V39+
      hass:tools/assemble_ag34  found amigaguide.library V34+
      hass:tools/assemble_ag0   no amigaguide.library found (prehistoric system)

    But why make the assemble button amigaguide sensitive? Because of bugs
    or disabled features in multiview. Since amigaguide went a datatype,
    the complete 'shutdown database' commands have been removed, both, as
    AmigaGuide commands and as ARexx commands! So there's just one way out
    of Multiview: The close gadget. That was a problem. But when playing
    with MultiView I found out that it can be closed by CtrlC. Yeah! And as
    we all know CtrlC may be thrown by the 'break' AmigaDos command. This
    one again needs the process number, which may be asked by the 'status'
    AmigaDos command. So I wrote a little tricky executable (tools/break),
    which uses these 2 AmigaDos commands to CtrlC anything that has the name
    you apply to it. So whenever you press 'assemble', any Multiviews which
    have been launched with the path sys:utilities/multiview get shut down.
    This is the most system friendly way, and always future compatible. (If
    they don't remove more features :) But now the bad news: AmigaGuide V34
    could not be closed by CtrlC, but for this it still has the shut down
    commands. You may remote it if you have a running ARexx environment
    (V36+) and call the QUIT command! Due to the fact that I have no access
    to a V36 system is there currently no script. You must write one and
    send it to me, so it may be included in a future release. Don't forget
    to specify the Kick and AmigaGuide version you tested. Kick 1.3 users
    have mostly slow CPUs, so they can peacefully press the assemble button,
    and then the close gadget. If you find something better let me know.


@ENDNODE
----------------------------------------------------------------------------
@NODE HyperSource_Viewer_Slot
  HyperSource© viewer slot

    HypAss has an AmigaGuide® library context sensitive viewer slot:
    When assembly is finished, HypAss will launch one of four batchfiles
    to view the created listing, depending on the version number of the
    actual amigaguide.library. This gets detected in 4 levels, each level
    having an own batch which gets started:

      hass:tools/view_ag40  found amigaguide.library V40+
      hass:tools/view_ag39  found amigaguide.library V39+
      hass:tools/view_ag34  found amigaguide.library V34+
      hass:tools/view_ag0   no amigaguide.library found (prehistoric system)

    If anybody knows if there has ever been a release between V34 and V39,
    please inform me. If Amiga developers read this: send me a legal version.

    HypAss passes one arguments to each of these batch files, the filename
    including full path of the listing to be displayed.

    If you still own KickStart V34, you may directly put executables in
    place, since I remember that batch files couldn't receive arguments
    there due to the mess of a '.key' command.

    The listing output of HypAss is, as stated before context sensitive.
    I have optimized the output running V34/V39/V40 of amigaguide.library,
    to find out how horribly the speed increased since V34. Because Kick
    V34 doesn't run any more with A4000, I have made all tests with Kick
    V39. So it is not clear if all will react similar in total OS34 systems.
    Please give me some infos, even positive ones! The V34 AmigaGuide is
    very sensitive for incoherent database structuring, Multiview even can
    handle unproperly nested database definitions. If you want to spread
    your HyperSources©, test them with AmigaGuide executable and library
    V34, so you are sure they are properly nested, and context independant.

    How you may manage this the easiest way:

    Create a directory libs:old and put the V34 amigaguide.library into.
    Put the amigaguide executable in sys:utilities. Then you just need to
    type the following lines in your shell:

        avail flush
        loadresource libs:old/amigaguide.library lock

    After you have flushed an eventually new amigaguide.library from your
    memory you 'lock' the old one whithin your mem.

    Now you can use HypAss as always, it will automatically adapt to the
    old amigaguide version. When you succesfully have finished all tests,
    you remove the old library by:

        loadresource libs:old/amigaguide.library unlock
        avail flush

    And your system acts as usual again. Note that these locks/unlocks only
    works if no AmigaGuide® application is active in these moments.

    Show me another platform where you can make acrobatics like that!


@ENDNODE
----------------------------------------------------------------------------
