@database 08606c00-0
@master Binar.guide
@$VER: 1.1
@author "Janne Peräaho"
@(c) "Copyright © 2001-2002 Janne Peräaho"
@width 79

@node "Main" "Binar"
                                     Binar
                                  Version 1.1                                 

           Copyright © 2001-2002 Janne Peräaho. All rights reserved.
 @{u}                                                                             @{uu}

 @{" Copyright        " link "Copyright" 0} About legal issues.
 @{" License          " link "License" 0} What you have to agree on.

 @{" Introduction     " link "Introduction" 0} What Binar is used for?
 @{" Features         " link "Features" 0} Features of this program.

 @{" Requirements     " link "Requirements" 0} Which hardware/software do you need?
 @{" Installation     " link "Installation" 0} How to install Binar on your computer.
 @{" Running Binar    " link "Running" 0} Running scenarios and tips.

 @{" Usage            " link "Usage" 0} General usage.
 @{" Arguments        " link "Arguments" 0} CLI/Shell arguments.
 @{" FAQ              " link "FAQ" 0} READ THIS!

 @{" Bugs/Limitations " link "Limitations" 0} Performance limitations.
 @{" Binar's Future   " link "Future" 0} Planned improvements.
 @{" History          " link "History" 0} Different versions of this program.

 @{" Support          " link "Support" 0} Any problems?

 @{" Acknowledgements " link "Acknowledgements" 0} Who did what?
 @{" Author           " link "Author" 0} Contact information.
@endnode

@node "Copyright" "Copyright"

 COPYRIGHT


 @{b}Binar@{ub}
 Copyright © 2001-2002 Janne Peräaho. All rights reserved.

 @{b}BinarGUI@{ub}
 Copyright © 2001-2002 Janne Peräaho. All rights reserved.

 @{b}Binar.guide@{ub}
 Copyright © 2001-2002 Janne Peräaho. All rights reserved.

 @{b}Souw@{ub}
 Copyright © 2002 Janne Peräaho. All rights reserved.

 @{b}SouwGUI@{ub}
 Copyright © 2002 Janne Peräaho. All rights reserved.

 @{b}Souw.guide@{ub}
 Copyright © 2002 Janne Peräaho. All rights reserved.
@endnode

@node "License" "License"

 @{b}LICENSEGRANT@{ub}


 This is a license between you, the end user, and the author (Janne Peräaho) 
 of Binar. The author grants you a license to copy, distribute, and use Binar,
 BinarGUI, Souw, SouwGUI, and documentation enclosed in "Binar.lha" archive
 freely with the following exceptions:

 @{b}You may not:@{ub}

 @{b}a.@{ub} modify, reverse engineer, decompile, or disassemble 
    Binar, BinarGUI, Souw, SouwGUI, or accompanying documentation or;
 @{b}b.@{ub} remove any proprietary notices, labels, or marks on the 
    Binar, BinarGUI, Souw, SouwGUI, and documentation.

 @{b}LIMITATION OF REMEDIES@{ub}

 IN NO EVENT SHALL SOFTWARE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
 INCIDENTAL, OR CONSEQUENTIAL DAMAGES OR LOSSES ARISING OUT OF THE BINAR.


 @{b}LIMITED WARRANTY@{ub}

 THE BINAR IS PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED
 OR IMPLIED. THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE SOFTWARE
 IS WITH YOU, AND YOU ASSUME THE ENTIRE COST OF ALL NECESSARY SERVICING,
 REPAIR OR CORRECTION.

 The author of Binar does NOT warrant that the function contained in the
 Binar, BinarGUI, Souw, or in SouwGUI programs will meet your requirements, or
 that the operation of Binar, BinarGUI, Souw, or SouwGUI will be uninterrupted
 or error free.


 @{b}GENERAL@{ub}

 You may terminate this license at any time by destroying all your copies of 
 Binar. The author may terminate this license if you fail to comply with the
 terms and conditions of this License Agreement. Upon such termination, you
 agree to destroy all your copies of Binar.
@endnode

@node "Introduction" "Introduction"

 INTRODUCTION


 By using Binar you can extract source code from machine language programs
 created for Apple 8-bit computers @{" » " link "ApplesAndCPUs.txt/main" 0}, Atari 8-bit computers @{" » " link "AtariesAndCPUs.txt/main" 0}, and
 Commodore 8-bit computers @{" » " link "CBMsAndCPUs.txt/main" 0}.

 Binar is a non-symbolic disassembler for 65xx/75xx/85xx processors. It is
 capable of disassembling and recognising all the 256 opcodes of
 65xx/75xx/85xx processors, including undocumented ones.

 In addition to extracting source codes, it can provide extra information
 about machine language programs which is difficult to get otherwise, such
 information as the number of code lines and number of subroutine calls.

 Disassembled code can be viewed in a shell window or saved in an ASCII file
 to be archived, annotated, and/or further analysed.

 By default, Binar disassembles in Commodore's TEDMON Monitor format but
 output can be modified to meet your needs better.

 If you do not like using command arguments, an alternative easy interactive
 usage is provided through BinarGUI GUI-front-end. With the BinarGUI you can
 view the source code by just a few mouse clicks.
  
 Binar is a freeware [AMITY] product.
@endnode

@node "Features" "Features"

 FEATURES


 · supports the following processors: 65xx, 75xx and 85xx
 · recognises all 256 opcodes of 65xx/75xx/85xx CPU, both documented and
   undocumented
 · undocumented opcodes support can be turned off
 · supports raw binary files (other than CBM files)
 · disassembles files or displays files' hex and ASCII values (hex dumps)
 · allows partial disassembling and partial hex dumps
 · outputs in Commodore's TEDMON Monitor format
 · default output format can be modified
 · analyses machine language programs and provides extra information about
   them
 · alternative easy interactive usage through BinarGUI GUI-front-end
@endnode

@node "Requirements" "Requirements"

 REQUIREMENTS


 @{b}Amiga@{ub}
 
 · Amiga OS version 3.1 or later
 · at least 68000 CPU

 @{b}Software@{ub}

 @{" ARexx       " link "Requirements" 16} Any version.
 @{" RequestFile " link "Requirements" 22} Version 39.2 or later.
 @{" IconX       " link "Requirements" 28} Version 38.8 or later.
 @{u}                                                                             @{uu}

 ARexx

  Required by Souw.
  Included in Amiga OS.
 @{u}                                                                             @{uu}

 RequestFile 39.2

  Required by BinarGUI and SouwGUI.
  Included in Amiga OS version 3.1.
 @{u}                                                                             @{uu}

 IconX 38.8

  Required by BinarGUI and SouwGUI.
  Included in Amiga OS version 3.1.
@endnode

@node "Installation" "Installation"

 INSTALLATION


 @{b}Requirements@{ub}
 
 About 211 kB of free disk space.

 @{b}How to install Binar on hard disk?@{ub}

 Copy directory Binar and its contents somewhere on your hard disk.

 @{b}How to test Binar without installing it?@{ub}

 Just double-click "BinarGUI" icon or execute the program Binar by using
 Shell.

 @{b}How to uninstall Binar?@{ub}

 Delete Binar directory from your hard disk.
@endnode

@node "Running" "Running Binar"

 RUNNING BINAR


 @{" " link "Running" 16} How to run Binar?
 @{" " link "Running" 24} How to list a machine language program?
 @{" " link "Running" 37} How to make hex dumps?
 @{" " link "Running" 49} How to list a non-CBM file?
 @{" " link "Running" 65} How to make partial disassembling?
 @{" " link "Running" 78} How to make partial hex dumps?
 @{" " link "Running" 95} How to create a plain ASCII source file?
 @{" " link "Running" 116} How to make a full (mixed) source code listing?
 @{" " link "Running" 123} How to determine machine language program's address space?
 @{" " link "Running" 138} How to relocate a file which is in CBM format?
 @{" " link "Running" 165} How to obtain extra information about a machine language program?

 @{b}How to run Binar?@{ub}

 Binar can be executed from Shell or WB through special GUI-front-end.

 @{" WB usage        " link "Usage" 4} Workbench usage.
 @{" CLI/Shell usage " link "Usage" 16} Command line usage.


 @{b}How to list a machine language program?@{ub}

 If you just want to list the contents of a machine language program file,
 Binar must be executed from Shell:

     1> Binar <file>

 where <file> is the name of the machine language program file of which
 contents you want to see.

 To learn how to modify disassembler's output, see @{"arguments" link "Arguments" 0}.


 @{b}How to make hex dumps?@{ub}

 To make a hex dump from a file, Binar must be executed from Shell with the
 HEXDUMP option:

     1> Binar <file> HEXDUMP

 where <file> is the name of the file from which you want to make a hex dump.

 To learn how to modify hex dump's output format, see @{"arguments" link "Arguments" 0}.


 @{b}How to list a non-CBM file?@{ub}

 Binar assumes that all files are in Commodore file format. If you view a 
 non-CBM file without telling this to Binar, you loose the first two bytes
 because they are interpreted as a loading address.

 By supplying the loading address, the whole file can be listed without
 loosing a single byte.
 
     1> Binar <file> LOAD=2000

 Parameter <file> is the name of the binary file you wish to list, and the
 loading address can be defined with LOAD argument. In this case, the code
 will start at the hexadecimal address of 2000.


 @{b}How to make partial disassembling?@{ub}

 You can make partial disassembling by supplying starting and/or ending
 addresses within the machine language program's address space.

 With the @{"STARTADDRESS" link "Arguments" 0} parameter you can specify the address where
 the disassembling begins, and with the @{"ENDADDRESS" link "Arguments" 0} where the disassembling
 ends.

 If you want to determine the ending address only, keyword ENDADDRESS or END
 is required before the hexadecimal address.


 @{b}How to make partial hex dumps?@{ub}

 You can make a partial hex dump by supplying HEXDUMP option with starting
 and/or ending addresses which are within the machine language program's
 address space.

     1> Binar <file> HEXDUMP STARTADDRESS=<hexaddress> ENDADDRESS=<hexaddress>

 With the @{"STARTADDRESS" link "Arguments" 0} parameter you can specify the address where
 the hex dump begins, and with the @{"ENDADDRESS" link "Arguments" 0} where the hex dump ends.

 If you want to determine the ending address only, keyword ENDADDRESS or END
 is required before the hexadecimal address.

     1> Binar <file> HEXDUMP ENDADDRESS=<hexaddress>


 @{b}How to create a plain ASCII source file?@{ub}

 The easiest way to create a plain ASCII source file from a machine language
 program file is to execute BinarGUI. You can find more information about
 BinarGUI from @{"here" link "Usage" 4}.

 If you prefer using Binar's Shell interface, you must redirect Binar's output
 to a file in order to create an ASCII source file.

 If you want to create an ASCII source file named "HelloWorld.asm" from the
 machine language program file "HELLOWORLD", type the following line in a
 Shell window:

     1> Binar >HelloWorld.asm HELLOWORLD

 The right angle bracket redirects the console output to the destination
 indicated by the bracket, in this case to the file "HelloWorld.asm".

 You can find more examples about disassembling and redirection from @{"here" link "Arguments" 0}.


 @{b}How to make a full (mixed) source code listing?@{ub}

 You can make a full source code listing containing both data (hex dumps) and
 code (disassembled code) blocks by using Souw and a deflector file. For more
 information on Souw and deflector files, see @{"Souw.guide" link "Souw.guide/main" 0}.


 @{b}How to determine machine language program's address space?@{ub}

 Execute Binar with a false starting or ending address:
 
     1> Binar HELLOWORLD ffffffff

 Binar replies with an "out of range" error message:

     Binar: start address out of range ($0600-$060B)

 Hexadecimal addresses in parenthesis ($0600-$060B) indicate the program's
 starting and ending addresses. Any address within or same as those addresses
 is inside the program's address space.


 @{b}How to relocate a file which is in CBM format?@{ub}

 At the beginning of a CBM file there are two bytes which indicate to which
 memory address the contents of the file should be loaded. If you want to
 relocate a file from its original memory location, e.g. from $1000 to $2000,
 the following parameters are required:

     1> Binar <file> LOAD=1ffe START=2000

 Parameter <file> is the name of the file which you wish to relocate. The
 loading address must be set to 1ffe (2000-2=1ffe) so that the two location
 bytes in the beginning of a CBM file will be assigned to memory addresses
 1ffe and 1fff. Parameter START will start disassembling from the memory
 address 2000 so that the location bytes assigned to addresses 1ffe and 1fff
 will not be disassembled.

 NOTE! Binar was not designed to perform code relocating. Relocation
 method presented here is just a result of a clever usage of LOAD and START
 arguments.
 While relocating, machine instructions containing references to the machine
 language program's address space are not modified in any way, i.e. the jump
 to the address $1010 stays as a jump to the address $1010 even when the code
 is relocated from its original $1000 location to $2000. The only exclusion
 are branch instructions which are relocated automatically due to the way they
 are implemented.


 @{b}How to obtain extra information about a machine language program?@{ub}

 By default, Binar displays a summary (as below) at the end of a
 disassembling process.

     SUMMARY

     LOCATION:           $0600-$060B (1536-1547)
     SIZE:               11 BYTES
     BLOCK:              $0600-$060B (1536-1547)
     BLOCK SIZE:         12 BYTES
     BRANCHES:           0
     JUMPS:              0
     SUBROUTINE CALLS:   0
     SUBROUTINES:        1
     INTERRUPT ROUTINES: 0
     TOTAL CODE LINES:   6

 In the summary you can see the memory location where the code is loaded, the
 size of the code in bytes, the disassembled block's starting and ending
 addresses, the disassembled block's size in bytes, as well as the number of
 branches, jumps, subroutine calls, subroutines, and interrupt routines within
 the block. The total number of code lines is also reported.

 When the @{"HEXDUMP" link "Arguments" 0} option is used, Binar produces a simpler summary at the end
 of the process.

     SUMMARY

     LOCATION:   $0600-$060B (1536-1547)
     SIZE:       11 BYTES
     BLOCK:      $0600-$060B (1536-1547)
     BLOCK SIZE: 12 BYTES

 As you can see from the example above, in the hex dump mode the number of
 branches, jumps, subroutine calls, subroutines, interrupt routines, or code
 lines are not presented.

 You can turn the summary feature off with the @{"NOSUMMARY" link "Arguments" 0} option.
@endnode

@node "Usage" "Usage"

 USAGE


 @{b}Workbench usage@{ub}

 Binar is a CLI-only program but it can be run from Workbench by using
 supplied GUI-front-end, BinarGUI.

 BinarGUI expands Binar with an interactive mode by which you are allowed to
 choose the machine language program file first and then save the disassembled
 ASCII-form source code into a file of your choice.

 Double-click "BinarGUI" icon to run Binar from Workbench.


 @{b}Command line usage@{ub}

 Open a CLI/Shell window, type Binar <file>, where <file> is the name of the
 file you want to disassemble, and press enter. If the command is successful,
 Binar starts to print disassembled code in the CLI/Shell window.

 If you wish to control the disassembling process, modify Binar's output, or
 save the produced code into a file, see @{"arguments" link "Arguments" 0} for more information.
@endnode

@node "Arguments" "Arguments"

 CLI ARGUMENTS


 @{b}Format@{ub}      Binar [FILE] <name> [LOADADDRESS|LOAD=<hex address>]
                   [STARTADDRESS|START=<hex address>] 
                   [ENDADDRESS|END=<hex address>] [HEXDUMP]
                   [NOUNDOCUMENTED] [NOPREFIX] [NOCODES] [NOINVERSE]
                   [NOCAPITALS] [NOSUMMARY]

 @{b}Template@{ub}    FILE/A,LOADADDRESS=LOAD/K,STARTADDRESS=START,
             ENDADDRESS=END,HEXDUMP/S,NOUNDOCUMENTED/S,NOPREFIX/S,NOCODES/S,
             NOINVERSE/S,NOCAPITALS/S,NOSUMMARY/S

 When the name (<name>) of the machine language program is supplied,
 Binar starts to disassemble the file in a shell window. Normally the whole
 file will be disassembled from the begining to the end but you can change the
 starting and ending points with STARTADDRESS and ENDADDRESS arguments, if
 necessary.

 STARTADDRESS and ENDADDRESS accept only hexadecimal values which are within
 the machine language program's address space. If any of the given addresses
 is out of the address space, Binar will point this out and show the
 acceptable range.

 If the machine language file is not in a Commodore file format, you have to
 define the loading address with LOADADDRESS argument which indicates from
 which memory address the code will start. When the loading address is
 supplied the first two bytes of the file will be interpreted as a part of the
 machine language program and not as location information as they are in
 Commodore files.

 By default, Binar disassembles in Commodore's TEDMON Monitor format. It
 prints disassembly addresses with assemble marks (prefixes), instructions'
 hexadecimal values, and the disassembled opcodes with operands.

 When HEXDUMP switch is supplied, Binar lists the file in Commodore TEDMON
 Monitor's memory display format, displaying the file's contents as
 hexadecimal values and they ASCII representations, if the values are
 printable.

 At the end of the disassembed code and the hex dump listing a program
 summary, containing statistical information about the program, will be
 displayed.

 You can change Binar's output by using the following options:

     NOUNDOCUMENTED    Do not disassemble undocumented opcodes.

     NOPREFIX          Hide the address prefix.

     NOCODES           Do not display hex values.

     NOINVERSE         Turn off the inverse-video display in the hex dump.

     NOCAPITALS        Do not use capital letters in the instructions or
                       hexadecimal values.

     NOSUMMARY         Do not display statistical information about the
                       program at the end of the listing.

 If you want to save the produced source code into a file, you must redirect
 Binar's output into a file. This can be done by using the right angle bracket
 (>) with the command.

 EXAMPLE 1:

     1> Binar HELLOWORLD@{bg fill} @{bg back}

 Disassembles the machine language file HELLOWORLD into a Shell window.

 EXAMPLE 2:

     1> Binar >HelloWorld.asm HELLOWORLD@{bg fill} @{bg back}

 Disassembles the machine language file HELLOWORLD and stores produced source
 code into the file HelloWorld.asm.

 EXAMPLE 3:

     1> Binar HELLOWORLD HEXDUMP@{bg fill} @{bg back}

 Creates a hex dump from the file HELLOWORLD into a Shell window.

 EXAMPLE 4:

     1> Binar >HelloWorld.hex HELLOWORLD HEXDUMP@{bg fill} @{bg back}

 Creates a hex dump from the file HELLOWORLD and stores the result into a file
 HelloWorld.hex.

 EXAMPLE 5:

     1> Binar HELLOWORLD 3a00 3fff NOSUMMARY@{bg fill} @{bg back}

 Disassembles the machine language file HELLOWORLD into a shell window,
 starting from the hexadecimal address 3a00 and ending to the address 3fff. No
 statistical information will be displayed.
@endnode

@node "FAQ" "Binar FAQ"

 FAQ


 Q: How can I distinguish between data blocks and code blocks?
 A: This has to be done manually. Disassemble the file and observe where the
    code ends and starts again.
    You can create a deflector file which instructs Souw in making a source
    code listing which is a mixture of data (hex dump) and code blocks. To
    learn more about creating full source code listings, see @{"Souw.guide" link "Souw.guide/main" 0} and
    the Punchy example in the Examples directory.

 Q: Can Binar give me the machine language program's execution address?
 A: No, it cannot. This is because the Commodore's file format sets
    limitations.
    Usually machine language files are located so that they start from the
    Basic text area, and at the beginning there is one line of Basic code
    containing a machine language subroutine call - the SYS command. When
    loaded from Basic, only RUN command is required to execute the machine
    language program. SYS command requires the starting address of the machine
    language subroutine. You can list the Basic code and get the address by
    using Basir. (Basir can be found from Aminet and [AMITY] web site.)
    If there is no Basic code at the beginning of the machine language
    program, there is no easy way of locating the execution address.
@endnode

@node "Limitations" "Software Problems/Limitations"

 SOFTWARE PROBLEMS/LIMITATIONS


 @{b}Problem reports@{ub}

 If you think Binar does not work as it is supposed to, please go to
 [AMITY]'s web page and fill in a bug report or send an email describing the
 problem.

   Web: http://members.surfeu.fi/amity
 EMail: amity@surfeu.fi


 @{b}Limitations@{ub}

 · non-symbolic disassembler
 · cannot distinguish between code blocks and data blocks
@endnode

@node "Future" "Future of Binar"

 FUTURE


 ·
@endnode

@node "History" "History"

 HISTORY


 25.08.2001 @{" 1.0 " link "History" 8} First release.
 08.06.2002 @{" 1.1 " link "History" 26} Second release.
 @{u}                                                                             @{uu}

 NAME    Binar

 VERSION 1.0

 DATE    25.08.2001

 COMMENT First release.

 NEW
  -

 CHANGED
  -

 REMOVED
  -
 @{u}                                                                             @{uu}

 NAME    Binar

 VERSION 1.1

 DATE    08.06.2002

 COMMENT Second release. Lots of internal improvements.

 NEW
  · argument LOADADDRESS
  · options HEXDUMP,  NOCAPITALS, NOINVERSE, and NOUNDOCUMENTED
  · support for raw binary files
  · can now make hex dumps
  · support for undocumented instructions can be turned off
  · inverse-video display in hex dump can be turned off
  · reports number of subroutines and number of interrupt routines
    in summary
  · error messages "unknown or missing argument",
    "load address out of range", and "address overflow"

 CHANGED
  · NOASMARK option renamed as NOPREFIX
  · missing line feed fixed when disassembling breaks unexpectedly
  · relative addressing bug fixed
  · JMP counter bug fixed
  · references to Apple and Atari 8-bit computers added to the
    guide

 REMOVED
  -
@endnode

@node "Support" "Support"

 SUPPORT


 For product support, please contact Binar's @{"author" link "Author" 0}.
@endnode

@node "Acknowledgements" "Acknowledgements"

 ACKNOWLEDGEMENTS


 Thanks to:

 · Joerg Riemer for bug reports, testing, and ideas
 · Ventzislav Tzvetkov for Atari and Apple notes
@endnode

@node "Author" "Author"

 AUTHOR


 Janne Peräaho

 Kurrenkuja 4 B 36
 90250 Oulu
 FINLAND 

 Email: amity@surfeu.fi
 WWW  : http://members.surfeu.fi/amity/
@endnode

