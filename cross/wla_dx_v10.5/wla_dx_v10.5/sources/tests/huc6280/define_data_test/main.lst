; WLALINK ($VER: wlalink 5.20 (23.6.2023)) listing file
; 2023-06-23 18:16:20

;Line Bank Slot PC   Offset Hex                             Source
                                                            
                                                            ;»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»
                                                            ; a small example testing different ways to define data with WLA
                                                            ; written by ville helin <ville.helin@iki.fi> in 2021
                                                            ;»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»
                                                            
                                                                    .memorymap
                                                                    defaultslot 0
                                                                    slotsize 2000h
                                                                    slot 0 $0000
                                                                    slot 1 0x2000
                                                                    slot 2 0x4000
                                                                    slot 3 6000h
                                                                    slot 4 $A000
                                                                    .endme
                                                            
                                                                    .rombankmap
                                                                    bankstotal 4
                                                                    banksize $2000
                                                                    banks 4
                                                                    .endro
                                                            
                                                            ;»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»
                                                            ; data definitions
                                                            ;»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»
                                                            
                                                                    .macro increment
                                                                    .redefine _out \1+1
                                                                    .endm
                                                            
                                                                    .bank 0 slot 0
                                                                    .org 0
                                                            
                                                            label_0:
                                                                    
   27 0000 0000 000A 000A   03                                      .section "TEST_01" FORCE KEEP
   37 0000 0000 0000 0000   30 31 3E                                .db "01>"
   27 0000 0000 0009 0009   02 
   38 0000 0000 0003 0003   01 02 03                                .db 1, 2, 3
   39 0000 0000 0006 0006   02 02 02                                .dsb 3, 2
   40 0000 0000 000B 000B   04                                      .dbm increment 1, 2, 3
   41 0000 0000 000C 000C   3C 30 31                                .db "<01"
                                                                    .ends
                                                            
                                                            label_f:
                                                                    
   27 0000 0000 0020 0020   03 00                                   .section "TEST_02" FORCE KEEP
   47 0000 0000 000F 000F   30 32 3E                                .db "02>"
   27 0000 0000 001E 001E   02 00 
   48 0000 0000 0012 0012   01 00 02 00 03 00                       .dw 1, 2, 3
   49 0000 0000 0018 0018   02 00 02 00 02 00                       .dsw 3, 2
   50 0000 0000 0022 0022   04 00                                   .dwm increment 1, 2, 3
   51 0000 0000 0024 0024   3C 30 32                                .db "<02"
                                                                    .ends
                                                                    
                                                            label_27:
                                                            
   27 0000 0000 003F 003F   03 00 00                                .section "TEST_03" FORCE KEEP
   57 0000 0000 0027 0027   30 33 3E                                .db "03>"
   27 0000 0000 003C 003C   02 00 00 
   58 0000 0000 002A 002A   01 00 00 02 00 00 03 00 00              .dl 1, 2, 3
   59 0000 0000 0033 0033   02 00 00 02 00 00 02 00 00              .dsl 3, 2
   60 0000 0000 0042 0042   04 00 00                                .dlm increment 1, 2, 3
   61 0000 0000 0045 0045   3C 30 33                                .db "<03"
                                                                    .ends
                                                                    
                                                            label_48:
                                                            
   27 0000 0000 0067 0067   03 00 00 00                             .section "TEST_04" FORCE KEEP
   67 0000 0000 0048 0048   30 34 3E                                .db "04>"
   27 0000 0000 0063 0063   02 00 00 00 
   68 0000 0000 004B 004B   01 00 00 00 02 00 00 00 03 00           .dd 1, 2, 3
00 00 
   69 0000 0000 0057 0057   02 00 00 00 02 00 00 00 02 00           .dsd 3, 2
00 00 
   70 0000 0000 006B 006B   04 00 00 00                             .ddm increment 1, 2, 3
   71 0000 0000 006F 006F   3C 30 34                                .db "<04"
                                                                    .ends
                                                                    
                                                            label_72:
                                                            
                                                                    .section "TEST_05" FORCE KEEP
   77 0000 0000 0072 0072   30 35 3E                                .db "05>"
   78 0000 0000 0075 0075   AA                                      .db $aa
   79 0000 0000 0076 0076   CC BB                                   .dw $bbcc
   80 0000 0000 0078 0078   FF EE DD                                .dl $ddeeff
   81 0000 0000 007B 007B   DD CC BB AA                             .dd $aabbccdd
   82 0000 0000 007F 007F   3C 30 35                                .db "<05"
                                                                    .ends
                                                                    
                                                                    .section "TEST_06" FORCE KEEP
   86 0000 0000 0082 0082   30 36 3E                                .db "06>"
   87 0000 0000 0085 0085   13                                      .db label_12+1
   88 0000 0000 0086 0086   35 12                                   .dw label_1234+1
   89 0000 0000 0088 0088   34 12 56                                .dl label_1234+$560000
   90 0000 0000 008B 008B   34 12 00 56                             .dd label_1234+$56000000
   91 0000 0000 008F 008F   3C 30 36                                .db "<06"
                                                                    .ends
                                                                    
                                                                    .section "TEST_07" FORCE KEEP
   95 0000 0000 0092 0092   30 37 3E                                .db "07>"
   96 0000 0000 0095 0095   FE                                      .dbm increment, $fd
   97 0000 0000 0096 0096   FE FF                                   .dwm increment, $fffd
   98 0000 0000 0098 0098   FE FF FF                                .dlm increment, $fffffd
   99 0000 0000 009B 009B   FE FF FF FF                             .ddm increment, $fffffffd
  100 0000 0000 009F 009F   3C 30 37                                .db "<07"
                                                                    .ends
                                                                    
                                                                    .section "TEST_08" FORCE KEEP
  104 0000 0000 00A2 00A2   30 38 3E                                .db "08>"
  105 0000 0000 00A5 00A5   01 02 03 AA BB CC DD EE FF              .hex "010203aaBBcc", "DDee", "FF"
  106 0000 0000 00AE 00AE   3C 30 38                                .db "<08"
                                                                    .ends
                                                                    
                                                                    .ASCIITABLE
                                                                      MAP "A" TO "Z" = 0
                                                                      MAP "!" = $90
                                                                    .ENDA
                                                            
                                                                    .section "TEST_09" FORCE KEEP
  115 0000 0000 00B1 00B1   30 39 3E                                .db "09>"
  116 0000 0000 00B4 00B4   02 00 01 02 90 00 01 00                 .ASC $43, "ABC!", $41, $42, 'A'
  117 0000 0000 00BC 00BC   43 00 01 02 90 41 42 41                 .ASCSTR $43, "ABC!", $41, $42, 'A'
  118 0000 0000 00C4 00C4   3C 30 39                                .db "<09"
                                                                    .ends
                                                            
                                                                    .org $12
                                                            label_12:
                                                            
                                                                    .org $1234
                                                            label_1234:
                                                            
                                                            ;»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»
                                                            ; label address tests
                                                            ;»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»        
                                                                    
                                                                    .org $100
                                                            
                                                                    .section "ManyNOPs" FORCE ; the size of this section is 13 ($0D) bytes
                                                            many_nops:
  135 0000 0000 0100 0100   EA                                      nop
  136 0000 0000 0101 0101   EA                                      nop
  137 0000 0000 0102 0102   EA                                      nop
  138 0000 0000 0103 0103   F0 FB                                   beq many_nops
  139 0000 0000 0105 0105   EA                                      nop
  140 0000 0000 0106 0106   EA                              @loop_1:nop
  141 0000 0000 0107 0107   EA                                      nop
  142 0000 0000 0108 0108   EA                                      nop
  143 0000 0000 0109 0109   F0 FB                                   beq @loop_1
  144 0000 0000 010B 010B   EA                                      nop
  145 0000 0000 010C 010C   EA                                      nop
                                                                    .ends
                                                            
                                                                    .section "BigDataSection" ; the size of this section is 7*16 ($70) bytes
  149 0000 0000 010D 010D   00 01 02 03 04 05 06 07 08 09   data_a: .db 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15
0A 0B 0C 0D 0E 0F 
  150 0000 0000 011D 011D   00 01 02 03 04 05 06 07 08 09   data_b: .db 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15
0A 0B 0C 0D 0E 0F 
  151 0000 0000 012D 012D   00 01 02 03 04 05 06 07 08 09   data_c: .db 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15
0A 0B 0C 0D 0E 0F 
  152 0000 0000 013D 013D   00 01 02 03 04 05 06 07 08 09   data_d: .db 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15
0A 0B 0C 0D 0E 0F 
  153 0000 0000 014D 014D   00 01 02 03 04 05 06 07 08 09   data_e: .db 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15
0A 0B 0C 0D 0E 0F 
  154 0000 0000 015D 015D   00 01 02 03 04 05 06 07 08 09   data_f: .db 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15
0A 0B 0C 0D 0E 0F 
  155 0000 0000 016D 016D   00 01 02 03 04 05 06 07 08 09   data_g: .db 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15
0A 0B 0C 0D 0E 0F 
                                                                    .ends
                                                            
                                                                    .section "LittleOne1" ; the size of this section is 5 ($05) bytes
                                                            little_one_1:
  160 0000 0000 00CC 00CC   EA                                      nop
  161 0000 0000 00CD 00CD   48 49 21                                .db "HI!"
  162 0000 0000 00D0 00D0   EA                                      nop
                                                                    .ends
                                                                    
                                                            label_182:
  166 0000 0000 0182 0182   31 30 3E                                .db "10>"
  167 0000 0000 0185 0185   82 01 00 00 0F 00 27 00 48 00           .dw label_182, label_0, label_f, label_27, label_48, label_72, label_196
72 00 96 01 
  168 0000 0000 0193 0193   3C 31 30                                .db "<10"
                                                                    
                                                                    .section "LittleOne2" returnorg ; the size of this section is 5 ($05) bytes
                                                            little_one_2:
  172 0000 0000 00C7 00C7   EA                                      nop
  173 0000 0000 00C8 00C8   59 4F 21                                .db "YO!"
  174 0000 0000 00CB 00CB   EA                                      nop
                                                                    .ends
                                                                    
                                                            label_196:
  178 0000 0000 0196 0196   EA                                      nop
  179 0000 0000 0197 0197   EA                                      nop
  180 0000 0000 0198 0198   F0 FC                                   beq label_196
  181 0000 0000 019A 019A   EA                                      nop
                                                            label_19b:
  183 0000 0000 019B 019B   31 31 3E                                .db "11>"
  184 0000 0000 019E 019E   96 01 9B 01                             .dw label_196, label_19b
  185 0000 0000 01A2 01A2   3C 31 31                                .db "<11"
                                                            
  187 0000 0000 01A5 01A5   31 32 3E                                .db "12>"
  188 0000 0000 01A8 01A8   FF FF FF FF AA AA AA AA                 .dd %11111111111111111111111111111111, %10101010101010101010101010101010
  189 0000 0000 01B0 01B0   FF FF FF FF AA AA AA AA                 .dd %11111111111111111111111111111111 - 0 + 0, %10101010101010101010101010101010 - 0 + 0
  190 0000 0000 01B8 01B8   00 FF 00 FF                             .dd %11111111111111111111111111111111 & %11111111000000001111111100000000
  191 0000 0000 01BC 01BC   FF FF FF FF                             .dd %11111111000000001111111100000000 | %00000000111111110000000011111111
  192 0000 0000 01C0 01C0   3C 31 32                                .db "<12"
                                                            
  194 0000 0000 01C3 01C3   31 33 3E                                .db "13>"
  195 0000 0000 01C6 01C6   FF FF FF FF AB AB AB AB                 .dd $fffffff0 + $f, $a0a0a0a0 | $0b0b0b0b
  196 0000 0000 01CE 01CE   67 45 23 11                             .dd 01234500h | 10000067h
  197 0000 0000 01D2 01D2   3C 31 33                                .db "<13"
                                                            
  199 0000 0000 01D5 01D5   31 34 3E                                .db "14>"
  200 0000 0000 01D8 01D8   CC DD EE FF CD DD EE FF 00 FF           .dd V1, V1+1, V2, V2 | $00ff00ff
00 FF FF FF FF FF 
  201 0000 0000 01E8 01E8   3C 31 34                                .db "<14"
                                                            
  203 0000 0000 01EB 01EB   31 35 3E                                .db "15>"
  204 0000 0000 01EE 01EE   04 03 02 01 05 03 02 01 AA AA           .dd V3, V3+1, V4, V4 + $01020304
AA AA AE AD AC AB 
  205 0000 0000 01FE 01FE   3C 31 35                                .db "<15"
                                                            
  207 0000 0000 0201 0201   31 36 3E                                .db "16>"
  208 0000 0000 0204 0204   78 56 34 12 F0 F0 F0 F0 04 03           .dd W1, W2, W3, W4
02 01 AA AA AA AA 
  209 0000 0000 0214 0214   3C 31 36                                .db "<16"
                                                            
  211 0000 0000 0217 0217   31 37 3E                                .db "17>"
  212 0000 0000 021A 021A   78 56 34 12 F1 F0 F0 F0                 .dd 0x12345678, 0b11110000111100001111000011110001
  213 0000 0000 0222 0222   44 33 22 11 0D 0C 0B 0A                 .dd 0x01020304 | 0x10203040, 0b11111111111111111111111111111111 & 0x0a0b0c0d
  214 0000 0000 022A 022A   3C 31 37                                .db "<17"
                                                                    
