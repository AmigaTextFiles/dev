                        ;
                        ; /\/\/\/\/\/\/\/\ TestInterrupts.asm: /\/\/\/\/\/\/\/
                        ;
                        
   0000                             ORG 0
   0000   c3 00 04                  JP      START
                        
   0008                             ORG 8
   0008   3e 08                     LD  A,8
   000a   ed 4d                     RETI
                                    
   0010                             ORG 10H
   0010   3e 10                     LD  A,10H
   0012   ed 4d                     RETI
                        
   0018                             ORG 18H
   0018   3e 18                     LD  A,18H
   001a   ed 4d                     RETI
                        
   0020                             ORG 20H
   0020   3e 20                     LD  A,20H
   0022   ed 4d                     RETI
                        
   0028                             ORG 28H
   0028   3e 28                     LD  A,28H
   002a   ed 4d                     RETI
                        
   0030                             ORG 30H
   0030   3e 30                     LD  A,30H
   0032   ed 4d                     RETI
                        
   0038                             ORG 38H
   0038   3e 38                     LD  A,38H
   003a   ed 4d                     RETI
                        
   0066                             ORG 66H
   0066   3e 66                     LD  A,66H
   0068   ed 45                     RETN
                        
   0400                             ORG   400H
   0400   f3            START       DI                   ; Let's see if the simulator can
   0401   3e 66                     LD    A,66H          ; process IM mode 2 interrupts 
   0403   ed 47                     LD    I,A            ; correctly.
   0405   31 ff ff                  LD    SP,0FFFFH      ; Needed for return values.
   0408   fb                        EI
   0409   ed 5e                     IM    2
   040b   76                        HALT
                        
   1ff0                             ORG     1FF0H
   1ff0   c3 00 04                  JP      START        ; In case something goes wrong!
                        
                        ; The I-Register is set to 66H by the START code, then the user has to
                        ; input 0, 10, 20, 30, or 40H in order to jump to the proper locations 
                        ; given below.  The Z80 will then jump to the proper code starting at
                        ; 0AA00H:
                        
   6600                             ORG     6600H
   6600   00                        DB  00
   6601   aa                        DB  0AAH
                        
   6610                             ORG     6610H
   6610   10                        DB  10H
   6611   aa                        DB  0AAH
                                    
   6620                             ORG     6620H
   6620   20                        DB  20H
   6621   aa                        DB  0AAH
                                    
   6630                             ORG     6630H
   6630   30                        DB  30H
   6631   aa                        DB  0AAH
                                    
   6640                             ORG     6640H
   6640   40                        DB  40H
   6641   aa                        DB  0AAH
                        ;
                        ;           IM 2 Interrupt routines:
                        ;
   aa00                             ORG     0AA00H            
   aa00   47                        LD  B,A
   aa01   ed 46                     IM  0
   aa03   af                        XOR A
   aa04   ed 4d                     RETI
                        
   aa10                             ORG     0AA10H
   aa10   47                        LD  B,A
   aa11   ed 56                     IM  1
   aa13   3e 01                     LD  A,1
   aa15   ed 4d                     RETI
                        
   aa20                             ORG     0AA20H
   aa20   47                        LD  B,A
   aa21   af                        XOR A
   aa22   ed 4d                     RETI
                        
   aa30                             ORG     0AA30H
   aa30   47                        LD  B,A
   aa31   af                        XOR A
   aa32   ed 4d                     RETI
                        
   aa40                             ORG     0AA40H
   aa40   c3 38 00                  JP 38H
                                    
   aa43                             END
0400  START         
