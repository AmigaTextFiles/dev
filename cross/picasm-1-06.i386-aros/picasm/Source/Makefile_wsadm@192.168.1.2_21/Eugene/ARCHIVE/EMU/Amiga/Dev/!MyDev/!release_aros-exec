#Makefile for picasm by Eugene aGGreSSor Sobolev

project = picasm
file_out = picasm
version = 0.2

CC=i386-aros-gcc    # gcc version 4.2.2
STRIP=i386-aros-strip --strip-unneeded --remove-section .comment
libs  = -lamiga
flags = -O2 -std=c99 

header = picasm.h pic16c84.h
c_files = picasm.c devices.c config.c token.c symtab.c expr.c pic12bit.c pic14bit.c
obj =  picasm.o devices.o config.o token.o symtab.o expr.o pic12bit.o pic14bit.o

all : ${file_out} ${header}

${file_out}: ${obj} 
	@echo "Linking!"
	${CC} ${flags} -g ${obj} ${libs} -o ../${file_out}
#	${STRIP} ../${file_out}
	@rm -f *.o

${obj}: ${c_files}
	@echo "Compiling!"
	${CC} ${flags} -c ${c_files}

clean: 
	@rm -f *.o ../C/${file_out}
	@echo "Deleting objects and output files"
	@echo "Objects: ${obj} | output file: ${file_out}

clear: clean