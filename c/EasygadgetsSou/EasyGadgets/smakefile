# ------------------------------
# SAS-C Makefile for EasyGadgets
# ------------------------------

LIBRARY = easygadgets.library
OBJ			= easygadgets.o
FLAGS2	=	STRINGMERGE NOSTACKCHECK NOSTANDARDIO NOSTACKEXT\
					DATA=NEAR NOVERSION LIBCODE SMALLCODE\
					SMALLDATA UTILLIB NOLINK MODIFIED COMMENTNEST \
#					DEBUG=LINE NOSTRIPDEBUG \
#					OPTIMIZE OPTSCHED STRIPDEBUG
FLAGS		=	STRIPDEBUG

all: pragmas copy easygadgets.o lib copylib

pragmas:
	fd2pragma EasyGadgets.fd SAS EasyGadgets_pragmas.h 

copy:
	copy EasyGadgets_protos.h	include:clib
	copy EasyGadgets_pragmas.h	include:pragmas
	copy EasyGadgets.h		include:libraries

easygadgets.o: easygadgets.c
	sc $(FLAGS) $*
	revco easygadgets REVISION
	rx rexx:newrev easygadgets_rev.h 

lib: easygadgets.o 
	slink WITH <<
	LIBFD EasyGadgets.fd 
	to easygadgets.library 
	FROM lib:libent.o lib:libinit.o easygadgets.o lib lib:sc.lib lib:amiga.lib
	noicons 
	SD SC
	WITH LibWith
<
	slink from easygadgets.library to libs:easygadgets.library ND noicons


link: easygadgets.o
	@sc NOLINK $*
	@oml -n lib:easygadgets.lib $*.o L
	@list lib:easygadgets.lib

copylib:
	copy easygadgets.library libs:
	copy libs:easygadgets.library rec:/libs
	copy libs:easygadgets.library xx:/
