@database Amiga_C_List.guide
@width 70

@node "Introduction" "Introduction"
@wordwrap

                         Amiga-C Mailing List Guide
                         ==========================

This guide is intended as an easy reference to the Amiga C mailing list.

It contains messages posted to the Amiga C mailing list during the month shown on the main page.

To subscribe to the Amiga C mailing list, search for amiga-c at Onelist.

http://www.onelist.com

This AmigaGuide was created using GuideMaker.rexx © Roger Light 1999
@endnode

@node "Main" "Amiga C Mailing List Guide"
                    @{b}Amiga C Mailing List Guide
                    ==========================@{ub}

                          Feb 2000

@{" Introduction " link Introduction } Introduction to the guide.

@{" Search " SYSTEM "RUN <>NIL: Searchguide FINAME"} Search this file (requres SearchGuide)

 ------------------------------------------------------------------- 

@{" Reaction listviews " Link "Mail_0"}      "Francis G. Loch"
@{" Deltadisplayer for sourcefiles " Link "Mail_1"}      Fritsch Alexander
@{" Linking PPC asm objects to compiled warpup objects " Link "Mail_2"}      Gabriele Svelto
@{" Re: Linking PPC asm objects to compiled warpup objects " Link "Mail_3"}      Nuno Trancoso
@{" Re: Screensavers " Link "Mail_4"}      Gabriele Svelto
@{" Re: Begginners-question regarding memory allocation " Link "Mail_5"}      Stephan Huebner
@{" Re: Begginners-question regarding memory allocation " Link "Mail_6"}      Stephan Huebner
@{" Re: Begginners-question regarding memory allocation (+attachments) " Link "Mail_7"}      Stephan Huebner
@{" RE: Multidimensional arrays & pointers " Link "Mail_8"}      roderick_maclean@agilent.com
@{" Re: Array access (was: PPC ASM linking) " Link "Mail_9"}      Stefan Schulze
@{" Re: Re: Linking PPC asm objects to compiled warpup objects " Link "Mail_10"}      Gregory Roberts II
@{" HUNK_LIB? " Link "Mail_11"}      Richard Drummond
@{" Re: Screensavers " Link "Mail_12"}      Tim Hanson
@{" Nasty Paula hacking " Link "Mail_13"}      Tim Hanson
@{" Re: Begginners-question regarding memory allocation " Link "Mail_14"}      Ilkka Lehtoranta
@{" Re: Nasty Paula hacking " Link "Mail_15"}      Ilkka Lehtoranta
@{" Re: Nasty Paula hacking " Link "Mail_16"}      Tim Hanson
@{" Re: Begginners-question regarding memory allocation (+attachments) " Link "Mail_17"}      roderick_maclean@agilent.com
@{" Re: Begginners-question regarding memory allocation (+attachments) " Link "Mail_18"}      Stephan Huebner
@{" Re: Re: Begginners-question regarding memory allocation (+attachments " Link "Mail_19"}      Duane McDonnell
@{" Re: Nasty Paula hacking " Link "Mail_20"}      Tim Hanson
@{" Re: Begginners-question regarding memory allocation (+attachments) " Link "Mail_21"}      roderick_maclean@agilent.com
@{" Pattern dither in Adobe Photoshop, how and what? " Link "Mail_22"}      "Alastair M. Robinson"
@{" RE: Hello there! I'm new here! " Link "Mail_23"}      "Nathan J. Young"
@{" Re: Begginners-question regarding memory allocation (+attachments) " Link "Mail_24"}      "Nathan J. Young"
@{" Re: Begginners-question regarding memory allocation " Link "Mail_25"}      "Nathan J. Young"
@{" Re: Hello there! I'm new here! " Link "Mail_26"}      Steffen
@{" Re: Nasty Paula hacking " Link "Mail_27"}      Ilkka Lehtoranta
@{" Re: Begginners-question regarding memory allocation " Link "Mail_28"}      Ilkka Lehtoranta
@{" Re: Nasty Paula hacking " Link "Mail_29"}      Tim Hanson
@{" Re: Begginners-question regarding memory allocation (+attachments) " Link "Mail_30"}      Stephan Huebner
@{" Re: Begginners-question regarding memory allocation (+attachments) " Link "Mail_31"}      Stephan Huebner
@{" Linking PPC asm objects to compiled warpup objects (before it drifted onto arrays) " Link "Mail_32"}      "Alastair M. Robinson"
@{" Source code to a TextEditor " Link "Mail_33"}      Charles Barr
@{" ImageManager.library (was: Re: Pattern dither in Adobe Photoshop, how and what?) " Link "Mail_34"}      Allan Odgaard
@{" Re: Source code to a TextEditor " Link "Mail_35"}      Nicholas Clarke
@{" Re: RE: Hello there! I'm new here! " Link "Mail_36"}      "Francis G. Loch"
@{" NList examples " Link "Mail_37"}      Charles Barr
@{" Compilers, Amiga-C, Beginner " Link "Mail_38"}      Kai Weber
@{" Help Needed with GetGadgetAttrs() !! " Link "Mail_39"}      amimjf@hotmail.com
@{" AW: Compilers, Amiga-C, Beginner " Link "Mail_40"}      Fritsch Alexander
@{" Re: Compilers, Amiga-C, Beginner " Link "Mail_41"}      Kai Weber
@{" Re: Source code to a TextEditor " Link "Mail_42"}      BlackMael
@{" Re: Compilers, Amiga-C, Beginner " Link "Mail_43"}      "Francis G. Loch"
@{" Passing paramters to functions " Link "Mail_44"}      Charles Barr
@{" Re: Compilers, Amiga-C, Beginner " Link "Mail_45"}      Dirk Harlaar
@{" Re: Help Needed with GetGadgetAttrs() !! " Link "Mail_46"}      Tim Hanson
@{" Re: Passing paramters to functions " Link "Mail_47"}      Colin Wenzel
@{" YAM PPC patch is a fake! (fwd) " Link "Mail_48"}      Tim Hanson
@{" CreateNewProc() " Link "Mail_49"}      Martyn Capewell
@{" Re: CreateNewProc() " Link "Mail_50"}      Andrew Bell
@{" Re: CreateNewProc() " Link "Mail_51"}      Martyn Capewell
@{" locale question " Link "Mail_52"}      Fritsch Alexander
@{" Re: locale question " Link "Mail_53"}      David McMinn
@{" Re: CreateNewProc() " Link "Mail_54"}      Andrew Bell
@{" More processes... " Link "Mail_55"}      andrewmarkwell@ukonline.co.uk
@{" Re: locale question " Link "Mail_56"}      Andrija Antonijevic
@{" RE: More processes... " Link "Mail_57"}      Jesper Svennevid
@{" Passing parameters to functions " Link "Mail_58"}      "Alastair M. Robinson"
@{" tooltypes... " Link "Mail_59"}      Alexander Niven-Jenkins
@{" Re: tooltypes...solved... " Link "Mail_60"}      Alexander Niven-Jenkins
@{" What's wrong with the following? " Link "Mail_61"}      Alexander Niven-Jenkins
@{" Paula access again " Link "Mail_62"}      Stefan Schulze
@{" Re: Paula access again " Link "Mail_63"}      Duane McDonnell
@{" Re: What's wrong with the following? " Link "Mail_64"}      Steven Solie
@{" Re: What's wrong with the following? " Link "Mail_65"}      Alexander Niven-Jenkins
@{" Re: What's wrong with the following? " Link "Mail_66"}      Alexander Niven-Jenkins
@{" wierd ml stuff " Link "Mail_67"}      Linus McCabe
@{" Non-blocking sockets, how? " Link "Mail_68"}      Allan Odgaard
@{" Re: Non-blocking sockets, how? " Link "Mail_69"}      David McMinn
@{" RE: Non-blocking sockets, how? " Link "Mail_70"}      Jesper Svennevid
@{" Re: Paula access again " Link "Mail_71"}      Colin Wenzel
@{" Re: Non-blocking sockets, how? " Link "Mail_72"}      Allan Odgaard
@{" RE: Re: Non-blocking sockets, how? " Link "Mail_73"}      Jesper Svennevid
@{" Re: Non-blocking sockets, how? " Link "Mail_74"}      Allan Odgaard
@{" Re: Non-blocking sockets, how? " Link "Mail_75"}      Allan Odgaard
@{" Superbitmaps " Link "Mail_76"}      andrewmarkwell@ukonline.co.uk
@{" Re: Passing parameters to functions " Link "Mail_77"}      Charles Barr
@{" dos.library Close() won't work! HELP! " Link "Mail_78"}      W1bBle
@{" Re: dos.library Close() won't work! HELP! " Link "Mail_79"}      Ilkka Lehtoranta
@{" Re: Re: Non-blocking sockets, how? " Link "Mail_80"}      David McMinn
@{" Re: Passing parameters to functions " Link "Mail_81"}      roderick_maclean@agilent.com
@{" Re: Passing parameters to functions " Link "Mail_82"}      Joar Sivertsen
@{" Posix fork() ing. " Link "Mail_83"}      amimjf@hotmail.com
@{" Re: dos.library Close() won't work! HELP! " Link "Mail_84"}      "Francis G. Loch"
@{" Re: Posix fork() ing. " Link "Mail_85"}      Stephen Illingworth
@{" Internet multiplayer support " Link "Mail_86"}      Tim Hanson
@{" [warpup] Internet multiplayer support " Link "Mail_87"}      Tim Hanson
@{" Re: Superbitmaps " Link "Mail_88"}      Tim Hanson
@{" Re: Posix fork() ing. " Link "Mail_89"}      GURER OZEN
@{" Re: dos.library Close() won't work! HELP! " Link "Mail_90"}      W1bBle
@{" Re: dos.library Close() won't work! HELP! " Link "Mail_91"}      Christian Hattemer
@{" Re: Posix fork() ing. " Link "Mail_92"}      Stephen Illingworth
@{" Multithreading + Math Libraries again " Link "Mail_93"}      "Alastair M. Robinson"
@{" RE: Superbitmaps " Link "Mail_94"}      andrewmarkwell@ukonline.co.uk
@{" Antwort: Re: Posix fork() ing. " Link "Mail_95"}      Raimund.Dold@bgt.de
@{" RE: Internet multiplayer support " Link "Mail_96"}      "Sealey, M."
@{" Re: Re: dos.library Close() won't work! HELP! " Link "Mail_97"}      "Francis G. Loch"
@{" Re: dos.library Close() won't work! HELP! " Link "Mail_98"}      W1bBle
@{" Re: Re: dos.library Close() won't work! HELP! " Link "Mail_99"}      "Francis G. Loch"
@{" Re: Re: dos.library Close() won't work! HELP! " Link "Mail_100"}      "Francis G. Loch"
@{" Hooks " Link "Mail_101"}      andrewmarkwell@ukonline.co.uk
@{" Re: Passing parameters to functions " Link "Mail_102"}      Olivier Fabre
@{" Re: Hooks " Link "Mail_103"}      Allan Odgaard
@{" Re: Internet multiplayer support " Link "Mail_104"}      Olivier Fabre
@{" Re: More processes... " Link "Mail_105"}      Andrew Bell
@{" Re: What's wrong with the following? " Link "Mail_106"}      Andrew Bell
@{" Re: Multithreading + Math Libraries again " Link "Mail_107"}      Gavin Kinsey
@{" Re: Multithreading + Math Libraries again " Link "Mail_108"}      Andrew Bell
@{" RE: Re: Multithreading + Math Libraries again " Link "Mail_109"}      "Sealey, M."
@{" RE: Hooks " Link "Mail_110"}      andrewmarkwell@ukonline.co.uk
@{" RE: More processes... " Link "Mail_111"}      andrewmarkwell@ukonline.co.uk
@{" Help needed with GT_GetGadgetAttrs() " Link "Mail_112"}      amimjf@hotmail.com
@{" dbplayer.library " Link "Mail_113"}      Stefan Schulze
@{" Re: Hooks " Link "Mail_114"}      Alexander Niven-Jenkins
@{" Re: Multithreading + Math Libraries again " Link "Mail_115"}      Alexander Niven-Jenkins
@{" RE: Re: Multithreading + Math Libraries again " Link "Mail_116"}      Jesper Svennevid
@{" Re: Paula access again " Link "Mail_117"}      Stefan Schulze
@{" Execute " Link "Mail_118"}      Mike Carter
@{" RE: Hooks " Link "Mail_119"}      andrewmarkwell@ukonline.co.uk
@{" Re: Multithreading + Math Libraries again " Link "Mail_120"}      Nuno Trancoso
@{" Re: Help needed with GT_GetGadgetAttrs() " Link "Mail_121"}      Andrew Bell
@{" Re: Hooks " Link "Mail_122"}      Andrew Bell
@{" Re: Execute " Link "Mail_123"}      Martyn Capewell
@{" Re: Execute " Link "Mail_124"}      BlackMael
@{" alternate entry points. " Link "Mail_125"}      amimjf@hotmail.com
@{" Close() still won't work    (was: dos.library Close() won't work! HELP!) " Link "Mail_126"}      W1bBle
@{" Re: Re: Paula access again " Link "Mail_127"}      Duane McDonnell
@{" Re: Close() still won't work    (was: dos.library Close() won't work! HELP!) " Link "Mail_128"}      Martyn Capewell
@{" RE: Re: Multithreading + Math Libraries again " Link "Mail_129"}      Duane McDonnell
@{" Re: Close() still won't work    (was: dos.library Close() won't work! HELP!) " Link "Mail_130"}      Colin Wenzel
@{" Re: Close() still won't work    (was: dos.library Close() won't work! " Link "Mail_131"}      Duane McDonnell
@{" Re: Close() still won't work    (was: dos.library Close() won't work! HELP!) " Link "Mail_132"}      Ilkka Lehtoranta
@{" Re: Close() still won't work - if you leave the brackets out! " Link "Mail_133"}      W1bBle
@{" Re: Multithreading + Math Libraries again " Link "Mail_134"}      Andrew Bell
@{" Re: Execute " Link "Mail_135"}      Mike Carter
@{" Multithreading + Math Libraries again " Link "Mail_136"}      "Alastair M. Robinson"
@{" Re: Multithreading + Math Libraries again " Link "Mail_137"}      Duane McDonnell
@{" Re: Graphics Mask " Link "Mail_138"}      Linus McCabe
@{" Re: Graphics Mask " Link "Mail_139"}      Linus McCabe
@{" Re: Multithreading + Math Libraries again " Link "Mail_140"}      James Adelman
@{" Re: Re: Multithreading + Math Libraries again " Link "Mail_141"}      Duane McDonnell
@{" Re: Graphics Mask " Link "Mail_142"}      Linus McCabe
@{" Joystick / Screen blanker! " Link "Mail_143"}      Lee Atkins
@{" Re: Joystick / Screen blanker! " Link "Mail_144"}      Alexander Niven-Jenkins
@{" deleting files " Link "Mail_145"}      Steven Dobbs
@{" string conversion question " Link "Mail_146"}      Steven Dobbs
@{" Re: string conversion question " Link "Mail_147"}      Laura Vance
@{" Re: deleting files " Link "Mail_148"}      Christian Hattemer
@{" Re: deleting files " Link "Mail_149"}      Steven Dobbs
@{" Re: string conversion question " Link "Mail_150"}      andrewmarkwell@ukonline.co.uk
@{" Re: string conversion question " Link "Mail_151"}      Martyn Capewell
@{" Re: string conversion question " Link "Mail_152"}      Andrew Ballard
@{" Re: string conversion question " Link "Mail_153"}      Tim Hanson
@{" Re: Re: string conversion question " Link "Mail_154"}      Laura Vance
@{" BOBs and GELs - variable framerate! " Link "Mail_155"}      "Alastair M. Robinson"
@{" g++ search paths " Link "Mail_156"}      Matthew Fletcher
@{" Re: g++ search paths " Link "Mail_157"}      Steffen
@{" Re: string conversion question " Link "Mail_158"}      Steffen
@{" Asm Code in dice . " Link "Mail_159"}      Charles Barr
@{" Graphics Mask " Link "Mail_160"}      Lee Atkins
@{" Re: Graphics Mask " Link "Mail_161"}      Allan Odgaard
@{" Re: g++ search paths " Link "Mail_162"}      Gavin Kinsey
@{" Re: Graphics Mask " Link "Mail_163"}      Steffen
@{" Re: Graphics Mask " Link "Mail_164"}      Steffen
@{" Re: Graphics Mask " Link "Mail_165"}      Allan Odgaard
@{" Re: Graphics Mask " Link "Mail_166"}      Steffen
@{" Re: Graphics Mask " Link "Mail_167"}      Allan Odgaard
@{" Missing Digests " Link "Mail_168"}      "Alastair M. Robinson"
@{" Re: Re: Graphics Mask " Link "Mail_169"}      Emanuele Cesaroni
@{" Re: Graphics Mask " Link "Mail_170"}      Allan Odgaard
@{" Re: Graphics Mask " Link "Mail_171"}      Allan Odgaard
@{" Re: Missing Digests " Link "Mail_172"}      Allan Odgaard
@{" Datatypes forever " Link "Mail_173"}      Jonas Hulten
@{" Re: Datatypes forever " Link "Mail_174"}      Allan Odgaard
@{" Re: Datatypes forever " Link "Mail_175"}      Jonas Hulten
@{" Re: Linking PPC asm objects to compiled warpup objects (before it drifted onto arrays) " Link "Mail_176"}      Gabriele Svelto
@{" Re: Datatypes forever " Link "Mail_177"}      Jonas Hulten
@{" Buffered ReadChunkBytes? " Link "Mail_178"}      Jonas Hulten
@{" Re: dos.library Close() won't work! HELP! " Link "Mail_179"}      tim@ramjam.u-net.com
@{" Re: dos.library Close() won't work! HELP! " Link "Mail_180"}      "Francis G. Loch"
@ENDNODE
@NODE "Mail_0" " Reaction listviews "
From: "Francis G. Loch" <fgloch@yahoo.com>
Date: 02-01-00 11:23:30
Subject: @{b}Reaction listviews@{ub}

From: "=?iso-8859-1?q?Francis=20G.=20Loch?=" <fgloch@yahoo.com>

Hi there,

Can anyone tell me how to put text into a Reaction
listview? I thought that I could just create one
(read-only) and use GA_Text to put text into it.
Alternatively, if anyone knows of a better way to have
a read-only message window using Reaction then I'm
open to suggestions.

Regards,

Francis.

=====
e-mail:- fgloch@yahoo.com
web-site:- http://www.geocities.com/fgloch
__________________________________________________
Do You Yahoo!?
Talk to your friends online with Yahoo! Messenger.
http://im.yahoo.com

@ENDNODE
@NODE "Mail_1" " Deltadisplayer for sourcefiles "
From: Fritsch Alexander <Alexander.Fritsch@icn.siemens.de>
Date: 02-01-00 12:12:47
Subject: @{b}Deltadisplayer for sourcefiles@{ub}

From: Fritsch Alexander <Alexander.Fritsch@icn.siemens.de>

Hello,
I am looking for a developement tool...

I have GeekGadgets Snapshot May98 installed and use CVS to save all my work.
Before checking in I run

cvs diff --side-by-side mysourcefile.c

or

cvs diff --side-by-side --suppress-common-lines mysourcefile.c

to see what I have done. That halps making a good check-in-comment. But is
there something more user-friendly for Amiga? Here in the company where I
work we use ClearCase and there is a tool ClearDiff. This display the
differences between the files much nicer. Differences have different colors.
I have a "Next Diff" button to jump directly to the next difference instead
of scrolling thru the (long) file...
For Windows there are some such tools, but what would you suggest for Amiga?

Kind regards Alexander Fritsch

@ENDNODE
@NODE "Mail_2" " Linking PPC asm objects to compiled warpup objects "
From: Gabriele Svelto <jlpicard@tiscalinet.it>
Date: 02-01-00 18:17:29
Subject: @{b}Linking PPC asm objects to compiled warpup objects@{ub}

From: Gabriele Svelto <jlpicard@tiscalinet.it>

 Hello everybody,
some time ago I decided to put some functions of a prog in asm and managed
easily to link them to the other objects (I used vbcc for compiling the
C code, AsmPro for the assembling and vlink for linking), the code
looked like this:

C code:

external void time_critical_func(int a, int b);

int main( void )
{
    (...)
    time_critical_func(c, d);
    (...)
}

Asm code:

    XDEF    _time_critical_func

_time_critical_func:
    (...code...)

Now, I wanted to recompile everythin' for warpos and translate the 68k
asm functions into ppc asm for linking, actually how do I do that? Which
registers I am allowed to use? Which must I save & retore at the end of
the function? And BTW can I call a PPC function from 68k code? I use
Frank Wille's Pasm for assembling PPC code. Thanks in advance

 Gabriele


@ENDNODE
@NODE "Mail_3" " Re: Linking PPC asm objects to compiled warpup objects "
From: Nuno Trancoso <ng13577a@netc.pt>
Date: 02-02-00 05:13:39
Subject: @{b}Re: Linking PPC asm objects to compiled warpup objects@{ub}

From: Nuno Trancoso <ng13577a@netc.pt>

Hya all

Sorry to bother you again with arrays stuff but it's so
badly documented i have no other resort :(( I thought
of using 2 dimensional arrays of my struct, but it
was no good, because the size of the array has to
be determined during runtime, so i turned to allocating
a memory block and using pointers.

See, the problem is, if i :

int x,y;

typedef struct {char r; char g; char b; char a;} rgba;

rgba *myrgbamatrix=NULL;

myrgbamatrix= (rgba *) malloc(x*y*sizeof(rgba))

Now, if i'm correct, myrgbamatrix points to a memory area
capable of holding x*y elements of type rgba, right?

Now comes the problem.

If myrgbamatrix was of type int/long/etc, i could acess the
elements with:

*(*(myrgbamatrix+j)+k)=somevalue; (at least i think it would work)

But myrgbamatrix is of type rgba, wich is a data structure with
several elements.

So, can anyone point me in the right direction? Is there anything
like "Multidimensional Arrays of structs for totally dumb people"?

Cya l8r,

DarkShadow
aka Nuno Trancoso
-- 
Infinity takes it's time.


@ENDNODE
@NODE "Mail_4" " Re: Screensavers "
From: Gabriele Svelto <jlpicard@tiscalinet.it>
Date: 02-02-00 10:52:41
Subject: @{b}Re: Screensavers@{ub}

From: Gabriele Svelto <jlpicard@tiscalinet.it>

 Hi mate,
> From: ddawn347@yahoo.com
> 
> Hi, all
> 
> First let me tell you, I'm not a computer programmer, but I have an
> idea for a screensaver and I would like to create it. I m not computer
> illiterate, if I can learn to write a macro I can learn anything
> (right?) of course.
>
> Is there a program I can use to teach me how to program a screensaver?
> Or maybe there s a class I can take to learn how to write a
> screensaver? Any advice would be highly appreciated
> Thanks

 Actually I think that you could learn by yourself, buy a good C
programming book, something like "The C Programming Language" from 
Kernigan & Ritchie or something else but try to avoid things like
"Visual C programming", that's Micro$oft crap. Get a good free compiler from
Aminet (vbcc or dice should be fine) and possibly buy the Developer's
CD and read the Rom Kernel Reference Manuals. Well, actually it could
take you some time but if you really want to start programming you have
to do that.
 See ya

 Gabriele


@ENDNODE
@NODE "Mail_5" " Re: Begginners-question regarding memory allocation "
From: Stephan Huebner <StephanHuebner@swol.de>
Date: 02-02-00 11:57:12
Subject: @{b}Re: Begginners-question regarding memory allocation@{ub}

From: Stephan Huebner <StephanHuebner@swol.de>

Hello Ilkka

On 31-Jan-00, you wrote:

> Get Amiga Developer CD...
> 
> There you can find includes & autodocs in AmigaGuide format.
> And lots of other developer material :)

Erm...I *have* the Developer CD, but I didn't see the autodocs in
AmigaGuide-format. (To be honest, I thought they would be only texts, so I
didn't search for them... :)


Greetings,

Stephan
-- 

Love: The only and satisfying answer to the existance of human being
-- Sigmund Freud



@ENDNODE
@NODE "Mail_6" " Re: Begginners-question regarding memory allocation "
From: Stephan Huebner <StephanHuebner@swol.de>
Date: 02-02-00 11:59:06
Subject: @{b}Re: Begginners-question regarding memory allocation@{ub}

From: Stephan Huebner <StephanHuebner@swol.de>

Hello roderick_maclean@agilent.com

On 31-Jan-00, you wrote:

>> Yeah, but I think I will need some kind of "identifier" for each
>> piece of memory.But Tim Hanson has kindly written some code-lines,
>> will have a deeper look on that and see if it solves the problem...
> 
> What happens internally is that each name you declare hooks up with
> a variable address. Your pointer variables will point to the data you
> want to store.

[snip]

> Good luck! I hope some of this made sense!

Yep, at least most of it... :) Many thanks.


Greetings,

Stephan
-- 

shape: something which everyone has, but which looks better on young women
-- Anonymous



@ENDNODE
@NODE "Mail_7" " Re: Begginners-question regarding memory allocation (+attachments) "
From: Stephan Huebner <StephanHuebner@swol.de>
Date: 02-02-00 12:06:22
Subject: @{b}Re: Begginners-question regarding memory allocation (+attachments)@{ub}

From: Stephan Huebner <StephanHuebner@swol.de>

Hello Nathan

On 30-Jan-00, you wrote:

>> That's nice, but I think I should be using Amiga-functions to avoid
>> problems.
> Problems? There should be no *real* problems - he says. :)

Don't know if I should believe that... :)

> If your database is to be an Amiga specific application then fine. But
> what are you going to do if you decide to support both AmigaOS and
> Neurtino or what-ever?

Rewrite the whole stuff? :)

>> Cool, another interesting method. But I think the linked-lists method is
>> the best one.
> Think about sorting and searching. These could become you're two biggest
> performance killers. Perhaps these suggestions might help you;
> 
> 1) When sorting your list, move the pointers instead of the actual nodes.

You mean: exchange the pointers for the previous/next-entries, yes?

> 3) Insert items in to your list in sorted order. This will make it
> un-necessary to sort the list unless you need to change the sort critera.

Yeah, good tip. But this way, each time the user adds a new entry, I would
have to resort the list, wouldn't I?

> 5) Oh yeah, have fun!

I try, believe me! :)

>> But even if it is only a small amount of memory it shouldn't be
>> necessary, so I think I'll try the linked-list method.
> It's not necessary! It was just an idea to improve the sorting speed of
> your database. Especially if you are going to do sorts on different fields
> often.

Might not happen too often. But then, you never know...

> Kind Regards
> Nathan

Thanks for the tips.


Greetings,

Stephan
-- 

map: A piece of paper which helps you to get lost
-- Anonymous



@ENDNODE
@NODE "Mail_8" " RE: Multidimensional arrays & pointers "
From: roderick_maclean@agilent.com
Date: 02-02-00 14:43:10
Subject: @{b}RE: Multidimensional arrays & pointers@{ub}

From: roderick_maclean@agilent.com

> typedef struct {char r; char g; char b; char a;} rgba;
> myrgbamatrix= (rgba *) malloc(x*y*sizeof(rgba))
>
> But myrgbamatrix is of type rgba, wich is a data structure with
> several elements. 

If you want to look at the data (I've not tested this but I think
it should work):



rgba *find_rgba(int max_y, int x, int y)
{
	rgba	*ptr;
	char	r, g, b, a;

/* Find the pointer to the particular instance of rgba: */
/* count (x*max_y)+y elements into the structure */
(void *)ptr = (myrgbmatrix + x*(max_y * sizeof(rgba)) + y*(sizeof(rgba));
return ptr;
}



/* in the main part you would declare */
rgba *ptr;

/* lookup */
ptr = find_rgba(y, j, k);

/* and then access */
r=ptr->r; g=ptr->g; b=ptr->b; a=ptr->a;


--
Rod MacLean                      | Roderick_MacLean@agilent.com
Developer - Agilent Technologies | +44 (0131) 331-7304
** My views do not necessarily reflect the views of Agilent! **


@ENDNODE
@NODE "Mail_9" " Re: Array access (was: PPC ASM linking) "
From: Stefan Schulze <stefan@dreamworlds.de>
Date: 02-02-00 15:24:52
Subject: @{b}Re: Array access (was: PPC ASM linking)@{ub}

From: Stefan Schulze <stefan@dreamworlds.de>

Hi Nuno, 

> rgba *myrgbamatrix=NULL;
> myrgbamatrix= (rgba *) malloc(x*y*sizeof(rgba))

> Now, if i'm correct, myrgbamatrix points to a memory area
> capable of holding x*y elements of type rgba, right?
Yes.

> Now comes the problem.

> If myrgbamatrix was of type int/long/etc, i could acess the
> elements with:

> *(*(myrgbamatrix+j)+k)=somevalue; (at least i think it would work)
No. Double reference won't work here as your struct does not contain a further
pointer. I would suggest instead:

*(myrgbamatrix + y*MatrixWidth + x).r = xyz; // writes the red value

or

uvw = (myrgbamatrix + y*MatrixWidth + x)->a; // Reads the alpha value

(don't forget to switch of YAM's text formattings to enable proper displaying)

> But myrgbamatrix is of type rgba, wich is a data structure with
> several elements.
All Cybervision boards use ARGB32, you might adapt your struct to it to enable
direct copying to gfxmem.

Bye, Stefan.
-- 
"The dream has led me - And i will follow into the glowing fire." (Lacrimosa)
Dreamworlds Development - www.dreamworlds.de

XFire I/II, YATAG, VoxelRace, Between The Lines




@ENDNODE
@NODE "Mail_10" " Re: Re: Linking PPC asm objects to compiled warpup objects "
From: Gregory Roberts II <gregr@mail.en.com>
Date: 02-02-00 16:53:37
Subject: @{b}Re: Re: Linking PPC asm objects to compiled warpup objects@{ub}

From: Gregory Roberts II <gregr@mail.en.com>


Hi

On Wed, 2 Feb 2000, Nuno Trancoso wrote:

> See, the problem is, if i :
> 
> int x,y;
> 
> typedef struct {char r; char g; char b; char a;} rgba;
> 
> rgba *myrgbamatrix=NULL;
> 
> myrgbamatrix= (rgba *) malloc(x*y*sizeof(rgba))
> 
> Now, if i'm correct, myrgbamatrix points to a memory area
> capable of holding x*y elements of type rgba, right?
> 

Yep.... do this type of thing all the time. :-)  However, to be more
correct (and to get the stuff below to work) you should do this:

rgba ** myrgbamatrix = NULL;

myrgbamatrix = (rgba **)malloc(x * y * sizeof(rgba));

The ** reflects that in reality you have an array of arrays.

> Now comes the problem.
> 

How about something like this:

myrgbamatrix[y][x].r = red;
myrgbamatrix[y][x].g = green;
myrgbamatrix[y][x].b = blue;
myrgbamatrix[y][x].a = alpha;

Where red, green, blue and alpha are all of type char.

Note that y and x appear to be swapped.  I find it helpful to think of 2-d
arrays as array[row][column] (which is how C does them) and then the
apparent swap of x and y should make sense.

Hopefully I haven't make any stupid mistakes. I don't have any actual code
where I've done this handy, but I pretty sure the malloc statement above
should work as written.

Good luck!
Greg

-- 
gregr@en.com
KC8BGC
Amiga Enthusiast  :)
IBM programmer    :(



@ENDNODE
@NODE "Mail_11" " HUNK_LIB? "
From: Richard Drummond <richard.drummond@futurenet.co.uk>
Date: 02-02-00 19:59:55
Subject: @{b}HUNK_LIB?@{ub}

From: "Richard Drummond" <richard.drummond@futurenet.co.uk>

Hello All

Does anybody know of a tool to convert HUNK_LIB link libraries to the usual
HUNK_UNIT type? Or does anybody know where I can find some information on
the HUNK_LIB format?

Cheers,
Rich
-- 
Richard Drummond
Staff Writer, Amiga Format

mailto: richard.drummond@futurenet.co.uk
pgp   : http://www.drummond.u-net.com/download/richards_key.asc
phone : +44 (0)1225 442244 ext 2417


@ENDNODE
@NODE "Mail_12" " Re: Screensavers "
From: Tim Hanson <msinister@connectfree.co.uk>
Date: 02-02-00 20:35:47
Subject: @{b}Re: Screensavers@{ub}

From: Tim Hanson <msinister@connectfree.co.uk>

Hi Gabriele 
Gabriele Svelto wrote this on 02-Feb-00 at 10:52:41
> From: Gabriele Svelto <jlpicard@tiscalinet.it>
> 
> Hi mate,
>> From: ddawn347@yahoo.com
>> 
>> Hi, all
>> 
>> First let me tell you, I'm not a computer programmer, but I have an
>> idea for a screensaver and I would like to create it. I m not computer
>> illiterate, if I can learn to write a macro I can learn anything
>> (right?) of course.
>> 
>> Is there a program I can use to teach me how to program a screensaver?
>> Or maybe there s a class I can take to learn how to write a
>> screensaver? Any advice would be highly appreciated
>> Thanks
>Get a good free compiler from
> Aminet (vbcc or dice should be fine) and possibly buy the Developer's

I recommend DICE for beginners. VBCC is great but I`m glad I knew a bit before
I tackled it.

-- 
      
Tim Hanson,
by the River,Canterbury, Kent.
Amiga A1200T,`040/25,603e/160,32MB Fast,BVisionPPC,
170MB IDE HD,ZIP SCSI,RENO x2CD SCSI,Pace 56K
Don`t waste  your time by visiting
http://www.sinister67.freeserve.co.uk



@ENDNODE
@NODE "Mail_13" " Nasty Paula hacking "
From: Tim Hanson <msinister@connectfree.co.uk>
Date: 02-02-00 21:23:55
Subject: @{b}Nasty Paula hacking@{ub}

From: Tim Hanson <msinister@connectfree.co.uk>


Hi All,

I lost my Hardware Ref manual in a recent house move. (Hope my old landlady
enjoys it. It should cover some of the owed rent if she can find a buyer :) 
) So please noone say RTFM. It won`t be a big problem as I intend to be an OS
friendly coder from now on. But...

Can anyone tell me the addresses of the HW registers for playing a sample and
remind me which one you have to load last to set the sound going? I promise
to make this a user option in any project I use it in. ;)


-- 
      
Tim Hanson,
by the River,Canterbury, Kent.
Amiga A1200T,`040/25,603e/160,32MB Fast,BVisionPPC,
170MB IDE HD,ZIP SCSI,RENO x2CD SCSI,Pace 56K
Don`t waste  your time by visiting
http://www.sinister67.freeserve.co.uk



@ENDNODE
@NODE "Mail_14" " Re: Begginners-question regarding memory allocation "
From: Ilkka Lehtoranta <iti@solutions.fi>
Date: 02-03-00 00:57:33
Subject: @{b}Re: Begginners-question regarding memory allocation@{ub}

From: Ilkka Lehtoranta <iti@solutions.fi>

Hello Stephan

On 02-Hel-00, you wrote:

SH> From: Stephan Huebner <StephanHuebner@swol.de>
SH> 
SH> Hello Ilkka
SH> 
SH> On 31-Jan-00, you wrote:
SH> 
SH>> Get Amiga Developer CD...
SH>> 
SH>> There you can find includes & autodocs in AmigaGuide format.
SH>> And lots of other developer material :)
SH> 
SH> Erm...I *have* the Developer CD, but I didn't see the autodocs in
SH> AmigaGuide-format. (To be honest, I thought they would be only texts, so
SH> I didn't search for them... :)

Go to ADCD_2.1:Reference/Includes_and_Autodocs_3.5/
Dunno about ADCD 1.1, in the directory "Reference" I guess.


@ENDNODE
@NODE "Mail_15" " Re: Nasty Paula hacking "
From: Ilkka Lehtoranta <iti@solutions.fi>
Date: 02-03-00 01:10:14
Subject: @{b}Re: Nasty Paula hacking@{ub}

From: Ilkka Lehtoranta <iti@solutions.fi>

Hello Tim

On 02-Hel-00, you wrote:

TH> I lost my Hardware Ref manual in a recent house move. (Hope my old
TH> landlady enjoys it. It should cover some of the owed rent if she can
TH> find a buyer :) ) So please noone say RTFM. It won`t be a big problem as
TH> I intend to be an OS friendly coder from now on. But...

ROM Kernel Manuals are available somewhere in the net (pirated copies?)
and on ADCD 2.1 too... :)

TH> Can anyone tell me the addresses of the HW registers for playing a
TH> sample and remind me which one you have to load last to set the sound
TH> going? I promise to make this a user option in any project I use it in.
TH> ;)

>From Include:hardware/custom.i

aud        EQU   $0A0
aud0        EQU   $0A0
aud1        EQU   $0B0
aud2        EQU   $0C0
aud3        EQU   $0D0

* AudChannel
ac_ptr        EQU   $00    ; ptr to start of waveform data
ac_len        EQU   $04    ; length of waveform in words
ac_per        EQU   $06    ; sample period
ac_vol        EQU   $08    ; volume
ac_dat        EQU   $0A    ; sample pair
ac_SIZEOF   EQU   $10

Btw. if direct use of Paula is an optional, it is not bad.
But if you don't support AHI, it is too bad :-)

@ENDNODE
@NODE "Mail_16" " Re: Nasty Paula hacking "
From: Tim Hanson <msinister@connectfree.co.uk>
Date: 02-03-00 08:14:00
Subject: @{b}Re: Nasty Paula hacking@{ub}

From: Tim Hanson <msinister@connectfree.co.uk>

Hi Ilkka 
Ilkka Lehtoranta wrote this on 03-Feb-00 at 01:10:14

> Btw. if direct use of Paula is an optional, it is not bad.
> But if you don't support AHI, it is too bad :-)

That`s exactly what I`m doing. It`s a PPC(WarpUP) project and I`d like the
option of avoiding the context switch. The AHI code causes the occasional
glitchy slow down.

-- 
      
Tim Hanson,
by the River,Canterbury, Kent.
Amiga A1200T,`040/25,603e/160,32MB Fast,BVisionPPC,
170MB IDE HD,ZIP SCSI,RENO x2CD SCSI,Pace 56K
Don`t waste  your time by visiting
http://www.sinister67.freeserve.co.uk



@ENDNODE
@NODE "Mail_17" " Re: Begginners-question regarding memory allocation (+attachments) "
From: roderick_maclean@agilent.com
Date: 02-03-00 14:44:04
Subject: @{b}Re: Begginners-question regarding memory allocation (+attachments)@{ub}

From: roderick_maclean@agilent.com

> > 3) Insert items in to your list in sorted order. This will make it
> > un-necessary to sort the list unless you need to change the 
> sort critera.
> 
> Yeah, good tip. But this way, each time the user adds a new 
> entry, I would
> have to resort the list, wouldn't I?

No, the worst you would have to do would be to traverse the list.
You stop when you know where in the list you've got to add the
item and then re-arrange all the appropriate pointers.

If traversing the list causes major performance issues
then consider some other data structure (a tree or something?)

--
Rod MacLean                      | Roderick_MacLean@agilent.com
Developer - Agilent Technologies | +44 (0131) 331-7304
** My views do not necessarily reflect the views of Agilent! **


@ENDNODE
@NODE "Mail_18" " Re: Begginners-question regarding memory allocation (+attachments) "
From: Stephan Huebner <StephanHuebner@swol.de>
Date: 02-03-00 22:17:36
Subject: @{b}Re: Begginners-question regarding memory allocation (+attachments)@{ub}

From: Stephan Huebner <StephanHuebner@swol.de>

Hello roderick_maclean@agilent.com

On 03-Feb-00, you wrote:

> No, the worst you would have to do would be to traverse the list.
> You stop when you know where in the list you've got to add the
> item and then re-arrange all the appropriate pointers.

Yeah, I can see that that would probably be much faster than resorting the
whole list.

> If traversing the list causes major performance issues
> then consider some other data structure (a tree or something?)

Although I'm not that experienced, I'd think that it wouldn't cause really
*big* performance problems.

Greetings,

Stephan
-- 

Gentleman: A man who protects a women against all other men
-- Anonymous



@ENDNODE
@NODE "Mail_19" " Re: Re: Begginners-question regarding memory allocation (+attachments "
From: Duane McDonnell <dmcdonnell@primus.com.au>
Date: 02-04-00 01:32:31
Subject: @{b}Re: Re: Begginners-question regarding memory allocation (+attachments@{ub}

From: Duane McDonnell <dmcdonnell@primus.com.au>

>From: roderick_maclean@agilent.com

>> > 3) Insert items in to your list in sorted order. This will make it
>> > un-necessary to sort the list unless you need to change the 
>> sort critera.
>> 
>> Yeah, good tip. But this way, each time the user adds a new 
>> entry, I would
>> have to resort the list, wouldn't I?

>No, the worst you would have to do would be to traverse the list.
>You stop when you know where in the list you've got to add the
>item and then re-arrange all the appropriate pointers.

>If traversing the list causes major performance issues
>then consider some other data structure (a tree or something?)

Also check out the "skip list" algorithm. There's an implementation
on Aminet which cites the paper where the algorithm is described
(check dev/c/SkipListLib.lha). An extract from the .readme follows:

"...lets you have the flexiblity of linked lists with the sorting
ability of arrays, without the fixed size problems of arrays or
slow (linear) sorting speed of lists."

I haven't experimented with this algorithm before, it would be
interesting to see how it performs when compared to the dual
sort array/linked list designs (already described by others here)
commonly employed in databases.


@ENDNODE
@NODE "Mail_20" " Re: Nasty Paula hacking "
From: Tim Hanson <msinister@connectfree.co.uk>
Date: 02-04-00 12:39:45
Subject: @{b}Re: Nasty Paula hacking@{ub}

From: Tim Hanson <msinister@connectfree.co.uk>

Hi Ilkka 
Ilkka Lehtoranta wrote this on 03-Feb-00 at 01:10:14
> From: Ilkka Lehtoranta <iti@solutions.fi>
> 
> Hello Tim
> 
> On 02-Hel-00, you wrote:
> 
>> I lost my Hardware Ref manual in a recent house move. (Hope my old
>> landlady enjoys it. It should cover some of the owed rent if she can
>> find a buyer :) ) So please noone say RTFM. It won`t be a big problem as
>> I intend to be an OS friendly coder from now on. But...
> 
> ROM Kernel Manuals are available somewhere in the net (pirated copies?)
> and on ADCD 2.1 too... :)
> 
>> Can anyone tell me the addresses of the HW registers for playing a
>> sample and remind me which one you have to load last to set the sound
>> going? I promise to make this a user option in any project I use it in.
>> ;)
> 
>> From Include:hardware/custom.i
> 
> aud        EQU   $0A0
> aud0        EQU   $0A0
> aud1        EQU   $0B0
> aud2        EQU   $0C0
> aud3        EQU   $0D0
> 
> * AudChannel
> ac_ptr        EQU   $00    ; ptr to start of waveform data
> ac_len        EQU   $04    ; length of waveform in words
> ac_per        EQU   $06    ; sample period
> ac_vol        EQU   $08    ; volume
> ac_dat        EQU   $0A    ; sample pair
> ac_SIZEOF   EQU   $10

DOH ! I should have thought of looking at hardware/custom.h

Hmm. I thought I remebered how to do this more or less but I can`t get it to
work. I thought you just had to load the registers and off it went. Something
like this:

extern struct Custom custom;

...

custom.aud[0].ac_ptr=sampledata;
custom.aud[0].ac_per=frequency;
custom.aud[0].ac_vol=64;
custom.aud[0].ac_len=length;

and as soon as you load ac_len, off it went.
Unfortunately I`m getting no sound at all. Anyone know how to do this? or
where I can find example source in C or ASM.

-- 
      
Tim Hanson,
by the River,Canterbury, Kent.
Amiga A1200T,`040/25,603e/160,32MB Fast,BVisionPPC,
170MB IDE HD,ZIP SCSI,RENO x2CD SCSI,Pace 56K
Don`t waste  your time by visiting
http://www.sinister67.freeserve.co.uk



@ENDNODE
@NODE "Mail_21" " Re: Begginners-question regarding memory allocation (+attachments) "
From: roderick_maclean@agilent.com
Date: 02-04-00 15:05:59
Subject: @{b}Re: Begginners-question regarding memory allocation (+attachments)@{ub}

From: roderick_maclean@agilent.com

> > If traversing the list causes major performance issues
> > then consider some other data structure (a tree or something?)
> 
> Although I'm not that experienced, I'd think that it wouldn't 
> cause really *big* performance problems.

If you've sorted the list by surname and suddenly you want to
cross reference your list against some other data structures
to find matches on age (say).

You don't really want to do the following

A=age_list     your other list

item 1         check every item to compare to item A1...
               (and then storing the matches)
item 2         check every item to compare to item A2...
               (and then storing the matches)
...
item 5000      (you've fallen asleep by now)


It's technically possible to have the list sorted
*in*two*different*orders* just by having another list
of pointers to the lists data.

It's the sort of thing that is really simplified in C++.
(generic storage object with two (or more) access objects.
If you tried this in C you'd probably end up with 'spaghetti
pointers' including ones that point to memory which you've
already cleared...

Before you construct your database, you should really
spend some time thinking about which types of datastructures
you want to use.

Hope this helps!

	Rod

--
Rod MacLean                      | Roderick_MacLean@agilent.com
Developer - Agilent Technologies | +44 (0131) 331-7304
** My views do not necessarily reflect the views of Agilent! **


@ENDNODE
@NODE "Mail_22" " Pattern dither in Adobe Photoshop, how and what? "
From: "Alastair M. Robinson" <blackfive@fakenhamweb.co.uk>
Date: 02-04-00 15:41:48
Subject: @{b}Pattern dither in Adobe Photoshop, how and what?@{ub}

From: "Alastair M. Robinson" <blackfive@fakenhamweb.co.uk>

Hi Allan,

>> I've not used PhotoShop myself, but I seem to remember reading (and it has
>> been known for my memory to play tricks on me!) that Adobe hold a patent
>> on one of PhotoShop's dither methods.  The term 'pattern dither' rings a
>> bell, so it could well have been this one.

> Did the article mention their technique? I believe that if they have a patent
> then they must have published the method in one way or another...

The article was (I think) in Amiga Shopper, and was just about the evils of
software patents.  It was published shortly after the GIF fiasco, but no,
there were no details of the actual method.  I suppose one of those
patent sites like http://www.patents.ibm.com might help out, but I
suspect it'll be like looking for a needle in a haystack.

>> Is this query just out of interest, or do you need a dither method
>> yourself?  If so, I might be able to help out.
>I'm author of ImageManager.library which currently offers random, ordered and
>FS dither, but I'm always interested in new schemes if they're any good :-)

Hmmm.  ImageManager sounds interesting.   I couldn't find any reference to
it on Aminet, except for fd and lib files in PMM.  What does it do, and
where can it be obtained?

All the best,
-- 
Alastair M. Robinson, email:blackfive@fakenhamweb.co.uk

If all else fails, immortality can always be assured by spectacular error.


@ENDNODE
@NODE "Mail_23" " RE: Hello there! I'm new here! "
From: "Nathan J. Young" <nathan.young@bigfoot.com>
Date: 02-04-00 18:07:16
Subject: @{b}RE: Hello there! I'm new here!@{ub}

From: "Nathan J. Young" <nathan.young@bigfoot.com>

Hi Francis,

> Hi there,
> 
> I've just joined this list and I am just saying my hellos to you all.
> 
> Kinds regards,
> 
> Francis.

Ah! A message I can reply to!

Hello and welcome to the hotel Amiga, err... I hope you enjoy you stay. :)

Kind regards
Nathan


@ENDNODE
@NODE "Mail_24" " Re: Begginners-question regarding memory allocation (+attachments) "
From: "Nathan J. Young" <nathan.young@bigfoot.com>
Date: 02-04-00 18:23:55
Subject: @{b}Re: Begginners-question regarding memory allocation (+attachments)@{ub}

From: "Nathan J. Young" <nathan.young@bigfoot.com>

Hi Stephan,

>> 1) When sorting your list, move the pointers instead of the actual nodes.
> 
> You mean: exchange the pointers for the previous/next-entries, yes?
Yes! Sorry I didn't explain that better; must have been tired or something!

It should prove to be a quicker method. Especially if the data you are storing in your node is on the large size.

>> 3) Insert items in to your list in sorted order. This will make it
>> un-necessary to sort the list unless you need to change the sort critera.
> 
> Yeah, good tip. But this way, each time the user adds a new entry, I would
> have to resort the list, wouldn't I?
Looking at my inbox, I see there is already a reply to this; things move quickly on this list. :)

> Thanks for the tips.
You're welcome! I hope they are of some help.

Regards
Nathan


@ENDNODE
@NODE "Mail_25" " Re: Begginners-question regarding memory allocation "
From: "Nathan J. Young" <nathan.young@bigfoot.com>
Date: 02-04-00 19:02:14
Subject: @{b}Re: Begginners-question regarding memory allocation@{ub}

From: "Nathan J. Young" <nathan.young@bigfoot.com>

Hello Ilkka,

>> Erm...I *have* the Developer CD, but I didn't see the autodocs in
>> AmigaGuide-format. (To be honest, I thought they would be only texts, so
>> I didn't search for them... :)
> 
> Go to ADCD_2.1:Reference/Includes_and_Autodocs_3.5/
> Dunno about ADCD 1.1, in the directory "Reference" I guess.
I only have the V1.1 CD, so I thought I would send in the the includes and autodocs path for the that version;

Amiga_Dev_CD_v1.1:REFERENCE/INCLUDES_&_AUTODOCS/

Regards
Nathan


@ENDNODE
@NODE "Mail_26" " Re: Hello there! I'm new here! "
From: Steffen <steffen.mars@stenloese.mail.telia.com>
Date: 02-04-00 22:30:47
Subject: @{b}Re: Hello there! I'm new here!@{ub}

From: Steffen <steffen.mars@stenloese.mail.telia.com>

On 04-Feb-00, Nathan J. Young wrote:

> From: "Nathan J. Young" <nathan.young@bigfoot.com>
> 
> Hi Francis,
> 
>> Hi there,
>> 
>> I've just joined this list and I am just saying my hellos to you all.
>> 
>> Kinds regards,
>> 
>> Francis.
> 
> Ah! A message I can reply to!
> 
> Hello and welcome to the hotel Amiga, err... I hope you enjoy you stay. :)
> 
> Kind regards
> Nathan

Yeah,
you can check-out any time you want, but you can never leave.

:*Q



@ENDNODE
@NODE "Mail_27" " Re: Nasty Paula hacking "
From: Ilkka Lehtoranta <iti@solutions.fi>
Date: 02-04-00 22:42:58
Subject: @{b}Re: Nasty Paula hacking@{ub}

From: Ilkka Lehtoranta <iti@solutions.fi>

Hello Tim

On 04-Hel-00, you wrote:

TH> Hmm. I thought I remebered how to do this more or less but I can`t get
TH> it to work. I thought you just had to load the registers and off it
TH> went. Something like this:
TH> 
TH> extern struct Custom custom;
TH> 
TH> ...
TH> 
TH> custom.aud[0].ac_ptr=sampledata;
TH> custom.aud[0].ac_per=frequency;
TH> custom.aud[0].ac_vol=64;
TH> custom.aud[0].ac_len=length;

You must enable audio DMA.

TH> and as soon as you load ac_len, off it went. Unfortunately I`m getting
TH> no sound at all. Anyone know how to do this? or where I can find example
TH> source in C or ASM.

Didn't you looked to sinewave.asm which I attached with my mail?
But here we go, attached source file contained this line:
    MOVE.W  #(DMAF_SETCLR!DMAF_AUD0!DMAF_MASTER),DMACON(a0)

(enables audio DMA for channel 0...)


@ENDNODE
@NODE "Mail_28" " Re: Begginners-question regarding memory allocation "
From: Ilkka Lehtoranta <iti@solutions.fi>
Date: 02-04-00 22:52:40
Subject: @{b}Re: Begginners-question regarding memory allocation@{ub}

From: Ilkka Lehtoranta <iti@solutions.fi>

Hello Nathan

On 04-Hel-00, you wrote:

NY>>> Erm...I *have* the Developer CD, but I didn't see the autodocs in
NY>>> AmigaGuide-format. (To be honest, I thought they would be only texts,
NY>>> so I didn't search for them... :)
NY>> 
NY>> Go to ADCD_2.1:Reference/Includes_and_Autodocs_3.5/
NY>> Dunno about ADCD 1.1, in the directory "Reference" I guess.
NY> I only have the V1.1 CD, so I thought I would send in the the includes
NY> and autodocs path for the that version;
NY> 
NY> Amiga_Dev_CD_v1.1:REFERENCE/INCLUDES_&_AUTODOCS/

Almost forgotted mention those hidden *easter egg*s located on both CDs...
And I'm not going to tell where they are ;-)


@ENDNODE
@NODE "Mail_29" " Re: Nasty Paula hacking "
From: Tim Hanson <msinister@connectfree.co.uk>
Date: 02-05-00 12:37:08
Subject: @{b}Re: Nasty Paula hacking@{ub}

From: Tim Hanson <msinister@connectfree.co.uk>

Hi Ilkka 
Ilkka Lehtoranta wrote this on 04-Feb-00 at 22:42:58
> From: Ilkka Lehtoranta <iti@solutions.fi>
> 
> Hello Tim
> 
> On 04-Hel-00, you wrote:

> Didn't you looked to sinewave.asm which I attached with my mail?

Sorry mate. I`m going blind in my old age.

-- 
      
Tim Hanson,
by the River,Canterbury, Kent.
Amiga A1200T,`040/25,603e/160,32MB Fast,BVisionPPC,
170MB IDE HD,ZIP SCSI,RENO x2CD SCSI,Pace 56K
Don`t waste  your time by visiting
http://www.sinister67.freeserve.co.uk



@ENDNODE
@NODE "Mail_30" " Re: Begginners-question regarding memory allocation (+attachments) "
From: Stephan Huebner <StephanHuebner@swol.de>
Date: 02-05-00 18:47:54
Subject: @{b}Re: Begginners-question regarding memory allocation (+attachments)@{ub}

From: Stephan Huebner <StephanHuebner@swol.de>

Hello roderick_maclean@agilent.com

On 04-Feb-00, you wrote:

> It's the sort of thing that is really simplified in C++.
> (generic storage object with two (or more) access objects.
> If you tried this in C you'd probably end up with 'spaghetti
> pointers' including ones that point to memory which you've
> already cleared...
> 
> Before you construct your database, you should really
> spend some time thinking about which types of datastructures
> you want to use.
> 
> Hope this helps!

Uhm..not completely, as I haven't much knowledge about C++. :-/


Greetings,

Stephan
-- 

Friend: someone who knocks on my door when the whole world has left me
-- Anonymous



@ENDNODE
@NODE "Mail_31" " Re: Begginners-question regarding memory allocation (+attachments) "
From: Stephan Huebner <StephanHuebner@swol.de>
Date: 02-05-00 18:50:37
Subject: @{b}Re: Begginners-question regarding memory allocation (+attachments)@{ub}

From: Stephan Huebner <StephanHuebner@swol.de>

Hello Nathan

On 04-Feb-00, you wrote:

>> You mean: exchange the pointers for the previous/next-entries, yes?
> Yes! Sorry I didn't explain that better; must have been tired or
> something!

No problem. I just wanted to be sure to understand exactly what is meant.

> It should prove to be a quicker method. Especially if the data you are
> storing in your node is on the large size.

Well, that depends on how big the things are the user wants to store... :)

>> Yeah, good tip. But this way, each time the user adds a new entry, I
>> would have to resort the list, wouldn't I?
> Looking at my inbox, I see there is already a reply to this; things move
> quickly on this list. :)

Yeah, I saw that. Just wanted to mention it :)

>> Thanks for the tips.
> You're welcome! I hope they are of some help.

I'm sure they are (at least when I find the time to try out everything I
heard here :) ).


Greetings,

Stephan
-- 

breakers on hawaii: One third water and two third people
-- Bob Hope



@ENDNODE
@NODE "Mail_32" " Linking PPC asm objects to compiled warpup objects (before it drifted onto arrays) "
From: "Alastair M. Robinson" <blackfive@fakenhamweb.co.uk>
Date: 02-05-00 23:56:41
Subject: @{b}Linking PPC asm objects to compiled warpup objects (before it drifted onto arrays)@{ub}

From: "Alastair M. Robinson" <blackfive@fakenhamweb.co.uk>

Hi Gabriele,

> Now, I wanted to recompile everythin' for warpos and translate the 68k
> asm functions into ppc asm for linking, actually how do I do that? Which
> registers I am allowed to use? Which must I save & retore at the end of
> the function? And BTW can I call a PPC function from 68k code? I use
> Frank Wille's Pasm for assembling PPC code. Thanks in advance

The powerpc.library has a RunPPC function which can be used from 68k code. 
If you haven't got the WarpOS documentation, get it.  You could also have a
peep at the VBCC-WarpOS startup-code source.

I would recommend that you write your time-critical function in C (or maybe
some simpler toy functions), compile it with vc -S +warpos and study the
PPC .asm file which results.

What I do when it comes to linking, is to use vc -c to create .o files for
all source files (this works for both C and asm), then vc #?.o to link them.

C code compiled for PPC is usually much more efficient than compiled 68k
code, and hand-optimised assembler won't give anything like the speedup
you're used to from 68k programming.  Since this is the Amiga-C list, I
recommend you do as much as possible in C!

As for registers, don't use r1 (the stack pointer) or r2 (the base
pointer), and unless you understand its special functions, don't use
r0 either!  r3 is used for library bases, like a6 on 68k, r13 is a local
stack pointer, and r13-r31 have to be restored if your program changes them.

If you've not seen them already, get Steffen Haeuser's docs from
Aminet:dev/misc/ppcpack.lha.  They contain a lot of information, though some
of it's StormC/StormPowerASM oriented.

All the best,
-- 
Alastair M. Robinson, email:blackfive@fakenhamweb.co.uk
Amiga 4000/030, 18Meg RAM, 4.3Gig HD, Mustek ScanExpress 6000SP
C, Assembler (68k, PIC16C84, learning ATMEL AVR), PostScript,
ARexx, AMOSPro(!), AmigaDOS

Cat: Fast, psychotic animal bred for target practice.


@ENDNODE
@NODE "Mail_33" " Source code to a TextEditor "
From: Charles Barr <charlie@amigaforever.free-online.co.uk>
Date: 02-06-00 12:39:30
Subject: @{b}Source code to a TextEditor@{ub}

From: Charles Barr <charlie@amigaforever.free-online.co.uk>

Hello,
     Anyone know where i can get the source code to a simple amiga
texteditor. It seems to be very hard to find.

Cheers
-- 


@ENDNODE
@NODE "Mail_34" " ImageManager.library (was: Re: Pattern dither in Adobe Photoshop, how and what?) "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 02-07-00 00:41:31
Subject: @{b}ImageManager.library (was: Re: Pattern dither in Adobe Photoshop, how and what?)@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 04-Feb-00, Alastair M. Robinson wrote:

>> I'm author of ImageManager.library which currently offers [...]
> Hmmm.  ImageManager sounds interesting.   I couldn't find any reference to
> it on Aminet, except for fd and lib files in PMM. 

Must be something else you've found -- I rarely put my stuff on Aminet due to
"problems" of the past...

> What does it do, and

Short: it's an alternative to datatypes which doesn't require data to be in a
file, offers incremental rendering and custom 'filters' to be applied before
quantization.

> where can it be obtained?

>From my homepage.

Regards Allan
-- 
     URL: http://www.DIKU.dk/students/duff/
<sb>
MS-Windows detected: Destroy it and repair sectors? (Y/y/y)


@ENDNODE
@NODE "Mail_35" " Re: Source code to a TextEditor "
From: Nicholas Clarke <nclarke@diku.dk>
Date: 02-07-00 15:12:34
Subject: @{b}Re: Source code to a TextEditor@{ub}

From: Nicholas Clarke <nclarke@diku.dk>

On Sun, 6 Feb 2000, Charles Barr wrote:

> From: Charles Barr <charlie@amigaforever.free-online.co.uk>
> 
> Hello,
>      Anyone know where i can get the source code to a simple amiga
> texteditor. It seems to be very hard to find.

I made a text editor in assembler though this will probably not be useful
to you. Its a bit like cygnus with autoindent, holdx, search, replace,
exchange, forward/reverse blocking etc. And it uses multiple windows.

/ngc


@ENDNODE
@NODE "Mail_36" " Re: RE: Hello there! I'm new here! "
From: "Francis G. Loch" <fgloch@yahoo.com>
Date: 02-07-00 16:39:44
Subject: @{b}Re: RE: Hello there! I'm new here!@{ub}

From: "=?iso-8859-1?q?Francis=20G.=20Loch?=" <fgloch@yahoo.com>

Hi Nathan,

--- "Nathan J. Young" <nathan.young@bigfoot.com>
wrote:
> Hi Francis,
> 
> > Hi there,
> > 
> > I've just joined this list and I am just saying my
> hellos to you all.
> > 
> > Kinds regards,
> > 
> > Francis.
> 
> Ah! A message I can reply to!
> 
> Hello and welcome to the hotel Amiga, err... I hope
> you enjoy you stay. :)
> 
> Kind regards
> Nathan
> 

Ah, a message that *I* can reply to!

Thanks for the welcome. I'm sure I will enjoy my stay
;).

Regards,

Francis.

=====
e-mail:- fgloch@yahoo.com
web-site:- http://www.geocities.com/fgloch
__________________________________________________
Do You Yahoo!?
Talk to your friends online with Yahoo! Messenger.
http://im.yahoo.com

@ENDNODE
@NODE "Mail_37" " NList examples "
From: Charles Barr <charlie@amigaforever.free-online.co.uk>
Date: 02-07-00 19:59:27
Subject: @{b}NList examples@{ub}

From: Charles Barr <charlie@amigaforever.free-online.co.uk>

Hello,
     Could any one send me example source on using mutlicolum
lists in NList.mcc.

Cheers
-- 


@ENDNODE
@NODE "Mail_38" " Compilers, Amiga-C, Beginner "
From: Kai Weber <kai.weber@gmx.net>
Date: 02-07-00 20:02:24
Subject: @{b}Compilers, Amiga-C, Beginner@{ub}

From: "Kai Weber" <kai.weber@gmx.net>

Hi,

I want to start my first Amiga-C project after doing only basic script
programming and stuff.

I only have the gcc and know how to "make". But it is a good start for
a beginner? I have a hundred-sided ANSI-C-Book. But what I want to do
are amiga-based things. How can I create useable includes for the gcc,
from MUI for example?

Is there a tutorial somewhere available, or is anybody interested in
take me by the hand to become an Amiga-Programmer? What about a public
tutorial in the list or on a homepage?

My project I want to make (please do not rip my idea): A tool which
scans recursivly through directorys and searches for modules, which
are written into a playlist. With all amiga-specific things inside:
localization, maybe a MUI-GUI, startable from WB, using fileid.library
and so on...

-- 
* mailto:kai.weber@gmx.net · http://www.tu-ilmenau.de/~bond/ · use pgp


@ENDNODE
@NODE "Mail_39" " Help Needed with GetGadgetAttrs() !! "
From: amimjf@hotmail.com
Date: 02-08-00 10:47:58
Subject: @{b}Help Needed with GetGadgetAttrs() !!@{ub}

From: amimjf@hotmail.com

Hi,..

I have asked around on various (afb & aa) lists for a real example of how to get some usefull data back from this call. I just get a longword pointer that 
i cant de-reference.

I dont mind if you have to mail me lumps of program code, but please send it privately to Matthew.Fletcher@student.shu.ac.uk ,the first person to help gets a free copy of my quite unstable calculatior !

thanks,.

-matthew 

@ENDNODE
@NODE "Mail_40" " AW: Compilers, Amiga-C, Beginner "
From: Fritsch Alexander <Alexander.Fritsch@icn.siemens.de>
Date: 02-08-00 11:46:33
Subject: @{b}AW: Compilers, Amiga-C, Beginner@{ub}

From: Fritsch Alexander <Alexander.Fritsch@icn.siemens.de>



> From: "Kai Weber" <kai.weber@gmx.net>
> 
> 
> I only have the gcc and know how to "make". But it is a good start for
> a beginner? I have a hundred-sided ANSI-C-Book. But what I want to do
> are amiga-based things. How can I create useable includes for the gcc,
> from MUI for example?
> 
	GCC is definitely a great compiler that produces very good results,
but is not very userfriendly and so it is propably not the best choice for a
beginner. IMHO you should buy the new Amiga Developer CD from Haage&Partner.
(49,-DM IIRC)   There you find a full version of StormC with debugger,
editor and so on, so you get a ready to use developement enviroment. The
only limitation of that compiler is the licence, you are are not allowed to
distribute you programs comercially or even as shareware, only freeware. But
you can of course use StormC for developement/testing and then use gcc for
the final compile...

	Furthermore the cd contains many examples and old documents and the
CD contains the Autodocs and the RKRMs witch you *must* have.

	Then I would suggest you to by the latest geek gadgets CD (Snapshop
May 98?, 19,80 DM?), this cd has many very usefull unix-stuff ported for
amiga (gcc, x11...)
	A program from this CD you should use is for example CVS!

	Kind regards Alexander Fritsch



@ENDNODE
@NODE "Mail_41" " Re: Compilers, Amiga-C, Beginner "
From: Kai Weber <kai.weber@gmx.net>
Date: 02-08-00 13:07:00
Subject: @{b}Re: Compilers, Amiga-C, Beginner@{ub}

From: "Kai Weber" <kai.weber@gmx.net>

+ Fritsch Alexander <Alexander.Fritsch@icn.siemens.de> wrote:

> choice for a beginner. IMHO you should buy the new Amiga Developer CD
> from Haage&Partner. (49,-DM IIRC)

I own 1.1. These comes without a compiler. But as I do not want to buy
OS3.5 I thought I would not need the new Developer CD.

>  Then I would suggest you to by the latest geek gadgets CD (Snapshop
> May 98?, 19,80 DM?), this cd has many very usefull unix-stuff ported
> for amiga (gcc, x11...)

I have a self-made CD with the latest snapshot from May 99. And I use
a nearly all tools.

>  A program from this CD you should use is for example CVS!

I have no experience with CVS. Till now I use the amiga-native port of
RCS for some texts I work on daily.

But, besides I have all things to develop, I have no Beginners-Guide
to learn from.

-- 
* mailto:kai.weber@gmx.net · http://www.tu-ilmenau.de/~bond/ · use pgp


@ENDNODE
@NODE "Mail_42" " Re: Source code to a TextEditor "
From: BlackMael <harrism@ihug.co.nz>
Date: 02-08-00 13:59:06
Subject: @{b}Re: Source code to a TextEditor@{ub}

From: BlackMael <harrism@ihug.co.nz>

Greetings and Salutations, Charles.

On 06-Feb-00, *Charles* was saying...

> Hello,
>     Anyone know where i can get the source code to a simple amiga
> texteditor. It seems to be very hard to find.

There's quite a few text editors available with source on Aminet.
DME (XDME and YaDME based on DME), JEd,... just to name a few.

Yours, etc etc.
   _Martin_

-- 
Everybody is talking about the weather but nobody does anything about it.
-- Mark Twain
-- 
<sb>*BlackMael*
<sb>UIN 12938250
<sb>Team *AMIGA*



@ENDNODE
@NODE "Mail_43" " Re: Compilers, Amiga-C, Beginner "
From: "Francis G. Loch" <fgloch@yahoo.com>
Date: 02-08-00 17:52:08
Subject: @{b}Re: Compilers, Amiga-C, Beginner@{ub}

From: "=?iso-8859-1?q?Francis=20G.=20Loch?=" <fgloch@yahoo.com>



--- Kai Weber <kai.weber@gmx.net> wrote:
> + Fritsch Alexander
> <Alexander.Fritsch@icn.siemens.de> wrote:
> 
> > choice for a beginner. IMHO you should buy the new
> Amiga Developer CD
> > from Haage&Partner. (49,-DM IIRC)
> 
> I own 1.1. These comes without a compiler. But as I
> do not want to buy
> OS3.5 I thought I would not need the new Developer
> CD.
> 

I just thought that I would add my two cents worth.

The Developer's CD 2.1 has a lot of updated
information regarding earlier AmigaOS's from the
Developer's CD 1.1. Also, you can view them as HTML
files which (in my opinion) makes them slightly easier
to browse through.

Regards,

Francis.

=====
e-mail:- fgloch@yahoo.com
web-site:- http://www.geocities.com/fgloch
__________________________________________________
Do You Yahoo!?
Talk to your friends online with Yahoo! Messenger.
http://im.yahoo.com

@ENDNODE
@NODE "Mail_44" " Passing paramters to functions "
From: Charles Barr <charlie@amigaforever.free-online.co.uk>
Date: 02-08-00 18:21:36
Subject: @{b}Passing paramters to functions@{ub}

From: Charles Barr <charlie@amigaforever.free-online.co.uk>

Hello,
      I am inmplementing a command system for my program, in which 
the use can type a set of commands and parameters. rather like the shell.

each command is stored in a structure which contains it name and pointer
to  the function it is to carry out if the command is executed.
eg.

struct Cmd
{
   char *c_Name;
   void (*Func);
}

The problem im having is passing parameters to the commands function.
Each function may have different number of parameters or may
have none at all. 

I want to be able to pass what every parameters that are needed
for that function.

Cheers
-- 


@ENDNODE
@NODE "Mail_45" " Re: Compilers, Amiga-C, Beginner "
From: Dirk Harlaar <D.Harlaar@ping.de>
Date: 02-08-00 18:32:27
Subject: @{b}Re: Compilers, Amiga-C, Beginner@{ub}

From: "Dirk Harlaar" <D.Harlaar@ping.de>

On Tue, 8 Feb 2000 08:52:08 -0800 (PST), Francis G. Loch wrote:

> > > choice for a beginner. IMHO you should buy the new
> > Amiga Developer CD
> > > from Haage&Partner. (49,-DM IIRC)
> > 
> > I own 1.1. These comes without a compiler. But as I
> > do not want to buy
> > OS3.5 I thought I would not need the new Developer
> > CD.
> > 
> 
> I just thought that I would add my two cents worth.
> 
> The Developer's CD 2.1 has a lot of updated
> information regarding earlier AmigaOS's from the
> Developer's CD 1.1. Also, you can view them as HTML
> files which (in my opinion) makes them slightly easier
> to browse through.

With the added bonus, which was the original question, an easy to
use full featured C(++) compiler/developer system, in the form of
StormC the latest version. The developers CD 1.1 did not only come
without a compiler, it also came without the most important
information you can have when writing for the Amiga, the RKM's IIRC.
Those where included in dev cd 1.2 for the first time, and in an
updated version on 2.1. Hey, and if you search long enuf on the dev cd
2.1, you might even find PPaint on it. I call that value for money.

Dirk

@ENDNODE
@NODE "Mail_46" " Re: Help Needed with GetGadgetAttrs() !! "
From: Tim Hanson <msinister@connectfree.co.uk>
Date: 02-08-00 20:40:28
Subject: @{b}Re: Help Needed with GetGadgetAttrs() !!@{ub}

From: Tim Hanson <msinister@connectfree.co.uk>

Hi amimjf@hotmail.com 
amimjf@hotmail.com wrote this on 08-Feb-00 at 10:47:58
> From: amimjf@hotmail.com
> 
> Hi,..
> 
> I have asked around on various (afb & aa) lists for a real example of how to
> get some usefull data back from this call. I just get a longword pointer
> that i cant de-reference.


Do you mean GT_GetGadgetAtrrs()?
-- 
      
Tim Hanson,
by the River,Canterbury, Kent.
Amiga A1200T,`040/25,603e/160,32MB Fast,BVisionPPC,
170MB IDE HD,ZIP SCSI,RENO x2CD SCSI,Pace 56K
Don`t waste  your time by visiting
http://www.sinister67.freeserve.co.uk



@ENDNODE
@NODE "Mail_47" " Re: Passing paramters to functions "
From: Colin Wenzel <colstv@hotkey.net.au>
Date: 02-09-00 02:58:47
Subject: @{b}Re: Passing paramters to functions@{ub}

From: Colin Wenzel <colstv@hotkey.net.au>

On 09-Feb-00, Charles Barr wrote:
> Hello,
>      I am inmplementing a command system for my program, in which
> the use can type a set of commands and parameters. rather like the
> shell.
> 
> each command is stored in a structure which contains it name and
> pointer to the function it is to carry out if the command is
> executed. eg.
> 
> struct Cmd
> {
>   char *c_Name;
>   void (*Func);
> }
> 
> The problem im having is passing parameters to the commands function.
> Each function may have different number of parameters or may
> have none at all. 
> 
> I want to be able to pass what every parameters that are needed
> for that function.

Firstly,  your declaration of a  "pointer to a function"  is wrong.
All you have is a pointer to a VOID type,  called  Func.

it should be:    *  type  ((**Func)())

Where  "type"  is your functions return type like: 
    VOID, LONG, STRUCT Bla *,  whetever.....

When initialising the pointer you do this....


struct Cmd  thisone ={
     "thenameofthisfunc";
     beep;
};


When invoking the function pointer, you simply add the ()
with parameters parsed if required.....

   puts(  thisone.c_Name );                /*  print the name */
   thisone.Func(   arg1,arg2,arg3.....  );    /*  call the func  */



Now,  if you want to declare an array of these......

struct Cmd  thisarray[] ={
     { "thenameofthisfunc0"; beep; },
     { "thenameofthisfunc1"; tone; },
     { "thenameofthisfunc2"; honk; },
     { "thenameofthisfunc3"; ping; },
     { "thenameofthisfunc4"; thud; },
     NULL,  NULL
};


When invoking the function pointer, you simply add the ()
with parameters parsed if required.....



Don't forget to check for a NULL pointer.....
AND keep 'x' withing array bounds.....

You can keep a NULL entry at the end of your table,
so you don't have to keep check of the number of entries 
elsewhere....


  for( x=0;   thisarray[x].Func != NULL;  x++ )
        thisarray[x].Func(  arg1, arg2, arg3...... );


By the way,  I use a define for function pointers
becaue the brackets get messy & hard to read....

#define  FUNCPTR(x)    ((*x)())

Now your structure would read  either.....
 
 struct Cmd
 {
   char *c_Name;
   void  ((*Func)());
 }
 

or ............


 struct Cmd
 {
   char *c_Name;
   void  FUNCPTR( Func );
 }
 


Hope this helps



-------------------------------------
Colin Wenzel. Australia.

EMAIL:  mailto:colstv@hotkey.net.au
URL:       http://www.hotkey.net.au/~colstv/
ICQ:       17608330
MADE WITH 'AMIGA' 4000T With O.S 3.1
---------------------------------------


@ENDNODE
@NODE "Mail_48" " YAM PPC patch is a fake! (fwd) "
From: Tim Hanson <msinister@connectfree.co.uk>
Date: 02-09-00 11:51:58
Subject: @{b}YAM PPC patch is a fake! (fwd)@{ub}

From: Tim Hanson <msinister@connectfree.co.uk>

*** Forwarded message, originally written by Jarmo Laakkonen on 08-Feb-00 ***
Someone just uploaded this to aminet. But it seems to be a fake.
Just take a look at this "installer" script:

; YAM v2.0 PowerPC & Y2K Patcher v1.2 
; Marco 'dr Green' Goetzke 1999.12.03 

Assign YamPPC: ""
Echo "Please wait, checking your CPU version..."
Wait 5
if exists s:cedmacros
        delete s:cedmacros quiet 
endif
Echo "CPU version OK. Preparing YAM v2.0 to patch..."
Wait 1
Echo "" 
YamPPC:YAMPatcher YAM:*.* TO RAM:
Wait 1
YamPPC:YAMPatcher YamPPC:YamPPCPatch.pch TO S:
Echo ""
Echo "Please wait... Patching your YAM now"
YamPPC:PowerYAM S:YamPPCPatch.pch to S:cedmacros
Wait 2
Echo ""
Echo "YAM PPC patch is done!" 
Echo "" 
Echo "Now you can use YAM v2.0 with your PPC with more power!" 
Echo "And without any Year 2000 (Y2K) problems" 
Echo "" 
Echo "Thank you for using my PowerYAM patcher!" 
Echo "Marco 'dr Green' Goetzke, marcogoetzke@mailops.com"
Wait 15

If you examine the files YAMPatcher and PowerYAM, you will find out that
they are just renamed versions of Copy and Rename programs.

So all this "patch" seems to do is that it copies your YAM: dir to ram: and
replaces s:cedmacros with YAMPPCPatch.pch which is some sort of binary file.

Could this be the first macro virus for amiga?

AFAIK Yam doesn't have any y2k problems.

-- 
http://www.kolumbus.fi/jami.laakkonen/ppc/index.html
  http://www.freespeech.org/cliffbarnes/index.html
      A1200 040-25MHz & PPC 603e-240MHz 2+48Mb

"Don't need you or your crew to tell me what to think or do."
-- Millencolin: Trendy winds


*** End of forwarded message ***

Sorry to those who`ve seen this before but I thought it was important.

-- 
      
Tim Hanson,
by the River,Canterbury, Kent.
Amiga A1200T,`040/25,603e/160,32MB Fast,BVisionPPC,
170MB IDE HD,ZIP SCSI,RENO x2CD SCSI,Pace 56K
Don`t waste  your time by visiting
http://www.sinister67.freeserve.co.uk



@ENDNODE
@NODE "Mail_49" " CreateNewProc() "
From: Martyn Capewell <mmc28@hermes.cam.ac.uk>
Date: 02-10-00 02:05:05
Subject: @{b}CreateNewProc()@{ub}

From: Martyn Capewell <mmc28@hermes.cam.ac.uk>

Hello,

I've been trying to use CreateNewProc() to start a new process, and I think
I've got it working. However, just because it looks like it's working,
doesn't mean it's working properly.

Some example code is pasted below. Could anyone make any comments on it? Should I use __saveds with function()? Are there any side effects of my 'child'
process exiting after it's 'parent'?

void function()
{
    Printf("function() ran\n");
    Delay(300);
    return;
}

int main(void)
{
    BPTR fhand;
    struct TagItem NPTags[] = {NP_Entry,0,NP_Name,0,NP_Output,0,TAG_DONE,0};

    if(fhand = Open("CON:",MODE_NEWFILE))
    {
        NPTags[0].ti_Data = (ULONG)&function;
        NPTags[1].ti_Data = (ULONG)"My new process";
        NPTags[2].ti_Data = (ULONG)fhand;

        if(CreateNewProc(NPTags))
        { Printf("New process started\n");
        }
        else
        { Close(fhand);
        }
    }
    return(0);
}


Thanks,
-- 
- Martyn Capewell

... but you can't expect to wield supreme executive power just because some           watery tart threw a sword at you!

@ENDNODE
@NODE "Mail_50" " Re: CreateNewProc() "
From: Andrew Bell <andrew.ab2000@bigfoot.com>
Date: 02-10-00 04:01:55
Subject: @{b}Re: CreateNewProc()@{ub}

From: Andrew Bell <andrew.ab2000@bigfoot.com>

Hi Martyn,

On 10-Feb-00 you wrote: [amiga-c] CreateNewProc()

> I've been trying to use CreateNewProc() to start a new process, and
> I think I've got it working. However, just because it looks like
> it's working, doesn't mean it's working properly.
> 
> Some example code is pasted below. Could anyone make any comments on
> it? Should I use __saveds with function()?

Yes, if you're using a small data model.

> Are there any side
> effects of my 'child' process exiting after it's 'parent'?

I'd say quite a lot. :-)

> void function()
> {
>    Printf("function() ran\n");
>    Delay(300);
>    return;
> }
> 
> int main(void)
> {
>    BPTR fhand;
>    struct TagItem NPTags[] =
> {NP_Entry,0,NP_Name,0,NP_Output,0,TAG_DONE,0};
> 
>    if(fhand = Open("CON:",MODE_NEWFILE))
>    {
>        NPTags[0].ti_Data = (ULONG)&function;
>        NPTags[1].ti_Data = (ULONG)"My new process";
>        NPTags[2].ti_Data = (ULONG)fhand;
> 
>        if(CreateNewProc(NPTags))
>        { Printf("New process started\n");
>        }
>        else
>        { Close(fhand);
>        }
>    }
>    return(0);
> }

The parent process is quitting too soon, ripping the segment list from
under the child process. If sharing the same seglist (as your example
does) your parent process must make sure that the child process is no
longer running, before it quits, else the CPU will process the child
task's code from unallocated memory (which is a *bad* thing).

When your main() routine exits, UnLoadSeg() is called to unload your
seglist (i.e. executable) from memory, but your child process is
still using the seglist. This will eventually lead to a crash when
something re-allocates and modifies the memory that occupied the
seglist.

You could use some basic IPC like signals to sync your processes.
Check the RKM for more information on the Amiga's IPC mechanisms.

Your main() is also closing the output filehandle too soon, even
though the child process is still using it.

Regards, Andrew Bell.
-- 

+----------------------------------------+ 
email: mailto:andrew.ab2000@bigfoot.com
  web: http://www.andrewb.exl.co.uk
+----------------------------------------+
Strong am I with the Force... but not that strong! - Yoda




@ENDNODE
@NODE "Mail_51" " Re: CreateNewProc() "
From: Martyn Capewell <mmc28@hermes.cam.ac.uk>
Date: 02-10-00 11:44:11
Subject: @{b}Re: CreateNewProc()@{ub}

From: Martyn Capewell <mmc28@hermes.cam.ac.uk>

Hello Andrew

On 10-Feb-00, you wrote:

> From: Andrew Bell <andrew.ab2000@bigfoot.com>
> 
> Hi Martyn,
> 
> On 10-Feb-00 you wrote: [amiga-c] CreateNewProc()
> 
>> I've been trying to use CreateNewProc() to start a new process, and
>> I think I've got it working. However, just because it looks like
>> it's working, doesn't mean it's working properly.
>> 
>> Some example code is pasted below. Could anyone make any comments on
>> it? Should I use __saveds with function()?
> 
> Yes, if you're using a small data model.

I guessed as much.

>> Are there any side
>> effects of my 'child' process exiting after it's 'parent'?
> 
> I'd say quite a lot. :-)

Ditto.
 
>> void function()
>> {
>>    Printf("function() ran\n");
>>    Delay(300);
>>    return;
>> }
>> 
>> int main(void)
>> {
>>    BPTR fhand;
>>    struct TagItem NPTags[] =
>> {NP_Entry,0,NP_Name,0,NP_Output,0,TAG_DONE,0};
>> 
>>    if(fhand = Open("CON:",MODE_NEWFILE))
>>    {
>>        NPTags[0].ti_Data = (ULONG)&function;
>>        NPTags[1].ti_Data = (ULONG)"My new process";
>>        NPTags[2].ti_Data = (ULONG)fhand;
>> 
>>        if(CreateNewProc(NPTags))
>>        { Printf("New process started\n");
>>        }
>>        else
>>        { Close(fhand);
>>        }
>>    }
>>    return(0);
>> }
> 
> The parent process is quitting too soon, ripping the segment list from
> under the child process. If sharing the same seglist (as your example
> does) your parent process must make sure that the child process is no
> longer running, before it quits, else the CPU will process the child
> task's code from unallocated memory (which is a *bad* thing).

I thought it may cause a problem, but I couldn't really explain why. Thanks.

> You could use some basic IPC like signals to sync your processes.
> Check the RKM for more information on the Amiga's IPC mechanisms.

Okay, I'll take a look at that.

> Your main() is also closing the output filehandle too soon, even
> though the child process is still using it.

Hmm.. I thought not using the NP_CloseOutput tag from <dos/dostags.h> would
cause the filehandle to be closed automatically on the exit of function().
Or does it mean on the exit of CreateNewProc()? I only close it from main()
if CreateNewProc() failed.

Regards
-- 
- Martyn Capewell

... but you can't expect to wield supreme executive power just because some watery tart threw a sword at you!


@ENDNODE
@NODE "Mail_52" " locale question "
From: Fritsch Alexander <Alexander.Fritsch@icn.siemens.de>
Date: 02-10-00 12:14:24
Subject: @{b}locale question@{ub}

From: Fritsch Alexander <Alexander.Fritsch@icn.siemens.de>

Hello,
I have a new problem.

I am using locale.library and made German, English and Spanish translations
for a GUI. That works well. Then a collegue of mine translated it to Polish
language.

How do I select Polish as my Workbench-language? There is no "Polski"-entry
in the language prefs.
And Polish has some special characters, is there a special font or another
standard to solve the problem of missing characters?

If I were translating it to Russian, what would I have to do then? Any
standard solutions?

Kind regards Alexander Fritsch

@ENDNODE
@NODE "Mail_53" " Re: locale question "
From: David McMinn <D.Mcminn@eee.rgu.ac.uk>
Date: 02-10-00 12:20:38
Subject: @{b}Re: locale question@{ub}

From: "David McMinn" <D.Mcminn@eee.rgu.ac.uk>

Hi Fritsch

> How do I select Polish as my Workbench-language? There is no "Polski"-entry
> in the language prefs.
> And Polish has some special characters, is there a special font or another
> standard to solve the problem of missing characters?

This page I think has links to the country files that were not 
supplied with the OS. I don't know about fonts, although you could 
probably find them on Aminet (I've definately seen Russian fonts 
there).

http://members.xoom.com/amigabr/ato/ato-langref.html


-- 
|) /\ \/ ][ |)   |\/| c |\/| ][ |\| |\|   |   dave@satanicdreams.com
   http://members.xoom.com/David_McMinn   |   ICQ=16827694
Klingon function calls do not have 'parameters' - they have
'arguments' - and they ALWAYS WIN THEM.

@ENDNODE
@NODE "Mail_54" " Re: CreateNewProc() "
From: Andrew Bell <andrew.ab2000@bigfoot.com>
Date: 02-10-00 14:57:29
Subject: @{b}Re: CreateNewProc()@{ub}

From: Andrew Bell <andrew.ab2000@bigfoot.com>

Hi Martyn,

On 10-Feb-00 you wrote: [amiga-c] Re: CreateNewProc()

> Hmm.. I thought not using the NP_CloseOutput tag from
> <dos/dostags.h> would cause the filehandle to be closed
> automatically on the exit of function(). Or does it mean on the exit
> of CreateNewProc()? I only close it from main() if CreateNewProc()
> failed.

Sorry, my mistake (I read your code too fast :), your filehandle code
is fine, just pass the NP_CloseOutput tag and the filehandle will
automatically be closed when function() ends.

Regards, Andrew Bell.
-- 

+----------------------------------------+ 
email: mailto:andrew.ab2000@bigfoot.com
  web: http://www.andrewb.exl.co.uk
+----------------------------------------+
My whole existence is flawed - NIN




@ENDNODE
@NODE "Mail_55" " More processes... "
From: andrewmarkwell@ukonline.co.uk
Date: 02-10-00 15:38:48
Subject: @{b}More processes...@{ub}

From: andrewmarkwell@ukonline.co.uk

hi,

I've got a problem with concurrent processes too... the program goes like this:

1.  The parent process creates a new process, and creates its own message port
2.  The child sets itself up, creates a message port and sends a ready message to the parent
3.  The parent then begins sending data which is processed by the child
4.  After the parent sends its last piece of data it then sends a done message.
5.  On receiving a done message, the child empties its message port, and sends a done message to the parent, before deleting its port.  The function then exits
6.  The parent empties its port and exits

The program crashes about 2 out of 3 times the instant that the child process is deleted, with a 8000 0004, or a 8000 000B.  I say usually, because occasionally it doesn't crash at all and works perfectly!

I'm using the amiga.lib CreatePort()/DeletePort() for the ports, and the dos.library/CreateNewProcTags() to create the child process.  I'm assuming that the process is destroyed after its function specified in NP_Entry exits (I can't find much documentation on the dos library).

Andrew Markwell

@ENDNODE
@NODE "Mail_56" " Re: locale question "
From: Andrija Antonijevic <TheAntony2@bigfoot.com>
Date: 02-10-00 22:29:59
Subject: @{b}Re: locale question@{ub}

From: Andrija Antonijevic <TheAntony2@bigfoot.com>

Fritsch Alexander wrote these words on 10-Feb-00:

>I am using locale.library and made German, English and Spanish translations
>for a GUI. That works well. Then a collegue of mine translated it to Polish
>language.

>How do I select Polish as my Workbench-language? There is no "Polski"-entry
>in the language prefs.
>And Polish has some special characters, is there a special font or another
>standard to solve the problem of missing characters?

>If I were translating it to Russian, what would I have to do then? Any
>standard solutions?

There are third-party solutions for this (with OS3.5 most of them
became part of the system). It is expected from the user to have the
necessary files for his language, including fonts. This goes for both
Polish and Russian. You should maybe only include a reference
to this somewhere in the docs. F. ex.

"Russian users should have

RUS_cats.lha       util/wb    618K  70+Russian Locale System - catalogs archive
RUS_fonts.lha      util/wb    228K  70+Russian Locale System - russian fonts ar
RUS_main.lha       util/wb    300K  70+Russian Locale System - main archive"

or something similar...

-- 

Antony           | E-mail: <TheAntony@bigfoot.com>
                 | WWW:    http://www.bigfoot.com/~TheAntony/

I will defend to your death my right to my opinion.


@ENDNODE
@NODE "Mail_57" " RE: More processes... "
From: Jesper Svennevid <jesper@fxrealm.com>
Date: 02-11-00 02:35:59
Subject: @{b}RE: More processes...@{ub}

From: Jesper Svennevid <jesper@fxrealm.com>

> From: andrewmarkwell@ukonline.co.uk
> 
> hi,
> 
> I've got a problem with concurrent processes too... the 
> program goes like this:
> 
> 1.  The parent process creates a new process, and creates its 
> own message port

Recommended: Set up this message-port before creating the task,
thus enabling you to make sure everything is ready when your
subtask is created (reduces the need for extra error-checking in
the child itself)

> 2.  The child sets itself up, creates a message port and 
> sends a ready message to the parent
> 3.  The parent then begins sending data which is processed by 
> the child
> 4.  After the parent sends its last piece of data it then 
> sends a done message.
> 5.  On receiving a done message, the child empties its 
> message port, and sends a done message to the parent, before 
> deleting its port.  The function then exits

Use some kind of semaphore-protection on the child msgport,
that the parent keeps until it receives the done-message. This
way you can have a really good check on that the parent has
no more interest in the port. (The child will pause until the
lock is released, and you should try to get a exclusive lock
right after sending the child -> parent done-message.)

> 6.  The parent empties its port and exits

How do you allocate the message-data? Are you using static
buffers or are you allocating them dynamically? If you are
allocating dynamically, try to use semaphore-protected memory-
pools, as you only need to really maintain one pointer.

> The program crashes about 2 out of 3 times the instant that 
> the child process is deleted, with a 8000 0004, or a 8000 
> 000B.  I say usually, because occasionally it doesn't crash 
> at all and works perfectly!
> 
> I'm using the amiga.lib CreatePort()/DeletePort() for the 
> ports, and the dos.library/CreateNewProcTags() to create the 
> child process.  I'm assuming that the process is destroyed 
> after its function specified in NP_Entry exits (I can't find 
> much documentation on the dos library).

CreatePort()/DeletePort() isn't really necessary, it works just
as fine with CreateMsgPort()/DeleteMsgPort(), as I assume these
ports aren't meant to be public ones.

Well, these where just my suggestions, maybe something will
help to sort the problems out... I spent a few days writing
a general purpose thread-library when I got "serious" about
doing multi-threaded programs, and I can recommend that you
do the same, it's worth it. :)

-- 
// Jesper Svennevid : jesper@fxrealm.com
   Software Developer at FXRealm Studios
   http://www.fxrealm.com/
 

@ENDNODE
@NODE "Mail_58" " Passing parameters to functions "
From: "Alastair M. Robinson" <blackfive@fakenhamweb.co.uk>
Date: 02-11-00 16:12:48
Subject: @{b}Passing parameters to functions@{ub}

From: "Alastair M. Robinson" <blackfive@fakenhamweb.co.uk>

Hi Charles,

> I am inmplementing a command system for my program, in which the use can
> type a set of commands and parameters. rather like the shell.

> each command is stored in a structure which contains it name and pointer
> to  the function it is to carry out if the command is executed.
> eg.

> struct Cmd
> {
>   char *c_Name;
>   void (*Func);
>}

> The problem im having is passing parameters to the commands function.
> Each function may have different number of parameters or may
> have none at all. 

OK.  As Colin has already pointed out, you've mis-declared Func.  For a
function taking no arguments you need to do void (*Func)();
The ideal situation, though, would be for each of your functions to take
identical parameters.

Since your `shell' is taking commands as they're typed in, I'm assuming two
things:  Firstly, you have a plain-text command line; secondly speed is not
critical.  If these assumptions are correct, then I would recommend passing
the Command Line itself (all your functions will then take just char *),
and using ReadArgs() within the function.

Alternatively, you could include a ReadArgs template and an array in your
cmd structure, and the main program could fill in the array using ReadArgs
before calling your function.

A word of warning:  ReadArgs needs newlines at the end of all strings.

If your syntax is incompatible with ReadArgs(), you'll have to get a little
more creative!

Hope this helps
-- 
Alastair M. Robinson, email:blackfive@fakenhamweb.co.uk
Amiga 4000/030, 18Meg RAM, 4.3Gig HD, Mustek ScanExpress 6000SP
C, Assembler (68k, PIC16C84, learning ATMEL AVR), PostScript,
ARexx, AMOSPro(!), AmigaDOS

Satan: "Welcome to hell - Here's your DoubleSpaced 386SX and windows"


@ENDNODE
@NODE "Mail_59" " tooltypes... "
From: Alexander Niven-Jenkins <anj@cremlinsoftware.org>
Date: 02-11-00 19:03:54
Subject: @{b}tooltypes...@{ub}

From: Alexander Niven-Jenkins <anj@cremlinsoftware.org>

Hiya,

   I am having trouble using FindToolType(), what I am I doing wrong?

   I get an 'invalid argument' compile time error for 'dobj->do_ToolTypes'

   BTW this is with HiSOFT C++ (again) :-)))

*   ----- code starts -----*

    #define TT_DELAY "DELAY"

    struct DiskObject *dobj = NULL;

    if( dobj = GetDiskObject( wbmsg->sm_ArgList[ 0 ].wa_Name ) )
    {
        if( task = FindToolType( dobj->do_ToolTypes, TT_DELAY ) )
        {
            timedelay = atol( task );
        }
    }

*   ----- code ends -----*

Kind regards...

Alex
-- 
Cremlin Software - http://www.cremlinsoftware.org
Founder, lead programmer - ghandi@cremlinsoftware.org
Production, programmer - anj@cremlinsoftware.org


@ENDNODE
@NODE "Mail_60" " Re: tooltypes...solved... "
From: Alexander Niven-Jenkins <anj@cremlinsoftware.org>
Date: 02-12-00 15:58:11
Subject: @{b}Re: tooltypes...solved...@{ub}

From: Alexander Niven-Jenkins <anj@cremlinsoftware.org>

Hiya,

   After a few hours investigating I have solved the problem.

   It is down to the audodocs lying to me about parameter types :-)

   This is with the OS 3.5 autodocs/includes.

   autodocs:

     FindToolType( STRPTR*, STRPTR )

   includes (clib/icon_protos.h):

     FindToolType( CONST_STRPTR*, STRPTR )

   So with HiSOFT C++ being *SO* strict with types I was getting the
'invalid argument', with a quick type cast to ( CONST_STRPTR*
)dobj->do_ToolTypes all is well :-)

   I think that this must be OS3.5 related, because the code used to compile
(2 years ago) with HiSOFT C++ and the OS3.1 includes.

   Any way I hope this helps anyone else with similar trouble :-)

Kind regards...

Alex
-- 
Cremlin Software - http://www.cremlinsoftware.org
Founder, lead programmer - ghandi@cremlinsoftware.org
Production, programmer - anj@cremlinsoftware.org


@ENDNODE
@NODE "Mail_61" " What's wrong with the following? "
From: Alexander Niven-Jenkins <anj@cremlinsoftware.org>
Date: 02-13-00 10:39:09
Subject: @{b}What's wrong with the following?@{ub}

From: Alexander Niven-Jenkins <anj@cremlinsoftware.org>

Hiya,

   What is wrong with the attached code?  The problem is that at the
CreatePort line I end up with a number of enforcer hits and then an
exception - crash :-(

   Again, this is exerpt from the same code I was having tooltype problems
with, I am thinking that the OS3.5 includes have been changed slightly more
than the autodocs have :-(
   As this code used to work perfectly!

   I get a LONG READ , LONG WRITE, LONG READ, LONG WRITE, LONG READ, LONG
WRITE (all at 00000000), EXCEPTION!

13-Feb-00  09:29:51
Exception !!   00000004     TCB: 448FF500     CTX: 4407C1E8     SSP:
001FFFF8
USP : 44988EDC SR: 0010  (U0)(-)(-)  TCB: 448FF500
Data: 00000075 448CFC30 00000000 00000000 0000DC95 11171C1B 003D8114
0000002E
Addr: 0000236C 00000000 44988F68 448CFC30 44988F9C 00000000 00002250
001FFFF8
Stck: 00504495 6B00448C FC440000 00044498 8F6C4498 8F400000 22504495
62140000
Stck: 00000000 00000000 00020000 00020000 00100000 00044498 8F684498
8F6CCE88
PC-8: 00000000 00000000 00000000 00000000 00000000 44959848 00000840
00000335
PC *: 000F0301 01040301 00289100 2101DB00 31010FC1 0101E100 110FC1FC
2FE10101
44957fac :  0000 0000                  ori.b #$0,d0
44957fb0 :  4495                       neg.l (a5)
44957fb2 :  9848                       sub.w a0,d4
44957fb4 :  0000 0840                  ori.b #$40,d0
44957fb8 :  0000 0335                  ori.b #$35,d0
44957fbc : *000f 0301                  ori.b #$1,a7 ;illegal opcode
44957fc0 :  0104                       btst.l d0,d4
44957fc2 :  0301                       btst.l d1,d1
44957fc4 :  0028 9100 2101             ori.b #$0,$2101(a0)
44957fca :  db00                       addx.b d0,d5

   Unfortunately not segtrackered :-(

   The exception is raised BEFORE the if( inputreq... line.

   Any and all help will be appreciated!!!

Kind regards...

Alex
-- 
Cremlin Software - http://www.cremlinsoftware.org
Founder, lead programmer - ghandi@cremlinsoftware.org
Production, programmer - anj@cremlinsoftware.org
@ENDNODE
@NODE "Mail_62" " Paula access again "
From: Stefan Schulze <stefan@dreamworlds.de>
Date: 02-13-00 14:25:58
Subject: @{b}Paula access again@{ub}

From: Stefan Schulze <stefan@dreamworlds.de>

Hi everyone,

there was a discussion about direct paula usage some time ago at this list. I
also tried the approach mentioned here and well... it works fine. But how to
switch the sample of afterwards? 
I used writing (DMAF_AUD0|DMAF_MASTER) to custom.dmacon register to switch the
sample of but the system is very unstable afterwards. How to do it right?

Is there any automatic mechanism to do this? Any audio bit that tells the
hardware to play the sample only one time?

Second:

How to calculate that mysterious sample period value? Frequenzy in Hertz
given.

Thanks and Bye, Stefan.
-- 
"The dream has led me - And i will follow into the glowing fire." (Lacrimosa)
Dreamworlds Development - www.dreamworlds.de

XFire I/II, YATAG, VoxelRace, Between The Lines




@ENDNODE
@NODE "Mail_63" " Re: Paula access again "
From: Duane McDonnell <dmcdonnell@primus.com.au>
Date: 02-13-00 16:09:11
Subject: @{b}Re: Paula access again@{ub}

From: Duane McDonnell <dmcdonnell@primus.com.au>

>From: Stefan Schulze <stefan@dreamworlds.de>

>Hi everyone,

>there was a discussion about direct paula usage some time ago at this list. I
>also tried the approach mentioned here and well... it works fine. But how to
>switch the sample of afterwards? 
>I used writing (DMAF_AUD0|DMAF_MASTER) to custom.dmacon register to switch
the
>sample of but the system is very unstable afterwards. How to do it right?

To stop a playing sample from repeating, program AUDxLC so that it
points to a null word in chipram, then set AUDxLEN to 1 word. You
can do this via interrupt control or use timers. Note that you
need to do this after the sample has started but before it has
finished. This technique is also used to play samples longer
than 128K in length (except this time you program the next
part of the sample while the current part is playing).

>Is there any automatic mechanism to do this? Any audio bit that tells the
>hardware to play the sample only one time?

No, there's no automatic one-shot mode.

>Second:

>How to calculate that mysterious sample period value? Frequenzy in Hertz
>given.

             Clock Constant
Period = --------------------------
         Frequency * BytesPerSample

where "Clock Constant" = 3579545 for NTSC machines or 3546895 for PAL
machines, "Frequency" is the frequency in Hertz, and "BytesPerSample"
is the number of bytes in the sample to play.

If you want example code (asm though) to load and one-shot play
IFF-8SVX samples, just ask. It supports uncompressed samples as
well as exponential and Fibonacci compression.


@ENDNODE
@NODE "Mail_64" " Re: What's wrong with the following? "
From: Steven Solie <ssolie@home.com>
Date: 02-13-00 18:17:43
Subject: @{b}Re: What's wrong with the following?@{ub}

From: Steven Solie <ssolie@home.com>

On 13-Feb-00, Alexander Niven-Jenkins wrote:
>   What is wrong with the attached code?  The problem is that at the
> CreatePort line I end up with a number of enforcer hits and then an
> exception - crash :-(

I don't know why amiga.lib is giving you grief.

Did you try switching to exec.library CreateMsgPort() and
CreateIORequest()?

Cheers,
-- 
Steven Solie, Software Evolution
ssolie@home.com, http://members.home.net/ssolie


@ENDNODE
@NODE "Mail_65" " Re: What's wrong with the following? "
From: Alexander Niven-Jenkins <anj@cremlinsoftware.org>
Date: 02-13-00 18:31:13
Subject: @{b}Re: What's wrong with the following?@{ub}

From: Alexander Niven-Jenkins <anj@cremlinsoftware.org>

Hiya Steven,

On 13-Feb-00, you wrote:

>>   What is wrong with the attached code?  The problem is that at the
>> CreatePort line I end up with a number of enforcer hits and then an
>> exception - crash :-(

> I don't know why amiga.lib is giving you grief.

> Did you try switching to exec.library CreateMsgPort() and
> CreateIORequest()?

   No I'll try these.  I tried all the amiga.lib variations like CreateStdIO
instead of CreateExtIO etc but all with the same dire results :-(

   This code worked perfectly with the OS3.1 includes (amiga.lib) and yet
with the OS3.5 all goes to hell (although some other programs are all
working well), I did speak to Olaf B yesturday and he gave me some advice
to solve the CONST_STRPTR/STRPTR problems I was having as he did add/change
the includes in this respect which completely buggers up HiSOFT C++,
obiously there have been a number of behind the scene changes which just
don't suit some compilers :-)

   I think a change back to the 3.1 includes might be wise until more
information on such can be found :-)

   On a side note can somebody tell me how to work out how many tooltypes
there are in an icon (including the possibility of having duplicates).

   BLAH=
   TIME=
   BLAH=

   would give 3 not 2.

Kind regards...

Alex
-- 
Cremlin Software - http://www.cremlinsoftware.org
Founder, lead programmer - ghandi@cremlinsoftware.org
Production, programmer - anj@cremlinsoftware.org


@ENDNODE
@NODE "Mail_66" " Re: What's wrong with the following? "
From: Alexander Niven-Jenkins <anj@cremlinsoftware.org>
Date: 02-13-00 21:22:07
Subject: @{b}Re: What's wrong with the following?@{ub}

From: Alexander Niven-Jenkins <anj@cremlinsoftware.org>

Hiya,

   Changing the code to use the equivalents from exec rather than amiga.lib
has solved the problem.

   Thanks.

   Question is what has changed in amiga.lib that HiSOFT C++ doesn't like
any more :-)

Kind regards...

Alex
-- 
Cremlin Software - http://www.cremlinsoftware.org
Founder, lead programmer - ghandi@cremlinsoftware.org
Production, programmer - anj@cremlinsoftware.org


@ENDNODE
@NODE "Mail_67" " wierd ml stuff "
From: Linus McCabe <sparkle@hehe.com>
Date: 02-13-00 23:14:50
Subject: @{b}wierd ml stuff@{ub}

From: Linus McCabe <sparkle@hehe.com>


is annoyone else getting mails like
from: sentto-161138-2410-sparkle=hehe.com@returns.onelist.com
??

Usually Allan Odgaards mails arrive to me in that manner, but
occasionally also other ppls mails from the mailinglist..

/Linus

-- 
Linus McCabe * Sparkle@hehe.com              
             * Sparkle, #Amiga, DalNet
             * http://sparkle.amiga.tm

I'd rather have a horse than a hamburger



@ENDNODE
@NODE "Mail_68" " Non-blocking sockets, how? "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 02-13-00 23:15:50
Subject: @{b}Non-blocking sockets, how?@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

Hi there,

I want to use non-blocking sockets, so I do this:

   ULONG true = 1;
   IoctlSocket(socket_desc, FIONBIO, (char *)&true);

but that makes connect() fail :-(  So how do I do it?  The various tutorials
I've found speak of functions which doesn't exist in the Amiga
bsdsocket.library...

Also, the asynchronous events (GetSocketEvents() & SO_EVENTMASK) seems to be
something I'd like to use, but I'm not exactly sure how I tell socket library
I want to do so -- could someone please write a quick (~5 lines) tutorial of
the steps involved?  And can I avoid using WaitSelect() if I ask for the
events FD_READ & FD_WRITE?

Thanks a lot in advance!

Regards Allan
-- 
     URL: http://www.DIKU.dk/students/duff/
<sb>
WinErr f3a: Format of drive "a:" failed. Trying "c:" ...


@ENDNODE
@NODE "Mail_69" " Re: Non-blocking sockets, how? "
From: David McMinn <D.Mcminn@eee.rgu.ac.uk>
Date: 02-13-00 23:40:19
Subject: @{b}Re: Non-blocking sockets, how?@{ub}

From: "David McMinn" <D.Mcminn@eee.rgu.ac.uk>

Hi Allan

> but that makes connect() fail :-(  So how do I do it?  The various tutorials
> I've found speak of functions which doesn't exist in the Amiga
> bsdsocket.library...

Does it fail with an error code of EINPROGRESS? Thats not an real 
error with non-blocking sockets.

> Also, the asynchronous events (GetSocketEvents() & SO_EVENTMASK) seems to be
> something I'd like to use, but I'm not exactly sure how I tell socket library

Apparently that method of events doesn't work properly. You need to 
use SIGIOMASK events.

I've got some example code that Douglas McLaughlin sent me a while 
back, but I'll need to post it when I get back to my Amiga. I'm still 
trying to get to grips with sockets and things myself though.

-- 
|) /\ \/ ][ |)   |\/| c |\/| ][ |\| |\|   |   dave@satanicdreams.com
   http://members.xoom.com/David_McMinn   |   ICQ=16827694
Mmmmm, doooonnnnnuuuuts.

@ENDNODE
@NODE "Mail_70" " RE: Non-blocking sockets, how? "
From: Jesper Svennevid <jesper@fxrealm.com>
Date: 02-14-00 02:40:46
Subject: @{b}RE: Non-blocking sockets, how?@{ub}

From: Jesper Svennevid <jesper@fxrealm.com>





> -----Original Message-----
> From: Allan Odgaard [mailto:Duff@DIKU.DK]
> Sent: Sunday, February 13, 2000 11:16 PM
> To: Amiga-C@OneList.Com
> Subject: [amiga-c] Non-blocking sockets, how?
> 
> 
> From: Allan Odgaard <Duff@DIKU.DK>
> 
> Hi there,
> 
> I want to use non-blocking sockets, so I do this:
> 
>    ULONG true = 1;
>    IoctlSocket(socket_desc, FIONBIO, (char *)&true);
>
> but that makes connect() fail :-(  So how do I do it?  The 
> various tutorials I've found speak of functions which doesn't
> exist in the Amiga bsdsocket.library...

Are you sure it really fails? When I tried doing non-blocking
connects, I got a error back, and with the code EWOULDBLOCK (I
think I got this one, you better check :), and then I used
select()/WaitSelect() to wait for the request to complete...
(This is because a non-blocking connect() may not be able to
complete before the call returns)

However, I did find this procedure very messy (the finished
code was NOT nice :D), and switched to multithreaded sockets
instead.
 
> Also, the asynchronous events (GetSocketEvents() &
> SO_EVENTMASK) seems to be something I'd like to use, but I'm
> not exactly sure how I tell socket library I want to do so --
> could someone please write a quick (~5 lines) tutorial of
> the steps involved?  And can I avoid using WaitSelect() if I 
> ask for the events FD_READ & FD_WRITE?

No help there, sorry, I went multithreading before I even started
using that one :)

-- 
// Jesper Svennevid : jesper@fxrealm.com
   Software Developer at FXRealm Studios
   http://www.fxrealm.com/

@ENDNODE
@NODE "Mail_71" " Re: Paula access again "
From: Colin Wenzel <colstv@hotkey.net.au>
Date: 02-14-00 02:41:23
Subject: @{b}Re: Paula access again@{ub}

From: Colin Wenzel <colstv@hotkey.net.au>


You need to set up an interrupt to be notified when your
the dma is complete.   ( SetIntVector()  )

Your interrupt should Signal() your message port to
wake up Wait() when it needs to know something.

You must not exit until all DMA is complete,
& the interrupt freed.

-------------------------------------
Colin Wenzel. Australia.

EMAIL:  mailto:colstv@hotkey.net.au
URL:       http://www.hotkey.net.au/~colstv/
ICQ:       17608330
MADE WITH 'AMIGA' 4000T With O.S 3.1
---------------------------------------





On 14-Feb-00, Duane McDonnell wrote:

> From: Duane McDonnell <dmcdonnell@primus.com.au>
> 
>> From: Stefan Schulze <stefan@dreamworlds.de>
> 
>> Hi everyone,
> 
>> there was a discussion about direct paula usage some time ago at
>> this list. I also tried the approach mentioned here and well... it
>> works fine. But how to switch the sample of afterwards? I used
>> writing (DMAF_AUD0|DMAF_MASTER) to custom.dmacon register to switch
> the
>> sample of but the system is very unstable afterwards. How to do it
>> right?
> 
> To stop a playing sample from repeating, program AUDxLC so that it
> points to a null word in chipram, then set AUDxLEN to 1 word. You
> can do this via interrupt control or use timers. Note that you
> need to do this after the sample has started but before it has
> finished. This technique is also used to play samples longer
> than 128K in length (except this time you program the next
> part of the sample while the current part is playing).
> 
>> Is there any automatic mechanism to do this? Any audio bit that
>> tells the hardware to play the sample only one time?
> 
> No, there's no automatic one-shot mode.
> 
>> Second:
> 
>> How to calculate that mysterious sample period value? Frequenzy in
>> Hertz given.
> 
>             Clock Constant
> Period = --------------------------
>         Frequency * BytesPerSample
> 
> where "Clock Constant" = 3579545 for NTSC machines or 3546895 for PAL
> machines, "Frequency" is the frequency in Hertz, and "BytesPerSample"
> is the number of bytes in the sample to play.
> 
> If you want example code (asm though) to load and one-shot play
> IFF-8SVX samples, just ask. It supports uncompressed samples as
> well as exponential and Fibonacci compression.
> 
> 


@ENDNODE
@NODE "Mail_72" " Re: Non-blocking sockets, how? "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 02-14-00 03:56:02
Subject: @{b}Re: Non-blocking sockets, how?@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 14-Feb-00, Jesper Svennevid wrote:

>> but that makes connect() fail :-(  So how do I do it?  The 
>> various tutorials I've found speak of functions which doesn't
>> exist in the Amiga bsdsocket.library...
> Are you sure it really fails? When I tried doing non-blocking
> connects, I got a error back, and with the code EWOULDBLOCK (I
> think I got this one, you better check :), and then I used
> select()/WaitSelect() to wait for the request to complete...

hmm... I didn't consider that. I now run my WaitSelect like this:

   fd_set readfds, writefds, exceptfds;
   FD_ZERO(&readfds);   FD_SET(socket_desc, &readfds);
   FD_ZERO(&writefds);  FD_SET(socket_desc, &writefds);
   FD_ZERO(&exceptfds); FD_SET(socket_desc, &exceptfds);

   ULONG mask = 4096;
   WaitSelect(socket_desc+1, &readfds, &writefds, &exceptfds, NULL, &mask);

It returns immediately, but with 'socket_desc' removed from the read and except
set, so it should be waiting for writing. Then I write to the socket, and
execute the code above again -- but again WaitSelect returns with the socket
marked for writing. It could naturally be that the socket actually wants more
data, but I'm sending a simple HTTP GET, and in blocking mode it's enough to
make the socket start sending data...

> However, I did find this procedure very messy (the finished
> code was NOT nice :D), and switched to multithreaded sockets
> instead.

If you by 'multithreaded sockets' mean spawning a task for each connection then
that's what I've been using for quite some time, but I've never really been
happy about that scheme because

   a) spawning tasks have noticeable overhead.
   b) it's a MUI application so only one task can control the GUI, which means
      that network tasks need to signal the main task if they want to interact
      with the user (e.g. bring up a login-box)
   c) StormC has poor support for local library bases, which the multithreaded
      approach requires.
   d) when using 'persistant connections' a socket created by one task will
      later be used by another, which requires the first task to "give" it to 
      the other... (which complicates things... i.e. storing old library bases)
   e) all my 'sinks' (i.e. those that receive the network data, incl. "protocol
      decoders") use a push-interface, for which I think non-blocking sockets 
      are more suited.

   etc. etc....

Regards Allan
-- 
     URL: http://www.DIKU.dk/students/duff/
<sb>
I like work... I can sit and watch it for hours.


@ENDNODE
@NODE "Mail_73" " RE: Re: Non-blocking sockets, how? "
From: Jesper Svennevid <jesper@fxrealm.com>
Date: 02-14-00 05:48:57
Subject: @{b}RE: Re: Non-blocking sockets, how?@{ub}

From: Jesper Svennevid <jesper@fxrealm.com>

> From: Allan Odgaard <Duff@DIKU.DK>
> On 14-Feb-00, Jesper Svennevid wrote:
> 
> > Are you sure it really fails? When I tried doing non-blocking
> > connects, I got a error back, and with the code EWOULDBLOCK (I
> > think I got this one, you better check :), and then I used
> > select()/WaitSelect() to wait for the request to complete...
> 
> hmm... I didn't consider that. I now run my WaitSelect like this:
> 
>    fd_set readfds, writefds, exceptfds;
>    FD_ZERO(&readfds);   FD_SET(socket_desc, &readfds);
>    FD_ZERO(&writefds);  FD_SET(socket_desc, &writefds);
>    FD_ZERO(&exceptfds); FD_SET(socket_desc, &exceptfds);
> 
>    ULONG mask = 4096;
>    WaitSelect(socket_desc+1, &readfds, &writefds, &exceptfds, 
> NULL, &mask);
> 
> It returns immediately, but with 'socket_desc' removed from 
> the read and except set, so it should be waiting for writing.
> Then I write to the socket, and execute the code above again
> -- but again WaitSelect returns with the socket marked for writing.
> It could naturally be that the socket actually wants more data, but
> I'm sending a simple HTTP GET, and in blocking mode it's enough to
> make the socket start sending data...

If data hasn't yet been returned, it should return writefds set, as
when using non-blocking I/O you can _always_ write to the socket, it's
buffered internally in the stack. You should not check for writefds
when using non-blocking I/O, when I did I got in trouble. :)

(As, when using non-blocking I/O, the send()-command is just another
'fire-and-forget' function)

> > However, I did find this procedure very messy (the finished
> > code was NOT nice :D), and switched to multithreaded sockets
> > instead.
> 
> If you by 'multithreaded sockets' mean spawning a task for 
> each connection then that's what I've been using for quite
> some time, but I've never really been happy about that scheme
> because 
>    a) spawning tasks have noticeable overhead.

If(I assume this is for IProbe in some sense?) you have a preset
numer of connections, you could launch all those tasks at program
start/reconfiguration/etc, and just have them wait for a message to
arrive to their port. Or, if this is more a general use, pool all
your tasks, so you never kill them off if the idle tasks stay below
some kind of threshold.

>    b) it's a MUI application so only one task can control the 
> GUI, which means that network tasks need to signal the main task
> if they want to interact with the user (e.g. bring up a login-box)

Indeed, this can be a problem. But, if they want to interact with the
user, it can be a bit messy if several things show up at once :) Can't
you put the GUI on a separate task, and use your main task as a "server",
managing both the connections and the gui through some messaging? I
don't know, however, how much overhead this would put on the application,
and if you plan to port the application it might get a bit akward, as
messaging in AOS is _very_ fast compared to other platforms.

>    c) StormC has poor support for local library bases, which 
> the multithreaded approach requires.

I use the UserData-field in the Task-structure, containing a structure
of all the data my structure needs. In this way, I can declare the local
library-bases in the functions I need, and feed them correct data. To
avoid problems I never declare task-dependant library-bases globally
AND locally if this is avoidable. When referring to bsdsocket.library,
this automagically adds a little nifty feature that allows me to be
completely ignorant if a tcp/ip-stack is running, it is opened on demand.

(And, as a side-note, I use the exitcode-field to clean up after me, so
I can bail out of the socket-task at any time, works very nicely.)

>    d) when using 'persistant connections' a socket created by one task
> will later be used by another, which requires the first task  to "give"
> it to the other... (which complicates things... i.e. storing old library
bases)

Using the 'pool' approach, couldn't you redirect the request somehow?
(Like, passing on the message to another task that is managing a connection
to the host in question.)

Or, if this isn't possible, I think there are functions to release sockets
so they can be obtained by other tasks. (I think they're even called
ReleaseSocket()/ObtainSocket(), but I'm not sure...)

> e) all my 'sinks' (i.e. those that receive the network  data, incl.
> "protocol decoders") use a push-interface, for which I think 
> non-blocking sockets are more suited.

If you have loadable decoders, indeed one single thread would relieve much
of the pain, instead of having to make sure the code in question is
reentrant
at all times. (Although reentrant behaviour is recommended, global variables
are almost every time a bad idea :)

As a final note, I'm not trying to convince you _not_ to use non-blocking
sockets, but it requires a little different thinking. :) I used non-blocking
i/o in a older project of mine, but there I entered non-blocking i/o AFTER
the connection was open, as this was more a server-approach, but the
select()
loop might still be interesting, so maybe I should scan through this oldie.
:)

-- 
// Jesper Svennevid : jesper@fxrealm.com
   Software Developer at FXRealm Studios
   http://www.fxrealm.com/

@ENDNODE
@NODE "Mail_74" " Re: Non-blocking sockets, how? "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 02-14-00 10:25:35
Subject: @{b}Re: Non-blocking sockets, how?@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 14-Feb-00, Jesper Svennevid wrote:

>> Then I write to the socket, and execute the code above again
>> but again WaitSelect returns with the socket marked for writing [...]
> If data hasn't yet been returned, it should return writefds set, as
> when using non-blocking I/O you can _always_ write to the socket, it's
> buffered internally in the stack. You should not check for writefds
> when using non-blocking I/O, when I did I got in trouble. :)

Thanks, this helped... though now 'read' is always returned (after the initial
write) -- so it seems I should pretty much know which state the socket is
supposed to be in and query for that, not really what I'd hoped for...

> (As, when using non-blocking I/O, the send()-command is just another
> 'fire-and-forget' function)

I wonder who ever thought porting sockets to Amiga would be a good idea :-( I'm
sure if all the time programmers have spent figuring out how they work, was
used on charity acts instead, the world would be a much much better place...
or am I really the only one who thinks that each and every little detail of
this interface sucks completely?

>>    a) spawning tasks have noticeable overhead.
> [...] pool all your tasks, so you never kill them off if the 
> idle tasks stay below some kind of threshold.

But it requires a lot of message conventions, and handling the successful exit
of subtasks is a pitfall on the Amiga -- another argument in favor of
interleaving it all in one task is to get a more "fair" multitasking, as if I
e.g. did image decoding in 8 socket tasks and the network was fast enough, the
machine would spend 2/3 of every second in my tasks, which would have
noticeable effect on the rest of the system...

>>    b) it's a MUI application so only one task can control the 
>> GUI, which means that network tasks need to signal the main task
>> if they want to interact with the user (e.g. bring up a login-box)
> Indeed, this can be a problem. But, if they want to interact with the
> user, it can be a bit messy if several things show up at once :) Can't

It's rare that they actually need to make use of the ability, but it happens.
Also, it's not always direct confrontations with the user, e.g. a
http-redirection requires the URL-stringgadget to be updated, which currently
require a message... or for example when a download thread finds that the file
already exists then it needs to send one message to the main task and wait for
a "what to do" reply...

> you put the GUI on a separate task, and use your main task as a "server",
> managing both the connections and the gui through some messaging? I

Well, it's already working quite well (with blocking sockets) but I'd like to
get rid of all this messaging and I also had some other concerns about the
current solution which I'd hoped non-blocking sockets would solve, for example
I keep the last 8 connections (for "persistant connections") but they rather
quickly time-out, though I'm not told about this, so whenever the user makes a
new request I need to iterate through all the old sockets and peek if one of
them should still be connected, which albeit it works, is not an ideal
solution...

But I wonder if I can make it work better for non-blocking sockets. I've tried
to first setup a signal to let me know about events:

   LONG sig = AllocSignal(-1);
   SocketBaseTags(
      SBTM_SETVAL(SBTC_SIGEVENTMASK), sig,
      TAG_DONE);

And then the mask of events I want to know about:

   ULONG val = FD_CLOSE | FD_CONNECT | FD_ERROR | FD_READ | FD_WRITE;
   setsockopt(socket_desc, 10 /*level?*/, SO_EVENTMASK, &val, sizeof(ULONG));

But it doesn't work, and it's not a surprise cause I have no idea if this is
the correct use of the API and what the 'level' should be for this setting...

I have a telnet program which immediately quits when the socket is closed (by
the host) which is basically all I want to do -- maybe I should go hunt the
source, as I think it's a simple unix port...

> [...]
> Or, if this isn't possible, I think there are functions to release sockets
> so they can be obtained by other tasks. (I think they're even called
> ReleaseSocket()/ObtainSocket(), but I'm not sure...)

This is what I currently do. I can't recall the exact problems about these
functions, and it does currently work -- but by now I think you should be able
to see why I seek an alternative approach, because with the blocking sockets
it's one workaround, convention, message passing etc. after another, which I
hope can all be avoided with non-blocking... :-)

>> e) all my 'sinks' (i.e. those that receive the network  data, incl.
>> "protocol decoders") use a push-interface, for which I think 
>> non-blocking sockets are more suited.
> If you have loadable decoders, indeed one single thread would relieve much
> of the pain, instead of having to make sure the code in question is
> reentrant at all times. (Although reentrant behaviour is recommended, global
> variables are almost every time a bad idea :)

No, I'm not making use of global variables or the likes -- what I ment was
simply that my API will allow me to do something like setup a chain of
serialized objects a la "socket, http, image-decoder, quantizer, rastport",
where each object passes (modified) data to the next one, so data is received
from the net and rendered in the rastport more or less by itself.  With
blocking sockets I need to do exhaustive recv()'s and I also need to insert
atleast one message barrier in the chain to switch context to the main task,
before I do any rendering, "user communication" or similar...

> As a final note, I'm not trying to convince you _not_ to use non-blocking
> sockets, but it requires a little different thinking. :) [...]

I'm rather unexperienced when it comes to sockets (most of the existing network
code was created by a friend of mine) so I'm very interested in all viewpoints
I can get! Currently my impression is that socket.library is one of the
worst API's ever created, and that non-blocking sockets just makes it worse,
but with the benefit that it'll give a better dataflow in the ending
application, which is more important than the low level details which
hopefully only have to be dealt with once...

But I may still change my mind, as I haven't even managed to make the
non-blocking sockets do what was the main reason for changing model, namely 
signal me when their 'state' change :-(

Regards Allan
-- 
     URL: http://www.DIKU.dk/students/duff/
<sb>
I am pentium of Borg. Division is futile. You'll be approximated.


@ENDNODE
@NODE "Mail_75" " Re: Non-blocking sockets, how? "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 02-14-00 10:40:34
Subject: @{b}Re: Non-blocking sockets, how?@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 13-Feb-00, David McMinn wrote:

>> but that makes connect() fail :-(  So how do I do it?  The various tutorials
>> I've found speak of functions which doesn't exist in the Amiga
>> bsdsocket.library...
> Does it fail with an error code of EINPROGRESS? Thats not an real 
> error with non-blocking sockets.

Yes that's it -- I didn't look at the error code first, which is why I just
assumed it didn't work...

>> Also, the asynchronous events (GetSocketEvents() & SO_EVENTMASK) seems to be
>> something I'd like to use, but I'm not exactly sure how I tell socket
>> library
> Apparently that method of events doesn't work properly. You need to 
> use SIGIOMASK events.

Should I still use GetSocketEvents() to learn which events the various sockets
have pending? And how do I setup the states I want to know about? (if it's
setsocketopt() then an example would be nice)

> I've got some example code that Douglas McLaughlin sent me a while 
> back, but I'll need to post it when I get back to my Amiga. [...]

I'd really appreciate that! :-)

Regards Allan
-- 
     URL: http://www.DIKU.dk/students/duff/
<sb>
Whenever you find that you are on the side of the majority, it is time to
reform.
-- Mark Twain


@ENDNODE
@NODE "Mail_76" " Superbitmaps "
From: andrewmarkwell@ukonline.co.uk
Date: 02-14-00 12:43:20
Subject: @{b}Superbitmaps@{ub}

From: andrewmarkwell@ukonline.co.uk

I have a superbitmap window and I want to be able to change the bitmap to one of a larger size when needed.

No probs, I thought, I'll just AllocBitMap() the desired size, copy over the existing plane data and point window->RPort->Layer->SuperBitMap at the new bitmap, then just use CopySBitMap() to update the display.

Unfortunately it doesn't work - what happens is that imagery is rendered into the window, the procedure above then takes place, but after the CopySBitMap() call the window content just goes blank, and rendering is supposed to continue into the new larger bitmap.  But nothing appears in the new bitmap.

I suspect that there may be other pointers than Window->RPort->Layer->SuperBitMap
referencing the original bitmap that I've not updated but I've got no idea where these are (if any).  The other problem is that the amount of memory allocated in the BitMap.Planes[] array never seems to be quite
what I'd expect.  (In the RKM it says (width+16)/16 *height*depth bytes), but I've read that it will always differ depending on the chips
and OS revisions.

I've tried using BltBitMap() instead, to just copy over the data from
the old to the new bitmap, but the result is a rather strange looking
skewed image which duplicates itself in different colours across the
window which I think probably means the bitplanes are mis-aligned.  Could anyone help please?

Andrew Markwell



@ENDNODE
@NODE "Mail_77" " Re: Passing parameters to functions "
From: Charles Barr <charlie@amigaforever.free-online.co.uk>
Date: 02-14-00 18:13:06
Subject: @{b}Re: Passing parameters to functions@{ub}

From: Charles Barr <charlie@amigaforever.free-online.co.uk>

Hello Alastair

On 11-Feb-00, you wrote:

> From: "Alastair M. Robinson" <blackfive@fakenhamweb.co.uk>
> 
> Hi Charles,
> 
>> I am inmplementing a command system for my program, in which the use can
>> type a set of commands and parameters. rather like the shell.
> 
>> each command is stored in a structure which contains it name and pointer
>> to  the function it is to carry out if the command is executed.
>> eg.
> 
>> struct Cmd
>> {
>>   char *c_Name;
>>   void (*Func);
>> }
> 
>> The problem im having is passing parameters to the commands function.
>> Each function may have different number of parameters or may
>> have none at all. 
> 
> OK.  As Colin has already pointed out, you've mis-declared Func.  For a
> function taking no arguments you need to do void (*Func)();
> The ideal situation, though, would be for each of your functions to take
> identical parameters.
> 
> Since your `shell' is taking commands as they're typed in, I'm assuming
> two things: Firstly, you have a plain-text command line; secondly speed is
> not critical. If these assumptions are correct, then I would recommend
> passing the Command Line itself (all your functions will then take just
> char *), and using ReadArgs() within the function.
> 
> Alternatively, you could include a ReadArgs template and an array in your
> cmd structure, and the main program could fill in the array using ReadArgs
> before calling your function.
> 
> A word of warning:  ReadArgs needs newlines at the end of all strings.
> 
> If your syntax is incompatible with ReadArgs(), you'll have to get a
> little more creative!

On the same topic. Using char * is the idea im heading for. It would
actually be better tp parse this line within the function rather that
before. Thanks, never thought of that.

I have another situation. How do convert acsii numbers to real numbers

eg . In one of the commands the user can specify the postion of the cursor
using the command CURSOR x y

where x and y are the coords.

these will be typed by the user as CURSOR 2 6

how do i convert these 2 and 6 into LONG numbers?



> 
> Hope this helps
Regards
-- 


@ENDNODE
@NODE "Mail_78" " dos.library Close() won't work! HELP! "
From: W1bBle <layabouts@the-giant-sofa.demon.co.uk>
Date: 02-15-00 00:35:58
Subject: @{b}dos.library Close() won't work! HELP!@{ub}

From: W1bBle <layabouts@the-giant-sofa.demon.co.uk>

Hi all,

I'm trying to write a little program to purge the .DELDIR of a PFS2 or 3
partition (what do you mean I'm paranoid?! ;) but for some reason Close() and
consequently DeleteFile() fails. The code is /really/ simple, and yet I can't
see what the problem is. I'm compiling it with

vc +warpos -amiga-align PurgeDELDIR.c amiga.lib -o purge 

The Delay() calls were there to see whether it was a problem with atomic
commit delay on PFS but that wasn't it. Stupid of me to think that otherwise
all software would need a recompile! Doh! Anyway, on the first iteration of
the for loop I get:

Close=0
DeleteFile=0
Failure: object is in use   // This line output on the second iteration

and then the shell prompt. 

Any ideas?

Thanks,

G. Burdett

-- 
<------------------------------------------------>
 | Giles Burdett                    __   ___    |
 |  IRC nick = W1bBle              ///  (. .)   |
 |                                ///   ( v )   |
 |  A1200T 200MHz PPC        __  ///   //   \\  |
 | OS 3.1 / Linux-m68k       \\\///    .X # X.  |
 |                            \XX/     XX___XX  |
<------------------------------------------------>

@ENDNODE
@NODE "Mail_79" " Re: dos.library Close() won't work! HELP! "
From: Ilkka Lehtoranta <iti@solutions.fi>
Date: 02-15-00 09:46:40
Subject: @{b}Re: dos.library Close() won't work! HELP!@{ub}

From: Ilkka Lehtoranta <iti@solutions.fi>

On 15-Hel-00, W1bBle wrote:

W> From: W1bBle <layabouts@the-giant-sofa.demon.co.uk>
W> 
W> Hi all,
W> 
W> I'm trying to write a little program to purge the .DELDIR of a PFS2 or 3
W> partition (what do you mean I'm paranoid?! ;) but for some reason Close()
W> and consequently DeleteFile() fails. The code is /really/ simple, and yet
W> I can't see what the problem is. I'm compiling it with
W> 
W> vc +warpos -amiga-align PurgeDELDIR.c amiga.lib -o purge 
W> 
W> The Delay() calls were there to see whether it was a problem with atomic
W> commit delay on PFS but that wasn't it. Stupid of me to think that
W> otherwise all software would need a recompile! Doh! Anyway, on the first
W> iteration of the for loop I get:
W> 
W> Close=0
W> DeleteFile=0
W> Failure: object is in use   // This line output on the second iteration

I'm wondering why you attempt open a new file (MODE_NEWFILE) ?
And on the other hand there seems to be no sense open those files
at all. Just delete them...


@ENDNODE
@NODE "Mail_80" " Re: Re: Non-blocking sockets, how? "
From: David McMinn <D.Mcminn@eee.rgu.ac.uk>
Date: 02-15-00 10:28:17
Subject: @{b}Re: Re: Non-blocking sockets, how?@{ub}

From: "David McMinn" <D.Mcminn@eee.rgu.ac.uk>

Hi Allan

> >> Also, the asynchronous events (GetSocketEvents() & SO_EVENTMASK) seems to be
> >> something I'd like to use, but I'm not exactly sure how I tell socket
> >> library
> > Apparently that method of events doesn't work properly. You need to 
> > use SIGIOMASK events.
> 
> Should I still use GetSocketEvents() to learn which events the various sockets
> have pending? And how do I setup the states I want to know about? (if it's
> setsocketopt() then an example would be nice)

Douglas recommended avoiding GetSocketEvents and using WaitSelect. 
You need to use the FD_xxx macros in conjunction with the fd_set 
typedef to set flags for whether you want to hear read/write events 
from a particular socket. Like Jesper said, with asynchronous sockets 
you will always get write events, so I found it better to set that 
flag only when you have something to write to the socket.

Something else which I can't remember if it is in the example is that 
you need to use a copy of the fd_sets, as they will get modified by 
the WaitSelect call.

The example (actually just a small snippet for setting up the sockets 
and then getting events) is attached.

-- 
David McMinn, Research Student
School of Electronic & Electrical Engineering
The Robert Gordon University
Schoolhill, Aberdeen, AB10 1FR

@ENDNODE
@NODE "Mail_81" " Re: Passing parameters to functions "
From: roderick_maclean@agilent.com
Date: 02-15-00 12:36:57
Subject: @{b}Re: Passing parameters to functions@{ub}

From: roderick_maclean@agilent.com

Charles wrote:
> I have another situation. How do convert acsii numbers to real numbers

You use atoi(). Some compilers have other things like atod() for double
but I can't remember if that is standard so let's stick to atoi()

I'm working from memory but I think it its proto is:
int atoi(char *);
You'd better check that though 'cos my memory is like a sieve!


> eg . In one of the commands the user can specify the postion 
> of the cursor
> using the command CURSOR x y
> where x and y are the coords.
> 
> these will be typed by the user as CURSOR 2 6
> how do i convert these 2 and 6 into LONG numbers?

(this is from memory and hasn't been tested ;)
assuming that you've already got your x from the user...

LONG x_val;
x_val = (LONG)atoi(x);

...same for y...

Hope this helps.

	Rod

--
Rod MacLean                      | Roderick_MacLean@agilent.com
Developer - Agilent Technologies | +44 (0131) 331-7304
** My views do not necessarily reflect the views of Agilent! **


@ENDNODE
@NODE "Mail_82" " Re: Passing parameters to functions "
From: Joar Sivertsen <jsiv@start.no>
Date: 02-15-00 12:42:52
Subject: @{b}Re: Passing parameters to functions@{ub}

From: Joar Sivertsen <jsiv@start.no>

Hi Charles

On 14-Feb-00, you wrote:

> I have another situation. How do convert acsii numbers to real numbers

from stdlib.h:

int atoi(const char *);
long int atol(const char *);

 
> eg . In one of the commands the user can specify the postion of the cursor
> using the command CURSOR x y
> 
> where x and y are the coords.
> 
> these will be typed by the user as CURSOR 2 6
> 
> how do i convert these 2 and 6 into LONG numbers?

You could also do something like this:
(string is the line the user typed)

---
char cmd_name[64];
long cmd_x, cmd_y;

sscanf(string, "%s %d %d", cmd_name, &cmd_x, &cmd_y);
---

Now you have the command name (CURSOR) in cmd_name,
and the coordinates in cmd_x and cmd_y.


@ENDNODE
@NODE "Mail_83" " Posix fork() ing. "
From: amimjf@hotmail.com
Date: 02-15-00 13:08:37
Subject: @{b}Posix fork() ing.@{ub}

From: amimjf@hotmail.com

Hi,..

I am trying to generate threading into a cross platform chat system i am developing,.. its only commandline stuff, but i need to thread to get it to work with a few cilents.

So the question is, how can can i get this to work `cross platform` on the amiga, i use gcc/ixemul so support should not be a problem. I just need an example to show me the best way of doing this under ixemul.


-matthew
-amimjf@connectfree.co.uk  

@ENDNODE
@NODE "Mail_84" " Re: dos.library Close() won't work! HELP! "
From: "Francis G. Loch" <fgloch@yahoo.com>
Date: 02-15-00 13:48:44
Subject: @{b}Re: dos.library Close() won't work! HELP!@{ub}

From: "=?iso-8859-1?q?Francis=20G.=20Loch?=" <fgloch@yahoo.com>

Hi there,

--- W1bBle <layabouts@the-giant-sofa.demon.co.uk>
wrote:
> Hi all,
> 
> I'm trying to write a little program to purge the
> .DELDIR of a PFS2 or 3
> partition (what do you mean I'm paranoid?! 

I tried and failed to write a similar program. It
seems that PFS will not allow you to delete any of the
files in the .deldir directory using the standard
commands. I even tried setting the protection bits to
deletable, but it doesn't even allow that!

Unless anyone else has another suggestion, I think
that you might need to get on to Great Effects
Development to get some info on how to delete files in
the .deldir. There's nothing in the docs about purging
the .deldir directory, only about copying files from
it.

If anyone else has information on this matter I would
be extremely interested.

Kind regards,

Francis.

=====
e-mail:- fgloch@yahoo.com
web-site:- http://www.geocities.com/fgloch
__________________________________________________
Do You Yahoo!?
Talk to your friends online with Yahoo! Messenger.
http://im.yahoo.com

@ENDNODE
@NODE "Mail_85" " Re: Posix fork() ing. "
From: Stephen Illingworth <stevei@firewall.co.uk>
Date: 02-15-00 14:05:31
Subject: @{b}Re: Posix fork() ing.@{ub}

From: Stephen Illingworth <stevei@firewall.co.uk>

Hello amimjf@hotmail.com

On 15-Feb-00, you wrote:

> From: amimjf@hotmail.com
> 
> Hi,..
> 
> I am trying to generate threading into a cross platform chat system i am
> developing,.. its only commandline stuff, but i need to thread to get it
> to work with a few cilents.
> 
> So the question is, how can can i get this to work `cross platform` on the
> amiga, i use gcc/ixemul so support should not be a problem. I just need an
> example to show me the best way of doing this under ixemul.
> 
> 

It's  impossible  at  the moment to implement a true fork() on the Amiga as
the OS lacks the features that make it possible.

vfork()  is  possible however, but you need to be careful if you use global
or  static  variables.   vfork()  was  invented  for BSD UNIX to provide an
efficient method of forking if the only purpose was to exec() a program and
hence, is only "safe" under those circumstances.

Further although fork() is available under all UNIXes, vfork() is not (it's
not available under IRIX for example) so portability lessens.

Cosequently,  my  advice  is not to fork() at all, but instead use select()
together  with it's support macros.  It was desiged the kind of program you
describe and is a helluva lot more efficient than fork().

As  a point of reference, it is possible to categorize WebSevers into those
that  fork()  and  those  that  don't.  Without exception the non-fork()ing
servers  are  quicker.   Apache  for  example,  uses fork() and is far, far
slower than Zeus or thttpd, which use select().

Steve


@ENDNODE
@NODE "Mail_86" " Internet multiplayer support "
From: Tim Hanson <msinister@connectfree.co.uk>
Date: 02-15-00 14:06:44
Subject: @{b}Internet multiplayer support@{ub}

From: Tim Hanson <msinister@connectfree.co.uk>

Hi All,
I`m about to try to add internet multiplayer support to my current project.
The problem is I have absolutely no knowledge of how this will work. I intend
to use AMarquee but what I need to know is how this is usually done.

Questions:
1: I assume that the game will run on the users machine and send the players
position only. Enemy movement will be kept sincronised by making sure all
players have the same list of enemies in the same order and that they have
rand() set from the same seed at the same time. This looks like it could
cause problems so how would I arrange error checking?

2: When a new player logs on he will bring his own list of enemies (to make
sure there is enough for every one to shoot, the play will generally be
cooperative) and all players will have their rand seed reset and accept a
list of the new enemies. Thw new player will recieve a list of the current
enemies. This will cause a pause for the current players will this be
acceptable?

3: Someone will presumably have to host AMarqueed the AMarquee server for
people to connect to. How do I persuade someone to do this?

4: In general have I got the right idea or would it be better to write a
dedicated server and have that control enemy movements and let the users
machine just render what it was sent? Would it be possible to send that
amount of data across a 4000cps connection?

Appologies if these are stupid questions this is all outside my experience.
-- 
      
Tim Hanson,
by the River,Canterbury, Kent.
Amiga A1200T,`040/25,603e/160,32MB Fast,BVisionPPC,
170MB IDE HD,ZIP SCSI,RENO x2CD SCSI,Pace 56K
Don`t waste  your time by visiting
http://www.sinister67.freeserve.co.uk



@ENDNODE
@NODE "Mail_87" " [warpup] Internet multiplayer support "
From: Tim Hanson <msinister@connectfree.co.uk>
Date: 02-15-00 14:06:44
Subject: @{b}[warpup] Internet multiplayer support@{ub}

Hi All,
I`m about to try to add internet multiplayer support to my current project.
The problem is I have absolutely no knowledge of how this will work. I intend
to use AMarquee but what I need to know is how this is usually done.

Questions:
1: I assume that the game will run on the users machine and send the players
position only. Enemy movement will be kept sincronised by making sure all
players have the same list of enemies in the same order and that they have
rand() set from the same seed at the same time. This looks like it could
cause problems so how would I arrange error checking?

2: When a new player logs on he will bring his own list of enemies (to make
sure there is enough for every one to shoot, the play will generally be
cooperative) and all players will have their rand seed reset and accept a
list of the new enemies. Thw new player will recieve a list of the current
enemies. This will cause a pause for the current players will this be
acceptable?

3: Someone will presumably have to host AMarqueed the AMarquee server for
people to connect to. How do I persuade someone to do this?

4: In general have I got the right idea or would it be better to write a
dedicated server and have that control enemy movements and let the users
machine just render what it was sent? Would it be possible to send that
amount of data across a 4000cps connection?

Appologies if these are stupid questions this is all outside my experience.
-- 
      
Tim Hanson,
by the River,Canterbury, Kent.
Amiga A1200T,`040/25,603e/160,32MB Fast,BVisionPPC,
170MB IDE HD,ZIP SCSI,RENO x2CD SCSI,Pace 56K
Don`t waste  your time by visiting
http://www.sinister67.freeserve.co.uk



@ENDNODE
@NODE "Mail_88" " Re: Superbitmaps "
From: Tim Hanson <msinister@connectfree.co.uk>
Date: 02-15-00 15:32:54
Subject: @{b}Re: Superbitmaps@{ub}

From: Tim Hanson <msinister@connectfree.co.uk>

Hi andrewmarkwell@ukonline.co.uk 
andrewmarkwell@ukonline.co.uk wrote this on 14-Feb-00 at 12:43:20
> From: andrewmarkwell@ukonline.co.uk
> 
> I have a superbitmap window and I want to be able to change the bitmap to
> one of a larger size when needed.
> 
> No probs, I thought, I'll just AllocBitMap() the desired size, copy over the
> existing plane data and point window->RPort->Layer->SuperBitMap at the new
> bitmap, then just use CopySBitMap() to update the display.

Just guessing, but did you supply the original bitmap as friend bitmap to
AllocBitMap()?


-- 
      
Tim Hanson,
by the River,Canterbury, Kent.
Amiga A1200T,`040/25,603e/160,32MB Fast,BVisionPPC,
170MB IDE HD,ZIP SCSI,RENO x2CD SCSI,Pace 56K
Don`t waste  your time by visiting
http://www.sinister67.freeserve.co.uk



@ENDNODE
@NODE "Mail_89" " Re: Posix fork() ing. "
From: GURER OZEN <gozen@isbank.net.tr>
Date: 02-15-00 16:10:14
Subject: @{b}Re: Posix fork() ing.@{ub}

From: "GURER OZEN" <gozen@isbank.net.tr>

Hello,
SI-> From: Stephen Illingworth <stevei@firewall.co.uk>

SI-> Cosequently, my advice is not to fork() at all, but instead use select()
SI-> together with it's support macros. It was desiged the kind of program you
SI-> describe and is a helluva lot more efficient than fork().

Another solution can be using gnu pth. It uses software threads, so faster
than real fork() and still gives threads. I don't know if it is portable to
amigaos though. And its api is somewhat complex.

SI-> non-fork()ing servers are quicker. Apache for example, uses fork() and is
SI-> far, far slower than Zeus or thttpd, which use select().

Afaik Apache forks lots of threads before incoming http requests. So clients
don't wait for fork() which takes a lot of time. But this wastes memory and
other system resources.


-- 
Gurer Ozen (gozen@isbank.net.tr, palpa@linuxfan.com)
Si non confectus, non reficiat!

Sorcerers say that in every explanation there is a hidden apology.
So, when you are explaining why you cannot do this or that, you're
really apologizing for your shortcomings, hoping that whoever is
listening to you will have the kindness to understand them.
-- Nagual Don Juan



@ENDNODE
@NODE "Mail_90" " Re: dos.library Close() won't work! HELP! "
From: W1bBle <layabouts@the-giant-sofa.demon.co.uk>
Date: 02-15-00 18:01:02
Subject: @{b}Re: dos.library Close() won't work! HELP!@{ub}

From: W1bBle <layabouts@the-giant-sofa.demon.co.uk>

Hi Francis, and IIkka too:

On 15-Feb-00, Francis G. Loch wrote:
> From: Francis Loch  <fgloch@yahoo.com>
> 
> Hi there,
> 
> --- W1bBle <layabouts@the-giant-sofa.demon.co.uk>
> wrote:
>> Hi all,
>> 
>> I'm trying to write a little program to purge the
>> .DELDIR of a PFS2 or 3
>> partition (what do you mean I'm paranoid?! 
> 
> I tried and failed to write a similar program. It
> seems that PFS will not allow you to delete any of the
> files in the .deldir directory using the standard
> commands. I even tried setting the protection bits to
> deletable, but it doesn't even allow that!

I think you've slightly misinterpreted the method I'm trying to use to do the
job! My line of thinking went like this....

1) I want to get rid of the contents of the .DELDIR
2) Tried deleting files in .DELDIR. Can't!
3) Tried altering protection bits of files in .DELDIR. Can't!
4) DAMN DAMN DAMN!!! :)
5) Conclusion - protection /enforced/ by file system

So, take another approach.....?

Notice that oldest file in .DELDIR gets removed when new file in some place
on that device/volume gets removed in the conventional way. Therefore .DELDIR
is like FIFO stack or pipeline ie. first thing entered in to it is the first
thing to get "pushed over the edge" into the bit bucket when the .DELDIR
contents hits capacity.

So, the thinking goes, if I can create and then delete as many files as equal
to the capacity of the .DELDIR (32 in PFS2 and user configurable upto 99(?) in
PFS3), and these files contain nothing of any value, like (say) the string
"hello world!", then I will have pushed out all the .DELDIR entries that refer
to any "real" ie. useful or perhaps sensitive files, and replaced them all
with entries to a bunch of identical files created and destroyed sequentially
that are all very small and contain useless information.

The intended result:

aosshell> dir sys:.DELDIR
pfspurgefile@001
pfspurgefile@002
pfspurgefile@003
pfspurgefile@004
pfspurgefile@005
pfspurgefile@006
pfspurgefile@007
pfspurgefile@008
pfspurgefile@009
pfspurgefile@010

etc...

So its kind of like flushing a pipeline by forcing a load of rubbish through
it to replace its old contents. What do you guys think? Does this seem like a
good approach?

Unfortunately, I just can't seem to get Close() and DeleteFile() to work on a
normal, regular file as required by this approach, and I don't know what I'm
doing wrong. So far as I can tell, what I'm doing is only equivalent to (say)
creating and consequently destroying a load of temp files during program
execution, but the OS won't let me for some reason. And the docs say I can't
try to Close(fp) twice, even if the first call failed, so I'm really stuck.
Help! 

Regards
-- 
<------------------------------------------------>
 | Giles Burdett                    __   ___    |
 |  IRC nick = W1bBle              ///  (. .)   |
 |                                ///   ( v )   |
 |  A1200T 200MHz PPC        __  ///   //   \\  |
 | OS 3.1 / Linux-m68k       \\\///    .X # X.  |
 |                            \XX/     XX___XX  |
<------------------------------------------------>


@ENDNODE
@NODE "Mail_91" " Re: dos.library Close() won't work! HELP! "
From: Christian Hattemer <Chris@heaven.riednet.wh.tu-darmstadt.de>
Date: 02-15-00 18:55:34
Subject: @{b}Re: dos.library Close() won't work! HELP!@{ub}

From: Christian Hattemer <Chris@heaven.riednet.wh.tu-darmstadt.de>

On 15-Feb-00 Francis G. Loch wrote:

> I tried and failed to write a similar program. It
> seems that PFS will not allow you to delete any of the
> files in the .deldir directory using the standard
> commands. I even tried setting the protection bits to
> deletable, but it doesn't even allow that!

You can't delete files in the .deldir, the program doesn't do this also.
When I tried it failed already at the fprintf, the file was still empty
after the program finished. This is quite strange, don't have any idea why.

But here's a way that works, I use it sometimes when there's a large file in
the .deldir. pfs doesn't like that and hangs in a loop, it used to crash
before the update...
Simply make a copy of a large directory an delete it again, this will fill
the .deldir with the new files an flush the old ones.

Bye, Chris

-- 
            __
           ///
      __  ///  Amiga 4000T 040/40      Team *AMIGA*
      \\\///
       \XX/    http://www.riednet.wh.tu-darmstadt.de/~chris/

Yes, they really try multitasking with Pentiums:
Cooking and computing with the same processor!
Problem is: Computing is still under development.


@ENDNODE
@NODE "Mail_92" " Re: Posix fork() ing. "
From: Stephen Illingworth <stevei@firewall.co.uk>
Date: 02-15-00 19:04:59
Subject: @{b}Re: Posix fork() ing.@{ub}

From: Stephen Illingworth <stevei@firewall.co.uk>

Hello GURER

On 15-Feb-00, you wrote:

> From: "GURER OZEN" <gozen@isbank.net.tr>

> Another solution can be using gnu pth. It uses software threads, so faster
> than real fork() and still gives threads. I don't know if it is portable
> to amigaos though. And its api is somewhat complex.
>

Well  it  has been ported but I can't vouch for it's veracity as I've never
used it.  It's on the GeekGadgets ftp site.

    ftp://ftp.ninemoons.com/pub/geekgadgets/amiga/m68k/alpha/misc/

> Afaik Apache forks lots of threads before incoming http requests. So
> clients don't wait for fork() which takes a lot of time. But this wastes
> memory and other system resources.
> 

Yes.  The so called pre-fork.


Steve



@ENDNODE
@NODE "Mail_93" " Multithreading + Math Libraries again "
From: "Alastair M. Robinson" <blackfive@fakenhamweb.co.uk>
Date: 02-15-00 23:50:03
Subject: @{b}Multithreading + Math Libraries again@{ub}

From: "Alastair M. Robinson" <blackfive@fakenhamweb.co.uk>

Hi Everyone,

Since multithreading seems to have been a recent topic, I'm repeating my
earlier question about the math libs.  This time I'll try to explain the
problem more more clearly! 

The following is an excerpt from the DevCD 2.1:
<quote>
    Each Task using an IEEE math library must open the library itself.
    Library base pointers to these libraries may not be shared.
    Libraries can be context sensitive and may use the Task structure to
    keep track of the current context.  Sharing of library bases by Tasks
    may seem to work in some systems.  This is true for any of the IEEE
    math libraries.
</quote>

(The following refers to VBCC, I /think/ most of it applies to other
compilers too.  Correct me if I'm wrong.)

On machines with no FPU, math performed on floats is implemented with a
link-library, which calls mathieee#?.library.  The libraries are opened by
the startup code, and their bases are stored in *global* variables.  When
a floating-point math operation is needed, the link-library retrieves the
appropriate base from these globals, and calls the relevant functions.

This is all fine until you want to create a sub-task; then, according to the
RKM extract above, you should open a new copy of the math libs.

The question is this:  Where the *hell* do you store the newly-obtained
base, such that the subtask will use it, while allowing the parent task to
continue using the old base???

Until this problem is resolved, it is *unsafe* to use floating point math
from within a subtask, unless you're willing to make an FPU a requirement
for your program.

As I see it, there are two possible solutions to this problem:

Rewrite the math libs and startup code such that the library base can be
held locally.  (Perhaps this could be done by hooking into the
task->UserData stuff?)

Write an FPU emulator for the Amiga.  In the longer term this would be a
better bet.  Has anyone ever created such a thing?  I know it's possible
because not only does Software FPU work under ShapeShifter, but its
effects extend to the Amiga side as well!

All the best,
-- 
Alastair M. Robinson, email:blackfive@fakenhamweb.co.uk
Amiga 4000/030, 18Meg RAM, 4.3Gig HD, Mustek ScanExpress 6000SP
C, Assembler (68k, PIC16C84, learning ATMEL AVR), PostScript,
ARexx, AMOSPro(!), AmigaDOS

The path to hell is paved with government subsidies..


@ENDNODE
@NODE "Mail_94" " RE: Superbitmaps "
From: andrewmarkwell@ukonline.co.uk
Date: 02-16-00 00:24:12
Subject: @{b}RE: Superbitmaps@{ub}

On Tue, 15 Feb 2000 15:32:54 +0100, Tim Hanson 
<msinister@connectfree.co.uk> wrote:
> From: Tim Hanson <msinister@connectfree.co.uk>
> 
> Hi andrewmarkwell@ukonline.co.uk 
> andrewmarkwell@ukonline.co.uk wrote this on 14-Feb-00 at 12:43:20
> > From: andrewmarkwell@ukonline.co.uk
> > 
> > I have a superbitmap window and I want to be able to change the bit
> map to
> > one of a larger size when needed.
> > 
> > No probs, I thought, I'll just AllocBitMap() the desired size, copy
>  over the
> > existing plane data and point window->RPort->Layer->SuperBitMap at 
> the new
> > bitmap, then just use CopySBitMap() to update the display.
> 
> Just guessing, but did you supply the original bitmap as friend bitma
> p to
> AllocBitMap()?
> 

The original bitmap was attached when the window was opened with the 
WA_BitMap tag.

Andrew Markwell




@ENDNODE
@NODE "Mail_95" " Antwort: Re: Posix fork() ing. "
From: Raimund.Dold@bgt.de
Date: 02-16-00 10:04:05
Subject: @{b}Antwort: Re: Posix fork() ing.@{ub}

From: Raimund.Dold@bgt.de


You do not need to use a port of pth, all amiga changes for pth1.2.3 are
already in the baseline. Therefore, you can get pth from geekgadgets or
from any gnu server. If you want fork compile it with pthreads enabled.

Raimund






"GURER OZEN" <gozen@isbank.net.tr> on 15.02.2000 17:14:03

Bitte antworten an amiga-c@onelist.com

An:   amiga-c@onelist.com
Kopie:
Thema:    [amiga-c] Re: Posix fork() ing.


From: "GURER OZEN" <gozen@isbank.net.tr>

Hello,
SI-> From: Stephen Illingworth <stevei@firewall.co.uk>

SI-> Cosequently, my advice is not to fork() at all, but instead use select
()
SI-> together with it's support macros. It was desiged the kind of program
you
SI-> describe and is a helluva lot more efficient than fork().

Another solution can be using gnu pth. It uses software threads, so faster
than real fork() and still gives threads. I don't know if it is portable to
amigaos though. And its api is somewhat complex.

SI-> non-fork()ing servers are quicker. Apache for example, uses fork() and
is
SI-> far, far slower than Zeus or thttpd, which use select().

Afaik Apache forks lots of threads before incoming http requests. So
clients
don't wait for fork() which takes a lot of time. But this wastes memory and
other system resources.


--
Gurer Ozen (gozen@isbank.net.tr, palpa@linuxfan.com)
Si non confectus, non reficiat!

Sorcerers say that in every explanation there is a hidden apology.
So, when you are explaining why you cannot do this or that, you're
really apologizing for your shortcomings, hoping that whoever is
listening to you will have the kindness to understand them.
-- Nagual Don Juan



@ENDNODE
@NODE "Mail_96" " RE: Internet multiplayer support "
From: "Sealey, M." <mws2@leicester.ac.uk>
Date: 02-16-00 10:13:52
Subject: @{b}RE: Internet multiplayer support@{ub}

From: "Sealey, M." <mws2@leicester.ac.uk>

> Questions:
> 1: I assume that the game will run on the users machine and 
> send the players position only. Enemy movement will be kept
> sincronised by  making sure all players have the same list
> of enemies in the same order and that they have rand() set
> from the same seed at the same time. This looks like it
> could cause problems so how would I arrange error checking?

It would be better to use the values for 'speed' and 'direction'
to send data to the other players, plus a timestamp. Then each
client can extrapolate position by using simple physics. Otherwise
if the game lags, then enemies will be in two different positions
on different machines, bullets will hit an enemy yet miss the same
on another client.

> 3: Someone will presumably have to host AMarqueed the 
> AMarquee server for people to connect to. How do I persuade
> someone to do this?

Mail them and ask? :) There are people out there with Amigas
connected to ADSL links, so I doubt they'll see it as a major
major fuss to set their machine up to serve for a few hours
on a Friday or something.

> amount of data across a 4000cps connection?

If you have to send that much data, you're doing it wrong ;)
 
-- 
Matt Sealey mws2@le.ac.uk 
Distributed Systems Support
Computer Centre
University of Leicester

@ENDNODE
@NODE "Mail_97" " Re: Re: dos.library Close() won't work! HELP! "
From: "Francis G. Loch" <fgloch@yahoo.com>
Date: 02-16-00 12:13:46
Subject: @{b}Re: Re: dos.library Close() won't work! HELP!@{ub}

From: "=?iso-8859-1?q?Francis=20G.=20Loch?=" <fgloch@yahoo.com>

Hi there,

--- W1bBle <layabouts@the-giant-sofa.demon.co.uk>
wrote:
> I think you've slightly misinterpreted the method
> I'm trying to use to do the
> job! My line of thinking went like this....
> 
> 1) I want to get rid of the contents of the .DELDIR
> 2) Tried deleting files in .DELDIR. Can't!
> 3) Tried altering protection bits of files in
> .DELDIR. Can't!
> 4) DAMN DAMN DAMN!!! :)
> 5) Conclusion - protection /enforced/ by file system
> 
> So, take another approach.....?
> 
> Notice that oldest file in .DELDIR gets removed when
> new file in some place
> on that device/volume gets removed in the
> conventional way. Therefore .DELDIR
> is like FIFO stack or pipeline ie. first thing
> entered in to it is the first
> thing to get "pushed over the edge" into the bit
> bucket when the .DELDIR
> contents hits capacity.
> 
> So, the thinking goes, if I can create and then
> delete as many files as equal
> to the capacity of the .DELDIR (32 in PFS2 and user
> configurable upto 99(?) in
> PFS3), and these files contain nothing of any value,
> like (say) the string
> "hello world!", then I will have pushed out all the
> .DELDIR entries that refer
> to any "real" ie. useful or perhaps sensitive files,
> and replaced them all
> with entries to a bunch of identical files created
> and destroyed sequentially
> that are all very small and contain useless
> information.
> 
> The intended result:
> 
> aosshell> dir sys:.DELDIR
> pfspurgefile@001
> pfspurgefile@002
> pfspurgefile@003
> pfspurgefile@004
> pfspurgefile@005
> pfspurgefile@006
> pfspurgefile@007
> pfspurgefile@008
> pfspurgefile@009
> pfspurgefile@010
> 
> etc...
> 
> So its kind of like flushing a pipeline by forcing a
> load of rubbish through
> it to replace its old contents. What do you guys
> think? Does this seem like a
> good approach?
> 
> Unfortunately, I just can't seem to get Close() and
> DeleteFile() to work on a
> normal, regular file as required by this approach,
> and I don't know what I'm
> doing wrong. So far as I can tell, what I'm doing is
> only equivalent to (say)
> creating and consequently destroying a load of temp
> files during program
> execution, but the OS won't let me for some reason.
> And the docs say I can't
> try to Close(fp) twice, even if the first call
> failed, so I'm really stuck.
> Help! 

I like your way of thinking.

Perhaps, I have misinterpretted your method, but as
far as I can make out the system won't allow you to
delete *anything* that's in the .deldir directory,
although I've never tried to create a file in there.
I'll need to try that one and see.

Kind regards,

Francis.

=====
e-mail:- fgloch@yahoo.com
web-site:- http://www.geocities.com/fgloch
__________________________________________________
Do You Yahoo!?
Talk to your friends online with Yahoo! Messenger.
http://im.yahoo.com

@ENDNODE
@NODE "Mail_98" " Re: dos.library Close() won't work! HELP! "
From: W1bBle <layabouts@the-giant-sofa.demon.co.uk>
Date: 02-16-00 16:52:42
Subject: @{b}Re: dos.library Close() won't work! HELP!@{ub}

From: W1bBle <layabouts@the-giant-sofa.demon.co.uk>

Hi Francis

On 16-Feb-00, Francis G. Loch wrote:
> Perhaps, I have misinterpretted your method, but as
> far as I can make out the system won't allow you to
> delete *anything* that's in the .deldir directory,
> although I've never tried to create a file in there.
> I'll need to try that one and see.

I didn't mean creating stuff IN the .DELDIR. I meant doing this:

sh> echo "hello world!" >games:newfile
sh> delete games:newfile

over and over again. That way you take advantage of the *side effect* of the
deletion, which of course is to put a reference to games:newfile in
.DELDIR, knocking out an old reference as it does so.

So where before (with a .DELDIR size of 2 slots) you had

sh> dir data:.DELDIR
old_driver.lha@001
logfile.txt@002
sh>

you would now get

sh> dir data:.DELDIR
newfile@002
old_driver.lha@001
sh>

You see? If you repeat the echo/delete combo another time, you would have
*another* reference to newfile in .DELDIR as "newfile@001" and the
"old_driver.lha@001" would disappear. Yuppee! Flushed .DELDIR!!! :-)
Why does this work? Because PFS recognises revisions of a file with the same name
by its datestamp. Even if your system clock is wrong for some reason, it will
still work because it will rely on relative creation times.

It's gorgeous isn't it?! :) If only I could program the blasted thing!!!! :-/

Regards

Giles

-- 
<------------------------------------------------>
 | Giles Burdett                    __   ___    |
 |  IRC nick = W1bBle              ///  (. .)   |
 |                                ///   ( v )   |
 |  A1200T 200MHz PPC        __  ///   //   \\  |
 | OS 3.1 / Linux-m68k       \\\///    .X # X.  |
 |                            \XX/     XX___XX  |
<------------------------------------------------>


@ENDNODE
@NODE "Mail_99" " Re: Re: dos.library Close() won't work! HELP! "
From: "Francis G. Loch" <fgloch@yahoo.com>
Date: 02-16-00 18:14:43
Subject: @{b}Re: Re: dos.library Close() won't work! HELP!@{ub}

From: "=?iso-8859-1?q?Francis=20G.=20Loch?=" <fgloch@yahoo.com>

Hi there,

--- W1bBle <layabouts@the-giant-sofa.demon.co.uk>
wrote:
> Hi Francis
> 
> On 16-Feb-00, Francis G. Loch wrote:
> > Perhaps, I have misinterpretted your method, but
> as
> > far as I can make out the system won't allow you
> to
> > delete *anything* that's in the .deldir directory,
> > although I've never tried to create a file in
> there.
> > I'll need to try that one and see.
> 
> I didn't mean creating stuff IN the .DELDIR. I meant
> doing this:
> 
> sh> echo "hello world!" >games:newfile
> sh> delete games:newfile
> 
> over and over again. That way you take advantage of
> the *side effect* of the
> deletion, which of course is to put a reference to
> games:newfile in
> .DELDIR, knocking out an old reference as it does
> so.
> 
> So where before (with a .DELDIR size of 2 slots) you
> had
> 
> sh> dir data:.DELDIR
> old_driver.lha@001
> logfile.txt@002
> sh>
> 
> you would now get
> 
> sh> dir data:.DELDIR
> newfile@002
> old_driver.lha@001
> sh>
> 
> You see? If you repeat the echo/delete combo another
> time, you would have
> *another* reference to newfile in .DELDIR as
> "newfile@001" and the
> "old_driver.lha@001" would disappear. Yuppee!
> Flushed .DELDIR!!! :-)
> Why does this work? Because PFS recognises revisions
> of a file with the same name
> by its datestamp. Even if your system clock is wrong
> for some reason, it will
> still work because it will rely on relative creation
> times.
> 
> It's gorgeous isn't it?! :) If only I could program
> the blasted thing!!!! :-/

Aaaaahh, I think I've got you now. I don't think that
it's as nice as being able to actually delete the
files in the first place though. The only problem that
I can see with the way that you intend to do it is the
length of time it will take (e.g. using the maximum
number of files that .deldir can store which I think
is 990-something(?)) and the clock may have changed
during this process.

Regards,

Francis.

=====
e-mail:- fgloch@yahoo.com
web-site:- http://www.geocities.com/fgloch
__________________________________________________
Do You Yahoo!?
Talk to your friends online with Yahoo! Messenger.
http://im.yahoo.com

@ENDNODE
@NODE "Mail_100" " Re: Re: dos.library Close() won't work! HELP! "
From: "Francis G. Loch" <fgloch@yahoo.com>
Date: 02-16-00 18:14:43
Subject: @{b}Re: Re: dos.library Close() won't work! HELP!@{ub}

From: "=?iso-8859-1?q?Francis=20G.=20Loch?=" <fgloch@yahoo.com>

Hi there,

--- W1bBle <layabouts@the-giant-sofa.demon.co.uk>
wrote:
> Hi Francis
> 
> On 16-Feb-00, Francis G. Loch wrote:
> > Perhaps, I have misinterpretted your method, but
> as
> > far as I can make out the system won't allow you
> to
> > delete *anything* that's in the .deldir directory,
> > although I've never tried to create a file in
> there.
> > I'll need to try that one and see.
> 
> I didn't mean creating stuff IN the .DELDIR. I meant
> doing this:
> 
> sh> echo "hello world!" >games:newfile
> sh> delete games:newfile
> 
> over and over again. That way you take advantage of
> the *side effect* of the
> deletion, which of course is to put a reference to
> games:newfile in
> .DELDIR, knocking out an old reference as it does
> so.
> 
> So where before (with a .DELDIR size of 2 slots) you
> had
> 
> sh> dir data:.DELDIR
> old_driver.lha@001
> logfile.txt@002
> sh>
> 
> you would now get
> 
> sh> dir data:.DELDIR
> newfile@002
> old_driver.lha@001
> sh>
> 
> You see? If you repeat the echo/delete combo another
> time, you would have
> *another* reference to newfile in .DELDIR as
> "newfile@001" and the
> "old_driver.lha@001" would disappear. Yuppee!
> Flushed .DELDIR!!! :-)
> Why does this work? Because PFS recognises revisions
> of a file with the same name
> by its datestamp. Even if your system clock is wrong
> for some reason, it will
> still work because it will rely on relative creation
> times.
> 
> It's gorgeous isn't it?! :) If only I could program
> the blasted thing!!!! :-/

Aaaaahh, I think I've got you now. I don't think that
it's as nice as being able to actually delete the
files in the first place though. The only problem that
I can see with the way that you intend to do it is the
length of time it will take (e.g. using the maximum
number of files that .deldir can store which I think
is 990-something(?)) and the clock may have changed
during this process.

Regards,

Francis.

=====
e-mail:- fgloch@yahoo.com
web-site:- http://www.geocities.com/fgloch
__________________________________________________
Do You Yahoo!?
Talk to your friends online with Yahoo! Messenger.
http://im.yahoo.com

@ENDNODE
@NODE "Mail_101" " Hooks "
From: andrewmarkwell@ukonline.co.uk
Date: 02-16-00 21:34:08
Subject: @{b}Hooks@{ub}

From: andrewmarkwell@ukonline.co.uk

Hello,

Now I've got a problem with hooks.  I've been trying to compile the 
RKMModelClass example.  I'm using HiSoft C++  and it enforces very 
strict typing.  I'm trying to assign a function pointer to the SubEntry 
in the Hook struct but it's not having any of it!  Does anyone know the 
correct syntax, I've tried everything!

Andrew Markwell

@ENDNODE
@NODE "Mail_102" " Re: Passing parameters to functions "
From: Olivier Fabre <off@free.fr>
Date: 02-16-00 23:17:07
Subject: @{b}Re: Passing parameters to functions@{ub}

From: Olivier Fabre <off@free.fr>

>> I have another situation. How do convert acsii numbers to real numbers

There is also strtol() and strtoul() (which will convert also hexa numbers).

Regards
-- 
  // Olivier Fabre - StAn_ on IRCnet - http://off.free.fr
\X/  A1200  Apollo 1260  Pixel64  APNet  4.3GB  E/Box  OS3.5


@ENDNODE
@NODE "Mail_103" " Re: Hooks "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 02-16-00 23:38:37
Subject: @{b}Re: Hooks@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 16-Feb-00, andrewmarkwell@ukonline.co.uk wrote:

> [...] Does anyone know the correct syntax, I've tried everything!

The correct syntax is:
   hook.h_SubEntry = (ULONG(*)())MyFunction;

But there's a typedef for this so you can also write:
   hook.h_SubEntry = (HOOKFUNC)MyFunction;

But why use the SubEntry? It's the 'h_Entry' which is called, but maybe you're
using some reg-args to stack-args stub?

Regards Allan
-- 
     URL: http://www.DIKU.dk/students/duff/
<sb>
OS/2 - half of operating system


@ENDNODE
@NODE "Mail_104" " Re: Internet multiplayer support "
From: Olivier Fabre <off@free.fr>
Date: 02-17-00 05:09:36
Subject: @{b}Re: Internet multiplayer support@{ub}

From: Olivier Fabre <off@free.fr>

On 16-fév-00, Sealey, M., you wrote:

>> 1: I assume that the game will run on the users machine and 
>> send the players position only. Enemy movement will be kept
>> sincronised by  making sure all players have the same list
>> of enemies in the same order and that they have rand() set
>> from the same seed at the same time. This looks like it
>> could cause problems so how would I arrange error checking?

> It would be better to use the values for 'speed' and 'direction'
> to send data to the other players, plus a timestamp. Then each
> client can extrapolate position by using simple physics. Otherwise
> if the game lags, then enemies will be in two different positions
> on different machines, bullets will hit an enemy yet miss the same
> on another client.

There's an article about this on http://www.gameprog.com/gamedev.asp .
The author suggest using cubic splines to compute probable player position
between two points. This way, no need to send too many coordinates per
second..

>> amount of data across a 4000cps connection?

> If you have to send that much data, you're doing it wrong ;)

-- 
  // Olivier Fabre - StAn_ on IRCnet - http://off.free.fr
\X/  A1200  Apollo 1260  Pixel64  APNet  4.3GB  E/Box  OS3.5


@ENDNODE
@NODE "Mail_105" " Re: More processes... "
From: Andrew Bell <andrew.ab2000@bigfoot.com>
Date: 02-17-00 07:44:03
Subject: @{b}Re: More processes...@{ub}

From: Andrew Bell <andrew.ab2000@bigfoot.com>

Hi andrewmarkwell@ukonline.co.uk,

On 10-Feb-00 you wrote: [amiga-c] More processes...

> The program crashes about 2 out of 3 times the instant that the
> child process is deleted, with a 8000 0004, or a 8000 000B. I say
> usually, because occasionally it doesn't crash at all and works
> perfectly!

Maybe it's trying to close an input/output handle that doesn't belong
to it? If a child process closed the input/output filehandles of the
parent when it quit, the parent process would crash as soon as it
attempted to print anything or use them (non existing) input/output
filehandles in any way.

> I'm using the amiga.lib CreatePort()/DeletePort() for the ports, and
> the dos.library/CreateNewProcTags() to create the child process. I'm
> assuming that the process is destroyed after its function specified
> in NP_Entry exits

Correct, don't quit your parent process until all the child processes
are dead (that is, if they share the same seglist as the parent).

> (I can't find much documentation on the dos
> library).

Join the club. :-/

Regards, Andrew Bell.
-- 

+----------------------------------------+ 
email: mailto:andrew.ab2000@bigfoot.com
  web: http://www.andrewb.exl.co.uk
+----------------------------------------+
Idiot congressman...Hey! That's redundant.




@ENDNODE
@NODE "Mail_106" " Re: What's wrong with the following? "
From: Andrew Bell <andrew.ab2000@bigfoot.com>
Date: 02-17-00 07:50:28
Subject: @{b}Re: What's wrong with the following?@{ub}

From: Andrew Bell <andrew.ab2000@bigfoot.com>

Hi Alexander,

On 13-Feb-00 you wrote: [amiga-c] What's wrong with the following?

>   What is wrong with the attached code?  The problem is that at the
> CreatePort line I end up with a number of enforcer hits and then an
> exception - crash :-(

The PC has suddenly ended up at a random pointer, which contains
random and unexecutable data, thus triggering an exception. This can
happen, for example, when you forget to setup a library base pointer
like SysBase before calling an exec function. This would make the CPU
jump to a fairly random PC (jsr -xxx(a6)) when a6 contains a NULL or
dangling pointer.

I suspect this is your problem - make sure SysBase is valid. Or maybe
you've forgot to link in your startup code?

Regards, Andrew Bell.
-- 

+----------------------------------------+ 
email: mailto:andrew.ab2000@bigfoot.com
  web: http://www.andrewb.exl.co.uk
+----------------------------------------+
PUNNY BOOK = Small Vegetables: Russell Sprout.




@ENDNODE
@NODE "Mail_107" " Re: Multithreading + Math Libraries again "
From: Gavin Kinsey <gavin@kinsey.u-net.com>
Date: 02-17-00 22:19:11
Subject: @{b}Re: Multithreading + Math Libraries again@{ub}

From: Gavin Kinsey <gavin@kinsey.u-net.com>

I received a message from Alastair M. Robinson, a reply follows,
> 
> Write an FPU emulator for the Amiga.  In the longer term this would be a
> better bet.  Has anyone ever created such a thing?  I know it's possible
> because not only does Software FPU work under ShapeShifter, but its
> effects extend to the Amiga side as well!

There is also one for m68k linux that apparantly works quite well in the
latest kernels, but I have no idea how you could integrate this into
AmigaOS.  I would guess you would need to make it part of the OS itself,
making it a job for H&P.

-- 
Atheism is a non-prophet organization.

Gavin Kinsey


@ENDNODE
@NODE "Mail_108" " Re: Multithreading + Math Libraries again "
From: Andrew Bell <andrew.ab2000@bigfoot.com>
Date: 02-18-00 08:46:14
Subject: @{b}Re: Multithreading + Math Libraries again@{ub}

From: Andrew Bell <andrew.ab2000@bigfoot.com>

Hi Alastair,

On 15-Feb-00 you wrote: [amiga-c] Multithreading + Math Libraries
again

> Write an FPU emulator for the Amiga. In the longer term this would
> be a better bet. Has anyone ever created such a thing? I know it's
> possible because not only does Software FPU work under ShapeShifter,
> but its effects extend to the Amiga side as well!

I'm no expert on FPU programming, but such an implementation would
require you to install a Line F exception handler, which would
emulate each FPU instruction on the fly.

Regards, Andrew Bell.
-- 

+----------------------------------------+ 
email: mailto:andrew.ab2000@bigfoot.com
  web: http://www.andrewb.exl.co.uk
+----------------------------------------+
I am Lando of Borg: You will be assimilated...It's Not My Fault!




@ENDNODE
@NODE "Mail_109" " RE: Re: Multithreading + Math Libraries again "
From: "Sealey, M." <mws2@leicester.ac.uk>
Date: 02-18-00 10:42:52
Subject: @{b}RE: Re: Multithreading + Math Libraries again@{ub}

From: "Sealey, M." <mws2@leicester.ac.uk>

> > Write an FPU emulator for the Amiga. In the longer term this would
> > be a better bet. Has anyone ever created such a thing? I know it's
> > possible because not only does Software FPU work under ShapeShifter,
> > but its effects extend to the Amiga side as well!
> 
> I'm no expert on FPU programming, but such an implementation would
> require you to install a Line F exception handler, which would
> emulate each FPU instruction on the fly.

Which is easy, isn't it? How hard would it be to redirect math functions
to those in the mathieee#? libraries as a starting point?

I'm sure if we all ask Thomas Richter nicely, he'll make one for his
lovely ickle mmu.library distributions ;)

-- 
Matt Sealey mws2@le.ac.uk 
Distributed Systems Support
Computer Centre
University of Leicester

@ENDNODE
@NODE "Mail_110" " RE: Hooks "
From: andrewmarkwell@ukonline.co.uk
Date: 02-18-00 10:52:58
Subject: @{b}RE: Hooks@{ub}

From: andrewmarkwell@ukonline.co.uk

On Wed, 16 Feb 2000 23:38:37 +0100, Allan Odgaard <Duff@DIKU.DK> wrote:
> From: Allan Odgaard <Duff@DIKU.DK>
> 
> On 16-Feb-00, andrewmarkwell@ukonline.co.uk wrote:
> 
> > [...] Does anyone know the correct syntax, I've tried everything!
> 
> The correct syntax is:
>    hook.h_SubEntry = (ULONG(*)())MyFunction;
> 
> But there's a typedef for this so you can also write:
>    hook.h_SubEntry = (HOOKFUNC)MyFunction;

Thanks.
 
> But why use the SubEntry? It's the 'h_Entry' which is called, but may
> be you're
> using some reg-args to stack-args stub?

My compiler doesn't support registerized parameters so I have to assign 
the amiga.lib function HookEntry() pointer to hook.h_Entry.

Andrew Markwell

@ENDNODE
@NODE "Mail_111" " RE: More processes... "
From: andrewmarkwell@ukonline.co.uk
Date: 02-18-00 10:55:29
Subject: @{b}RE: More processes...@{ub}

From: andrewmarkwell@ukonline.co.uk

On Thu, 17 Feb 2000 06:44:03 +0000, Andrew Bell 
<andrew.ab2000@bigfoot.com> wrote:
> From: Andrew Bell <andrew.ab2000@bigfoot.com>
> 
> Hi andrewmarkwell@ukonline.co.uk,
> 
> On 10-Feb-00 you wrote: [amiga-c] More processes...
> 
> > The program crashes about 2 out of 3 times the instant that the
> > child process is deleted, with a 8000 0004, or a 8000 000B. I say
> > usually, because occasionally it doesn't crash at all and works
> > perfectly!
> 
> Maybe it's trying to close an input/output handle that doesn't belong
> 
> to it? If a child process closed the input/output filehandles of the
> parent when it quit, the parent process would crash as soon as it
> attempted to print anything or use them (non existing) input/output
> filehandles in any way.

The problem was actually unrelated to the process code.

> > (I can't find much documentation on the dos
> > library).
> 
> Join the club. :-/

I heard the Amiga Guru Book was good - does anyone know where I can get 
it from in the UK?

Andrew Markwell

@ENDNODE
@NODE "Mail_112" " Help needed with GT_GetGadgetAttrs() "
From: amimjf@hotmail.com
Date: 02-18-00 15:11:06
Subject: @{b}Help needed with GT_GetGadgetAttrs()@{ub}

From: amimjf@hotmail.com

Hi,..

For some reason (i presume i am not dereferencing it correctly), i always get a longword pointer back from this call.

How do i translate this into a string, int or whatever,.. (staright de-referencing dont seem to work),.. examples in code would be better, thanks for any help.

-matthew

@ENDNODE
@NODE "Mail_113" " dbplayer.library "
From: Stefan Schulze <stefan@dreamworlds.de>
Date: 02-18-00 17:15:35
Subject: @{b}dbplayer.library@{ub}

From: Stefan Schulze <stefan@dreamworlds.de>

Hi,

to play Digibooster mods I tried the mentioned library. Without AHI
initialisation it works fine, but inside an working AHI-Mode it always failes
to play. 

Has anyone experience with it? I also wrote to the author, but he never
answered.

Bye, Stefan.
-- 
"The dream has led me - And i will follow into the glowing fire." (Lacrimosa)
Dreamworlds Development - www.dreamworlds.de

XFire I/II, YATAG, VoxelRace, Between The Lines




@ENDNODE
@NODE "Mail_114" " Re: Hooks "
From: Alexander Niven-Jenkins <anj@cremlinsoftware.org>
Date: 02-18-00 17:27:48
Subject: @{b}Re: Hooks@{ub}

From: Alexander Niven-Jenkins <anj@cremlinsoftware.org>

Hiya andrewmarkwell@ukonline.co.uk,

On 18-Feb-00, you wrote:

>> But why use the SubEntry? It's the 'h_Entry' which is called, but may
>> be you're
>> using some reg-args to stack-args stub?

> My compiler doesn't support registerized parameters so I have to assign 
> the amiga.lib function HookEntry() pointer to hook.h_Entry.

   In the previous msg you mentioned that you use HiSOFT C++, well I use
hooks as the below code shows.  As you see I can happily used registerised
parameters (this is from a MU GUI I'm doing) :-)

----- code here -----

// REG
#ifndef REG
#define REG( x ) register __##x
#endif

// GCCREG
#ifndef GCCREG
#define GCCREG( x )
#endif

// REGS
#ifndef REGS
#define REGS( x, p ) REG( x ) p GCCREG( x )
#endif

// ASM
#ifndef ASM
#define ASM
#endif

// SAVEDS
#ifndef SAVEDS
#define SAVEDS
#endif

----- that was the defines -----

void ASM SAVEDS BT_StartFunc( REGS( a2, Object *BT_Button ), REGS( a1, ULONG
param1 ) )
{
   // code here
}

----- function (registerised parameters) -----

static const struct Hook BT_StartHook = { { NULL, NULL }, ( HOOKFUNC
)BT_StartFunc, NULL, NULL };

----- hook ------

   Does that help?

Kind regards...

Alex
-- 
Cremlin Software - http://www.cremlinsoftware.org
Founder, lead programmer - ghandi@cremlinsoftware.org
Production, programmer - anj@cremlinsoftware.org


@ENDNODE
@NODE "Mail_115" " Re: Multithreading + Math Libraries again "
From: Alexander Niven-Jenkins <anj@cremlinsoftware.org>
Date: 02-18-00 17:29:06
Subject: @{b}Re: Multithreading + Math Libraries again@{ub}

From: Alexander Niven-Jenkins <anj@cremlinsoftware.org>

Hiya Andrew,

On 18-Feb-00, you wrote:

>> Write an FPU emulator for the Amiga. In the longer term this would
>> be a better bet. Has anyone ever created such a thing? I know it's
>> possible because not only does Software FPU work under ShapeShifter,
>> but its effects extend to the Amiga side as well!

> I'm no expert on FPU programming, but such an implementation would
> require you to install a Line F exception handler, which would
> emulate each FPU instruction on the fly.

   Isn't this what CyberPatcher, OxyronPatcher and FastIEEE do?  Emulate the
FPU on the fly?

   Or have I got the wrong end of the stick.

Kind regards...

Alex
-- 
Cremlin Software - http://www.cremlinsoftware.org
Founder, lead programmer - ghandi@cremlinsoftware.org
Production, programmer - anj@cremlinsoftware.org


@ENDNODE
@NODE "Mail_116" " RE: Re: Multithreading + Math Libraries again "
From: Jesper Svennevid <jesper@fxrealm.com>
Date: 02-18-00 18:18:28
Subject: @{b}RE: Re: Multithreading + Math Libraries again@{ub}

From: Jesper Svennevid <jesper@fxrealm.com>

> From: Alexander Niven-Jenkins <anj@cremlinsoftware.org>
> 
> Hiya Andrew,
> 
> On 18-Feb-00, you wrote:
> 
> >> Write an FPU emulator for the Amiga. In the longer term this would
> >> be a better bet. Has anyone ever created such a thing? I know it's
> >> possible because not only does Software FPU work under 
> ShapeShifter,
> >> but its effects extend to the Amiga side as well!
> 
> > I'm no expert on FPU programming, but such an implementation would
> > require you to install a Line F exception handler, which would
> > emulate each FPU instruction on the fly.
> 
>    Isn't this what CyberPatcher, OxyronPatcher and FastIEEE 
> do?  Emulate the
> FPU on the fly?
> 
>    Or have I got the wrong end of the stick.

Not quite. They replace the emulation-code for the op-codes that are
unimplemented on 040/060 systems. Emulating a full FPU is a bit more
difficult. :)

(But if someone wanna give it a go, have a look at how NetBSD has
implemented this, they have a quite good one.)

-- 
// Jesper Svennevid : jesper@fxrealm.com
   Software Developer at FXRealm Studios
   http://www.fxrealm.com/

@ENDNODE
@NODE "Mail_117" " Re: Paula access again "
From: Stefan Schulze <stefan@dreamworlds.de>
Date: 02-18-00 19:10:20
Subject: @{b}Re: Paula access again@{ub}

From: Stefan Schulze <stefan@dreamworlds.de>

Hi Duane, 

> To stop a playing sample from repeating, program AUDxLC so that it
> points to a null word in chipram, then set AUDxLEN to 1 word. 
Works fine here. The only problem is now: How to start other samples
immediately? All entries there only work after the first sample has been
completed.

> You
> can do this via interrupt control or use timers. Note that you
> need to do this after the sample has started but before it has
> finished. This technique is also used to play samples longer
> than 128K in length (except this time you program the next
> part of the sample while the current part is playing).
Not needed. Thanks, though.

> No, there's no automatic one-shot mode.
Well... the one described above is automatic enough for me :)

>             Clock Constant
> Period = --------------------------
>         Frequency * BytesPerSample
I guess there's a mistake in it as the resulting values are always around 0.5.

Or did I misunderstand something? What do BytesPerSample mean? I thought its
the sample length, but the results are strange in this way.


> where "Clock Constant" = 3579545 for NTSC machines or 3546895 for PAL
> machines, "Frequency" is the frequency in Hertz, and "BytesPerSample"
> is the number of bytes in the sample to play.
As described above, the formula doesn't work well.

> If you want example code (asm though) to load and one-shot play
> IFF-8SVX samples, just ask. It supports uncompressed samples as
> well as exponential and Fibonacci compression.
The game is both PPC and 68k, so ASM examples are quite useless. It's only
thought to be an AHI alternative as many people have problems with AHI.

Bye, Stefan.
-- 
"The dream has led me - And i will follow into the glowing fire." (Lacrimosa)
Dreamworlds Development - www.dreamworlds.de

XFire I/II, YATAG, VoxelRace, Between The Lines




@ENDNODE
@NODE "Mail_118" " Execute "
From: Mike Carter <mike.carter@bigfoot.com>
Date: 02-18-00 23:48:27
Subject: @{b}Execute@{ub}

From: Mike Carter <mike.carter@bigfoot.com>

Hi,

I'm having trouble using the easy Execute() command (honest).
For some reason my code is crashing, here it is:-

void AddToLha(char *name)
{
    char command[200];    
    sprintf(command, "LhA -Ad3ryY r \"%s.lha\" \"%s\"", name, name);
    
    Printf("da command is=%s\n", command);
    Execute(command, NIL, NIL);
}

I get either a system freeze or a straight crash :-(  What, if
anything, should I put in the last two parameters input & output? 
I'm not interested in displaying any output.

I iz really confused - maybe I just drank too much coffeeand it's
late?!



M!KE C.

-- 

.--------------------------------- ---- -    -- --------.
| AMiGA 1200EZT 060/PPC@240Mhz,50Mb RAM __/\__          |
| 4 HDD,DD FD,5 CD-ROMS,CDrW,ZiP250     \ o0 / bUDDa/S^D|
| SCSI+IDE,56kModem,BVGfX,19"VDU        /_'-_\          |
`------------------------------- --- -    \/   -- ------'
  http://fly.to/BuddasWurld               ICQ: 29173597


@ENDNODE
@NODE "Mail_119" " RE: Hooks "
From: andrewmarkwell@ukonline.co.uk
Date: 02-18-00 23:56:40
Subject: @{b}RE: Hooks@{ub}

From: andrewmarkwell@ukonline.co.uk

On Fri, 18 Feb 2000 16:27:48 +0000, Alexander Niven-Jenkins 
<anj@cremlinsoftware.org> wrote:
> From: Alexander Niven-Jenkins <anj@cremlinsoftware.org>
> 
> Hiya andrewmarkwell@ukonline.co.uk,
> 
> On 18-Feb-00, you wrote:
> 
> >> But why use the SubEntry? It's the 'h_Entry' which is called, but 
> may
> >> be you're
> >> using some reg-args to stack-args stub?
> 
> > My compiler doesn't support registerized parameters so I have to as
> sign 
> > the amiga.lib function HookEntry() pointer to hook.h_Entry.
> 
>    In the previous msg you mentioned that you use HiSOFT C++, well I 
> use
> hooks as the below code shows.  As you see I can happily used registe
> rised
> parameters (this is from a MU GUI I'm doing) :-)

Ahh... I never knew this... I'll just blame it on the poor 
documentation :P

> 
>    Does that help?

Thanks

Andrew Markwell

@ENDNODE
@NODE "Mail_120" " Re: Multithreading + Math Libraries again "
From: Nuno Trancoso <ng13577a@netc.pt>
Date: 02-19-00 00:14:11
Subject: @{b}Re: Multithreading + Math Libraries again@{ub}

From: Nuno Trancoso <ng13577a@netc.pt>

Hya Alexander

>   Isn't this what CyberPatcher, OxyronPatcher and FastIEEE do?  Emulate the
> FPU on the fly?

More or less. The replace some FPU instruction not implemented on the 040/060
FPU's with replacement code. This can make a BIG difference in speed when
the programs hits the unimplemented instructions a lot. The worst case i've seen
was Real 3D Classic Turbo.

Cya l8r,

DarkShadow
aka Nuno Trancoso
-- 
Infinity takes it's time.


@ENDNODE
@NODE "Mail_121" " Re: Help needed with GT_GetGadgetAttrs() "
From: Andrew Bell <andrew.ab2000@bigfoot.com>
Date: 02-19-00 00:21:29
Subject: @{b}Re: Help needed with GT_GetGadgetAttrs()@{ub}

From: Andrew Bell <andrew.ab2000@bigfoot.com>

Hi amimjf@hotmail.com,

On 18-Feb-00 you wrote: [amiga-c] Help needed with GT_GetGadgetAttrs()

> How do i translate this into a string, int or whatever,.. (staright
> de-referencing dont seem to work),.. examples in code would be
> better, thanks for any help.

It really depends on the gadget you're using. For example, to get the
contents of a string gadget, try this:

UBYTE *YourStrPtr = "";

if (GT_GetGadgetAttrs(YourStrGad, YourWnd, NULL,
        GTST_String, &YourStrPtr,
        TAG_DONE) == 1)
{
        printf("The string gadget contains %s\n", YourStrPtr);
}

Regards, Andrew Bell.
-- 

+----------------------------------------+ 
email: mailto:andrew.ab2000@bigfoot.com
  web: http://www.andrewb.exl.co.uk
+----------------------------------------+
Monkey in blender = Rhesus Pieces




@ENDNODE
@NODE "Mail_122" " Re: Hooks "
From: Andrew Bell <andrew.ab2000@bigfoot.com>
Date: 02-19-00 00:23:25
Subject: @{b}Re: Hooks@{ub}

From: Andrew Bell <andrew.ab2000@bigfoot.com>

Hi andrewmarkwell@ukonline.co.uk,

On 18-Feb-00 you wrote: [amiga-c] RE: Hooks

> My compiler doesn't support registerized parameters so I have to
> assign the amiga.lib function HookEntry() pointer to hook.h_Entry.

All Amiga compilers should allow you to pass parameters via CPU
registers. What compiler are you using?

Regards, Andrew Bell.
-- 

+----------------------------------------+ 
email: mailto:andrew.ab2000@bigfoot.com
  web: http://www.andrewb.exl.co.uk
+----------------------------------------+
BOARDHEADS do it with stiff masts




@ENDNODE
@NODE "Mail_123" " Re: Execute "
From: Martyn Capewell <mmc28@hermes.cam.ac.uk>
Date: 02-19-00 01:27:49
Subject: @{b}Re: Execute@{ub}

From: Martyn Capewell <mmc28@hermes.cam.ac.uk>

Hello Mike

On 18-Feb-00, you wrote:

> From: Mike Carter <mike.carter@bigfoot.com>
> 
> Hi,
> 
> I'm having trouble using the easy Execute() command (honest).
> For some reason my code is crashing, here it is:-
> 
> void AddToLha(char *name)
> {
>    char command[200];    
>    sprintf(command, "LhA -Ad3ryY r \"%s.lha\" \"%s\"", name, name);
>    
>    Printf("da command is=%s\n", command);
>    Execute(command, NIL, NIL);
> }
> 
> I get either a system freeze or a straight crash :-(  What, if
> anything, should I put in the last two parameters input & output? 
> I'm not interested in displaying any output.

Input should be NULL. Maybe try setting output to "Open("NIL:",MODE_NEWFILE)".

Regards
-- 
- Martyn Capewell

... but you can't expect to wield supreme executive power just because some watery tart threw a sword at you!


@ENDNODE
@NODE "Mail_124" " Re: Execute "
From: BlackMael <harrism@ihug.co.nz>
Date: 02-19-00 15:39:49
Subject: @{b}Re: Execute@{ub}

From: BlackMael <harrism@ihug.co.nz>

Greetings and Salutations, Mike.

On 18-Feb-00, *Mike* was saying...

> I'm having trouble using the easy Execute() command (honest).
> For some reason my code is crashing, here it is:-

> void AddToLha(char *name)
> {
>    char command[200];    
>    sprintf(command, "LhA -Ad3ryY r \"%s.lha\" \"%s\"", name, name);
>    
>    Printf("da command is=%s\n", command);
>    Execute(command, NIL, NIL);
> }

> I get either a system freeze or a straight crash :-(  What, if
> anything, should I put in the last two parameters input & output? 
> I'm not interested in displaying any output.

> I iz really confused - maybe I just drank too much coffeeand it's
> late?!

First off, what is *NIL*?  I guess that should be *NULL*.  In which case, it's OK to pass NULL for the input file handle, but if your application is started from
Workbench, you really need to pass an appropriate output file handle.
For example...

    outhandle = Open( "T:command.out", MODE_NEWFILE);
    if (outhandle)
    {
        Execute( command, NULL, outhandle); 
        Close( outhandle);
        outhandle = NULL;
    }


Yours, etc etc.
   _Martin_

-- 
What happens to the hole when the cheese is gone?
-- Bertolt Brecht
-- 
<sb>*BlackMael*
<sb>UIN 12938250
<sb>Team *AMIGA*



@ENDNODE
@NODE "Mail_125" " alternate entry points. "
From: amimjf@hotmail.com
Date: 02-19-00 16:17:57
Subject: @{b}alternate entry points.@{ub}

From: amimjf@hotmail.com

Hi,..

I have been codeing cli / wb interfaces to the same core code, i have been using wbmain() to startup with Dice, and argc==0 under gcc-libnix, but i dont have any expericence of other compilers. All my code needs to be basicly platform indpendant, so i cant check for WBstatup mesasges in ansi main(),..
cos that would die under unix or win32. 

could you good floks please //append// any storm / sas / vbcc worbench entry 
code that you know of to the bottom of this file, thanks.

-matthew 

@ENDNODE
@NODE "Mail_126" " Close() still won't work    (was: dos.library Close() won't work! HELP!) "
From: W1bBle <layabouts@the-giant-sofa.demon.co.uk>
Date: 02-19-00 16:48:25
Subject: @{b}Close() still won't work    (was: dos.library Close() won't work! HELP!)@{ub}

From: W1bBle <layabouts@the-giant-sofa.demon.co.uk>

Hi all,

I'm afraid I'm still having the same problem opening and consequently
closing files. I have now tried SnoopDOS as IIkka suggested, but that only
manages to keep track of Open and Delete so it wasn't much help - however,
it did confirm the debug output from my program.

I have also tried to remove the buffered output FPrintf() call, but that
didn't help either :-(

Finally, I tried to compile it with some different things. First, I tried
vbccm68k, and that gave me the same problem, along with a load of garbage
in the result of strcat() which scared the hell out of me. Then I tried the
StormC 2 demo off an old CU CD and it did the exact same thing as the exe
made by vbccwos. Humph :-(

I've been running mu-Force too, and the only Hit I generated was loading
StormC 2! :)

So I guess I'm doing something the OS would rather I didn't. But what?
Anyone got any ideas on this? Latest source included - only minor changes
since the last time it didn't work! ;-)

Cheers,

Giles

-- 
<------------------------------------------------>
 | Giles Burdett                    __   ___    |
 |  IRC nick = W1bBle              ///  (. .)   |
 |                                ///   ( v )   |
 |  A1200T 200MHz PPC        __  ///   //   \\  |
 | OS 3.1 / Linux-m68k       \\\///    .X # X.  |
 |                            \XX/     XX___XX  |
<------------------------------------------------>

@ENDNODE
@NODE "Mail_127" " Re: Re: Paula access again "
From: Duane McDonnell <dmcdonnell@primus.com.au>
Date: 02-19-00 18:00:25
Subject: @{b}Re: Re: Paula access again@{ub}

From: Duane McDonnell <dmcdonnell@primus.com.au>

>From: Stefan Schulze <stefan@dreamworlds.de>

>> To stop a playing sample from repeating, program AUDxLC so that it
>> points to a null word in chipram, then set AUDxLEN to 1 word. 

>Works fine here. The only problem is now: How to start other samples
>immediately? All entries there only work after the first sample has been
>completed.

I'm not completely sure what you're trying to achieve here,
ie: more info needed :-)

>> You
>> can do this via interrupt control or use timers. Note that you
>> need to do this after the sample has started but before it has
>> finished. This technique is also used to play samples longer
>> than 128K in length (except this time you program the next
>> part of the sample while the current part is playing).

>Not needed. Thanks, though.

>> No, there's no automatic one-shot mode.

>Well... the one described above is automatic enough for me :)

Yes, that's no doubt the reason one-shot support wasn't added,
it wasn't really needed.

>>             Clock Constant
>> Period = --------------------------
>>         Frequency * BytesPerSample

>I guess there's a mistake in it as the resulting values are always around
0.5.

No, the formula is correct. I'll give you an example. Say you
wanted to dial a phone number by connecting your phone to audio
out or whatever, and your country's exchange system uses DTMF
(Dual Tone Multiple Frequencies) for the phone->exchange
communications.

The tones for '0' on the keypad are 941/1336, so you want to
set one channel up to play a 941Hz tone and another to play a
1336Hz tone. We'll assume you've got a PAL system and have
made a 16-byte sample table (a sine table would do the job)
so the required periods are:

(p1 = first tone period)

p1 = 3546895 / (941 * 16)
p1 = 236

(p2 = second tone period)

p2 = 3546895 / (1336 * 16)
p2 = 166

So to send a '0' down the line choose two audio channels
(eg: 1 and 2) and do this:

AUD1LEN = 8 (8 words = 16 bytes)
AUD1VOL = 64 (maximum volume)
AUD1PER = 236 (DTMF-0 first tone period)
AUD1LC  = ptr to sample table

AUD2LEN = 8 (8 words = 16 bytes)
AUD2VOL = 64 (maximum volume)
AUD2PER = 166 (DTMF-0 second tone period)
AUD2LC  = ptr to sample table

If you've done that correctly, the exchange will recognise a 0
as if you've pressed 0 on your phone keypad.

>Or did I misunderstand something? What do BytesPerSample mean? I thought its
>the sample length, but the results are strange in this way.

The Paula hardware works with word lengths, DMA fetches 16-bits
at a time. "BytesPerSample" is the length of the sample in bytes.
So for the above example, we had a 16-byte sample so we need to
divide that by 2 to get the length for AUDxLEN (bytes -> words)
which gives us 8.

>> where "Clock Constant" = 3579545 for NTSC machines or 3546895 for PAL
>> machines, "Frequency" is the frequency in Hertz, and "BytesPerSample"
>> is the number of bytes in the sample to play.

>As described above, the formula doesn't work well.

It does, you must have done something wrong, or perhaps the
frequency you're trying to use is outside Paula's supported range.

>> If you want example code (asm though) to load and one-shot play
>> IFF-8SVX samples, just ask. It supports uncompressed samples as
>> well as exponential and Fibonacci compression.

>The game is both PPC and 68k, so ASM examples are quite useless. It's only
>thought to be an AHI alternative as many people have problems with AHI.

Direct Paula banging is pretty simple so yeah, I would support
this too for lower end users. Converting this to C is simple
enough.


@ENDNODE
@NODE "Mail_128" " Re: Close() still won't work    (was: dos.library Close() won't work! HELP!) "
From: Martyn Capewell <mmc28@hermes.cam.ac.uk>
Date: 02-19-00 18:23:57
Subject: @{b}Re: Close() still won't work    (was: dos.library Close() won't work! HELP!)@{ub}

From: Martyn Capewell <mmc28@hermes.cam.ac.uk>

Hello W1bBle

On 19-Feb-00, you wrote:

> So I guess I'm doing something the OS would rather I didn't. But what?
> Anyone got any ideas on this? Latest source included - only minor changes
> since the last time it didn't work! ;-)

It seems taking the Close() or DeleteFile() out of the printf() seemed to
help. I can't guarantee that was what was wrong (I just played with it), 
but the attached code seems to work. 

Regards
-- 
- Martyn Capewell

... but you can't expect to wield supreme executive power just because some watery tart threw a sword at you!
------------------------------------------------------------------------
GET A NEXTCARD VISA, in 30 seconds!  Get rates 
as low as 0.0% Intro APR and no hidden fees.
Apply NOW!
http://click.egroups.com/1/967/0/_/_/_/951009663/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 
@ENDNODE
@NODE "Mail_129" " RE: Re: Multithreading + Math Libraries again "
From: Duane McDonnell <dmcdonnell@primus.com.au>
Date: 02-19-00 18:32:13
Subject: @{b}RE: Re: Multithreading + Math Libraries again@{ub}

From: Duane McDonnell <dmcdonnell@primus.com.au>

>From: Jesper Svennevid <jesper@fxrealm.com>

>> From: Alexander Niven-Jenkins <anj@cremlinsoftware.org>
>> 
>> Hiya Andrew,
>> 
>> On 18-Feb-00, you wrote:
>> 
>> >> Write an FPU emulator for the Amiga. In the longer term this would
>> >> be a better bet. Has anyone ever created such a thing? I know it's
>> >> possible because not only does Software FPU work under 
>> ShapeShifter,
>> >> but its effects extend to the Amiga side as well!
>> 
>> > I'm no expert on FPU programming, but such an implementation would
>> > require you to install a Line F exception handler, which would
>> > emulate each FPU instruction on the fly.
>> 
>>    Isn't this what CyberPatcher, OxyronPatcher and FastIEEE 
>> do?  Emulate the
>> FPU on the fly?
>> 
>>    Or have I got the wrong end of the stick.

>Not quite. They replace the emulation-code for the op-codes that are
>unimplemented on 040/060 systems. Emulating a full FPU is a bit more
>difficult. :)

Yep, it's very time consuming and laborious. I had a crack at this
once, the technique itself is simple enough however (use an F-Line
exception handler and do op-code processing as the other person
pointed out). I suspect we haven't seen an Amiga version released
because of the amount of work required and the fact that FPUs
ain't exactly expensive these days.  Also, FPU emulation is very
slow, after seeing one in action you'll probably want to run out
and buy a real one anyway :-)

To the original poster (sorry, I deleted the post), you'll need
to write some stubs to pass a library base of your choice in A6
to avoid the problems you described. Of course, you have to do
the OpenLibrary/CloseLibrary calls yourself.


------------------------------------------------------------------------
Looking for the best new sites on the Web?  eTour.com is a FREE 
service that brings great websites right to you - matched to your 
own unique interests.  It's like having a personal remote control 
for the Internet!
http://click.egroups.com/1/1675/0/_/_/_/951007751/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_130" " Re: Close() still won't work    (was: dos.library Close() won't work! HELP!) "
From: Colin Wenzel <colstv@hotkey.net.au>
Date: 02-19-00 18:39:08
Subject: @{b}Re: Close() still won't work    (was: dos.library Close() won't work! HELP!)@{ub}

From: Colin Wenzel <colstv@hotkey.net.au>


//  My coments are # coloured....#



On 20-Feb-00, W1bBle wrote:
/* Program to purge a PFS 2 or 3 .DELDIR of all files */

#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <clib/dos_protos.h>


int main (int argc, char **argv)
{
    BPTR fp;
#//  fp should be:  * struct FileHandle *fp; *     #
#//  also   Open()  is undeclared & should be same.#

    int slot=32; /* Default value in case user doesn't specify one */
    int i, user_slot;
 
    char target[64];
#//  'target'  should be 258 bytes incase max cli length parsed....    #



#//  is *dos.library* open  ???#


    if (argc<2 || argc>3)
    {
        printf ("Usage: %s DEVICE/A SLOTS/N\n", argv[0]);
        exit (21);
    }


    /* Set target to be <device>pfsdeldirpurgefile */
    /* where <device> is a colon terminated name   */
    strncpy (target, argv[1], strlen (argv[1]));
    strcat (target, "pfsdeldirpurgefile");



    if (argc==3)  /* Check if user asked to erase N slots and act accordingly */
    {
        user_slot=abs (atoi (argv[2]));

        if (slot!=user_slot && user_slot!=0)
            slot=user_slot;
    }



    printf ("%s\n",target);

    for (i=0; i<slot; i++)
    {
         if (fp=Open (target, MODE_NEWFILE)==0)
         {
             PrintFault (IoErr(), "Failure");
             printf ("fp=%d", fp);
#// *  %ld *  is the 32 bit rawdoformat symbol * %d*  is 16 bit#

#//   library close ??#
             exit (21);
         }

        /* FPrintf (fp, "byebye"); */
#//  why not just use:   Write()#

         printf ("Close=%d\n", Close (fp));


         printf ("DeleteFile=%d\n", DeleteFile (target));
    }

#//  close  *dos.library *  ???#
    return 0;
#// should be exit(0); #

}



-------------------------------------
Colin Wenzel. Australia.

EMAIL:  mailto:colstv@hotkey.net.au
URL:       http://www.hotkey.net.au/~colstv/
ICQ:       17608330
AMIGA: 4000T,  060/50,  150Mb RAM,  O.S 3.5
---------------------------------------


------------------------------------------------------------------------
Get what you deserve with NextCard Visa! ZERO! Rates as low as 
0.0% Intro APR, online balance transfers, Rewards Points, no 
hidden fees, and much more! Get NextCard today and get the credit 
you deserve!  Apply now! Get your NextCard Visa at:
http://click.egroups.com/1/966/0/_/_/_/951008941/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_131" " Re: Close() still won't work    (was: dos.library Close() won't work! "
From: Duane McDonnell <dmcdonnell@primus.com.au>
Date: 02-19-00 19:12:34
Subject: @{b}Re: Close() still won't work    (was: dos.library Close() won't work!@{ub}

From: Duane McDonnell <dmcdonnell@primus.com.au>

>From: W1bBle <layabouts@the-giant-sofa.demon.co.uk>

>Hi all,

>I'm afraid I'm still having the same problem opening and consequently
>closing files. I have now tried SnoopDOS as IIkka suggested, but that only
>manages to keep track of Open and Delete so it wasn't much help - however,
>it did confirm the debug output from my program.

>I have also tried to remove the buffered output FPrintf() call, but that
>didn't help either :-(

>Finally, I tried to compile it with some different things. First, I tried
>vbccm68k, and that gave me the same problem, along with a load of garbage
>in the result of strcat() which scared the hell out of me. Then I tried the
>StormC 2 demo off an old CU CD and it did the exact same thing as the exe
>made by vbccwos. Humph :-(

>I've been running mu-Force too, and the only Hit I generated was loading
>StormC 2! :)

>So I guess I'm doing something the OS would rather I didn't. But what?
>Anyone got any ideas on this? Latest source included - only minor changes
>since the last time it didn't work! ;-)

Have you tried the code with a standard FFS disk? Format a floppy
and write to that. If the problem goes away you can assume the
PFS side of things is responsible, in which case you'd be better
off taking this up with whoever supports that file system. One
of the problems with using a non-standard file system is that
when you run into trouble there are fewer people to turn to.
Unfortunately, this point is lost on many people when they
decide to ditch FFS for its real and imagined shortcomings :-)


------------------------------------------------------------------------
Britney? Limp Bizkit? Christina? Who will win the Grammys???????
Guess the winners and you could win a FREE MP3 Player! from AWZ.com!
Click Here!
http://click.egroups.com/1/1769/0/_/_/_/951010403/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_132" " Re: Close() still won't work    (was: dos.library Close() won't work! HELP!) "
From: Ilkka Lehtoranta <iti@solutions.fi>
Date: 02-19-00 22:10:27
Subject: @{b}Re: Close() still won't work    (was: dos.library Close() won't work! HELP!)@{ub}

From: Ilkka Lehtoranta <iti@solutions.fi>

On 19-Hel-00, W1bBle wrote:

W> So I guess I'm doing something the OS would rather I didn't. But what?
W> Anyone got any ideas on this? Latest source included - only minor changes
W> since the last time it didn't work! ;-)

I'm not an experienced C-programmer but I made some investigations
to ASM output generated by StormC and found the bug:
         if (fp=Open(target, MODE_NEWFILE)==0)

Looks ok, but it isn't because compiler interpretes this line in a different
way than you (and I) expected. Compiler tests if the result from
Open() == 0 and stores THIS result (BOOLEAN!!) to fp. So fp gets
boolean value instead of filehandle.

So try this instead:
         if ((fp=Open(target, MODE_NEWFILE))==0)

This stores the result from Open() to fp and makes then test if fp==0.


     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_133" " Re: Close() still won't work - if you leave the brackets out! "
From: W1bBle <layabouts@the-giant-sofa.demon.co.uk>
Date: 02-20-00 03:13:01
Subject: @{b}Re: Close() still won't work - if you leave the brackets out!@{ub}

From: W1bBle <layabouts@the-giant-sofa.demon.co.uk>

Hi guys,

I'd just like to say thanks to IIkka for spotting the bug in the if
statement's distinctly counter intuitive parsing order - you're a life
saver! :) and also to Colin for the various points on cleaning up the code
here and there. The code now works and has successfully purged its very
first .DELDIR, so I'll neaten things up a bit and post to aminet as soon as
it's ready, as I'm obviously not the first one to spot this obvious
omission from the PFS tool box!

Thanks again everyone :)

Giles

-- 
<------------------------------------------------>
 | Giles Burdett                    __   ___    |
 |  IRC nick = W1bBle              ///  (. .)   |
 |                                ///   ( v )   |
 |  A1200T 200MHz PPC        __  ///   //   \\  |
 | OS 3.1 / Linux-m68k       \\\///    .X # X.  |
 |                            \XX/     XX___XX  |
<------------------------------------------------>


------------------------------------------------------------------------
Get what you deserve with NextCard Visa! ZERO! Rates as low as 0.0% 
Intro or 9.9% Fixed APR, online balance transfers, Rewards Points, 
no hidden fees, and much more! Get NextCard today and get the credit 
you deserve! Apply now! Get your NextCard Visa at:
http://click.egroups.com/1/914/0/_/_/_/951016465/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_134" " Re: Multithreading + Math Libraries again "
From: Andrew Bell <andrew.ab2000@bigfoot.com>
Date: 02-20-00 07:15:41
Subject: @{b}Re: Multithreading + Math Libraries again@{ub}

From: Andrew Bell <andrew.ab2000@bigfoot.com>

Hi Alexander,

On 18-Feb-00 you wrote: [amiga-c] Re: Multithreading + Math Libraries
again

>> I'm no expert on FPU programming, but such an implementation would
>> require you to install a Line F exception handler, which would
>> emulate each FPU instruction on the fly.
> 
>   Isn't this what CyberPatcher, OxyronPatcher and FastIEEE do?
> Emulate the FPU on the fly?

Yep. All FPU instructions start with 0xF000 (hence the name Line F).
When the CPU encounters one of these, the FPU takes over else a Line
F expection is triggered. The standard expection handler on the Amiga
OS would result in a GURU (on an FPU-less system).

You can install your own expection handler that would examine the
current PC, identify the FPU instruction and collect CPU registers at
the time of the expection and take the necessary action (i.e.
emulation). Then RTE out of the exception with the required results
in the registers, and the program will then continue on as normal, as
if a real FPU is present. Of course, this is many times slower than a
real FPU.

I'm not sure which, but some of the above programs (Cyberpatcher,
IIRC) even replace the FPU opcodes on the fly, meaning the next time
the code is executed, the overhead of calling the CPU expection is
avoided.
 
>   Or have I got the wrong end of the stick.

Nope.

Regards, Andrew Bell.
-- 

+----------------------------------------+ 
email: mailto:andrew.ab2000@bigfoot.com
  web: http://www.andrewb.exl.co.uk
+----------------------------------------+
After all is said and done, usually more is said.




------------------------------------------------------------------------
Britney? Limp Bizkit? Christina? Who will win the Grammys???????
Guess the winners and you could win a FREE MP3 Player! from AWZ.com!
Click Here!
http://click.egroups.com/1/1769/0/_/_/_/951027506/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_135" " Re: Execute "
From: Mike Carter <mike.carter@bigfoot.com>
Date: 02-20-00 19:27:22
Subject: @{b}Re: Execute@{ub}

From: Mike Carter <mike.carter@bigfoot.com>

Hiya ,
Got your message about [amiga-c] Re: Execute, on 19-Feb-00

» First off, what is *NIL*? I guess that should be *NULL*. In which

hehe, my mistake!  I just tapped out the code in YAM before going to
bed.


» case, it's OK to pass NULL for the input file handle, but if your
» application is started from Workbench, you really need to pass an
» appropriate output file handle. For example...
» 
»    outhandle = Open( "T:command.out", MODE_NEWFILE);
»    if (outhandle)
»    {
»        Execute( command, NULL, outhandle); 
»        Close( outhandle);
»        outhandle = NULL;
»    }

Worked a treat - cheers!!  I just got mixed up because passing two
NULLs used to work fine in Blitz Basic 2!  Anyway everything is going
nice now :-)

Dinky do,

M!ke
-- 

.--------------------------------- ---- -    -- --------.
| AMiGA 1200EZT 060/PPC@240Mhz,50Mb RAM __/\__          |
| 4 HDD,DD FD,5 CD-ROMS,CDrW,ZiP250     \ o0 / bUDDa/S^D|
| SCSI+IDE,56kModem,BVGfX,19"VDU        /_'-_\          |
`------------------------------- --- -    \/   -- ------'
  http://fly.to/BuddasWurld               ICQ: 29173597


------------------------------------------------------------------------
Shabang!com is the place to get your FREE eStore, Absolutely FREE
Forever. If you have any desires to sell your products or services
online, or you want to expand your customer base for FREE, Come check
out Shabang!com FREE eStores!
http://click.egroups.com/1/1299/0/_/_/_/951079731/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_136" " Multithreading + Math Libraries again "
From: "Alastair M. Robinson" <blackfive@fakenhamweb.co.uk>
Date: 02-21-00 00:53:49
Subject: @{b}Multithreading + Math Libraries again@{ub}

From: "Alastair M. Robinson" <blackfive@fakenhamweb.co.uk>

Hi Everyone,

>> I'm no expert on FPU programming, but such an implementation would
>> require you to install a Line F exception handler, which would
>> emulate each FPU instruction on the fly.

> Which is easy, isn't it? How hard would it be to redirect math functions
> to those in the mathieee#? libraries as a starting point?

Nice idea, but if the RKM is telling the truth about the libs being
context-sensitive, then some of their functions will start with
FindTask(NULL).  I doubt this would go down too well from
exception/supervisor code! 

Anyone know where to get the source for the Linux FPU Emulator,
without having to get the whole Linux68K source?  Better still, anyone
already got it?

All the best,
-- 
Alastair M. Robinson, email:blackfive@fakenhamweb.co.uk
Amiga 4000/030, 18Meg RAM, 4.3Gig HD, Mustek ScanExpress 6000SP
C, Assembler (68k, PIC16C84, learning ATMEL AVR), PostScript,
ARexx, AMOSPro(!), AmigaDOS

The ultimate metric that I would like to propose for user friendliness is quite
simple: if this system was a person, how long would it take before you punched
it in the nose?  -- Tom Carey


------------------------------------------------------------------------
What's the coolest new Web resource? It's the AskMe Page, which allows you
to have your own Q&A platform, interact with peers and earn rewards! It's
simple, fun & FREE! Get it now! Click here:
http://click.egroups.com/1/1459/0/_/_/_/951109177/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_137" " Re: Multithreading + Math Libraries again "
From: Duane McDonnell <dmcdonnell@primus.com.au>
Date: 02-21-00 07:16:39
Subject: @{b}Re: Multithreading + Math Libraries again@{ub}

From: Duane McDonnell <dmcdonnell@primus.com.au>


>>> I'm no expert on FPU programming, but such an implementation would
>>> require you to install a Line F exception handler, which would
>>> emulate each FPU instruction on the fly.

>> Which is easy, isn't it? How hard would it be to redirect math functions
>> to those in the mathieee#? libraries as a starting point?

>Nice idea, but if the RKM is telling the truth about the libs being
>context-sensitive, then some of their functions will start with
>FindTask(NULL).  I doubt this would go down too well from
>exception/supervisor code! 

Doing this works fine. You don't have to run exception handlers
in supervisor mode as you can switch to user mode if need be.
However, writing an FPU emulator is a bit of overkill when you
can just call the mathieee functions directly (the solution
to your context problem has already been proposed).


------------------------------------------------------------------------
Looking for the best new sites on the Web?  eTour.com is a FREE 
service that brings great websites right to you - matched to your 
own unique interests.  It's like having a personal remote control 
for the Internet!
http://click.egroups.com/1/1675/0/_/_/_/951113139/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_138" " Re: Graphics Mask "
From: Linus McCabe <sparkle@hehe.com>
Date: 02-21-00 13:10:51
Subject: @{b}Re: Graphics Mask@{ub}

From: Linus McCabe <sparkle@hehe.com>


talking about masks etc, what is a good way to create a mask out of a
transparent pen?
Ie, datatypes returns a pen  thats transparent for the picture, then
how do I use that pen to blit transparently? Create my own mask?

/Linus

-- 
Linus McCabe * Sparkle@hehe.com              
             * Sparkle, #Amiga, DalNet
             * http://sparkle.amiga.tm

With Gates, Windows and Walls there is no freedom



------------------------------------------------------------------------
GET A NEXTCARD VISA, in 30 seconds!  Get rates as low as 0.0% 
Intro or 9.9% Fixed APR and no hidden fees.  Apply NOW!
http://click.egroups.com/1/911/0/_/451227/_/951556475/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_139" " Re: Graphics Mask "
From: Linus McCabe <sparkle@hehe.com>
Date: 02-21-00 15:25:29
Subject: @{b}Re: Graphics Mask@{ub}

From: Linus McCabe <sparkle@hehe.com>

On 26-Feb-00, Allan Odgaard wrote:

> For datatypes (V43+) you can get the mask using PDTA_MaskPlane.

i know, currently i do, but few datatypes seems to support this
(correctly).

/Linus

> 
> Regards Allan
-- 
Linus McCabe * Sparkle@hehe.com              
             * Sparkle, #Amiga, DalNet
             * http://sparkle.amiga.tm

I wish I was the substance of that needle you're injecting, cause I
wanna be inside of you



------------------------------------------------------------------------
Get what you deserve with NextCard Visa! Rates as low as 2.9% 
Intro or 9.9% Fixed APR, online balance transfers, Rewards Points, 
no hidden fees, and much more! Get NextCard today and get the 
credit you deserve! Apply now! Get your NextCard Visa at:
http://click.egroups.com/1/913/0/_/451227/_/951564555/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_140" " Re: Multithreading + Math Libraries again "
From: James Adelman <j.adelman@ukonline.co.uk>
Date: 02-21-00 19:54:37
Subject: @{b}Re: Multithreading + Math Libraries again@{ub}

From: James Adelman <j.adelman@ukonline.co.uk>

On 21-Feb-00, Daniel McDonnell wrote:

> From: Duane McDonnell <dmcdonnell@primus.com.au>
> 
> 
>>>> I'm no expert on FPU programming, but such an implementation would
>>>> require you to install a Line F exception handler, which would
>>>> emulate each FPU instruction on the fly.
> 
>>> Which is easy, isn't it? How hard would it be to redirect math functions
>>> to those in the mathieee#? libraries as a starting point?
> 
>> Nice idea, but if the RKM is telling the truth about the libs being
>> context-sensitive, then some of their functions will start with
>> FindTask(NULL).  I doubt this would go down too well from
>> exception/supervisor code! 
> 
> Doing this works fine. You don't have to run exception handlers
> in supervisor mode as you can switch to user mode if need be.
> However, writing an FPU emulator is a bit of overkill when you
> can just call the mathieee functions directly (the solution
> to your context problem has already been proposed).
 
OC, that does not solve the original problem, which was if the compiler uses
the global Library *MathIEEEDoubBasBase (or whatever) to use the OS
functions for floating-point arithmetic, it would be unsafe to do FP
arithmetic in re-entrant code, since the MathIEEE code is not re-entrant,
and each task requires its own base; the same applies for using MathIEEE
directly by a call to one of the functions in the library, for the same
reasons.  I don't know whether this is in fact the way compilers work with
floating-point; it is possible, but it may be that the startup-code & stubs
are more sophisticated than that.  Checking the open count of the math
libraries with a quick example program suggests that DICE, for one, does not
have such a sophisticated way of dealing with FP math.  Mind you, the
program didn't crash, but that doesn't mean it's safe in general.

Anyway, I've got some solutions to the original problem which do not involve
rewriting the math libraries themselves or using fpu emulation.  I'm not
sure either would be a long-term solution, because I'm not convinced
supporting non-FPU 68k systems is a good idea.  However the same problem
exists for certain other libraries (eg bsdsocket.library).

1. (The simplest)  Use FFP instead of IEEE.

2. (Probably the best)  Alter startup code and stubs (w/o changing library), 
or reimplement them in the main program.  The latter version is probably
easier.  You'd have to avoid doing any calc's w/o library calls inc. 
assignments. something like:

static void __saveds myMain(void) /*Entry point for CreateNewProc, rather
        than the real main()*/
{
    register struct Library* libptr;
    register struct Process* metask;
    register struct Library** store;

    store=(Library**)AllocMem(16, MEMF_CLEAR);
    metask=FindTask(NULL);
    
    metask.pr_Task.tc_UserData=store;
    if(store[0]=OpenLibrary(mathieeesingbas, 0))
    {
    .....
    }
}

typedef func_f_l (__D0 float(*)(__D0 long));

float safe_SPFlt(long in);
{
    register func_f_l thisfunc;
    register struct Process* metask;
    metask=FindTask(NULL);
    thisfunc=(func_f_l)metask.pr_Task->tc_UserData-36;  /* LVO of IEEESPFlt is -36 */
    return thisfunc(in);
}

No guarantees about this code, but you should be able to get the idea.  It
might be better to

#define safe_SPFlt(x) (func_f_l)(FindTask(NULL).pr_Task->tc_UserData-36)(x);

or (if possible) set up a larger array with the function-pointers calc'd at startup 
and set up defines for the entries in the array so they look like functions.

3. Change MathIEEE-------Base everytime you use an ieee------- function, 
using a semaphore to protect it.

4. Only allow one task (the one that opens the libraries) to access them,
and use message-ports to send sums and answers back and forth.

5. (my favourite) Don't use FP math if there is no FPU, especially if you
are writing re-entrant code; there can hardly be many cases where the
generic MathIEEE code can beat a custom integer alternative w/o an FPU. 
--
James Samuel Adelman
Harrow, Middlesex
--


------------------------------------------------------------------------
Shabang!com is the place to get your FREE eStore, Absolutely FREE
Forever. If you have any desires to sell your products or services
online, or you want to expand your customer base for FREE, Come check
out Shabang!com FREE eStores!
http://click.egroups.com/1/1299/0/_/_/_/951168966/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_141" " Re: Re: Multithreading + Math Libraries again "
From: Duane McDonnell <dmcdonnell@primus.com.au>
Date: 02-22-00 01:38:06
Subject: @{b}Re: Re: Multithreading + Math Libraries again@{ub}

From: Duane McDonnell <dmcdonnell@primus.com.au>

>From: James Adelman <j.adelman@ukonline.co.uk>

>>>>> I'm no expert on FPU programming, but such an implementation would
>>>>> require you to install a Line F exception handler, which would
>>>>> emulate each FPU instruction on the fly.
>> 
>>>> Which is easy, isn't it? How hard would it be to redirect math functions
>>>> to those in the mathieee#? libraries as a starting point?
>> 
>>> Nice idea, but if the RKM is telling the truth about the libs being
>>> context-sensitive, then some of their functions will start with
>>> FindTask(NULL).  I doubt this would go down too well from
>>> exception/supervisor code! 
>> 
>> Doing this works fine. You don't have to run exception handlers
>> in supervisor mode as you can switch to user mode if need be.
>> However, writing an FPU emulator is a bit of overkill when you
>> can just call the mathieee functions directly (the solution
>> to your context problem has already been proposed).
> 
>OC, that does not solve the original problem, which was if the compiler uses
>the global Library *MathIEEEDoubBasBase (or whatever) to use the OS
>functions for floating-point arithmetic, it would be unsafe to do FP
>arithmetic in re-entrant code, since the MathIEEE code is not re-entrant,
>and each task requires its own base;

I've explained this before, but once more: open and close the library
yourself for each task. When calling functions ensure that the correct
library base for the task gets placed in A6 (rather than the global
library base). There are many ways to do this depending upon what sort
of features your compiler offers (__asm/asm, code emit, etc.). One
way to solve the problem is to make a small link library which accepts
stack based parameters (including the explicit library base to use).
This solution should work with all Amiga compilers but it's likely
to be less efficient than a compiler specific solution. If you need
help making such a thing I can give more details in private mail.

[code snipped]

>No guarantees about this code, but you should be able to get the idea.

Yes, I see what you're trying to do. However, there are better ways
to do this.


------------------------------------------------------------------------
Get what you deserve with NextCard Visa! ZERO! Rates as low as 0.0% 
Intro or 9.9% Fixed APR, online balance transfers, Rewards Points, 
no hidden fees, and much more! Get NextCard today and get the credit 
you deserve! Apply now! Get your NextCard Visa at:
http://click.egroups.com/1/914/0/_/_/_/951179713/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_142" " Re: Graphics Mask "
From: Linus McCabe <sparkle@hehe.com>
Date: 02-22-00 09:31:11
Subject: @{b}Re: Graphics Mask@{ub}

From: Linus McCabe <sparkle@hehe.com>

On 26-Feb-00, Allan Odgaard wrote:


> For which image types do you have the problem?

I see.. Most dt's used to work, but since I had to reinstall the
system, none works.. Ill make sure Ill have the latest pic.dt, then
Ill get back to you if the probs remains

thaks

/Linus

> 
> Regards Allan
> 
> 
>
------------------------------------------------------------------------
> Shop the web for great deals. Save on Computers, electronics, Home
> furnishings and more.
> http://click.egroups.com/1/1559/0/_/451227/_/951584908/
>
------------------------------------------------------------------------
> 
>     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 
> 
> 
-- 
Linus McCabe * Sparkle@hehe.com              
             * Sparkle, #Amiga, DalNet
             * http://sparkle.amiga.tm

A metal heart is hard to tear apart



------------------------------------------------------------------------
eGroups.
The best way to communicate by email in a group.
Start your own free email group!
http://click.egroups.com/1/1885/0/_/451227/_/951643450/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_143" " Joystick / Screen blanker! "
From: Lee Atkins <lee@loonyjuicesoftware.freeserve.co.uk>
Date: 02-22-00 20:07:49
Subject: @{b}Joystick / Screen blanker!@{ub}

From: Lee Atkins <lee@loonyjuicesoftware.freeserve.co.uk>

Hello,

Hows stuff?
I have nearly finished the quickest game I have ever written.
The problem is that it is fully multitasking and my screen blanker kicks in
after its 10 minutes of playing the game.
Game input is via the joystick port, I am ripping the values straight from
the port.

Has anyone got any simple code for reading the joystick in a friendly way?
Also how could I stop the screen blanker coming in, would reading the
joystick in a frienly way overcome this?

Thanks,
Lee.



------------------------------------------------------------------------
Get what you deserve with NextCard Visa! Rates as low as 2.9% 
Intro or 9.9% Fixed APR, online balance transfers, Rewards Points, 
no hidden fees, and much more! Get NextCard today and get the 
credit you deserve! Apply now! Get your NextCard Visa at:
http://click.egroups.com/1/913/0/_/_/_/951246832/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_144" " Re: Joystick / Screen blanker! "
From: Alexander Niven-Jenkins <anj@cremlinsoftware.org>
Date: 02-22-00 23:00:25
Subject: @{b}Re: Joystick / Screen blanker!@{ub}

From: Alexander Niven-Jenkins <anj@cremlinsoftware.org>

Hiya Lee,

On 22-Feb-00, you wrote:

> I have nearly finished the quickest game I have ever written. The problem
> is that it is fully multitasking and my screen blanker kicks in after its
> 10 minutes of playing the game. Game input is via the joystick port, I am
> ripping the values straight from the port.

> Has anyone got any simple code for reading the joystick in a friendly way?
> Also how could I stop the screen blanker coming in, would reading the
> joystick in a frienly way overcome this?

   It depends on how your screen blanker works, they don't all work the
same.  For example Diamond Caves II doesn't stop MultiCXs blanker.

   This is exactly why I wrote AntiBlanker.  I can set it up for all those
tasks that either I don't want the screen blanker kicking in (MakeCD,
PalomaTV) or for those that don't stop it (DCII).

   It's available from AmiNET or my homepage.

Kind regards...

Alex
-- 
Cremlin Software - http://www.cremlinsoftware.org
Founder, lead programmer - ghandi@cremlinsoftware.org
Production, programmer - anj@cremlinsoftware.org


------------------------------------------------------------------------
Get what you deserve with NextCard Visa! ZERO! Rates as low as 
0.0% Intro APR, online balance transfers, Rewards Points, no 
hidden fees, and much more! Get NextCard today and get the credit 
you deserve!  Apply now! Get your NextCard Visa at:
http://click.egroups.com/1/966/0/_/_/_/951257149/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_145" " deleting files "
From: Steven Dobbs <steven.dobbs@cableinet.co.uk>
Date: 02-22-00 23:22:49
Subject: @{b}deleting files@{ub}

From: Steven Dobbs <steven.dobbs@cableinet.co.uk>

Hello,

i come accross basic problems with the compiler that I'm using - using
ansi-c file stuff, I expect it to overwrite files automatically  - but it
fails, so I think I'd like to try a strategy of deleting them first.

Could somebody tell me how to do this? If I have the path and filename I
want to delete in an array (char)str[80] how do I procede?

Regards
-- 
Steven Dobbs


------------------------------------------------------------------------
FREE ADVICE FROM REAL PEOPLE!  Xpertsite has thousands of experts who
are willing to answer your questions for FREE.  Go to Xpertsite today and
put your mind to rest.
http://click.egroups.com/1/1404/0/_/_/_/951261736/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_146" " string conversion question "
From: Steven Dobbs <steven.dobbs@cableinet.co.uk>
Date: 02-22-00 23:57:02
Subject: @{b}string conversion question@{ub}

From: Steven Dobbs <steven.dobbs@cableinet.co.uk>

Hello

does anybody know if its possible in c to do something that was so simple in
basic, like converting a string to a number and visa-versa.

Regards
-- 
Steven Dobbs


------------------------------------------------------------------------
GET A NEXTCARD VISA, in 30 seconds!  Get rates as low as 2.9% 
Intro or 9.9% Fixed APR and no hidden fees.  Apply NOW!
http://click.egroups.com/1/915/0/_/_/_/951263786/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_147" " Re: string conversion question "
From: Laura Vance <vancel@amiga.nols.com>
Date: 02-23-00 00:54:50
Subject: @{b}Re: string conversion question@{ub}

From: Laura Vance <vancel@amiga.nols.com>

The simplest way to do this is with the function atoi() for ascii (text) to
integer.  The other way around, I've found that sscanf() is the most convenient
way to do it.



On Tue, 22 Feb 2000, Steven Dobbs wrote about [amiga-c] string conversion
question > From: Steven Dobbs <steven.dobbs@cableinet.co.uk>
> 
> Hello
> 
> does anybody know if its possible in c to do something that was so simple in
> basic, like converting a string to a number and visa-versa.
> 
> Regards
> -- 
> Steven Dobbs
> 
> 
> ------------------------------------------------------------------------
> GET A NEXTCARD VISA, in 30 seconds!  Get rates as low as 2.9% 
> Intro or 9.9% Fixed APR and no hidden fees.  Apply NOW!
> http://click.egroups.com/1/915/0/_/_/_/951263786/
> ------------------------------------------------------------------------
> 
>      -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <-
-- 

Later,
Laura
      \|/
     (o O)
---oOO(_)OOo---
  Peekaboo!!!

------------------------------------------------------------------------
Get what you deserve with NextCard Visa! Rates as low as 2.9% 
Intro or 9.9% Fixed APR, online balance transfers, Rewards Points, 
no hidden fees, and much more! Get NextCard today and get the 
credit youdeserve! Apply now! Get your NextCard Visa at:
http://click.egroups.com/1/912/0/_/_/_/951263900/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_148" " Re: deleting files "
From: Christian Hattemer <Chris@heaven.riednet.wh.tu-darmstadt.de>
Date: 02-23-00 01:05:26
Subject: @{b}Re: deleting files@{ub}

From: Christian Hattemer <Chris@heaven.riednet.wh.tu-darmstadt.de>

On 22-Feb-00 Steven Dobbs wrote:

> i come accross basic problems with the compiler that I'm using - using
> ansi-c file stuff, I expect it to overwrite files automatically  - but it
> fails, so I think I'd like to try a strategy of deleting them first.

fopen() should overwrite an existing file if you use mode w.
To delete a file use remove().

Bye, Chris

-- 
            __
           ///
      __  ///  Amiga 4000T 040/40      Team *AMIGA*
      \\\///
       \XX/    http://www.riednet.wh.tu-darmstadt.de/~chris/

Alle Chirurgen sind Aufschneider...


------------------------------------------------------------------------
GET A NEXTCARD VISA, in 30 seconds!  Get rates 
as low as 0.0% Intro APR and no hidden fees.
Apply NOW!
http://click.egroups.com/1/967/0/_/_/_/951264477/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_149" " Re: deleting files "
From: Steven Dobbs <steven.dobbs@cableinet.co.uk>
Date: 02-23-00 13:10:30
Subject: @{b}Re: deleting files@{ub}

From: Steven Dobbs <steven.dobbs@cableinet.co.uk>

Hello Christian


> fopen() should overwrite an existing file if you use mode w.
> To delete a file use remove().

thanks, this could get around many of my problems :o), so remove(str) should
do it. 

Regards
-- 
Steven Dobbs


------------------------------------------------------------------------
WANT FREE MAGAZINES?
Sample over 500 magazines in 30 categories-- all for FREE at 
FreeShop.com, your source for thousands of free and trial offers!
http://click.egroups.com/1/1610/0/_/_/_/951311396/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_150" " Re: string conversion question "
From: andrewmarkwell@ukonline.co.uk
Date: 02-23-00 15:54:57
Subject: @{b}Re: string conversion question@{ub}

From: andrewmarkwell@ukonline.co.uk

From: Laura Vance <vancel@xxxxx.xxxx.xxx>

>The other way around, I've found that sscanf() is the most convenient
>way to do it.

I had this problem a while ago.. I couldn't find anything in the
standard libraries that would do a integer->string conversion so I
had to write my own (below).  I don't think that sscanf() will do the
job as it accepts a char* not an int.



char* itos(int number)
{
  int temp=number;
  int size=0, count=0, x=1;
  char *buffer;

  while(temp>0)
  {
    temp=temp/10;
    size++;
  }

  buffer=new char[size];

  while(size>1)
  {
    x=x*10;
    size--;
  }

  while(x>0)
  {
    buffer[count]=(number/x)+'0';
    number=number%x;
    count++;
    x=x/10;
  }

  buffer[count]='\0';

  return buffer;
}


Andrew Markwell




------------------------------------------------------------------------
Get what you deserve with NextCard Visa! Rates as low as 2.9% 
Intro or 9.9% Fixed APR, online balance transfers, Rewards Points, 
no hidden fees, and much more! Get NextCard today and get the 
credit youdeserve! Apply now! Get your NextCard Visa at:
http://click.egroups.com/1/912/0/_/_/_/951317704/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_151" " Re: string conversion question "
From: Martyn Capewell <mmc28@hermes.cam.ac.uk>
Date: 02-23-00 15:59:16
Subject: @{b}Re: string conversion question@{ub}

From: Martyn Capewell <mmc28@hermes.cam.ac.uk>

Hello andrewmarkwell@ukonline.co.uk

On 23-Feb-00, you wrote:

> From: andrewmarkwell@ukonline.co.uk
> 
> From: Laura Vance <vancel@xxxxx.xxxx.xxx>
> 
>> The other way around, I've found that sscanf() is the most convenient
>> way to do it.
> 
> I had this problem a while ago.. I couldn't find anything in the
> standard libraries that would do a integer->string conversion so I
> had to write my own (below).  I don't think that sscanf() will do the
> job as it accepts a char* not an int.
> 
> 
> 
> char* itos(int number)
> {
>  int temp=number;
>  int size=0, count=0, x=1;
>  char *buffer;
> 
>  while(temp>0)
>  {
>    temp=temp/10;
>    size++;
>  }
> 
>  buffer=new char[size];
> 
>  while(size>1)
>  {
>    x=x*10;
>    size--;
>  }
> 
>  while(x>0)
>  {
>    buffer[count]=(number/x)+'0';
>    number=number%x;
>    count++;
>    x=x/10;
>  }
> 
>  buffer[count]='\0';
> 
>  return buffer;
> }

What about sprintf(string,"%d",x) ?

Regards
-- 
- Martyn Capewell

... but you can't expect to wield supreme executive power just because some watery tart threw a sword at you!


------------------------------------------------------------------------
Get what you deserve with NextCard Visa! ZERO! Rates as low as 0.0% 
Intro or 9.9% Fixed APR, online balance transfers, Rewards Points, 
no hidden fees, and much more! Get NextCard today and get the credit 
you deserve! Apply now! Get your NextCard Visa at:
http://click.egroups.com/1/914/0/_/_/_/951318125/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_152" " Re: string conversion question "
From: Andrew Ballard <andyb@ncc.co.uk>
Date: 02-23-00 16:13:43
Subject: @{b}Re: string conversion question@{ub}

From: Andrew Ballard <andyb@ncc.co.uk>

»
»From: andrewmarkwell@ukonline.co.uk
»
»From: Laura Vance <vancel@xxxxx.xxxx.xxx>
»
»>The other way around, I've found that sscanf() is the most convenient
»>way to do it.
»
»I had this problem a while ago.. I couldn't find anything in the
»standard libraries that would do a integer->string conversion so I
»had to write my own (below).  I don't think that sscanf() will do the
»job as it accepts a char* not an int.
»

Recently I saw in some hefty code here at work which contained a realy handy way 
of doing it, using the reverse of Laura's sscanf() idea, using sprintf().

sprintf(string, "%d", number);

You can even build long strings containing combinations of strings, integers 
etc. Quick eg.:

sprintf( str, "Todays date is %s %2d-%2d-%2d\n", weekdays[day], date, month, 
year);


I don't think its ANSI but some implementations of C contain an itoa() function 
which does near enough the same as Mark's itos() function, except I think it has 
a "base" parameter so you can do octal, hex etc. by setting the base to 8, 16 as 
well as normal a base 10 (decimal).

Andrew Ballard.
andyb@ncc.co.uk

 
»
»
»char* itos(int number)
»{
»  int temp=number;
»  int size=0, count=0, x=1;
»  char *buffer;
»
»  while(temp>0)
»  {
»    temp=temp/10;
»    size++;
»  }
»
»  buffer=new char[size];
»
»  while(size>1)
»  {
»    x=x*10;
»    size--;
»  }
»
»  while(x>0)
»  {
»    buffer[count]=(number/x)+'0';
»    number=number%x;
»    count++;
»    x=x/10;
»  }
»
»  buffer[count]='\0';
»
»  return buffer;
»}
»
»
»Andrew Markwell
»
»
»


------------------------------------------------------------------------
Shabang!com is the place to get your FREE eStore, Absolutely FREE
Forever. If you have any desires to sell your products or services
online, or you want to expand your customer base for FREE, Come check
out Shabang!com FREE eStores!
http://click.egroups.com/1/1299/0/_/_/_/951318820/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_153" " Re: string conversion question "
From: Tim Hanson <msinister@connectfree.co.uk>
Date: 02-23-00 16:26:00
Subject: @{b}Re: string conversion question@{ub}

From: Tim Hanson <msinister@connectfree.co.uk>

Hi Steven 
Steven Dobbs wrote this on 22-Feb-00 at 23:57:02
> From: Steven Dobbs <steven.dobbs@cableinet.co.uk>
> 
> Hello
> 
> does anybody know if its possible in c to do something that was so simple in
> basic, like converting a string to a number and visa-versa.

char *str;
int number;


number=atoi(str);
sprintf(str,"%d",number);


-- 
      
Tim Hanson,
by the River,Canterbury, Kent.
Amiga A1200T,`040/25,603e/160,32MB Fast,BVisionPPC,
8.4GB IDE HD,ZIP SCSI,RENO x2CD SCSI,Pace 56K
Don`t waste  your time by visiting
http://www.sinister67.freeserve.co.uk



------------------------------------------------------------------------
Get what you deserve with NextCard Visa! ZERO! Rates as low as 0.0% 
Intro or 9.9% Fixed APR, online balance transfers, Rewards Points, 
no hidden fees, and much more! Get NextCard today and get the credit 
you deserve! Apply now! Get your NextCard Visa at:
http://click.egroups.com/1/914/0/_/_/_/951333030/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_154" " Re: Re: string conversion question "
From: Laura Vance <vancel@amiga.nols.com>
Date: 02-23-00 18:21:49
Subject: @{b}Re: Re: string conversion question@{ub}

From: Laura Vance <vancel@amiga.nols.com>

On Wed, 23 Feb 2000, Martyn Capewell wrote about [amiga-c] Re: string conversion question
> From: Martyn Capewell <mmc28@hermes.cam.ac.uk>
> 
<snip>
> 
> What about sprintf(string,"%d",x) ?
> 
> Regards
> -- 
> - Martyn Capewell
> 

Geez, that was the one that I was trying to remember, thank you  (c:

-- 

Later,
Laura
      \|/
     (o O)
---oOO(_)OOo---
  Peekaboo!!!

------------------------------------------------------------------------
GET A NEXTCARD VISA, in 30 seconds!  Get rates as low as 2.9% 
Intro or 9.9% Fixed APR and no hidden fees.  Apply NOW!
http://click.egroups.com/1/915/0/_/_/_/951326773/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_155" " BOBs and GELs - variable framerate! "
From: "Alastair M. Robinson" <blackfive@fakenhamweb.co.uk>
Date: 02-23-00 23:58:36
Subject: @{b}BOBs and GELs - variable framerate!@{ub}

From: "Alastair M. Robinson" <blackfive@fakenhamweb.co.uk>

Hi Everyone,

I've been experimenting with the graphics.library GELs system, and have come
up against the following problem:

I've compiled the anim example in the RKM Companion code, but changed it
to work on a V39 double-buffered DblNTSC screen, and to display just the
boing ball.  (No satellites, bloke or inchworm!)

The problem is this:  The frame rate varies depending on the vertical
position of the bob!  I get full frame rate if the bob is in the top half of
the screen, and half frame rate if it's lower.

I'm assuming the graphics library is using beam-synchronised blits to draw
the bob, despite the fact that this isn't necessary on a double-buffered
screen.  If this is the problem, does anyone know how to stop it doing so?

(There's way too much source to post here, but if anyone really wants to
see the code, just mail me!)

All the best,
-- 
Alastair M. Robinson, email:blackfive@fakenhamweb.co.uk
Amiga 4000/030, 18Meg RAM, 4.3Gig HD, Mustek ScanExpress 6000SP
C, Assembler (68k, PIC16C84, learning ATMEL AVR), PostScript,
ARexx, AMOSPro(!), AmigaDOS

Trust your hunches.  They're usually based on facts filed away just below
the conscious level. -- Dr. Joyce Brothers


------------------------------------------------------------------------
FREE ADVICE FROM REAL PEOPLE!  Xpertsite has thousands of experts who
are willing to answer your questions for FREE.  Go to Xpertsite today and
put your mind to rest.
http://click.egroups.com/1/1404/0/_/_/_/951346883/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_156" " g++ search paths "
From: Matthew Fletcher <amimjf@hotmail.com>
Date: 02-24-00 13:00:22
Subject: @{b}g++ search paths@{ub}

From: "Matthew Fletcher" <amimjf@hotmail.com>

Can anybody help me with g++ ?, i was using the egcs version 1.1.2
which searched in include/g++ for header files, but since i changed
to g++ 2.95 it does not search anywhere but include: by defult, which
means i cant do any c++, without copying all the c++ headers to
include: Which would no doubt cause a load of name clashes ?, is
there any way (short of re-compilation) that i could change this ? or
do i just have to go back to egcs again ?

-thanks in advance - matthew


------------------------------------------------------------------------
Get what you deserve with NextCard Visa! Rates as low as 2.9% 
Intro or 9.9% Fixed APR, online balance transfers, Rewards Points, 
no hidden fees, and much more! Get NextCard today and get the 
credit youdeserve! Apply now! Get your NextCard Visa at:
http://click.egroups.com/1/912/0/_/451227/_/951393630/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_157" " Re: g++ search paths "
From: Steffen <steffen.mars@stenloese.mail.telia.com>
Date: 02-24-00 14:16:36
Subject: @{b}Re: g++ search paths@{ub}

From: Steffen <steffen.mars@stenloese.mail.telia.com>

Have you tried:
Assign include: newpath: add
?

Do you use the correct file extension for your sources ? Like .cpp ?


On 24-Feb-00, Matthew Fletcher wrote:

> From: "Matthew Fletcher" <amimjf@hotmail.com>
> 
> Can anybody help me with g++ ?, i was using the egcs version 1.1.2
> which searched in include/g++ for header files, but since i changed
> to g++ 2.95 it does not search anywhere but include: by defult, which
> means i cant do any c++, without copying all the c++ headers to
> include: Which would no doubt cause a load of name clashes ?, is
> there any way (short of re-compilation) that i could change this ? or
> do i just have to go back to egcs again ?
> 
> -thanks in advance - matthew


------------------------------------------------------------------------
Get what you deserve with NextCard Visa! Rates as low as 2.9% 
Intro or 9.9% Fixed APR, online balance transfers, Rewards Points, 
no hidden fees, and much more! Get NextCard today and get the 
credit you deserve! Apply now! Get your NextCard Visa at:
http://click.egroups.com/1/913/0/_/451227/_/951402897/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_158" " Re: string conversion question "
From: Steffen <steffen.mars@stenloese.mail.telia.com>
Date: 02-24-00 14:28:12
Subject: @{b}Re: string conversion question@{ub}

From: Steffen <steffen.mars@stenloese.mail.telia.com>

Hello Steven,

int = atoi(char*);

and

char*   = stci_d(int);

atoi is ANSI compatible but stci_d is a SAS function. Perhaps you could use sprintf() to output a value to a string ?


On 23-Feb-00, Steven Dobbs wrote:

> From: Steven Dobbs <steven.dobbs@cableinet.co.uk>
> 
> Hello
> 
> does anybody know if its possible in c to do something that was so simple in
> basic, like converting a string to a number and visa-versa.
> 
> Regards
> -- 
> Steven Dobbs
> 
> 
> ------------------------------------------------------------------------
> GET A NEXTCARD VISA, in 30 seconds!  Get rates as low as 2.9% 
> Intro or 9.9% Fixed APR and no hidden fees.  Apply NOW!
> http://click.egroups.com/1/915/0/_/_/_/951263786/
> ------------------------------------------------------------------------
> 
>     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 
> 
> 
Regards


------------------------------------------------------------------------
GET A NEXTCARD VISA, in 30 seconds!  Get rates 
as low as 0.0% Intro APR and no hidden fees.
Apply NOW!
http://click.egroups.com/1/967/0/_/451227/_/951402897/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_159" " Asm Code in dice . "
From: Charles Barr <charlie@amigaforever.free-online.co.uk>
Date: 02-24-00 17:05:13
Subject: @{b}Asm Code in dice .@{ub}

From: Charles Barr <charlie@amigaforever.free-online.co.uk>

Hello,
      Anyone know how to mix c source and asm source to be 
compiled by DICE?


Cheers
-- 




------------------------------------------------------------------------
Start your own free email group on eGroups.
http://click.egroups.com/1/1882/0/_/451227/_/951408255/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_160" " Graphics Mask "
From: Lee Atkins <lee@loonyjuicesoftware.freeserve.co.uk>
Date: 02-24-00 20:44:32
Subject: @{b}Graphics Mask@{ub}

From: Lee Atkins <lee@loonyjuicesoftware.freeserve.co.uk>

Hello,

I have a load of graphics in one bit map and I am Blitting them to screen
through a mask using BltMaskBitMapRastPort().  I am currently loading in the
mask from an IFF file. All works brillient.
So I thought, 'Dont load the mask in, generate it from your graphics bit
map'

So I wrote this bit of code:

  StuffMask = AllocBitMap(DISPLAY_WIDTH,DISPLAY_HEIGHT,1,
                     BMF_DISPLAYABLE | BMF_CLEAR, NULL);
  if(StuffMask == NULL) return 0;
  
  Weight = 1;   /*Weight is a UBYTE */
  do  
  {
    /*StuffBMP is the bitmap with all the GFX on, its 7 planes deep*/

    BltBitMap(StuffBMP, 0, 0, StuffMask, 0, 0,
               DISPLAY_WIDTH, DISPLAY_HEIGHT , 0x70, Weight, NULL);
    Weight<<=1;
  }while(Weight);

This as I understand it should take each bitplane of StuffBMP and logically
OR it into the single plane Bitmap, StuffMask.

Can I get this to work? Can I heck.  Am I understanding BltBitMap correctly?
Is there some other way of creating the mask bitmap?

Thanks,
Lee.



     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_161" " Re: Graphics Mask "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 02-24-00 22:31:23
Subject: @{b}Re: Graphics Mask@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 24-Feb-00, Lee Atkins wrote:

>  StuffMask = AllocBitMap(DISPLAY_WIDTH,DISPLAY_HEIGHT,1,
>                     BMF_DISPLAYABLE | BMF_CLEAR, NULL);

A mask should be allocated with AllocRaster, since it is only a single bitplane
with no surrounding bitmap structure.

Regards Allan
-- 
     URL: http://www.diku.dk/students/duff/
<sb>
I like work... I can sit and watch it for hours.


------------------------------------------------------------------------
Get what you deserve with NextCard Visa! ZERO! Rates as low as 
0.0% Intro APR, online balance transfers, Rewards Points, no 
hidden fees, and much more! Get NextCard today and get the credit 
you deserve!  Apply now! Get your NextCard Visa at:
http://click.egroups.com/1/966/0/_/451227/_/951428074/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_162" " Re: g++ search paths "
From: Gavin Kinsey <gavin@kinsey.u-net.com>
Date: 02-25-00 03:11:21
Subject: @{b}Re: g++ search paths@{ub}

From: Gavin Kinsey <gavin@kinsey.u-net.com>

I received a message from Matthew Fletcher, a reply follows,
> From: "Matthew Fletcher" <amimjf@hotmail.com>
> 
> Can anybody help me with g++ ?, i was using the egcs version 1.1.2
> which searched in include/g++ for header files, but since i changed
> to g++ 2.95 it does not search anywhere but include: by defult, which
> means i cant do any c++, without copying all the c++ headers to
> include: Which would no doubt cause a load of name clashes ?, is
> there any way (short of re-compilation) that i could change this ? or
> do i just have to go back to egcs again ?

12.Data:Programming> g++ -o test -v test.cpp
Reading specs from /gg/lib/gcc-lib/m68k-amigaos/2.95.1/specs
gcc version 2.95.1 19990816 (release)
<snip>
GNU CPP version 2.95.1 19990816 (release) (68k, MIT syntax)
#include "..." search starts here:
#include <...> search starts here:
 /gg/lib/gcc-lib/m68k-amigaos/2.95.1/../../../../include/g++-3
 /gg/lib/gcc-lib/m68k-amigaos/2.95.1/../../../../m68k-amigaos/include
 /gg/lib/gcc-lib/m68k-amigaos/2.95.1/include
 /gg/os-include
 /gg/include
End of search list.
The following default directories have been omitted from the search path:
 /gg/local/include
End of omitted list.
<snip>

Works fine here, have you installed all the needed files?

-- 
Be careful of reading health books, you might die of a misprint.
-  Mark Twain

Gavin Kinsey


------------------------------------------------------------------------
Who will win the iMac?
Register now and win a FREE iMac at AWZ.com!
click here!
http://click.egroups.com/1/1963/0/_/451227/_/951510002/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_163" " Re: Graphics Mask "
From: Steffen <steffen.mars@stenloese.mail.telia.com>
Date: 02-25-00 08:02:23
Subject: @{b}Re: Graphics Mask@{ub}

From: Steffen <steffen.mars@stenloese.mail.telia.com>

Hi,

I have an old source you might checkout. I barely recall what it does, but i did make it create transparent bobs.
ImageX::Transparent() should create the template.


void  ImageX::MakeShadowBM()
{
    int     x;

    if (ShadowBM) ::BltBitMap(0,0,0,ShadowBM,0,0,(ULONG)BMWidth,(ULONG)BMHeight,0xc0,0xff,0);
    else ShadowBM = ::AllocBitMap((ULONG)BMWidth,(ULONG)BMHeight, 1, BMF_CLEAR, DefaultBM);
    if (!ShadowBM)
    {
        return;
    }
    ShadowBM->Depth = (UBYTE)Depth;
    for (x=1; x<Depth; x++) ShadowBM->Planes[x] = ShadowBM->Planes[0];
}
void  ImageX::Transparent()
{
    if (!ShadowBM) MakeShadowBM();
    if (!ShadowBM) return;
    ::BltBitMap(PictureBM,0,0,ShadowBM,0,0,(ULONG)BMWidth,(ULONG)BMHeight,0xe0,0xff,0);
}


On 24-Feb-00, Lee Atkins wrote:

> From: Lee Atkins <lee@loonyjuicesoftware.freeserve.co.uk>
> 
> Hello,
> 
> I have a load of graphics in one bit map and I am Blitting them to screen
> through a mask using BltMaskBitMapRastPort().  I am currently loading in the
> mask from an IFF file. All works brillient.
> So I thought, 'Dont load the mask in, generate it from your graphics bit
> map'
> 
> So I wrote this bit of code:
> 
>  StuffMask = AllocBitMap(DISPLAY_WIDTH,DISPLAY_HEIGHT,1,
>                     BMF_DISPLAYABLE | BMF_CLEAR, NULL);
>  if(StuffMask == NULL) return 0;
>  
>  Weight = 1;   /*Weight is a UBYTE */
>  do  
>  {
>    /*StuffBMP is the bitmap with all the GFX on, its 7 planes deep*/
> 
>    BltBitMap(StuffBMP, 0, 0, StuffMask, 0, 0,
>               DISPLAY_WIDTH, DISPLAY_HEIGHT , 0x70, Weight, NULL);
>    Weight<<=1;
>  }while(Weight);
> 
> This as I understand it should take each bitplane of StuffBMP and logically
> OR it into the single plane Bitmap, StuffMask.
> 
> Can I get this to work? Can I heck.  Am I understanding BltBitMap correctly?
> Is there some other way of creating the mask bitmap?
> 
> Thanks,
> Lee.
> 
> 
> 
>     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 
> 
> 
Regards


------------------------------------------------------------------------
Get what you deserve with NextCard Visa! Rates as low as 2.9% 
Intro or 9.9% Fixed APR, online balance transfers, Rewards Points, 
no hidden fees, and much more! Get NextCard today and get the 
credit youdeserve! Apply now! Get your NextCard Visa at:
http://click.egroups.com/1/912/0/_/451227/_/951466265/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_164" " Re: Graphics Mask "
From: Steffen <steffen.mars@stenloese.mail.telia.com>
Date: 02-25-00 08:05:46
Subject: @{b}Re: Graphics Mask@{ub}

From: Steffen <steffen.mars@stenloese.mail.telia.com>

This is from the autodocs:
In order to assure proper alignment of display memory, the
AllocBitMap() function should be used instead of AllocRaster
when you wish to allocate display memory (rasters which are
attached to a ViewPort or Screen).


On 24-Feb-00, Allan Odgaard wrote:

> From: Allan Odgaard <Duff@DIKU.DK>
> 
> On 24-Feb-00, Lee Atkins wrote:
> 
>>  StuffMask = AllocBitMap(DISPLAY_WIDTH,DISPLAY_HEIGHT,1,
>>                     BMF_DISPLAYABLE | BMF_CLEAR, NULL);
> 
> A mask should be allocated with AllocRaster, since it is only a single bitplane
> with no surrounding bitmap structure.
> 
> Regards Allan
> -- 
>     URL: http://www.diku.dk/students/duff/
<sb>
> I like work... I can sit and watch it for hours.
> 
> 
> ------------------------------------------------------------------------
> Get what you deserve with NextCard Visa! ZERO! Rates as low as 
> 0.0% Intro APR, online balance transfers, Rewards Points, no 
> hidden fees, and much more! Get NextCard today and get the credit 
> you deserve!  Apply now! Get your NextCard Visa at:
> http://click.egroups.com/1/966/0/_/451227/_/951428074/
> ------------------------------------------------------------------------
> 
>     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 
> 
> 
Regards


------------------------------------------------------------------------
Show your style!  Choose from 6 great card designs when you
apply for Capital One's 9.9% Fixed APR Visa Platinum.
http://click.egroups.com/1/1894/0/_/451227/_/951466265/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_165" " Re: Graphics Mask "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 02-25-00 09:59:44
Subject: @{b}Re: Graphics Mask@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 25-Feb-00, Steffen wrote:

> This is from the autodocs:
> In order to assure proper alignment of display memory, the
> AllocBitMap() function should be used instead of AllocRaster
> when you wish to allocate display memory (rasters which are
> attached to a ViewPort or Screen).

And I was clearly speaking of masks, which isn't a raster associated with a
viewport nor screen! But an extra argument given to BltMaskRastPort()...

Regards Allan
-- 
     URL: http://www.diku.dk/students/duff/
<sb>
Have you crashed your Windows today?


------------------------------------------------------------------------
Registering a domain name is quick and easy.
http://click.egroups.com/1/1611/0/_/451227/_/951469281/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_166" " Re: Graphics Mask "
From: Steffen <steffen.mars@stenloese.mail.telia.com>
Date: 02-25-00 12:07:55
Subject: @{b}Re: Graphics Mask@{ub}

From: Steffen <steffen.mars@stenloese.mail.telia.com>

On 25-Feb-00, Allan Odgaard wrote:

> From: Allan Odgaard <Duff@DIKU.DK>
> 
> On 25-Feb-00, Steffen wrote:
> 
>> This is from the autodocs:
>> In order to assure proper alignment of display memory, the
>> AllocBitMap() function should be used instead of AllocRaster
>> when you wish to allocate display memory (rasters which are
>> attached to a ViewPort or Screen).
> 
> And I was clearly speaking of masks, which isn't a raster associated with a
> viewport nor screen! But an extra argument given to BltMaskRastPort()...

How do you create a mask in a raster ? I use BltBitMap to create a mask for a bitmap, what do you use ?

P.S. I supose you mean BltMaskBitMapRastPort not BltMaskRastPort ?


------------------------------------------------------------------------
Tired of missing calls while online? Now you can surf the Internet
without worrying about missing important calls! CallWave's FREE
Internet Answering Machine lets you hear who's calling while online.
http://click.egroups.com/1/1927/0/_/451227/_/951480552/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_167" " Re: Graphics Mask "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 02-25-00 15:59:56
Subject: @{b}Re: Graphics Mask@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 25-Feb-00, Steffen wrote:

> How do you create a mask in a raster ?

Depends on the application. For example when working with 24 bit
data then I obviously use the cpu.

> I use BltBitMap to create a mask for a bitmap, what do you use ?

I never peek in the structure returned from AllocBitMap(), which I assume you
must do if you allocate a bitmap this way for use with BltBitMap and later as
a mask.

If I do need blitter support when creating a mask I'd do something like the
following:

   PLANEPTR mask_plane;
   if(mask_plane = AllocRaster(width, height))
   {
      struct BitMap mask_bmp = { };
      InitBitMap(&mask_bmp, 8, width, height);
      for(int i = 0; i < 8; i++)
         mask_bmp.Planes[i] = mask_plane;

      ...blitter stuff...

      FreeRaster(mask_plane, width, height);
   }

> P.S. I supose you mean BltMaskBitMapRastPort not BltMaskRastPort ?

And I suppose you mean /post scriptum/ not /P.S./ -- ever heard about
shorthand notation? ;-)

Regards Allan
-- 
     URL: http://www.diku.dk/students/duff/
<sb>
I am Windows of Borg. Prepare... oops, out of memory!


------------------------------------------------------------------------
Get what you deserve with NextCard Visa! ZERO! Rates as low as 
0.0% Intro APR, online balance transfers, Rewards Points, no 
hidden fees, and much more! Get NextCard today and get the credit 
you deserve!  Apply now! Get your NextCard Visa at:
http://click.egroups.com/1/966/0/_/451227/_/951490999/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_168" " Missing Digests "
From: "Alastair M. Robinson" <blackfive@fakenhamweb.co.uk>
Date: 02-25-00 21:36:17
Subject: @{b}Missing Digests@{ub}

From: "Alastair M. Robinson" <blackfive@fakenhamweb.co.uk>

Hi Guys,

Thanks to mailserver problems, I seem to have missed out on Digests 289,
294 and 295.

Could some kind person who's also in digest mode package these up in an lzx
and mail them to me?

All the best,
-- 
Alastair M. Robinson, email:blackfive@fakenhamweb.co.uk
Amiga 4000/030, 18Meg RAM, 4.3Gig HD, Mustek ScanExpress 6000SP
C, Assembler (68k, PIC16C84, learning ATMEL AVR), PostScript,
ARexx, AMOSPro(!), AmigaDOS

"Dave, put those Windows disks down....Dave...DAVE!" -- Hal 9000


------------------------------------------------------------------------
GET A NEXTCARD VISA, in 30 seconds!  Get rates as low as 0.0% 
Intro or 9.9% Fixed APR and no hidden fees.  Apply NOW!
http://click.egroups.com/1/911/0/_/451227/_/951607713/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_169" " Re: Re: Graphics Mask "
From: Emanuele Cesaroni <emacesa@tin.it>
Date: 02-26-00 11:26:24
Subject: @{b}Re: Re: Graphics Mask@{ub}

From: Emanuele Cesaroni <emacesa@tin.it>

Hello Steffen

On 25-Feb-00, you wrote:

> From: Steffen <steffen.mars@stenloese.mail.telia.com>
> 
> On 25-Feb-00, Allan Odgaard wrote:
> 
>> From: Allan Odgaard <Duff@DIKU.DK>
>> 
>> On 25-Feb-00, Steffen wrote:
>> 
>>> This is from the autodocs:
>>> In order to assure proper alignment of display memory, the
>>> AllocBitMap() function should be used instead of AllocRaster
>>> when you wish to allocate display memory (rasters which are
>>> attached to a ViewPort or Screen).
>> 
>> And I was clearly speaking of masks, which isn't a raster associated with
a
>> viewport nor screen! But an extra argument given to BltMaskRastPort()...
> 
> How do you create a mask in a raster ? I use BltBitMap to create a mask
for a bitmap, what do you use ?
> 
> P.S. I supose you mean BltMaskBitMapRastPort not BltMaskRastPort ?

Hello to all, i have seen most people was looking for converting a bitmap to
a mask.
If you want i have enclosed two asm functions, one is for amiga standard
bitmap interleaved, the other for Vga systems.
It could be usefull to use them as example for a c ones.  



interleaved bitamps.

;*            
;*    In=    a0=SourceBitMap.        LONG
;*        a1=DestBitMap.          LONG
;*    

DoMaskInt_:
    movem.l    d0-d2/d4-d7/a2,-(sp)

    moveq    #0,d7
    move.b    bm_Depth(a0),d7
    moveq    #0,d0
    move.w    bm_BytesPerRow(a0),d0
    moveq    #0,d5
    move.w    d0,d5
    divu.l    d7,d5                ;Bytes in una linea (MODULO).
    move.w    bm_Rows(a0),d1
    move.l    bm_Planes(a0),a0
    move.l    bm_Planes(a1),a1


    sub.w    d5,d0

    subq.b    #1,d7
    move.w    d5,d4

DMI_loop:
    move.l    a0,a2
    moveq    #0,d2

    move.l    d7,d6
DMI_inloop:    
    or.w    (a2),d2                
    add.l    d5,a2                
    dbra    d6,DMI_inloop            
    
    move.l    a1,a2
    move.l    d7,d6
DMI_inloop2:    
    move.w    d2,(a2)                
    add.l    d5,a2
    dbra    d6,DMI_inloop2

    addq.w    #2,a0
    addq.w    #2,a1

    subq.w    #2,d4                ;
    bne.s    DMI_loop

    move.w    d5,d4
    add.l    d0,a1
    add.l    d0,a0
    
    subq.w    #1,d1
    bne.s    DMI_loop

    movem.l    (sp)+,d0-d2/d4-d7/a2
    rts



8 depth (max) vga bitmaps.

;*            
;*    In=    a0=SourceBitMap.        LONG
;*        a1=DestBitMap.          LONG
;*        d0=Bytesrow sources        LONG

DoMask8_:
    movem.l    d1/d6/d7,-(sp)
    moveq    #0,d1
    move.w    bm_Rows(a0),d1
    move.l    bm_Planes(a0),a0
    move.l    bm_Planes(a1),a1

    mulu    d0,d1
    addq.l    #1,d1           

    moveq    #7,d7
DM8_suploop:
    subq.l    #1,d1
    beq.s    DM8_end
DM8_noendlinea:
    tst.b    (a0)+
    beq.s    DM8_nogood
    move.b    (a1),d6    
    bset.l    d7,d6
    move.b    d6,(a1)
DM8_nogood:
    subq.l    #1,d7
    bpl.s    DM8_noend
    moveq    #7,d7
    addq.l    #1,a1
DM8_noend:
    bra.s    DM8_suploop
DM8_end:
    movem.l    (sp)+,d1/d6/d7    
    rts


------------------------------------------------------------------------
Tired of missing calls while online? Now you can surf the Internet
without worrying about missing important calls! CallWave's FREE
Internet Answering Machine lets you hear who's calling while online.
http://click.egroups.com/1/1927/0/_/451227/_/951557243/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_170" " Re: Graphics Mask "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 02-26-00 12:00:50
Subject: @{b}Re: Graphics Mask@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 21-Feb-00, Linus McCabe wrote:

> Ie, datatypes returns a pen  thats transparent for the picture, then
> how do I use that pen to blit transparently? Create my own mask?

For datatypes (V43+) you can get the mask using PDTA_MaskPlane.

Regards Allan
-- 
     URL: http://www.diku.dk/students/duff/
<sb>
System Error #12: Windows not found: (C)heer (P)arty (D)ance


------------------------------------------------------------------------
Why wait for a credit decision?  Get one instantly!  Apply for
the Capital One 9.9% Fixed APR Visa Platinum!
http://click.egroups.com/1/1895/0/_/451227/_/951562993/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_171" " Re: Graphics Mask "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 02-26-00 18:03:49
Subject: @{b}Re: Graphics Mask@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 21-Feb-00, Linus McCabe wrote:

>> For datatypes (V43+) you can get the mask using PDTA_MaskPlane.
> i know, currently i do, but few datatypes seems to support this
> (correctly).

It's the picture.datatype which create the mask. The decoder only has to
supply the transparent pen number correct, and a few doesn't.  But there are
alternatives to these "buggy" datatypes or even never versions.  I've only
experienced problems with older versions of Stephan's ILBM.datatype and also
the akPNG.datatype (I currently use the PNG datatype from Gunther Nikl, which
doesn't have any problems in this direction).

For which image types do you have the problem?

Regards Allan


------------------------------------------------------------------------
Shop the web for great deals. Save on Computers, 
electronics, Home furnishings and more.
http://click.egroups.com/1/1559/0/_/451227/_/951584908/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_172" " Re: Missing Digests "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 02-27-00 01:57:38
Subject: @{b}Re: Missing Digests@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 25-Feb-00, Alastair M. Robinson wrote:

> Could some kind person who's also in digest mode package these up in an lzx
> and mail them to me?

If not, then they should be on OneList.Com!


------------------------------------------------------------------------
Get what you deserve with NextCard Visa! Rates as low as 2.9% 
Intro or 9.9% Fixed APR, online balance transfers, Rewards Points, 
no hidden fees, and much more! Get NextCard today and get the 
credit youdeserve! Apply now! Get your NextCard Visa at:
http://click.egroups.com/1/912/0/_/451227/_/951615327/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_173" " Datatypes forever "
From: Jonas Hulten <bjonte@hem.passagen.se>
Date: 02-27-00 13:18:42
Subject: @{b}Datatypes forever@{ub}

From: Jonas Hulten <bjonte@hem.passagen.se>

I have problems reading datatype pictures (who doesn't).

Niels de Koning wrote to this list long ago having problems with the
BitMapHeader containing a depth of 8 even if the picture is 24 bit and
PDTA_DestMode set to PMODE_V43. I have the same "problem". My solution is
to use the DTM_FRAMEBOX method to obtain picture information but one
strange thing is that fri.fri_Dimensions.Width (in the code below) is /not
always/ the same as the DTA_NominalHoriz! The DTA_NominalHoriz gives the
correct value. Why does the BitMapHeader depth contain 8?

Another problem (a real one) is that the last call to the
PDTM_READPIXELARRAY below crashes the machine. I have a clean OS3.5 machine
with CyberGraphX installed. I don't understand. What can be wrong? The
buffer supplied is indeed a pointer to UBYTEs and is big enough
(width*height*4)...

The PictDT43 docs tells me that this should be working (though the examples
there open "datatypes/picture.datatype" as a library). I have not found any
other examples that use the READPIXELARRAY method.

-------------------------------------------------------

if (pic = NewDTObject(name,
  DTA_GroupID, GID_PICTURE,
  PDTA_DestMode, PMODE_V43,
  PDTA_Remap, FALSE,
  TAG_DONE))
{
  ULONG width, height;

  if (GetDTAttrs(pic,
    DTA_NominalHoriz,    &width,
    DTA_NominalVert,    &height,
    TAG_DONE) == 2)
  {
    struct dtFrameBox dtf;
    struct FrameInfo fri;

    printf("Width = %d\n", width);
    printf("Height = %d\n", height);

    Clear(&dtf, sizeof (struct dtFrameBox));
    Clear(&fri, sizeof (struct FrameInfo));
    dtf.MethodID = DTM_FRAMEBOX;
    dtf.dtf_FrameInfo = &fri;
    dtf.dtf_ContentsInfo = &fri;
    dtf.dtf_SizeFrameInfo = sizeof (struct FrameInfo);
    if (DoDTMethodA (pic, NULL, NULL, (Msg)&dtf))
    {
      printf("Depth = %d\n", fri.fri_Dimensions.Depth);

      printf ("fri_Width  : %d\n", (ULONG) fri.fri_Dimensions.Width);
      printf ("fri_Height : %d\n", (ULONG) fri.fri_Dimensions.Height);
      printf ("fri_Depth  : %d\n", (ULONG) fri.fri_Dimensions.Depth);

      if (dest.Create(width, height))
      {
        if (fri.fri_Dimensions.Depth > 8)
        { // TrueColor
          ULONG a;

          a = DoDTMethod(pic, NULL, NULL,
            PDTM_READPIXELARRAY, dest.buffer,
            PBPAFMT_ARGB, 4*width,
            0, 0, width, height);

          printf("DoDTMethod returned %d.\n", a);

          ...

--------------------------------------------------------


/Jonas

-- 
0 "MEAT IS MURDER  " GRRRL
48   "JETPAC"           PRG
20   "JELLY MONSTERS"   PRG
32   "µBEE"             REL
42   "VECTREX"          REL
604  "A4000"            L?<
64 BLOCKS FREE.


------------------------------------------------------------------------
Learn more with SmartPlanet. It's a new way of learning online. 
SmartPlanet offers hundreds of courses to take on your time,
in your space. Join for FREE today!
http://click.egroups.com/1/1704/0/_/451227/_/951654058/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_174" " Re: Datatypes forever "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 02-27-00 14:17:33
Subject: @{b}Re: Datatypes forever@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 27-Feb-00, Jonas Hulten wrote:

> Niels de Koning wrote to this list long ago having problems with the
> BitMapHeader containing a depth of 8 even if the picture is 24 bit and
> PDTA_DestMode set to PMODE_V43. I have the same "problem". My solution is

And the installed picture.datatype is V43+?

> [...] Why does the BitMapHeader depth contain 8?

hmm... maybe for compatibility... I don't think I've ever checked this field...

> Another problem (a real one) is that the last call to the
> PDTM_READPIXELARRAY below crashes the machine. I have a clean OS3.5 machine
> with CyberGraphX installed. I don't understand. What can be wrong? The

You're using DoDTMethod() which is for when the dt is used as a gadget.
I attached a small example that reads the picture as 24 bit and writes it to a
window (using CGX) -- I don't know if this will help you...

Regards Allan
-- 
     URL: http://www.diku.dk/students/duff/
<sb>
BUG (n.) undocumented feature. FEATURE (n.) documented bug.

------------------------------------------------------------------------
Learn more with SmartPlanet. It's a new way of learning online. 
SmartPlanet offers hundreds of courses to take on your time,
in your space. Join for FREE today!
http://click.egroups.com/1/1704/0/_/451227/_/951658162/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 
@ENDNODE
@NODE "Mail_175" " Re: Datatypes forever "
From: Jonas Hulten <bjonte@hem.passagen.se>
Date: 02-27-00 15:59:38
Subject: @{b}Re: Datatypes forever@{ub}

From: Jonas Hulten <bjonte@hem.passagen.se>

Den 27-Feb-00, skrev Allan Odgaard:

>> Niels de Koning wrote to this list long ago having problems with the
>> BitMapHeader containing a depth of 8 even if the picture is 24 bit and
>> PDTA_DestMode set to PMODE_V43. I have the same "problem". My solution is

> And the installed picture.datatype is V43+?

Yes, OS3.5 picture.datatype 44.19.

>> [...] Why does the BitMapHeader depth contain 8?

> hmm... maybe for compatibility... I don't think I've ever checked this
> field...

I thought so too so I just used the other method.

>> Another problem (a real one) is that the last call to the
>> PDTM_READPIXELARRAY below crashes the machine. I have a clean OS3.5
>> machine with CyberGraphX installed. I don't understand. What can be
>> wrong? The

> You're using DoDTMethod() which is for when the dt is used as a gadget. I
> attached a small example that reads the picture as 24 bit and writes it to
> a window (using CGX) -- I don't know if this will help you...

Ooooh, I seeeee. Thank you for your help. Now I noticed that there was a
DoMethod() in amiga.lib... I looked in datatypes.doc and picture_dtc.doc
but found no such function at first. The PictDT43 example contained a
similar call but I assumed that it was part of the cybergraphx datatype. It
will probably work now.

/Jonas

-- 
0 "MEAT IS MURDER  " GRRRL
48   "JETPAC"           PRG
20   "JELLY MONSTERS"   PRG
32   "µBEE"             REL
42   "VECTREX"          REL
604  "A4000"            L?<
64 BLOCKS FREE.


------------------------------------------------------------------------
Get what you deserve with NextCard Visa! Rates as low as 2.9% 
Intro or 9.9% Fixed APR, online balance transfers, Rewards Points, 
no hidden fees, and much more! Get NextCard today and get the 
credit you deserve! Apply now! Get your NextCard Visa at:
http://click.egroups.com/1/913/0/_/451227/_/951663842/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_176" " Re: Linking PPC asm objects to compiled warpup objects (before it drifted onto arrays) "
From: Gabriele Svelto <jlpicard@tiscalinet.it>
Date: 02-27-00 16:06:11
Subject: @{b}Re: Linking PPC asm objects to compiled warpup objects (before it drifted onto arrays)@{ub}

From: Gabriele Svelto <jlpicard@tiscalinet.it>

 Hi Al
 
> The powerpc.library has a RunPPC function which can be used from 68k
> code. If you haven't got the WarpOS documentation, get it. You could
> also have a peep at the VBCC-WarpOS startup-code source.

I should take a look at the docs indeed but I hadn't time lately
 
> I would recommend that you write your time-critical function in C (or
> maybe some simpler toy functions), compile it with vc -S +warpos and
> study the PPC .asm file which results.

I'm trying but it's quite hard, PPC asm looks a lot more complex than
68k asm.

> What I do when it comes to linking, is to use vc -c to create .o files
> for all source files (this works for both C and asm), then vc #?.o to
> link them.

Hadn't thought to that, obviously the easiest solution ;-)

> C code compiled for PPC is usually much more efficient than compiled
> 68k code, and hand-optimised assembler won't give anything like the
> speedup you're used to from 68k programming. Since this is the Amiga-C
> list, I recommend you do as much as possible in C!

Is this due to pipelining in the PPC processor? Id est: the compiler
knows how to use it at the best? Anyhow I always write first all
functions in C and only when I get them working correctly I move them to
asm.

> As for registers, don't use r1 (the stack pointer) or r2 (the base
> pointer), and unless you understand its special functions, don't use
> r0 either! r3 is used for library bases, like a6 on 68k, r13 is a
> local stack pointer, and r13-r31 have to be restored if your program
> changes them.

Er... which is the equivalent of the user stack pointer? r13 or r1?

> If you've not seen them already, get Steffen Haeuser's docs from
> Aminet:dev/misc/ppcpack.lha. They contain a lot of information, though
> some of it's StormC/StormPowerASM oriented.

Already looked at but is a little bit too much PowerASM oriented and I
cannot buy it (was lucky enough to get StormC V3 in the ADCD 2.1 ;-).

 See you

 Gabriele


------------------------------------------------------------------------
@Backup-The Easiest Way to Protect and Access your files.
Automatic backups and off-site storage of your critical data.  Install 
your FREE trial today and have a chance to WIN a digital camera!
Click here.
http://click.egroups.com/1/1830/0/_/451227/_/951814710/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_177" " Re: Datatypes forever "
From: Jonas Hulten <bjonte@hem.passagen.se>
Date: 02-29-00 00:14:30
Subject: @{b}Re: Datatypes forever@{ub}

From: Jonas Hulten <bjonte@hem.passagen.se>

Den 27-Feb-00, skrev Jonas Hulten:

>>> [...] Why does the BitMapHeader depth contain 8?

>> hmm... maybe for compatibility... I don't think I've ever checked this
>> field...

> I thought so too so I just used the other method.

I was wrong. The BitMapHeader contains the correct depth. I supplied the
wrong argument to the tag. A reminder to all you datatypes-app-developers:
When reading, the tag PDTA_BitMapHeader should contain a (struct
BitMapHeader **), not a (struct BitMapHeader *) as the autodoc suggests.
The bitmap header will be allocated for you.

By coincidence the (uninitialized) depth field contained 8 in my case.

Oops, talking to myself again...

/Jonas

-- 
0 "MEAT IS MURDER  " GRRRL
48   "JETPAC"           PRG
20   "JELLY MONSTERS"   PRG
32   "µBEE"             REL
42   "VECTREX"          REL
604  "A4000"            L?<
64 BLOCKS FREE.


------------------------------------------------------------------------
GET A NEXTCARD VISA, in 30 seconds!  Get rates 
as low as 0.0% Intro APR and no hidden fees.
Apply NOW!
http://click.egroups.com/1/967/0/_/451227/_/951789820/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_178" " Buffered ReadChunkBytes? "
From: Jonas Hulten <bjonte@hem.passagen.se>
Date: 02-29-00 02:47:40
Subject: @{b}Buffered ReadChunkBytes?@{ub}

From: Jonas Hulten <bjonte@hem.passagen.se>

Does anyone know whether the ReadChunkBytes() function in iffparse.library
uses buffered read or if I must do that myself?

/Jonas

-- 
0 "MEAT IS MURDER  " GRRRL
48   "JETPAC"           PRG
20   "JELLY MONSTERS"   PRG
32   "µBEE"             REL
42   "VECTREX"          REL
604  "A4000"            L?<
64 BLOCKS FREE.


------------------------------------------------------------------------
Get what you deserve with NextCard Visa! ZERO! Rates as low as 0.0% 
Intro or 9.9% Fixed APR, online balance transfers, Rewards Points, 
no hidden fees, and much more! Get NextCard today and get the credit 
you deserve! Apply now! Get your NextCard Visa at:
http://click.egroups.com/1/914/0/_/451227/_/951789823/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_179" " Re: dos.library Close() won't work! HELP! "
From: tim@ramjam.u-net.com
Date: 02-29-00 11:36:07
Subject: @{b}Re: dos.library Close() won't work! HELP!@{ub}

From: tim@ramjam.u-net.com

> > I'm trying to write a little program to purge the
> > .DELDIR of a PFS2 or 3
> > partition (what do you mean I'm paranoid?!
>
> I tried and failed to write a similar program. It
> seems that PFS will not allow you to delete any of the
> files in the .deldir directory using the standard
> commands. I even tried setting the protection bits to
> deletable, but it doesn't even allow that!
>
> Unless anyone else has another suggestion, I think
> that you might need to get on to Great Effects
> Development to get some info on how to delete files in
> the .deldir. There's nothing in the docs about purging
> the .deldir directory, only about copying files from
> it.
>
> If anyone else has information on this matter I would
> be extremely interested.

Why do you need to do this?

The files in .deldir do not occupy any space - it's not like
Windows where you have to empty the trash.

If the space is needed for a non-deleted file, then the space
that the .deldir files occupy will be used. In that case there
may be less than the maximum number of files present in .deldir,
but that is the only side-effect.

If you want to overwrite the contents of the files in .deldir
(say with 0s) then you need to do that before you actually delete
them - write a copy of the delete command which overwrites the
file then deletes it.

  Tim

--
==========================================================================
Ramjam Consultants Ltd, 28 Queensway, Caversham, Reading, RG4 6SQ, England
e-mail: support@ramjam.u-net.com              http://www.ramjam.u-net.com/
telephone: +44 (0)118 946 5940                    fax: +44 (0)118 946 5941


------------------------------------------------------------------------
Get what you deserve with NextCard Visa! ZERO! Rates as low as 0.0% 
Intro or 9.9% Fixed APR, online balance transfers, Rewards Points, 
no hidden fees, and much more! Get NextCard today and get the credit 
you deserve! Apply now! Get your NextCard Visa at:
http://click.egroups.com/1/914/0/_/451227/_/951820561/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
@NODE "Mail_180" " Re: dos.library Close() won't work! HELP! "
From: "Francis G. Loch" <fgloch@yahoo.com>
Date: 02-29-00 17:31:25
Subject: @{b}Re: dos.library Close() won't work! HELP!@{ub}

From: "=?iso-8859-1?q?Francis=20G.=20Loch?=" <fgloch@yahoo.com>

Hi there,

--- tim@ramjam.u-net.com wrote:
>
> [SNIP]
> 
> If you want to overwrite the contents of the files
> in .deldir
> (say with 0s) then you need to do that before you
> actually delete
> them - write a copy of the delete command which
> overwrites the
> file then deletes it.
> 

Hmm. I hadn't thought of trying that. I'm not sure if
it will work or not (can you overwrite a protected
file?).

Kind regards,

Francis.

=====
e-mail:- fgloch@yahoo.com
web-site:- http://www.geocities.com/fgloch
__________________________________________________
Do You Yahoo!?
Talk to your friends online with Yahoo! Messenger.
http://im.yahoo.com

------------------------------------------------------------------------
Why wait for a credit decision?  Get one instantly!  Apply for
the Capital One 9.9% Fixed APR Visa Platinum!
http://click.egroups.com/1/1896/0/_/451227/_/951841886/
------------------------------------------------------------------------

     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


@ENDNODE
