@database 07a5d800-0
@master AFrame:Help/BattClock.Guide
@$VER: 1.0
@author "Deryk B Robosson"
@(c) "1995, 1996 Synthetic Input"
@index Main
@remark Created with Heddley v1.1 (c) Edd Dumbill 1994

@node "Main" "AFBattClock"

                      ***********************************

                        BattClock C++ Object

                        AFrame Version 1.0
                        BattClock Object Version 1.0

                        (c) 1995,1996 Jeffry A Worth
                                       Deryk B Robosson

                      ***********************************

TABLE OF CONTENTS

  @{"BattClock Object Information" link "INFORMATION" 0}

  Methods:
    @{"AFBattClock" link "AFBATTCLOCK" 0}
    @{"~AFBattClock" link "NOTAFBATTCLOCK" 0}

    @{"OnCreate" link "ONCREATE" 0}
    @{"DestroyObject" link "DESTROYOBJECT" 0}
    @{"AFResetBattClock" link "AFRESETBATTCLOCK" 0}
    @{"AFReadBattClock" link "AFREADBATTCLOCK" 0}
    @{"AFWriteBattClock" link "AFWRITEBATTCLOCK" 0}

    @{"Misc Members" link "MISCMEMBERS" 0}

    @{"Includes" link "INCLUDES" 0}
    @{"Source" link "SOURCE" 0}
    @{"History" link "HISTORY" 0}
    @{"Distribution" link "DISTRIBUTION" 0}
@endnode

@node "INFORMATION" "BattClock Object Information"
AFBattClock/Object Information

  The BattClock Object was written to provide a C++ Object Class interface to the battclock.resrouce
@endnode

@node "AFBATTCLOCK" "AFBattClock"
AFBattClock/AFBattClock

  NAME AFBattClock()

  DESCRIPTION
    Default class constructor.  Modify this only if you wish each class to have
    the modifications

    Opens battclock.resource if not already open

  INPUTS
    none

  RESULT
    none

  BUGS
    none known

  SEE ALSO
    @{"~AFBattClock" link "NOTAFBATTCLOCK" 0}
@endnode

@node "NOTAFBATTCLOCK" "~AFBattClock"
AFBattClock/~AFBattClock

  NAME ~AFBattClock()

  DESCRIPTION
    Default class destructor.  Modify this only if you wish each class to have
    the modifications

    Closes battclock.resource if open and sets BattClockBase to NULL

  INPUTS
    none

  RESULT
    none

  BUGS
    none known

  SEE ALSO
    @{"AFBattClock" link "AFBATTCLOCK" 0}
@endnode

@node "ONCREATE" "OnCreate"
AFBattClock/OnCreate

  NAME Create()

    void = Create()

  DESCRIPTION
    The Create function doesn't do anything.  If you wish to override
    this function, you may feel free to do so.

  INPUTS
    none

  RESULT
    none

  BUGS
    none known

  SEE ALSO
@endnode

@node "DESTROYOBJECT" "DestroyObject"
AFBattClock/DestroyObject

  NAME DestroyObject()

    void = DestroyObject()

  DESCRIPTION
    This function is called by ~AFBattClock() in order to close the
    battclock.resource if open


  INPUTS
    none

  RESULT
    none

  BUGS
    none known

  SEE ALSO
@endnode

@node "AFRESETBATTCLOCK" "AFResetBattBattClock"
AFBattClock/AFResetBattClock

  NAME AFResetBattClock()

    void = AFResetBattClock()

  DESCRIPTION
    This function resets the battery backed clock

  INPUTS
    none

  RESULT
    none

  BUGS
    none known

  SEE ALSO
@endnode

@node "AFREADBATTCLOCK" "AFReadBattClock"
AFBattClock/AFReadBattClock

  NAME AFReadBattClock()

    ulong = AFReadBattClock()

  DESCRIPTION
    This function reads the battery backed clock

  INPUTS
    none

  RESULT
    m_time is set to the returned value

  BUGS
    none known

  SEE ALSO
    @{"m_time" link "M_TIME" 0}
@endnode

@node "AFWRITEBATTCLOCK" "AFWriteBattClock"
AFBattClock/AFWriteBattClock

  NAME AFWriteBattClock()

    void = AFWriteBattClock(ULONG time)

  DESCRIPTION
    This function writes to the battery backed clock

  INPUTS
    time - time to set battclock to

  RESULT
    none

  BUGS
    none known

  SEE ALSO
    @{"m_time" link "M_TIME" 0}
@endnode

@node "MISCMEMBERS" "Misc Members"
AFBattClock/Misc Members

    @{"m_time" link "M_TIME" 0}
@endnode

@node "INCLUDES" "Includes"
  //////////////////////////////////////////////////////////////////////////////
  // BattClock.hpp - AFrame v1.0 © 1996 Synthetic Input
  //
  //
  // Deryk B Robosson
  // Jeffry A Worth
  // January 24, 1996
  //////////////////////////////////////////////////////////////////////////////

  #ifndef __AFBATTCLOCK_HPP__
  #define __AFBATTCLOCK_HPP__

  //////////////////////////////////////////////////////////////////////////////
  // INCLUDES
  #include "aframe:include/AFrame.hpp"
  #include "aframe:include/Object.hpp"
  #include <exec/types.h>
  #include <exec/libraries.h>
  #include <proto/battclock.h>
  #include <resources/battclock.h>

  //////////////////////////////////////////////////////////////////////////////
  // AFBattClock Class

  class AFBattClock : public AFObject
  {
  public:

      AFBattClock();
      ~AFBattClock();
    
      virtual char *ObjectType() { return "BattClock"; };

      ULONG m_time;

  // Methods

      virtual void OnCreate();
      virtual void DestroyObject();

      virtual void AFResetBattClock(void);
      virtual ULONG AFReadBattClock(void);
      virtual void AFWriteBattClock(ULONG);

  };

  //////////////////////////////////////////////////////////////////////////////
  #endif // __AFBATTCLOCK_HPP__
@endnode

@node "SOURCE" "Source"
  //////////////////////////////////////////////////////////////////////////////
  // BattClock.cpp - AFrame v1.0 © 1996 Synthetic Input
  //
  //
  // Deryk B Robosson
  // Jeffry A Worth
  // January 24, 1996
  //////////////////////////////////////////////////////////////////////////////

  //////////////////////////////////////////////////////////////////////////////
  // INCLUDES
  #include "AFRAME:include/BattClock.hpp"

  struct Library *BattClockBase;

  //////////////////////////////////////////////////////////////////////////////
  //

  AFBattClock::AFBattClock()
  {
      if(!BattClockBase)
          if(!(BattClockBase=(struct Library *)OpenResource((UBYTE *)"battclock.resource")))
              return;
  }

  AFBattClock::~AFBattClock()
  {
      DestroyObject();
  }

  void AFBattClock::OnCreate()
  {
      // Do Nothing.  Override if you wish.
  }

  void AFBattClock::DestroyObject()
  {
      if(BattClockBase) RemResource(BattClockBase);  BattClockBase=NULL;
  }

  void AFBattClock::AFResetBattClock()
  {
      ::ResetBattClock();
  }

  ULONG AFBattClock::AFReadBattClock()
  {
      m_time=ReadBattClock();
      return m_time;
  }

  void AFBattClock::AFWriteBattClock(ULONG time)
  {
      ::WriteBattClock(time);
  }
@endnode

@node "HISTORY" "History"
                    ***HISTORY***

 ***********************************************************
  BattClock Object v1.0

  Created January 26, 1996
  Release January 27, 1996

   - Created all function class objects.
 ***********************************************************
@endnode

@node "DISTRIBUTION" "Distribution"
Distribution

  The programs and files in this distribution are freely distributable, but are also Copyright (c) Jeff Worth and
Deryk Robosson. They may be freely distributed as long as no more than a nominal fee is charged to cover time and
copying costs. AFrame is distributed as non-crippled shareware, it is fully functional.

Commercial Distribution

Commercial usage is allowed if the following conditions are met:

    a) You state in your documentation that your program uses aframe.library
       and that AFrame is Copyright (c) Jeff Worth and Deryk Robosson.

    b) You send us a copy of your finished product(s) using aframe.library.

  If these conditions are met you are allowed to include the Kickstart 2.0 or higher version of aframe.library and
the installation script(s) with your commercial product.



Freely Distibutable Products

  All of the files copyrighted by the authors must remain unmodified.  None of these files may be distributed on its
own, the entire package must be distributed as one whole.  'demo.cpp' is full public domain and can be used in any
way you like.

  There is one exception to the above.  If you plan to release a freely distributable program (either public domain,
freeware or shareware), you may include 'libs/aframe.library', the installation scripts (with icon), the
documentation (with icons) with your distribution.

If you include AFrame with a crippled shareware program I'd like to ask you to send us a full working version.

  Whether your program is freely distributable or commercial, you must state in your documentation that your program
uses aframe.library and that AFrame is Copyright (c) Jeff Worth and Deryk Robosson
@endnode

@node "M_TIME" "m_time"
AFBattClock/m_time

  MEMBER TYPE
   ULONG

  DESCRIPTION
   A used to store the time from AFReadBattClock()

  SEE ALSO
   @{"AFReadBattClock" link "AFREADBATTCLOCK" 0}
@endnode

