@database 07a51280-0
@master aframe:help/DataType.Guide
@$VER: 1.0
@author "Deryk Robosson"
@(c) "1995, 1996 Synthetic Input"
@index Main
@remark Created with Heddley v1.1 (c) Edd Dumbill 1994

@node "Main" "AFDataType"

                      ***********************************

                        DataType C++ Object

                        AFrame Version 1.0
                        AFDataType Object Version 1.0

                        (c) 1995,1996 Jeffry A Worth
                                      Deryk B Robosson

                      ***********************************

@{"AFObject" link "aframe:help/Object.Guide/main" 0}
  AFDataType

@{b}TABLE OF CONTENTS@{ub}

  @{"Object Information" link "Object_Information" 0}

  Methods:
    @{"AFDataType" link "Constructor" 0}
    @{"~ADataType" link "Destructor" 0}

    @{"IsDataType" link "IsDataType" 0}
    @{"DTInfo" link "DTInfo" 0}
    @{"SaveObject" link "SaveObject" 0}
    @{"PrintObject" link "PrintObject" 0}
    @{"AbortPrint" link "AbortPrint" 0}
    @{"PrintComplete" link "PrintComplete" 0}
    @{"LoadClipBoard" link "LoadClipBoard" 0}
    @{"InterrogateClipBoard" link "InterrogateClipBoard" 0}
    @{"AddObject" link "AddObject" 0}
    @{"RemoveObject" link "RemoveObject" 0}
    @{"FrameObject" link "FrameObject" 0}

    @{"Misc Members" link "Misc_Members" 0}

    @{"Includes" link "Includes" 0}
    @{"History" link "History" 0}
    @{"Distribution" link "Distribution" 0}
@endnode

@node "Object_Information" "Object Information"
AFDataType/AFDataType Information

  This class is is the base class for all DataType classes.  Every DataType subclass
  is derrived from this object.
@endnode

@node "Constructor" "AFDataType"
AFDataType/AFDataType

  void = AFDataType()

  DESCRIPTION
    Default class constructor.

  INPUTS
    none

  RESULT
    none

  BUGS
    none known

  SEE ALSO
    @{"~AFDataType" link "Destructor" 0}
@endnode

@node "Destructor" "~ADataType"
AFDataType/~AFDataType

  void = ~AFDataType()

  DESCRIPTION
    Default class destructor.

  INPUTS
    none

  RESULT
    none

  BUGS
    none known

  SEE ALSO
    @{"AFDataType" link "Constructor" 0}
@endnode

@node "IsDataType" "IsDataType"
AFDataType/IsDataType

  BOOL = IsDataType(char *file)

  DESCRIPTION
    This member can be called to see if a datatype exists to support the given file.

  INPUTS
    file - pointer to a file name

  RESULT
    TRUE - if a datatype exists
    FALSE - if a datatype doesn't exist

  BUGS
    none known

  SEE ALSO
    none
@endnode

@node "DTInfo" "DTInfo"
AFDataType/DTInfo

  BOOL = DTInfo()
  BOOL = DTInfo(char *file)

  DESCRIPTION
    This member can be called to get information on an existing object or file.
    The m_dtGlobal.dtInfo structure is filled for your usage if successful.

  INPUTS
    file - pointer to a file name

  RESULT
    TRUE - if success
    FALSE - if failure

  BUGS
    none known

  SEE ALSO
    none
@endnode

@node "SaveObject" "SaveObject"
AFDataType/SaveObject

  BOOL = SaveObject(ULONG savetype, char *filename, ULONG mode)

  DESCRIPTION
    This member can be called to get information on an existing object or file.
    The m_dtGlobal.dtInfo structure is filled for your usage if successful.

  INPUTS
    savetype - should be DTST_CLIPBOARD or DTST_FILE
    filename - pointer to a file name
    mode     - should be either DTWM_IFF or DTWM_RAW for files, or NULL for clipboard

  RESULT
    TRUE - if success
    FALSE - if failure

  BUGS
    none known

  SEE ALSO
    none
@endnode

@node "PrintObject" "PrintObject"
AFDataType/PrintObject

  BOOL = PrintObject(AFWindow *window)

  DESCRIPTION

  INPUTS
    window - AFWindow pointer to window to recieve message when print complete
             or problems arrise

  RESULT
    TRUE - if success
    FALSE - if failure

  BUGS
    none known

  SEE ALSO
    AFWindow
@endnode

@node "AbortPrint" "AbortPrint"
AFDataType/AbortPrint

  BOOL = AbortPrint()

  DESCRIPTION
    Aborts current print job

  INPUTS
    none

  RESULT
    TRUE - if success
    FALSE - if failure

  BUGS
    none known

  SEE ALSO
    none
@endnode

@node "PrintComplete" "PrintComplete"
AFDataType/PrintComplete

  BOOL = PrintComplete()

  DESCRIPTION
    PrintObject failure/sccess cleanup routine

  INPUTS
    none

  RESULT
    TRUE - if success
    FALSE - if failure

  BUGS
    none known

  SEE ALSO
    @{"PrintObject" link "PrintObject" 0}
@endnode

@node "LoadClipBoard" "LoadClipBoard"
AFDataType/LoadClipboard

  BOOL = LoadClipBoard(LONG unit)

  DESCRIPTION
    Loads a datatype object from the clipboard

  INPUTS
    unit - clip unit number

  RESULT
    TRUE - if success
    FALSE - if failure

  BUGS
    none known

  SEE ALSO
    @{"InterrogateClipBoard" link "InterrogateClipBoard" 0}
@endnode

@node "InterrogateClipBoard" "InterrogateClipBoard"
AFDataType/InterrogateClipBoard

  BOOL = InterrogateClipBoard(LONG unit)

  DESCRIPTION
    Interrogates the clipbard device and checks to see if the system
    has a datatype to support the information on it

  INPUTS
    unit - clip unit number

  RESULT
    TRUE - if success
    FALSE - if failure

  BUGS
    none known

  SEE ALSO
    @{"LoadClipBoard" link "LoadClipBoard" 0}
@endnode

@node "AddObject" "AddObject"
AFDataType/AddObject

  ULONG = AddObject(AFWindow *window, AFRect *rect, UWORD gadid)

  DESCRIPTION
    Adds a datatype object to a window.  Note that this function will use the
    static icon for audio etc.  Pictures will be added and updated to be viewed.

  INPUTS
    window - window to add the object to
    rect   - size and position of object
    gadid  - gadget id

  RESULT
    ULONG - position of gadget in gadget list if successful

  BUGS
    none known

  SEE ALSO
    @{"RemoveObject" link "RemoveObject" 0}
@endnode

@node "RemoveObject" "RemoveObject"
AFDataType/RemoveObject

  LONG = RemoveObject()

  DESCRIPTION
    Removes datatype object from the window to which it was added

  INPUTS
    none

  RESULT
    LONG - position of gadget in gadget list if successful

  BUGS
    none known

  SEE ALSO
    @{"AddObject" link "AddObject" 0}
@endnode

@node "FrameObject" "FrameObject"
AFDataType/FrameObject

  rect = FrameObject(AFWindow *window)
  rect = FrameObject(AFScreen *screen)
  rect = FrameObject()

  DESCRIPTION
    Gets dimensions of the datatype object based on the function that you call.  If you call
    the FrameObject(window) function, if the datatype viewing area is larger than the window,
    the rect returned will be the same as the interior size of the window, same goes for
    FrameObject(screen).  If FrameObject() is called, a rect of the actual object size is returned.

  INPUTS
    window - AFWindow pointer
    screen - AFScreen pointer

  RESULT
    rect - AFRect from which you can use the size

  BUGS
    none known

  SEE ALSO
    AFWindow
    AFScreen
    AFRect
@endnode

@node "Misc_Members" "Misc Members"
AFDataType/Misc Members

    @{"m_dtGlobal" link "m_dtGlobal" 0}
@endnode

@node "Includes" "Includes"
  //////////////////////////////////////////////////////////////////////////////
  // DataType.hpp
  //
  // Deryk Robosson
  // March 9, 1996
  //////////////////////////////////////////////////////////////////////////////

  #ifndef __DATATYPE_HPP__
  #define __DATATYPE_HPP__

  //////////////////////////////////////////////////////////////////////////////
  // INCLUDES
  #include "aframe:include/aframe.hpp"
  #include "aframe:include/string.hpp"
  #include "aframe:include/rect.hpp"
  #include "aframe:include/window.hpp"
  #include "aframe:include/screen.hpp"
  #include <exec/memory.h>
  #include <exec/libraries.h>
  #include <devices/clipboard.h>
  #include <graphics/gfx.h>
  #include <graphics/displayinfo.h>
  #include <intuition/icclass.h>
  #include <intuition/gadgetclass.h>
  #include <datatypes/datatypes.h>
  #include <datatypes/datatypesclass.h>
  #include <datatypes/pictureclass.h>
  #include <datatypes/soundclass.h>
  #include <datatypes/textclass.h>
  #include <datatypes/animationclass.h>
  #include <libraries/iffparse.h>

  #include <clib/alib_protos.h>
  #include <clib/datatypes_protos.h>
  #include <clib/iffparse_protos.h>
  #include <clib/icon_protos.h>

  #include <pragmas/datatypes_pragmas.h>
  #include <pragmas/iffparse_pragmas.h>
  #include <pragmas/icon_pragmas.h>

  #include <proto/datatypes.h>

  ///////////////////////////////////////////////////////////////////////////////
  // Definitions
  extern struct IconBase      *IconBase;
  extern struct Library       *DataTypesBase;
  extern struct Library       *IFFParseBase;

  typedef struct
  {
      AFString description;   // Description of datatype
      AFString name;          // Name of datatype
      AFString type;          // Type
      AFString group;         // Group
      AFString id;            // ID
      AFString author;        // Author       // this and below not yet implemented
      AFString annotation;    // Annotation
      AFString copyright;     // Copyright
      AFString version;       // version
  } DTINFO;

  typedef struct
  {
      struct dtPrint  dtp;
      LPMsgPort       mp;
      union printerIO *pio;
  } DTPRINT;

  typedef struct
  {
      Object              *o;         // keep a pointer to the object
      AFWindow            *dtWindow;  // keep a pointer to the window of the object
      struct DataType     *dtn;
      struct DTSpecialInfo *dtsi;
      struct FrameInfo    fri;
      struct dtFrameBox   dtf;
      struct dtWrite      dtw;
      struct dtDraw       dtDraw;
      struct dtGeneral    dtg;
      struct dtGoto       dtGoto;
      struct dtSelect     dts;
      struct dtTrigger    dtt;
      struct DTMethod     dtm;
      struct gpLayout     gpl;
      struct GadgetInfo   ginfo;
      AFRect              rect;
      DTPRINT             dtPrint;
      DTINFO              dtInfo;
      BOOL                dtAdded;  // keep track off object addition & removal
  } GD;

  //////////////////////////////////////////////////////////////////////////////
  // DataType Class

  class AFDataType : public AFObject
  {
  public:
      AFDataType();
      ~AFDataType();

      virtual void DestroyObject();
      virtual char *ObjectType() { return "DataType"; };

      BOOL IsDataType(char *file);
      BOOL DTInfo();
      BOOL DTInfo(char *file);
      BOOL SaveObject(ULONG stype, char *file_name, ULONG mode);
      BOOL PrintObject(AFWindow *window);
      BOOL AbortPrint();
      BOOL PrintComplete();
      BOOL LoadClipBoard(LONG unit);
      ULONG InterrogateClipBoard(LONG unit);
      ULONG AddObject(AFWindow *window, AFRect *rect, UWORD id);
      LONG RemoveObject();
      AFRect FrameObject(AFWindow *window);
      AFRect FrameObject(AFScreen *screen);
      AFRect FrameObject();

      AFDataType operator=(AFDataType dtype);

      GD  m_dtGlobal;
  };

  //////////////////////////////////////////////////////////////////////////////
  #endif // __DATATYPE_HPP__
@endnode

@node "History" "History"
                    ***HISTORY***

 ***********************************************************
  AFDataType Object v1.0

  Created March 9, 1996
  Release March 9, 1996

   - Created class with all functionality
 ***********************************************************
@endnode

@node "Distribution" "Distribution"
Distribution

  The programs and files in this distribution are freely distributable, but are also Copyright (c) Jeff Worth and
Deryk Robosson. They may be freely distributed as long as no more than a nominal fee is charged to cover time and
copying costs. AFrame is distributed as non-crippled shareware, it is fully functional.

Commercial Distribution

Commercial usage is allowed if the following conditions are met:

    a) You state in your documentation that your program uses aframe.library
       and that AFrame is Copyright (c) Jeff Worth and Deryk Robosson.

    b) You send us a copy of your finished product(s) using aframe.library.

  If these conditions are met you are allowed to include the Kickstart 2.0 or higher version of aframe.library and
the installation script(s) with your commercial product.



Freely Distibutable Products

  All of the files copyrighted by the authors must remain unmodified.  None of these files may be distributed on its
own, the entire package must be distributed as one whole.  'demo.cpp' is full public domain and can be used in any
way you like.

  There is one exception to the above.  If you plan to release a freely distributable program (either public domain,
freeware or shareware), you may include 'libs/aframe.library', the installation scripts (with icon), the
documentation (with icons) with your distribution.

If you include AFrame with a crippled shareware program I'd like to ask you to send us a full working version.

  Whether your program is freely distributable or commercial, you must state in your documentation that your program
uses aframe.library and that AFrame is Copyright (c) Jeff Worth and Deryk Robosson
@endnode

@node "m_dtGlobal" "m_dtGlobal"
AFDataType/m_dtGlobal

  MEMBER TYPE
   struct GD

  DESCRIPTION
   This member contains global data (GD) information on each and every datatype class.
   This is not a private member, but should NOT be poked and prodded!

  SEE ALSO
    none
@endnode

