# Makefile for GLUT files

LIBRARYDIR = /library

LIBRARYSCFLAGS = idlen=63 nocheckabort

VERSION = 2
REV = 0
LIBRARYFD = /include/fd/glut.fd
GLUT_LIBRARY = $(LIBRARYDIR)/glut.library

GLUTFILES1 =  glutAddMenuEntry.o               glutAddSubMenu.o\
              glutAttachDetachMenu.o           glutChangeToMenuSubEntry.o\
              glutCreateMenu.o                 glutCreateWindow.o\
              glutDestroyMenu.o                glutDestroyWindow.o\
              glutExtensionSupported.o         glutGet.o
GLUTFILES2 =  glutGetModifiers.o               glutGetSetColor.o\
              glutGetSetMenu.o                 glutGetSetWindow.o\
              glutInit.o                       glutInitDisplayMode.o\
              glutInitWindowPosition.o         glutInitWindowSize.o\
              glutMainLoop.o                   glutPostRedisplay.o
GLUTFILES3 =  glutRemoveMenuItem.o             glutSetWindowTitle.o\
              glutShapes.o                     glutstuff.o\
              glutSwapBuffers.o                glutTeapot.o\
              glutXFunc.o                      glutReshapePositionWindow.o
GLUTEXTRA  =  glu.o                            mesa.o

GLUTFILES = $(GLUTFILES1) $(GLUTFILES2) $(GLUTFILES3) $(GLUTEXTRA)

TMP_FILE = T:GlutTMP_SCOPTS

MAKELIBRARY = slink WITH lib:utillib.with lib lib:scm881.lib+lib:sc.lib+lib:amiga.lib libversion $(VERSION) librevision $(REV) libfd $(LIBRARYFD) TO $(GLUT_LIBRARY) FROM lib:libent.o lib:libinitr.o

CC = sc

.c.o:
    $(CC) WITH=$(TMP_FILE) $*.c

all: AmigaLibrary $(GLUTFILES) DeleteTMP
    @join $(GLUTFILES1) as glutfiles1.o
    @join $(GLUTFILES2) as glutfiles2.o
    @join $(GLUTFILES3) as glutfiles3.o
    $(MAKELIBRARY) glutfiles1.o glutfiles2.o glutfiles3.o $(GLUTEXTRA)
    @delete glutfiles1.o
    @delete glutfiles2.o
    @delete glutfiles3.o

AmigaLibrary:
    @echo >$(TMP_FILE) "$(LIBRARYSCFLAGS)"

DeleteTMP:
    @delete $(TMP_FILE)

glu.o: /lib/glu.c
	$(CC) WITH=$(TMP_FILE) /lib/glu.c OBJNAME=glu.o

mesa.o: /lib/mesa.c
	$(CC) WITH=$(TMP_FILE) /lib/mesa.c OBJNAME=mesa.o
