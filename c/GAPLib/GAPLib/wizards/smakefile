#
# Wizard makefile, automagically builds magical programs. :-)
# SAS/C version.
#

DATA= data/report_c.c data/report_h.c data/bm_c.c data/bs_c.c data/bv_c.c \
	data/sk_c.c data/mk.c

OBJS= Conjurer.o

CC= sc

CFLAGS= opt

all: Conjurer

clean:
	-delete b2c \#\?\.\(o\|lnk\|info\) $(DATA)

data: $(DATA)

Conjurer: $(OBJS)
	$(CC) Conjurer.o link to /bin/Conjurer
	-protect /bin/Conjurer +e

Conjurer.o: Conjurer.c $(DATA)
	$(CC) $(CFLAGS) Conjurer.c to Conjurer.o

data/report_c.c: Templates/report.c b2c
	b2c <Templates/report.c >data/report_c.c report_c

data/report_h.c: Templates/report.h b2c
	b2c <Templates/report.h >data/report_h.c report_h

data/bm_c.c: Templates/BitMatrix.c b2c
	b2c <Templates/BitMatrix.c >data/bm_c.c Bitmatrix_c

data/bs_c.c: Templates/Bitstring.c b2c
	b2c <Templates/Bitstring.c >data/bs_c.c Bitstring_c

data/bv_c.c: Templates/BoundedRealVector.c b2c
	b2c <Templates/BoundedRealVector.c >data/bv_c.c BRVector_c

data/sk_c.c: Templates/Skeleton.c b2c
	b2c <Templates/Skeleton.c >data/sk_c.c Skeleton_c

data/mk.c: Templates/Makefile b2c
	b2c <Templates/Makefile >data/mk.c mk

b2c: b2c.c
	$(CC) $(CFLAGS) b2c.c link to b2c
	-protect b2c +e
