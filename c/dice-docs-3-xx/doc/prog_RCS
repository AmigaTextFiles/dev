@DATABASE DICE_Manual
@NODE MAIN "The DICE 3.xx RCS Documentation"
@INDEX DICE_Index/MAIN
@TOC dice.guide/MAIN

@prev prog_diff/MAIN
@next dice.guide/MAIN

                              @{b}RCS@{ub}
                         Revision Control System


 These tools allow more control over the revisions of large projects,
 which may otherwise get somewhat out of control.


   @{i}RCS Tools@{ui}
   @{" RCS..     " Link "rcs"      }   Change RCS File Attributes
   @{" RCSClean  " Link "rcsclean" }   Clean up RCS Work Files
   @{" RCSDiff   " Link "rcsdiff"  }   Compare RCS Revisions
   @{" RCSMerge  " Link "rcsmerge" }   Merge RCS Revisions
   @{" RLog      " Link "rlog"     }   Display RCS History


@endnode

@node rcs "Change RCS File Attributes"

 SYNOPSIS
 rcs [ options ] file ...

 DESCRIPTION
 Rcs creates new RCS files or changes attributes of existing ones. An
 RCS file contains multiple revisions of text, an access list, a
 change log, descriptive text, and some control attributes.  For rcs
 to work, the caller's login name must be on the access list, except
 if the access list is empty, the caller is the owner of the file or
 the superuser, or the -i option is present.

 Files ending in ,v are RCS files, all others are working files.  If a
 working file is given, rcs tries to find the corresponding RCS file
 first in directory ./RCS and then in the current directory, as
 explained in co.

 -i
 creates and initializes a new RCS file, but does not deposit any
 revision.  If the RCS file has no path prefix, rcs tries to place
 it first into the subdirectory ./RCS, and then into the current
 directory.  If the RCS file already exists, an error message is printed.

 -alogins
 appends the login names appearing in the comma-separated list
 logins to the access list of the RCS file.

 -Aoldfile
 appends the access list of oldfile to the access list of the RCS file.

 -e[logins]
 erases the login names appearing in the comma-separated list
 logins from the access list of the RCS file.  If logins is
 omitted, the entire access list is erased.

 -b[rev]
 sets the default branch to rev.  If rev is omitted, the default
 branch is reset to the (dynamically) highest branch on the trunk.

 -cstring
 sets the comment leader to string.  The comment leader is printed
 before every log message line generated by the keyword $Log$
 during checkout (see co).  This is useful for programming
 languages without multi-line comments.  During rcs -i or initial
 ci, the comment leader is guessed from the suffix of the working file.

 -l[rev]
 locks the revision with number rev.  If a branch is given, the
 latest revision on that branch is locked.  If rev is omitted, the
 latest revision on the default branch is locked.  Locking
 prevents overlapping changes.  A lock is removed with ci or rcs/


 -u[rev]
 unlocks the revision with number rev.  If a branch is given, the
 latest revision on that branch is unlocked.  If rev is omitted,
 the latest lock held by the caller is removed.  Normally, only
 the locker of a revision may unlock it.  Somebody else unlocking
 a revision breaks the lock.

 -L
 Sets locking to strict.  Strict locking means that the owner of
 an RCS file is not exempt from locking for checkin.  This option
 should be used for files that are shared.

 -U
 Sets locking to non-strict.  Non-strict locking means that the
 owner of a file need not lock a revision for checkin.  This
 option should NOT be used for files that are shared.

 -nname[:rev]
 Associates the symbolic name name with the branch or revision
 rev. Rcs prints an error message if name is already associated
 with another number. If rev is omitted, the symbolic name is deleted.

 -Nname[:rev]
 Same as -n, except that it overrides a previous assignment of name.

 -orange
 Deletes ("outdates") the revisions given by range.  A range
 onsisting of a single revision number means that revision.  A
 range consisting of a branch number means the latest revision on
 that branch. A range of the form rev1-rev2 means revisions rev1
 to rev2 on the same branch, -rev  means from the beginning of the
 branch containing rev up to and including rev, and rev means from
 revision rev to the end of the branch containing rev.  None of
 the outdated revisions may have branches or locks.

 -q  Quiet mode; diagnostics are not printed.

 -sstate[:rev]
 sets the state attribute of the revision rev to state.  If rev is
 a branch number, the latest revision on that branch is assumed.
 If rev is omitted, the latest revision on the default branch is
 assumed.  Any identifier is acceptable for state.  A useful set
 of states is Exp (for experimental), Stab (for stable), and Rel
 (for released).  By default, ci sets the state of a revision to Exp.

 -t[txtfile]
 writes descriptive text into the RCS file (deletes the existing
 text).  If txtfile is omitted, rcs prompts the user for text
 supplied from the standard input, terminated with a line
 containing a single '.' or CTRL-\.  Otherwise the descriptive text
 is copied from the file txtfile.  If the -i option is present,
 descriptive text is requested even if -t is not given.  The
 prompt is suppressed if the standard input is not a terminal.

 DIAGNOSTICS
 The RCS file name and the revisions outdated are written to the
 diagnostic output.  The exit status always refers to the last RCS file
 operated upon, and is 0 if the operation was successful, 1 otherwise.

 FILES
 rcs creates a semaphore file in the same directory as the RCS file to
 prevent simultaneous update.  For changes, rcs always creates a new
 file.  On successful completion, rcs deletes the old one and renames
 the new one.

@endnode


@NODE rcsclean "Clean up RCS Work Files"


 SYNOPSIS
 rcsclean [ -rrev ] [ -qrev ] file...

 DESCRIPTION
 Rcsclean removes working files that were checked out and never
 modified.  For each file given, rcsclean compares the working file and
 a revision in the corresponding RCS file.  If it finds no difference,
 it removes the working file, and, if the revision was locked by the
 caller, unlocks the revision.

 A file name ending in ",v" is an RCS file name, otherwise a working
 file name.  Rcsclean derives the working file name from the RCS file
 name and vice versa, as explained in co.  Pairs consisting of both an
 RCS and a working file name may also be specified.

 -r rev
 specifies with which revision the working file is compared. If rev
 is omitted, rcsclean compares the working file with the latest
 revision on the default branch (normally the highest branch on the trunk).

 -q  suppresses diagnostics.
 Rcsclean is useful for "clean" targets in Makefiles.  Note that
 rcsdiff prints out the differences.  Also, ci normally asks
 whether to check in a file if it was not changed.

 EXAMPLES
 rcsclean *.c *.h

 The above command removes all working files ending in ".c" or ".h"
 that were not changed since their checkout.

 DIAGNOSTICS
 The exit status is 0 if there were no differences during the last
 comparison or if the last working file did not exist, 1 if there were
 differences, and 2 if there were errors.

@endnode


@node rcsdiff "Compare RCS Revisions"


 SYNOPSIS
 rcsdiff [ -biwt ] [ -cefhn ] [ -q ] [ -rrev1 ] [ -rrev2 ] file ...

 DESCRIPTION
 Rcsdiff runs diff to compare two revisions of each RCS file given.  A
 file name ending in ',v' is an RCS file name, otherwise a working
 file name.  Rcsdiff derives the working file name from the RCS file
 name and vice versa, as explained in co.  Pairs consisting of both an
 RCS and a working file name may also be specified.

 The options -b, -i, -w, -t, -c, -e, -f, and -h, have the same effect
 as described in diff.

 -n  generates an edit script of the format used by RCS

 -q  Suppresses diagnostic output.

 If both rev1 and rev2 are omitted, rcsdiff compares the latest
 revision on the default branch (normally the highest branch on
 the trunk) with the contents of the corresponding working file.
 This is useful for determining what you changed since the last
 checkin.

 If rev1 is given, but rev2 is omitted, rcsdiff compares revision
 rev1 of the RCS file with the contents of the corresponding working file.

 If both rev1 and rev2 are given, rcsdiff compares revisions
 rev1 and rev2 of the RCS file.

 Both rev1 and rev2 may be given numerically or symbolically, and
 may actually be attached to any of the options.

 EXAMPLES
 rcsdiff f.c

 The above command runs diff, comparing the currently checked out
 version with the latest revision stored on the current trunk.

 DIAGNOSTICS
 The exit status is 0 if there were no differences during the last
 comparison, 1 if there were differences, and 2 if there were errors.

@endnode


@node rcsmerge "Merge RCS Revisions"
        

 SYNOPSIS
 rcsmerge -rrev1 [ -rrev2 ] [ -p ] file

 DESCRIPTION
 Rcsmerge incorporates the changes between rev1 and rev2 of an RCS file
 into the corresponding working file.  If -p is given, the result is
 printed on the standard output, otherwise the result overwrites the
 working file.

 A file name ending in ",v" is an RCS file name, otherwise a working
 file name.  Rcsmerge derives the working file name from the RCS file
 name and vice versa, as explained in co.  A pair consisting of both an
 RCS and a working file name may also be specified.

 Rev1 may not be omitted.  If rev2 is omitted, the latest revision on
 the default branch (normally the highest branch on the trunk) is
 assumed.  Both rev1 and rev2 may be given numerically or symbolically.

 Rcsmerge prints a warning if there are overlaps, and delimits the
 overlapping regions as explained in merge.  The command is useful for
 incorporating changes into a checked-out revision.

 EXAMPLES
 Suppose you have released revision 2.8 of f.c.  Assume furthermore
 that you just completed revision 3.4, when you receive updates to
 release 2.8 from someone else.  To combine the updates to 2.8 and
 your changes between 2.8 and 3.4, put the updates to 2.8 into file
 f.c and execute

 rcsmerge -p -r2.8 -r3.4 f.c >f.merged.c

 Then examine f.merged.c.  Alternatively, if you want to save the
 updates to 2.8 in the RCS file, check them in as revision 2.8.1.1 and
 execute co -j:

 ci -r2.8.1.1 f.c
 co -r3.4 -j2.8:2.8.1.1 f.c

 As another example, the following command undoes the changes between
 revision 2.4 and 2.8 in your currently checked out revision in f.c.

 rcsmerge -r2.8 -r2.4 f.c

 Note the order of the arguments, and that f.c will be overwritten.


@endnode


@node rlog "Display RCS History"
        

 SYNOPSIS
 rlog [ options ] file ...

 DESCRIPTION
 Rlog prints information about RCS files.  Files ending in ,v are RCS
 files, all others are working files.  If a working file is given,
 rlog will locate the corresponding RCS file.

 Rlog prints the following information for each RCS file: RCS file
 name, working file name, head (i.e., the number of the latest
 revision on the trunk), default branch, access list, locks, symbolic
 names, suffix, total number of revisions, number of revisions
 selected for printing, and descriptive text.  This is followed by
 entries for the selected revisions in reverse chronological order for
 each branch.  For each revision, rlog prints revision number, author,
 date/time, state, number of lines added/deleted (with respect to the
 previous revision), locker of the revision (if any), and log message.
 Without options, rlog prints complete information.  The options below
 restrict this output.

 -L  ignores RCS files that have no locks set; convenient in
     combination with -R, -h, or -l.

 -R  only prints the name of the RCS file; convenient for translating
     a working file name into an RCS file name.

 -h  prints only RCS file name, working file name, head, default
     branch, access list, locks, symbolic names, and suffix.

 -t  prints the same as -h, plus the descriptive text.

 -b  prints information about the revisions on the default branch
     (normally the highest branch on the trunk).

 -ddates
 prints information about revisions with a checkin date/time in
 the ranges given by the semicolon- separated list of dates.  A
 range of the form d1<d2 or d2>d1 selects the revisions that were
 deposited between d1 and d2, (inclusive).  A range of the form <d
 or d> selects all revisions dated d or earlier.  A range of the
 form d< or >d selects all revisions dated d or later.  A range of
 the form d selects the single, latest revision dated d or
 earlier.  The date/time strings d, d1, and d2 are in the free
 format explained in co.  Quoting is sometimes necessary,
 especially for < and >.  Note that the separator is a semicolon.

 -l[lockers]
 prints information about locked revisions.  If the
 comma-separated list lockers of login names is given, only the
 revisions locked by the given login names are printed.  If the
 list is omitted, all locked revisions are printed.

 -rrevisions
 prints information about revisions given in the comma-separated
 list revisions of revisions and ranges.  A range rev1-rev2 means
 revisions rev1 to rev2 on the same branch, -rev means revisions
 from the beginning of the branch up to and including rev, and
 rev- means revisions starting with rev to the end of the branch
 containing rev.  An argument that is a branch means all revisions
 on that branch.  A range of branches means all revisions on the
 branches in that range.

 -sstates
 prints information about revisions whose state attributes match
 one of the states given in the comma-separated list states.

 -w[logins]
 prints information about revisions checked in by users with login
 names appearing in the comma- separated list logins.  If logins
 is omitted, the user's login is assumed.

 Rlog prints the intersection of the revisions selected with the
 options -d, -l, -s, -w, intersected with the union of the
 revisions selected by -b and -r.

 EXAMPLES
 rlog -L -R RCS/*,v
 rlog -L -h RCS/*,v
 rlog -L -l RCS/*,v
 rlog RCS/*,v

 The first command prints the names of all RCS files in the
 subdirectory RCS which have locks.  The second command prints the
 headers of those files, and the third prints the headers plus the log
 messages of the locked revisions.  The last command prints complete
 information.

 DIAGNOSTICS
 The exit status always refers to the last RCS file operated upon, and
 is 0 if the operation was successful, 1 otherwise.

@endnode
