<html>
<head>
  <title>fstat command</title>
  <meta name="Generator" content="GuideML V1.6">
  <meta http-equiv="Content-Type" content="text/html">
</head>
<body>
<a href="main.html">CONTENTS</a> | <a href="dice_index/main.html">INDEX</a> | <a href="dir.html">PREV</a> | <a href="getcwd.html">NEXT</a>
<hr>
<pre>

 fstat

 NAME
  fstat - stat a file descriptor

 SYNOPSIS
  #include &#060;sys/stat.h&#062;

  int error = fstat(fd, &amp;stat_buf);
  struct stat stat_buf;

 FUNCTION
  fstat() is a unix compatible call that returns information
  pertaining to the file represented by an open file descriptor.

  see stat() for information on the struct stat fields.

 NOTE
  fstat() works just like stat except you provide a UNIX file
  descriptor (*NOT* an amigaDOS File Handle).  Under 2.0,
  ExamineFH() will be used.  Under 1.3, the original path used to
  open the file will be stat()'d, which ends up scanning the
  directory if the file was open for exclusive access.

 INPUTS
  int fd;         file descriptor to stat

  struct stat *sbuf;  address of stat structure that will be filled in

 RESULTS
  int error;      0 on success, &#060; 0 on error
  none

 EXAMPLE
  #include &#060;stdio.h&#062;
  #include &#060;fcntl.h&#062;
  #include &#060;sys/stat.h&#062;

  main(ac, av)
  int ac;
  char *av[];
  {
      int fd;
      int r;
      struct stat stat_buf;

      if (ac == 1) {
      puts(&quot;test scratch_file&quot;);
      exit(1);
      }
      fd = open(av[1], O_WRONLY | O_CREAT);
      if (fd &#062;= 0) {
      r = fstat(fd, &amp;stat_buf);
      if (r &#060; 0)
          printf(&quot;Can't stat fd=%dn&quot;, fd);
      else
          printf(&quot;File is %d bytes longn&quot;, stat_buf.st_size);
      close(fd);
      }
      return(0);
  }

 SEE ALSO
  chdir


</pre>
</body>
</html>
