<html>
<head>
  <title>onbreak command</title>
  <meta name="Generator" content="GuideML V1.6">
  <meta http-equiv="Content-Type" content="text/html">
</head>
<body>
<a href="main.html">CONTENTS</a> | <a href="dice_index/main.html">INDEX</a> | <a href="*main.html">PREV</a> | <a href="_main.html">NEXT</a>
<hr>
<pre>

 <b>onbreak</b>

 NAME
  onbreak - set special ^C handler    (not ANSI)

 SYNOPSIS
  typedef int (*fptr)();

  fptr oldfunc = onbreak(newfunc);
  fptr newfunc;

 FUNCTION
  onbreak() sets a special function to handle ^C.  It takes a pointer to
  this function and returns a pointer to the previous onbreak function,
  if any.  When ^C is hit, the special onbreak function is called before
  any other action.

  If the onbreak function returns a non-zero value, ^C aborts the program
  like it usually does.  If the function returns 0, however, the ^C
  is completely ignored.

 EXAMPLE
  /*
   *  note: The reentrancy check is needed because of both the puts
   *    and the sleep() all.
   */

  #include &#060;stdio.h&#062;
  #include &#060;stdlib.h&#062;

  int
  brk()
  {
      static short cnt = 0;   /*  check for reentrancy */

      if (cnt)                /*  if not 0 then reentered!    */
      return(0);
      ++cnt;

      puts(&quot;Nah Nah, you can't break me!&quot;);
      sleep(1);
      --cnt;
      return(0);
  }

  int
  main()
  {
      short i;

      onbreak(brk);
      puts(&quot;Hit ^C while I loop from 1 to 100, as many times as you want&quot;);
      sleep(2);
      for (i = 1; i &#060;= 100; ++i)
      printf(&quot;Loop, counting, count = %dn&quot;, i);
      return(0);
  }

 SEE ALSO
  <a href="clib_stdlib/atexit.html">atexit</a>


</pre>
</body>
</html>
