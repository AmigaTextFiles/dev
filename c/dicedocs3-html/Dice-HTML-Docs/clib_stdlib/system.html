<html>
<head>
  <title>system command</title>
  <meta name="Generator" content="GuideML V1.6">
  <meta http-equiv="Content-Type" content="text/html">
</head>
<body>
<a href="main.html">CONTENTS</a> | <a href="dice_index/main.html">INDEX</a> | <a href="atoi.html">PREV</a> | <a href="qsort.html">NEXT</a>
<hr>
<pre>

 <b>system</b>

 NAME
  system - call system shell with command line

 SYNOPSIS
  #include &#060;stdio.h&#062;
  #include &#060;stdlib.h&#062;

  int r = system(buf);
  const char *buf;

 FUNCTION
  system() calls the system shell with the specified command line,
  returning the exit code of the command or -1 if it was unable to
  run the command.

  FOR PROGRAMS COMPILED UNDER 1.3, even if run in 1.4 enviroment, the
  system call will not return the exit code from the command, but
  return -1 if could not be run, 0 if it could.

  FOR PROGRAMS COMPILED UNDER 2.0, system() will use the 2.0 calls
  and return a proper exit code when running under 2.0, and will use
  Execute() if running under 1.3

 GETTING SYSTEM TO USE THE USER SHELL UNDER 2.0 (ADVANCED USERS ONLY)

  Under 2.0 system() defaults to using the boot shell (i.e. commodore
  shell).  In order to have system() use the Sys_UserShell (for
  example, to use WShell if you have WShell installed) you need to do
  the following (usually in your main source module):

  #include &#060;dos/dostags.h&#062;

  int _SystemBoolTag = SYS_UserShell;

  You could also set this global to SYS_CustomShell if you like. The
  default value is TAG_IGNORE from &#060;utility/tagitem.h&#062;.  To get even
  more fancy you can also declare int _SystemBoolTagValue to modify
  the data portion of the tag (default is 1).

  Alternately you can simply #include &#060;stdlib.h&#062;, not declare either
  variable explicitly (they are extern'd in &#060;stdlib.h&#062;), and modify
  them run-time from main().  The compiler will thus give an error if
  you make a mistake in the variable names.

 EXAMPLE
  #include &#060;stdio.h&#062;
  #include &#060;stdlib.h&#062;

  main()
  {
      char buf[256];
      FILE *fi;

      system(&quot;DIR &#062;t:xx&quot;);
      if (fi = fopen(&quot;t:xx&quot;, &quot;r&quot;)) {
      puts(&quot;Directory is:&quot;);
      while (fgets(buf, sizeof(buf), fi))
          printf(&quot;FuBarBletchPreamble: %s&quot;, buf);
      fclose(fi);
      remove(&quot;t:xx&quot;);
      } else {
      puts(&quot;Couldn't get directory!&quot;);
      }
      return(0);
  }

 INPUTS
  char *buf;  command line to run, like a normal AmigaDOS CLI command line.

 RESULTS
  int r;      return code



</pre>
</body>
</html>
