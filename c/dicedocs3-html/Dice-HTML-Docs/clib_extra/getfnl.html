<html>
<head>
  <title>getfnl command</title>
  <meta name="Generator" content="GuideML V1.6">
  <meta http-equiv="Content-Type" content="text/html">
</head>
<body>
<a href="main.html">CONTENTS</a> | <a href="dice_index/main.html">INDEX</a> | <a href="expand_args.html">PREV</a> | <a href="gethead.html">NEXT</a>
<hr>
<pre>

 getfnl

 NAME
  getfnl - get file name list.  Scan a directory and return list of
       files that match the optional wildcard

  This is a non-standard function and exists for compatibility with
  other commercial compilers.

 SYNOPSIS
  int n = getfnl(pat, buf, bufsize, attr);
  const char *pat;
  char *buf;
  int bufsize;
  int attr;

 FUNCTION
  getfnl() scans the specified anchored AmigaDOS pattern and fills
  the specified buffer (up to bufsize bytes) with file names
  separated by a nul character (0), ending the list with a double
  nul (00).  getfnl() returns the number of files/dirs in the buffer
  or -1 if there was not enough room

  The pattern pat is an AmigaDOS pattern such as &quot;df0:#?.c&quot;.  buf
  is a buffer of bufsize bytes.  attr determines what kinds of
  files are valid:

      0   normal files only
      1   files and directories

 NOTE
  getfnl() exists for compatibility, but expand_args() is a much
  better function to use if you want a list of files &amp; dirs.

 EXAMPLE
  #include &#060;stdio.h&#062;

  char Buf[4096];

  main(ac, av)
  int ac;
  char *av[];
  {
      int n;

      if (ac != 2) {
      puts(&quot;Expected an anchored wildcard such as '#?'&quot;);
      exit(1);
      }
      n = getfnl(av[1], Buf, sizeof(Buf), 1);
      {
      char *ptr = Buf;
      while (*ptr) {              /*  look for 00   */
          puts(ptr);
          ptr += strlen(ptr) + 1; /*  skip first 0   */
      }
      }
      return(0);
  }


 INPUTS
  const char *pat;    pattern to scan for (anchored)
  char *buf;      buffer to put results in
  int bufsize;        size of buffer
  int attr;       attribes (0 or 1)

 RESULTS
  int n;          number of file names in buffer or -1 on error

 SEE ALSO
  <a href="strbpl.html">strbpl</a>, <a href="wildcard.html">wildcard</a>



</pre>
</body>
</html>
