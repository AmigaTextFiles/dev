<html>
<head>
  <title>fsetpos command</title>
  <meta name="Generator" content="GuideML V1.6">
  <meta http-equiv="Content-Type" content="text/html">
</head>
<body>
<a href="main.html">CONTENTS</a> | <a href="dice_index/main.html">INDEX</a> | <a href="fseek.html">PREV</a> | <a href="ftell.html">NEXT</a>
<hr>
<pre>

 fsetpos

 NAME
  fsetpos - set position within file pointer (nearly equivalent to
  fseek absolute)

 SYNOPSIS
  #include &#060;stdio.h&#062;

  int error = fsetpos(fp, &amp;pos);
  FILE *fp;
  fpos_t pos;

 FUNCTION
  fsetpos() is a nearly useless call that is essentially the same
  as fseek(fp, (long)pos, 0);  fsetpos() seeks within a file pointer
  to the absolute position specified by an fpos_t type.  The
  address of an fpos_t object is passed to fsetpos().

  Normally one saves the current seek position into an fpos_t
  type using the fgetpos() function, then seeks back using
  the fsetpos() function.  In this way the programmer need not make
  any direct reference to the contents of the fpos_t type.

 EXAMPLE
  /*
   *  get a line, save current position, get rest of file, go back
   *  to saved position, retrieve line again and print again.
   */

  #include &#060;stdio.h&#062;

  main(ac, av)
  int ac;
  char **av;
  {
      FILE *fp;
      fpos_t save_pos;
      int count;
      char buf[256];

      if (ac == 1) {
      puts(&quot;Expected textfile argument&quot;);
      exit(1);
      }
      fp = fopen(av[1], &quot;r&quot;);
      if (fp == NULL) {
      printf(&quot;Unable to open %sn&quot;, av[1]);
      exit(1);
      }
      for (count = 0; fgets(buf, sizeof(buf), fp); ++count) {
      if (count == 0)             /*  just before second line */
          fgetpos(fp, &amp;save_pos);
      fprintf(stdout, &quot;%-3d: %s&quot;, count + 1, buf);
      }
      if (count &#060; 2) {
      puts(&quot;not enough lines in file for example!&quot;);
      exit(1);
      }
      puts(&quot;--end of file, now seeking back to line 2--&quot;);
      fsetpos(fp, &amp;save_pos);
      if (fgets(buf, sizeof(buf), fp) == NULL) {
      puts(&quot;error!&quot;);
      exit(1);
      }
      fprintf(stdout, &quot;%-3d: %s&quot;, 2, buf);
      fclose(fp);
      return(0);
  }

 INPUTS
  FILE *fp;       file pointer to seek
  fpos_t *pos;    pointer to fpos_t type previously initialized
                  by a fgetpos() call.

 RESULTS
  int error;      0 if no error, &#060; 0 if error

 SEE ALSO
  ftell, fsetpos, fseek, rewind


</pre>
</body>
</html>
