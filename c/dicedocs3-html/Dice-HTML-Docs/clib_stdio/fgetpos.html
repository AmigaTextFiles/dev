<html>
<head>
  <title>fgetpos command</title>
  <meta name="Generator" content="GuideML V1.6">
  <meta http-equiv="Content-Type" content="text/html">
</head>
<body>
<a href="main.html">CONTENTS</a> | <a href="dice_index/main.html">INDEX</a> | <a href="fgetc.html">PREV</a> | <a href="fgetcs.html">NEXT</a>
<hr>
<pre>

 fgetpos

 NAME
  fgetpos - get current file position

 SYNOPSIS
  #include &#060;stdio.h&#062;

  int error = fgetpos(fp, &amp;pos);
  fpos_t pos;

 FUNCTION
  fgetpos() returns the current seek position and is roughly equivalent
  to ftell().  fgetpos() is a new ANSI call to better support C
  compilers that use 16 bit integers.  DICE uses 32 bit integers so
  fgetpos() is not so useful.

  fgetpos() takes a file pointer and the address of a fpos_t type
  (a long).  It fills the fpos_t variable with the current file
  position and returns 0 if all went well, non-zero if an error
  occured.

 NOTE
  refer to the file_pointer manual page for general information

 EXAMPLE
  /*
   *  return the length of the file specified on the command line.
   *  P.S. it is more efficient to use open/lseek/close instead
   *  of fopen/fseek/fgetpos/fclose
   */

  #include &#060;stdio.h&#062;

  main(ac, av)
  int ac;
  char **av;
  {
      FILE *fp;
      fpos_t off;

      if (ac == 1) {
      puts(&quot;Expected a filename argument&quot;);
      exit(1);
      }
      fp = fopen(av[1], &quot;r&quot;);
      if (fp == NULL) {
      printf(&quot;Unable to open %sn&quot;, av[1]);
      exit(10);
      }
      fseek(fp, 0L, SEEK_END);
      if (fgetpos(fp, &amp;off)) {
      puts(&quot;Error getting file position&quot;);
      exit(20);
      }
      fclose(fp);
      printf(&quot;File %s is %d bytesn&quot;, av[1], off);
      return(0);
  }

 INPUTS
  FILE *fp;   file pointer

  fpos_t *pos;   pointer to an fpos_t type that the position is loaded into.

 RESULTS
  int error;  0 if no error, non-zero on error

 SEE ALSO
  ftell, rewind, fseek, rewind


</pre>
</body>
</html>
