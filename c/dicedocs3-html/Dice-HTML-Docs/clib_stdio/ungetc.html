<html>
<head>
  <title>ungetc command</title>
  <meta name="Generator" content="GuideML V1.6">
  <meta http-equiv="Content-Type" content="text/html">
</head>
<body>
<a href="main.html">CONTENTS</a> | <a href="dice_index/main.html">INDEX</a> | <a href="tmpnam.html">PREV</a> | <a href="main.html">NEXT</a>
<hr>
<pre>

 ungetc

 NAME
  ungetc - push a character back onto a file pointer's input stream

 SYNOPSIS
  #include &#060;stdio.h&#062;

  int r = ungetc(c, fp);
  int c;
  FILE *fp;

 FUNCTION
  ungetc() pushes the specified character back onto the input stream,
  as if it had not been read.  Only ONE character may be pushed back
  onto an input stream at a time.  If all went well, the return value
  r is equal to c.  Else EOF is returned if too many characters were
  pushed back.

  Some implementations of C allow multiple characters to be pushed
  back.  The majority, including DICE, allows only one.

  ungetc() is useful when, in scanning an input stream, you overshoot
  the 'last' character you wanted a particular routine to retrieve.
  This routine can push the character back onto the input stream
  with ungetc() so another routine's getc() (getchar(), fread(), fgetc(),
  etc...) will get that character back.

 EXAMPLE
  #include &#060;stdio.h&#062;
  #include &#060;ctype.h&#062;

  main()
  {
      char buf[256];
      void scan_number();
      void scan_alpha();

      puts(&quot;Enter nnnaaannn where n=digit a=alpha.  Example:   1234abcd99&quot;);
      printf(&quot;? &quot;);
      fflush(stdout);
      scan_number();
      puts(&quot;--&quot;);
      scan_alpha();
      puts(&quot;--&quot;);
      scan_number();
      return(0);
  }

  static void
  scan_number()
  {
      short c;

      for (c = getchar(); c &#062;= '0' &amp;&amp; c &#060;= '9'; c = getchar()) {
      printf(&quot;digit: %cn&quot;, c);
      }
      if (c != EOF)
      ungetc(c, stdin);
  }

  static void
  scan_alpha()
  {
      short c;

      for (c = getchar(); tolower(c) &#062;= 'a' &amp;&amp; tolower(c) &#060;= 'z'; c = getchar()) {
      printf(&quot;alpha: %cn&quot;, c);
      }
      if (c != EOF)
      ungetc(c, stdin);
  }


  1&#062; testprg
  Enter nnnaaannn where n=digit a=alpha.  Example:   1234abcd99
  ? 98charlie55
  digit: 9
  digit: 8
  --
  alpha: c
  alpha: h
  alpha: a
  alpha: r
  alpha: l
  alpha: i
  alpha: e
  --
  digit: 5
  digit: 5

  1&#062;

 INPUTS
  int c;            character to push back onto input stream
 FILE *fp;      file pointer stream to push character on to.

 RESULTS
  int r;          pushed character (c) if no error, EOF if error

 SEE ALSO
  getc, getchar, fread, fgetc

</pre>
</body>
</html>
