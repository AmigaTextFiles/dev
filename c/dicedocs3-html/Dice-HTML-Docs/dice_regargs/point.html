<html>
<head>
  <title>Indirect Function Pointers</title>
  <meta name="Generator" content="GuideML V1.6">
  <meta http-equiv="Content-Type" content="text/html">
</head>
<body>
<a href="main.html">CONTENTS</a> | <a href="dice_index/main.html">INDEX</a> | <a href="entry.html">PREV</a> | <a href="stack.html">NEXT</a>
<hr>
<pre>

                         <b>INDIRECT FUNCTION POINTERS</b>

 DICE handles function pointers according to the -mr, -mR, -mRR
 option specified:

 <i>-mr</i>
     function pointers are assigned the unregistered entry point
     for procedures only, all calls through function pointers
     use stack based arguments.

     DICE generates both types of entry points for each procedure
     definition.

 <i>-mR</i>
     function pointers are assigned the unregistered entry point
     for procedures only, all calls through function pointers
     use stack based arguments.

     DICE generates only the registered (@) entry point for a
     procedure definition.

 <i>-mRR</i>
     function pointers are assigned the unregistered entry point
     if they are not prototyped (see below), the registered entry
     point if they are.  However, if the procedure was defined
     with __stkargs, then the unregistered entry point will be
     used.

     calls through function pointers use stack args for unprototyped
     function pointers, reg-args for prototyped function pointers.

     WARNING:    Any procedure assigned to a function pointer must
     be declared in the same manner as the function pointer.

 EXAMPLE, function table array:

     <b>struct entry {
     char *funcName;
     void (*funcPtr)(char *);
     } *En;

     extern void fubar(char *);
     ...


     En-&#062;funcPtr = fubar;
     En-&#062;funcPtr(&quot;this is a test&quot;);</b>

 Note how the function pointer in the entry structure is declared.
 It is PROTOTYPED in of itself as taking a (char *).  Any procedure,
 such as fubar, that you might assign to this variable MUST BE
 DECLARED IN THE SAME MANNER.  In this case, it is:

     extern void fubar(char *);

 Which exactly matches the specification for the function pointer.
 When you use the -mRR option matching the table with the functions
 it is assigned with is IMPARATIVE.  If you make a mistake, at
 best DICE will warn you with a failed link (looking for an entry
 point that does not exist).  At worst, it will not warn you and
 the program will operate improperly.  It is suggested that you
 use the -mr or -mR options until you get up to speed.

</pre>
</body>
</html>
