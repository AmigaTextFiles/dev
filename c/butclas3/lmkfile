#
# Lmkfile for boopsi button class and sas/c 6.51
#
# Written by Douglas Keller
#

FILE     = test
CFLAGS   = uchar strmer parm=r opt optinlocal optsched
LINKFLAGS= SC SD NOICONS VERBOSE
LIBS     = lib:small.lib lib:scnb.lib lib:debug.lib
OBJS     = test.o
LIBOBJS  = buttonclass.o progressclass.o
LIBOBJSNB= buttonclass_nb.o progressclass_nb.o
LIB      = ButtonClass.lib
LIBNB    = ButtonClassNB.lib

.c.o:
	@echo "sc dbg=s nostkchk $(CFLAGS) $*.c"
	@sc dbg=s nostkchk $(CFLAGS) $*.c
	@echo "sc dbg=s nostkchk $(CFLAGS) data=fo objname=$*_nb.o $*.c"
	@sc dbg=s nostkchk $(CFLAGS) data=fo objname=$*_nb.o $*.c


all: $(LIB) $(FILE)

$(LIB):  $(LIBOBJS) lmkfile
	@oml $(LIB) r $(LIBOBJS)
	@oml $(LIBNB) r $(LIBOBJSNB)

$(FILE):  $(OBJS) $(LIB) lmkfile
	@SLINK <WITH <
		ND
		TO $(FILE) FROM $(OBJS) LIBRARY $(LIB) $(LIBS) $(LINKFLAGS)
		MAP test.map,h
		<

test.o: test.c buttonclass.h
buttonclass.o: buttonclass.c buttonclass.h
progressclass.o: progressclass.c buttonclass.h
