@database make.guide

@Master make.texinfo

@Width 72


This is the AmigaGuide®  file make.guide, produced by Makeinfo-1.67 from 
the input file make.texinfo.

INFO-DIR-SECTION The GNU make utility
START-INFO-DIR-ENTRY
* GNU make: (make.info).           The GNU make utility.
END-INFO-DIR-ENTRY

   This file documents the GNU Make utility, which determines
automatically which pieces of a large program need to be recompiled,
and issues the commands to recompile them.

   This is Edition 0.51, last updated 26 Aug 1997, of `The GNU Make
Manual', for @{b}make@{ub}, Version 3.76 Beta.

   Copyright (C) 1988, '89, '90, '91, '92, '93, '94, '95, '96, '97 	Free
Software Foundation, Inc.

   Permission is granted to make and distribute verbatim copies of this
manual provided the copyright notice and this permission notice are
preserved on all copies.

   Permission is granted to copy and distribute modified versions of
this manual under the conditions for verbatim copying, provided that
the entire resulting derived work is distributed under the terms of a
permission notice identical to this one.

   Permission is granted to copy and distribute translations of this
manual into another language, under the above conditions for modified
versions, except that this permission notice may be stated in a
translation approved by the Free Software Foundation.


@Node Main "make.guide"
@Next "Overview"

Make
****

   The GNU @{b}make@{ub} utility automatically determines which pieces of a
large program need to be recompiled, and issues the commands to
recompile them.

   This is Edition 0.51 of the `GNU Make Manual', last updated 26 Aug
1997 for @{b}make@{ub} Version 3.76 Beta.

   This manual describes @{b}make@{ub} and contains the following chapters:


 @{" Overview                  " Link "Overview"}  Overview of @{b}make@{ub}.
 @{" Introduction              " Link "Introduction"}  An introduction to @{b}make@{ub}.
 @{" Makefiles                 " Link "Makefiles"}  Makefiles tell @{b}make@{ub} what to do.
 @{" Rules                     " Link "Rules"}  Rules describe when a file must be remade.
 @{" Commands                  " Link "Commands"}  Commands say how to remake a file.
 @{" Using Variables           " Link "Using Variables"}  You can use variables to avoid repetition.
 @{" Conditionals              " Link "Conditionals"}  Use or ignore parts of the makefile based
                                 on the values of variables.
 @{" Functions                 " Link "Functions"}  Many powerful ways to manipulate text.
 @{" make Invocation: Running  " Link "Running"}  How to invoke @{b}make@{ub} on the command line.
 @{" Implicit Rules            " Link "Implicit Rules"}  Use implicit rules to treat many files alike,
                                 based on their file names.
 @{" Archives                  " Link "Archives"}  How @{b}make@{ub} can update library archives.
 @{" Features                  " Link "Features"}  Features GNU @{b}make@{ub} has over other @{b}make@{ub}s.
 @{" Missing                   " Link "Missing"}  What GNU @{b}make@{ub} lacks from other @{b}make@{ub}s.
 @{" Makefile Conventions      " Link "Makefile Conventions"}  Conventions for makefiles in GNU programs.
 @{" Quick Reference           " Link "Quick Reference"}  A quick reference for experienced users.
 @{" Complex Makefile          " Link "Complex Makefile"}  A real example of a straightforward,
                                 but nontrivial, makefile.
 @{" Concept Index             " Link "Concept Index"}  Index of Concepts
 @{" Name Index                " Link "Name Index"}  Index of Functions, Variables, & Directives

 -- The Detailed Node Listing --

Overview of @{b}make@{ub}

 @{" Preparing                 " Link "Preparing"}  Preparing and Running Make
 @{" Reading                   " Link "Reading"}  On Reading this Text
 @{" Bugs                      " Link "Bugs"}  Problems and Bugs

An Introduction to Makefiles

 @{" Rule Introduction         " Link "Rule Introduction"}  What a rule looks like.
 @{" Simple Makefile           " Link "Simple Makefile"}  A Simple Makefile
 @{" How Make Works            " Link "How Make Works"}  How @{b}make@{ub} Processes This Makefile
 @{" Variables Simplify        " Link "Variables Simplify"}  Variables Make Makefiles Simpler
 @{" make Deduces              " Link "make Deduces"}  Letting @{b}make@{ub} Deduce the Commands
 @{" Combine By Dependency     " Link "Combine By Dependency"}  Another Style of Makefile
 @{" Cleanup                   " Link "Cleanup"}  Rules for Cleaning the Directory

Writing Makefiles

 @{" Makefile Contents         " Link "Makefile Contents"}  What makefiles contain.
 @{" Makefile Names            " Link "Makefile Names"}  How to name your makefile.
 @{" Include                   " Link "Include"}  How one makefile can use another makefile.
 @{" MAKEFILES Variable        " Link "MAKEFILES Variable"}  The environment can specify extra makefiles.
 @{" Remaking Makefiles        " Link "Remaking Makefiles"}  How makefiles get remade.
 @{" Overriding Makefiles      " Link "Overriding Makefiles"}  How to override part of one makefile
                                 with another makefile.

Writing Rules

 @{" Rule Example              " Link "Rule Example"}  An example explained.
 @{" Rule Syntax               " Link "Rule Syntax"}  General syntax explained.
 @{" Wildcards                 " Link "Wildcards"}  Using wildcard characters such as `*'.
 @{" Directory Search          " Link "Directory Search"}  Searching other directories for source files.
 @{" Phony Targets             " Link "Phony Targets"}  Using a target that is not a real file's name.
 @{" Force Targets             " Link "Force Targets"}  You can use a target without commands
                                  or dependencies to mark other
                                  targets as phony.
 @{" Empty Targets             " Link "Empty Targets"}  When only the date matters and the
                                  files are empty.
 @{" Special Targets           " Link "Special Targets"}  Targets with special built-in meanings.
 @{" Multiple Targets          " Link "Multiple Targets"}  When to make use of several targets in a rule.
 @{" Multiple Rules            " Link "Multiple Rules"}  How to use several rules with the same target.
 @{" Static Pattern            " Link "Static Pattern"}  Static pattern rules apply to multiple targets
                                  and can vary the dependencies according to
                                  the target name.
 @{" Double-Colon              " Link "Double-Colon"}  How to use a special kind of rule to allow
                                  several independent rules for one target.
 @{" Automatic Dependencies    " Link "Automatic Dependencies"}  How to automatically generate rules giving
                                 dependencies from the source files themselves.

Using Wildcard Characters in File Names

 @{" Wildcard Examples         " Link "Wildcard Examples"}  Several examples
 @{" Wildcard Pitfall          " Link "Wildcard Pitfall"}  Problems to avoid.
 @{" Wildcard Function         " Link "Wildcard Function"}  How to cause wildcard expansion where
                                  it does not normally take place.

Searching Directories for Dependencies

 @{" General Search            " Link "General Search"}  Specifying a search path that applies
                                  to every dependency.
 @{" Selective Search          " Link "Selective Search"}  Specifying a search path
                                  for a specified class of names.
 @{" Search Algorithm          " Link "Search Algorithm"}  When and how search paths are applied.
 @{" Commands-Search           " Link "Commands-Search"}  How to write shell commands that work together
                                  with search paths.
 @{" Implicit-Search           " Link "Implicit-Search"}  How search paths affect implicit rules.
 @{" Libraries-Search          " Link "Libraries-Search"}  Directory search for link libraries.

Static Pattern Rules

 @{" Static Usage              " Link "Static Usage"}  The syntax of static pattern rules.
 @{" Static versus Implicit    " Link "Static versus Implicit"}  When are they better than implicit rules?

Writing the Commands in Rules

 @{" Echoing                   " Link "Echoing"}  How to control when commands are echoed.
 @{" Execution                 " Link "Execution"}  How commands are executed.
 @{" Parallel                  " Link "Parallel"}  How commands can be executed in parallel.
 @{" Errors                    " Link "Errors"}  What happens after a command execution error.
 @{" Interrupts                " Link "Interrupts"}  What happens when a command is interrupted.
 @{" Recursion                 " Link "Recursion"}  Invoking @{b}make@{ub} from makefiles.
 @{" Sequences                 " Link "Sequences"}  Defining canned sequences of commands.
 @{" Empty Commands            " Link "Empty Commands"}  Defining useful, do-nothing commands.

Recursive Use of @{b}make@{ub}

 @{" MAKE Variable             " Link "MAKE Variable"}  The special effects of using @{b}$(MAKE)@{ub}.
 @{" Variables-Recursion       " Link "Variables-Recursion"}  How to communicate variables to a sub-@{b}make@{ub}.
 @{" Options-Recursion         " Link "Options-Recursion"}  How to communicate options to a sub-@{b}make@{ub}.
 @{" -w Option                 " Link "-w Option"}  How the @{b}-w@{ub} or @{b}--print-directory@{ub} option
                                 helps debug use of recursive @{b}make@{ub} commands.

How to Use Variables

 @{" Reference                 " Link "Reference"}  How to use the value of a variable.
 @{" Flavors                   " Link "Flavors"}  Variables come in two flavors.
 @{" Advanced                  " Link "Advanced"}  Advanced features for referencing a variable.
 @{" Values                    " Link "Values"}  All the ways variables get their values.
 @{" Setting                   " Link "Setting"}  How to set a variable in the makefile.
 @{" Appending                 " Link "Appending"}  How to append more text to the old value
                                  of a variable.
 @{" Override Directive        " Link "Override Directive"}  How to set a variable in the makefile even if
                                  the user has set it with a command argument.
 @{" Defining                  " Link "Defining"}  An alternate way to set a variable
                                  to a verbatim string.
 @{" Environment               " Link "Environment"}  Variable values can come from the environment.
 @{" Automatic                 " Link "Automatic"}  Some special variables have predefined
                                  meanings for use with implicit rules.

Advanced Features for Reference to Variables

 @{" Substitution Refs         " Link "Substitution Refs"}  Referencing a variable with
                                  substitutions on the value.
 @{" Computed Names            " Link "Computed Names"}  Computing the name of the variable to refer to.

Conditional Parts of Makefiles

 @{" Conditional Example       " Link "Conditional Example"}  Example of a conditional
 @{" Conditional Syntax        " Link "Conditional Syntax"}  The syntax of conditionals.
 @{" Testing Flags             " Link "Testing Flags"}  Conditionals that test flags.

Functions for Transforming Text

 @{" Syntax of Functions       " Link "Syntax of Functions"}  How to write a function call.
 @{" Text Functions            " Link "Text Functions"}  General-purpose text manipulation functions.
 @{" File Name Functions       " Link "File Name Functions"}  Functions for manipulating file names.
 @{" Foreach Function          " Link "Foreach Function"}  Repeat some text with controlled variation.
 @{" Origin Function           " Link "Origin Function"}  Find where a variable got its value.
 @{" Shell Function            " Link "Shell Function"}  Substitute the output of a shell command.

How to Run @{b}make@{ub}

 @{" Makefile Arguments        " Link "Makefile Arguments"}  How to specify which makefile to use.
 @{" Goals                     " Link "Goals"}  How to use goal arguments to specify which
                                  parts of the makefile to use.
 @{" Instead of Execution      " Link "Instead of Execution"}  How to use mode flags to specify what
                                  kind of thing to do with the commands
                                  in the makefile other than simply
                                  execute them.
 @{" Avoiding Compilation      " Link "Avoiding Compilation"}  How to avoid recompiling certain files.
 @{" Overriding                " Link "Overriding"}  How to override a variable to specify
                                  an alternate compiler and other things.
 @{" Testing                   " Link "Testing"}  How to proceed past some errors, to
                                  test compilation.
 @{" Options Summary           " Link "Options Summary"}  Summary of Options

Using Implicit Rules

 @{" Using Implicit            " Link "Using Implicit"}  How to use an existing implicit rule
                                  to get the commands for updating a file.
 @{" Catalogue of Rules        " Link "Catalogue of Rules"}  A list of built-in implicit rules.
 @{" Implicit Variables        " Link "Implicit Variables"}  How to change what predefined rules do.
 @{" Chained Rules             " Link "Chained Rules"}  How to use a chain of implicit rules.
 @{" Pattern Rules             " Link "Pattern Rules"}  How to define new implicit rules.
 @{" Last Resort               " Link "Last Resort"}  How to defining commands for rules
                                  which cannot find any.
 @{" Suffix Rules              " Link "Suffix Rules"}  The old-fashioned style of implicit rule.
 @{" Implicit Rule Search      " Link "Implicit Rule Search"}  The precise algorithm for applying
                                  implicit rules.

Defining and Redefining Pattern Rules

 @{" Pattern Intro             " Link "Pattern Intro"}  An introduction to pattern rules.
 @{" Pattern Examples          " Link "Pattern Examples"}  Examples of pattern rules.
 @{" Automatic                 " Link "Automatic"}  How to use automatic variables in the
                                  commands of implicit rules.
 @{" Pattern Match             " Link "Pattern Match"}  How patterns match.
 @{" Match-Anything Rules      " Link "Match-Anything Rules"}  Precautions you should take prior to
                                  defining rules that can match any
                                  target file whatever.
 @{" Canceling Rules           " Link "Canceling Rules"}  How to override or cancel built-in rules.

Using @{b}make@{ub} to Update Archive Files

 @{" Archive Members           " Link "Archive Members"}  Archive members as targets.
 @{" Archive Update            " Link "Archive Update"}  The implicit rule for archive member targets.
 @{" Archive Pitfalls          " Link "Archive Pitfalls"}  Dangers to watch out for when using archives.
 @{" Archive Suffix Rules      " Link "Archive Suffix Rules"}  You can write a special kind of suffix rule
                                  for updating archives.

Implicit Rule for Archive Member Targets

 @{" Archive Symbols           " Link "Archive Symbols"}  How to update archive symbol directories.


@EndNode

@Node "Overview" "make.guide/Overview"
@Next "Introduction"
@Prev "Main"
@Toc "Main"

Overview of @{b}make@{ub}
****************

   The @{b}make@{ub} utility automatically determines which pieces of a large
program need to be recompiled, and issues commands to recompile them.
This manual describes GNU @{b}make@{ub}, which was implemented by Richard
Stallman and Roland McGrath.  GNU @{b}make@{ub} conforms to section 6.2 of `IEEE
Standard 1003.2-1992' (POSIX.2).

   Our examples show C programs, since they are most common, but you
can use @{b}make@{ub} with any programming language whose compiler can be run
with a shell command.  Indeed, @{b}make@{ub} is not limited to programs.  You can
use it to describe any task where some files must be updated
automatically from others whenever the others change.


 @{" Preparing                 " Link "Preparing"}  Preparing and Running Make
 @{" Reading                   " Link "Reading"}  On Reading this Text
 @{" Bugs                      " Link "Bugs"}  Problems and Bugs


@EndNode

@Node "Preparing" "make.guide/Preparing"
@Next "Reading"
@Toc "Overview"

Preparing and Running Make
==========================

   To prepare to use @{b}make@{ub}, you must write a file called the @{i}makefile@{ui}
that describes the relationships among files in your program and
provides commands for updating each file.  In a program, typically, the
executable file is updated from object files, which are in turn made by
compiling source files.

   Once a suitable makefile exists, each time you change some source
files, this simple shell command:

     make

suffices to perform all necessary recompilations.  The @{b}make@{ub} program
uses the makefile data base and the last-modification times of the
files to decide which of the files need to be updated.  For each of
those files, it issues the commands recorded in the data base.

   You can provide command line arguments to @{b}make@{ub} to control which
files should be recompiled, or how.  See @{"How to Run make" Link "Running"}.


@EndNode

@Node "Reading" "make.guide/Reading"
@Next "Bugs"
@Prev "Preparing"
@Toc "Overview"

How to Read This Manual
=======================

   If you are new to @{b}make@{ub}, or are looking for a general introduction,
read the first few sections of each chapter, skipping the later
sections.  In each chapter, the first few sections contain introductory
or general information and the later sections contain specialized or
technical information.  The exception is the second chapter,
@{"An Introduction to Makefiles" Link "Introduction"}, all of which is introductory.

   If you are familiar with other @{b}make@{ub} programs, see
@{"Features of GNU make" Link "Features"}, which lists the enhancements GNU @{b}make@{ub} has, and
@{"Incompatibilities and Missing Features" Link "Missing"}, which explains the few things
GNU @{b}make@{ub} lacks that others have.

   For a quick summary, see @{"Options Summary" Link "Options Summary"}, @{"Quick Reference" Link "Quick Reference"}, and
@{"Special Targets" Link "Special Targets"}.


@EndNode

@Node "Bugs" "make.guide/Bugs"
@Prev "Reading"
@Toc "Overview"

Problems and Bugs
=================

   If you have problems with GNU @{b}make@{ub} or think you've found a bug,
please report it to the developers; we cannot promise to do anything but
we might well want to fix it.

   Before reporting a bug, make sure you've actually found a real bug.
Carefully reread the documentation and see if it really says you can do
what you're trying to do.  If it's not clear whether you should be able
to do something or not, report that too; it's a bug in the
documentation!

   Before reporting a bug or trying to fix it yourself, try to isolate
it to the smallest possible makefile that reproduces the problem.  Then
send us the makefile and the exact results @{b}make@{ub} gave you.  Also say
what you expected to occur; this will help us decide whether the
problem was really in the documentation.

   Once you've got a precise problem, please send electronic mail either
through the Internet or via UUCP:

     @{i}Internet address:@{ui}
    bug-gnu-utils@prep.ai.mit.edu

@{i}UUCP path:@{ui}
    mit-eddie!prep.ai.mit.edu!bug-gnu-utils

Please include the version number of @{b}make@{ub} you are using.  You can get
this information with the command @{b}make --version@{ub}.  Be sure also to
include the type of machine and operating system you are using.  If
possible, include the contents of the file @{b}config.h@{ub} that is generated
by the configuration process.


@EndNode

@Node "Introduction" "make.guide/Introduction"
@Next "Makefiles"
@Prev "Overview"
@Toc "Main"

An Introduction to Makefiles
****************************

   You need a file called a @{i}makefile@{ui} to tell @{b}make@{ub} what to do.  Most
often, the makefile tells @{b}make@{ub} how to compile and link a program.

   In this chapter, we will discuss a simple makefile that describes
how to compile and link a text editor which consists of eight C source
files and three header files.  The makefile can also tell @{b}make@{ub} how to
run miscellaneous commands when explicitly asked (for example, to remove
certain files as a clean-up operation).  To see a more complex example
of a makefile, see @{"Complex Makefile" Link "Complex Makefile"}.

   When @{b}make@{ub} recompiles the editor, each changed C source file must be
recompiled.  If a header file has changed, each C source file that
includes the header file must be recompiled to be safe.  Each
compilation produces an object file corresponding to the source file.
Finally, if any source file has been recompiled, all the object files,
whether newly made or saved from previous compilations, must be linked
together to produce the new executable editor.


 @{" Rule Introduction         " Link "Rule Introduction"}  What a rule looks like.
 @{" Simple Makefile           " Link "Simple Makefile"}  A Simple Makefile
 @{" How Make Works            " Link "How Make Works"}  How @{b}make@{ub} Processes This Makefile
 @{" Variables Simplify        " Link "Variables Simplify"}  Variables Make Makefiles Simpler
 @{" make Deduces              " Link "make Deduces"}  Letting @{b}make@{ub} Deduce the Commands
 @{" Combine By Dependency     " Link "Combine By Dependency"}  Another Style of Makefile
 @{" Cleanup                   " Link "Cleanup"}  Rules for Cleaning the Directory


@EndNode

@Node "Rule Introduction" "make.guide/Rule Introduction"
@Next "Simple Makefile"
@Toc "Introduction"

What a Rule Looks Like
======================

   A simple makefile consists of "rules" with the following shape:

     @{I}TARGET@{ui} ... : @{I}DEPENDENCIES@{ui} ...
        @{I}COMMAND@{ui}
        ...
        ...

   A @{i}target@{ui} is usually the name of a file that is generated by a
program; examples of targets are executable or object files.  A target
can also be the name of an action to carry out, such as @{b}clean@{ub} (see
@{"Phony Targets" Link "Phony Targets"}).

   A @{i}dependency@{ui} is a file that is used as input to create the target.
A target often depends on several files.

   A @{i}command@{ui} is an action that @{b}make@{ub} carries out.  A rule may have more
than one command, each on its own line.  @{i}Please note:@{ui} you need to put a
tab character at the beginning of every command line!  This is an
obscurity that catches the unwary.

   Usually a command is in a rule with dependencies and serves to
create a target file if any of the dependencies change.  However, the
rule that specifies commands for the target need not have dependencies.
For example, the rule containing the delete command associated with the
target @{b}clean@{ub} does not have dependencies.

   A @{i}rule@{ui}, then, explains how and when to remake certain files which
are the targets of the particular rule.  @{b}make@{ub} carries out the commands
on the dependencies to create or update the target.  A rule can also
explain how and when to carry out an action.  See @{"Writing Rules" Link "Rules"}.

   A makefile may contain other text besides rules, but a simple
makefile need only contain rules.  Rules may look somewhat more
complicated than shown in this template, but all fit the pattern more
or less.


@EndNode

@Node "Simple Makefile" "make.guide/Simple Makefile"
@Next "How Make Works"
@Prev "Rule Introduction"
@Toc "Introduction"

A Simple Makefile
=================

   Here is a straightforward makefile that describes the way an
executable file called @{b}edit@{ub} depends on eight object files which, in
turn, depend on eight C source and three header files.

   In this example, all the C files include @{b}defs.h@{ub}, but only those
defining editing commands include @{b}command.h@{ub}, and only low level files
that change the editor buffer include @{b}buffer.h@{ub}.

     edit : main.o kbd.o command.o display.o \\
       insert.o search.o files.o utils.o
        cc -o edit main.o kbd.o command.o display.o \\
                   insert.o search.o files.o utils.o

main.o : main.c defs.h
        cc -c main.c
kbd.o : kbd.c defs.h command.h
        cc -c kbd.c
command.o : command.c defs.h command.h
        cc -c command.c
display.o : display.c defs.h buffer.h
        cc -c display.c
insert.o : insert.c defs.h buffer.h
        cc -c insert.c
search.o : search.c defs.h buffer.h
        cc -c search.c
files.o : files.c defs.h buffer.h command.h
        cc -c files.c
utils.o : utils.c defs.h
        cc -c utils.c
clean :
        rm edit main.o kbd.o command.o display.o \\
           insert.o search.o files.o utils.o

We split each long line into two lines using backslash-newline; this is
like using one long line, but is easier to read.

   To use this makefile to create the executable file called @{b}edit@{ub}, type:

     make

   To use this makefile to delete the executable file and all the object
files from the directory, type:

     make clean

   In the example makefile, the targets include the executable file
@{b}edit@{ub}, and the object files @{b}main.o@{ub} and @{b}kbd.o@{ub}.  The dependencies
are files such as @{b}main.c@{ub} and @{b}defs.h@{ub}.  In fact, each @{b}.o@{ub} file is both a
target and a dependency.  Commands include @{b}cc -c main.c@{ub} and @{b}cc -c kbd.c@{ub}.

   When a target is a file, it needs to be recompiled or relinked if any
of its dependencies change.  In addition, any dependencies that are
themselves automatically generated should be updated first.  In this
example, @{b}edit@{ub} depends on each of the eight object files; the object
file @{b}main.o@{ub} depends on the source file @{b}main.c@{ub} and on the header file
@{b}defs.h@{ub}.

   A shell command follows each line that contains a target and
dependencies.  These shell commands say how to update the target file.
A tab character must come at the beginning of every command line to
distinguish commands lines from other lines in the makefile.  (Bear in
mind that @{b}make@{ub} does not know anything about how the commands work.  It
is up to you to supply commands that will update the target file
properly.  All @{b}make@{ub} does is execute the commands in the rule you have
specified when the target file needs to be updated.)

   The target @{b}clean@{ub} is not a file, but merely the name of an action.
Since you normally do not want to carry out the actions in this rule,
@{b}clean@{ub} is not a dependency of any other rule.  Consequently,
@{b}make@{ub} never does anything with it unless you tell it
specifically.  Note that this rule not only is not a dependency, it
also does not have any dependencies, so the only purpose of the rule is
to run the specified commands.  Targets that do not refer to files but
are just actions are called @{i}phony targets@{ui}.  See @{"Phony Targets" Link "Phony Targets"}, for
information about this kind of target.  See @{"Errors in Commands" Link "Errors"}, to see
how to cause @{b}make@{ub} to ignore errors from @{b}rm@{ub} or any other command.


@EndNode

@Node "How Make Works" "make.guide/How Make Works"
@Next "Variables Simplify"
@Prev "Simple Makefile"
@Toc "Introduction"

How @{b}make@{ub} Processes a Makefile
=============================

   By default, @{b}make@{ub} starts with the first target (not targets whose
names start with @{b}.@{ub}).  This is called the @{i}default goal@{ui}.  (@{i}Goals@{ui} are the
targets that @{b}make@{ub} strives ultimately to update.  See
@{"Arguments to Specify the Goals" Link "Goals"}.)

   In the simple example of the previous section, the default goal is to
update the executable program @{b}edit@{ub}; therefore, we put that rule first.

   Thus, when you give the command:

     make

@{b}make@{ub} reads the makefile in the current directory and begins by
processing the first rule.  In the example, this rule is for relinking
@{b}edit@{ub}; but before @{b}make@{ub} can fully process this rule, it must
process the rules for the files that @{b}edit@{ub} depends on, which in this
case are the object files.  Each of these files is processed according
to its own rule.  These rules say to update each @{b}.o@{ub} file by compiling
its source file.  The recompilation must be done if the source file, or
any of the header files named as dependencies, is more recent than the
object file, or if the object file does not exist.

   The other rules are processed because their targets appear as
dependencies of the goal.  If some other rule is not depended on by the
goal (or anything it depends on, etc.), that rule is not processed,
unless you tell @{b}make@{ub} to do so (with a command such as @{b}make clean@{ub}).

   Before recompiling an object file, @{b}make@{ub} considers updating its
dependencies, the source file and header files.  This makefile does not
specify anything to be done for them--the @{b}.c@{ub} and @{b}.h@{ub} files are not the
targets of any rules--so @{b}make@{ub} does nothing for these files.  But @{b}make@{ub}
would update automatically generated C programs, such as those made by
Bison or Yacc, by their own rules at this time.

   After recompiling whichever object files need it, @{b}make@{ub} decides
whether to relink @{b}edit@{ub}.  This must be done if the file @{b}edit@{ub} does not
exist, or if any of the object files are newer than it.  If an object
file was just recompiled, it is now newer than @{b}edit@{ub}, so @{b}edit@{ub} is
relinked.

   Thus, if we change the file @{b}insert.c@{ub} and run @{b}make@{ub}, @{b}make@{ub} will compile
that file to update @{b}insert.o@{ub}, and then link @{b}edit@{ub}.  If we change the
file @{b}command.h@{ub} and run @{b}make@{ub}, @{b}make@{ub} will recompile the object files @{b}kbd.o@{ub},
@{b}command.o@{ub} and @{b}files.o@{ub} and then link the file @{b}edit@{ub}.


@EndNode

@Node "Variables Simplify" "make.guide/Variables Simplify"
@Next "make Deduces"
@Prev "How Make Works"
@Toc "Introduction"

Variables Make Makefiles Simpler
================================

   In our example, we had to list all the object files twice in the
rule for @{b}edit@{ub} (repeated here):

     edit : main.o kbd.o command.o display.o \\
              insert.o search.o files.o utils.o
        cc -o edit main.o kbd.o command.o display.o \\
                   insert.o search.o files.o utils.o

   Such duplication is error-prone; if a new object file is added to the
system, we might add it to one list and forget the other.  We can
eliminate the risk and simplify the makefile by using a variable.  @{i}Variables@{ui}
allow a text string to be defined once and substituted in multiple
places later (see @{"How to Use Variables" Link "Using Variables"}).

   It is standard practice for every makefile to have a variable named
@{b}objects@{ub}, @{b}OBJECTS@{ub}, @{b}objs@{ub}, @{b}OBJS@{ub}, @{b}obj@{ub}, or @{b}OBJ@{ub} which is a list of
all object file names.  We would define such a variable @{b}objects@{ub} with a
line like this in the makefile:

     objects = main.o kbd.o command.o display.o \\
          insert.o search.o files.o utils.o

Then, each place we want to put a list of the object file names, we can
substitute the variable's value by writing @{b}$(objects)@{ub} (see
@{"How to Use Variables" Link "Using Variables"}).

   Here is how the complete simple makefile looks when you use a
variable for the object files:

     objects = main.o kbd.o command.o display.o \\
          insert.o search.o files.o utils.o

edit : $(objects)
        cc -o edit $(objects)
main.o : main.c defs.h
        cc -c main.c
kbd.o : kbd.c defs.h command.h
        cc -c kbd.c
command.o : command.c defs.h command.h
        cc -c command.c
display.o : display.c defs.h buffer.h
        cc -c display.c
insert.o : insert.c defs.h buffer.h
        cc -c insert.c
search.o : search.c defs.h buffer.h
        cc -c search.c
files.o : files.c defs.h buffer.h command.h
        cc -c files.c
utils.o : utils.c defs.h
        cc -c utils.c
clean :
        rm edit $(objects)


@EndNode

@Node "make Deduces" "make.guide/make Deduces"
@Next "Combine By Dependency"
@Prev "Variables Simplify"
@Toc "Introduction"

Letting @{b}make@{ub} Deduce the Commands
================================

   It is not necessary to spell out the commands for compiling the
individual C source files, because @{b}make@{ub} can figure them out: it has an @{i}implicit
rule@{ui} for updating a @{b}.o@{ub} file from a correspondingly named @{b}.c@{ub} file
using a @{b}cc -c@{ub} command.  For example, it will use the command @{b}cc -c main.c -o
main.o@{ub} to compile @{b}main.c@{ub} into @{b}main.o@{ub}.  We can therefore omit the
commands from the rules for the object files.  See @{"Using Implicit Rules" Link "Implicit Rules"}.

   When a @{b}.c@{ub} file is used automatically in this way, it is also
automatically added to the list of dependencies.  We can therefore omit
the @{b}.c@{ub} files from the dependencies, provided we omit the commands.

   Here is the entire example, with both of these changes, and a
variable @{b}objects@{ub} as suggested above:

     objects = main.o kbd.o command.o display.o \\
          insert.o search.o files.o utils.o

edit : $(objects)
        cc -o edit $(objects)

main.o : defs.h
kbd.o : defs.h command.h
command.o : defs.h command.h
display.o : defs.h buffer.h
insert.o : defs.h buffer.h
search.o : defs.h buffer.h
files.o : defs.h buffer.h command.h
utils.o : defs.h

.PHONY : clean
clean :
        -rm edit $(objects)

This is how we would write the makefile in actual practice.  (The
complications associated with @{b}clean@{ub} are described elsewhere.  See
@{"Phony Targets" Link "Phony Targets"}, and @{"Errors in Commands" Link "Errors"}.)

   Because implicit rules are so convenient, they are important.  You
will see them used frequently.


@EndNode

@Node "Combine By Dependency" "make.guide/Combine By Dependency"
@Next "Cleanup"
@Prev "make Deduces"
@Toc "Introduction"

Another Style of Makefile
=========================

   When the objects of a makefile are created only by implicit rules, an
alternative style of makefile is possible.  In this style of makefile,
you group entries by their dependencies instead of by their targets.
Here is what one looks like:

     objects = main.o kbd.o command.o display.o \\
          insert.o search.o files.o utils.o

edit : $(objects)
        cc -o edit $(objects)

$(objects) : defs.h
kbd.o command.o files.o : command.h
display.o insert.o search.o files.o : buffer.h

Here @{b}defs.h@{ub} is given as a dependency of all the object files; @{b}command.h@{ub}
and @{b}buffer.h@{ub} are dependencies of the specific object files listed for
them.

   Whether this is better is a matter of taste: it is more compact, but
some people dislike it because they find it clearer to put all the
information about each target in one place.


@EndNode

@Node "Cleanup" "make.guide/Cleanup"
@Prev "Combine By Dependency"
@Toc "Introduction"

Rules for Cleaning the Directory
================================

   Compiling a program is not the only thing you might want to write
rules for.  Makefiles commonly tell how to do a few other things besides
compiling a program: for example, how to delete all the object files
and executables so that the directory is @{b}clean@{ub}.

   Here is how we could write a @{b}make@{ub} rule for cleaning our example
editor:

     clean:
        rm edit $(objects)

   In practice, we might want to write the rule in a somewhat more
complicated manner to handle unanticipated situations.  We would do
this:

     .PHONY : clean
clean :
        -rm edit $(objects)

This prevents @{b}make@{ub} from getting confused by an actual file called @{b}clean@{ub}
and causes it to continue in spite of errors from @{b}rm@{ub}.  (See
@{"Phony Targets" Link "Phony Targets"}, and @{"Errors in Commands" Link "Errors"}.)

A rule such as this should not be placed at the beginning of the
makefile, because we do not want it to run by default!  Thus, in the
example makefile, we want the rule for @{b}edit@{ub}, which recompiles the
editor, to remain the default goal.

   Since @{b}clean@{ub} is not a dependency of @{b}edit@{ub}, this rule will not run at
all if we give the command @{b}make@{ub} with no arguments.  In order to make
the rule run, we have to type @{b}make clean@{ub}.  See @{"How to Run make" Link "Running"}.


@EndNode

@Node "Makefiles" "make.guide/Makefiles"
@Next "Rules"
@Prev "Introduction"
@Toc "Main"

Writing Makefiles
*****************

   The information that tells @{b}make@{ub} how to recompile a system comes from
reading a data base called the @{i}makefile@{ui}.


 @{" Makefile Contents         " Link "Makefile Contents"}  What makefiles contain.
 @{" Makefile Names            " Link "Makefile Names"}  How to name your makefile.
 @{" Include                   " Link "Include"}  How one makefile can use another makefile.
 @{" MAKEFILES Variable        " Link "MAKEFILES Variable"}  The environment can specify extra makefiles.
 @{" Remaking Makefiles        " Link "Remaking Makefiles"}  How makefiles get remade.
 @{" Overriding Makefiles      " Link "Overriding Makefiles"}  How to override part of one makefile
                                 with another makefile.


@EndNode

@Node "Makefile Contents" "make.guide/Makefile Contents"
@Next "Makefile Names"
@Toc "Makefiles"

What Makefiles Contain
======================

   Makefiles contain five kinds of things: @{i}explicit rules@{ui}, @{i}implicit
rules@{ui}, @{i}variable definitions@{ui}, @{i}directives@{ui}, and @{i}comments@{ui}.  Rules,
variables, and directives are described at length in later chapters.

   @{b}*@{ub} An @{i}explicit rule@{ui} says when and how to remake one or more files,
     called the rule's targets.  It lists the other files that the
     targets @{i}depend on@{ui}, and may also give commands to use to create or
     update the targets.  See @{"Writing Rules" Link "Rules"}.

   @{b}*@{ub} An @{i}implicit rule@{ui} says when and how to remake a class of files
     based on their names.  It describes how a target may depend on a
     file with a name similar to the target and gives commands to
     create or update such a target.  See @{"Using Implicit Rules" Link "Implicit Rules"}.

   @{b}*@{ub} A @{i}variable definition@{ui} is a line that specifies a text string value
     for a variable that can be substituted into the text later.  The
     simple makefile example shows a variable definition for @{b}objects@{ub} as
     a list of all object files (see @{"Variables Make Makefiles Simpler" Link "Variables Simplify"}).

   @{b}*@{ub} A @{i}directive@{ui} is a command for @{b}make@{ub} to do something special while
     reading the makefile.  These include:

        @{b}*@{ub} Reading another makefile (see @{"Including Other Makefiles" Link "Include"}).

        @{b}*@{ub} Deciding (based on the values of variables) whether to use or
          ignore a part of the makefile (see
          @{"Conditional Parts of Makefiles" Link "Conditionals"}).

        @{b}*@{ub} Defining a variable from a verbatim string containing
          multiple lines (see @{"Defining Variables Verbatim" Link "Defining"}).

   @{b}*@{ub} @{b}#@{ub} in a line of a makefile starts a @{i}comment@{ui}.  It and the rest of
     the line are ignored, except that a trailing backslash not escaped
     by another backslash will continue the comment across multiple
     lines.  Comments may appear on any of the lines in the makefile,
     except within a @{b}define@{ub} directive, and perhaps within commands
     (where the shell decides what is a comment).  A line containing
     just a comment (with perhaps spaces before it) is effectively
     blank, and is ignored.


@EndNode

@Node "Makefile Names" "make.guide/Makefile Names"
@Next "Include"
@Prev "Makefile Contents"
@Toc "Makefiles"

What Name to Give Your Makefile
===============================

   By default, when @{b}make@{ub} looks for the makefile, it tries the following
names, in order: @{b}GNUmakefile@{ub}, @{b}makefile@{ub} and @{b}Makefile@{ub}.

   Normally you should call your makefile either @{b}makefile@{ub} or @{b}Makefile@{ub}.
(We recommend @{b}Makefile@{ub} because it appears prominently near the
beginning of a directory listing, right near other important files such
as @{b}README@{ub}.)  The first name checked, @{b}GNUmakefile@{ub}, is not recommended
for most makefiles.  You should use this name if you have a makefile
that is specific to GNU @{b}make@{ub}, and will not be understood by other
versions of @{b}make@{ub}.  Other @{b}make@{ub} programs look for @{b}makefile@{ub} and @{b}Makefile@{ub},
but not @{b}GNUmakefile@{ub}.

   If @{b}make@{ub} finds none of these names, it does not use any makefile.
Then you must specify a goal with a command argument, and @{b}make@{ub} will
attempt to figure out how to remake it using only its built-in implicit
rules.  See @{"Using Implicit Rules" Link "Implicit Rules"}.

   If you want to use a nonstandard name for your makefile, you can
specify the makefile name with the @{b}-f@{ub} or @{b}--file@{ub} option.  The arguments
@{b}-f @{I}NAME@{ui}@{ub} or @{b}--file=@{I}NAME@{ui}@{ub} tell @{b}make@{ub} to read the file
@{I}NAME@{ui} as the makefile.  If you use more than one @{b}-f@{ub} or @{b}--file@{ub}
option, you can specify several makefiles.  All the makefiles are
effectively concatenated in the order specified.  The default makefile
names @{b}GNUmakefile@{ub}, @{b}makefile@{ub} and @{b}Makefile@{ub} are not checked automatically
if you specify @{b}-f@{ub} or @{b}--file@{ub}.


@EndNode

@Node "Include" "make.guide/Include"
@Next "MAKEFILES Variable"
@Prev "Makefile Names"
@Toc "Makefiles"

Including Other Makefiles
=========================

   The @{b}include@{ub} directive tells @{b}make@{ub} to suspend reading the current
makefile and read one or more other makefiles before continuing.  The
directive is a line in the makefile that looks like this:

     include @{I}FILENAMES@{ui} ...

@{I}FILENAMES@{ui} can contain shell file name patterns.

   Extra spaces are allowed and ignored at the beginning of the line,
but a tab is not allowed.  (If the line begins with a tab, it will be
considered a command line.)  Whitespace is required between @{b}include@{ub} and
the file names, and between file names; extra whitespace is ignored
there and at the end of the directive.  A comment starting with @{b}#@{ub} is
allowed at the end of the line.  If the file names contain any variable
or function references, they are expanded.  See @{"How to Use Variables" Link "Using Variables"}.

   For example, if you have three @{b}.mk@{ub} files, @{b}a.mk@{ub}, @{b}b.mk@{ub}, and @{b}c.mk@{ub}, and
@{b}$(bar)@{ub} expands to @{b}bish bash@{ub}, then the following expression

     include foo *.mk $(bar)

   is equivalent to

     include foo a.mk b.mk c.mk bish bash

   When @{b}make@{ub} processes an @{b}include@{ub} directive, it suspends reading of the
containing makefile and reads from each listed file in turn.  When that
is finished, @{b}make@{ub} resumes reading the makefile in which the directive
appears.

   One occasion for using @{b}include@{ub} directives is when several programs,
handled by individual makefiles in various directories, need to use a
common set of variable definitions (see @{"Setting Variables" Link "Setting"}) or pattern
rules (see @{"Defining and Redefining Pattern Rules" Link "Pattern Rules"}).

   Another such occasion is when you want to generate dependencies from
source files automatically; the dependencies can be put in a file that
is included by the main makefile.  This practice is generally cleaner
than that of somehow appending the dependencies to the end of the main
makefile as has been traditionally done with other versions of @{b}make@{ub}.
See @{"Automatic Dependencies" Link "Automatic Dependencies"}.

   If the specified name does not start with a slash, and the file is
not found in the current directory, several other directories are
searched.  First, any directories you have specified with the @{b}-I@{ub} or
@{b}--include-dir@{ub} option are searched (see @{"Summary of Options" Link "Options Summary"}).
Then the following directories (if they exist) are searched, in this
order: @{b}@{I}PREFIX@{ui}/include@{ub} (normally @{b}/usr/local/include@{ub} (1))
@{b}/usr/gnu/include@{ub}, @{b}/usr/local/include@{ub}, @{b}/usr/include@{ub}.

   If an included makefile cannot be found in any of these directories,
a warning message is generated, but it is not an immediately fatal
error; processing of the makefile containing the @{b}include@{ub} continues.
Once it has finished reading makefiles, @{b}make@{ub} will try to remake any
that are out of date or don't exist.  See @{"How Makefiles Are Remade" Link "Remaking Makefiles"}.
Only after it has tried to find a way to remake a makefile and failed,
will @{b}make@{ub} diagnose the missing makefile as a fatal error.

   If you want @{b}make@{ub} to simply ignore a makefile which does not exist
and cannot be remade, with no error message, use the @{b}-include@{ub} directive
instead of @{b}include@{ub}, like this:

     -include @{I}FILENAMES@{ui} ...

   This is acts like @{b}include@{ub} in every way except that there is no error
(not even a warning) if any of the @{I}FILENAMES@{ui} do not exist.  For
compatibility with some other @{b}make@{ub} implementations, @{b}sinclude@{ub} is another
name for @{b}-include@{ub}.

   ---------- Footnotes ----------

   (1)  GNU Make compiled for MS-DOS and MS-Windows behaves as if
@{I}PREFIX@{ui} has been defined to be the root of the DJGPP tree
hierarchy.


@EndNode

@Node "MAKEFILES Variable" "make.guide/MAKEFILES Variable"
@Next "Remaking Makefiles"
@Prev "Include"
@Toc "Makefiles"

The Variable @{b}MAKEFILES@{ub}
======================

   If the environment variable @{b}MAKEFILES@{ub} is defined, @{b}make@{ub} considers its
value as a list of names (separated by whitespace) of additional
makefiles to be read before the others.  This works much like the
@{b}include@{ub} directive: various directories are searched for those
files (see @{"Including Other Makefiles" Link "Include"}).  In addition, the default goal
is never taken from one of these makefiles and it is not an error if
the files listed in @{b}MAKEFILES@{ub} are not found.

   The main use of @{b}MAKEFILES@{ub} is in communication between recursive
invocations of @{b}make@{ub} (see @{"Recursive Use of make" Link "Recursion"}).  It usually is not
desirable to set the environment variable before a top-level invocation
of @{b}make@{ub}, because it is usually better not to mess with a makefile from
outside.  However, if you are running @{b}make@{ub} without a specific makefile,
a makefile in @{b}MAKEFILES@{ub} can do useful things to help the built-in
implicit rules work better, such as defining search paths (see
@{"Directory Search" Link "Directory Search"}).

   Some users are tempted to set @{b}MAKEFILES@{ub} in the environment
automatically on login, and program makefiles to expect this to be done.
This is a very bad idea, because such makefiles will fail to work if
run by anyone else.  It is much better to write explicit @{b}include@{ub}
directives in the makefiles.  See @{"Including Other Makefiles" Link "Include"}.


@EndNode

@Node "Remaking Makefiles" "make.guide/Remaking Makefiles"
@Next "Overriding Makefiles"
@Prev "MAKEFILES Variable"
@Toc "Makefiles"

How Makefiles Are Remade
========================

   Sometimes makefiles can be remade from other files, such as RCS or
SCCS files.  If a makefile can be remade from other files, you probably
want @{b}make@{ub} to get an up-to-date version of the makefile to read in.

   To this end, after reading in all makefiles, @{b}make@{ub} will consider each
as a goal target and attempt to update it.  If a makefile has a rule
which says how to update it (found either in that very makefile or in
another one) or if an implicit rule applies to it (see
@{"Using Implicit Rules" Link "Implicit Rules"}), it will be updated if necessary.  After all
makefiles have been checked, if any have actually been changed, @{b}make@{ub}
starts with a clean slate and reads all the makefiles over again.  (It
will also attempt to update each of them over again, but normally this
will not change them again, since they are already up to date.)

   If the makefiles specify a double-colon rule to remake a file with
commands but no dependencies, that file will always be remade (see
@{"Double-Colon" Link "Double-Colon"}).  In the case of makefiles, a makefile that has a
double-colon rule with commands but no dependencies will be remade every
time @{b}make@{ub} is run, and then again after @{b}make@{ub} starts over and reads the
makefiles in again.  This would cause an infinite loop: @{b}make@{ub} would
constantly remake the makefile, and never do anything else.  So, to
avoid this, @{b}make@{ub} will @{i}not@{ui} attempt to remake makefiles which are
specified as double-colon targets but have no dependencies.

   If you do not specify any makefiles to be read with @{b}-f@{ub} or @{b}--file@{ub}
options, @{b}make@{ub} will try the default makefile names; see
@{"What Name to Give Your Makefile" Link "Makefile Names"}.  Unlike makefiles explicitly requested
with @{b}-f@{ub} or @{b}--file@{ub} options, @{b}make@{ub} is not certain that these makefiles
should exist.  However, if a default makefile does not exist but can be
created by running @{b}make@{ub} rules, you probably want the rules to be run so
that the makefile can be used.

   Therefore, if none of the default makefiles exists, @{b}make@{ub} will try to
make each of them in the same order in which they are searched for (see
@{"What Name to Give Your Makefile" Link "Makefile Names"}) until it succeeds in making one, or it
runs out of names to try.  Note that it is not an error if @{b}make@{ub} cannot
find or make any makefile; a makefile is not always necessary.

   When you use the @{b}-t@{ub} or @{b}--touch@{ub} option (see
@{"Instead of Executing the Commands" Link "Instead of Execution"}), you would not want to use an
out-of-date makefile to decide which targets to touch.  So the @{b}-t@{ub}
option has no effect on updating makefiles; they are really updated
even if @{b}-t@{ub} is specified.  Likewise, @{b}-q@{ub} (or @{b}--question@{ub}) and @{b}-n@{ub} (or
@{b}--just-print@{ub}) do not prevent updating of makefiles, because an
out-of-date makefile would result in the wrong output for other targets.
Thus, @{b}make -f mfile -n foo@{ub} will update @{b}mfile@{ub}, read it in, and then
print the commands to update @{b}foo@{ub} and its dependencies without running
them.  The commands printed for @{b}foo@{ub} will be those specified in the
updated contents of @{b}mfile@{ub}.

   However, on occasion you might actually wish to prevent updating of
even the makefiles.  You can do this by specifying the makefiles as
goals in the command line as well as specifying them as makefiles.
When the makefile name is specified explicitly as a goal, the options @{b}-t@{ub}
and so on do apply to them.

   Thus, @{b}make -f mfile -n mfile foo@{ub} would read the makefile @{b}mfile@{ub},
print the commands needed to update it without actually running them,
and then print the commands needed to update @{b}foo@{ub} without running them.
The commands for @{b}foo@{ub} will be those specified by the existing contents
of @{b}mfile@{ub}.


@EndNode

@Node "Overriding Makefiles" "make.guide/Overriding Makefiles"
@Prev "Remaking Makefiles"
@Toc "Makefiles"

Overriding Part of Another Makefile
===================================

   Sometimes it is useful to have a makefile that is mostly just like
another makefile.  You can often use the @{b}include@{ub} directive to include
one in the other, and add more targets or variable definitions.
However, if the two makefiles give different commands for the same
target, @{b}make@{ub} will not let you just do this.  But there is another way.

   In the containing makefile (the one that wants to include the other),
you can use a match-anything pattern rule to say that to remake any
target that cannot be made from the information in the containing
makefile, @{b}make@{ub} should look in another makefile.  See @{"Pattern Rules" Link "Pattern Rules"}, for
more information on pattern rules.

   For example, if you have a makefile called @{b}Makefile@{ub} that says how to
make the target @{b}foo@{ub} (and other targets), you can write a makefile
called @{b}GNUmakefile@{ub} that contains:

     foo:
        frobnicate > foo

%: force
        @$(MAKE) -f Makefile $@
force: ;

   If you say @{b}make foo@{ub}, @{b}make@{ub} will find @{b}GNUmakefile@{ub}, read it, and see
that to make @{b}foo@{ub}, it needs to run the command @{b}frobnicate > foo@{ub}.  If you
say @{b}make bar@{ub}, @{b}make@{ub} will find no way to make @{b}bar@{ub} in @{b}GNUmakefile@{ub}, so it
will use the commands from the pattern rule: @{b}make -f Makefile bar@{ub}.  If
@{b}Makefile@{ub} provides a rule for updating @{b}bar@{ub}, @{b}make@{ub} will apply the
rule.  And likewise for any other target that @{b}GNUmakefile@{ub} does not say
how to make.

   The way this works is that the pattern rule has a pattern of just @{b}%@{ub},
so it matches any target whatever.  The rule specifies a dependency
@{b}force@{ub}, to guarantee that the commands will be run even if the
target file already exists.  We give @{b}force@{ub} target empty commands to
prevent @{b}make@{ub} from searching for an implicit rule to build it--otherwise
it would apply the same match-anything rule to @{b}force@{ub} itself and create
a dependency loop!


@EndNode

@Node "Rules" "make.guide/Rules"
@Next "Commands"
@Prev "Makefiles"
@Toc "Main"

Writing Rules
*************

   A @{i}rule@{ui} appears in the makefile and says when and how to remake
certain files, called the rule's @{i}targets@{ui} (most often only one per rule).
It lists the other files that are the @{i}dependencies@{ui} of the target, and
@{i}commands@{ui} to use to create or update the target.

   The order of rules is not significant, except for determining the @{i}default
goal@{ui}: the target for @{b}make@{ub} to consider, if you do not otherwise
specify one.  The default goal is the target of the first rule in the
first makefile.  If the first rule has multiple targets, only the first
target is taken as the default.  There are two exceptions: a target
starting with a period is not a default unless it contains one or more
slashes, @{b}/@{ub}, as well; and, a target that defines a pattern rule has no
effect on the default goal.  (See
@{"Defining and Redefining Pattern Rules" Link "Pattern Rules"}.)

   Therefore, we usually write the makefile so that the first rule is
the one for compiling the entire program or all the programs described
by the makefile (often with a target called @{b}all@{ub}).  See
@{"Arguments to Specify the Goals" Link "Goals"}.


 @{" Rule Example              " Link "Rule Example"}  An example explained.
 @{" Rule Syntax               " Link "Rule Syntax"}  General syntax explained.
 @{" Wildcards                 " Link "Wildcards"}  Using wildcard characters such as `*'.
 @{" Directory Search          " Link "Directory Search"}  Searching other directories for source files.
 @{" Phony Targets             " Link "Phony Targets"}  Using a target that is not a real file's name.
 @{" Force Targets             " Link "Force Targets"}  You can use a target without commands
                                  or dependencies to mark other
                                  targets as phony.
 @{" Empty Targets             " Link "Empty Targets"}  When only the date matters and the
                                  files are empty.
 @{" Special Targets           " Link "Special Targets"}  Targets with special built-in meanings.
 @{" Multiple Targets          " Link "Multiple Targets"}  When to make use of several targets in a rule.
 @{" Multiple Rules            " Link "Multiple Rules"}  How to use several rules with the same target.
 @{" Static Pattern            " Link "Static Pattern"}  Static pattern rules apply to multiple targets
                                  and can vary the dependencies according to
                                  the target name.
 @{" Double-Colon              " Link "Double-Colon"}  How to use a special kind of rule to allow
                                  several independent rules for one target.
 @{" Automatic Dependencies    " Link "Automatic Dependencies"}  How to automatically generate rules giving
                                 dependencies from the source files themselves.


@EndNode

@Node "Rule Example" "make.guide/Rule Example"
@Next "Rule Syntax"
@Toc "Rules"

Rule Example
============

   Here is an example of a rule:

     foo.o : foo.c defs.h       # module for twiddling the frobs
        cc -c -g foo.c

   Its target is @{b}foo.o@{ub} and its dependencies are @{b}foo.c@{ub} and @{b}defs.h@{ub}.  It
has one command, which is @{b}cc -c -g foo.c@{ub}.  The command line starts with
a tab to identify it as a command.

   This rule says two things:

   @{b}*@{ub} How to decide whether @{b}foo.o@{ub} is out of date: it is out of date if
     it does not exist, or if either @{b}foo.c@{ub} or @{b}defs.h@{ub} is more recent
     than it.

   @{b}*@{ub} How to update the file @{b}foo.o@{ub}: by running @{b}cc@{ub} as stated.  The
     command does not explicitly mention @{b}defs.h@{ub}, but we presume that
     @{b}foo.c@{ub} includes it, and that that is why @{b}defs.h@{ub} was added
     to the dependencies.


@EndNode

@Node "Rule Syntax" "make.guide/Rule Syntax"
@Next "Wildcards"
@Prev "Rule Example"
@Toc "Rules"

Rule Syntax
===========

   In general, a rule looks like this:

     @{I}TARGETS@{ui} : @{I}DEPENDENCIES@{ui}
        @{I}COMMAND@{ui}
        ...

or like this:

     @{I}TARGETS@{ui} : @{I}DEPENDENCIES@{ui} ; @{I}COMMAND@{ui}
        @{I}COMMAND@{ui}
        ...

   The @{I}TARGETS@{ui} are file names, separated by spaces.  Wildcard
characters may be used (see @{"Using Wildcard Characters in File Names" Link "Wildcards"})
and a name of the form @{b}@{I}A@{ui}(@{I}M@{ui})@{ub} represents member @{I}M@{ui} in archive file @{I}A@{ui} (see
@{"Archive Members as Targets" Link "Archive Members"}).  Usually there is only one target per
rule, but occasionally there is a reason to have more (see
@{"Multiple Targets in a Rule" Link "Multiple Targets"}).

   The @{I}COMMAND@{ui} lines start with a tab character.  The first command may
appear on the line after the dependencies, with a tab character, or may
appear on the same line, with a semicolon.  Either way, the effect is
the same.  See @{"Writing the Commands in Rules" Link "Commands"}.

   Because dollar signs are used to start variable references, if you
really want a dollar sign in a rule you must write two of them, @{b}$$@{ub} (see
@{"How to Use Variables" Link "Using Variables"}).  You may split a long line by inserting a
backslash followed by a newline, but this is not required, as @{b}make@{ub}
places no limit on the length of a line in a makefile.

   A rule tells @{b}make@{ub} two things: when the targets are out of date, and
how to update them when necessary.

   The criterion for being out of date is specified in terms of the
@{I}DEPENDENCIES@{ui}, which consist of file names separated by spaces.
(Wildcards and archive members (see @{"Archives" Link "Archives"}) are allowed here too.) A
target is out of date if it does not exist or if it is older than any
of the dependencies (by comparison of last-modification times).  The
idea is that the contents of the target file are computed based on
information in the dependencies, so if any of the dependencies changes,
the contents of the existing target file are no longer necessarily
valid.

   How to update is specified by @{I}COMMANDS@{ui}.  These are lines to be
executed by the shell (normally @{b}sh@{ub}), but with some extra features (see
@{"Writing the Commands in Rules" Link "Commands"}).


@EndNode

@Node "Wildcards" "make.guide/Wildcards"
@Next "Directory Search"
@Prev "Rule Syntax"
@Toc "Rules"

Using Wildcard Characters in File Names
=======================================

   A single file name can specify many files using @{i}wildcard characters@{ui}.
The wildcard characters in @{b}make@{ub} are @{b}*@{ub}, @{b}?@{ub} and @{b} [...]@{ub}, the same as in the
Bourne shell.  For example, @{b}*.c@{ub} specifies a list of all the files (in
the working directory) whose names end in @{b}.c@{ub}.

   The character @{b}~@{ub} at the beginning of a file name also has special
significance.  If alone, or followed by a slash, it represents your home
directory.  For example @{b}~/bin@{ub} expands to @{b}/home/you/bin@{ub}.  If the @{b}~@{ub} is
followed by a word, the string represents the home directory of the
user named by that word.  For example @{b}~john/bin@{ub} expands to
@{b}/home/john/bin@{ub}.  On systems which don't have a home directory
for each user (such as MS-DOS or MS-Windows), this functionality can be
simulated by setting the environment variable @{I}HOME@{ui}.

   Wildcard expansion happens automatically in targets, in dependencies,
and in commands (where the shell does the expansion).  In other
contexts, wildcard expansion happens only if you request it explicitly
with the @{b}wildcard@{ub} function.

   The special significance of a wildcard character can be turned off by
preceding it with a backslash.  Thus, @{b}foo\\*bar@{ub} would refer to a
specific file whose name consists of @{b}foo@{ub}, an asterisk, and @{b}bar@{ub}.


 @{" Wildcard Examples         " Link "Wildcard Examples"}  Several examples
 @{" Wildcard Pitfall          " Link "Wildcard Pitfall"}  Problems to avoid.
 @{" Wildcard Function         " Link "Wildcard Function"}  How to cause wildcard expansion where
                                  it does not normally take place.


@EndNode

@Node "Wildcard Examples" "make.guide/Wildcard Examples"
@Next "Wildcard Pitfall"
@Toc "Wildcards"

Wildcard Examples
-----------------

   Wildcards can be used in the commands of a rule, where they are
expanded by the shell.  For example, here is a rule to delete all the
object files:

     clean:
        rm -f *.o

   Wildcards are also useful in the dependencies of a rule.  With the
following rule in the makefile, @{b}make print@{ub} will print all the @{b}.c@{ub} files
that have changed since the last time you printed them:

     print: *.c
        lpr -p $?
        touch print

This rule uses @{b}print@{ub} as an empty target file; see
@{"Empty Target Files to Record Events" Link "Empty Targets"}.  (The automatic variable @{b}$?@{ub} is
used to print only those files that have changed; see
@{"Automatic Variables" Link "Automatic"}.)

   Wildcard expansion does not happen when you define a variable.
Thus, if you write this:

     objects = *.o

then the value of the variable @{b}objects@{ub} is the actual string @{b}*.o@{ub}.
However, if you use the value of @{b}objects@{ub} in a target, dependency or
command, wildcard expansion will take place at that time.  To set
@{b}objects@{ub} to the expansion, instead use:

     objects := $(wildcard *.o)

See @{"Wildcard Function" Link "Wildcard Function"}.


@EndNode

@Node "Wildcard Pitfall" "make.guide/Wildcard Pitfall"
@Next "Wildcard Function"
@Prev "Wildcard Examples"
@Toc "Wildcards"

Pitfalls of Using Wildcards
---------------------------

   Now here is an example of a naive way of using wildcard expansion,
that does not do what you would intend.  Suppose you would like to say
that the executable file @{b}foo@{ub} is made from all the object files in the
directory, and you write this:

     objects = *.o

foo : $(objects)
        cc -o foo $(CFLAGS) $(objects)

The value of @{b}objects@{ub} is the actual string @{b}*.o@{ub}.  Wildcard expansion
happens in the rule for @{b}foo@{ub}, so that each @{i}existing@{ui} @{b}.o@{ub} file becomes a
dependency of @{b}foo@{ub} and will be recompiled if necessary.

   But what if you delete all the @{b}.o@{ub} files?  When a wildcard matches no
files, it is left as it is, so then @{b}foo@{ub} will depend on the oddly-named
file @{b}*.o@{ub}.  Since no such file is likely to exist, @{b}make@{ub} will give you an
error saying it cannot figure out how to make @{b}*.o@{ub}.  This is not what
you want!

   Actually it is possible to obtain the desired result with wildcard
expansion, but you need more sophisticated techniques, including the
@{b}wildcard@{ub} function and string substitution.  See
@{"The Function wildcard" Link "Wildcard Function"}.

   Microsoft operating systems (MS-DOS and MS-Windows) use backslashes
to separate directories in pathnames, like so:

       c:\\foo\\bar\\baz.c

   This is equivalent to the Unix-style @{b}c:/foo/bar/baz.c@{ub} (the @{b}c:@{ub} part
is the so-called drive letter).  When @{b}make@{ub} runs on these systems, it
supports backslashes as well as the Unix-style forward slashes in
pathnames.  However, this support does @{i}not@{ui} include the wildcard
expansion, where backslash is a quote character.  Therefore, you @{i}must@{ui}
use Unix-style slashes in these cases.


@EndNode

@Node "Wildcard Function" "make.guide/Wildcard Function"
@Prev "Wildcard Pitfall"
@Toc "Wildcards"

The Function @{b}wildcard@{ub}
---------------------

   Wildcard expansion happens automatically in rules.  But wildcard
expansion does not normally take place when a variable is set, or
inside the arguments of a function.  If you want to do wildcard
expansion in such places, you need to use the @{b}wildcard@{ub} function, like
this:

     $(wildcard @{I}PATTERN@{ui} ...)

This string, used anywhere in a makefile, is replaced by a
space-separated list of names of existing files that match one of the
given file name patterns.  If no existing file name matches a pattern,
then that pattern is omitted from the output of the @{b}wildcard@{ub} function.
Note that this is different from how unmatched wildcards behave in
rules, where they are used verbatim rather than ignored (see
@{"Wildcard Pitfall" Link "Wildcard Pitfall"}).

   One use of the @{b}wildcard@{ub} function is to get a list of all the C source
files in a directory, like this:

     $(wildcard *.c)

   We can change the list of C source files into a list of object files
by replacing the @{b}.c@{ub} suffix with @{b}.o@{ub} in the result, like this:

     $(patsubst %.c,%.o,$(wildcard *.c))

(Here we have used another function, @{b}patsubst@{ub}.  See
@{"Functions for String Substitution and Analysis" Link "Text Functions"}.)

   Thus, a makefile to compile all C source files in the directory and
then link them together could be written as follows:

     objects := $(patsubst %.c,%.o,$(wildcard *.c))

foo : $(objects)
        cc -o foo $(objects)

(This takes advantage of the implicit rule for compiling C programs, so
there is no need to write explicit rules for compiling the files.  See
@{"The Two Flavors of Variables" Link "Flavors"}, for an explanation of @{b}:=@{ub}, which is a
variant of @{b}=@{ub}.)


@EndNode

@Node "Directory Search" "make.guide/Directory Search"
@Next "Phony Targets"
@Prev "Wildcards"
@Toc "Rules"

Searching Directories for Dependencies
======================================

   For large systems, it is often desirable to put sources in a separate
directory from the binaries.  The @{i}directory search@{ui} features of @{b}make@{ub}
facilitate this by searching several directories automatically to find
a dependency.  When you redistribute the files among directories, you
do not need to change the individual rules, just the search paths.


 @{" General Search            " Link "General Search"}  Specifying a search path that applies
                                  to every dependency.
 @{" Selective Search          " Link "Selective Search"}  Specifying a search path
                                  for a specified class of names.
 @{" Search Algorithm          " Link "Search Algorithm"}  When and how search paths are applied.
 @{" Commands-Search           " Link "Commands-Search"}  How to write shell commands that work together
                                  with search paths.
 @{" Implicit-Search           " Link "Implicit-Search"}  How search paths affect implicit rules.
 @{" Libraries-Search          " Link "Libraries-Search"}  Directory search for link libraries.


@EndNode

@Node "General Search" "make.guide/General Search"
@Next "Selective Search"
@Toc "Directory Search"

@{b}VPATH@{ub}: Search Path for All Dependencies
---------------------------------------

   The value of the @{b}make@{ub} variable @{b}VPATH@{ub} specifies a list of directories
that @{b}make@{ub} should search.  Most often, the directories are expected to
contain dependency files that are not in the current directory;
however, @{b}VPATH@{ub} specifies a search list that @{b}make@{ub} applies for all files,
including files which are targets of rules.

   Thus, if a file that is listed as a target or dependency does not
exist in the current directory, @{b}make@{ub} searches the directories listed in
@{b}VPATH@{ub} for a file with that name.  If a file is found in one of
them, that file may become the dependency (see below).  Rules may then
specify the names of files in the dependency list as if they all
existed in the current directory.  See
@{"Writing Shell Commands with Directory Search" Link "Commands-Search"}.

   In the @{b}VPATH@{ub} variable, directory names are separated by colons or
blanks.  The order in which directories are listed is the order followed
by @{b}make@{ub} in its search.  (On MS-DOS and MS-Windows, semi-colons are used
as separators of directory names in @{b}VPATH@{ub}, since the colon can be used
in the pathname itself, after the drive letter.)

   For example,

     VPATH = src:../headers

specifies a path containing two directories, @{b}src@{ub} and @{b}../headers@{ub}, which
@{b}make@{ub} searches in that order.

   With this value of @{b}VPATH@{ub}, the following rule,

     foo.o : foo.c

is interpreted as if it were written like this:

     foo.o : src/foo.c

assuming the file @{b}foo.c@{ub} does not exist in the current directory but is
found in the directory @{b}src@{ub}.


@EndNode

@Node "Selective Search" "make.guide/Selective Search"
@Next "Search Algorithm"
@Prev "General Search"
@Toc "Directory Search"

The @{b}vpath@{ub} Directive
-------------------

   Similar to the @{b}VPATH@{ub} variable, but more selective, is the @{b}vpath@{ub}
directive (note lower case), which allows you to specify a search path
for a particular class of file names: those that match a particular
pattern.  Thus you can supply certain search directories for one class
of file names and other directories (or none) for other file names.

   There are three forms of the @{b}vpath@{ub} directive:

@{b}vpath @{I}PATTERN@{ui} @{I}DIRECTORIES@{ui}@{ub}
     Specify the search path @{I}DIRECTORIES@{ui} for file names that match
     @{I}PATTERN@{ui}.

     The search path, @{I}DIRECTORIES@{ui}, is a list of directories to be
     searched, separated by colons (semi-colons on MS-DOS and
     MS-Windows) or blanks, just like the search path used in the @{b}VPATH@{ub}
     variable.

@{b}vpath @{I}PATTERN@{ui}@{ub}
     Clear out the search path associated with @{I}PATTERN@{ui}.

@{b}vpath@{ub}
     Clear all search paths previously specified with @{b}vpath@{ub} directives.

   A @{b}vpath@{ub} pattern is a string containing a @{b}%@{ub} character.  The string
must match the file name of a dependency that is being searched for,
the @{b}%@{ub} character matching any sequence of zero or more characters (as in
pattern rules; see @{"Defining and Redefining Pattern Rules" Link "Pattern Rules"}).  For
example, @{b}%.h@{ub} matches files that end in @{b}.h@{ub}.  (If there is no @{b}%@{ub}, the
pattern must match the dependency exactly, which is not useful very
often.)

   @{b}%@{ub} characters in a @{b}vpath@{ub} directive's pattern can be quoted with
preceding backslashes (@{b}\\ @{ub}).  Backslashes that would otherwise quote @{b}%@{ub}
characters can be quoted with more backslashes.  Backslashes that quote
@{b}%@{ub} characters or other backslashes are removed from the pattern
before it is compared to file names.  Backslashes that are not in
danger of quoting @{b}%@{ub} characters go unmolested.

   When a dependency fails to exist in the current directory, if the
@{I}PATTERN@{ui} in a @{b}vpath@{ub} directive matches the name of the
dependency file, then the @{I}DIRECTORIES@{ui} in that directive are searched
just like (and before) the directories in the @{b}VPATH@{ub} variable.

   For example,

     vpath %.h ../headers

tells @{b}make@{ub} to look for any dependency whose name ends in @{b}.h@{ub} in the
directory @{b}../headers@{ub} if the file is not found in the current directory.

   If several @{b}vpath@{ub} patterns match the dependency file's name, then
@{b}make@{ub} processes each matching @{b}vpath@{ub} directive one by one,
searching all the directories mentioned in each directive.  @{b}make@{ub}
handles multiple @{b}vpath@{ub} directives in the order in which they appear in
the makefile; multiple directives with the same pattern are independent
of each other.

   Thus,

     vpath %.c foo
vpath %   blish
vpath %.c bar

will look for a file ending in @{b}.c@{ub} in @{b}foo@{ub}, then @{b}blish@{ub}, then @{b}bar@{ub}, while

     vpath %.c foo:bar
vpath %   blish

will look for a file ending in @{b}.c@{ub} in @{b}foo@{ub}, then @{b}bar@{ub}, then @{b}blish@{ub}.


@EndNode

@Node "Search Algorithm" "make.guide/Search Algorithm"
@Next "Commands-Search"
@Prev "Selective Search"
@Toc "Directory Search"

How Directory Searches are Performed
------------------------------------

   When a dependency is found through directory search, regardless of
type (general or selective), the pathname located may not be the one
that @{b}make@{ub} actually provides you in the dependency list.  Sometimes the
path discovered through directory search is thrown away.

   The algorithm @{b}make@{ub} uses to decide whether to keep or abandon a path
found via directory search is as follows:

  1. If a target file does not exist at the path specified in the
     makefile, directory search is performed.

  2. If the directory search is successful, that path is kept and this
     file is tentatively stored as the target.

  3. All dependencies of this target are examined using this same
     method.

  4. After processing the dependencies, the target may or may not need
     to be rebuilt:

       a. If the target does @{i}not@{ui} need to be rebuilt, the path to the
          file found during directory search is used for any dependency
          lists which contain this target.  In short, if @{b}make@{ub} doesn't
          need to rebuild the target then you use the path found via
          directory search.

       b. If the target @{i}does@{ui} need to be rebuilt (is out-of-date), the
          pathname found during directory search is @{i}thrown away@{ui}, and the
          target is rebuilt using the file name specified in the
          makefile.  In short, if @{b}make@{ub} must rebuild, then the target is
          rebuilt locally, not in the directory found via directory
          search.

   This algorithm may seem complex, but in practice it is quite often
exactly what you want.

   Other versions of @{b}make@{ub} use a simpler algorithm: if the file does not
exist, and it is found via directory search, then that pathname is
always used whether or not the target needs to be built.  Thus, if the
target is rebuilt it is created at the pathname discovered during
directory search.

   If, in fact, this is the behavior you want for some or all of your
directories, you can use the @{b}GPATH@{ub} variable to indicate this to @{b}make@{ub}.

   @{b}GPATH@{ub} has the same syntax and format as @{b}VPATH@{ub} (that is, a space- or
colon-delimited list of pathnames).  If an out-of-date target is found
by directory search in a directory that also appears in @{b}GPATH@{ub}, then
that pathname is not thrown away.  The target is rebuilt using the
expanded path.


@EndNode

@Node "Commands-Search" "make.guide/Commands-Search"
@Next "Implicit-Search"
@Prev "Search Algorithm"
@Toc "Directory Search"

Writing Shell Commands with Directory Search
--------------------------------------------

   When a dependency is found in another directory through directory
search, this cannot change the commands of the rule; they will execute
as written.  Therefore, you must write the commands with care so that
they will look for the dependency in the directory where @{b}make@{ub} finds it.

   This is done with the @{i}automatic variables@{ui} such as @{b}$^@{ub} (see
@{"Automatic Variables" Link "Automatic"}).  For instance, the value of @{b}$^@{ub} is a list of all
the dependencies of the rule, including the names of the directories in
which they were found, and the value of @{b} $@@{ub} is the target.  Thus:

     foo.o : foo.c
        cc -c $(CFLAGS) $^ -o $@

(The variable @{b}CFLAGS@{ub} exists so you can specify flags for C compilation
by implicit rules; we use it here for consistency so it will affect all
C compilations uniformly; see @{"Variables Used by Implicit Rules" Link "Implicit Variables"}.)

   Often the dependencies include header files as well, which you do not
want to mention in the commands.  The automatic variable @{b}$<@{ub} is just the
first dependency:

     VPATH = src:../headers
foo.o : foo.c defs.h hack.h
        cc -c $(CFLAGS) $< -o $@


@EndNode

@Node "Implicit-Search" "make.guide/Implicit-Search"
@Next "Libraries-Search"
@Prev "Commands-Search"
@Toc "Directory Search"

Directory Search and Implicit Rules
-----------------------------------

   The search through the directories specified in @{b}VPATH@{ub} or with @{b}vpath@{ub}
also happens during consideration of implicit rules (see
@{"Using Implicit Rules" Link "Implicit Rules"}).

   For example, when a file @{b}foo.o@{ub} has no explicit rule, @{b}make@{ub} considers
implicit rules, such as the built-in rule to compile @{b}foo.c@{ub} if that file
exists.  If such a file is lacking in the current directory, the
appropriate directories are searched for it.  If @{b}foo.c@{ub} exists (or is
mentioned in the makefile) in any of the directories, the implicit rule
for C compilation is applied.

   The commands of implicit rules normally use automatic variables as a
matter of necessity; consequently they will use the file names found by
directory search with no extra effort.


@EndNode

@Node "Libraries-Search" "make.guide/Libraries-Search"
@Prev "Implicit-Search"
@Toc "Directory Search"

Directory Search for Link Libraries
-----------------------------------

   Directory search applies in a special way to libraries used with the
linker.  This special feature comes into play when you write a
dependency whose name is of the form @{b}-l@{I}NAME@{ui}@{ub}.  (You can tell something
strange is going on here because the dependency is normally the name of
a file, and the @{i}file name@{ui} of the library looks like @{b}lib@{I}NAME@{ui}.a@{ub}, not like
@{b}-l@{I}NAME@{ui}@{ub}.)

   When a dependency's name has the form @{b}-l@{I}NAME@{ui}@{ub}, @{b}make@{ub} handles it
specially by searching for the file @{b}lib@{I}NAME@{ui}.a@{ub} in the current directory,
in directories specified by matching @{b}vpath@{ub} search paths and the @{b}VPATH@{ub}
search path, and then in the directories @{b}/lib@{ub}, @{b}/usr/lib@{ub}, and @{b}@{I}PREFIX@{ui}/lib@{ub}
(normally @{b}/usr/local/lib@{ub}, but MS-DOS/MS-Windows versions of @{b}make@{ub} behave
as if @{I}PREFIX@{ui} is defined to be the root of the DJGPP installation tree).

   For example,

     foo : foo.c -lcurses
        cc $^ -o $@

would cause the command @{b}cc foo.c /usr/lib/libcurses.a -o foo@{ub} to be
executed when @{b}foo@{ub} is older than @{b}foo.c@{ub} or than @{b}/usr/lib/libcurses.a@{ub}.


@EndNode

@Node "Phony Targets" "make.guide/Phony Targets"
@Next "Force Targets"
@Prev "Directory Search"
@Toc "Rules"

Phony Targets
=============

   A phony target is one that is not really the name of a file.  It is
just a name for some commands to be executed when you make an explicit
request.  There are two reasons to use a phony target: to avoid a
conflict with a file of the same name, and to improve performance.

   If you write a rule whose commands will not create the target file,
the commands will be executed every time the target comes up for
remaking.  Here is an example:

     clean:
        rm *.o temp

Because the @{b}rm@{ub} command does not create a file named @{b}clean@{ub}, probably no
such file will ever exist.  Therefore, the @{b}rm@{ub} command will be executed
every time you say @{b}make clean@{ub}.

   The phony target will cease to work if anything ever does create a
file named @{b}clean@{ub} in this directory.  Since it has no dependencies, the
file @{b}clean@{ub} would inevitably be considered up to date, and its commands
would not be executed.  To avoid this problem, you can explicitly
declare the target to be phony, using the special target @{b}.PHONY@{ub} (see
@{"Special Built-in Target Names" Link "Special Targets"}) as follows:

     .PHONY : clean

Once this is done, @{b}make clean@{ub} will run the commands regardless of
whether there is a file named @{b}clean@{ub}.

   Since it knows that phony targets do not name actual files that
could be remade from other files, @{b}make@{ub} skips the implicit rule search
for phony targets (see @{"Implicit Rules" Link "Implicit Rules"}).  This is why declaring a target
phony is good for performance, even if you are not worried about the
actual file existing.

   Thus, you first write the line that states that @{b}clean@{ub} is a phony
target, then you write the rule, like this:

     .PHONY: clean
clean:
        rm *.o temp

   A phony target should not be a dependency of a real target file; if
it is, its commands are run every time @{b}make@{ub} goes to update that file.
As long as a phony target is never a dependency of a real target, the
phony target commands will be executed only when the phony target is a
specified goal (see @{"Arguments to Specify the Goals" Link "Goals"}).

   Phony targets can have dependencies.  When one directory contains
multiple programs, it is most convenient to describe all of the
programs in one makefile @{b}./Makefile@{ub}.  Since the target remade by
default will be the first one in the makefile, it is common to make
this a phony target named @{b}all@{ub} and give it, as dependencies, all the
individual programs.  For example:

     all : prog1 prog2 prog3
.PHONY : all

prog1 : prog1.o utils.o
        cc -o prog1 prog1.o utils.o

prog2 : prog2.o
        cc -o prog2 prog2.o

prog3 : prog3.o sort.o utils.o
        cc -o prog3 prog3.o sort.o utils.o

Now you can say just @{b}make@{ub} to remake all three programs, or specify as
arguments the ones to remake (as in @{b}make prog1 prog3@{ub}).

   When one phony target is a dependency of another, it serves as a
subroutine of the other.  For example, here @{b}make cleanall@{ub} will delete
the object files, the difference files, and the file @{b}program@{ub}:

     .PHONY: cleanall cleanobj cleandiff

cleanall : cleanobj cleandiff
        rm program

cleanobj :
        rm *.o

cleandiff :
        rm *.diff


@EndNode

@Node "Force Targets" "make.guide/Force Targets"
@Next "Empty Targets"
@Prev "Phony Targets"
@Toc "Rules"

Rules without Commands or Dependencies
======================================

   If a rule has no dependencies or commands, and the target of the rule
is a nonexistent file, then @{b}make@{ub} imagines this target to have been
updated whenever its rule is run.  This implies that all targets
depending on this one will always have their commands run.

   An example will illustrate this:

     clean: FORCE
        rm $(objects)
FORCE:

   Here the target @{b}FORCE@{ub} satisfies the special conditions, so the
target @{b}clean@{ub} that depends on it is forced to run its commands.  There
is nothing special about the name @{b}FORCE@{ub}, but that is one name commonly
used this way.

   As you can see, using @{b}FORCE@{ub} this way has the same results as using @{b}.PHONY:
clean@{ub}.

   Using @{b}.PHONY@{ub} is more explicit and more efficient.  However, other
versions of @{b}make@{ub} do not support @{b}.PHONY@{ub}; thus @{b}FORCE@{ub} appears in many
makefiles.  See @{"Phony Targets" Link "Phony Targets"}.


@EndNode

@Node "Empty Targets" "make.guide/Empty Targets"
@Next "Special Targets"
@Prev "Force Targets"
@Toc "Rules"

Empty Target Files to Record Events
===================================

   The @{i}empty target@{ui} is a variant of the phony target; it is used to hold
commands for an action that you request explicitly from time to time.
Unlike a phony target, this target file can really exist; but the file's
contents do not matter, and usually are empty.

   The purpose of the empty target file is to record, with its
last-modification time, when the rule's commands were last executed.  It
does so because one of the commands is a @{b}touch@{ub} command to update the
target file.

   The empty target file must have some dependencies.  When you ask to
remake the empty target, the commands are executed if any dependency is
more recent than the target; in other words, if a dependency has
changed since the last time you remade the target.  Here is an example:

     print: foo.c bar.c
        lpr -p $?
        touch print

With this rule, @{b}make print@{ub} will execute the @{b}lpr@{ub} command if either
source file has changed since the last @{b}make print@{ub}.  The automatic
variable @{b}$?@{ub} is used to print only those files that have changed (see
@{"Automatic Variables" Link "Automatic"}).


@EndNode

@Node "Special Targets" "make.guide/Special Targets"
@Next "Multiple Targets"
@Prev "Empty Targets"
@Toc "Rules"

Special Built-in Target Names
=============================

   Certain names have special meanings if they appear as targets.

@{b}.PHONY@{ub}
     The dependencies of the special target @{b}.PHONY@{ub} are considered to be
     phony targets.  When it is time to consider such a target, @{b}make@{ub}
     will run its commands unconditionally, regardless of whether a
     file with that name exists or what its last-modification time is.
     See @{"Phony Targets" Link "Phony Targets"}.

@{b}.SUFFIXES@{ub}
     The dependencies of the special target @{b}.SUFFIXES@{ub} are the list of
     suffixes to be used in checking for suffix rules.  See
     @{"Old-Fashioned Suffix Rules" Link "Suffix Rules"}.

@{b}.DEFAULT@{ub}
     The commands specified for @{b}.DEFAULT@{ub} are used for any target for
     which no rules are found (either explicit rules or implicit rules).
     See @{"Last Resort" Link "Last Resort"}.  If @{b}.DEFAULT@{ub} commands are specified, every file
     mentioned as a dependency, but not as a target in a rule, will have
     these commands executed on its behalf.  See
     @{"Implicit Rule Search Algorithm" Link "Implicit Rule Search"}.

@{b}.PRECIOUS@{ub}
     The targets which @{b}.PRECIOUS@{ub} depends on are given the following
     special treatment: if @{b}make@{ub} is killed or interrupted during the
     execution of their commands, the target is not deleted.  See
     @{"Interrupting or Killing make" Link "Interrupts"}.  Also, if the target is an
     intermediate file, it will not be deleted after it is no longer
     needed, as is normally done.  See @{"Chains of Implicit Rules" Link "Chained Rules"}.

     You can also list the target pattern of an implicit rule (such as
     @{b}%.o@{ub}) as a dependency file of the special target @{b}.PRECIOUS@{ub}
     to preserve intermediate files created by rules whose target
     patterns match that file's name.

@{b}.INTERMEDIATE@{ub}
     The targets which @{b}.INTERMEDIATE@{ub} depends on are treated as
     intermediate files.  See @{"Chains of Implicit Rules" Link "Chained Rules"}.  @{b}.INTERMEDIATE@{ub}
     with no dependencies marks all file targets mentioned in the
     makefile as intermediate.

@{b}.SECONDARY@{ub}
     The targets which @{b}.SECONDARY@{ub} depends on are treated as
     intermediate files, except that they are never automatically
     deleted.  See @{"Chains of Implicit Rules" Link "Chained Rules"}.

     @{b}.SECONDARY@{ub} with no dependencies marks all file targets mentioned
     in the makefile as secondary.

@{b}.IGNORE@{ub}
     If you specify dependencies for @{b}.IGNORE@{ub}, then @{b}make@{ub} will ignore
     errors in execution of the commands run for those particular
     files.  The commands for @{b}.IGNORE@{ub} are not meaningful.

     If mentioned as a target with no dependencies, @{b}.IGNORE@{ub} says to
     ignore errors in execution of commands for all files.  This usage
     of @{b}.IGNORE@{ub} is supported only for historical compatibility.  Since
     this affects every command in the makefile, it is not very useful;
     we recommend you use the more selective ways to ignore errors in
     specific commands.  See @{"Errors in Commands" Link "Errors"}.

@{b}.SILENT@{ub}
     If you specify dependencies for @{b}.SILENT@{ub}, then @{b}make@{ub} will not the
     print commands to remake those particular files before executing
     them.  The commands for @{b}.SILENT@{ub} are not meaningful.

     If mentioned as a target with no dependencies, @{b}.SILENT@{ub} says not to
     print any commands before executing them.  This usage of @{b}.SILENT@{ub}
     is supported only for historical compatibility.  We recommend you
     use the more selective ways to silence specific commands.  See
     @{"Command Echoing" Link "Echoing"}.  If you want to silence all commands for a
     particular run of @{b}make@{ub}, use the @{b}-s@{ub} or @{b}--silent@{ub} option (see
     @{"Options Summary" Link "Options Summary"}).

@{b}.EXPORT_ALL_VARIABLES@{ub}
     Simply by being mentioned as a target, this tells @{b}make@{ub} to export
     all variables to child processes by default.  See
     @{"Communicating Variables to a Sub-make" Link "Variables-Recursion"}.

   Any defined implicit rule suffix also counts as a special target if
it appears as a target, and so does the concatenation of two suffixes,
such as @{b}.c.o@{ub}.  These targets are suffix rules, an obsolete way of
defining implicit rules (but a way still widely used).  In principle,
any target name could be special in this way if you break it in two and
add both pieces to the suffix list.  In practice, suffixes normally
begin with @{b}.@{ub}, so these special target names also begin with @{b}.@{ub}.  See
@{"Old-Fashioned Suffix Rules" Link "Suffix Rules"}.


@EndNode

@Node "Multiple Targets" "make.guide/Multiple Targets"
@Next "Multiple Rules"
@Prev "Special Targets"
@Toc "Rules"

Multiple Targets in a Rule
==========================

   A rule with multiple targets is equivalent to writing many rules,
each with one target, and all identical aside from that.  The same
commands apply to all the targets, but their effects may vary because
you can substitute the actual target name into the command using @{b} $@@{ub}.
The rule contributes the same dependencies to all the targets also.

   This is useful in two cases.

   @{b}*@{ub} You want just dependencies, no commands.  For example:

          kbd.o command.o files.o: command.h

     gives an additional dependency to each of the three object files
     mentioned.

   @{b}*@{ub} Similar commands work for all the targets.  The commands do not
     need to be absolutely identical, since the automatic variable @{b} $@@{ub}
     can be used to substitute the particular target to be remade into
     the commands (see @{"Automatic Variables" Link "Automatic"}).  For example:

          bigoutput littleoutput : text.g
        generate text.g -$(subst output,,$@) > $@

     is equivalent to

          bigoutput : text.g
        generate text.g -big > bigoutput
littleoutput : text.g
        generate text.g -little > littleoutput

     Here we assume the hypothetical program @{b}generate@{ub} makes two types
     of output, one if given @{b}-big@{ub} and one if given @{b}-little@{ub}.  See
     @{"Functions for String Substitution and Analysis" Link "Text Functions"}, for an explanation
     of the @{b}subst@{ub} function.

   Suppose you would like to vary the dependencies according to the
target, much as the variable @{b} $@@{ub} allows you to vary the commands.  You
cannot do this with multiple targets in an ordinary rule, but you can
do it with a @{i}static pattern rule@{ui}.  See @{"Static Pattern Rules" Link "Static Pattern"}.


@EndNode

@Node "Multiple Rules" "make.guide/Multiple Rules"
@Next "Static Pattern"
@Prev "Multiple Targets"
@Toc "Rules"

Multiple Rules for One Target
=============================

   One file can be the target of several rules.  All the dependencies
mentioned in all the rules are merged into one list of dependencies for
the target.  If the target is older than any dependency from any rule,
the commands are executed.

   There can only be one set of commands to be executed for a file.  If
more than one rule gives commands for the same file, @{b}make@{ub} uses the last
set given and prints an error message.  (As a special case, if the
file's name begins with a dot, no error message is printed.  This odd
behavior is only for compatibility with other implementations of @{b}make@{ub}.)
There is no reason to write your makefiles this way; that is why @{b}make@{ub}
gives you an error message.

   An extra rule with just dependencies can be used to give a few extra
dependencies to many files at once.  For example, one usually has a
variable named @{b}objects@{ub} containing a list of all the compiler output
files in the system being made.  An easy way to say that all of them
must be recompiled if @{b}config.h@{ub} changes is to write the following:

     objects = foo.o bar.o
foo.o : defs.h
bar.o : defs.h test.h
$(objects) : config.h

   This could be inserted or taken out without changing the rules that
really specify how to make the object files, making it a convenient
form to use if you wish to add the additional dependency intermittently.

   Another wrinkle is that the additional dependencies could be
specified with a variable that you set with a command argument to @{b}make@{ub}
(see @{"Overriding Variables" Link "Overriding"}).  For example,

     extradeps=
$(objects) : $(extradeps)

means that the command @{b}make extradeps=foo.h@{ub} will consider @{b}foo.h@{ub} as a
dependency of each object file, but plain @{b}make@{ub} will not.

   If none of the explicit rules for a target has commands, then @{b}make@{ub}
searches for an applicable implicit rule to find some commands see
@{"Using Implicit Rules" Link "Implicit Rules"}).


@EndNode

@Node "Static Pattern" "make.guide/Static Pattern"
@Next "Double-Colon"
@Prev "Multiple Rules"
@Toc "Rules"

Static Pattern Rules
====================

   @{i}Static pattern rules@{ui} are rules which specify multiple targets and
construct the dependency names for each target based on the target name.
They are more general than ordinary rules with multiple targets because
the targets do not have to have identical dependencies.  Their
dependencies must be @{i}analogous@{ui}, but not necessarily @{i}identical@{ui}.


 @{" Static Usage              " Link "Static Usage"}  The syntax of static pattern rules.
 @{" Static versus Implicit    " Link "Static versus Implicit"}  When are they better than implicit rules?


@EndNode

@Node "Static Usage" "make.guide/Static Usage"
@Next "Static versus Implicit"
@Toc "Static Pattern"

Syntax of Static Pattern Rules
------------------------------

   Here is the syntax of a static pattern rule:

     @{I}TARGETS@{ui} ...: @{I}TARGET-PATTERN@{ui}: @{I}DEP-PATTERNS@{ui} ...
        @{I}COMMANDS@{ui}
        ...

The @{I}TARGETS@{ui} list specifies the targets that the rule applies to.  The
targets can contain wildcard characters, just like the targets of
ordinary rules (see @{"Using Wildcard Characters in File Names" Link "Wildcards"}).

   The @{I}TARGET-PATTERN@{ui} and @{I}DEP-PATTERNS@{ui} say how to compute the
dependencies of each target.  Each target is matched against the
@{I}TARGET-PATTERN@{ui} to extract a part of the target name, called the
@{i}stem@{ui}.  This stem is substituted into each of the @{I}DEP-PATTERNS@{ui} to
make the dependency names (one from each @{I}DEP-PATTERN@{ui}).

   Each pattern normally contains the character @{b}%@{ub} just once.  When the
@{I}TARGET-PATTERN@{ui} matches a target, the @{b}%@{ub} can match any part of
the target name; this part is called the @{i}stem@{ui}.  The rest of the pattern
must match exactly.  For example, the target @{b}foo.o@{ub} matches the pattern
@{b}%.o@{ub}, with @{b}foo@{ub} as the stem.  The targets @{b}foo.c@{ub} and @{b}foo.out@{ub} do
not match that pattern.

   The dependency names for each target are made by substituting the
stem for the @{b}%@{ub} in each dependency pattern.  For example, if one
dependency pattern is @{b}%.c@{ub}, then substitution of the stem @{b}foo@{ub} gives the
dependency name @{b}foo.c@{ub}.  It is legitimate to write a dependency pattern
that does not contain @{b}%@{ub}; then this dependency is the same for all
targets.

   @{b}%@{ub} characters in pattern rules can be quoted with preceding
backslashes (@{b}\\ @{ub}).  Backslashes that would otherwise quote @{b}%@{ub} characters
can be quoted with more backslashes.  Backslashes that quote @{b}%@{ub}
characters or other backslashes are removed from the pattern before it
is compared to file names or has a stem substituted into it.
Backslashes that are not in danger of quoting @{b}%@{ub} characters go
unmolested.  For example, the pattern @{b}the\\%weird\\\\%pattern\\\\ @{ub} has @{b}the%weird\\
@{ub} preceding the operative @{b}%@{ub} character, and @{b}pattern\\\\ @{ub} following it.
The final two backslashes are left alone because they cannot affect
any @{b}%@{ub} character.

   Here is an example, which compiles each of @{b}foo.o@{ub} and @{b}bar.o@{ub} from the
corresponding @{b}.c@{ub} file:

     objects = foo.o bar.o

all: $(objects)

$(objects): %.o: %.c
        $(CC) -c $(CFLAGS) $< -o $@

Here @{b}$<@{ub} is the automatic variable that holds the name of the dependency
and @{b} $@@{ub} is the automatic variable that holds the name of the target;
see @{"Automatic Variables" Link "Automatic"}.

   Each target specified must match the target pattern; a warning is
issued for each target that does not.  If you have a list of files,
only some of which will match the pattern, you can use the @{b}filter@{ub}
function to remove nonmatching file names (see
@{"Functions for String Substitution and Analysis" Link "Text Functions"}):

     files = foo.elc bar.o lose.o

$(filter %.o,$(files)): %.o: %.c
        $(CC) -c $(CFLAGS) $< -o $@
$(filter %.elc,$(files)): %.elc: %.el
        emacs -f batch-byte-compile $<

In this example the result of @{b}$(filter %.o,$(files))@{ub} is @{b}bar.o lose.o@{ub},
and the first static pattern rule causes each of these object files to
be updated by compiling the corresponding C source file.  The result of
@{b}$(filter %.elc,$(files))@{ub} is @{b}foo.elc@{ub}, so that file is made from
@{b}foo.el@{ub}.

   Another example shows how to use @{b}$*@{ub} in static pattern rules:

     bigoutput littleoutput : %output : text.g
        generate text.g -$* > $@

When the @{b}generate@{ub} command is run, @{b}$*@{ub} will expand to the stem, either
@{b}big@{ub} or @{b}little@{ub}.


@EndNode

@Node "Static versus Implicit" "make.guide/Static versus Implicit"
@Prev "Static Usage"
@Toc "Static Pattern"

Static Pattern Rules versus Implicit Rules
------------------------------------------

   A static pattern rule has much in common with an implicit rule
defined as a pattern rule (see @{"Defining and Redefining Pattern Rules" Link "Pattern Rules"}).
Both have a pattern for the target and patterns for constructing the
names of dependencies.  The difference is in how @{b}make@{ub} decides @{i}when@{ui} the
rule applies.

   An implicit rule @{i}can@{ui} apply to any target that matches its pattern,
but it @{i}does@{ui} apply only when the target has no commands otherwise
specified, and only when the dependencies can be found.  If more than
one implicit rule appears applicable, only one applies; the choice
depends on the order of rules.

   By contrast, a static pattern rule applies to the precise list of
targets that you specify in the rule.  It cannot apply to any other
target and it invariably does apply to each of the targets specified.
If two conflicting rules apply, and both have commands, that's an error.

   The static pattern rule can be better than an implicit rule for these
reasons:

   @{b}*@{ub} You may wish to override the usual implicit rule for a few files
     whose names cannot be categorized syntactically but can be given
     in an explicit list.

   @{b}*@{ub} If you cannot be sure of the precise contents of the directories
     you are using, you may not be sure which other irrelevant files
     might lead @{b}make@{ub} to use the wrong implicit rule.  The choice might
     depend on the order in which the implicit rule search is done.
     With static pattern rules, there is no uncertainty: each rule
     applies to precisely the targets specified.


@EndNode

@Node "Double-Colon" "make.guide/Double-Colon"
@Next "Automatic Dependencies"
@Prev "Static Pattern"
@Toc "Rules"

Double-Colon Rules
==================

   @{i}Double-colon@{ui} rules are rules written with @{b}::@{ub} instead of @{b}:@{ub} after the
target names.  They are handled differently from ordinary rules when
the same target appears in more than one rule.

   When a target appears in multiple rules, all the rules must be the
same type: all ordinary, or all double-colon.  If they are
double-colon, each of them is independent of the others.  Each
double-colon rule's commands are executed if the target is older than
any dependencies of that rule.  This can result in executing none, any,
or all of the double-colon rules.

   Double-colon rules with the same target are in fact completely
separate from one another.  Each double-colon rule is processed
individually, just as rules with different targets are processed.

   The double-colon rules for a target are executed in the order they
appear in the makefile.  However, the cases where double-colon rules
really make sense are those where the order of executing the commands
would not matter.

   Double-colon rules are somewhat obscure and not often very useful;
they provide a mechanism for cases in which the method used to update a
target differs depending on which dependency files caused the update,
and such cases are rare.

   Each double-colon rule should specify commands; if it does not, an
implicit rule will be used if one applies.  See @{"Using Implicit Rules" Link "Implicit Rules"}.


@EndNode

@Node "Automatic Dependencies" "make.guide/Automatic Dependencies"
@Prev "Double-Colon"
@Toc "Rules"

Generating Dependencies Automatically
=====================================

   In the makefile for a program, many of the rules you need to write
often say only that some object file depends on some header file.  For
example, if @{b}main.c@{ub} uses @{b}defs.h@{ub} via an @{b}#include@{ub}, you would write:

     main.o: defs.h

You need this rule so that @{b}make@{ub} knows that it must remake @{b}main.o@{ub}
whenever @{b}defs.h@{ub} changes.  You can see that for a large program you
would have to write dozens of such rules in your makefile.  And, you
must always be very careful to update the makefile every time you add
or remove an @{b}#include@{ub}.

   To avoid this hassle, most modern C compilers can write these rules
for you, by looking at the @{b}#include@{ub} lines in the source files.  Usually
this is done with the @{b}-M@{ub} option to the compiler.  For example, the
command:

     cc -M main.c

generates the output:

     main.o : main.c defs.h

Thus you no longer have to write all those rules yourself.  The
compiler will do it for you.

   Note that such a dependency constitutes mentioning @{b}main.o@{ub} in a
makefile, so it can never be considered an intermediate file by implicit
rule search.  This means that @{b}make@{ub} won't ever remove the file after
using it; see @{"Chains of Implicit Rules" Link "Chained Rules"}.

   With old @{b}make@{ub} programs, it was traditional practice to use this
compiler feature to generate dependencies on demand with a command like @{b}make
depend@{ub}.  That command would create a file @{b}depend@{ub} containing all
the automatically-generated dependencies; then the makefile could use
@{b}include@{ub} to read them in (see @{"Include" Link "Include"}).

   In GNU @{b}make@{ub}, the feature of remaking makefiles makes this practice
obsolete--you need never tell @{b}make@{ub} explicitly to regenerate the
dependencies, because it always regenerates any makefile that is out of
date.  See @{"Remaking Makefiles" Link "Remaking Makefiles"}.

   The practice we recommend for automatic dependency generation is to
have one makefile corresponding to each source file.  For each source
file @{b}@{I}NAME@{ui}.c@{ub} there is a makefile @{b}@{I}NAME@{ui}.d@{ub} which lists what files the
object file @{b}@{I}NAME@{ui}.o@{ub} depends on.  That way only the source files that
have changed need to be rescanned to produce the new dependencies.

   Here is the pattern rule to generate a file of dependencies (i.e., a
makefile) called @{b}@{I}NAME@{ui}.d@{ub} from a C source file called @{b}@{I}NAME@{ui}.c@{ub}:

     %.d: %.c
        $(SHELL) -ec '$(CC) -M $(CPPFLAGS) $< \\
                      | sed '\\''s/\\($*\\)\\.o[ :]*/\\1.o $@ : /g'\\'' > $@; \\
                      [ -s $@ ] || rm -f $@'

See @{"Pattern Rules" Link "Pattern Rules"}, for information on defining pattern rules.  The @{b}-e@{ub}
flag to the shell makes it exit immediately if the @{b}$(CC)@{ub} command fails
(exits with a nonzero status).  Normally the shell exits with the
status of the last command in the pipeline (@{b}sed@{ub} in this case), so @{b}make@{ub}
would not notice a nonzero status from the compiler.

   With the GNU C compiler, you may wish to use the @{b}-MM@{ub} flag instead of
@{b}-M@{ub}.  This omits dependencies on system header files.  See
@{"Options Controlling the Preprocessor" Link "gcc.guide/Preprocessor Options"}, for details.

   The purpose of the @{b}sed@{ub} command is to translate (for example):

     main.o : main.c defs.h

into:

     main.o main.d : main.c defs.h

This makes each @{b}.d@{ub} file depend on all the source and header files that
the corresponding @{b}.o@{ub} file depends on.  @{b}make@{ub} then knows it must
regenerate the dependencies whenever any of the source or header files
changes.

   Once you've defined the rule to remake the @{b}.d@{ub} files, you then use
the @{b}include@{ub} directive to read them all in.  See @{"Include" Link "Include"}.  For example:

     sources = foo.c bar.c

include $(sources:.c=.d)

(This example uses a substitution variable reference to translate the
list of source files @{b}foo.c bar.c@{ub} into a list of dependency makefiles, @{b}foo.d
bar.d@{ub}.  See @{"Substitution Refs" Link "Substitution Refs"}, for full information on
substitution references.)  Since the @{b}.d@{ub} files are makefiles like any
others, @{b}make@{ub} will remake them as necessary with no further work from
you.  See @{"Remaking Makefiles" Link "Remaking Makefiles"}.


@EndNode

@Node "Commands" "make.guide/Commands"
@Next "Using Variables"
@Prev "Rules"
@Toc "Main"

Writing the Commands in Rules
*****************************

   The commands of a rule consist of shell command lines to be executed
one by one.  Each command line must start with a tab, except that the
first command line may be attached to the target-and-dependencies line
with a semicolon in between.  Blank lines and lines of just comments
may appear among the command lines; they are ignored.  (But beware, an
apparently "blank" line that begins with a tab is @{i}not@{ui} blank!  It is an
empty command; see @{"Empty Commands" Link "Empty Commands"}.)

   Users use many different shell programs, but commands in makefiles
are always interpreted by @{b}/bin/sh@{ub} unless the makefile specifies
otherwise.  See @{"Command Execution" Link "Execution"}.

   The shell that is in use determines whether comments can be written
on command lines, and what syntax they use.  When the shell is @{b}/bin/sh@{ub},
a @{b}#@{ub} starts a comment that extends to the end of the line.  The @{b}#@{ub} does
not have to be at the beginning of a line.  Text on a line before a @{b}#@{ub}
is not part of the comment.


 @{" Echoing                   " Link "Echoing"}  How to control when commands are echoed.
 @{" Execution                 " Link "Execution"}  How commands are executed.
 @{" Parallel                  " Link "Parallel"}  How commands can be executed in parallel.
 @{" Errors                    " Link "Errors"}  What happens after a command execution error.
 @{" Interrupts                " Link "Interrupts"}  What happens when a command is interrupted.
 @{" Recursion                 " Link "Recursion"}  Invoking @{b}make@{ub} from makefiles.
 @{" Sequences                 " Link "Sequences"}  Defining canned sequences of commands.
 @{" Empty Commands            " Link "Empty Commands"}  Defining useful, do-nothing commands.


@EndNode

@Node "Echoing" "make.guide/Echoing"
@Next "Execution"
@Toc "Commands"

Command Echoing
===============

   Normally @{b}make@{ub} prints each command line before it is executed.  We
call this @{i}echoing@{ui} because it gives the appearance that you are typing
the commands yourself.

   When a line starts with @{b} @@{ub}, the echoing of that line is suppressed.
The @{b} @@{ub} is discarded before the command is passed to the shell.
Typically you would use this for a command whose only effect is to print
something, such as an @{b}echo@{ub} command to indicate progress through the
makefile:

     @echo About to make distribution files

   When @{b}make@{ub} is given the flag @{b}-n@{ub} or @{b}--just-print@{ub}, echoing is all that
happens, no execution.  See @{"Summary of Options" Link "Options Summary"}.  In this case and only
this case, even the commands starting with @{b} @@{ub} are printed.  This flag
is useful for finding out which commands @{b}make@{ub} thinks are necessary
without actually doing them.

   The @{b}-s@{ub} or @{b}--silent@{ub} flag to @{b}make@{ub} prevents all echoing, as if all
commands started with @{b} @@{ub}.  A rule in the makefile for the special target
@{b}.SILENT@{ub} without dependencies has the same effect (see
@{"Special Built-in Target Names" Link "Special Targets"}).  @{b}.SILENT@{ub} is essentially obsolete since @{b}
@@{ub} is more flexible.


@EndNode

@Node "Execution" "make.guide/Execution"
@Next "Parallel"
@Prev "Echoing"
@Toc "Commands"

Command Execution
=================

   When it is time to execute commands to update a target, they are
executed by making a new subshell for each line.  (In practice, @{b}make@{ub} may
take shortcuts that do not affect the results.)

   @{i}Please note:@{ui} this implies that shell commands such as @{b}cd@{ub} that set
variables local to each process will not affect the following command
lines. (1)  If you want to use @{b}cd@{ub} to affect the next command, put the
two on a single line with a semicolon between them.  Then @{b}make@{ub} will
consider them a single command and pass them, together, to a shell
which will execute them in sequence.  For example:

     foo : bar/lose
        cd bar; gobble lose > ../foo

   If you would like to split a single shell command into multiple
lines of text, you must use a backslash at the end of all but the last
subline.  Such a sequence of lines is combined into a single line, by
deleting the backslash-newline sequences, before passing it to the
shell.  Thus, the following is equivalent to the preceding example:

     foo : bar/lose
        cd bar;  \\
        gobble lose > ../foo

   The program used as the shell is taken from the variable @{b}SHELL@{ub}.  By
default, the program @{b}/bin/sh@{ub} is used.

   On MS-DOS, if @{b}SHELL@{ub} is not set, the value of the variable @{b}COMSPEC@{ub}
(which is always set) is used instead.

   The processing of lines that set the variable @{b}SHELL@{ub} in Makefiles is
different on MS-DOS.  The stock shell, @{b}command.com@{ub}, is ridiculously
limited in its functionality and many users of @{b}make@{ub} tend to install a
replacement shell.  Therefore, on MS-DOS, @{b}make@{ub} examines the value of
@{b}SHELL@{ub}, and changes its behavior based on whether it points to
a Unix-style or DOS-style shell.  This allows reasonable functionality
even if @{b}SHELL@{ub} points to @{b}command.com@{ub}.

   If @{b}SHELL@{ub} points to a Unix-style shell, @{b}make@{ub} on MS-DOS additionally
checks whether that shell can indeed be found; if not, it ignores the
line that sets @{b}SHELL@{ub}.  In MS-DOS, GNU @{b}make@{ub} searches for the shell in
the following places:

  1. In the precise place pointed to by the value of @{b}SHELL@{ub}.  For
     example, if the makefile specifies @{b}SHELL = /bin/sh@{ub}, @{b}make@{ub} will look
     in the directory @{b}/bin@{ub} on the current drive.

  2. In the current directory.

  3. In each of the directories in the @{b}PATH@{ub} variable, in order.


   In every directory it examines, @{b}make@{ub} will first look for the
specific file (@{b}sh@{ub} in the example above).  If this is not found, it will
also look in that directory for that file with one of the known
extensions which identify executable files.  For example @{b}.exe@{ub}, @{b}.com@{ub},
@{b}.bat@{ub}, @{b}.btm@{ub}, @{b}.sh@{ub}, and some others.

   If any of these attempts is successful, the value of @{b}SHELL@{ub} will be
set to the full pathname of the shell as found.  However, if none of
these is found, the value of @{b}SHELL@{ub} will not be changed, and thus the
line that sets it will be effectively ignored.  This is so @{b}make@{ub} will
only support features specific to a Unix-style shell if such a shell is
actually installed on the system where @{b}make@{ub} runs.

   Note that this extended search for the shell is limited to the cases
where @{b}SHELL@{ub} is set from the Makefile; if it is set in the environment
or command line, you are expected to set it to the full pathname of the
shell, exactly as things are on Unix.

   The effect of the above DOS-specific processing is that a Makefile
that says @{b}SHELL = /bin/sh@{ub} (as many Unix makefiles do), will work on
MS-DOS unaltered if you have e.g. @{b}sh.exe@{ub} installed in some directory
along your @{b}PATH@{ub}.

   Unlike most variables, the variable @{b}SHELL@{ub} is never set from the
environment.  This is because the @{b}SHELL@{ub} environment variable is used to
specify your personal choice of shell program for interactive use.  It
would be very bad for personal choices like this to affect the
functioning of makefiles.  See @{"Variables from the Environment" Link "Environment"}.
However, on MS-DOS and MS-Windows the value of @{b}SHELL@{ub} in the environment
@{i}is@{ui} used, since on those systems most users do not set this
variable, and therefore it is most likely set specifically to be used
by @{b}make@{ub}.  On MS-DOS, if the setting of @{b}SHELL@{ub} is not suitable for @{b}make@{ub},
you can set the variable @{b}MAKESHELL@{ub} to the shell that @{b}make@{ub} should use;
this will override the value of @{b}SHELL@{ub}.

   ---------- Footnotes ----------

   (1)  On MS-DOS, the value of current working directory is @{i}global@{ui}, so
changing it @{i}will@{ui} affect the following command lines on those systems.


@EndNode

@Node "Parallel" "make.guide/Parallel"
@Next "Errors"
@Prev "Execution"
@Toc "Commands"

Parallel Execution
==================

   GNU @{b}make@{ub} knows how to execute several commands at once.  Normally,
@{b}make@{ub} will execute only one command at a time, waiting for it
to finish before executing the next.  However, the @{b}-j@{ub} or @{b}--jobs@{ub} option
tells @{b}make@{ub} to execute many commands simultaneously.

   On MS-DOS, the @{b}-j@{ub} option has no effect, since that system doesn't
support multi-processing.

   If the @{b}-j@{ub} option is followed by an integer, this is the number of
commands to execute at once; this is called the number of @{i}job slots@{ui}.
If there is nothing looking like an integer after the @{b}-j@{ub} option, there
is no limit on the number of job slots.  The default number of job
slots is one, which means serial execution (one thing at a time).

   One unpleasant consequence of running several commands
simultaneously is that output from all of the commands comes when the
commands send it, so messages from different commands may be
interspersed.

   Another problem is that two processes cannot both take input from the
same device; so to make sure that only one command tries to take input
from the terminal at once, @{b}make@{ub} will invalidate the standard input
streams of all but one running command.  This means that attempting to
read from standard input will usually be a fatal error (a @{b}Broken pipe@{ub}
signal) for most child processes if there are several.

   It is unpredictable which command will have a valid standard input
stream (which will come from the terminal, or wherever you redirect the
standard input of @{b}make@{ub}).  The first command run will always get it
first, and the first command started after that one finishes will get
it next, and so on.

   We will change how this aspect of @{b}make@{ub} works if we find a better
alternative.  In the mean time, you should not rely on any command using
standard input at all if you are using the parallel execution feature;
but if you are not using this feature, then standard input works
normally in all commands.

   If a command fails (is killed by a signal or exits with a nonzero
status), and errors are not ignored for that command (see
@{"Errors in Commands" Link "Errors"}), the remaining command lines to remake the same
target will not be run.  If a command fails and the @{b}-k@{ub} or @{b}--keep-going@{ub}
option was not given (see @{"Summary of Options" Link "Options Summary"}), @{b}make@{ub} aborts execution.
If make terminates for any reason (including a signal) with child
processes running, it waits for them to finish before actually exiting.

   When the system is heavily loaded, you will probably want to run
fewer jobs than when it is lightly loaded.  You can use the @{b}-l@{ub} option
to tell @{b}make@{ub} to limit the number of jobs to run at once, based on the
load average.  The @{b}-l@{ub} or @{b}--max-load@{ub} option is followed by a
floating-point number.  For example,

     -l 2.5

will not let @{b}make@{ub} start more than one job if the load average is above
2.5.  The @{b}-l@{ub} option with no following number removes the load limit, if
one was given with a previous @{b}-l@{ub} option.

   More precisely, when @{b}make@{ub} goes to start up a job, and it already has
at least one job running, it checks the current load average; if it is
not lower than the limit given with @{b}-l@{ub}, @{b}make@{ub} waits until the load
average goes below that limit, or until all the other jobs finish.

   By default, there is no load limit.


@EndNode

@Node "Errors" "make.guide/Errors"
@Next "Interrupts"
@Prev "Parallel"
@Toc "Commands"

Errors in Commands
==================

   After each shell command returns, @{b}make@{ub} looks at its exit status.  If
the command completed successfully, the next command line is executed
in a new shell; after the last command line is finished, the rule is
finished.

   If there is an error (the exit status is nonzero), @{b}make@{ub} gives up on
the current rule, and perhaps on all rules.

   Sometimes the failure of a certain command does not indicate a
problem.  For example, you may use the @{b}mkdir@{ub} command to ensure that a
directory exists.  If the directory already exists, @{b}mkdir@{ub} will report
an error, but you probably want @{b}make@{ub} to continue regardless.

   To ignore errors in a command line, write a @{b}-@{ub} at the beginning of
the line's text (after the initial tab).  The @{b}-@{ub} is discarded before the
command is passed to the shell for execution.

   For example,

     clean:
        -rm -f *.o

This causes @{b}rm@{ub} to continue even if it is unable to remove a file.

   When you run @{b}make@{ub} with the @{b}-i@{ub} or @{b}--ignore-errors@{ub} flag, errors are
ignored in all commands of all rules.  A rule in the makefile for the
special target @{b}.IGNORE@{ub} has the same effect, if there are no
dependencies.  These ways of ignoring errors are obsolete because @{b}-@{ub} is
more flexible.

   When errors are to be ignored, because of either a @{b}-@{ub} or the @{b}-i@{ub} flag,
@{b}make@{ub} treats an error return just like success, except that it
prints out a message that tells you the status code the command exited
with, and says that the error has been ignored.

   When an error happens that @{b}make@{ub} has not been told to ignore, it
implies that the current target cannot be correctly remade, and neither
can any other that depends on it either directly or indirectly.  No
further commands will be executed for these targets, since their
preconditions have not been achieved.

   Normally @{b}make@{ub} gives up immediately in this circumstance, returning a
nonzero status.  However, if the @{b}-k@{ub} or @{b}--keep-going@{ub} flag is specified, @{b}make@{ub}
continues to consider the other dependencies of the pending targets,
remaking them if necessary, before it gives up and returns nonzero
status.  For example, after an error in compiling one object file, @{b}make -k@{ub}
will continue compiling other object files even though it already knows
that linking them will be impossible.  See @{"Summary of Options" Link "Options Summary"}.

   The usual behavior assumes that your purpose is to get the specified
targets up to date; once @{b}make@{ub} learns that this is impossible, it might
as well report the failure immediately.  The @{b}-k@{ub} option says that the
real purpose is to test as many of the changes made in the program as
possible, perhaps to find several independent problems so that you can
correct them all before the next attempt to compile.  This is why
Emacs' @{b}compile@{ub} command passes the @{b}-k@{ub} flag by default.

   Usually when a command fails, if it has changed the target file at
all, the file is corrupted and cannot be used--or at least it is not
completely updated.  Yet the file's timestamp says that it is now up to
date, so the next time @{b}make@{ub} runs, it will not try to update that file.
The situation is just the same as when the command is killed by a
signal; see @{"Interrupts" Link "Interrupts"}.  So generally the right thing to do is to
delete the target file if the command fails after beginning to change
the file.  @{b}make@{ub} will do this if @{b}.DELETE_ON_ERROR@{ub} appears as a target.
This is almost always what you want @{b}make@{ub} to do, but it is not
historical practice; so for compatibility, you must explicitly request
it.


@EndNode

@Node "Interrupts" "make.guide/Interrupts"
@Next "Recursion"
@Prev "Errors"
@Toc "Commands"

Interrupting or Killing @{b}make@{ub}
============================

   If @{b}make@{ub} gets a fatal signal while a command is executing, it may
delete the target file that the command was supposed to update.  This is
done if the target file's last-modification time has changed since @{b}make@{ub}
first checked it.

   The purpose of deleting the target is to make sure that it is remade
from scratch when @{b}make@{ub} is next run.  Why is this?  Suppose you type
@{b}Ctrl-c@{ub} while a compiler is running, and it has begun to write
an object file @{b}foo.o@{ub}.  The @{b}Ctrl-c@{ub} kills the compiler, resulting in an
incomplete file whose last-modification time is newer than the source
file @{b}foo.c@{ub}.  But @{b}make@{ub} also receives the @{b}Ctrl-c@{ub} signal and deletes this
incomplete file.  If @{b}make@{ub} did not do this, the next invocation of @{b}make@{ub}
would think that @{b}foo.o@{ub} did not require updating--resulting in a strange
error message from the linker when it tries to link an object file half
of which is missing.

   You can prevent the deletion of a target file in this way by making
the special target @{b}.PRECIOUS@{ub} depend on it.  Before remaking a target,
@{b}make@{ub} checks to see whether it appears on the dependencies of
@{b}.PRECIOUS@{ub}, and thereby decides whether the target should be
deleted if a signal happens.  Some reasons why you might do this are
that the target is updated in some atomic fashion, or exists only to
record a modification-time (its contents do not matter), or must exist
at all times to prevent other sorts of trouble.


@EndNode

@Node "Recursion" "make.guide/Recursion"
@Next "Sequences"
@Prev "Interrupts"
@Toc "Commands"

Recursive Use of @{b}make@{ub}
=====================

   Recursive use of @{b}make@{ub} means using @{b}make@{ub} as a command in a makefile.
This technique is useful when you want separate makefiles for various
subsystems that compose a larger system.  For example, suppose you have
a subdirectory @{b}subdir@{ub} which has its own makefile, and you would like
the containing directory's makefile to run @{b}make@{ub} on the subdirectory.
You can do it by writing this:

     subsystem:
        cd subdir && $(MAKE)

or, equivalently, this (see @{"Summary of Options" Link "Options Summary"}):

     subsystem:
        $(MAKE) -C subdir

   You can write recursive @{b}make@{ub} commands just by copying this example,
but there are many things to know about how they work and why, and about
how the sub-@{b}make@{ub} relates to the top-level @{b}make@{ub}.


 @{" MAKE Variable             " Link "MAKE Variable"}  The special effects of using @{b}$(MAKE)@{ub}.
 @{" Variables-Recursion       " Link "Variables-Recursion"}  How to communicate variables to a sub-@{b}make@{ub}.
 @{" Options-Recursion         " Link "Options-Recursion"}  How to communicate options to a sub-@{b}make@{ub}.
 @{" -w Option                 " Link "-w Option"}  How the @{b}-w@{ub} or @{b}--print-directory@{ub} option
                                 helps debug use of recursive @{b}make@{ub} commands.


@EndNode

@Node "MAKE Variable" "make.guide/MAKE Variable"
@Next "Variables-Recursion"
@Toc "Recursion"

How the @{b}MAKE@{ub} Variable Works
---------------------------

   Recursive @{b}make@{ub} commands should always use the variable @{b}MAKE@{ub}, not the
explicit command name @{b}make@{ub}, as shown here:

     subsystem:
        cd subdir && $(MAKE)

   The value of this variable is the file name with which @{b}make@{ub} was
invoked.  If this file name was @{b}/bin/make@{ub}, then the command executed is @{b}cd subdir &&
/bin/make@{ub}.  If you use a special version of @{b}make@{ub} to run the
top-level makefile, the same special version will be executed for
recursive invocations.

   As a special feature, using the variable @{b}MAKE@{ub} in the commands of a
rule alters the effects of the @{b}-t@{ub} (@{b}--touch@{ub}), @{b}-n@{ub} (@{b}--just-print@{ub}), or @{b}-q@{ub}
(@{b}--question@{ub}) option.  Using the @{b}MAKE@{ub} variable has the same
effect as using a @{b}+@{ub} character at the beginning of the command line.
See @{"Instead of Executing the Commands" Link "Instead of Execution"}.

   Consider the command @{b}make -t@{ub} in the above example.  (The @{b}-t@{ub} option
marks targets as up to date without actually running any commands; see
@{"Instead of Execution" Link "Instead of Execution"}.)  Following the usual definition of @{b}-t@{ub}, a @{b}make -t@{ub}
command in the example would create a file named @{b}subsystem@{ub} and do
nothing else.  What you really want it to do is run @{b}cd subdir &&
make -t@{ub}; but that would require executing the command, and @{b}-t@{ub} says
not to execute commands.

   The special feature makes this do what you want: whenever a command
line of a rule contains the variable @{b}MAKE@{ub}, the flags @{b}-t@{ub}, @{b}-n@{ub} and @{b}-q@{ub} do
not apply to that line.  Command lines containing @{b}MAKE@{ub} are executed
normally despite the presence of a flag that causes most commands not
to be run.  The usual @{b}MAKEFLAGS@{ub} mechanism passes the flags to the sub-@{b}make@{ub}
(see @{"Communicating Options to a Sub-make" Link "Options-Recursion"}), so your request to touch the
files, or print the commands, is propagated to the subsystem.


@EndNode

@Node "Variables-Recursion" "make.guide/Variables-Recursion"
@Next "Options-Recursion"
@Prev "MAKE Variable"
@Toc "Recursion"

Communicating Variables to a Sub-@{b}make@{ub}
-------------------------------------

   Variable values of the top-level @{b}make@{ub} can be passed to the sub-@{b}make@{ub}
through the environment by explicit request.  These variables are
defined in the sub-@{b}make@{ub} as defaults, but do not override what is
specified in the makefile used by the sub-@{b}make@{ub} makefile unless you use
the @{b}-e@{ub} switch (see @{"Summary of Options" Link "Options Summary"}).

   To pass down, or @{i}export@{ui}, a variable, @{b}make@{ub} adds the variable and its
value to the environment for running each command.  The sub-@{b}make@{ub}, in
turn, uses the environment to initialize its table of variable values.
See @{"Variables from the Environment" Link "Environment"}.

   Except by explicit request, @{b}make@{ub} exports a variable only if it is
either defined in the environment initially or set on the command line,
and if its name consists only of letters, numbers, and underscores.
Some shells cannot cope with environment variable names consisting of
characters other than letters, numbers, and underscores.

   The special variables @{b}SHELL@{ub} and @{b}MAKEFLAGS@{ub} are always exported
(unless you unexport them).  @{b}MAKEFILES@{ub} is exported if you set it to
anything.

   @{b}make@{ub} automatically passes down variable values that were defined on
the command line, by putting them in the @{b}MAKEFLAGS@{ub} variable.  See
@{"Options-Recursion" Link "Options-Recursion"}.

   Variables are @{i}not@{ui} normally passed down if they were created by
default by @{b}make@{ub} (see @{"Variables Used by Implicit Rules" Link "Implicit Variables"}).  The sub-@{b}make@{ub}
will define these for itself.

   If you want to export specific variables to a sub-@{b}make@{ub}, use the
@{b}export@{ub} directive, like this:

     export @{I}VARIABLE@{ui} ...

If you want to @{i}prevent@{ui} a variable from being exported, use the @{b}unexport@{ub}
directive, like this:

     unexport @{I}VARIABLE@{ui} ...

As a convenience, you can define a variable and export it at the same
time by doing:

     export @{I}VARIABLE@{ui} = value

has the same result as:

     @{I}VARIABLE@{ui} = value
export @{I}VARIABLE@{ui}

and

     export @{I}VARIABLE@{ui} := value

has the same result as:

     @{I}VARIABLE@{ui} := value
export @{I}VARIABLE@{ui}

   Likewise,

     export @{I}VARIABLE@{ui} += value

is just like:

     @{I}VARIABLE@{ui} += value
export @{I}VARIABLE@{ui}

See @{"Appending More Text to Variables" Link "Appending"}.

   You may notice that the @{b}export@{ub} and @{b}unexport@{ub} directives work in @{b}make@{ub}
in the same way they work in the shell, @{b}sh@{ub}.

   If you want all variables to be exported by default, you can use
@{b}export@{ub} by itself:

     export

This tells @{b}make@{ub} that variables which are not explicitly mentioned in an
@{b}export@{ub} or @{b}unexport@{ub} directive should be exported.  Any variable
given in an @{b}unexport@{ub} directive will still @{i}not@{ui} be exported.  If you use
@{b}export@{ub} by itself to export variables by default, variables
whose names contain characters other than alphanumerics and underscores
will not be exported unless specifically mentioned in an @{b}export@{ub}
directive.

   The behavior elicited by an @{b}export@{ub} directive by itself was the
default in older versions of GNU @{b}make@{ub}.  If your makefiles depend on
this behavior and you want to be compatible with old versions of @{b}make@{ub},
you can write a rule for the special target @{b}.EXPORT_ALL_VARIABLES@{ub}
instead of using the @{b}export@{ub} directive.  This will be ignored by old
@{b}make@{ub}s, while the @{b}export@{ub} directive will cause a syntax error.

   Likewise, you can use @{b}unexport@{ub} by itself to tell @{b}make@{ub} @{i}not@{ui} to export
variables by default.  Since this is the default behavior, you would
only need to do this if @{b}export@{ub} had been used by itself earlier (in an
included makefile, perhaps).  You @{i}cannot@{ui} use @{b}export@{ub} and @{b}unexport@{ub} by
themselves to have variables exported for some commands and not for
others.  The last @{b}export@{ub} or @{b}unexport@{ub} directive that appears by itself
determines the behavior for the entire run of @{b}make@{ub}.

   As a special feature, the variable @{b}MAKELEVEL@{ub} is changed when it is
passed down from level to level.  This variable's value is a string
which is the depth of the level as a decimal number.  The value is @{b}0@{ub}
for the top-level @{b}make@{ub}; @{b}1@{ub} for a sub-@{b}make@{ub}, @{b}2@{ub} for a sub-sub-@{b}make@{ub}, and so
on.  The incrementation happens when @{b}make@{ub} sets up the environment for a
command.

   The main use of @{b}MAKELEVEL@{ub} is to test it in a conditional directive
(see @{"Conditional Parts of Makefiles" Link "Conditionals"}); this way you can write a makefile
that behaves one way if run recursively and another way if run directly
by you.

   You can use the variable @{b}MAKEFILES@{ub} to cause all sub-@{b}make@{ub} commands to
use additional makefiles.  The value of @{b}MAKEFILES@{ub} is a
whitespace-separated list of file names.  This variable, if defined in
the outer-level makefile, is passed down through the environment; then
it serves as a list of extra makefiles for the sub-@{b}make@{ub} to read before
the usual or specified ones.  See @{"The Variable MAKEFILES" Link "MAKEFILES Variable"}.


@EndNode

@Node "Options-Recursion" "make.guide/Options-Recursion"
@Next "-w Option"
@Prev "Variables-Recursion"
@Toc "Recursion"

Communicating Options to a Sub-@{b}make@{ub}
-----------------------------------

   Flags such as @{b}-s@{ub} and @{b}-k@{ub} are passed automatically to the sub-@{b}make@{ub}
through the variable @{b}MAKEFLAGS@{ub}.  This variable is set up automatically
by @{b}make@{ub} to contain the flag letters that @{b}make@{ub} received.  Thus, if you
do @{b}make -ks@{ub} then @{b}MAKEFLAGS@{ub} gets the value @{b}ks@{ub}.

   As a consequence, every sub-@{b}make@{ub} gets a value for @{b}MAKEFLAGS@{ub} in its
environment.  In response, it takes the flags from that value and
processes them as if they had been given as arguments.  See
@{"Summary of Options" Link "Options Summary"}.

   Likewise variables defined on the command line are passed to the
sub-@{b}make@{ub} through @{b}MAKEFLAGS@{ub}.  Words in the value of @{b}MAKEFLAGS@{ub}
that contain @{b}=@{ub}, @{b}make@{ub} treats as variable definitions just as if they
appeared on the command line.  See @{"Overriding Variables" Link "Overriding"}.

   The options @{b}-C@{ub}, @{b}-f@{ub}, @{b}-o@{ub}, and @{b}-W@{ub} are not put into @{b}MAKEFLAGS@{ub}; these
options are not passed down.

   The @{b}-j@{ub} option is a special case (see @{"Parallel Execution" Link "Parallel"}).  If you
set it to some numeric value, @{b}-j 1@{ub} is always put into @{b}MAKEFLAGS@{ub} instead
of the value you specified.  This is because if the @{b}-j@{ub} option were
passed down to sub-@{b}make@{ub}s, you would get many more jobs running in
parallel than you asked for.  If you give @{b}-j@{ub} with no numeric argument,
meaning to run as many jobs as possible in parallel, this is passed
down, since multiple infinities are no more than one.

   If you do not want to pass the other flags down, you must change the
value of @{b}MAKEFLAGS@{ub}, like this:

     subsystem:
        cd subdir && $(MAKE) MAKEFLAGS=

   The command line variable definitions really appear in the variable
@{b}MAKEOVERRIDES@{ub}, and @{b}MAKEFLAGS@{ub} contains a reference to this
variable.  If you do want to pass flags down normally, but don't want to
pass down the command line variable definitions, you can reset
@{b}MAKEOVERRIDES@{ub} to empty, like this:

     MAKEOVERRIDES =

This is not usually useful to do.  However, some systems have a small
fixed limit on the size of the environment, and putting so much
information in into the value of @{b}MAKEFLAGS@{ub} can exceed it.  If you see
the error message @{b}Arg list too long@{ub}, this may be the problem.  (For
strict compliance with POSIX.2, changing @{b}MAKEOVERRIDES@{ub} does not affect
@{b}MAKEFLAGS@{ub} if the special target @{b}.POSIX@{ub} appears in the
makefile.  You probably do not care about this.)

   A similar variable @{b}MFLAGS@{ub} exists also, for historical compatibility.
It has the same value as @{b}MAKEFLAGS@{ub} except that it does not contain the
command line variable definitions, and it always begins with a hyphen
unless it is empty (@{b}MAKEFLAGS@{ub} begins with a hyphen only when it begins
with an option that has no single-letter version, such as
@{b}--warn-undefined-variables@{ub}).  @{b}MFLAGS@{ub} was traditionally used
explicitly in the recursive @{b}make@{ub} command, like this:

     subsystem:
        cd subdir && $(MAKE) $(MFLAGS)

but now @{b}MAKEFLAGS@{ub} makes this usage redundant.  If you want your
makefiles to be compatible with old @{b}make@{ub} programs, use this technique;
it will work fine with more modern @{b}make@{ub} versions too.

   The @{b}MAKEFLAGS@{ub} variable can also be useful if you want to have
certain options, such as @{b}-k@{ub} (see @{"Summary of Options" Link "Options Summary"}), set each time you
run @{b}make@{ub}.  You simply put a value for @{b}MAKEFLAGS@{ub} in your environment.
You can also set @{b}MAKEFLAGS@{ub} in a makefile, to specify additional flags
that should also be in effect for that makefile.  (Note that you cannot
use @{b}MFLAGS@{ub} this way.  That variable is set only for compatibility; @{b}make@{ub}
does not interpret a value you set for it in any way.)

   When @{b}make@{ub} interprets the value of @{b}MAKEFLAGS@{ub} (either from the
environment or from a makefile), it first prepends a hyphen if the value
does not already begin with one.  Then it chops the value into words
separated by blanks, and parses these words as if they were options
given on the command line (except that @{b}-C@{ub}, @{b}-f@{ub}, @{b}-h@{ub}, @{b}-o@{ub}, @{b}-W@{ub}, and their
long-named versions are ignored; and there is no error for an invalid
option).

   If you do put @{b}MAKEFLAGS@{ub} in your environment, you should be sure not
to include any options that will drastically affect the actions of @{b}make@{ub}
and undermine the purpose of makefiles and of @{b}make@{ub} itself.  For
instance, the @{b}-t@{ub}, @{b}-n@{ub}, and @{b}-q@{ub} options, if put in one of these variables,
could have disastrous consequences and would certainly have at least
surprising and probably annoying effects.


@EndNode

@Node "-w Option" "make.guide/-w Option"
@Prev "Options-Recursion"
@Toc "Recursion"

The @{b}--print-directory@{ub} Option
----------------------------

   If you use several levels of recursive @{b}make@{ub} invocations, the @{b}-w@{ub} or
@{b}--print-directory@{ub} option can make the output a lot easier to
understand by showing each directory as @{b}make@{ub} starts processing it and
as @{b}make@{ub} finishes processing it.  For example, if @{b}make -w@{ub} is run in the
directory @{b}/u/gnu/make@{ub}, @{b}make@{ub} will print a line of the form:

     make: Entering directory `/u/gnu/make'.

before doing anything else, and a line of the form:

     make: Leaving directory `/u/gnu/make'.

when processing is completed.

   Normally, you do not need to specify this option because @{b}make@{ub} does
it for you: @{b}-w@{ub} is turned on automatically when you use the @{b}-C@{ub} option,
and in sub-@{b}make@{ub}s.  @{b}make@{ub} will not automatically turn on @{b}-w@{ub} if you also
use @{b}-s@{ub}, which says to be silent, or if you use @{b}--no-print-directory@{ub} to
explicitly disable it.


@EndNode

@Node "Sequences" "make.guide/Sequences"
@Next "Empty Commands"
@Prev "Recursion"
@Toc "Commands"

Defining Canned Command Sequences
=================================

   When the same sequence of commands is useful in making various
targets, you can define it as a canned sequence with the @{b}define@{ub}
directive, and refer to the canned sequence from the rules for those
targets.  The canned sequence is actually a variable, so the name must
not conflict with other variable names.

   Here is an example of defining a canned sequence of commands:

     define run-yacc
yacc $(firstword $^)
mv y.tab.c $@
endef

Here @{b}run-yacc@{ub} is the name of the variable being defined; @{b}endef@{ub} marks
the end of the definition; the lines in between are the commands.  The
@{b}define@{ub} directive does not expand variable references and
function calls in the canned sequence; the @{b}$@{ub} characters, parentheses,
variable names, and so on, all become part of the value of the variable
you are defining.  See @{"Defining Variables Verbatim" Link "Defining"}, for a complete
explanation of @{b}define@{ub}.

   The first command in this example runs Yacc on the first dependency
of whichever rule uses the canned sequence.  The output file from Yacc
is always named @{b}y.tab.c@{ub}.  The second command moves the output to the
rule's target file name.

   To use the canned sequence, substitute the variable into the
commands of a rule.  You can substitute it like any other variable (see
@{"Basics of Variable References" Link "Reference"}).  Because variables defined by @{b}define@{ub}
are recursively expanded variables, all the variable references you
wrote inside the @{b}define@{ub} are expanded now.  For example:

     foo.c : foo.y
        $(run-yacc)

@{b}foo.y@{ub} will be substituted for the variable @{b}$^@{ub} when it occurs in
@{b}run-yacc@{ub}'s value, and @{b}foo.c@{ub} for @{b} $@@{ub}.

   This is a realistic example, but this particular one is not needed in
practice because @{b}make@{ub} has an implicit rule to figure out these commands
based on the file names involved (see @{"Using Implicit Rules" Link "Implicit Rules"}).

   In command execution, each line of a canned sequence is treated just
as if the line appeared on its own in the rule, preceded by a tab.  In
particular, @{b}make@{ub} invokes a separate subshell for each line.  You can
use the special prefix characters that affect command lines (@{b} @@{ub}, @{b}-@{ub}, and
@{b}+@{ub}) on each line of a canned sequence.  See
@{"Writing the Commands in Rules" Link "Commands"}.  For example, using this canned sequence:

     define frobnicate
@echo "frobnicating target $@"
frob-step-1 $< -o $@-step-1
frob-step-2 $@-step-1 -o $@
endef

@{b}make@{ub} will not echo the first line, the @{b}echo@{ub} command.  But it @{i}will@{ui} echo
the following two command lines.

   On the other hand, prefix characters on the command line that refers
to a canned sequence apply to every line in the sequence.  So the rule:

     frob.out: frob.in
	@$(frobnicate)

does not echo @{i}any@{ui} commands.  (See @{"Command Echoing" Link "Echoing"}, for a full
explanation of @{b} @@{ub}.)


@EndNode

@Node "Empty Commands" "make.guide/Empty Commands"
@Prev "Sequences"
@Toc "Commands"

Using Empty Commands
====================

   It is sometimes useful to define commands which do nothing.  This is
done simply by giving a command that consists of nothing but
whitespace.  For example:

     target: ;

defines an empty command string for @{b}target@{ub}.  You could also use a line
beginning with a tab character to define an empty command string, but
this would be confusing because such a line looks empty.

   You may be wondering why you would want to define a command string
that does nothing.  The only reason this is useful is to prevent a
target from getting implicit commands (from implicit rules or the
@{b}.DEFAULT@{ub} special target; see @{"Implicit Rules" Link "Implicit Rules"} and see
@{"Defining Last-Resort Default Rules" Link "Last Resort"}).

   You may be inclined to define empty command strings for targets that
are not actual files, but only exist so that their dependencies can be
remade.  However, this is not the best way to do that, because the
dependencies may not be remade properly if the target file actually
does exist.  See @{"Phony Targets" Link "Phony Targets"}, for a better way to do this.


@EndNode

@Node "Using Variables" "make.guide/Using Variables"
@Next "Conditionals"
@Prev "Commands"
@Toc "Main"

How to Use Variables
********************

   A @{i}variable@{ui} is a name defined in a makefile to represent a string of
text, called the variable's @{i}value@{ui}.  These values are substituted by
explicit request into targets, dependencies, commands, and other parts
of the makefile.  (In some other versions of @{b}make@{ub}, variables are called
@{i}macros@{ui}.)

   Variables and functions in all parts of a makefile are expanded when
read, except for the shell commands in rules, the right-hand sides of
variable definitions using @{b}=@{ub}, and the bodies of variable definitions
using the @{b}define@{ub} directive.

   Variables can represent lists of file names, options to pass to
compilers, programs to run, directories to look in for source files,
directories to write output in, or anything else you can imagine.

   A variable name may be any sequence of characters not containing @{b}:@{ub},
@{b}#@{ub}, @{b}=@{ub}, or leading or trailing whitespace.  However, variable
names containing characters other than letters, numbers, and
underscores should be avoided, as they may be given special meanings in
the future, and with some shells they cannot be passed through the
environment to a sub-@{b}make@{ub} (see @{"Communicating Variables to a Sub-make" Link "Variables-Recursion"}).

   Variable names are case-sensitive.  The names @{b}foo@{ub}, @{b}FOO@{ub}, and @{b}Foo@{ub} all
refer to different variables.

   It is traditional to use upper case letters in variable names, but we
recommend using lower case letters for variable names that serve
internal purposes in the makefile, and reserving upper case for
parameters that control implicit rules or for parameters that the user
should override with command options (see @{"Overriding Variables" Link "Overriding"}).

   A few variables have names that are a single punctuation character or
just a few characters.  These are the @{i}automatic variables@{ui}, and they
have particular specialized uses.  See @{"Automatic Variables" Link "Automatic"}.


 @{" Reference                 " Link "Reference"}  How to use the value of a variable.
 @{" Flavors                   " Link "Flavors"}  Variables come in two flavors.
 @{" Advanced                  " Link "Advanced"}  Advanced features for referencing a variable.
 @{" Values                    " Link "Values"}  All the ways variables get their values.
 @{" Setting                   " Link "Setting"}  How to set a variable in the makefile.
 @{" Appending                 " Link "Appending"}  How to append more text to the old value
                                  of a variable.
 @{" Override Directive        " Link "Override Directive"}  How to set a variable in the makefile even if
                                  the user has set it with a command argument.
 @{" Defining                  " Link "Defining"}  An alternate way to set a variable
                                  to a verbatim string.
 @{" Environment               " Link "Environment"}  Variable values can come from the environment.
 @{" Automatic                 " Link "Automatic"}  Some special variables have predefined
                                  meanings for use with implicit rules.


@EndNode

@Node "Reference" "make.guide/Reference"
@Next "Flavors"
@Toc "Using Variables"

Basics of Variable References
=============================

   To substitute a variable's value, write a dollar sign followed by
the name of the variable in parentheses or braces: either @{b}$(foo)@{ub} or @{b}
${foo}@{ub} is a valid reference to the variable @{b}foo@{ub}.  This special
significance of @{b}$@{ub} is why you must write @{b}$$@{ub} to have the effect of a
single dollar sign in a file name or command.

   Variable references can be used in any context: targets,
dependencies, commands, most directives, and new variable values.  Here
is an example of a common case, where a variable holds the names of all
the object files in a program:

     objects = program.o foo.o utils.o
program : $(objects)
        cc -o program $(objects)

$(objects) : defs.h

   Variable references work by strict textual substitution.  Thus, the
rule

     foo = c
prog.o : prog.$(foo)
        $(foo)$(foo) -$(foo) prog.$(foo)

could be used to compile a C program @{b}prog.c@{ub}.  Since spaces before the
variable value are ignored in variable assignments, the value of @{b}foo@{ub} is
precisely @{b}c@{ub}.  (Don't actually write your makefiles this way!)

   A dollar sign followed by a character other than a dollar sign,
open-parenthesis or open-brace treats that single character as the
variable name.  Thus, you could reference the variable @{b}x@{ub} with @{b}$x@{ub}.
However, this practice is strongly discouraged, except in the case of
the automatic variables (see @{"Automatic Variables" Link "Automatic"}).


@EndNode

@Node "Flavors" "make.guide/Flavors"
@Next "Advanced"
@Prev "Reference"
@Toc "Using Variables"

The Two Flavors of Variables
============================

   There are two ways that a variable in GNU @{b}make@{ub} can have a value; we
call them the two @{i}flavors@{ui} of variables.  The two flavors are
distinguished in how they are defined and in what they do when expanded.

   The first flavor of variable is a @{i}recursively expanded@{ui} variable.
Variables of this sort are defined by lines using @{b}=@{ub} (see
@{"Setting Variables" Link "Setting"}) or by the @{b}define@{ub} directive (see
@{"Defining Variables Verbatim" Link "Defining"}).  The value you specify is installed
verbatim; if it contains references to other variables, these
references are expanded whenever this variable is substituted (in the
course of expanding some other string).  When this happens, it is
called @{i}recursive expansion@{ui}.

   For example,

     foo = $(bar)
bar = $(ugh)
ugh = Huh?

all:;echo $(foo)

will echo @{b}Huh?@{ub}: @{b}$(foo)@{ub} expands to @{b}$(bar)@{ub} which expands to @{b}$(ugh)@{ub} which
finally expands to @{b}Huh?@{ub}.

   This flavor of variable is the only sort supported by other versions
of @{b}make@{ub}.  It has its advantages and its disadvantages.  An advantage
(most would say) is that:

     CFLAGS = $(include_dirs) -O
include_dirs = -Ifoo -Ibar

will do what was intended: when @{b}CFLAGS@{ub} is expanded in a command, it
will expand to @{b}-Ifoo -Ibar -O@{ub}.  A major disadvantage is that you cannot
append something on the end of a variable, as in

     CFLAGS = $(CFLAGS) -O

because it will cause an infinite loop in the variable expansion.
(Actually @{b}make@{ub} detects the infinite loop and reports an error.)

   Another disadvantage is that any functions (see
@{"Functions for Transforming Text" Link "Functions"}) referenced in the definition will be
executed every time the variable is expanded.  This makes @{b}make@{ub} run
slower; worse, it causes the @{b}wildcard@{ub} and @{b}shell@{ub} functions to give
unpredictable results because you cannot easily control when they are
called, or even how many times.

   To avoid all the problems and inconveniences of recursively expanded
variables, there is another flavor: simply expanded variables.

   @{i}Simply expanded variables@{ui} are defined by lines using @{b}:=@{ub} (see
@{"Setting Variables" Link "Setting"}).  The value of a simply expanded variable is scanned
once and for all, expanding any references to other variables and
functions, when the variable is defined.  The actual value of the simply
expanded variable is the result of expanding the text that you write.
It does not contain any references to other variables; it contains their
values @{i}as of the time this variable was defined@{ui}.  Therefore,

     x := foo
y := $(x) bar
x := later

is equivalent to

     y := foo bar
x := later

   When a simply expanded variable is referenced, its value is
substituted verbatim.

   Here is a somewhat more complicated example, illustrating the use of
@{b}:=@{ub} in conjunction with the @{b}shell@{ub} function.  (See
@{"The shell Function" Link "Shell Function"}.)  This example also shows use of the variable
@{b}MAKELEVEL@{ub}, which is changed when it is passed down from level
to level.  (See @{"Communicating Variables to a Sub-make" Link "Variables-Recursion"}, for information
about @{b}MAKELEVEL@{ub}.)

     ifeq (0,${MAKELEVEL})
cur-dir   := $(shell pwd)
whoami    := $(shell whoami)
host-type := $(shell arch)
MAKE := ${MAKE} host-type=${host-type} whoami=${whoami}
endif

An advantage of this use of @{b}:=@{ub} is that a typical `descend into a
directory' command then looks like this:

     ${subdirs}:
      ${MAKE} cur-dir=${cur-dir}/$@ -C $@ all

   Simply expanded variables generally make complicated makefile
programming more predictable because they work like variables in most
programming languages.  They allow you to redefine a variable using its
own value (or its value processed in some way by one of the expansion
functions) and to use the expansion functions much more efficiently
(see @{"Functions for Transforming Text" Link "Functions"}).

   You can also use them to introduce controlled leading whitespace into
variable values.  Leading whitespace characters are discarded from your
input before substitution of variable references and function calls;
this means you can include leading spaces in a variable value by
protecting them with variable references, like this:

     nullstring :=
space := $(nullstring) # end of the line

Here the value of the variable @{b}space@{ub} is precisely one space.  The
comment @{b}# end of the line@{ub} is included here just for clarity.  Since
trailing space characters are @{i}not@{ui} stripped from variable values, just a
space at the end of the line would have the same effect (but be rather
hard to read).  If you put whitespace at the end of a variable value,
it is a good idea to put a comment like that at the end of the line to
make your intent clear.  Conversely, if you do @{i}not@{ui} want any whitespace
characters at the end of your variable value, you must remember not to
put a random comment on the end of the line after some whitespace, such
as this:

     dir := /foo/bar    # directory to put the frobs in

Here the value of the variable @{b}dir@{ub} is @{b}/foo/bar    @{ub} (with four trailing
spaces), which was probably not the intention.  (Imagine something like
@{b}$(dir)/file@{ub} with this definition!)


@EndNode

@Node "Advanced" "make.guide/Advanced"
@Next "Values"
@Prev "Flavors"
@Toc "Using Variables"

Advanced Features for Reference to Variables
============================================

   This section describes some advanced features you can use to
reference variables in more flexible ways.


 @{" Substitution Refs         " Link "Substitution Refs"}  Referencing a variable with
                                  substitutions on the value.
 @{" Computed Names            " Link "Computed Names"}  Computing the name of the variable to refer to.


@EndNode

@Node "Substitution Refs" "make.guide/Substitution Refs"
@Next "Computed Names"
@Toc "Advanced"

Substitution References
-----------------------

   A @{i}substitution reference@{ui} substitutes the value of a variable with
alterations that you specify.  It has the form @{b}$(@{I}VAR@{ui}:@{I}A@{ui}=@{I}B@{ui})@{ub} (or @{b} ${@{I}VAR@{ui}:@{I}A@{ui}=@{I}B@{ui}
}@{ub}) and its meaning is to take the value of the variable @{I}VAR@{ui},
replace every @{I}A@{ui} at the end of a word with @{I}B@{ui} in that value, and
substitute the resulting string.

   When we say "at the end of a word", we mean that @{I}A@{ui} must appear
either followed by whitespace or at the end of the value in order to be
replaced; other occurrences of @{I}A@{ui} in the value are unaltered.  For
example:

     foo := a.o b.o c.o
bar := $(foo:.o=.c)

sets @{b}bar@{ub} to @{b}a.c b.c c.c@{ub}.  See @{"Setting Variables" Link "Setting"}.

   A substitution reference is actually an abbreviation for use of the
@{b}patsubst@{ub} expansion function (see
@{"Functions for String Substitution and Analysis" Link "Text Functions"}).  We provide
substitution references as well as @{b}patsubst@{ub} for compatibility with
other implementations of @{b}make@{ub}.

   Another type of substitution reference lets you use the full power of
the @{b}patsubst@{ub} function.  It has the same form @{b}$(@{I}VAR@{ui}:@{I}A@{ui}=@{I}B@{ui})@{ub} described
above, except that now @{I}A@{ui} must contain a single @{b}%@{ub} character.  This case
is equivalent to @{b}$(patsubst @{I}A@{ui},@{I}B@{ui},$(@{I}VAR@{ui}))@{ub}.  See
@{"Functions for String Substitution and Analysis" Link "Text Functions"}, for a description of
the @{b}patsubst@{ub} function.

For example:

     foo := a.o b.o c.o
bar := $(foo:%.o=%.c)

sets @{b}bar@{ub} to @{b}a.c b.c c.c@{ub}.


@EndNode

@Node "Computed Names" "make.guide/Computed Names"
@Prev "Substitution Refs"
@Toc "Advanced"

Computed Variable Names
-----------------------

   Computed variable names are a complicated concept needed only for
sophisticated makefile programming.  For most purposes you need not
consider them, except to know that making a variable with a dollar sign
in its name might have strange results.  However, if you are the type
that wants to understand everything, or you are actually interested in
what they do, read on.

   Variables may be referenced inside the name of a variable.  This is
called a @{i}computed variable name@{ui} or a @{i}nested variable reference@{ui}.  For
example,

     x = y
y = z
a := $($(x))

defines @{b}a@{ub} as @{b}z@{ub}: the @{b}$(x)@{ub} inside @{b}$($(x))@{ub} expands to @{b}y@{ub}, so @{b}$($(x))@{ub}
expands to @{b}$(y)@{ub} which in turn expands to @{b}z@{ub}.  Here the name of the
variable to reference is not stated explicitly; it is computed by
expansion of @{b}$(x)@{ub}.  The reference @{b}$(x)@{ub} here is nested within the outer
variable reference.

   The previous example shows two levels of nesting, but any number of
levels is possible.  For example, here are three levels:

     x = y
y = z
z = u
a := $($($(x)))

Here the innermost @{b}$(x)@{ub} expands to @{b}y@{ub}, so @{b}$($(x))@{ub} expands to @{b}$(y)@{ub} which
in turn expands to @{b}z@{ub}; now we have @{b}$(z)@{ub}, which becomes @{b}u@{ub}.

   References to recursively-expanded variables within a variable name
are reexpanded in the usual fashion.  For example:

     x = $(y)
y = z
z = Hello
a := $($(x))

defines @{b}a@{ub} as @{b}Hello@{ub}: @{b}$($(x))@{ub} becomes @{b}$($(y))@{ub} which becomes @{b}$(z)@{ub} which
becomes @{b}Hello@{ub}.

   Nested variable references can also contain modified references and
function invocations (see @{"Functions for Transforming Text" Link "Functions"}), just like
any other reference.  For example, using the @{b}subst@{ub} function (see
@{"Functions for String Substitution and Analysis" Link "Text Functions"}):

     x = variable1
variable2 := Hello
y = $(subst 1,2,$(x))
z = y
a := $($($(z)))

eventually defines @{b}a@{ub} as @{b}Hello@{ub}.  It is doubtful that anyone would ever
want to write a nested reference as convoluted as this one, but it
works: @{b}$($($(z)))@{ub} expands to @{b}$($(y))@{ub} which becomes @{b}$($(subst
1,2,$(x)))@{ub}.  This gets the value @{b}variable1@{ub} from @{b}x@{ub} and changes it
by substitution to @{b}variable2@{ub}, so that the entire string becomes
@{b}$(variable2)@{ub}, a simple variable reference whose value is @{b}Hello@{ub}.

   A computed variable name need not consist entirely of a single
variable reference.  It can contain several variable references, as
well as some invariant text.  For example,

     a_dirs := dira dirb
1_dirs := dir1 dir2
     
a_files := filea fileb
1_files := file1 file2
     
ifeq "$(use_a)" "yes"
a1 := a
else
a1 := 1
endif
     
ifeq "$(use_dirs)" "yes"
df := dirs
else
df := files
endif

dirs := $($(a1)_$(df))

will give @{b}dirs@{ub} the same value as @{b}a_dirs@{ub}, @{b}1_dirs@{ub}, @{b}a_files@{ub} or @{b}1_files@{ub}
depending on the settings of @{b}use_a@{ub} and @{b}use_dirs@{ub}.

   Computed variable names can also be used in substitution references:

     a_objects := a.o b.o c.o
1_objects := 1.o 2.o 3.o

sources := $($(a1)_objects:.o=.c)

defines @{b}sources@{ub} as either @{b}a.c b.c c.c@{ub} or @{b}1.c 2.c 3.c@{ub}, depending on the
value of @{b}a1@{ub}.

   The only restriction on this sort of use of nested variable
references is that they cannot specify part of the name of a function
to be called.  This is because the test for a recognized function name
is done before the expansion of nested references.  For example,

     ifdef do_sort
func := sort
else
func := strip
endif
     
bar := a d b g q c
     
foo := $($(func) $(bar))

attempts to give @{b}foo@{ub} the value of the variable @{b}sort a d b g q c@{ub} or @{b}strip a d b g q
c@{ub}, rather than giving @{b}a d b g q c@{ub} as the argument to either the
@{b}sort@{ub} or the @{b}strip@{ub} function.  This restriction could be removed
in the future if that change is shown to be a good idea.

   You can also use computed variable names in the left-hand side of a
variable assignment, or in a @{b}define@{ub} directive, as in:

     dir = foo
$(dir)_sources := $(wildcard $(dir)/*.c)
define $(dir)_print
lpr $($(dir)_sources)
endef

This example defines the variables @{b}dir@{ub}, @{b}foo_sources@{ub}, and @{b}foo_print@{ub}.

   Note that @{i}nested variable references@{ui} are quite different from @{i}recursively expanded variables@{ui}
(see @{"The Two Flavors of Variables" Link "Flavors"}), though both are used together in
complex ways when doing makefile programming.


@EndNode

@Node "Values" "make.guide/Values"
@Next "Setting"
@Prev "Advanced"
@Toc "Using Variables"

How Variables Get Their Values
==============================

   Variables can get values in several different ways:

   @{b}*@{ub} You can specify an overriding value when you run @{b}make@{ub}.  See
     @{"Overriding Variables" Link "Overriding"}.

   @{b}*@{ub} You can specify a value in the makefile, either with an assignment
     (see @{"Setting Variables" Link "Setting"}) or with a verbatim definition (see
     @{"Defining Variables Verbatim" Link "Defining"}).

   @{b}*@{ub} Variables in the environment become @{b}make@{ub} variables.  See
     @{"Variables from the Environment" Link "Environment"}.

   @{b}*@{ub} Several @{i}automatic@{ui} variables are given new values for each rule.
     Each of these has a single conventional use.  See
     @{"Automatic Variables" Link "Automatic"}.

   @{b}*@{ub} Several variables have constant initial values.  See
     @{"Variables Used by Implicit Rules" Link "Implicit Variables"}.


@EndNode

@Node "Setting" "make.guide/Setting"
@Next "Appending"
@Prev "Values"
@Toc "Using Variables"

Setting Variables
=================

   To set a variable from the makefile, write a line starting with the
variable name followed by @{b}=@{ub} or @{b}:=@{ub}.  Whatever follows the @{b}=@{ub} or @{b}:=@{ub} on the
line becomes the value.  For example,

     objects = main.o foo.o bar.o utils.o

defines a variable named @{b}objects@{ub}.  Whitespace around the variable name
and immediately after the @{b}=@{ub} is ignored.

   Variables defined with @{b}=@{ub} are @{i}recursively expanded@{ui} variables.
Variables defined with @{b}:=@{ub} are @{i}simply expanded@{ui} variables; these
definitions can contain variable references which will be expanded
before the definition is made.  See @{"The Two Flavors of Variables" Link "Flavors"}.

   The variable name may contain function and variable references, which
are expanded when the line is read to find the actual variable name to
use.

   There is no limit on the length of the value of a variable except the
amount of swapping space on the computer.  When a variable definition is
long, it is a good idea to break it into several lines by inserting
backslash-newline at convenient places in the definition.  This will not
affect the functioning of @{b}make@{ub}, but it will make the makefile easier to
read.

   Most variable names are considered to have the empty string as a
value if you have never set them.  Several variables have built-in
initial values that are not empty, but you can set them in the usual
ways (see @{"Variables Used by Implicit Rules" Link "Implicit Variables"}).  Several special variables
are set automatically to a new value for each rule; these are called the
@{i}automatic@{ui} variables (see @{"Automatic Variables" Link "Automatic"}).


@EndNode

@Node "Appending" "make.guide/Appending"
@Next "Override Directive"
@Prev "Setting"
@Toc "Using Variables"

Appending More Text to Variables
================================

   Often it is useful to add more text to the value of a variable
already defined.  You do this with a line containing @{b}+=@{ub}, like this:

     objects += another.o

This takes the value of the variable @{b}objects@{ub}, and adds the text
@{b}another.o@{ub} to it (preceded by a single space).  Thus:

     objects = main.o foo.o bar.o utils.o
objects += another.o

sets @{b}objects@{ub} to @{b}main.o foo.o bar.o utils.o another.o@{ub}.

   Using @{b}+=@{ub} is similar to:

     objects = main.o foo.o bar.o utils.o
objects := $(objects) another.o

but differs in ways that become important when you use more complex
values.

   When the variable in question has not been defined before, @{b}+=@{ub} acts
just like normal @{b}=@{ub}: it defines a recursively-expanded variable.
However, when there @{i}is@{ui} a previous definition, exactly what @{b}+=@{ub} does
depends on what flavor of variable you defined originally.  See
@{"The Two Flavors of Variables" Link "Flavors"}, for an explanation of the two flavors of
variables.

   When you add to a variable's value with @{b}+=@{ub}, @{b}make@{ub} acts essentially as
if you had included the extra text in the initial definition of the
variable.  If you defined it first with @{b}:=@{ub}, making it a simply-expanded
variable, @{b}+=@{ub} adds to that simply-expanded definition, and expands the
new text before appending it to the old value just as @{b}:=@{ub} does (see
@{"Setting Variables" Link "Setting"}, for a full explanation of @{b}:=@{ub}).  In fact,

     variable := value
variable += more

is exactly equivalent to:

     variable := value
variable := $(variable) more

   On the other hand, when you use @{b}+=@{ub} with a variable that you defined
first to be recursively-expanded using plain @{b}=@{ub}, @{b}make@{ub} does something a
bit different.  Recall that when you define a recursively-expanded
variable, @{b}make@{ub} does not expand the value you set for variable and
function references immediately.  Instead it stores the text verbatim,
and saves these variable and function references to be expanded later,
when you refer to the new variable (see @{"The Two Flavors of Variables" Link "Flavors"}).
When you use @{b}+=@{ub} on a recursively-expanded variable, it is this
unexpanded text to which @{b}make@{ub} appends the new text you specify.

     variable = value
variable += more

is roughly equivalent to:

     temp = value
variable = $(temp) more

except that of course it never defines a variable called @{b}temp@{ub}.  The
importance of this comes when the variable's old value contains
variable references.  Take this common example:

     CFLAGS = $(includes) -O
...
CFLAGS += -pg # enable profiling

The first line defines the @{b}CFLAGS@{ub} variable with a reference to another
variable, @{b}includes@{ub}.  (@{b}CFLAGS@{ub} is used by the rules for C compilation;
see @{"Catalogue of Implicit Rules" Link "Catalogue of Rules"}.) Using @{b}=@{ub} for the definition makes
@{b}CFLAGS@{ub} a recursively-expanded variable, meaning @{b}$(includes) -O@{ub}
is @{i}not@{ui} expanded when @{b}make@{ub} processes the definition of @{b}CFLAGS@{ub}.  Thus, @{b}includes@{ub}
need not be defined yet for its value to take effect.  It only has to be
defined before any reference to @{b}CFLAGS@{ub}.  If we tried to append to the
value of @{b}CFLAGS@{ub} without using @{b}+=@{ub}, we might do it like this:

     CFLAGS := $(CFLAGS) -pg # enable profiling

This is pretty close, but not quite what we want.  Using @{b}:=@{ub} redefines
@{b}CFLAGS@{ub} as a simply-expanded variable; this means @{b}make@{ub} expands
the text @{b}$(CFLAGS) -pg@{ub} before setting the variable.  If @{b}includes@{ub} is not
yet defined, we get @{b} -O -pg@{ub}, and a later definition of @{b}includes@{ub} will
have no effect.  Conversely, by using @{b}+=@{ub} we set @{b}CFLAGS@{ub} to the
@{i}unexpanded@{ui} value @{b}$(includes) -O -pg@{ub}.  Thus we preserve the
reference to @{b}includes@{ub}, so if that variable gets defined at any later
point, a reference like @{b}$(CFLAGS)@{ub} still uses its value.


@EndNode

@Node "Override Directive" "make.guide/Override Directive"
@Next "Defining"
@Prev "Appending"
@Toc "Using Variables"

The @{b}override@{ub} Directive
======================

   If a variable has been set with a command argument (see
@{"Overriding Variables" Link "Overriding"}), then ordinary assignments in the makefile are
ignored.  If you want to set the variable in the makefile even though
it was set with a command argument, you can use an @{b}override@{ub} directive,
which is a line that looks like this:

     override @{I}VARIABLE@{ui} = @{I}VALUE@{ui}

or

     override @{I}VARIABLE@{ui} := @{I}VALUE@{ui}

   To append more text to a variable defined on the command line, use:

     override @{I}VARIABLE@{ui} += @{I}MORE TEXT@{ui}

See @{"Appending More Text to Variables" Link "Appending"}.

   The @{b}override@{ub} directive was not invented for escalation in the war
between makefiles and command arguments.  It was invented so you can
alter and add to values that the user specifies with command arguments.

   For example, suppose you always want the @{b}-g@{ub} switch when you run the
C compiler, but you would like to allow the user to specify the other
switches with a command argument just as usual.  You could use this
@{b}override@{ub} directive:

     override CFLAGS += -g

   You can also use @{b}override@{ub} directives with @{b}define@{ub} directives.  This
is done as you might expect:

     override define foo
bar
endef

See @{"Defining Variables Verbatim" Link "Defining"}.


@EndNode

@Node "Defining" "make.guide/Defining"
@Next "Environment"
@Prev "Override Directive"
@Toc "Using Variables"

Defining Variables Verbatim
===========================

Another way to set the value of a variable is to use the @{b}define@{ub}
directive.  This directive has an unusual syntax which allows newline
characters to be included in the value, which is convenient for defining
canned sequences of commands (see @{"Defining Canned Command Sequences" Link "Sequences"}).

   The @{b}define@{ub} directive is followed on the same line by the name of the
variable and nothing more.  The value to give the variable appears on
the following lines.  The end of the value is marked by a line
containing just the word @{b}endef@{ub}.  Aside from this difference in syntax, @{b}define@{ub}
works just like @{b}=@{ub}: it creates a recursively-expanded variable (see
@{"The Two Flavors of Variables" Link "Flavors"}).  The variable name may contain function
and variable references, which are expanded when the directive is read
to find the actual variable name to use.

     define two-lines
echo foo
echo $(bar)
endef

   The value in an ordinary assignment cannot contain a newline; but the
newlines that separate the lines of the value in a @{b}define@{ub} become part
of the variable's value (except for the final newline which precedes
the @{b}endef@{ub} and is not considered part of the value).

   The previous example is functionally equivalent to this:

     two-lines = echo foo; echo $(bar)

since two commands separated by semicolon behave much like two separate
shell commands.  However, note that using two separate lines means @{b}make@{ub}
will invoke the shell twice, running an independent subshell for each
line.  See @{"Command Execution" Link "Execution"}.

   If you want variable definitions made with @{b}define@{ub} to take precedence
over command-line variable definitions, you can use the @{b}override@{ub}
directive together with @{b}define@{ub}:

     override define two-lines
foo
$(bar)
endef

See @{"The override Directive" Link "Override Directive"}.


@EndNode

@Node "Environment" "make.guide/Environment"
@Prev "Defining"
@Toc "Using Variables"

Variables from the Environment
==============================

   Variables in @{b}make@{ub} can come from the environment in which @{b}make@{ub} is
run.  Every environment variable that @{b}make@{ub} sees when it starts up is
transformed into a @{b}make@{ub} variable with the same name and value.  But an
explicit assignment in the makefile, or with a command argument,
overrides the environment.  (If the @{b}-e@{ub} flag is specified, then values
from the environment override assignments in the makefile.  See
@{"Summary of Options" Link "Options Summary"}.  But this is not recommended practice.)

   Thus, by setting the variable @{b}CFLAGS@{ub} in your environment, you can
cause all C compilations in most makefiles to use the compiler switches
you prefer.  This is safe for variables with standard or conventional
meanings because you know that no makefile will use them for other
things.  (But this is not totally reliable; some makefiles set @{b}CFLAGS@{ub}
explicitly and therefore are not affected by the value in the
environment.)

   When @{b}make@{ub} is invoked recursively, variables defined in the outer
invocation can be passed to inner invocations through the environment
(see @{"Recursive Use of make" Link "Recursion"}).  By default, only variables that came from
the environment or the command line are passed to recursive
invocations.  You can use the @{b}export@{ub} directive to pass other variables.
See @{"Communicating Variables to a Sub-make" Link "Variables-Recursion"}, for full details.

   Other use of variables from the environment is not recommended.  It
is not wise for makefiles to depend for their functioning on
environment variables set up outside their control, since this would
cause different users to get different results from the same makefile.
This is against the whole purpose of most makefiles.

   Such problems would be especially likely with the variable @{b}SHELL@{ub},
which is normally present in the environment to specify the user's
choice of interactive shell.  It would be very undesirable for this
choice to affect @{b}make@{ub}.  So @{b}make@{ub} ignores the environment value of @{b}SHELL@{ub}
(except on MS-DOS and MS-Windows, where @{b}SHELL@{ub} is usually not set.  See
@{"Special handling of SHELL on MS-DOS" Link "Execution"}.)


@EndNode

@Node "Conditionals" "make.guide/Conditionals"
@Next "Functions"
@Prev "Using Variables"
@Toc "Main"

Conditional Parts of Makefiles
******************************

   A @{i}conditional@{ui} causes part of a makefile to be obeyed or ignored
depending on the values of variables.  Conditionals can compare the
value of one variable to another, or the value of a variable to a
constant string.  Conditionals control what @{b}make@{ub} actually "sees" in the
makefile, so they @{i}cannot@{ui} be used to control shell commands at the time
of execution.


 @{" Conditional Example       " Link "Conditional Example"}  Example of a conditional
 @{" Conditional Syntax        " Link "Conditional Syntax"}  The syntax of conditionals.
 @{" Testing Flags             " Link "Testing Flags"}  Conditionals that test flags.


@EndNode

@Node "Conditional Example" "make.guide/Conditional Example"
@Next "Conditional Syntax"
@Toc "Conditionals"

Example of a Conditional
========================

   The following example of a conditional tells @{b}make@{ub} to use one set of
libraries if the @{b}CC@{ub} variable is @{b}gcc@{ub}, and a different set of libraries
otherwise.  It works by controlling which of two command lines will be
used as the command for a rule.  The result is that @{b}CC=gcc@{ub} as an
argument to @{b}make@{ub} changes not only which compiler is used but also which
libraries are linked.

     libs_for_gcc = -lgnu
normal_libs =

foo: $(objects)
ifeq ($(CC),gcc)
        $(CC) -o foo $(objects) $(libs_for_gcc)
else
        $(CC) -o foo $(objects) $(normal_libs)
endif

   This conditional uses three directives: one @{b}ifeq@{ub}, one @{b}else@{ub} and one
@{b}endif@{ub}.

   The @{b}ifeq@{ub} directive begins the conditional, and specifies the
condition.  It contains two arguments, separated by a comma and
surrounded by parentheses.  Variable substitution is performed on both
arguments and then they are compared.  The lines of the makefile
following the @{b}ifeq@{ub} are obeyed if the two arguments match; otherwise
they are ignored.

   The @{b}else@{ub} directive causes the following lines to be obeyed if the
previous conditional failed.  In the example above, this means that the
second alternative linking command is used whenever the first
alternative is not used.  It is optional to have an @{b}else@{ub} in a
conditional.

   The @{b}endif@{ub} directive ends the conditional.  Every conditional must
end with an @{b}endif@{ub}.  Unconditional makefile text follows.

   As this example illustrates, conditionals work at the textual level:
the lines of the conditional are treated as part of the makefile, or
ignored, according to the condition.  This is why the larger syntactic
units of the makefile, such as rules, may cross the beginning or the
end of the conditional.

   When the variable @{b}CC@{ub} has the value @{b}gcc@{ub}, the above example has this
effect:

     foo: $(objects)
        $(CC) -o foo $(objects) $(libs_for_gcc)

When the variable @{b}CC@{ub} has any other value, the effect is this:

     foo: $(objects)
        $(CC) -o foo $(objects) $(normal_libs)

   Equivalent results can be obtained in another way by
conditionalizing a variable assignment and then using the variable
unconditionally:

     libs_for_gcc = -lgnu
normal_libs =

ifeq ($(CC),gcc)
  libs=$(libs_for_gcc)
else
  libs=$(normal_libs)
endif

foo: $(objects)
        $(CC) -o foo $(objects) $(libs)


@EndNode

@Node "Conditional Syntax" "make.guide/Conditional Syntax"
@Next "Testing Flags"
@Prev "Conditional Example"
@Toc "Conditionals"

Syntax of Conditionals
======================

   The syntax of a simple conditional with no @{b}else@{ub} is as follows:

     @{I}CONDITIONAL-DIRECTIVE@{ui}
@{I}TEXT-IF-TRUE@{ui}
endif

The @{I}TEXT-IF-TRUE@{ui} may be any lines of text, to be considered as part of
the makefile if the condition is true.  If the condition is false, no
text is used instead.

   The syntax of a complex conditional is as follows:

     @{I}CONDITIONAL-DIRECTIVE@{ui}
@{I}TEXT-IF-TRUE@{ui}
else
@{I}TEXT-IF-FALSE@{ui}
endif

If the condition is true, @{I}TEXT-IF-TRUE@{ui} is used; otherwise,
@{I}TEXT-IF-FALSE@{ui} is used instead.  The @{I}TEXT-IF-FALSE@{ui} can be any
number of lines of text.

   The syntax of the @{I}CONDITIONAL-DIRECTIVE@{ui} is the same whether the
conditional is simple or complex.  There are four different directives
that test different conditions.  Here is a table of them:

@{b}ifeq (@{I}ARG1@{ui}, @{I}ARG2@{ui})@{ub}
@{b}ifeq '@{I}ARG1@{ui}' '@{I}ARG2@{ui}'@{ub}
@{b}ifeq "@{I}ARG1@{ui}" "@{I}ARG2@{ui}"@{ub}
@{b}ifeq "@{I}ARG1@{ui}" '@{I}ARG2@{ui}'@{ub}
@{b}ifeq '@{I}ARG1@{ui}' "@{I}ARG2@{ui}"@{ub}
     Expand all variable references in @{I}ARG1@{ui} and @{I}ARG2@{ui} and compare them.
     If they are identical, the @{I}TEXT-IF-TRUE@{ui} is effective; otherwise,
     the @{I}TEXT-IF-FALSE@{ui}, if any, is effective.

     Often you want to test if a variable has a non-empty value.  When
     the value results from complex expansions of variables and
     functions, expansions you would consider empty may actually
     contain whitespace characters and thus are not seen as empty.
     However, you can use the @{b}strip@{ub} function (see @{"Text Functions" Link "Text Functions"}) to
     avoid interpreting whitespace as a non-empty value.  For example:

          ifeq ($(strip $(foo)),)
@{I}TEXT-IF-EMPTY@{ui}
endif

     will evaluate @{I}TEXT-IF-EMPTY@{ui} even if the expansion of @{b}$(foo)@{ub}
     contains whitespace characters.

@{b}ifneq (@{I}ARG1@{ui}, @{I}ARG2@{ui})@{ub}
@{b}ifneq '@{I}ARG1@{ui}' '@{I}ARG2@{ui}'@{ub}
@{b}ifneq "@{I}ARG1@{ui}" "@{I}ARG2@{ui}"@{ub}
@{b}ifneq "@{I}ARG1@{ui}" '@{I}ARG2@{ui}'@{ub}
@{b}ifneq '@{I}ARG1@{ui}' "@{I}ARG2@{ui}"@{ub}
     Expand all variable references in @{I}ARG1@{ui} and @{I}ARG2@{ui} and compare them.
     If they are different, the @{I}TEXT-IF-TRUE@{ui} is effective; otherwise,
     the @{I}TEXT-IF-FALSE@{ui}, if any, is effective.

@{b}ifdef @{I}VARIABLE-NAME@{ui}@{ub}
     If the variable @{I}VARIABLE-NAME@{ui} has a non-empty value, the
     @{I}TEXT-IF-TRUE@{ui} is effective; otherwise, the @{I}TEXT-IF-FALSE@{ui},
     if any, is effective.  Variables that have never been defined have
     an empty value.

     Note that @{b}ifdef@{ub} only tests whether a variable has a value.  It
     does not expand the variable to see if that value is nonempty.
     Consequently, tests using @{b}ifdef@{ub} return true for all definitions
     except those like @{b}foo =@{ub}.  To test for an empty value, use
     @{b}ifeq ($(foo),)@{ub}.  For example,

          bar =
foo = $(bar)
ifdef foo
frobozz = yes
else
frobozz = no
endif

     sets @{b}frobozz@{ub} to @{b}yes@{ub}, while:

          foo =
ifdef foo
frobozz = yes
else
frobozz = no
endif

     sets @{b}frobozz@{ub} to @{b}no@{ub}.

@{b}ifndef @{I}VARIABLE-NAME@{ui}@{ub}
     If the variable @{I}VARIABLE-NAME@{ui} has an empty value, the @{I}TEXT-IF-TRUE@{ui}
     is effective; otherwise, the @{I}TEXT-IF-FALSE@{ui}, if any, is effective.

   Extra spaces are allowed and ignored at the beginning of the
conditional directive line, but a tab is not allowed.  (If the line
begins with a tab, it will be considered a command for a rule.)  Aside
from this, extra spaces or tabs may be inserted with no effect anywhere
except within the directive name or within an argument.  A comment
starting with @{b}#@{ub} may appear at the end of the line.

   The other two directives that play a part in a conditional are @{b}else@{ub}
and @{b}endif@{ub}.  Each of these directives is written as one word, with no
arguments.  Extra spaces are allowed and ignored at the beginning of the
line, and spaces or tabs at the end.  A comment starting with @{b}#@{ub} may
appear at the end of the line.

   Conditionals affect which lines of the makefile @{b}make@{ub} uses.  If the
condition is true, @{b}make@{ub} reads the lines of the @{I}TEXT-IF-TRUE@{ui} as part of
the makefile; if the condition is false, @{b}make@{ub} ignores those lines
completely.  It follows that syntactic units of the makefile, such as
rules, may safely be split across the beginning or the end of the
conditional.

   @{b}make@{ub} evaluates conditionals when it reads a makefile.  Consequently,
you cannot use automatic variables in the tests of conditionals because
they are not defined until commands are run (see @{"Automatic Variables" Link "Automatic"}).

   To prevent intolerable confusion, it is not permitted to start a
conditional in one makefile and end it in another.  However, you may
write an @{b}include@{ub} directive within a conditional, provided you do not
attempt to terminate the conditional inside the included file.


@EndNode

@Node "Testing Flags" "make.guide/Testing Flags"
@Prev "Conditional Syntax"
@Toc "Conditionals"

Conditionals that Test Flags
============================

   You can write a conditional that tests @{b}make@{ub} command flags such as @{b}-t@{ub}
by using the variable @{b}MAKEFLAGS@{ub} together with the @{b}findstring@{ub} function
(see @{"Functions for String Substitution and Analysis" Link "Text Functions"}).  This is useful
when @{b}touch@{ub} is not enough to make a file appear up to date.

   The @{b}findstring@{ub} function determines whether one string appears as a
substring of another.  If you want to test for the @{b}-t@{ub} flag, use @{b}t@{ub} as
the first string and the value of @{b}MAKEFLAGS@{ub} as the other.

   For example, here is how to arrange to use @{b}ranlib -t@{ub} to finish
marking an archive file up to date:

     archive.a: ...
ifneq (,$(findstring t,$(MAKEFLAGS)))
        +touch archive.a
        +ranlib -t archive.a
else
        ranlib archive.a
endif

The @{b}+@{ub} prefix marks those command lines as "recursive" so that they will
be executed despite use of the @{b}-t@{ub} flag.  See @{"Recursive Use of make" Link "Recursion"}.


@EndNode

@Node "Functions" "make.guide/Functions"
@Next "Running"
@Prev "Conditionals"
@Toc "Main"

Functions for Transforming Text
*******************************

   @{i}Functions@{ui} allow you to do text processing in the makefile to compute
the files to operate on or the commands to use.  You use a function in a
@{i}function call@{ui}, where you give the name of the function and some text
(the @{i}arguments@{ui}) for the function to operate on.  The result of the
function's processing is substituted into the makefile at the point of
the call, just as a variable might be substituted.


 @{" Syntax of Functions       " Link "Syntax of Functions"}  How to write a function call.
 @{" Text Functions            " Link "Text Functions"}  General-purpose text manipulation functions.
 @{" File Name Functions       " Link "File Name Functions"}  Functions for manipulating file names.
 @{" Foreach Function          " Link "Foreach Function"}  Repeat some text with controlled variation.
 @{" Origin Function           " Link "Origin Function"}  Find where a variable got its value.
 @{" Shell Function            " Link "Shell Function"}  Substitute the output of a shell command.


@EndNode

@Node "Syntax of Functions" "make.guide/Syntax of Functions"
@Next "Text Functions"
@Toc "Functions"

Function Call Syntax
====================

   A function call resembles a variable reference.  It looks like this:

     $(@{I}FUNCTION@{ui} @{I}ARGUMENTS@{ui})

or like this:

     ${@{I}FUNCTION@{ui} @{I}ARGUMENTS@{ui} }

   Here @{I}FUNCTION@{ui} is a function name; one of a short list of names that
are part of @{b}make@{ub}.  There is no provision for defining new functions.

   The @{I}ARGUMENTS@{ui} are the arguments of the function.  They are separated
from the function name by one or more spaces or tabs, and if there is
more than one argument, then they are separated by commas.  Such
whitespace and commas are not part of an argument's value.  The
delimiters which you use to surround the function call, whether
parentheses or braces, can appear in an argument only in matching pairs;
the other kind of delimiters may appear singly.  If the arguments
themselves contain other function calls or variable references, it is
wisest to use the same kind of delimiters for all the references; write
@{b}$(subst a,b,$(x))@{ub}, not @{b}$(subst a,b,${x})@{ub}.  This is because it
is clearer, and because only one type of delimiter is matched to find
the end of the reference.

   The text written for each argument is processed by substitution of
variables and function calls to produce the argument value, which is
the text on which the function acts.  The substitution is done in the
order in which the arguments appear.

   Commas and unmatched parentheses or braces cannot appear in the text
of an argument as written; leading spaces cannot appear in the text of
the first argument as written.  These characters can be put into the
argument value by variable substitution.  First define variables @{b}comma@{ub}
and @{b}space@{ub} whose values are isolated comma and space characters, then
substitute these variables where such characters are wanted, like this:

     comma:= ,
empty:=
space:= $(empty) $(empty)
foo:= a b c
bar:= $(subst $(space),$(comma),$(foo))
# @{i}bar is now `a,b,c'.@{ui}

Here the @{b}subst@{ub} function replaces each space with a comma, through the
value of @{b}foo@{ub}, and substitutes the result.


@EndNode

@Node "Text Functions" "make.guide/Text Functions"
@Next "File Name Functions"
@Prev "Syntax of Functions"
@Toc "Functions"

Functions for String Substitution and Analysis
==============================================

   Here are some functions that operate on strings:

@{b}$(subst @{I}FROM@{ui},@{I}TO@{ui},@{I}TEXT@{ui})@{ub}
     Performs a textual replacement on the text @{I}TEXT@{ui}: each occurrence
     of @{I}FROM@{ui} is replaced by @{I}TO@{ui}.  The result is substituted for the
     function call.  For example,

          $(subst ee,EE,feet on the street)

     substitutes the string @{b}fEEt on the strEEt@{ub}.

@{b}$(patsubst @{I}PATTERN@{ui},@{I}REPLACEMENT@{ui},@{I}TEXT@{ui})@{ub}
     Finds whitespace-separated words in @{I}TEXT@{ui} that match @{I}PATTERN@{ui} and
     replaces them with @{I}REPLACEMENT@{ui}.  Here @{I}PATTERN@{ui} may contain a @{b}%@{ub}
     which acts as a wildcard, matching any number of any characters
     within a word.  If @{I}REPLACEMENT@{ui} also contains a @{b}%@{ub}, the @{b}%@{ub} is replaced
     by the text that matched the @{b}%@{ub} in @{I}PATTERN@{ui}.

     @{b}%@{ub} characters in @{b}patsubst@{ub} function invocations can be quoted with
     preceding backslashes (@{b}\\ @{ub}).  Backslashes that would otherwise
     quote @{b}%@{ub} characters can be quoted with more backslashes.
     Backslashes that quote @{b}%@{ub} characters or other backslashes are
     removed from the pattern before it is compared file names or has a
     stem substituted into it.  Backslashes that are not in danger of
     quoting @{b}%@{ub} characters go unmolested.  For example, the pattern @{b}the\\%weird\\\\%pattern\\\\
     @{ub} has @{b}the%weird\\ @{ub} preceding the operative @{b}%@{ub} character, and @{b}pattern\\\\
     @{ub} following it.  The final two backslashes are left alone
     because they cannot affect any @{b}%@{ub} character.

     Whitespace between words is folded into single space characters;
     leading and trailing whitespace is discarded.

     For example,

          $(patsubst %.c,%.o,x.c.c bar.c)

     produces the value @{b}x.c.o bar.o@{ub}.

     Substitution references (see @{"Substitution References" Link "Substitution Refs"}) are a
     simpler way to get the effect of the @{b}patsubst@{ub} function:

          $(@{I}VAR@{ui}:@{I}PATTERN@{ui}=@{I}REPLACEMENT@{ui})

     is equivalent to

          $(patsubst @{I}PATTERN@{ui},@{I}REPLACEMENT@{ui},$(@{I}VAR@{ui}))

     The second shorthand simplifies one of the most common uses of
     @{b}patsubst@{ub}: replacing the suffix at the end of file names.

          $(@{I}VAR@{ui}:@{I}SUFFIX@{ui}=@{I}REPLACEMENT@{ui})

     is equivalent to

          $(patsubst %@{I}SUFFIX@{ui},%@{I}REPLACEMENT@{ui},$(@{I}VAR@{ui}))

     For example, you might have a list of object files:

          objects = foo.o bar.o baz.o

     To get the list of corresponding source files, you could simply
     write:

          $(objects:.o=.c)

     instead of using the general form:

          $(patsubst %.o,%.c,$(objects))

@{b}$(strip @{I}STRING@{ui})@{ub}
     Removes leading and trailing whitespace from @{I}STRING@{ui} and replaces
     each internal sequence of one or more whitespace characters with a
     single space.  Thus, @{b}$(strip a b  c )@{ub} results in @{b}a b c@{ub}.

     The function @{b}strip@{ub} can be very useful when used in conjunction
     with conditionals.  When comparing something with the empty string
     @{b}@{ub} using @{b}ifeq@{ub} or @{b}ifneq@{ub}, you usually want a string of just
     whitespace to match the empty string (see @{"Conditionals" Link "Conditionals"}).

     Thus, the following may fail to have the desired results:

          .PHONY: all
ifneq   "$(needs_made)" ""
all: $(needs_made)
else
all:;@echo 'Nothing to make!'
endif

     Replacing the variable reference @{b}$(needs_made)@{ub} with the function
     call @{b}$(strip $(needs_made))@{ub} in the @{b}ifneq@{ub} directive would make it
     more robust.

@{b}$(findstring @{I}FIND@{ui},@{I}IN@{ui})@{ub}
     Searches @{I}IN@{ui} for an occurrence of @{I}FIND@{ui}.  If it occurs, the value is
     @{I}FIND@{ui}; otherwise, the value is empty.  You can use this
     function in a conditional to test for the presence of a specific
     substring in a given string.  Thus, the two examples,

          $(findstring a,a b c)
$(findstring a,b c)

     produce the values @{b}a@{ub} and @{b}@{ub} (the empty string), respectively.  See
     @{"Testing Flags" Link "Testing Flags"}, for a practical application of @{b}findstring@{ub}.

@{b}$(filter @{I}PATTERN@{ui} ...,@{I}TEXT@{ui})@{ub}
     Removes all whitespace-separated words in @{I}TEXT@{ui} that do @{i}not@{ui} match
     any of the @{I}PATTERN@{ui} words, returning only matching words.  The
     patterns are written using @{b}%@{ub}, just like the patterns used in the
     @{b}patsubst@{ub} function above.

     The @{b}filter@{ub} function can be used to separate out different types of
     strings (such as file names) in a variable.  For example:

          sources := foo.c bar.c baz.s ugh.h
foo: $(sources)
        cc $(filter %.c %.s,$(sources)) -o foo

     says that @{b}foo@{ub} depends of @{b}foo.c@{ub}, @{b}bar.c@{ub}, @{b}baz.s@{ub} and @{b}ugh.h@{ub} but only
     @{b}foo.c@{ub}, @{b}bar.c@{ub} and @{b}baz.s@{ub} should be specified in the command
     to the compiler.

@{b}$(filter-out @{I}PATTERN@{ui} ...,@{I}TEXT@{ui})@{ub}
     Removes all whitespace-separated words in @{I}TEXT@{ui} that @{i}do@{ui} match the
     @{I}PATTERN@{ui} words, returning only the words that @{i}do not@{ui}
     match.  This is the exact opposite of the @{b}filter@{ub} function.

     For example, given:

          objects=main1.o foo.o main2.o bar.o
mains=main1.o main2.o

     the following generates a list which contains all the object files
     not in @{b}mains@{ub}:

          $(filter-out $(mains),$(objects))

@{b}$(sort @{I}LIST@{ui})@{ub}
     Sorts the words of @{I}LIST@{ui} in lexical order, removing duplicate
     words.  The output is a list of words separated by single spaces.
     Thus,

          $(sort foo bar lose)

     returns the value @{b}bar foo lose@{ub}.

     Incidentally, since @{b}sort@{ub} removes duplicate words, you can use it
     for this purpose even if you don't care about the sort order.

   Here is a realistic example of the use of @{b}subst@{ub} and @{b}patsubst@{ub}.
Suppose that a makefile uses the @{b}VPATH@{ub} variable to specify a list of
directories that @{b}make@{ub} should search for dependency files (see
@{"VPATH Search Path for All Dependencies" Link "General Search"}).  This example shows how to
tell the C compiler to search for header files in the same list of
directories.

   The value of @{b}VPATH@{ub} is a list of directories separated by colons,
such as @{b}src:../headers@{ub}.  First, the @{b}subst@{ub} function is used to change
the colons to spaces:

     $(subst :, ,$(VPATH))

This produces @{b}src ../headers@{ub}.  Then @{b}patsubst@{ub} is used to turn each
directory name into a @{b}-I@{ub} flag.  These can be added to the value of the
variable @{b}CFLAGS@{ub}, which is passed automatically to the C compiler, like
this:

     override CFLAGS += $(patsubst %,-I%,$(subst :, ,$(VPATH)))

The effect is to append the text @{b}-Isrc -I../headers@{ub} to the previously
given value of @{b}CFLAGS@{ub}.  The @{b}override@{ub} directive is used so that the new
value is assigned even if the previous value of @{b}CFLAGS@{ub} was specified
with a command argument (see @{"The override Directive" Link "Override Directive"}).


@EndNode

@Node "File Name Functions" "make.guide/File Name Functions"
@Next "Foreach Function"
@Prev "Text Functions"
@Toc "Functions"

Functions for File Names
========================

   Several of the built-in expansion functions relate specifically to
taking apart file names or lists of file names.

   Each of the following functions performs a specific transformation
on a file name.  The argument of the function is regarded as a series
of file names, separated by whitespace.  (Leading and trailing
whitespace is ignored.)  Each file name in the series is transformed in
the same way and the results are concatenated with single spaces between them.

@{b}$(dir @{I}NAMES@{ui} ...)@{ub}
     Extracts the directory-part of each file name in @{I}NAMES@{ui}.  The
     directory-part of the file name is everything up through (and
     including) the last slash in it.  If the file name contains no
     slash, the directory part is the string @{b}./@{ub}.  For example,

          $(dir src/foo.c hacks)

     produces the result @{b}src/ ./@{ub}.

@{b}$(notdir @{I}NAMES@{ui} ...)@{ub}
     Extracts all but the directory-part of each file name in @{I}NAMES@{ui}.
     If the file name contains no slash, it is left unchanged.
     Otherwise, everything through the last slash is removed from it.

     A file name that ends with a slash becomes an empty string.  This
     is unfortunate, because it means that the result does not always
     have the same number of whitespace-separated file names as the
     argument had; but we do not see any other valid alternative.

     For example,

          $(notdir src/foo.c hacks)

     produces the result @{b}foo.c hacks@{ub}.

@{b}$(suffix @{I}NAMES@{ui} ...)@{ub}
     Extracts the suffix of each file name in @{I}NAMES@{ui}.  If the file name
     contains a period, the suffix is everything starting with the last
     period.  Otherwise, the suffix is the empty string.  This
     frequently means that the result will be empty when @{I}NAMES@{ui} is not,
     and if @{I}NAMES@{ui} contains multiple file names, the result may contain
     fewer file names.

     For example,

          $(suffix src/foo.c src-1.0/bar.c hacks)

     produces the result @{b}.c .c@{ub}.

@{b}$(basename @{I}NAMES@{ui} ...)@{ub}
     Extracts all but the suffix of each file name in @{I}NAMES@{ui}.  If the
     file name contains a period, the basename is everything starting
     up to (and not including) the last period.  Periods in the
     directory part are ignored.  If there is no period, the basename
     is the entire file name.  For example,

          $(basename src/foo.c src-1.0/bar hacks)

     produces the result @{b}src/foo src-1.0/bar hacks@{ub}.

@{b}$(addsuffix @{I}SUFFIX@{ui},@{I}NAMES@{ui} ...)@{ub}
     The argument @{I}NAMES@{ui} is regarded as a series of names, separated by
     whitespace; @{I}SUFFIX@{ui} is used as a unit.  The value of @{I}SUFFIX@{ui} is
     appended to the end of each individual name and the resulting
     larger names are concatenated with single spaces between them.
     For example,

          $(addsuffix .c,foo bar)

     produces the result @{b}foo.c bar.c@{ub}.

@{b}$(addprefix @{I}PREFIX@{ui},@{I}NAMES@{ui} ...)@{ub}
     The argument @{I}NAMES@{ui} is regarded as a series of names, separated by
     whitespace; @{I}PREFIX@{ui} is used as a unit.  The value of @{I}PREFIX@{ui} is
     prepended to the front of each individual name and the resulting
     larger names are concatenated with single spaces between them.
     For example,

          $(addprefix src/,foo bar)

     produces the result @{b}src/foo src/bar@{ub}.

@{b}$(join @{I}LIST1@{ui},@{I}LIST2@{ui})@{ub}
     Concatenates the two arguments word by word: the two first words
     (one from each argument) concatenated form the first word of the
     result, the two second words form the second word of the result,
     and so on.  So the @{I}N@{ui}th word of the result comes from the @{I}N@{ui}th word
     of each argument.  If one argument has more words that the other,
     the extra words are copied unchanged into the result.

     For example, @{b}$(join a b,.c .o)@{ub} produces @{b}a.c b.o@{ub}.

     Whitespace between the words in the lists is not preserved; it is
     replaced with a single space.

     This function can merge the results of the @{b}dir@{ub} and @{b}notdir@{ub}
     functions, to produce the original list of files which was given
     to those two functions.

@{b}$(word @{I}N@{ui},@{I}TEXT@{ui})@{ub}
     Returns the @{I}N@{ui}th word of @{I}TEXT@{ui}.  The legitimate values of @{I}N@{ui} start
     from 1.  If @{I}N@{ui} is bigger than the number of words in @{I}TEXT@{ui}, the
     value is empty.  For example,

          $(word 2, foo bar baz)

     returns @{b}bar@{ub}.

@{b}$(wordlist @{I}S@{ui},@{I}E@{ui},@{I}TEXT@{ui})@{ub}
     Returns the list of words in @{I}TEXT@{ui} starting with word @{I}S@{ui} and ending
     with word @{I}E@{ui} (inclusive).  The legitimate values of @{I}S@{ui} and @{I}E@{ui} start
     from 1.  If @{I}S@{ui} is bigger than the number of words in @{I}TEXT@{ui}, the
     value is empty.  If @{I}E@{ui} is bigger than the number of words in @{I}TEXT@{ui},
     words up to the end of @{I}TEXT@{ui} are returned.  If @{I}S@{ui} is greater than @{I}E@{ui},
     @{b}make@{ub} swaps them for you.  For example,

          $(wordlist 2, 3, foo bar baz)

     returns @{b}bar baz@{ub}.

@{b}$(words @{I}TEXT@{ui})@{ub}
     Returns the number of words in @{I}TEXT@{ui}.  Thus, the last word of @{I}TEXT@{ui}
     is @{b}$(word $(words @{I}TEXT@{ui}),@{I}TEXT@{ui})@{ub}.

@{b}$(firstword @{I}NAMES@{ui} ...)@{ub}
     The argument @{I}NAMES@{ui} is regarded as a series of names, separated by
     whitespace.  The value is the first name in the series.  The rest
     of the names are ignored.

     For example,

          $(firstword foo bar)

     produces the result @{b}foo@{ub}.  Although @{b}$(firstword @{I}TEXT@{ui})@{ub} is the same
     as @{b}$(word 1,@{I}TEXT@{ui})@{ub}, the @{b}firstword@{ub} function is retained for its
     simplicity.

@{b}$(wildcard @{I}PATTERN@{ui})@{ub}
     The argument @{I}PATTERN@{ui} is a file name pattern, typically containing
     wildcard characters (as in shell file name patterns).  The result
     of @{b}wildcard@{ub} is a space-separated list of the names of existing
     files that match the pattern.  See
     @{"Using Wildcard Characters in File Names" Link "Wildcards"}.


@EndNode

@Node "Foreach Function" "make.guide/Foreach Function"
@Next "Origin Function"
@Prev "File Name Functions"
@Toc "Functions"

The @{b}foreach@{ub} Function
====================

   The @{b}foreach@{ub} function is very different from other functions.  It
causes one piece of text to be used repeatedly, each time with a
different substitution performed on it.  It resembles the @{b}for@{ub} command
in the shell @{b}sh@{ub} and the @{b}foreach@{ub} command in the C-shell @{b}csh@{ub}.

   The syntax of the @{b}foreach@{ub} function is:

     $(foreach @{I}VAR@{ui},@{I}LIST@{ui},@{I}TEXT@{ui})

The first two arguments, @{I}VAR@{ui} and @{I}LIST@{ui}, are expanded before anything
else is done; note that the last argument, @{I}TEXT@{ui}, is @{i}not@{ui} expanded at the
same time.  Then for each word of the expanded value of @{I}LIST@{ui}, the
variable named by the expanded value of @{I}VAR@{ui} is set to that word, and
@{I}TEXT@{ui} is expanded.  Presumably @{I}TEXT@{ui} contains references to that
variable, so its expansion will be different each time.

   The result is that @{I}TEXT@{ui} is expanded as many times as there are
whitespace-separated words in @{I}LIST@{ui}.  The multiple expansions of @{I}TEXT@{ui}
are concatenated, with spaces between them, to make the result of
@{b}foreach@{ub}.

   This simple example sets the variable @{b}files@{ub} to the list of all files
in the directories in the list @{b}dirs@{ub}:

     dirs := a b c d
files := $(foreach dir,$(dirs),$(wildcard $(dir)/*))

   Here @{I}TEXT@{ui} is @{b}$(wildcard $(dir)/*)@{ub}.  The first repetition finds the
value @{b}a@{ub} for @{b}dir@{ub}, so it produces the same result as @{b}$(wildcard a/*)@{ub}; the
second repetition produces the result of @{b}$(wildcard b/*)@{ub}; and the
third, that of @{b}$(wildcard c/*)@{ub}.

   This example has the same result (except for setting @{b}dirs@{ub}) as the
following example:

     files := $(wildcard a/* b/* c/* d/*)

   When @{I}TEXT@{ui} is complicated, you can improve readability by giving it a
name, with an additional variable:

     find_files = $(wildcard $(dir)/*)
dirs := a b c d
files := $(foreach dir,$(dirs),$(find_files))

Here we use the variable @{b}find_files@{ub} this way.  We use plain @{b}=@{ub} to define
a recursively-expanding variable, so that its value contains an actual
function call to be reexpanded under the control of @{b}foreach@{ub}; a
simply-expanded variable would not do, since @{b}wildcard@{ub} would be called
only once at the time of defining @{b}find_files@{ub}.

   The @{b}foreach@{ub} function has no permanent effect on the variable @{I}VAR@{ui};
its value and flavor after the @{b}foreach@{ub} function call are the same as
they were beforehand.  The other values which are taken from @{I}LIST@{ui} are
in effect only temporarily, during the execution of @{b}foreach@{ub}.  The
variable @{I}VAR@{ui} is a simply-expanded variable during the execution of
@{b}foreach@{ub}.  If @{I}VAR@{ui} was undefined before the @{b}foreach@{ub} function
call, it is undefined after the call.  See @{"The Two Flavors of Variables" Link "Flavors"}.

   You must take care when using complex variable expressions that
result in variable names because many strange things are valid variable
names, but are probably not what you intended.  For example,

     files := $(foreach Esta escrito en espanol!,b c ch,$(find_files))

might be useful if the value of @{b}find_files@{ub} references the variable
whose name is @{b}Esta escrito en espanol!@{ub} (es un nombre bastante largo,
no?), but it is more likely to be a mistake.


@EndNode

@Node "Origin Function" "make.guide/Origin Function"
@Next "Shell Function"
@Prev "Foreach Function"
@Toc "Functions"

The @{b}origin@{ub} Function
===================

   The @{b}origin@{ub} function is unlike most other functions in that it does
not operate on the values of variables; it tells you something @{i}about@{ui} a
variable.  Specifically, it tells you where it came from.

   The syntax of the @{b}origin@{ub} function is:

     $(origin @{I}VARIABLE@{ui})

   Note that @{I}VARIABLE@{ui} is the @{i}name@{ui} of a variable to inquire about; not a
@{i}reference@{ui} to that variable.  Therefore you would not normally
use a @{b}$@{ub} or parentheses when writing it.  (You can, however, use a
variable reference in the name if you want the name not to be a
constant.)

   The result of this function is a string telling you how the variable
@{I}VARIABLE@{ui} was defined:

@{b}undefined@{ub}
     if @{I}VARIABLE@{ui} was never defined.

@{b}default@{ub}
     if @{I}VARIABLE@{ui} has a default definition, as is usual with @{b}CC@{ub} and so
     on.  See @{"Variables Used by Implicit Rules" Link "Implicit Variables"}.  Note that if you have
     redefined a default variable, the @{b}origin@{ub} function will return the
     origin of the later definition.

@{b}environment@{ub}
     if @{I}VARIABLE@{ui} was defined as an environment variable and the @{b}-e@{ub}
     option is @{i}not@{ui} turned on (see @{"Summary of Options" Link "Options Summary"}).

@{b}environment override@{ub}
     if @{I}VARIABLE@{ui} was defined as an environment variable and the @{b}-e@{ub}
     option @{i}is@{ui} turned on (see @{"Summary of Options" Link "Options Summary"}).

@{b}file@{ub}
     if @{I}VARIABLE@{ui} was defined in a makefile.

@{b}command line@{ub}
     if @{I}VARIABLE@{ui} was defined on the command line.

@{b}override@{ub}
     if @{I}VARIABLE@{ui} was defined with an @{b}override@{ub} directive in a makefile
     (see @{"The override Directive" Link "Override Directive"}).

@{b}automatic@{ub}
     if @{I}VARIABLE@{ui} is an automatic variable defined for the execution of
     the commands for each rule (see @{"Automatic Variables" Link "Automatic"}).

   This information is primarily useful (other than for your curiosity)
to determine if you want to believe the value of a variable.  For
example, suppose you have a makefile @{b}foo@{ub} that includes another makefile
@{b}bar@{ub}.  You want a variable @{b}bletch@{ub} to be defined in @{b}bar@{ub} if you
run the command @{b}make -f bar@{ub}, even if the environment contains a
definition of @{b}bletch@{ub}.  However, if @{b}foo@{ub} defined @{b}bletch@{ub} before including
@{b}bar@{ub}, you do not want to override that definition.  This could
be done by using an @{b}override@{ub} directive in @{b}foo@{ub}, giving that definition
precedence over the later definition in @{b}bar@{ub}; unfortunately, the
@{b}override@{ub} directive would also override any command line
definitions.  So, @{b}bar@{ub} could include:

     ifdef bletch
ifeq "$(origin bletch)" "environment"
bletch = barf, gag, etc.
endif
endif

If @{b}bletch@{ub} has been defined from the environment, this will redefine it.

   If you want to override a previous definition of @{b}bletch@{ub} if it came
from the environment, even under @{b}-e@{ub}, you could instead write:

     ifneq "$(findstring environment,$(origin bletch))" ""
bletch = barf, gag, etc.
endif

   Here the redefinition takes place if @{b}$(origin bletch)@{ub} returns either
@{b}environment@{ub} or @{b}environment override@{ub}.  See
@{"Functions for String Substitution and Analysis" Link "Text Functions"}.


@EndNode

@Node "Shell Function" "make.guide/Shell Function"
@Prev "Origin Function"
@Toc "Functions"

The @{b}shell@{ub} Function
==================

   The @{b}shell@{ub} function is unlike any other function except the @{b}wildcard@{ub}
function (see @{"The Function wildcard" Link "Wildcard Function"}) in that it communicates with the
world outside of @{b}make@{ub}.

   The @{b}shell@{ub} function performs the same function that backquotes (@{b}`@{ub})
perform in most shells: it does @{i}command expansion@{ui}.  This means that it
takes an argument that is a shell command and returns the output of the
command.  The only processing @{b}make@{ub} does on the result, before
substituting it into the surrounding text, is to convert each newline
or carriage-return / newline pair to a single space.  It also removes
the trailing (carriage-return and) newline, if it's the last thing in
the result.

   The commands run by calls to the @{b}shell@{ub} function are run when the
function calls are expanded.  In most cases, this is when the makefile
is read in.  The exception is that function calls in the commands of
the rules are expanded when the commands are run, and this applies to @{b}shell@{ub}
function calls like all others.

   Here are some examples of the use of the @{b}shell@{ub} function:

     contents := $(shell cat foo)

sets @{b}contents@{ub} to the contents of the file @{b}foo@{ub}, with a space (rather
than a newline) separating each line.

     files := $(shell echo *.c)

sets @{b}files@{ub} to the expansion of @{b}*.c@{ub}.  Unless @{b}make@{ub} is using a very
strange shell, this has the same result as @{b}$(wildcard *.c)@{ub}.


@EndNode

@Node "Running" "make.guide/Running"
@Next "Implicit Rules"
@Prev "Functions"
@Toc "Main"

How to Run @{b}make@{ub}
***************

   A makefile that says how to recompile a program can be used in more
than one way.  The simplest use is to recompile every file that is out
of date.  Usually, makefiles are written so that if you run @{b}make@{ub} with
no arguments, it does just that.

   But you might want to update only some of the files; you might want
to use a different compiler or different compiler options; you might
want just to find out which files are out of date without changing them.

   By giving arguments when you run @{b}make@{ub}, you can do any of these
things and many others.

   The exit status of @{b}make@{ub} is always one of three values:
@{b}0@{ub}
     The exit status is zero if @{b}make@{ub} is successful.

@{b}2@{ub}
     The exit status is two if @{b}make@{ub} encounters any errors.  It will
     print messages describing the particular errors.

@{b}1@{ub}
     The exit status is one if you use the @{b}-q@{ub} flag and @{b}make@{ub} determines
     that some target is not already up to date.  See
     @{"Instead of Executing the Commands" Link "Instead of Execution"}.


 @{" Makefile Arguments        " Link "Makefile Arguments"}  How to specify which makefile to use.
 @{" Goals                     " Link "Goals"}  How to use goal arguments to specify which
                                  parts of the makefile to use.
 @{" Instead of Execution      " Link "Instead of Execution"}  How to use mode flags to specify what
                                  kind of thing to do with the commands
                                  in the makefile other than simply
                                  execute them.
 @{" Avoiding Compilation      " Link "Avoiding Compilation"}  How to avoid recompiling certain files.
 @{" Overriding                " Link "Overriding"}  How to override a variable to specify
                                  an alternate compiler and other things.
 @{" Testing                   " Link "Testing"}  How to proceed past some errors, to
                                  test compilation.
 @{" Options Summary           " Link "Options Summary"}  Summary of Options


@EndNode

@Node "Makefile Arguments" "make.guide/Makefile Arguments"
@Next "Goals"
@Toc "Running"

Arguments to Specify the Makefile
=================================

   The way to specify the name of the makefile is with the @{b}-f@{ub} or @{b}--file@{ub}
option (@{b}--makefile@{ub} also works).  For example, @{b}-f altmake@{ub} says to use
the file @{b}altmake@{ub} as the makefile.

   If you use the @{b}-f@{ub} flag several times and follow each @{b}-f@{ub} with an
argument, all the specified files are used jointly as makefiles.

   If you do not use the @{b}-f@{ub} or @{b}--file@{ub} flag, the default is to try
@{b}GNUmakefile@{ub}, @{b}makefile@{ub}, and @{b}Makefile@{ub}, in that order, and use
the first of these three which exists or can be made (see
@{"Writing Makefiles" Link "Makefiles"}).


@EndNode

@Node "Goals" "make.guide/Goals"
@Next "Instead of Execution"
@Prev "Makefile Arguments"
@Toc "Running"

Arguments to Specify the Goals
==============================

   The @{i}goals@{ui} are the targets that @{b}make@{ub} should strive ultimately to
update.  Other targets are updated as well if they appear as
dependencies of goals, or dependencies of dependencies of goals, etc.

   By default, the goal is the first target in the makefile (not
counting targets that start with a period).  Therefore, makefiles are
usually written so that the first target is for compiling the entire
program or programs they describe.  If the first rule in the makefile
has several targets, only the first target in the rule becomes the
default goal, not the whole list.

   You can specify a different goal or goals with arguments to @{b}make@{ub}.
Use the name of the goal as an argument.  If you specify several goals,
@{b}make@{ub} processes each of them in turn, in the order you name
them.

   Any target in the makefile may be specified as a goal (unless it
starts with @{b}-@{ub} or contains an @{b}=@{ub}, in which case it will be parsed as a
switch or variable definition, respectively).  Even targets not in the
makefile may be specified, if @{b}make@{ub} can find implicit rules that say how
to make them.

   @{b}Make@{ub} will set the special variable @{b}MAKECMDGOALS@{ub} to the list of goals
you specified on the command line.  If no goals were given on the
command line, this variable is empty.  Note that this variable should
be used only in special circumstances.

   An example of appropriate use is to avoid including @{b}.d@{ub} files during
@{b}clean@{ub} rules (see @{"Automatic Dependencies" Link "Automatic Dependencies"}), so @{b}make@{ub} won't create
them only to immediately remove them again:

     sources = foo.c bar.c

ifneq ($(MAKECMDGOALS),clean)
include $(sources:.c=.d)
endif

   One use of specifying a goal is if you want to compile only a part of
the program, or only one of several programs.  Specify as a goal each
file that you wish to remake.  For example, consider a directory
containing several programs, with a makefile that starts like this:

     .PHONY: all
all: size nm ld ar as

   If you are working on the program @{b}size@{ub}, you might want to say
@{b}make size@{ub} so that only the files of that program are
recompiled.

   Another use of specifying a goal is to make files that are not
normally made.  For example, there may be a file of debugging output,
or a version of the program that is compiled specially for testing,
which has a rule in the makefile but is not a dependency of the default
goal.

   Another use of specifying a goal is to run the commands associated
with a phony target (see @{"Phony Targets" Link "Phony Targets"}) or empty target (see
@{"Empty Target Files to Record Events" Link "Empty Targets"}).  Many makefiles contain a phony
target named @{b}clean@{ub} which deletes everything except source files.
Naturally, this is done only if you request it explicitly with
@{b}make clean@{ub}.  Following is a list of typical phony and empty
target names.  See @{"Standard Targets" Link "Standard Targets"}, for a detailed list of all the
standard target names which GNU software packages use.

@{b}all@{ub}
     Make all the top-level targets the makefile knows about.

@{b}clean@{ub}
     Delete all files that are normally created by running @{b}make@{ub}.

@{b}mostlyclean@{ub}
     Like @{b}clean@{ub}, but may refrain from deleting a few files that people
     normally don't want to recompile.  For example, the @{b}mostlyclean@{ub}
     target for GCC does not delete @{b}libgcc.a@{ub}, because recompiling it is
     rarely necessary and takes a lot of time.

@{b}distclean@{ub}
@{b}realclean@{ub}
@{b}clobber@{ub}
     Any of these targets might be defined to delete @{i}more@{ui} files than
     @{b}clean@{ub} does.  For example, this would delete configuration
     files or links that you would normally create as preparation for
     compilation, even if the makefile itself cannot create these files.

@{b}install@{ub}
     Copy the executable file into a directory that users typically
     search for commands; copy any auxiliary files that the executable
     uses into the directories where it will look for them.

@{b}print@{ub}
     Print listings of the source files that have changed.

@{b}tar@{ub}
     Create a tar file of the source files.

@{b}shar@{ub}
     Create a shell archive (shar file) of the source files.

@{b}dist@{ub}
     Create a distribution file of the source files.  This might be a
     tar file, or a shar file, or a compressed version of one of the
     above, or even more than one of the above.

@{b}TAGS@{ub}
     Update a tags table for this program.

@{b}check@{ub}
@{b}test@{ub}
     Perform self tests on the program this makefile builds.


@EndNode

@Node "Instead of Execution" "make.guide/Instead of Execution"
@Next "Avoiding Compilation"
@Prev "Goals"
@Toc "Running"

Instead of Executing the Commands
=================================

   The makefile tells @{b}make@{ub} how to tell whether a target is up to date,
and how to update each target.  But updating the targets is not always
what you want.  Certain options specify other activities for @{b}make@{ub}.

@{b}-n@{ub}
@{b}--just-print@{ub}
@{b}--dry-run@{ub}
@{b}--recon@{ub}
     "No-op".  The activity is to print what commands would be used to
     make the targets up to date, but not actually execute them.

@{b}-t@{ub}
@{b}--touch@{ub}
     "Touch".  The activity is to mark the targets as up to date without
     actually changing them.  In other words, @{b}make@{ub} pretends to compile
     the targets but does not really change their contents.

@{b}-q@{ub}
@{b}--question@{ub}
     "Question".  The activity is to find out silently whether the
     targets are up to date already; but execute no commands in either
     case.  In other words, neither compilation nor output will occur.

@{b}-W @{I}FILE@{ui}@{ub}
@{b}--what-if=@{I}FILE@{ui}@{ub}
@{b}--assume-new=@{I}FILE@{ui}@{ub}
@{b}--new-file=@{I}FILE@{ui}@{ub}
     "What if".  Each @{b}-W@{ub} flag is followed by a file name.  The given
     files' modification times are recorded by @{b}make@{ub} as being the present
     time, although the actual modification times remain the same.  You
     can use the @{b}-W@{ub} flag in conjunction with the @{b}-n@{ub} flag to see what
     would happen if you were to modify specific files.

   With the @{b}-n@{ub} flag, @{b}make@{ub} prints the commands that it would normally
execute but does not execute them.

   With the @{b}-t@{ub} flag, @{b}make@{ub} ignores the commands in the rules and uses
(in effect) the command @{b}touch@{ub} for each target that needs to be remade.
The @{b}touch@{ub} command is also printed, unless @{b}-s@{ub} or @{b}.SILENT@{ub} is used.  For
speed, @{b}make@{ub} does not actually invoke the program @{b}touch@{ub}.  It does the
work directly.

   With the @{b}-q@{ub} flag, @{b}make@{ub} prints nothing and executes no commands, but
the exit status code it returns is zero if and only if the targets to
be considered are already up to date.  If the exit status is one, then
some updating needs to be done.  If @{b}make@{ub} encounters an error, the exit
status is two, so you can distinguish an error from a target that is
not up to date.

   It is an error to use more than one of these three flags in the same
invocation of @{b}make@{ub}.

   The @{b}-n@{ub}, @{b}-t@{ub}, and @{b}-q@{ub} options do not affect command lines that begin
with @{b}+@{ub} characters or contain the strings @{b}$(MAKE)@{ub} or @{b} ${MAKE}@{ub}.  Note
that only the line containing the @{b}+@{ub} character or the strings @{b}$(MAKE)@{ub} or
@{b} ${MAKE}@{ub} is run regardless of these options.  Other lines in the
same rule are not run unless they too begin with @{b}+@{ub} or contain @{b}$(MAKE)@{ub} or
@{b} ${MAKE}@{ub} (See @{"How the MAKE Variable Works" Link "MAKE Variable"}.)

   The @{b}-W@{ub} flag provides two features:

   @{b}*@{ub} If you also use the @{b}-n@{ub} or @{b}-q@{ub} flag, you can see what @{b}make@{ub} would do
     if you were to modify some files.

   @{b}*@{ub} Without the @{b}-n@{ub} or @{b}-q@{ub} flag, when @{b}make@{ub} is actually executing
     commands, the @{b}-W@{ub} flag can direct @{b}make@{ub} to act as if some files had
     been modified, without actually modifying the files.

   Note that the options @{b}-p@{ub} and @{b}-v@{ub} allow you to obtain other
information about @{b}make@{ub} or about the makefiles in use (see
@{"Summary of Options" Link "Options Summary"}).


@EndNode

@Node "Avoiding Compilation" "make.guide/Avoiding Compilation"
@Next "Overriding"
@Prev "Instead of Execution"
@Toc "Running"

Avoiding Recompilation of Some Files
====================================

   Sometimes you may have changed a source file but you do not want to
recompile all the files that depend on it.  For example, suppose you
add a macro or a declaration to a header file that many other files
depend on.  Being conservative, @{b}make@{ub} assumes that any change in the
header file requires recompilation of all dependent files, but you know
that they do not need to be recompiled and you would rather not waste
the time waiting for them to compile.

   If you anticipate the problem before changing the header file, you
can use the @{b}-t@{ub} flag.  This flag tells @{b}make@{ub} not to run the commands in
the rules, but rather to mark the target up to date by changing its
last-modification date.  You would follow this procedure:

  1. Use the command @{b}make@{ub} to recompile the source files that really
     need recompilation.

  2. Make the changes in the header files.

  3. Use the command @{b}make -t@{ub} to mark all the object files as up to
     date.  The next time you run @{b}make@{ub}, the changes in the header files
     will not cause any recompilation.

   If you have already changed the header file at a time when some files
do need recompilation, it is too late to do this.  Instead, you can use
the @{b}-o @{I}FILE@{ui}@{ub} flag, which marks a specified file as "old" (see
@{"Summary of Options" Link "Options Summary"}).  This means that the file itself will not be
remade, and nothing else will be remade on its account.  Follow this
procedure:

  1. Recompile the source files that need compilation for reasons
     independent of the particular header file, with @{b}make -o @{I}HEADERFILE@{ui}@{ub}.
     If several header files are involved, use a separate @{b}-o@{ub} option for
     each header file.

  2. Touch all the object files with @{b}make -t@{ub}.


@EndNode

@Node "Overriding" "make.guide/Overriding"
@Next "Testing"
@Prev "Avoiding Compilation"
@Toc "Running"

Overriding Variables
====================

   An argument that contains @{b}=@{ub} specifies the value of a variable: @{b}@{I}V@{ui}=@{I}X@{ui}@{ub}
sets the value of the variable @{I}V@{ui} to @{I}X@{ui}.  If you specify a value in this
way, all ordinary assignments of the same variable in the makefile are
ignored; we say they have been @{i}overridden@{ui} by the command line argument.

   The most common way to use this facility is to pass extra flags to
compilers.  For example, in a properly written makefile, the variable
@{b}CFLAGS@{ub} is included in each command that runs the C compiler,
so a file @{b}foo.c@{ub} would be compiled something like this:

     cc -c $(CFLAGS) foo.c

   Thus, whatever value you set for @{b}CFLAGS@{ub} affects each compilation
that occurs.  The makefile probably specifies the usual value for
@{b}CFLAGS@{ub}, like this:

     CFLAGS=-g

   Each time you run @{b}make@{ub}, you can override this value if you wish.
For example, if you say @{b}make CFLAGS='-g -O'@{ub}, each C compilation will be
done with @{b}cc -c -g -O@{ub}.  (This illustrates how you can use quoting in
the shell to enclose spaces and other special characters in the value
of a variable when you override it.)

   The variable @{b}CFLAGS@{ub} is only one of many standard variables that
exist just so that you can change them this way.  See
@{"Variables Used by Implicit Rules" Link "Implicit Variables"}, for a complete list.

   You can also program the makefile to look at additional variables of
your own, giving the user the ability to control other aspects of how
the makefile works by changing the variables.

   When you override a variable with a command argument, you can define
either a recursively-expanded variable or a simply-expanded variable.
The examples shown above make a recursively-expanded variable; to make a
simply-expanded variable, write @{b}:=@{ub} instead of @{b}=@{ub}.  But, unless you want
to include a variable reference or function call in the @{i}value@{ui} that you
specify, it makes no difference which kind of variable you create.

   There is one way that the makefile can change a variable that you
have overridden.  This is to use the @{b}override@{ub} directive, which is a line
that looks like this: @{b}override @{I}VARIABLE@{ui} = @{I}VALUE@{ui}@{ub} (see
@{"The override Directive" Link "Override Directive"}).


@EndNode

@Node "Testing" "make.guide/Testing"
@Next "Options Summary"
@Prev "Overriding"
@Toc "Running"

Testing the Compilation of a Program
====================================

   Normally, when an error happens in executing a shell command, @{b}make@{ub}
gives up immediately, returning a nonzero status.  No further commands
are executed for any target.  The error implies that the goal cannot be
correctly remade, and @{b}make@{ub} reports this as soon as it knows.

   When you are compiling a program that you have just changed, this is
not what you want.  Instead, you would rather that @{b}make@{ub} try compiling
every file that can be tried, to show you as many compilation errors as
possible.

   On these occasions, you should use the @{b}-k@{ub} or @{b}--keep-going@{ub} flag.
This tells @{b}make@{ub} to continue to consider the other dependencies of the
pending targets, remaking them if necessary, before it gives up and
returns nonzero status.  For example, after an error in compiling one
object file, @{b}make -k@{ub} will continue compiling other object files even
though it already knows that linking them will be impossible.  In
addition to continuing after failed shell commands, @{b}make -k@{ub} will
continue as much as possible after discovering that it does not know
how to make a target or dependency file.  This will always cause an
error message, but without @{b}-k@{ub}, it is a fatal error (see
@{"Summary of Options" Link "Options Summary"}).

   The usual behavior of @{b}make@{ub} assumes that your purpose is to get the
goals up to date; once @{b}make@{ub} learns that this is impossible, it might as
well report the failure immediately.  The @{b}-k@{ub} flag says that the real
purpose is to test as much as possible of the changes made in the
program, perhaps to find several independent problems so that you can
correct them all before the next attempt to compile.  This is why Emacs'
@{b}M-x compile@{ub} command passes the @{b}-k@{ub} flag by default.


@EndNode

@Node "Options Summary" "make.guide/Options Summary"
@Prev "Testing"
@Toc "Running"

Summary of Options
==================

   Here is a table of all the options @{b}make@{ub} understands:

@{b}-b@{ub}
@{b}-m@{ub}
     These options are ignored for compatibility with other versions of
     @{b}make@{ub}.

@{b}-C @{I}DIR@{ui}@{ub}
@{b}--directory=@{I}DIR@{ui}@{ub}
     Change to directory @{I}DIR@{ui} before reading the makefiles.  If multiple
     @{b}-C@{ub} options are specified, each is interpreted relative to
     the previous one: @{b}-C / -C etc@{ub} is equivalent to @{b}-C /etc@{ub}.  This is
     typically used with recursive invocations of @{b}make@{ub} (see
     @{"Recursive Use of make" Link "Recursion"}).

@{b}-d@{ub}
@{b}--debug@{ub}
     Print debugging information in addition to normal processing.  The
     debugging information says which files are being considered for
     remaking, which file-times are being compared and with what
     results, which files actually need to be remade, which implicit
     rules are considered and which are applied--everything interesting
     about how @{b}make@{ub} decides what to do.

@{b}-e@{ub}
@{b}--environment-overrides@{ub}
     Give variables taken from the environment precedence over
     variables from makefiles.  See @{"Variables from the Environment" Link "Environment"}.

@{b}-f @{I}FILE@{ui}@{ub}
@{b}--file=@{I}FILE@{ui}@{ub}
@{b}--makefile=@{I}FILE@{ui}@{ub}
     Read the file named @{I}FILE@{ui} as a makefile.  See @{"Writing Makefiles" Link "Makefiles"}.

@{b}-h@{ub}
@{b}--help@{ub}
     Remind you of the options that @{b}make@{ub} understands and then exit.

@{b}-i@{ub}
@{b}--ignore-errors@{ub}
     Ignore all errors in commands executed to remake files.  See
     @{"Errors in Commands" Link "Errors"}.

@{b}-I @{I}DIR@{ui}@{ub}
@{b}--include-dir=@{I}DIR@{ui}@{ub}
     Specifies a directory @{I}DIR@{ui} to search for included makefiles.  See
     @{"Including Other Makefiles" Link "Include"}.  If several @{b}-I@{ub} options are used to
     specify several directories, the directories are searched in the
     order specified.

@{b}-j [@{I}JOBS@{ui}]@{ub}
@{b}--jobs=[@{I}JOBS@{ui}]@{ub}
     Specifies the number of jobs (commands) to run simultaneously.
     With no argument, @{b}make@{ub} runs as many jobs simultaneously as
     possible.  If there is more than one @{b}-j@{ub} option, the last one is
     effective.  See @{"Parallel Execution" Link "Parallel"}, for more information on how
     commands are run.  Note that this option is ignored on MS-DOS.

@{b}-k@{ub}
@{b}--keep-going@{ub}
     Continue as much as possible after an error.  While the target that
     failed, and those that depend on it, cannot be remade, the other
     dependencies of these targets can be processed all the same.  See
     @{"Testing the Compilation of a Program" Link "Testing"}.

@{b}-l [@{I}LOAD@{ui}]@{ub}
@{b}--load-average[=@{I}LOAD@{ui}]@{ub}
@{b}--max-load[=@{I}LOAD@{ui}]@{ub}
     Specifies that no new jobs (commands) should be started if there
     are other jobs running and the load average is at least @{I}LOAD@{ui} (a
     floating-point number).  With no argument, removes a previous load
     limit.  See @{"Parallel Execution" Link "Parallel"}.

@{b}-n@{ub}
@{b}--just-print@{ub}
@{b}--dry-run@{ub}
@{b}--recon@{ub}
     Print the commands that would be executed, but do not execute them.
     See @{"Instead of Executing the Commands" Link "Instead of Execution"}.

@{b}-o @{I}FILE@{ui}@{ub}
@{b}--old-file=@{I}FILE@{ui}@{ub}
@{b}--assume-old=@{I}FILE@{ui}@{ub}
     Do not remake the file @{I}FILE@{ui} even if it is older than its
     dependencies, and do not remake anything on account of changes in
     @{I}FILE@{ui}.  Essentially the file is treated as very old and
     its rules are ignored.  See @{"Avoiding Recompilation of Some Files" Link "Avoiding Compilation"}.

@{b}-p@{ub}
@{b}--print-data-base@{ub}
     Print the data base (rules and variable values) that results from
     reading the makefiles; then execute as usual or as otherwise
     specified.  This also prints the version information given by the
     @{b}-v@{ub} switch (see below).  To print the data base without
     trying to remake any files, use @{b}make -p -f /dev/null@{ub}.

@{b}-q@{ub}
@{b}--question@{ub}
     "Question mode".  Do not run any commands, or print anything; just
     return an exit status that is zero if the specified targets are
     already up to date, one if any remaking is required, or two if an
     error is encountered.  See @{"Instead of Executing the Commands" Link "Instead of Execution"}.

@{b}-r@{ub}
@{b}--no-builtin-rules@{ub}
     Eliminate use of the built-in implicit rules (see
     @{"Using Implicit Rules" Link "Implicit Rules"}).  You can still define your own by writing
     pattern rules (see @{"Defining and Redefining Pattern Rules" Link "Pattern Rules"}).  The @{b}-r@{ub}
     option also clears out the default list of suffixes for suffix
     rules (see @{"Old-Fashioned Suffix Rules" Link "Suffix Rules"}).  But you can still define
     your own suffixes with a rule for @{b}.SUFFIXES@{ub}, and then define your
     own suffix rules.

@{b}-s@{ub}
@{b}--silent@{ub}
@{b}--quiet@{ub}
     Silent operation; do not print the commands as they are executed.
     See @{"Command Echoing" Link "Echoing"}.

@{b}-S@{ub}
@{b}--no-keep-going@{ub}
@{b}--stop@{ub}
     Cancel the effect of the @{b}-k@{ub} option.  This is never necessary
     except in a recursive @{b}make@{ub} where @{b}-k@{ub} might be inherited from the
     top-level @{b}make@{ub} via @{b}MAKEFLAGS@{ub} (see @{"Recursive Use of make" Link "Recursion"}) or if you
     set @{b}-k@{ub} in @{b}MAKEFLAGS@{ub} in your environment.

@{b}-t@{ub}
@{b}--touch@{ub}
     Touch files (mark them up to date without really changing them)
     instead of running their commands.  This is used to pretend that
     the commands were done, in order to fool future invocations of
     @{b}make@{ub}.  See @{"Instead of Executing the Commands" Link "Instead of Execution"}.

@{b}-v@{ub}
@{b}--version@{ub}
     Print the version of the @{b}make@{ub} program plus a copyright, a list of
     authors, and a notice that there is no warranty; then exit.

@{b}-w@{ub}
@{b}--print-directory@{ub}
     Print a message containing the working directory both before and
     after executing the makefile.  This may be useful for tracking
     down errors from complicated nests of recursive @{b}make@{ub} commands.
     See @{"Recursive Use of make" Link "Recursion"}.  (In practice, you rarely need to
     specify this option since @{b}make@{ub} does it for you; see
     @{"The --print-directory Option" Link "-w Option"}.)

@{b}--no-print-directory@{ub}
     Disable printing of the working directory under @{b}-w@{ub}.  This option
     is useful when @{b}-w@{ub} is turned on automatically, but you do not want
     to see the extra messages.  See @{"The --print-directory Option" Link "-w Option"}.

@{b}-W @{I}FILE@{ui}@{ub}
@{b}--what-if=@{I}FILE@{ui}@{ub}
@{b}--new-file=@{I}FILE@{ui}@{ub}
@{b}--assume-new=@{I}FILE@{ui}@{ub}
     Pretend that the target @{I}FILE@{ui} has just been modified.  When used
     with the @{b}-n@{ub} flag, this shows you what would happen if you were to
     modify that file.  Without @{b}-n@{ub}, it is almost the same as running a
     @{b}touch@{ub} command on the given file before running @{b}make@{ub},
     except that the modification time is changed only in the
     imagination of @{b}make@{ub}.  See @{"Instead of Executing the Commands" Link "Instead of Execution"}.

@{b}--warn-undefined-variables@{ub}
     Issue a warning message whenever @{b}make@{ub} sees a reference to an
     undefined variable.  This can be helpful when you are trying to
     debug makefiles which use variables in complex ways.


@EndNode

@Node "Implicit Rules" "make.guide/Implicit Rules"
@Next "Archives"
@Prev "Running"
@Toc "Main"

Using Implicit Rules
********************

   Certain standard ways of remaking target files are used very often.
For example, one customary way to make an object file is from a C
source file using the C compiler, @{b}cc@{ub}.

   @{i}Implicit rules@{ui} tell @{b}make@{ub} how to use customary techniques so that you
do not have to specify them in detail when you want to use them.  For
example, there is an implicit rule for C compilation.  File names
determine which implicit rules are run.  For example, C compilation
typically takes a @{b}.c@{ub} file and makes a @{b}.o@{ub} file.  So @{b}make@{ub} applies the
implicit rule for C compilation when it sees this combination of file
name endings.

   A chain of implicit rules can apply in sequence; for example, @{b}make@{ub}
will remake a @{b}.o@{ub} file from a @{b}.y@{ub} file by way of a @{b}.c@{ub} file.

   The built-in implicit rules use several variables in their commands
so that, by changing the values of the variables, you can change the
way the implicit rule works.  For example, the variable @{b}CFLAGS@{ub} controls
the flags given to the C compiler by the implicit rule for C
compilation.

   You can define your own implicit rules by writing @{i}pattern rules@{ui}.

   @{i}Suffix rules@{ui} are a more limited way to define implicit rules.
Pattern rules are more general and clearer, but suffix rules are
retained for compatibility.


 @{" Using Implicit            " Link "Using Implicit"}  How to use an existing implicit rule
                                  to get the commands for updating a file.
 @{" Catalogue of Rules        " Link "Catalogue of Rules"}  A list of built-in implicit rules.
 @{" Implicit Variables        " Link "Implicit Variables"}  How to change what predefined rules do.
 @{" Chained Rules             " Link "Chained Rules"}  How to use a chain of implicit rules.
 @{" Pattern Rules             " Link "Pattern Rules"}  How to define new implicit rules.
 @{" Last Resort               " Link "Last Resort"}  How to defining commands for rules
                                  which cannot find any.
 @{" Suffix Rules              " Link "Suffix Rules"}  The old-fashioned style of implicit rule.
 @{" Implicit Rule Search      " Link "Implicit Rule Search"}  The precise algorithm for applying
                                  implicit rules.


@EndNode

@Node "Using Implicit" "make.guide/Using Implicit"
@Next "Catalogue of Rules"
@Toc "Implicit Rules"

Using Implicit Rules
====================

   To allow @{b}make@{ub} to find a customary method for updating a target file,
all you have to do is refrain from specifying commands yourself.  Either
write a rule with no command lines, or don't write a rule at all.  Then
@{b}make@{ub} will figure out which implicit rule to use based on which
kind of source file exists or can be made.

   For example, suppose the makefile looks like this:

     foo : foo.o bar.o
        cc -o foo foo.o bar.o $(CFLAGS) $(LDFLAGS)

Because you mention @{b}foo.o@{ub} but do not give a rule for it, @{b}make@{ub} will
automatically look for an implicit rule that tells how to update it.
This happens whether or not the file @{b}foo.o@{ub} currently exists.

   If an implicit rule is found, it can supply both commands and one or
more dependencies (the source files).  You would want to write a rule
for @{b}foo.o@{ub} with no command lines if you need to specify additional
dependencies, such as header files, that the implicit rule cannot
supply.

   Each implicit rule has a target pattern and dependency patterns.
There may be many implicit rules with the same target pattern.  For
example, numerous rules make @{b}.o@{ub} files: one, from a @{b}.c@{ub} file with the C
compiler; another, from a @{b}.p@{ub} file with the Pascal compiler; and so on.
The rule that actually applies is the one whose dependencies exist or
can be made.  So, if you have a file @{b}foo.c@{ub}, @{b}make@{ub} will run the C
compiler; otherwise, if you have a file @{b}foo.p@{ub}, @{b}make@{ub} will run the Pascal
compiler; and so on.

   Of course, when you write the makefile, you know which implicit rule
you want @{b}make@{ub} to use, and you know it will choose that one because you
know which possible dependency files are supposed to exist.  See
@{"Catalogue of Implicit Rules" Link "Catalogue of Rules"}, for a catalogue of all the predefined
implicit rules.

   Above, we said an implicit rule applies if the required dependencies
"exist or can be made".  A file "can be made" if it is mentioned
explicitly in the makefile as a target or a dependency, or if an
implicit rule can be recursively found for how to make it.  When an
implicit dependency is the result of another implicit rule, we say that
@{i}chaining@{ui} is occurring.  See @{"Chains of Implicit Rules" Link "Chained Rules"}.

   In general, @{b}make@{ub} searches for an implicit rule for each target, and
for each double-colon rule, that has no commands.  A file that is
mentioned only as a dependency is considered a target whose rule
specifies nothing, so implicit rule search happens for it.  See
@{"Implicit Rule Search Algorithm" Link "Implicit Rule Search"}, for the details of how the search is
done.

   Note that explicit dependencies do not influence implicit rule
search.  For example, consider this explicit rule:

     foo.o: foo.p

The dependency on @{b}foo.p@{ub} does not necessarily mean that @{b}make@{ub} will remake
@{b}foo.o@{ub} according to the implicit rule to make an object file, a
@{b}.o@{ub} file, from a Pascal source file, a @{b}.p@{ub} file.  For example,
if @{b}foo.c@{ub} also exists, the implicit rule to make an object file from a C
source file is used instead, because it appears before the Pascal rule
in the list of predefined implicit rules (see
@{"Catalogue of Implicit Rules" Link "Catalogue of Rules"}).

   If you do not want an implicit rule to be used for a target that has
no commands, you can give that target empty commands by writing a
semicolon (see @{"Defining Empty Commands" Link "Empty Commands"}).


@EndNode

@Node "Catalogue of Rules" "make.guide/Catalogue of Rules"
@Next "Implicit Variables"
@Prev "Using Implicit"
@Toc "Implicit Rules"

Catalogue of Implicit Rules
===========================

   Here is a catalogue of predefined implicit rules which are always
available unless the makefile explicitly overrides or cancels them.
See @{"Canceling Implicit Rules" Link "Canceling Rules"}, for information on canceling or
overriding an implicit rule.  The @{b}-r@{ub} or @{b}--no-builtin-rules@{ub} option
cancels all predefined rules.

   Not all of these rules will always be defined, even when the @{b}-r@{ub}
option is not given.  Many of the predefined implicit rules are
implemented in @{b}make@{ub} as suffix rules, so which ones will be defined
depends on the @{i}suffix list@{ui} (the list of dependencies of the special
target @{b}.SUFFIXES@{ub}).  The default suffix list is: @{b}.out@{ub}, @{b}.a@{ub}, @{b}.ln@{ub}, @{b}.o@{ub}, @{b}.c@{ub},
@{b}.cc@{ub}, @{b}.C@{ub}, @{b}.p@{ub}, @{b}.f@{ub}, @{b}.F@{ub}, @{b}.r@{ub}, @{b}.y@{ub}, @{b}.l@{ub}, @{b}.s@{ub}, @{b}.S@{ub}, @{b}.mod@{ub}, @{b}.sym@{ub}, @{b}.def@{ub}, @{b}.h@{ub},
@{b}.info@{ub}, @{b}.dvi@{ub}, @{b}.tex@{ub}, @{b}.texinfo@{ub}, @{b}.texi@{ub}, @{b}.txinfo@{ub}, @{b}.w@{ub}, @{b}.ch@{ub} @{b}.web@{ub},
@{b}.sh@{ub}, @{b}.elc@{ub}, @{b}.el@{ub}.  All of the implicit rules described below
whose dependencies have one of these suffixes are actually suffix
rules.  If you modify the suffix list, the only predefined suffix rules
in effect will be those named by one or two of the suffixes that are on
the list you specify; rules whose suffixes fail to be on the list are
disabled.  See @{"Old-Fashioned Suffix Rules" Link "Suffix Rules"}, for full details on suffix
rules.

Compiling C programs
     @{b}@{I}N@{ui}.o@{ub} is made automatically from @{b}@{I}N@{ui}.c@{ub} with a command of the form @{b}$(CC) -c $(CPPFLAGS)
     $(CFLAGS)@{ub}.

Compiling C++ programs
     @{b}@{I}N@{ui}.o@{ub} is made automatically from @{b}@{I}N@{ui}.cc@{ub} or @{b}@{I}N@{ui}.C@{ub} with a command of the
     form @{b}$(CXX) -c $(CPPFLAGS) $(CXXFLAGS)@{ub}.  We encourage you to use
     the suffix @{b}.cc@{ub} for C++ source files instead of @{b}.C@{ub}.

Compiling Pascal programs
     @{b}@{I}N@{ui}.o@{ub} is made automatically from @{b}@{I}N@{ui}.p@{ub} with the command @{b}$(PC) -c
     $(PFLAGS)@{ub}.

Compiling Fortran and Ratfor programs
     @{b}@{I}N@{ui}.o@{ub} is made automatically from @{b}@{I}N@{ui}.r@{ub}, @{b}@{I}N@{ui}.F@{ub} or @{b}@{I}N@{ui}.f@{ub} by running the
     Fortran compiler.  The precise command used is as follows:

    @{b}.f@{ub}
          @{b}$(FC) -c $(FFLAGS)@{ub}.

    @{b}.F@{ub}
          @{b}$(FC) -c $(FFLAGS) $(CPPFLAGS)@{ub}.

    @{b}.r@{ub}
          @{b}$(FC) -c $(FFLAGS) $(RFLAGS)@{ub}.

Preprocessing Fortran and Ratfor programs
     @{b}@{I}N@{ui}.f@{ub} is made automatically from @{b}@{I}N@{ui}.r@{ub} or @{b}@{I}N@{ui}.F@{ub}.  This rule runs just
     the preprocessor to convert a Ratfor or preprocessable Fortran
     program into a strict Fortran program.  The precise command used
     is as follows:

    @{b}.F@{ub}
          @{b}$(FC) -F $(CPPFLAGS) $(FFLAGS)@{ub}.

    @{b}.r@{ub}
          @{b}$(FC) -F $(FFLAGS) $(RFLAGS)@{ub}.

Compiling Modula-2 programs
     @{b}@{I}N@{ui}.sym@{ub} is made from @{b}@{I}N@{ui}.def@{ub} with a command of the form @{b}$(M2C) $(M2FLAGS)
     $(DEFFLAGS)@{ub}.  @{b}@{I}N@{ui}.o@{ub} is made from @{b}@{I}N@{ui}.mod@{ub}; the form is:
     @{b}$(M2C) $(M2FLAGS) $(MODFLAGS)@{ub}.

Assembling and preprocessing assembler programs
     @{b}@{I}N@{ui}.o@{ub} is made automatically from @{b}@{I}N@{ui}.s@{ub} by running the assembler, @{b}as@{ub}.
     The precise command is @{b}$(AS) $(ASFLAGS)@{ub}.

     @{b}@{I}N@{ui}.s@{ub} is made automatically from @{b}@{I}N@{ui}.S@{ub} by running the C preprocessor,
     @{b}cpp@{ub}.  The precise command is @{b}$(CPP) $(CPPFLAGS)@{ub}.

Linking a single object file
     @{b}@{I}N@{ui}@{ub} is made automatically from @{b}@{I}N@{ui}.o@{ub} by running the linker (usually
     called @{b}ld@{ub}) via the C compiler.  The precise command used is
     @{b}$(CC) $(LDFLAGS) @{I}N@{ui}.o $(LOADLIBES)@{ub}.

     This rule does the right thing for a simple program with only one
     source file.  It will also do the right thing if there are multiple
     object files (presumably coming from various other source files),
     one of which has a name matching that of the executable file.
     Thus,

          x: y.o z.o

     when @{b}x.c@{ub}, @{b}y.c@{ub} and @{b}z.c@{ub} all exist will execute:

          cc -c x.c -o x.o
cc -c y.c -o y.o
cc -c z.c -o z.o
cc x.o y.o z.o -o x
rm -f x.o
rm -f y.o
rm -f z.o

     In more complicated cases, such as when there is no object file
     whose name derives from the executable file name, you must write
     an explicit command for linking.

     Each kind of file automatically made into @{b}.o@{ub} object files will be
     automatically linked by using the compiler (@{b}$(CC)@{ub}, @{b}$(FC)@{ub} or @{b}$(PC)@{ub};
     the C compiler @{b}$(CC)@{ub} is used to assemble @{b}.s@{ub} files) without the @{b}-c@{ub}
     option.  This could be done by using the @{b}.o@{ub} object files as
     intermediates, but it is faster to do the compiling and linking in
     one step, so that's how it's done.

Yacc for C programs
     @{b}@{I}N@{ui}.c@{ub} is made automatically from @{b}@{I}N@{ui}.y@{ub} by running Yacc with the
     command @{b}$(YACC) $(YFLAGS)@{ub}.

Lex for C programs
     @{b}@{I}N@{ui}.c@{ub} is made automatically from @{b}@{I}N@{ui}.l@{ub} by by running Lex.  The actual
     command is @{b}$(LEX) $(LFLAGS)@{ub}.

Lex for Ratfor programs
     @{b}@{I}N@{ui}.r@{ub} is made automatically from @{b}@{I}N@{ui}.l@{ub} by by running Lex.  The actual
     command is @{b}$(LEX) $(LFLAGS)@{ub}.

     The convention of using the same suffix @{b}.l@{ub} for all Lex files
     regardless of whether they produce C code or Ratfor code makes it
     impossible for @{b}make@{ub} to determine automatically which of the two
     languages you are using in any particular case.  If @{b}make@{ub} is called
     upon to remake an object file from a @{b}.l@{ub} file, it must guess which
     compiler to use.  It will guess the C compiler, because that is
     more common.  If you are using Ratfor, make sure @{b}make@{ub} knows this
     by mentioning @{b}@{I}N@{ui}.r@{ub} in the makefile.  Or, if you are using Ratfor
     exclusively, with no C files, remove @{b}.c@{ub} from the list of implicit
     rule suffixes with:

          .SUFFIXES:
.SUFFIXES: .o .r .f .l ...

Making Lint Libraries from C, Yacc, or Lex programs
     @{b}@{I}N@{ui}.ln@{ub} is made from @{b}@{I}N@{ui}.c@{ub} by running @{b}lint@{ub}.  The precise command is
     @{b}$(LINT) $(LINTFLAGS) $(CPPFLAGS) -i@{ub}.  The same command is
     used on the C code produced from @{b}@{I}N@{ui}.y@{ub} or @{b}@{I}N@{ui}.l@{ub}.

TeX and Web
     @{b}@{I}N@{ui}.dvi@{ub} is made from @{b}@{I}N@{ui}.tex@{ub} with the command @{b}$(TEX)@{ub}.  @{b}@{I}N@{ui}.tex@{ub} is made
     from @{b}@{I}N@{ui}.web@{ub} with @{b}$(WEAVE)@{ub}, or from @{b}@{I}N@{ui}.w@{ub} (and from @{b}@{I}N@{ui}.ch@{ub} if it exists
     or can be made) with @{b}$(CWEAVE)@{ub}.  @{b}@{I}N@{ui}.p@{ub} is made from @{b}@{I}N@{ui}.web@{ub} with
     @{b}$(TANGLE)@{ub} and @{b}@{I}N@{ui}.c@{ub} is made from @{b}@{I}N@{ui}.w@{ub} (and from @{b}@{I}N@{ui}.ch@{ub} if it
     exists or can be made) with @{b}$(CTANGLE)@{ub}.

Texinfo and Info
     @{b}@{I}N@{ui}.dvi@{ub} is made from @{b}@{I}N@{ui}.texinfo@{ub}, @{b}@{I}N@{ui}.texi@{ub}, or @{b}@{I}N@{ui}.txinfo@{ub}, with the command
     @{b}$(TEXI2DVI) $(TEXI2DVI_FLAGS)@{ub}.  @{b}@{I}N@{ui}.info@{ub} is made from @{b}@{I}N@{ui}.texinfo@{ub},
     @{b}@{I}N@{ui}.texi@{ub}, or @{b}@{I}N@{ui}.txinfo@{ub}, with the command
     @{b}$(MAKEINFO) $(MAKEINFO_FLAGS)@{ub}.

RCS
     Any file @{b}@{I}N@{ui}@{ub} is extracted if necessary from an RCS file named either
     @{b}@{I}N@{ui},v@{ub} or @{b}RCS/@{I}N@{ui},v@{ub}.  The precise command used is
     @{b}$(CO) $(COFLAGS)@{ub}.  @{b}@{I}N@{ui}@{ub} will not be extracted from RCS if it
     already exists, even if the RCS file is newer.  The rules for RCS
     are terminal (see @{"Match-Anything Pattern Rules" Link "Match-Anything Rules"}), so RCS files
     cannot be generated from another source; they must actually exist.

SCCS
     Any file @{b}@{I}N@{ui}@{ub} is extracted if necessary from an SCCS file named
     either @{b}s.@{I}N@{ui}@{ub} or @{b}SCCS/s.@{I}N@{ui}@{ub}.  The precise command used is
     @{b}$(GET) $(GFLAGS)@{ub}.  The rules for SCCS are terminal (see
     @{"Match-Anything Pattern Rules" Link "Match-Anything Rules"}), so SCCS files cannot be generated
     from another source; they must actually exist.

     For the benefit of SCCS, a file @{b}@{I}N@{ui}@{ub} is copied from @{b}@{I}N@{ui}.sh@{ub} and made
     executable (by everyone).  This is for shell scripts that are
     checked into SCCS.  Since RCS preserves the execution permission
     of a file, you do not need to use this feature with RCS.

     We recommend that you avoid using of SCCS.  RCS is widely held to
     be superior, and is also free.  By choosing free software in place
     of comparable (or inferior) proprietary software, you support the
     free software movement.

   Usually, you want to change only the variables listed in the table
above, which are documented in the following section.

   However, the commands in built-in implicit rules actually use
variables such as @{b}COMPILE.c@{ub}, @{b}LINK.p@{ub}, and @{b}PREPROCESS.S@{ub}, whose values
contain the commands listed above.

   @{b}make@{ub} follows the convention that the rule to compile a @{b} .@{I}X@{ui}@{ub} source
file uses the variable @{b}COMPILE.@{I}X@{ui}@{ub}.  Similarly, the rule to produce an
executable from a @{b} .@{I}X@{ui}@{ub} file uses @{b}LINK.@{I}X@{ui}@{ub}; and the rule to preprocess a @{b}
.@{I}X@{ui}@{ub} file uses @{b}PREPROCESS.@{I}X@{ui}@{ub}.

   Every rule that produces an object file uses the variable
@{b}OUTPUT_OPTION@{ub}.  @{b}make@{ub} defines this variable either to contain @{b}-o
$@@{ub}, or to be empty, depending on a compile-time option.  You need
the @{b}-o@{ub} option to ensure that the output goes into the right file when
the source file is in a different directory, as when using @{b}VPATH@{ub} (see
@{"Directory Search" Link "Directory Search"}).  However, compilers on some systems do not accept a
@{b}-o@{ub} switch for object files.  If you use such a system, and use
@{b}VPATH@{ub}, some compilations will put their output in the wrong
place.  A possible workaround for this problem is to give @{b}OUTPUT_OPTION@{ub}
the value @{b}; mv $*.o $@@{ub}.


@EndNode

@Node "Implicit Variables" "make.guide/Implicit Variables"
@Next "Chained Rules"
@Prev "Catalogue of Rules"
@Toc "Implicit Rules"

Variables Used by Implicit Rules
================================

   The commands in built-in implicit rules make liberal use of certain
predefined variables.  You can alter these variables in the makefile,
with arguments to @{b}make@{ub}, or in the environment to alter how the implicit
rules work without redefining the rules themselves.

   For example, the command used to compile a C source file actually
says @{b}$(CC) -c $(CFLAGS) $(CPPFLAGS)@{ub}.  The default values of the
variables used are @{b}cc@{ub} and nothing, resulting in the command @{b}cc -c@{ub}.  By
redefining @{b}CC@{ub} to @{b}ncc@{ub}, you could cause @{b}ncc@{ub} to be used for all C
compilations performed by the implicit rule.  By redefining @{b}CFLAGS@{ub} to
be @{b}-g@{ub}, you could pass the @{b}-g@{ub} option to each compilation.  @{i}All@{ui} implicit
rules that do C compilation use @{b}$(CC)@{ub} to get the program name for the
compiler and @{i}all@{ui} include @{b}$(CFLAGS)@{ub} among the arguments given to the
compiler.

   The variables used in implicit rules fall into two classes: those
that are names of programs (like @{b}CC@{ub}) and those that contain arguments
for the programs (like @{b}CFLAGS@{ub}).  (The "name of a program" may also
contain some command arguments, but it must start with an actual
executable program name.)  If a variable value contains more than one
argument, separate them with spaces.

   Here is a table of variables used as names of programs in built-in
rules:

@{b}AR@{ub}
     Archive-maintaining program; default @{b}ar@{ub}.

@{b}AS@{ub}
     Program for doing assembly; default @{b}as@{ub}.

@{b}CC@{ub}
     Program for compiling C programs; default @{b}cc@{ub}.

@{b}CXX@{ub}
     Program for compiling C++ programs; default @{b}g++@{ub}.

@{b}CO@{ub}
     Program for extracting a file from RCS; default @{b}co@{ub}.

@{b}CPP@{ub}
     Program for running the C preprocessor, with results to standard
     output; default @{b}$(CC) -E@{ub}.

@{b}FC@{ub}
     Program for compiling or preprocessing Fortran and Ratfor programs;
     default @{b}f77@{ub}.

@{b}GET@{ub}
     Program for extracting a file from SCCS; default @{b}get@{ub}.

@{b}LEX@{ub}
     Program to use to turn Lex grammars into C programs or Ratfor
     programs; default @{b}lex@{ub}.

@{b}PC@{ub}
     Program for compiling Pascal programs; default @{b}pc@{ub}.

@{b}YACC@{ub}
     Program to use to turn Yacc grammars into C programs; default @{b}yacc@{ub}.

@{b}YACCR@{ub}
     Program to use to turn Yacc grammars into Ratfor programs; default @{b}yacc
     -r@{ub}.

@{b}MAKEINFO@{ub}
     Program to convert a Texinfo source file into an Info file; default
     @{b}makeinfo@{ub}.

@{b}TEX@{ub}
     Program to make TeX @{i}@{i}dvi@{ui}@{ui} files from TeX source; default @{b}tex@{ub}.

@{b}TEXI2DVI@{ub}
     Program to make TeX @{i}@{i}dvi@{ui}@{ui} files from Texinfo source; default
     @{b}texi2dvi@{ub}.

@{b}WEAVE@{ub}
     Program to translate Web into TeX; default @{b}weave@{ub}.

@{b}CWEAVE@{ub}
     Program to translate C Web into TeX; default @{b}cweave@{ub}.

@{b}TANGLE@{ub}
     Program to translate Web into Pascal; default @{b}tangle@{ub}.

@{b}CTANGLE@{ub}
     Program to translate C Web into C; default @{b}ctangle@{ub}.

@{b}RM@{ub}
     Command to remove a file; default @{b}rm -f@{ub}.

   Here is a table of variables whose values are additional arguments
for the programs above.  The default values for all of these is the
empty string, unless otherwise noted.

@{b}ARFLAGS@{ub}
     Flags to give the archive-maintaining program; default @{b}rv@{ub}.

@{b}ASFLAGS@{ub}
     Extra flags to give to the assembler (when explicitly invoked on a
     @{b}.s@{ub} or @{b}.S@{ub} file).

@{b}CFLAGS@{ub}
     Extra flags to give to the C compiler.

@{b}CXXFLAGS@{ub}
     Extra flags to give to the C++ compiler.

@{b}COFLAGS@{ub}
     Extra flags to give to the RCS @{b}co@{ub} program.

@{b}CPPFLAGS@{ub}
     Extra flags to give to the C preprocessor and programs that use it
     (the C and Fortran compilers).

@{b}FFLAGS@{ub}
     Extra flags to give to the Fortran compiler.

@{b}GFLAGS@{ub}
     Extra flags to give to the SCCS @{b}get@{ub} program.

@{b}LDFLAGS@{ub}
     Extra flags to give to compilers when they are supposed to invoke
     the linker, @{b}ld@{ub}.

@{b}LFLAGS@{ub}
     Extra flags to give to Lex.

@{b}PFLAGS@{ub}
     Extra flags to give to the Pascal compiler.

@{b}RFLAGS@{ub}
     Extra flags to give to the Fortran compiler for Ratfor programs.

@{b}YFLAGS@{ub}
     Extra flags to give to Yacc.


@EndNode

@Node "Chained Rules" "make.guide/Chained Rules"
@Next "Pattern Rules"
@Prev "Implicit Variables"
@Toc "Implicit Rules"

Chains of Implicit Rules
========================

   Sometimes a file can be made by a sequence of implicit rules.  For
example, a file @{b}@{I}N@{ui}.o@{ub} could be made from @{b}@{I}N@{ui}.y@{ub} by running first Yacc and
then @{b}cc@{ub}.  Such a sequence is called a @{i}chain@{ui}.

   If the file @{b}@{I}N@{ui}.c@{ub} exists, or is mentioned in the makefile, no special
searching is required: @{b}make@{ub} finds that the object file can be made by C
compilation from @{b}@{I}N@{ui}.c@{ub}; later on, when considering how to make @{b}@{I}N@{ui}.c@{ub}, the
rule for running Yacc is used.  Ultimately both @{b}@{I}N@{ui}.c@{ub} and @{b}@{I}N@{ui}.o@{ub} are updated.

   However, even if @{b}@{I}N@{ui}.c@{ub} does not exist and is not mentioned, @{b}make@{ub} knows
how to envision it as the missing link between @{b}@{I}N@{ui}.o@{ub} and @{b}@{I}N@{ui}.y@{ub}!  In this
case, @{b}@{I}N@{ui}.c@{ub} is called an @{i}intermediate file@{ui}.  Once @{b}make@{ub} has decided to use
the intermediate file, it is entered in the data base as if it had been
mentioned in the makefile, along with the implicit rule that says how to
create it.

   Intermediate files are remade using their rules just like all other
files.  But intermediate files are treated differently in two ways.

   The first difference is what happens if the intermediate file does
not exist.  If an ordinary file @{I}B@{ui} does not exist, and @{b}make@{ub} considers a
target that depends on @{I}B@{ui}, it invariably creates @{I}B@{ui} and then updates the
target from @{I}B@{ui}.  But if @{I}B@{ui} is an intermediate file, then @{b}make@{ub} can leave
well enough alone.  It won't bother updating @{I}B@{ui}, or the ultimate target,
unless some dependency of @{I}B@{ui} is newer than that target or there is some
other reason to update that target.

   The second difference is that if @{b}make@{ub} @{i}does@{ui} create @{I}B@{ui} in order to
update something else, it deletes @{I}B@{ui} later on after it is no longer
needed.  Therefore, an intermediate file which did not exist before
@{b}make@{ub} also does not exist after @{b}make@{ub}.  @{b}make@{ub} reports the
deletion to you by printing a @{b}rm -f@{ub} command showing which file it is
deleting.

   Ordinarily, a file cannot be intermediate if it is mentioned in the
makefile as a target or dependency.  However, you can explicitly mark a
file as intermediate by listing it as a dependency of the special target
@{b}.INTERMEDIATE@{ub}.  This takes effect even if the file is mentioned
explicitly in some other way.

   You can prevent automatic deletion of an intermediate file by
marking it as a @{i}secondary@{ui} file.  To do this, list it as a dependency of
the special target @{b}.SECONDARY@{ub}.  When a file is secondary, @{b}make@{ub} will not
create the file merely because it does not already exist, but @{b}make@{ub} does
not automatically delete the file.  Marking a file as secondary also
marks it as intermediate.

   You can list the target pattern of an implicit rule (such as @{b}%.o@{ub}) as
a dependency of the special target @{b}.PRECIOUS@{ub} to preserve intermediate
files made by implicit rules whose target patterns match that file's
name; see @{"Interrupts" Link "Interrupts"}.

   A chain can involve more than two implicit rules.  For example, it is
possible to make a file @{b}foo@{ub} from @{b}RCS/foo.y,v@{ub} by running RCS, Yacc and
@{b}cc@{ub}.  Then both @{b}foo.y@{ub} and @{b}foo.c@{ub} are intermediate files that are
deleted at the end.

   No single implicit rule can appear more than once in a chain.  This
means that @{b}make@{ub} will not even consider such a ridiculous thing as making
@{b}foo@{ub} from @{b}foo.o.o@{ub} by running the linker twice.  This constraint has
the added benefit of preventing any infinite loop in the search for an
implicit rule chain.

   There are some special implicit rules to optimize certain cases that
would otherwise be handled by rule chains.  For example, making @{b}foo@{ub} from
@{b}foo.c@{ub} could be handled by compiling and linking with separate
chained rules, using @{b}foo.o@{ub} as an intermediate file.  But what actually
happens is that a special rule for this case does the compilation and
linking with a single @{b}cc@{ub} command.  The optimized rule is used in
preference to the step-by-step chain because it comes earlier in the
ordering of rules.


@EndNode

@Node "Pattern Rules" "make.guide/Pattern Rules"
@Next "Last Resort"
@Prev "Chained Rules"
@Toc "Implicit Rules"

Defining and Redefining Pattern Rules
=====================================

   You define an implicit rule by writing a @{i}pattern rule@{ui}.  A pattern
rule looks like an ordinary rule, except that its target contains the
character @{b}%@{ub} (exactly one of them).  The target is considered a pattern
for matching file names; the @{b}%@{ub} can match any nonempty substring, while
other characters match only themselves.  The dependencies likewise use
@{b}%@{ub} to show how their names relate to the target name.

   Thus, a pattern rule @{b}%.o : %.c@{ub} says how to make any file @{b}@{I}STEM@{ui}.o@{ub} from
another file @{b}@{I}STEM@{ui}.c@{ub}.

   Note that expansion using @{b}%@{ub} in pattern rules occurs @{i}after@{ui} any
variable or function expansions, which take place when the makefile is
read.  See @{"How to Use Variables" Link "Using Variables"}, and @{"Functions for Transforming Text" Link "Functions"}.


 @{" Pattern Intro             " Link "Pattern Intro"}  An introduction to pattern rules.
 @{" Pattern Examples          " Link "Pattern Examples"}  Examples of pattern rules.
 @{" Automatic                 " Link "Automatic"}  How to use automatic variables in the
                                  commands of implicit rules.
 @{" Pattern Match             " Link "Pattern Match"}  How patterns match.
 @{" Match-Anything Rules      " Link "Match-Anything Rules"}  Precautions you should take prior to
                                  defining rules that can match any
                                  target file whatever.
 @{" Canceling Rules           " Link "Canceling Rules"}  How to override or cancel built-in rules.


@EndNode

@Node "Pattern Intro" "make.guide/Pattern Intro"
@Next "Pattern Examples"
@Toc "Pattern Rules"

Introduction to Pattern Rules
-----------------------------

   A pattern rule contains the character @{b}%@{ub} (exactly one of them) in the
target; otherwise, it looks exactly like an ordinary rule.  The target
is a pattern for matching file names; the @{b}%@{ub} matches any nonempty
substring, while other characters match only themselves.

   For example, @{b}%.c@{ub} as a pattern matches any file name that ends in @{b}.c@{ub}.
@{b}s.%.c@{ub} as a pattern matches any file name that starts with @{b}s.@{ub}, ends in
@{b}.c@{ub} and is at least five characters long.  (There must be at
least one character to match the @{b}%@{ub}.)  The substring that the @{b}%@{ub} matches
is called the @{i}stem@{ui}.

   @{b}%@{ub} in a dependency of a pattern rule stands for the same stem that
was matched by the @{b}%@{ub} in the target.  In order for the pattern rule to
apply, its target pattern must match the file name under consideration,
and its dependency patterns must name files that exist or can be made.
These files become dependencies of the target.

   Thus, a rule of the form

     %.o : %.c ; @{I}COMMAND@{ui} ...

specifies how to make a file @{b}@{I}N@{ui}.o@{ub}, with another file @{b}@{I}N@{ui}.c@{ub} as its
dependency, provided that @{b}@{I}N@{ui}.c@{ub} exists or can be made.

   There may also be dependencies that do not use @{b}%@{ub}; such a dependency
attaches to every file made by this pattern rule.  These unvarying
dependencies are useful occasionally.

   A pattern rule need not have any dependencies that contain @{b}%@{ub}, or in
fact any dependencies at all.  Such a rule is effectively a general
wildcard.  It provides a way to make any file that matches the target
pattern.  See @{"Last Resort" Link "Last Resort"}.

   Pattern rules may have more than one target.  Unlike normal rules,
this does not act as many different rules with the same dependencies and
commands.  If a pattern rule has multiple targets, @{b}make@{ub} knows that the
rule's commands are responsible for making all of the targets.  The
commands are executed only once to make all the targets.  When searching
for a pattern rule to match a target, the target patterns of a rule
other than the one that matches the target in need of a rule are
incidental: @{b}make@{ub} worries only about giving commands and dependencies to
the file presently in question.  However, when this file's commands are
run, the other targets are marked as having been updated themselves.

   The order in which pattern rules appear in the makefile is important
since this is the order in which they are considered.  Of equally
applicable rules, only the first one found is used.  The rules you
write take precedence over those that are built in.  Note however, that
a rule whose dependencies actually exist or are mentioned always takes
priority over a rule with dependencies that must be made by chaining
other implicit rules.


@EndNode

@Node "Pattern Examples" "make.guide/Pattern Examples"
@Next "Automatic"
@Prev "Pattern Intro"
@Toc "Pattern Rules"

Pattern Rule Examples
---------------------

   Here are some examples of pattern rules actually predefined in @{b}make@{ub}.
First, the rule that compiles @{b}.c@{ub} files into @{b}.o@{ub} files:

     %.o : %.c
        $(CC) -c $(CFLAGS) $(CPPFLAGS) $< -o $@

defines a rule that can make any file @{b}@{I}X@{ui}.o@{ub} from @{b}@{I}X@{ui}.c@{ub}.  The command uses
the automatic variables @{b} $@@{ub} and @{b}$<@{ub} to substitute the names of the
target file and the source file in each case where the rule applies
(see @{"Automatic Variables" Link "Automatic"}).

   Here is a second built-in rule:

     % :: RCS/%,v
        $(CO) $(COFLAGS) $<

defines a rule that can make any file @{b}@{I}X@{ui}@{ub} whatsoever from a corresponding
file @{b}@{I}X@{ui},v@{ub} in the subdirectory @{b}RCS@{ub}.  Since the target is @{b}%@{ub}, this rule
will apply to any file whatever, provided the appropriate dependency
file exists.  The double colon makes the rule @{i}terminal@{ui}, which means
that its dependency may not be an intermediate file (see
@{"Match-Anything Pattern Rules" Link "Match-Anything Rules"}).

   This pattern rule has two targets:

     %.tab.c %.tab.h: %.y
        bison -d $<

This tells @{b}make@{ub} that the command @{b}bison -d @{I}X@{ui}.y@{ub} will make both @{b}@{I}X@{ui}.tab.c@{ub}
and @{b}@{I}X@{ui}.tab.h@{ub}.  If the file @{b}foo@{ub} depends on the files @{b}parse.tab.o@{ub} and @{b}scan.o@{ub}
and the file @{b}scan.o@{ub} depends on the file @{b}parse.tab.h@{ub}, when @{b}parse.y@{ub} is
changed, the command @{b}bison -d parse.y@{ub} will be executed only once, and
the dependencies of both @{b}parse.tab.o@{ub} and @{b}scan.o@{ub} will be satisfied.
(Presumably the file @{b}parse.tab.o@{ub} will be recompiled from @{b}parse.tab.c@{ub}
and the file @{b}scan.o@{ub} from @{b}scan.c@{ub}, while @{b}foo@{ub} is linked from @{b}parse.tab.o@{ub},
@{b}scan.o@{ub}, and its other dependencies, and it will execute
happily ever after.)


@EndNode

@Node "Automatic" "make.guide/Automatic"
@Next "Pattern Match"
@Prev "Pattern Examples"
@Toc "Pattern Rules"

Automatic Variables
-------------------

   Suppose you are writing a pattern rule to compile a @{b}.c@{ub} file into a
@{b}.o@{ub} file: how do you write the @{b}cc@{ub} command so that it operates
on the right source file name?  You cannot write the name in the
command, because the name is different each time the implicit rule is
applied.

   What you do is use a special feature of @{b}make@{ub}, the @{i}automatic
variables@{ui}.  These variables have values computed afresh for each
rule that is executed, based on the target and dependencies of the
rule.  In this example, you would use @{b} $@@{ub} for the object file name and @{b}$<@{ub}
for the source file name.

   Here is a table of automatic variables:

@{b} $@@{ub}
     The file name of the target of the rule.  If the target is an
     archive member, then @{b} $@@{ub} is the name of the archive file.  In a
     pattern rule that has multiple targets (see
     @{"Introduction to Pattern Rules" Link "Pattern Intro"}), @{b} $@@{ub} is the name of whichever
     target caused the rule's commands to be run.

@{b}$%@{ub}
     The target member name, when the target is an archive member.  See
     @{"Archives" Link "Archives"}.  For example, if the target is @{b}foo.a(bar.o)@{ub} then @{b}$%@{ub} is
     @{b}bar.o@{ub} and @{b} $@@{ub} is @{b}foo.a@{ub}.  @{b}$%@{ub} is empty when the target is
     not an archive member.

@{b}$<@{ub}
     The name of the first dependency.  If the target got its commands
     from an implicit rule, this will be the first dependency added by
     the implicit rule (see @{"Implicit Rules" Link "Implicit Rules"}).

@{b}$?@{ub}
     The names of all the dependencies that are newer than the target,
     with spaces between them.  For dependencies which are archive
     members, only the member named is used (see @{"Archives" Link "Archives"}).

@{b}$^@{ub}
     The names of all the dependencies, with spaces between them.  For
     dependencies which are archive members, only the member named is
     used (see @{"Archives" Link "Archives"}).  A target has only one dependency on each
     other file it depends on, no matter how many times each file is
     listed as a dependency.  So if you list a dependency more than
     once for a target, the value of @{b}$^@{ub} contains just one copy of the
     name.

@{b}$+@{ub}
     This is like @{b}$^@{ub}, but dependencies listed more than once are
     duplicated in the order they were listed in the makefile.  This is
     primarily useful for use in linking commands where it is
     meaningful to repeat library file names in a particular order.

@{b}$*@{ub}
     The stem with which an implicit rule matches (see
     @{"How Patterns Match" Link "Pattern Match"}).  If the target is @{b}dir/a.foo.b@{ub} and the target
     pattern is @{b}a.%.b@{ub} then the stem is @{b}dir/foo@{ub}.  The stem is useful for
     constructing names of related files.

     In a static pattern rule, the stem is part of the file name that
     matched the @{b}%@{ub} in the target pattern.

     In an explicit rule, there is no stem; so @{b}$*@{ub} cannot be determined
     in that way.  Instead, if the target name ends with a recognized
     suffix (see @{"Old-Fashioned Suffix Rules" Link "Suffix Rules"}), @{b}$*@{ub} is set to the target
     name minus the suffix.  For example, if the target name is @{b}foo.c@{ub},
     then @{b}$*@{ub} is set to @{b}foo@{ub}, since @{b}.c@{ub} is a suffix.  GNU @{b}make@{ub} does this
     bizarre thing only for compatibility with other implementations of
     @{b}make@{ub}.  You should generally avoid using @{b}$*@{ub} except in
     implicit rules or static pattern rules.

     If the target name in an explicit rule does not end with a
     recognized suffix, @{b}$*@{ub} is set to the empty string for that rule.

   @{b}$?@{ub} is useful even in explicit rules when you wish to operate on only
the dependencies that have changed.  For example, suppose that an
archive named @{b}lib@{ub} is supposed to contain copies of several object files.
This rule copies just the changed object files into the archive:

     lib: foo.o bar.o lose.o win.o
        ar r lib $?

   Of the variables listed above, four have values that are single file
names, and two have values that are lists of file names.  These six have
variants that get just the file's directory name or just the file name
within the directory.  The variant variables' names are formed by
appending @{b}D@{ub} or @{b}F@{ub}, respectively.  These variants are semi-obsolete in
GNU @{b}make@{ub} since the functions @{b}dir@{ub} and @{b}notdir@{ub} can be used to get a
similar effect (see @{"Functions for File Names" Link "File Name Functions"}).  Note, however, that the
@{b}F@{ub} variants all omit the trailing slash which always appears in
the output of the @{b}dir@{ub} function.  Here is a table of the variants:

@{b}$(@D)@{ub}
     The directory part of the file name of the target, with the
     trailing slash removed.  If the value of @{b} $@@{ub} is @{b}dir/foo.o@{ub} then
     @{b}$(@D)@{ub} is @{b}dir@{ub}.  This value is @{b}.@{ub} if @{b} $@@{ub} does not contain a
     slash.

@{b}$(@F)@{ub}
     The file-within-directory part of the file name of the target.  If
     the value of @{b} $@@{ub} is @{b}dir/foo.o@{ub} then @{b}$(@F)@{ub} is @{b}foo.o@{ub}.  @{b}$(@F)@{ub} is
     equivalent to @{b}$(notdir $@)@{ub}.

@{b}$(*D)@{ub}
@{b}$(*F)@{ub}
     The directory part and the file-within-directory part of the stem;
     @{b}dir@{ub} and @{b}foo@{ub} in this example.

@{b}$(%D)@{ub}
@{b}$(%F)@{ub}
     The directory part and the file-within-directory part of the target
     archive member name.  This makes sense only for archive member
     targets of the form @{b}@{I}ARCHIVE@{ui}(@{I}MEMBER@{ui})@{ub} and is useful only when @{I}MEMBER@{ui}
     may contain a directory name.  (See @{"Archive Members as Targets" Link "Archive Members"}.)

@{b}$(<D)@{ub}
@{b}$(<F)@{ub}
     The directory part and the file-within-directory part of the first
     dependency.

@{b}$(^D)@{ub}
@{b}$(^F)@{ub}
     Lists of the directory parts and the file-within-directory parts
     of all dependencies.

@{b}$(?D)@{ub}
@{b}$(?F)@{ub}
     Lists of the directory parts and the file-within-directory parts of
     all dependencies that are newer than the target.

   Note that we use a special stylistic convention when we talk about
these automatic variables; we write "the value of @{b}$<@{ub}", rather than
"the variable @{b}<@{ub}" as we would write for ordinary variables such as
@{b}objects@{ub} and @{b}CFLAGS@{ub}.  We think this convention looks more
natural in this special case.  Please do not assume it has a deep
significance; @{b}$<@{ub} refers to the variable named @{b}<@{ub} just as @{b}$(CFLAGS)@{ub}
refers to the variable named @{b}CFLAGS@{ub}.  You could just as well use @{b}$(<)@{ub}
in place of @{b}$<@{ub}.


@EndNode

@Node "Pattern Match" "make.guide/Pattern Match"
@Next "Match-Anything Rules"
@Prev "Automatic"
@Toc "Pattern Rules"

How Patterns Match
------------------

   A target pattern is composed of a @{b}%@{ub} between a prefix and a suffix,
either or both of which may be empty.  The pattern matches a file name
only if the file name starts with the prefix and ends with the suffix,
without overlap.  The text between the prefix and the suffix is called
the @{i}stem@{ui}.  Thus, when the pattern @{b}%.o@{ub} matches the file name @{b}test.o@{ub}, the
stem is @{b}test@{ub}.  The pattern rule dependencies are turned into actual
file names by substituting the stem for the character @{b}%@{ub}.  Thus, if in
the same example one of the dependencies is written as @{b}%.c@{ub}, it expands
to @{b}test.c@{ub}.

   When the target pattern does not contain a slash (and it usually does
not), directory names in the file names are removed from the file name
before it is compared with the target prefix and suffix.  After the
comparison of the file name to the target pattern, the directory names,
along with the slash that ends them, are added on to the dependency
file names generated from the pattern rule's dependency patterns and
the file name. The directories are ignored only for the purpose of
finding an implicit rule to use, not in the application of that rule.
Thus, @{b}e%t@{ub} matches the file name @{b}src/eat@{ub}, with @{b}src/a@{ub} as the stem.  When
dependencies are turned into file names, the directories from the stem
are added at the front, while the rest of the stem is substituted for
the @{b}%@{ub}.  The stem @{b}src/a@{ub} with a dependency pattern @{b}c%r@{ub} gives the file name
@{b}src/car@{ub}.


@EndNode

@Node "Match-Anything Rules" "make.guide/Match-Anything Rules"
@Next "Canceling Rules"
@Prev "Pattern Match"
@Toc "Pattern Rules"

Match-Anything Pattern Rules
----------------------------

   When a pattern rule's target is just @{b}%@{ub}, it matches any file name
whatever.  We call these rules @{i}match-anything@{ui} rules.  They are very
useful, but it can take a lot of time for @{b}make@{ub} to think about them,
because it must consider every such rule for each file name listed
either as a target or as a dependency.

   Suppose the makefile mentions @{b}foo.c@{ub}.  For this target, @{b}make@{ub} would
have to consider making it by linking an object file @{b}foo.c.o@{ub}, or by C
compilation-and-linking in one step from @{b}foo.c.c@{ub}, or by Pascal
compilation-and-linking from @{b}foo.c.p@{ub}, and many other possibilities.

   We know these possibilities are ridiculous since @{b}foo.c@{ub} is a C source
file, not an executable.  If @{b}make@{ub} did consider these possibilities, it
would ultimately reject them, because files such as @{b}foo.c.o@{ub} and @{b}foo.c.p@{ub}
would not exist.  But these possibilities are so numerous that @{b}make@{ub}
would run very slowly if it had to consider them.

   To gain speed, we have put various constraints on the way @{b}make@{ub}
considers match-anything rules.  There are two different constraints
that can be applied, and each time you define a match-anything rule you
must choose one or the other for that rule.

   One choice is to mark the match-anything rule as @{i}terminal@{ui} by defining
it with a double colon.  When a rule is terminal, it does not apply
unless its dependencies actually exist.  Dependencies that could be
made with other implicit rules are not good enough.  In other words, no
further chaining is allowed beyond a terminal rule.

   For example, the built-in implicit rules for extracting sources from
RCS and SCCS files are terminal; as a result, if the file @{b}foo.c,v@{ub} does
not exist, @{b}make@{ub} will not even consider trying to make it as an
intermediate file from @{b}foo.c,v.o@{ub} or from @{b}RCS/SCCS/s.foo.c,v@{ub}.  RCS and
SCCS files are generally ultimate source files, which should not be
remade from any other files; therefore, @{b}make@{ub} can save time by not
looking for ways to remake them.

   If you do not mark the match-anything rule as terminal, then it is
nonterminal.  A nonterminal match-anything rule cannot apply to a file
name that indicates a specific type of data.  A file name indicates a
specific type of data if some non-match-anything implicit rule target
matches it.

   For example, the file name @{b}foo.c@{ub} matches the target for the pattern
rule @{b}%.c : %.y@{ub} (the rule to run Yacc).  Regardless of whether this rule
is actually applicable (which happens only if there is a file @{b}foo.y@{ub}),
the fact that its target matches is enough to prevent consideration of
any nonterminal match-anything rules for the file @{b}foo.c@{ub}.  Thus, @{b}make@{ub}
will not even consider trying to make @{b}foo.c@{ub} as an executable file from
@{b}foo.c.o@{ub}, @{b}foo.c.c@{ub}, @{b}foo.c.p@{ub}, etc.

   The motivation for this constraint is that nonterminal match-anything
rules are used for making files containing specific types of data (such
as executable files) and a file name with a recognized suffix indicates
some other specific type of data (such as a C source file).

   Special built-in dummy pattern rules are provided solely to recognize
certain file names so that nonterminal match-anything rules will not be
considered.  These dummy rules have no dependencies and no commands, and
they are ignored for all other purposes.  For example, the built-in
implicit rule

     %.p :

exists to make sure that Pascal source files such as @{b}foo.p@{ub} match a
specific target pattern and thereby prevent time from being wasted
looking for @{b}foo.p.o@{ub} or @{b}foo.p.c@{ub}.

   Dummy pattern rules such as the one for @{b}%.p@{ub} are made for every
suffix listed as valid for use in suffix rules (see
@{"Old-Fashioned Suffix Rules" Link "Suffix Rules"}).


@EndNode

@Node "Canceling Rules" "make.guide/Canceling Rules"
@Prev "Match-Anything Rules"
@Toc "Pattern Rules"

Canceling Implicit Rules
------------------------

   You can override a built-in implicit rule (or one you have defined
yourself) by defining a new pattern rule with the same target and
dependencies, but different commands.  When the new rule is defined, the
built-in one is replaced.  The new rule's position in the sequence of
implicit rules is determined by where you write the new rule.

   You can cancel a built-in implicit rule by defining a pattern rule
with the same target and dependencies, but no commands.  For example,
the following would cancel the rule that runs the assembler:

     %.o : %.s


@EndNode

@Node "Last Resort" "make.guide/Last Resort"
@Next "Suffix Rules"
@Prev "Pattern Rules"
@Toc "Implicit Rules"

Defining Last-Resort Default Rules
==================================

   You can define a last-resort implicit rule by writing a terminal
match-anything pattern rule with no dependencies (see
@{"Match-Anything Rules" Link "Match-Anything Rules"}).  This is just like any other pattern rule; the
only thing special about it is that it will match any target.  So such
a rule's commands are used for all targets and dependencies that have
no commands of their own and for which no other implicit rule applies.

   For example, when testing a makefile, you might not care if the
source files contain real data, only that they exist.  Then you might
do this:

     %::
        touch $@

to cause all the source files needed (as dependencies) to be created
automatically.

   You can instead define commands to be used for targets for which
there are no rules at all, even ones which don't specify commands.  You
do this by writing a rule for the target @{b}.DEFAULT@{ub}.  Such a rule's
commands are used for all dependencies which do not appear as targets in
any explicit rule, and for which no implicit rule applies.  Naturally,
there is no @{b}.DEFAULT@{ub} rule unless you write one.

   If you use @{b}.DEFAULT@{ub} with no commands or dependencies:

     .DEFAULT:

the commands previously stored for @{b}.DEFAULT@{ub} are cleared.  Then @{b}make@{ub}
acts as if you had never defined @{b}.DEFAULT@{ub} at all.

   If you do not want a target to get the commands from a match-anything
pattern rule or @{b}.DEFAULT@{ub}, but you also do not want any commands to be
run for the target, you can give it empty commands (see
@{"Defining Empty Commands" Link "Empty Commands"}).

   You can use a last-resort rule to override part of another makefile.
See @{"Overriding Part of Another Makefile" Link "Overriding Makefiles"}.


@EndNode

@Node "Suffix Rules" "make.guide/Suffix Rules"
@Next "Implicit Rule Search"
@Prev "Last Resort"
@Toc "Implicit Rules"

Old-Fashioned Suffix Rules
==========================

   @{i}Suffix rules@{ui} are the old-fashioned way of defining implicit rules for
@{b}make@{ub}.  Suffix rules are obsolete because pattern rules are more
general and clearer.  They are supported in GNU @{b}make@{ub} for compatibility
with old makefiles.  They come in two kinds: @{i}double-suffix@{ui} and
@{i}single-suffix@{ui}.

   A double-suffix rule is defined by a pair of suffixes: the target
suffix and the source suffix.  It matches any file whose name ends with
the target suffix.  The corresponding implicit dependency is made by
replacing the target suffix with the source suffix in the file name.  A
two-suffix rule whose target and source suffixes are @{b}.o@{ub} and @{b}.c@{ub} is
equivalent to the pattern rule @{b}%.o : %.c@{ub}.

   A single-suffix rule is defined by a single suffix, which is the
source suffix.  It matches any file name, and the corresponding implicit
dependency name is made by appending the source suffix.  A single-suffix
rule whose source suffix is @{b}.c@{ub} is equivalent to the pattern rule @{b}% :
%.c@{ub}.

   Suffix rule definitions are recognized by comparing each rule's
target against a defined list of known suffixes.  When @{b}make@{ub} sees a rule
whose target is a known suffix, this rule is considered a single-suffix
rule.  When @{b}make@{ub} sees a rule whose target is two known suffixes
concatenated, this rule is taken as a double-suffix rule.

   For example, @{b}.c@{ub} and @{b}.o@{ub} are both on the default list of known
suffixes.  Therefore, if you define a rule whose target is @{b}.c.o@{ub}, @{b}make@{ub}
takes it to be a double-suffix rule with source suffix @{b}.c@{ub} and target
suffix @{b}.o@{ub}.  Here is the old-fashioned way to define the rule for
compiling a C source file:

     .c.o:
        $(CC) -c $(CFLAGS) $(CPPFLAGS) -o $@ $<

   Suffix rules cannot have any dependencies of their own.  If they
have any, they are treated as normal files with funny names, not as
suffix rules.  Thus, the rule:

     .c.o: foo.h
        $(CC) -c $(CFLAGS) $(CPPFLAGS) -o $@ $<

tells how to make the file @{b}.c.o@{ub} from the dependency file @{b}foo.h@{ub}, and is
not at all like the pattern rule:

     %.o: %.c foo.h
        $(CC) -c $(CFLAGS) $(CPPFLAGS) -o $@ $<

which tells how to make @{b}.o@{ub} files from @{b}.c@{ub} files, and makes all @{b}.o@{ub} files
using this pattern rule also depend on @{b}foo.h@{ub}.

   Suffix rules with no commands are also meaningless.  They do not
remove previous rules as do pattern rules with no commands (see
@{"Canceling Implicit Rules" Link "Canceling Rules"}).  They simply enter the suffix or pair of
suffixes concatenated as a target in the data base.

   The known suffixes are simply the names of the dependencies of the
special target @{b}.SUFFIXES@{ub}.  You can add your own suffixes by writing a
rule for @{b}.SUFFIXES@{ub} that adds more dependencies, as in:

     .SUFFIXES: .hack .win

which adds @{b}.hack@{ub} and @{b}.win@{ub} to the end of the list of suffixes.

   If you wish to eliminate the default known suffixes instead of just
adding to them, write a rule for @{b}.SUFFIXES@{ub} with no dependencies.  By
special dispensation, this eliminates all existing dependencies of
@{b}.SUFFIXES@{ub}.  You can then write another rule to add the
suffixes you want.  For example,

     .SUFFIXES:            # @{i}Delete the default suffixes@{ui}
.SUFFIXES: .c .o .h   # @{i}Define our suffix list@{ui}

   The @{b}-r@{ub} or @{b}--no-builtin-rules@{ub} flag causes the default list of
suffixes to be empty.

   The variable @{b}SUFFIXES@{ub} is defined to the default list of suffixes
before @{b}make@{ub} reads any makefiles.  You can change the list of suffixes
with a rule for the special target @{b}.SUFFIXES@{ub}, but that does not alter
this variable.


@EndNode

@Node "Implicit Rule Search" "make.guide/Implicit Rule Search"
@Prev "Suffix Rules"
@Toc "Implicit Rules"

Implicit Rule Search Algorithm
==============================

   Here is the procedure @{b}make@{ub} uses for searching for an implicit rule
for a target @{I}T@{ui}.  This procedure is followed for each double-colon rule
with no commands, for each target of ordinary rules none of which have
commands, and for each dependency that is not the target of any rule.
It is also followed recursively for dependencies that come from implicit
rules, in the search for a chain of rules.

   Suffix rules are not mentioned in this algorithm because suffix
rules are converted to equivalent pattern rules once the makefiles have
been read in.

   For an archive member target of the form @{b}@{I}ARCHIVE@{ui}(@{I}MEMBER@{ui})@{ub}, the
following algorithm is run twice, first using the entire target name @{I}T@{ui},
and second using @{b} (@{I}MEMBER@{ui})@{ub} as the target @{I}T@{ui} if the first run found no
rule.

  1. Split @{I}T@{ui} into a directory part, called @{I}D@{ui}, and the rest, called @{I}N@{ui}.
     For example, if @{I}T@{ui} is @{b}src/foo.o@{ub}, then @{I}D@{ui} is @{b}src/@{ub} and @{I}N@{ui} is @{b}foo.o@{ub}.

  2. Make a list of all the pattern rules one of whose targets matches
     @{I}T@{ui} or @{I}N@{ui}.  If the target pattern contains a slash, it is
     matched against @{I}T@{ui}; otherwise, against @{I}N@{ui}.

  3. If any rule in that list is @{i}not@{ui} a match-anything rule, then remove
     all nonterminal match-anything rules from the list.

  4. Remove from the list all rules with no commands.

  5. For each pattern rule in the list:

       a. Find the stem @{I}S@{ui}, which is the nonempty part of @{I}T@{ui} or @{I}N@{ui} matched
          by the @{b}%@{ub} in the target pattern.

       b. Compute the dependency names by substituting @{I}S@{ui} for @{b}%@{ub}; if the
          target pattern does not contain a slash, append @{I}D@{ui} to the
          front of each dependency name.

       c. Test whether all the dependencies exist or ought to exist.
          (If a file name is mentioned in the makefile as a target or
          as an explicit dependency, then we say it ought to exist.)

          If all dependencies exist or ought to exist, or there are no
          dependencies, then this rule applies.

  6. If no pattern rule has been found so far, try harder.  For each
     pattern rule in the list:

       a. If the rule is terminal, ignore it and go on to the next rule.

       b. Compute the dependency names as before.

       c. Test whether all the dependencies exist or ought to exist.

       d. For each dependency that does not exist, follow this algorithm
          recursively to see if the dependency can be made by an
          implicit rule.

       e. If all dependencies exist, ought to exist, or can be made by
          implicit rules, then this rule applies.

  7. If no implicit rule applies, the rule for @{b}.DEFAULT@{ub}, if any,
     applies.  In that case, give @{I}T@{ui} the same commands that @{b}.DEFAULT@{ub}
     has.  Otherwise, there are no commands for @{I}T@{ui}.

   Once a rule that applies has been found, for each target pattern of
the rule other than the one that matched @{I}T@{ui} or @{I}N@{ui}, the @{b}%@{ub} in the pattern
is replaced with @{I}S@{ui} and the resultant file name is stored until the
commands to remake the target file @{I}T@{ui} are executed.  After these
commands are executed, each of these stored file names are entered into
the data base and marked as having been updated and having the same
update status as the file @{I}T@{ui}.

   When the commands of a pattern rule are executed for @{I}T@{ui}, the automatic
variables are set corresponding to the target and dependencies.  See
@{"Automatic Variables" Link "Automatic"}.


@EndNode

@Node "Archives" "make.guide/Archives"
@Next "Features"
@Prev "Implicit Rules"
@Toc "Main"

Using @{b}make@{ub} to Update Archive Files
**********************************

   @{i}Archive files@{ui} are files containing named subfiles called @{i}members@{ui};
they are maintained with the program @{b}ar@{ub} and their main use is as
subroutine libraries for linking.


 @{" Archive Members           " Link "Archive Members"}  Archive members as targets.
 @{" Archive Update            " Link "Archive Update"}  The implicit rule for archive member targets.
 @{" Archive Pitfalls          " Link "Archive Pitfalls"}  Dangers to watch out for when using archives.
 @{" Archive Suffix Rules      " Link "Archive Suffix Rules"}  You can write a special kind of suffix rule
                                  for updating archives.


@EndNode

@Node "Archive Members" "make.guide/Archive Members"
@Next "Archive Update"
@Toc "Archives"

Archive Members as Targets
==========================

   An individual member of an archive file can be used as a target or
dependency in @{b}make@{ub}.  You specify the member named @{I}MEMBER@{ui} in archive
file @{I}ARCHIVE@{ui} as follows:

     @{I}ARCHIVE@{ui}(@{I}MEMBER@{ui})

This construct is available only in targets and dependencies, not in
commands!  Most programs that you might use in commands do not support
this syntax and cannot act directly on archive members.  Only @{b}ar@{ub} and
other programs specifically designed to operate on archives can do so.
Therefore, valid commands to update an archive member target probably
must use @{b}ar@{ub}.  For example, this rule says to create a member @{b}hack.o@{ub} in
archive @{b}foolib@{ub} by copying the file @{b}hack.o@{ub}:

     foolib(hack.o) : hack.o
        ar cr foolib hack.o

   In fact, nearly all archive member targets are updated in just this
way and there is an implicit rule to do it for you.  @{i}Note:@{ui} The @{b}c@{ub} flag
to @{b}ar@{ub} is required if the archive file does not already exist.

   To specify several members in the same archive, you can write all the
member names together between the parentheses.  For example:

     foolib(hack.o kludge.o)

is equivalent to:

     foolib(hack.o) foolib(kludge.o)

   You can also use shell-style wildcards in an archive member
reference.  See @{"Using Wildcard Characters in File Names" Link "Wildcards"}.  For example,
@{b}foolib(*.o)@{ub} expands to all existing members of the @{b}foolib@{ub}
archive whose names end in @{b}.o@{ub}; perhaps @{b}foolib(hack.o) foolib(kludge.o)@{ub}.


@EndNode

@Node "Archive Update" "make.guide/Archive Update"
@Next "Archive Pitfalls"
@Prev "Archive Members"
@Toc "Archives"

Implicit Rule for Archive Member Targets
========================================

   Recall that a target that looks like @{b}@{I}A@{ui}(@{I}M@{ui})@{ub} stands for the member
named @{I}M@{ui} in the archive file @{I}A@{ui}.

   When @{b}make@{ub} looks for an implicit rule for such a target, as a special
feature it considers implicit rules that match @{b} (@{I}M@{ui})@{ub}, as well as those
that match the actual target @{b}@{I}A@{ui}(@{I}M@{ui})@{ub}.

   This causes one special rule whose target is @{b}(%)@{ub} to match.  This
rule updates the target @{b}@{I}A@{ui}(@{I}M@{ui})@{ub} by copying the file @{I}M@{ui} into the archive.
For example, it will update the archive member target @{b}foo.a(bar.o)@{ub} by
copying the @{i}file@{ui} @{b}bar.o@{ub} into the archive @{b}foo.a@{ub} as a @{i}member@{ui} named @{b}bar.o@{ub}.

   When this rule is chained with others, the result is very powerful.
Thus, @{b}make "foo.a(bar.o)"@{ub} (the quotes are needed to protect the @{b}(@{ub} and @{b})@{ub}
from being interpreted specially by the shell) in the presence of a
file @{b}bar.c@{ub} is enough to cause the following commands to be run, even
without a makefile:

     cc -c bar.c -o bar.o
ar r foo.a bar.o
rm -f bar.o

Here @{b}make@{ub} has envisioned the file @{b}bar.o@{ub} as an intermediate file.  See
@{"Chains of Implicit Rules" Link "Chained Rules"}.

   Implicit rules such as this one are written using the automatic
variable @{b}$%@{ub}.  See @{"Automatic Variables" Link "Automatic"}.

   An archive member name in an archive cannot contain a directory
name, but it may be useful in a makefile to pretend that it does.  If
you write an archive member target @{b}foo.a(dir/file.o)@{ub}, @{b}make@{ub} will perform
automatic updating with this command:

     ar r foo.a dir/file.o

which has the effect of copying the file @{b}dir/file.o@{ub} into a member named
@{b}file.o@{ub}.  In connection with such usage, the automatic variables
@{b}%D@{ub} and @{b}%F@{ub} may be useful.


 @{" Archive Symbols           " Link "Archive Symbols"}  How to update archive symbol directories.


@EndNode

@Node "Archive Symbols" "make.guide/Archive Symbols"
@Toc "Archive Update"

Updating Archive Symbol Directories
-----------------------------------

   An archive file that is used as a library usually contains a special
member named @{b}__.SYMDEF@{ub} that contains a directory of the external symbol
names defined by all the other members.  After you update any other
members, you need to update @{b}__.SYMDEF@{ub} so that it will summarize the
other members properly.  This is done by running the @{b}ranlib@{ub} program:

     ranlib @{I}ARCHIVEFILE@{ui}

   Normally you would put this command in the rule for the archive file,
and make all the members of the archive file dependencies of that rule.
For example,

     libfoo.a: libfoo.a(x.o) libfoo.a(y.o) ...
        ranlib libfoo.a

The effect of this is to update archive members @{b}x.o@{ub}, @{b}y.o@{ub}, etc., and
then update the symbol directory member @{b}__.SYMDEF@{ub} by running @{b}ranlib@{ub}.
The rules for updating the members are not shown here; most likely you
can omit them and use the implicit rule which copies files into the
archive, as described in the preceding section.

   This is not necessary when using the GNU @{b}ar@{ub} program, which updates
the @{b}__.SYMDEF@{ub} member automatically.


@EndNode

@Node "Archive Pitfalls" "make.guide/Archive Pitfalls"
@Next "Archive Suffix Rules"
@Prev "Archive Update"
@Toc "Archives"

Dangers When Using Archives
===========================

   It is important to be careful when using parallel execution (the @{b}-j@{ub}
switch; see @{"Parallel Execution" Link "Parallel"}) and archives.  If multiple @{b}ar@{ub} commands
run at the same time on the same archive file, they will not know about
each other and can corrupt the file.

   Possibly a future version of @{b}make@{ub} will provide a mechanism to
circumvent this problem by serializing all commands that operate on the
same archive file.  But for the time being, you must either write your
makefiles to avoid this problem in some other way, or not use @{b}-j@{ub}.


@EndNode

@Node "Archive Suffix Rules" "make.guide/Archive Suffix Rules"
@Prev "Archive Pitfalls"
@Toc "Archives"

Suffix Rules for Archive Files
==============================

   You can write a special kind of suffix rule for dealing with archive
files.  See @{"Suffix Rules" Link "Suffix Rules"}, for a full explanation of suffix rules.
Archive suffix rules are obsolete in GNU @{b}make@{ub}, because pattern rules
for archives are a more general mechanism (see @{"Archive Update" Link "Archive Update"}).  But
they are retained for compatibility with other @{b}make@{ub}s.

   To write a suffix rule for archives, you simply write a suffix rule
using the target suffix @{b}.a@{ub} (the usual suffix for archive files).  For
example, here is the old-fashioned suffix rule to update a library
archive from C source files:

     .c.a:
        $(CC) $(CFLAGS) $(CPPFLAGS) -c $< -o $*.o
        $(AR) r $@ $*.o
        $(RM) $*.o

This works just as if you had written the pattern rule:

     (%.o): %.c
        $(CC) $(CFLAGS) $(CPPFLAGS) -c $< -o $*.o
        $(AR) r $@ $*.o
        $(RM) $*.o

   In fact, this is just what @{b}make@{ub} does when it sees a suffix rule with
@{b}.a@{ub} as the target suffix.  Any double-suffix rule @{b} .@{I}X@{ui}.a@{ub} is
converted to a pattern rule with the target pattern @{b}(%.o)@{ub} and a
dependency pattern of @{b}%.@{I}X@{ui}@{ub}.

   Since you might want to use @{b}.a@{ub} as the suffix for some other kind of
file, @{b}make@{ub} also converts archive suffix rules to pattern rules in the
normal way (see @{"Suffix Rules" Link "Suffix Rules"}).  Thus a double-suffix rule @{b} .@{I}X@{ui}.a@{ub}
produces two pattern rules: @{b}(%.o): %.@{I}X@{ui}@{ub} and @{b}%.a: %.@{I}X@{ui}@{ub}.


@EndNode

@Node "Features" "make.guide/Features"
@Next "Missing"
@Prev "Archives"
@Toc "Main"

Features of GNU @{b}make@{ub}
********************

   Here is a summary of the features of GNU @{b}make@{ub}, for comparison with
and credit to other versions of @{b}make@{ub}.  We consider the features of @{b}make@{ub}
in 4.2 BSD systems as a baseline.  If you are concerned with writing
portable makefiles, you should use only the features of @{b}make@{ub} @{i}not@{ui} listed
here or in @{"Missing" Link "Missing"}.

   Many features come from the version of @{b}make@{ub} in System V.

   @{b}*@{ub} The @{b}VPATH@{ub} variable and its special meaning.  See
     @{"Searching Directories for Dependencies" Link "Directory Search"}.  This feature exists in
     System V @{b}make@{ub}, but is undocumented.  It is documented in 4.3 BSD
     @{b}make@{ub} (which says it mimics System V's @{b}VPATH@{ub} feature).

   @{b}*@{ub} Included makefiles.  See @{"Including Other Makefiles" Link "Include"}.  Allowing
     multiple files to be included with a single directive is a GNU
     extension.

   @{b}*@{ub} Variables are read from and communicated via the environment.  See
     @{"Variables from the Environment" Link "Environment"}.

   @{b}*@{ub} Options passed through the variable @{b}MAKEFLAGS@{ub} to recursive
     invocations of @{b}make@{ub}.  See @{"Communicating Options to a Sub-make" Link "Options-Recursion"}.

   @{b}*@{ub} The automatic variable @{b}$%@{ub} is set to the member name in an archive
     reference.  See @{"Automatic Variables" Link "Automatic"}.

   @{b}*@{ub} The automatic variables @{b} $@@{ub}, @{b}$*@{ub}, @{b}$<@{ub}, @{b}$%@{ub}, and @{b}$?@{ub} have corresponding
     forms like @{b}$(@F)@{ub} and @{b}$(@D)@{ub}.  We have generalized this to @{b}$^@{ub} as an
     obvious extension.  See @{"Automatic Variables" Link "Automatic"}.

   @{b}*@{ub} Substitution variable references.  See
     @{"Basics of Variable References" Link "Reference"}.

   @{b}*@{ub} The command-line options @{b}-b@{ub} and @{b}-m@{ub}, accepted and ignored.  In
     System V @{b}make@{ub}, these options actually do something.

   @{b}*@{ub} Execution of recursive commands to run @{b}make@{ub} via the variable @{b}MAKE@{ub}
     even if @{b}-n@{ub}, @{b}-q@{ub} or @{b}-t@{ub} is specified.  See @{"Recursive Use of make" Link "Recursion"}.

   @{b}*@{ub} Support for suffix @{b}.a@{ub} in suffix rules.  See @{"Archive Suffix Rules" Link "Archive Suffix Rules"}.
     This feature is obsolete in GNU @{b}make@{ub}, because the general feature
     of rule chaining (see @{"Chains of Implicit Rules" Link "Chained Rules"}) allows one pattern
     rule for installing members in an archive (see @{"Archive Update" Link "Archive Update"}) to
     be sufficient.

   @{b}*@{ub} The arrangement of lines and backslash-newline combinations in
     commands is retained when the commands are printed, so they appear
     as they do in the makefile, except for the stripping of initial
     whitespace.

   The following features were inspired by various other versions of
@{b}make@{ub}.  In some cases it is unclear exactly which versions
inspired which others.

   @{b}*@{ub} Pattern rules using @{b}%@{ub}.  This has been implemented in several
     versions of @{b}make@{ub}.  We're not sure who invented it first, but it's
     been spread around a bit.  See
     @{"Defining and Redefining Pattern Rules" Link "Pattern Rules"}.

   @{b}*@{ub} Rule chaining and implicit intermediate files.  This was
     implemented by Stu Feldman in his version of @{b}make@{ub} for AT&T Eighth
     Edition Research Unix, and later by Andrew Hume of AT&T Bell Labs
     in his @{b}mk@{ub} program (where he terms it "transitive closure").  We do
     not really know if we got this from either of them or thought it
     up ourselves at the same time.  See @{"Chains of Implicit Rules" Link "Chained Rules"}.

   @{b}*@{ub} The automatic variable @{b}$^@{ub} containing a list of all dependencies of
     the current target.  We did not invent this, but we have no idea
     who did.  See @{"Automatic Variables" Link "Automatic"}.  The automatic variable @{b}$+@{ub} is a
     simple extension of @{b}$^@{ub}.

   @{b}*@{ub} The "what if" flag (@{b}-W@{ub} in GNU @{b}make@{ub}) was (as far as we know)
     invented by Andrew Hume in @{b}mk@{ub}.  See
     @{"Instead of Executing the Commands" Link "Instead of Execution"}.

   @{b}*@{ub} The concept of doing several things at once (parallelism) exists in
     many incarnations of @{b}make@{ub} and similar programs, though not in the
     System V or BSD implementations.  See @{"Command Execution" Link "Execution"}.

   @{b}*@{ub} Modified variable references using pattern substitution come from
     SunOS 4.  See @{"Basics of Variable References" Link "Reference"}.  This functionality
     was provided in GNU @{b}make@{ub} by the @{b}patsubst@{ub} function before the
     alternate syntax was implemented for compatibility with SunOS 4.
     It is not altogether clear who inspired whom, since GNU @{b}make@{ub} had
     @{b}patsubst@{ub} before SunOS 4 was released.

   @{b}*@{ub} The special significance of @{b}+@{ub} characters preceding command lines
     (see @{"Instead of Executing the Commands" Link "Instead of Execution"}) is mandated by `IEEE
     Standard 1003.2-1992' (POSIX.2).

   @{b}*@{ub} The @{b}+=@{ub} syntax to append to the value of a variable comes from SunOS
     4 @{b}make@{ub}.  See @{"Appending More Text to Variables" Link "Appending"}.

   @{b}*@{ub} The syntax @{b}@{I}ARCHIVE@{ui}(@{I}MEM1@{ui} @{I}MEM2@{ui} ...)@{ub} to list multiple members in a
     single archive file comes from SunOS 4 @{b}make@{ub}.  See @{"Archive Members" Link "Archive Members"}.

   @{b}*@{ub} The @{b}-include@{ub} directive to include makefiles with no error for a
     nonexistent file comes from SunOS 4 @{b}make@{ub}.  (But note that SunOS 4
     @{b}make@{ub} does not allow multiple makefiles to be specified in
     one @{b}-include@{ub} directive.)  The same feature appears with the name
     @{b}sinclude@{ub} in SGI @{b}make@{ub} and perhaps others.

   The remaining features are inventions new in GNU @{b}make@{ub}:

   @{b}*@{ub} Use the @{b}-v@{ub} or @{b}--version@{ub} option to print version and copyright
     information.

   @{b}*@{ub} Use the @{b}-h@{ub} or @{b}--help@{ub} option to summarize the options to @{b}make@{ub}.

   @{b}*@{ub} Simply-expanded variables.  See @{"The Two Flavors of Variables" Link "Flavors"}.

   @{b}*@{ub} Pass command-line variable assignments automatically through the
     variable @{b}MAKE@{ub} to recursive @{b}make@{ub} invocations.  See
     @{"Recursive Use of make" Link "Recursion"}.

   @{b}*@{ub} Use the @{b}-C@{ub} or @{b}--directory@{ub} command option to change directory.  See
     @{"Summary of Options" Link "Options Summary"}.

   @{b}*@{ub} Make verbatim variable definitions with @{b}define@{ub}.  See
     @{"Defining Variables Verbatim" Link "Defining"}.

   @{b}*@{ub} Declare phony targets with the special target @{b}.PHONY@{ub}.

     Andrew Hume of AT&T Bell Labs implemented a similar feature with a
     different syntax in his @{b}mk@{ub} program.  This seems to be a case of
     parallel discovery.  See @{"Phony Targets" Link "Phony Targets"}.

   @{b}*@{ub} Manipulate text by calling functions.  See
     @{"Functions for Transforming Text" Link "Functions"}.

   @{b}*@{ub} Use the @{b}-o@{ub} or @{b}--old-file@{ub} option to pretend a file's
     modification-time is old.  See
     @{"Avoiding Recompilation of Some Files" Link "Avoiding Compilation"}.

   @{b}*@{ub} Conditional execution.

     This feature has been implemented numerous times in various
     versions of @{b}make@{ub}; it seems a natural extension derived from the
     features of the C preprocessor and similar macro languages and is
     not a revolutionary concept.  See @{"Conditional Parts of Makefiles" Link "Conditionals"}.

   @{b}*@{ub} Specify a search path for included makefiles.  See
     @{"Including Other Makefiles" Link "Include"}.

   @{b}*@{ub} Specify extra makefiles to read with an environment variable.  See
     @{"The Variable MAKEFILES" Link "MAKEFILES Variable"}.

   @{b}*@{ub} Strip leading sequences of @{b}./@{ub} from file names, so that @{b}./@{I}FILE@{ui}@{ub} and
     @{b}@{I}FILE@{ui}@{ub} are considered to be the same file.

   @{b}*@{ub} Use a special search method for library dependencies written in the
     form @{b}-l@{I}NAME@{ui}@{ub}.  See @{"Directory Search for Link Libraries" Link "Libraries-Search"}.

   @{b}*@{ub} Allow suffixes for suffix rules (see @{"Old-Fashioned Suffix Rules" Link "Suffix Rules"})
     to contain any characters.  In other versions of @{b}make@{ub}, they must
     begin with @{b}.@{ub} and not contain any @{b}/@{ub} characters.

   @{b}*@{ub} Keep track of the current level of @{b}make@{ub} recursion using the
     variable @{b}MAKELEVEL@{ub}.  See @{"Recursive Use of make" Link "Recursion"}.

   @{b}*@{ub} Provide any goals given on the command line in the variable
     @{b}MAKECMDGOALS@{ub}.  See @{"Arguments to Specify the Goals" Link "Goals"}.

   @{b}*@{ub} Specify static pattern rules.  See @{"Static Pattern Rules" Link "Static Pattern"}.

   @{b}*@{ub} Provide selective @{b}vpath@{ub} search.  See
     @{"Searching Directories for Dependencies" Link "Directory Search"}.

   @{b}*@{ub} Provide computed variable references.  See
     @{"Basics of Variable References" Link "Reference"}.

   @{b}*@{ub} Update makefiles.  See @{"How Makefiles Are Remade" Link "Remaking Makefiles"}.  System V @{b}make@{ub}
     has a very, very limited form of this functionality in that it
     will check out SCCS files for makefiles.

   @{b}*@{ub} Various new built-in implicit rules.  See
     @{"Catalogue of Implicit Rules" Link "Catalogue of Rules"}.

   @{b}*@{ub} The built-in variable @{b}MAKE_VERSION@{ub} gives the version number of
     @{b}make@{ub}.


@EndNode

@Node "Missing" "make.guide/Missing"
@Next "Makefile Conventions"
@Prev "Features"
@Toc "Main"

Incompatibilities and Missing Features
**************************************

   The @{b}make@{ub} programs in various other systems support a few features
that are not implemented in GNU @{b}make@{ub}.  The POSIX.2 standard (`IEEE
Standard 1003.2-1992') which specifies @{b}make@{ub} does not require any of
these features.

   @{b}*@{ub} A target of the form @{b}@{I}FILE@{ui}((@{I}ENTRY@{ui}))@{ub} stands for a member of archive
     file @{I}FILE@{ui}.  The member is chosen, not by name, but by being an
     object file which defines the linker symbol @{I}ENTRY@{ui}.

     This feature was not put into GNU @{b}make@{ub} because of the
     nonmodularity of putting knowledge into @{b}make@{ub} of the internal
     format of archive file symbol tables.  See
     @{"Updating Archive Symbol Directories" Link "Archive Symbols"}.

   @{b}*@{ub} Suffixes (used in suffix rules) that end with the character @{b}~@{ub} have
     a special meaning to System V @{b}make@{ub}; they refer to the SCCS file
     that corresponds to the file one would get without the @{b}~@{ub}.  For
     example, the suffix rule @{b}.c~.o@{ub} would make the file @{b}@{I}N@{ui}.o@{ub} from the
     SCCS file @{b}s.@{I}N@{ui}.c@{ub}.  For complete coverage, a whole series of such
     suffix rules is required.  See @{"Old-Fashioned Suffix Rules" Link "Suffix Rules"}.

     In GNU @{b}make@{ub}, this entire series of cases is handled by two pattern
     rules for extraction from SCCS, in combination with the general
     feature of rule chaining.  See @{"Chains of Implicit Rules" Link "Chained Rules"}.

   @{b}*@{ub} In System V @{b}make@{ub}, the string @{b}$$@@{ub} has the strange meaning that, in
     the dependencies of a rule with multiple targets, it stands for
     the particular target that is being processed.

     This is not defined in GNU @{b}make@{ub} because @{b}$$@{ub} should always stand for
     an ordinary @{b}$@{ub}.

     It is possible to get this functionality through the use of static
     pattern rules (see @{"Static Pattern Rules" Link "Static Pattern"}).  The System V @{b}make@{ub} rule:

          $(targets): $$@.o lib.a

     can be replaced with the GNU @{b}make@{ub} static pattern rule:

          $(targets): %: %.o lib.a

   @{b}*@{ub} In System V and 4.3 BSD @{b}make@{ub}, files found by @{b}VPATH@{ub} search (see
     @{"Searching Directories for Dependencies" Link "Directory Search"}) have their names changed
     inside command strings.  We feel it is much cleaner to always use
     automatic variables and thus make this feature obsolete.

   @{b}*@{ub} In some Unix @{b}make@{ub}s, the automatic variable @{b}$*@{ub} appearing in the
     dependencies of a rule has the amazingly strange "feature" of
     expanding to the full name of the @{i}target of that rule@{ui}.  We cannot
     imagine what went on in the minds of Unix @{b}make@{ub} developers to do
     this; it is utterly inconsistent with the normal definition of @{b}$*@{ub}.

   @{b}*@{ub} In some Unix @{b}make@{ub}s, implicit rule search (see
     @{"Using Implicit Rules" Link "Implicit Rules"}) is apparently done for @{i}all@{ui} targets, not just
     those without commands.  This means you can do:

          foo.o:
        cc -c foo.c

     and Unix @{b}make@{ub} will intuit that @{b}foo.o@{ub} depends on @{b}foo.c@{ub}.

     We feel that such usage is broken.  The dependency properties of
     @{b}make@{ub} are well-defined (for GNU @{b}make@{ub}, at least), and doing
     such a thing simply does not fit the model.

   @{b}*@{ub} GNU @{b}make@{ub} does not include any built-in implicit rules for
     compiling or preprocessing EFL programs.  If we hear of anyone who
     is using EFL, we will gladly add them.

   @{b}*@{ub} It appears that in SVR4 @{b}make@{ub}, a suffix rule can be specified with
     no commands, and it is treated as if it had empty commands (see
     @{"Empty Commands" Link "Empty Commands"}).  For example:

          .c.a:

     will override the built-in @{b}.c.a@{ub} suffix rule.

     We feel that it is cleaner for a rule without commands to always
     simply add to the dependency list for the target.  The above
     example can be easily rewritten to get the desired behavior in GNU
     @{b}make@{ub}:

          .c.a: ;

   @{b}*@{ub} Some versions of @{b}make@{ub} invoke the shell with the @{b}-e@{ub} flag, except
     under @{b}-k@{ub} (see @{"Testing the Compilation of a Program" Link "Testing"}).  The @{b}-e@{ub} flag
     tells the shell to exit as soon as any program it runs returns a
     nonzero status.  We feel it is cleaner to write each shell command
     line to stand on its own and not require this special treatment.


@EndNode

@Node "Makefile Conventions" "make.guide/Makefile Conventions"
@Next "Quick Reference"
@Prev "Missing"
@Toc "Main"

Makefile Conventions
********************

   This node describes conventions for writing the Makefiles for GNU
programs.


 @{" Makefile Basics           " Link "Makefile Basics"}  General Conventions for Makefiles
 @{" Utilities in Makefiles    " Link "Utilities in Makefiles"}  Utilities in Makefiles
 @{" Command Variables         " Link "Command Variables"}  Variables for Specifying Commands
 @{" Directory Variables       " Link "Directory Variables"}  Variables for Installation Directories
 @{" Standard Targets          " Link "Standard Targets"}  Standard Targets for Users
 @{" Install Command Categories " Link "Install Command Categories"}  Three categories of commands in the `install'
                                  rule: normal, pre-install and post-install.


@EndNode

@Node "Makefile Basics" "make.guide/Makefile Basics"
@Next "Utilities in Makefiles"
@Toc "Makefile Conventions"

General Conventions for Makefiles
=================================

   Every Makefile should contain this line:

     SHELL = /bin/sh

to avoid trouble on systems where the @{b}SHELL@{ub} variable might be inherited
from the environment.  (This is never a problem with GNU @{b}make@{ub}.)

   Different @{b}make@{ub} programs have incompatible suffix lists and implicit
rules, and this sometimes creates confusion or misbehavior.  So it is a
good idea to set the suffix list explicitly using only the suffixes you
need in the particular Makefile, like this:

     .SUFFIXES:
.SUFFIXES: .c .o

The first line clears out the suffix list, the second introduces all
suffixes which may be subject to implicit rules in this Makefile.

   Don't assume that @{b}.@{ub} is in the path for command execution.  When you
need to run programs that are a part of your package during the make,
please make sure that it uses @{b}./@{ub} if the program is built as part of the
make or @{b}$(srcdir)/@{ub} if the file is an unchanging part of the source
code.  Without one of these prefixes, the current search path is used.

   The distinction between @{b}./@{ub} (the @{i}build directory@{ui}) and @{b}$(srcdir)/@{ub} (the @{i}source
directory@{ui}) is important because users can build in a separate
directory using the @{b}--srcdir@{ub} option to @{b}configure@{ub}.  A rule of the form:

     foo.1 : foo.man sedscript
        sed -e sedscript foo.man > foo.1

will fail when the build directory is not the source directory, because
@{b}foo.man@{ub} and @{b}sedscript@{ub} are in the the source directory.

   When using GNU @{b}make@{ub}, relying on @{b}VPATH@{ub} to find the source file will
work in the case where there is a single dependency file, since the
@{b}make@{ub} automatic variable @{b}$<@{ub} will represent the source file
wherever it is.  (Many versions of @{b}make@{ub} set @{b}$<@{ub} only in implicit rules.)
A Makefile target like

     foo.o : bar.c
        $(CC) -I. -I$(srcdir) $(CFLAGS) -c bar.c -o foo.o

should instead be written as

     foo.o : bar.c
        $(CC) -I. -I$(srcdir) $(CFLAGS) -c $< -o $@

in order to allow @{b}VPATH@{ub} to work correctly.  When the target has
multiple dependencies, using an explicit @{b}$(srcdir)@{ub} is the easiest way
to make the rule work well.  For example, the target above for @{b}foo.1@{ub} is
best written as:

     foo.1 : foo.man sedscript
        sed -e $(srcdir)/sedscript $(srcdir)/foo.man > $@

   GNU distributions usually contain some files which are not source
files--for example, Info files, and the output from Autoconf, Automake,
Bison or Flex.  Since these files normally appear in the source
directory, they should always appear in the source directory, not in the
build directory.  So Makefile rules to update them should put the
updated files in the source directory.

   However, if a file does not appear in the distribution, then the
Makefile should not put it in the source directory, because building a
program in ordinary circumstances should not modify the source directory
in any way.

   Try to make the build and installation targets, at least (and all
their subtargets) work correctly with a parallel @{b}make@{ub}.


@EndNode

@Node "Utilities in Makefiles" "make.guide/Utilities in Makefiles"
@Next "Command Variables"
@Prev "Makefile Basics"
@Toc "Makefile Conventions"

Utilities in Makefiles
======================

   Write the Makefile commands (and any shell scripts, such as
@{b}configure@{ub}) to run in @{b}sh@{ub}, not in @{b}csh@{ub}.  Don't use any special
features of @{b}ksh@{ub} or @{b}bash@{ub}.

   The @{b}configure@{ub} script and the Makefile rules for building and
installation should not use any utilities directly except these:

     cat cmp cp diff echo egrep expr false grep install-info
ln ls mkdir mv pwd rm rmdir sed sleep sort tar test touch true

   The compression program @{b}gzip@{ub} can be used in the @{b}dist@{ub} rule.

   Stick to the generally supported options for these programs.  For
example, don't use @{b}mkdir -p@{ub}, convenient as it may be, because most
systems don't support it.

   It is a good idea to avoid creating symbolic links in makefiles,
since a few systems don't support them.

   The Makefile rules for building and installation can also use
compilers and related programs, but should do so via @{b}make@{ub} variables so
that the user can substitute alternatives.  Here are some of the
programs we mean:

     ar bison cc flex install ld ldconfig lex
make makeinfo ranlib texi2dvi yacc

   Use the following @{b}make@{ub} variables to run those programs:

     $(AR) $(BISON) $(CC) $(FLEX) $(INSTALL) $(LD) $(LDCONFIG) $(LEX)
$(MAKE) $(MAKEINFO) $(RANLIB) $(TEXI2DVI) $(YACC)

   When you use @{b}ranlib@{ub} or @{b}ldconfig@{ub}, you should make sure nothing bad
happens if the system does not have the program in question.  Arrange
to ignore an error from that command, and print a message before the
command to tell the user that failure of this command does not mean a
problem.  (The Autoconf @{b}AC_PROG_RANLIB@{ub} macro can help with this.)

   If you use symbolic links, you should implement a fallback for
systems that don't have symbolic links.

   Additional utilities that can be used via Make variables are:

     chgrp chmod chown mknod

   It is ok to use other utilities in Makefile portions (or scripts)
intended only for particular systems where you know those utilities
exist.


@EndNode

@Node "Command Variables" "make.guide/Command Variables"
@Next "Directory Variables"
@Prev "Utilities in Makefiles"
@Toc "Makefile Conventions"

Variables for Specifying Commands
=================================

   Makefiles should provide variables for overriding certain commands,
options, and so on.

   In particular, you should run most utility programs via variables.
Thus, if you use Bison, have a variable named @{b}BISON@{ub} whose default value
is set with @{b}BISON = bison@{ub}, and refer to it with @{b}$(BISON)@{ub} whenever you
need to use Bison.

   File management utilities such as @{b}ln@{ub}, @{b}rm@{ub}, @{b}mv@{ub}, and so on, need not be
referred to through variables in this way, since users don't need to
replace them with other programs.

   Each program-name variable should come with an options variable that
is used to supply options to the program.  Append @{b}FLAGS@{ub} to the
program-name variable name to get the options variable name--for
example, @{b}BISONFLAGS@{ub}.  (The name @{b}CFLAGS@{ub} is an exception to this rule,
but we keep it because it is standard.)  Use @{b}CPPFLAGS@{ub} in any
compilation command that runs the preprocessor, and use @{b}LDFLAGS@{ub} in any
compilation command that does linking as well as in any direct use of
@{b}ld@{ub}.

   If there are C compiler options that @{i}must@{ui} be used for proper
compilation of certain files, do not include them in @{b}CFLAGS@{ub}.  Users
expect to be able to specify @{b}CFLAGS@{ub} freely themselves.  Instead,
arrange to pass the necessary options to the C compiler independently
of @{b}CFLAGS@{ub}, by writing them explicitly in the compilation commands or by
defining an implicit rule, like this:

     CFLAGS = -g
ALL_CFLAGS = -I. $(CFLAGS)
.c.o:
        $(CC) -c $(CPPFLAGS) $(ALL_CFLAGS) $<

   Do include the @{b}-g@{ub} option in @{b}CFLAGS@{ub}, because that is not @{i}required@{ui} for
proper compilation.  You can consider it a default that is only
recommended.  If the package is set up so that it is compiled with GCC
by default, then you might as well include @{b}-O@{ub} in the default value of
@{b}CFLAGS@{ub} as well.

   Put @{b}CFLAGS@{ub} last in the compilation command, after other variables
containing compiler options, so the user can use @{b}CFLAGS@{ub} to override the
others.

   @{b}CFLAGS@{ub} should be used in every invocation of the C compiler, both
those which do compilation and those which do linking.

   Every Makefile should define the variable @{b}INSTALL@{ub}, which is the
basic command for installing a file into the system.

   Every Makefile should also define the variables @{b}INSTALL_PROGRAM@{ub} and
@{b}INSTALL_DATA@{ub}.  (The default for each of these should be
@{b}$(INSTALL)@{ub}.)  Then it should use those variables as the
commands for actual installation, for executables and nonexecutables
respectively.  Use these variables as follows:

     $(INSTALL_PROGRAM) foo $(bindir)/foo
$(INSTALL_DATA) libfoo.a $(libdir)/libfoo.a

Always use a file name, not a directory name, as the second argument of
the installation commands.  Use a separate command for each file to be
installed.


@EndNode

@Node "Directory Variables" "make.guide/Directory Variables"
@Next "Standard Targets"
@Prev "Command Variables"
@Toc "Makefile Conventions"

Variables for Installation Directories
======================================

   Installation directories should always be named by variables, so it
is easy to install in a nonstandard place.  The standard names for these
variables are described below.  They are based on a standard filesystem
layout; variants of it are used in SVR4, 4.4BSD, Linux, Ultrix v4, and
other modern operating systems.

   These two variables set the root for the installation.  All the other
installation directories should be subdirectories of one of these two,
and nothing should be directly installed into these two directories.

@{b}prefix@{ub}
     A prefix used in constructing the default values of the variables
     listed below.  The default value of @{b}prefix@{ub} should be @{b}/usr/local@{ub}.
     When building the complete GNU system, the prefix will be empty and
     @{b}/usr@{ub} will be a symbolic link to @{b}/@{ub}.  (If you are using
     Autoconf, write it as @{b} @prefix@@{ub}.)

@{b}exec_prefix@{ub}
     A prefix used in constructing the default values of some of the
     variables listed below.  The default value of @{b}exec_prefix@{ub} should
     be @{b}$(prefix)@{ub}.  (If you are using Autoconf, write it as @{b}
     @exec_prefix@@{ub}.)

     Generally, @{b}$(exec_prefix)@{ub} is used for directories that contain
     machine-specific files (such as executables and subroutine
     libraries), while @{b}$(prefix)@{ub} is used directly for other directories.

   Executable programs are installed in one of the following
directories.

@{b}bindir@{ub}
     The directory for installing executable programs that users can
     run.  This should normally be @{b}/usr/local/bin@{ub}, but write it as
     @{b}$(exec_prefix)/bin@{ub}.  (If you are using Autoconf, write it
     as @{b} @bindir@@{ub}.)

@{b}sbindir@{ub}
     The directory for installing executable programs that can be run
     from the shell, but are only generally useful to system
     administrators.  This should normally be @{b}/usr/local/sbin@{ub}, but
     write it as @{b}$(exec_prefix)/sbin@{ub}.  (If you are using Autoconf,
     write it as @{b} @sbindir@@{ub}.)

@{b}libexecdir@{ub}
     The directory for installing executable programs to be run by other
     programs rather than by users.  This directory should normally be
     @{b}/usr/local/libexec@{ub}, but write it as
     @{b}$(exec_prefix)/libexec@{ub}.  (If you are using Autoconf,
     write it as @{b} @libexecdir@@{ub}.)

   Data files used by the program during its execution are divided into
categories in two ways.

   @{b}*@{ub} Some files are normally modified by programs; others are never
     normally modified (though users may edit some of these).

   @{b}*@{ub} Some files are architecture-independent and can be shared by all
     machines at a site; some are architecture-dependent and can be
     shared only by machines of the same kind and operating system;
     others may never be shared between two machines.

   This makes for six different possibilities.  However, we want to
discourage the use of architecture-dependent files, aside from object
files and libraries.  It is much cleaner to make other data files
architecture-independent, and it is generally not hard.

   Therefore, here are the variables Makefiles should use to specify
directories:

@{b}datadir@{ub}
     The directory for installing read-only architecture independent
     data files.  This should normally be @{b}/usr/local/share@{ub}, but write
     it as @{b}$(prefix)/share@{ub}.  (If you are using Autoconf, write it as @{b}
     @datadir@@{ub}.) As a special exception, see @{b}$(infodir)@{ub} and
     @{b}$(includedir)@{ub} below.

@{b}sysconfdir@{ub}
     The directory for installing read-only data files that pertain to a
     single machine-that is to say, files for configuring a host.
     Mailer and network configuration files, @{b}/etc/passwd@{ub}, and so forth
     belong here.  All the files in this directory should be ordinary
     ASCII text files.  This directory should normally be
     @{b}/usr/local/etc@{ub}, but write it as @{b}$(prefix)/etc@{ub}.  (If you
     are using Autoconf, write it as @{b} @sysconfdir@@{ub}.)

     Do not install executables here in this directory (they probably
     belong in @{b}$(libexecdir)@{ub} or @{b}$(sbindir)@{ub}).  Also do not install files
     that are modified in the normal course of their use (programs
     whose purpose is to change the configuration of the system
     excluded).  Those probably belong in @{b}$(localstatedir)@{ub}.

@{b}sharedstatedir@{ub}
     The directory for installing architecture-independent data files
     which the programs modify while they run.  This should normally be
     @{b}/usr/local/com@{ub}, but write it as @{b}$(prefix)/com@{ub}.  (If you
     are using Autoconf, write it as @{b} @sharedstatedir@@{ub}.)

@{b}localstatedir@{ub}
     The directory for installing data files which the programs modify
     while they run, and that pertain to one specific machine.  Users
     should never need to modify files in this directory to configure
     the package's operation; put such configuration information in
     separate files that go in @{b}$(datadir)@{ub} or @{b}$(sysconfdir)@{ub}.  @{b}$(localstatedir)@{ub}
     should normally be @{b}/usr/local/var@{ub}, but write it as @{b}$(prefix)/var@{ub}.
     (If you are using Autoconf, write it as @{b} @localstatedir@@{ub}.)

@{b}libdir@{ub}
     The directory for object files and libraries of object code.  Do
     not install executables here, they probably ought to go in @{b}$(libexecdir)@{ub}
     instead.  The value of @{b}libdir@{ub} should normally be @{b}/usr/local/lib@{ub},
     but write it as @{b}$(exec_prefix)/lib@{ub}.  (If you are using Autoconf,
     write it as @{b} @libdir@@{ub}.)

@{b}infodir@{ub}
     The directory for installing the Info files for this package.  By
     default, it should be @{b}/usr/local/info@{ub}, but it should be written as
     @{b}$(prefix)/info@{ub}.  (If you are using Autoconf, write it as @{b}
     @infodir@@{ub}.)

@{b}lispdir@{ub}
     The directory for installing any Emacs Lisp files in this package.
     By default, it should be @{b}/usr/local/share/emacs/site-lisp@{ub}, but it
     should be written as @{b}$(prefix)/share/emacs/site-lisp@{ub}.

     If you are using Autoconf, write the default as @{b} @lispdir@@{ub}.  In
     order to make @{b} @lispdir@@{ub} work, you need the following lines in
     your @{b}configure.in@{ub} file:

          lispdir='${datadir}/emacs/site-lisp'
AC_SUBST(lispdir)

@{b}includedir@{ub}
     The directory for installing header files to be included by user
     programs with the C @{b}#include@{ub} preprocessor directive.  This should
     normally be @{b}/usr/local/include@{ub}, but write it as @{b}$(prefix)/include@{ub}.
     (If you are using Autoconf, write it as @{b} @includedir@@{ub}.)

     Most compilers other than GCC do not look for header files in
     directory @{b}/usr/local/include@{ub}.  So installing the header files this
     way is only useful with GCC.  Sometimes this is not a problem
     because some libraries are only really intended to work with GCC.
     But some libraries are intended to work with other compilers.
     They should install their header files in two places, one
     specified by @{b}includedir@{ub} and one specified by @{b}oldincludedir@{ub}.

@{b}oldincludedir@{ub}
     The directory for installing @{b}#include@{ub} header files for use with
     compilers other than GCC.  This should normally be @{b}/usr/include@{ub}.
     (If you are using Autoconf, you can write it as @{b} @oldincludedir@@{ub}.)

     The Makefile commands should check whether the value of
     @{b}oldincludedir@{ub} is empty.  If it is, they should not try to
     use it; they should cancel the second installation of the header
     files.

     A package should not replace an existing header in this directory
     unless the header came from the same package.  Thus, if your Foo
     package provides a header file @{b}foo.h@{ub}, then it should install the
     header file in the @{b}oldincludedir@{ub} directory if either (1) there is
     no @{b}foo.h@{ub} there or (2) the @{b}foo.h@{ub} that exists came from the Foo
     package.

     To tell whether @{b}foo.h@{ub} came from the Foo package, put a magic
     string in the file--part of a comment--and @{b}grep@{ub} for that string.

   Unix-style man pages are installed in one of the following:

@{b}mandir@{ub}
     The top-level directory for installing the man pages (if any) for
     this package.  It will normally be @{b}/usr/local/man@{ub}, but you should
     write it as @{b}$(prefix)/man@{ub}.  (If you are using Autoconf, write it
     as @{b} @mandir@@{ub}.)

@{b}man1dir@{ub}
     The directory for installing section 1 man pages.  Write it as
     @{b}$(mandir)/man1@{ub}.

@{b}man2dir@{ub}
     The directory for installing section 2 man pages.  Write it as @{b}$(mandir)/man2@{ub}

@{b}...@{ub}
     @{i}Don't make the primary documentation for any GNU software be a man page.  Write a manual in Texinfo instead.  Man pages are just for the sake of people running GNU software on Unix, which is a secondary application only.@{ui}

@{b}manext@{ub}
     The file name extension for the installed man page.  This should
     contain a period followed by the appropriate digit; it should
     normally be @{b}.1@{ub}.

@{b}man1ext@{ub}
     The file name extension for installed section 1 man pages.

@{b}man2ext@{ub}
     The file name extension for installed section 2 man pages.

@{b}...@{ub}
     Use these names instead of @{b}manext@{ub} if the package needs to install
     man pages in more than one section of the manual.

   And finally, you should set the following variable:

@{b}srcdir@{ub}
     The directory for the sources being compiled.  The value of this
     variable is normally inserted by the @{b}configure@{ub} shell script.  (If
     you are using Autconf, use @{b}srcdir = @srcdir@@{ub}.)

   For example:

     # Common prefix for installation directories.
# NOTE: This directory must exist when you start the install.
prefix = /usr/local
exec_prefix = $(prefix)
# Where to put the executable for the command `gcc'.
bindir = $(exec_prefix)/bin
# Where to put the directories used by the compiler.
libexecdir = $(exec_prefix)/libexec
# Where to put the Info files.
infodir = $(prefix)/info

   If your program installs a large number of files into one of the
standard user-specified directories, it might be useful to group them
into a subdirectory particular to that program.  If you do this, you
should write the @{b}install@{ub} rule to create these subdirectories.

   Do not expect the user to include the subdirectory name in the value
of any of the variables listed above.  The idea of having a uniform set
of variable names for installation directories is to enable the user to
specify the exact same values for several different GNU packages.  In
order for this to be useful, all the packages must be designed so that
they will work sensibly when the user does so.


@EndNode

@Node "Standard Targets" "make.guide/Standard Targets"
@Next "Install Command Categories"
@Prev "Directory Variables"
@Toc "Makefile Conventions"

Standard Targets for Users
==========================

   All GNU programs should have the following targets in their
Makefiles:

@{b}all@{ub}
     Compile the entire program.  This should be the default target.
     This target need not rebuild any documentation files; Info files
     should normally be included in the distribution, and DVI files
     should be made only when explicitly asked for.

     By default, the Make rules should compile and link with @{b}-g@{ub}, so
     that executable programs have debugging symbols.  Users who don't
     mind being helpless can strip the executables later if they wish.

@{b}install@{ub}
     Compile the program and copy the executables, libraries, and so on
     to the file names where they should reside for actual use.  If
     there is a simple test to verify that a program is properly
     installed, this target should run that test.

     Do not strip executables when installing them.  Devil-may-care
     users can use the @{b}install-strip@{ub} target to do that.

     If possible, write the @{b}install@{ub} target rule so that it does not
     modify anything in the directory where the program was built,
     provided @{b}make all@{ub} has just been done.  This is convenient for
     building the program under one user name and installing it under
     another.

     The commands should create all the directories in which files are
     to be installed, if they don't already exist.  This includes the
     directories specified as the values of the variables @{b}prefix@{ub} and
     @{b}exec_prefix@{ub}, as well as all subdirectories that are
     needed.  One way to do this is by means of an @{b}installdirs@{ub} target
     as described below.

     Use @{b}-@{ub} before any command for installing a man page, so that @{b}make@{ub}
     will ignore any errors.  This is in case there are systems that
     don't have the Unix man page documentation system installed.

     The way to install Info files is to copy them into @{b}$(infodir)@{ub} with
     @{b}$(INSTALL_DATA)@{ub} (see @{"Command Variables" Link "Command Variables"}), and then run the
     @{b}install-info@{ub} program if it is present.  @{b}install-info@{ub} is a
     program that edits the Info @{b}dir@{ub} file to add or update the menu
     entry for the given Info file; it is part of the Texinfo package.
     Here is a sample rule to install an Info file:

          $(infodir)/foo.info: foo.info
        $(POST_INSTALL)
# There may be a newer info file in . than in srcdir.
        -if test -f foo.info; then d=.; \\
         else d=$(srcdir); fi; \\
        $(INSTALL_DATA) $$d/foo.info $@; \\
# Run install-info only if it exists.
# Use `if' instead of just prepending `-' to the
# line so we notice real errors from install-info.
# We use `$(SHELL) -c' because some shells do not
# fail gracefully when there is an unknown command.
        if $(SHELL) -c 'install-info --version' \\
           >/dev/null 2>&1; then \\
          install-info --dir-file=$(infodir)/dir \\
                       $(infodir)/foo.info; \\
        else true; fi

     When writing the @{b}install@{ub} target, you must classify all the
     commands into three categories: normal ones, @{i}pre-installation@{ui}
     commands and @{i}post-installation@{ui} commands.  See
     @{"Install Command Categories" Link "Install Command Categories"}.

@{b}uninstall@{ub}
     Delete all the installed files--the copies that the @{b}install@{ub} target
     creates.

     This rule should not modify the directories where compilation is
     done, only the directories where files are installed.

     The uninstallation commands are divided into three categories,
     just like the installation commands.  See
     @{"Install Command Categories" Link "Install Command Categories"}.

@{b}install-strip@{ub}
     Like @{b}install@{ub}, but strip the executable files while installing
     them.  In many cases, the definition of this target can be very
     simple:

          install-strip:
        $(MAKE) INSTALL_PROGRAM='$(INSTALL_PROGRAM) -s' \\
                install

     Normally we do not recommend stripping an executable unless you
     are sure the program has no bugs.  However, it can be reasonable
     to install a stripped executable for actual execution while saving
     the unstripped executable elsewhere in case there is a bug.

@{b}clean@{ub}
     Delete all files from the current directory that are normally
     created by building the program.  Don't delete the files that
     record the configuration.  Also preserve files that could be made
     by building, but normally aren't because the distribution comes
     with them.

     Delete @{b}.dvi@{ub} files here if they are not part of the distribution.

@{b}distclean@{ub}
     Delete all files from the current directory that are created by
     configuring or building the program.  If you have unpacked the
     source and built the program without creating any other files, @{b}make
     distclean@{ub} should leave only the files that were in the
     distribution.

@{b}mostlyclean@{ub}
     Like @{b}clean@{ub}, but may refrain from deleting a few files that people
     normally don't want to recompile.  For example, the @{b}mostlyclean@{ub}
     target for GCC does not delete @{b}libgcc.a@{ub}, because recompiling it is
     rarely necessary and takes a lot of time.

@{b}maintainer-clean@{ub}
     Delete almost everything from the current directory that can be
     reconstructed with this Makefile.  This typically includes
     everything deleted by @{b}distclean@{ub}, plus more: C source files
     produced by Bison, tags tables, Info files, and so on.

     The reason we say "almost everything" is that running the command @{b}make
     maintainer-clean@{ub} should not delete @{b}configure@{ub} even if
     @{b}configure@{ub} can be remade using a rule in the Makefile.
     More generally, @{b}make maintainer-clean@{ub} should not delete anything
     that needs to exist in order to run @{b}configure@{ub} and then begin to
     build the program.  This is the only exception; @{b}maintainer-clean@{ub}
     should delete everything else that can be rebuilt.

     The @{b}maintainer-clean@{ub} target is intended to be used by a maintainer
     of the package, not by ordinary users.  You may need special tools
     to reconstruct some of the files that @{b}make maintainer-clean@{ub}
     deletes.  Since these files are normally included in the
     distribution, we don't take care to make them easy to reconstruct.
     If you find you need to unpack the full distribution again, don't
     blame us.

     To help make users aware of this, the commands for the special
     @{b}maintainer-clean@{ub} target should start with these two:

          @echo 'This command is intended for maintainers to use; it'
@echo 'deletes files that may need special tools to rebuild.'

@{b}TAGS@{ub}
     Update a tags table for this program.

@{b}info@{ub}
     Generate any Info files needed.  The best way to write the rules
     is as follows:

          info: foo.info

foo.info: foo.texi chap1.texi chap2.texi
        $(MAKEINFO) $(srcdir)/foo.texi

     You must define the variable @{b}MAKEINFO@{ub} in the Makefile.  It should
     run the @{b}makeinfo@{ub} program, which is part of the Texinfo
     distribution.

     Normally a GNU distribution comes with Info files, and that means
     the Info files are present in the source directory.  Therefore,
     the Make rule for an info file should update it in the source
     directory.  When users build the package, ordinarily Make will not
     update the Info files because they will already be up to date.

@{b}dvi@{ub}
     Generate DVI files for all Texinfo documentation.  For example:

          dvi: foo.dvi

foo.dvi: foo.texi chap1.texi chap2.texi
        $(TEXI2DVI) $(srcdir)/foo.texi

     You must define the variable @{b}TEXI2DVI@{ub} in the Makefile.  It should
     run the program @{b}texi2dvi@{ub}, which is part of the Texinfo
     distribution.(1)  Alternatively, write just the dependencies, and
     allow GNU @{b}make@{ub} to provide the command.

@{b}dist@{ub}
     Create a distribution tar file for this program.  The tar file
     should be set up so that the file names in the tar file start with
     a subdirectory name which is the name of the package it is a
     distribution for.  This name can include the version number.

     For example, the distribution tar file of GCC version 1.40 unpacks
     into a subdirectory named @{b}gcc-1.40@{ub}.

     The easiest way to do this is to create a subdirectory
     appropriately named, use @{b}ln@{ub} or @{b}cp@{ub} to install the proper files in
     it, and then @{b}tar@{ub} that subdirectory.

     Compress the tar file file with @{b}gzip@{ub}.  For example, the actual
     distribution file for GCC version 1.40 is called @{b}gcc-1.40.tar.gz@{ub}.

     The @{b}dist@{ub} target should explicitly depend on all non-source files
     that are in the distribution, to make sure they are up to date in
     the distribution.  See @{"Making Releases" Link "standards/Releases"}.

@{b}check@{ub}
     Perform self-tests (if any).  The user must build the program
     before running the tests, but need not install the program; you
     should write the self-tests so that they work when the program is
     built but not installed.

   The following targets are suggested as conventional names, for
programs in which they are useful.

@{b}installcheck@{ub}
     Perform installation tests (if any).  The user must build and
     install the program before running the tests.  You should not
     assume that @{b}$(bindir)@{ub} is in the search path.

@{b}installdirs@{ub}
     It's useful to add a target named @{b}installdirs@{ub} to create the
     directories where files are installed, and their parent
     directories.  There is a script called @{b}mkinstalldirs@{ub} which is
     convenient for this; you can find it in the Texinfo package.  You
     can use a rule like this:

          # Make sure all installation directories (e.g. $(bindir))
# actually exist by making them if necessary.
installdirs: mkinstalldirs
        $(srcdir)/mkinstalldirs $(bindir) $(datadir) \\
                                $(libdir) $(infodir) \\
                                $(mandir)

     This rule should not modify the directories where compilation is
     done.  It should do nothing but create installation directories.

   ---------- Footnotes ----------

   (1)  @{b}texi2dvi@{ub} uses TeX to do the real work of formatting. TeX is not
distributed with Texinfo.


@EndNode

@Node "Install Command Categories" "make.guide/Install Command Categories"
@Prev "Standard Targets"
@Toc "Makefile Conventions"

Install Command Categories
==========================

   When writing the @{b}install@{ub} target, you must classify all the commands
into three categories: normal ones, @{i}pre-installation@{ui} commands and
@{i}post-installation@{ui} commands.

   Normal commands move files into their proper places, and set their
modes.  They may not alter any files except the ones that come entirely
from the package they belong to.

   Pre-installation and post-installation commands may alter other
files; in particular, they can edit global configuration files or data
bases.

   Pre-installation commands are typically executed before the normal
commands, and post-installation commands are typically run after the
normal commands.

   The most common use for a post-installation command is to run
@{b}install-info@{ub}.  This cannot be done with a normal command, since
it alters a file (the Info directory) which does not come entirely and
solely from the package being installed.  It is a post-installation
command because it needs to be done after the normal command which
installs the package's Info files.

   Most programs don't need any pre-installation commands, but we have
the feature just in case it is needed.

   To classify the commands in the @{b}install@{ub} rule into these three
categories, insert @{i}category lines@{ui} among them.  A category line
specifies the category for the commands that follow.

   A category line consists of a tab and a reference to a special Make
variable, plus an optional comment at the end.  There are three
variables you can use, one for each category; the variable name
specifies the category.  Category lines are no-ops in ordinary execution
because these three Make variables are normally undefined (and you @{i}should
not@{ui} define them in the makefile).

   Here are the three possible category lines, each with a comment that
explains what it means:

             $(PRE_INSTALL)     # @{i}Pre-install commands follow.@{ui}
        $(POST_INSTALL)    # @{i}Post-install commands follow.@{ui}
        $(NORMAL_INSTALL)  # @{i}Normal commands follow.@{ui}

   If you don't use a category line at the beginning of the @{b}install@{ub}
rule, all the commands are classified as normal until the first category
line.  If you don't use any category lines, all the commands are
classified as normal.

   These are the category lines for @{b}uninstall@{ub}:

             $(PRE_UNINSTALL)     # @{i}Pre-uninstall commands follow.@{ui}
        $(POST_UNINSTALL)    # @{i}Post-uninstall commands follow.@{ui}
        $(NORMAL_UNINSTALL)  # @{i}Normal commands follow.@{ui}

   Typically, a pre-uninstall command would be used for deleting entries
from the Info directory.

   If the @{b}install@{ub} or @{b}uninstall@{ub} target has any dependencies which act as
subroutines of installation, then you should start @{i}each@{ui} dependency's
commands with a category line, and start the main target's commands
with a category line also.  This way, you can ensure that each command
is placed in the right category regardless of which of the dependencies
actually run.

   Pre-installation and post-installation commands should not run any
programs except for these:

     [ basename bash cat chgrp chmod chown cmp cp dd diff echo
egrep expand expr false fgrep find getopt grep gunzip gzip
hostname install install-info kill ldconfig ln ls md5sum
mkdir mkfifo mknod mv printenv pwd rm rmdir sed sort tee
test touch true uname xargs yes

   The reason for distinguishing the commands in this way is for the
sake of making binary packages.  Typically a binary package contains
all the executables and other files that need to be installed, and has
its own method of installing them--so it does not need to run the normal
installation commands.  But installing the binary package does need to
execute the pre-installation and post-installation commands.

   Programs to build binary packages work by extracting the
pre-installation and post-installation commands.  Here is one way of
extracting the pre-installation commands:

     make -n install -o all \\
      PRE_INSTALL=pre-install \\
      POST_INSTALL=post-install \\
      NORMAL_INSTALL=normal-install \\
  | gawk -f pre-install.awk

where the file @{b}pre-install.awk@{ub} could contain this:

     $0 ~ /^\\t[ \\t]*(normal_install|post_install)[ \\t]*$/ {on = 0}
on {print $0}
$0 ~ /^\\t[ \\t]*pre_install[ \\t]*$/ {on = 1}

   The resulting file of pre-installation commands is executed as a
shell script as part of installing the binary package.


@EndNode

@Node "Quick Reference" "make.guide/Quick Reference"
@Next "Complex Makefile"
@Prev "Makefile Conventions"
@Toc "Main"

Quick Reference
***************

   This appendix summarizes the directives, text manipulation functions,
and special variables which GNU @{b}make@{ub} understands.  See @{"Special Targets" Link "Special Targets"},
@{"Catalogue of Implicit Rules" Link "Catalogue of Rules"}, and @{"Summary of Options" Link "Options Summary"}, for other
summaries.

   Here is a summary of the directives GNU @{b}make@{ub} recognizes:

@{b}define @{I}VARIABLE@{ui}@{ub}
@{b}endef@{ub}
     Define a multi-line, recursively-expanded variable.
     See @{"Sequences" Link "Sequences"}.

@{b}ifdef @{I}VARIABLE@{ui}@{ub}
@{b}ifndef @{I}VARIABLE@{ui}@{ub}
@{b}ifeq (@{I}A@{ui},@{I}B@{ui})@{ub}
@{b}ifeq "@{I}A@{ui}" "@{I}B@{ui}"@{ub}
@{b}ifeq '@{I}A@{ui}' '@{I}B@{ui}'@{ub}
@{b}ifneq (@{I}A@{ui},@{I}B@{ui})@{ub}
@{b}ifneq "@{I}A@{ui}" "@{I}B@{ui}"@{ub}
@{b}ifneq '@{I}A@{ui}' '@{I}B@{ui}'@{ub}
@{b}else@{ub}
@{b}endif@{ub}
     Conditionally evaluate part of the makefile.
     See @{"Conditionals" Link "Conditionals"}.

@{b}include @{I}FILE@{ui}@{ub}
     Include another makefile.
     See @{"Including Other Makefiles" Link "Include"}.

@{b}override @{I}VARIABLE@{ui} = @{I}VALUE@{ui}@{ub}
@{b}override @{I}VARIABLE@{ui} := @{I}VALUE@{ui}@{ub}
@{b}override @{I}VARIABLE@{ui} += @{I}VALUE@{ui}@{ub}
@{b}override define @{I}VARIABLE@{ui}@{ub}
@{b}endef@{ub}
     Define a variable, overriding any previous definition, even one
     from the command line.
     See @{"The override Directive" Link "Override Directive"}.

@{b}export@{ub}
     Tell @{b}make@{ub} to export all variables to child processes by default.
     See @{"Communicating Variables to a Sub-make" Link "Variables-Recursion"}.

@{b}export @{I}VARIABLE@{ui}@{ub}
@{b}export @{I}VARIABLE@{ui} = @{I}VALUE@{ui}@{ub}
@{b}export @{I}VARIABLE@{ui} := @{I}VALUE@{ui}@{ub}
@{b}export @{I}VARIABLE@{ui} += @{I}VALUE@{ui}@{ub}
@{b}unexport @{I}VARIABLE@{ui}@{ub}
     Tell @{b}make@{ub} whether or not to export a particular variable to child
     processes.
     See @{"Communicating Variables to a Sub-make" Link "Variables-Recursion"}.

@{b}vpath @{I}PATTERN@{ui} @{I}PATH@{ui}@{ub}
     Specify a search path for files matching a @{b}%@{ub} pattern.
     See @{"The vpath Directive" Link "Selective Search"}.

@{b}vpath @{I}PATTERN@{ui}@{ub}
     Remove all search paths previously specified for @{I}PATTERN@{ui}.

@{b}vpath@{ub}
     Remove all search paths previously specified in any @{b}vpath@{ub}
     directive.

   Here is a summary of the text manipulation functions (see @{"Functions" Link "Functions"}):

@{b}$(subst @{I}FROM@{ui},@{I}TO@{ui},@{I}TEXT@{ui})@{ub}
     Replace @{I}FROM@{ui} with @{I}TO@{ui} in @{I}TEXT@{ui}.
     See @{"Functions for String Substitution and Analysis" Link "Text Functions"}.

@{b}$(patsubst @{I}PATTERN@{ui},@{I}REPLACEMENT@{ui},@{I}TEXT@{ui})@{ub}
     Replace words matching @{I}PATTERN@{ui} with @{I}REPLACEMENT@{ui} in @{I}TEXT@{ui}.
     See @{"Functions for String Substitution and Analysis" Link "Text Functions"}.

@{b}$(strip @{I}STRING@{ui})@{ub}
     Remove excess whitespace characters from @{I}STRING@{ui}.
     See @{"Functions for String Substitution and Analysis" Link "Text Functions"}.

@{b}$(findstring @{I}FIND@{ui},@{I}TEXT@{ui})@{ub}
     Locate @{I}FIND@{ui} in @{I}TEXT@{ui}.
     See @{"Functions for String Substitution and Analysis" Link "Text Functions"}.

@{b}$(filter @{I}PATTERN@{ui} ...,@{I}TEXT@{ui})@{ub}
     Select words in @{I}TEXT@{ui} that match one of the @{I}PATTERN@{ui} words.
     See @{"Functions for String Substitution and Analysis" Link "Text Functions"}.

@{b}$(filter-out @{I}PATTERN@{ui} ...,@{I}TEXT@{ui})@{ub}
     Select words in @{I}TEXT@{ui} that @{i}do not@{ui} match any of the @{I}PATTERN@{ui} words.
     See @{"Functions for String Substitution and Analysis" Link "Text Functions"}.

@{b}$(sort @{I}LIST@{ui})@{ub}
     Sort the words in @{I}LIST@{ui} lexicographically, removing duplicates.
     See @{"Functions for String Substitution and Analysis" Link "Text Functions"}.

@{b}$(dir @{I}NAMES@{ui} ...)@{ub}
     Extract the directory part of each file name.
     See @{"Functions for File Names" Link "File Name Functions"}.

@{b}$(notdir @{I}NAMES@{ui} ...)@{ub}
     Extract the non-directory part of each file name.
     See @{"Functions for File Names" Link "File Name Functions"}.

@{b}$(suffix @{I}NAMES@{ui} ...)@{ub}
     Extract the suffix (the last @{b}.@{ub} and following characters) of each
     file name.
     See @{"Functions for File Names" Link "File Name Functions"}.

@{b}$(basename @{I}NAMES@{ui} ...)@{ub}
     Extract the base name (name without suffix) of each file name.
     See @{"Functions for File Names" Link "File Name Functions"}.

@{b}$(addsuffix @{I}SUFFIX@{ui},@{I}NAMES@{ui} ...)@{ub}
     Append @{I}SUFFIX@{ui} to each word in @{I}NAMES@{ui}.
     See @{"Functions for File Names" Link "File Name Functions"}.

@{b}$(addprefix @{I}PREFIX@{ui},@{I}NAMES@{ui} ...)@{ub}
     Prepend @{I}PREFIX@{ui} to each word in @{I}NAMES@{ui}.
     See @{"Functions for File Names" Link "File Name Functions"}.

@{b}$(join @{I}LIST1@{ui},@{I}LIST2@{ui})@{ub}
     Join two parallel lists of words.
     See @{"Functions for File Names" Link "File Name Functions"}.

@{b}$(word @{I}N@{ui},@{I}TEXT@{ui})@{ub}
     Extract the @{I}N@{ui}th word (one-origin) of @{I}TEXT@{ui}.
     See @{"Functions for File Names" Link "File Name Functions"}.

@{b}$(words @{I}TEXT@{ui})@{ub}
     Count the number of words in @{I}TEXT@{ui}.
     See @{"Functions for File Names" Link "File Name Functions"}.

@{b}$(firstword @{I}NAMES@{ui} ...)@{ub}
     Extract the first word of @{I}NAMES@{ui}.
     See @{"Functions for File Names" Link "File Name Functions"}.

@{b}$(wildcard @{I}PATTERN@{ui} ...)@{ub}
     Find file names matching a shell file name pattern (@{i}not@{ui} a @{b}%@{ub}
     pattern).
     See @{"The Function wildcard" Link "Wildcard Function"}.

@{b}$(shell @{I}COMMAND@{ui})@{ub}
     Execute a shell command and return its output.
     See @{"The shell Function" Link "Shell Function"}.

@{b}$(origin @{I}VARIABLE@{ui})@{ub}
     Return a string describing how the @{b}make@{ub} variable @{I}VARIABLE@{ui} was
     defined.
     See @{"The origin Function" Link "Origin Function"}.

@{b}$(foreach @{I}VAR@{ui},@{I}WORDS@{ui},@{I}TEXT@{ui})@{ub}
     Evaluate @{I}TEXT@{ui} with @{I}VAR@{ui} bound to each word in @{I}WORDS@{ui}, and
     concatenate the results.
     See @{"The foreach Function" Link "Foreach Function"}.

   Here is a summary of the automatic variables.  See
@{"Automatic Variables" Link "Automatic"}, for full information.

@{b} $@@{ub}
     The file name of the target.

@{b}$%@{ub}
     The target member name, when the target is an archive member.

@{b}$<@{ub}
     The name of the first dependency.

@{b}$?@{ub}
     The names of all the dependencies that are newer than the target,
     with spaces between them.  For dependencies which are archive
     members, only the member named is used (see @{"Archives" Link "Archives"}).

@{b}$^@{ub}
@{b}$+@{ub}
     The names of all the dependencies, with spaces between them.  For
     dependencies which are archive members, only the member named is
     used (see @{"Archives" Link "Archives"}).  The value of @{b}$^@{ub} omits duplicate
     dependencies, while @{b}$+@{ub} retains them and preserves their order.

@{b}$*@{ub}
     The stem with which an implicit rule matches (see
     @{"How Patterns Match" Link "Pattern Match"}).

@{b}$(@D)@{ub}
@{b}$(@F)@{ub}
     The directory part and the file-within-directory part of @{b} $@@{ub}.

@{b}$(*D)@{ub}
@{b}$(*F)@{ub}
     The directory part and the file-within-directory part of @{b}$*@{ub}.

@{b}$(%D)@{ub}
@{b}$(%F)@{ub}
     The directory part and the file-within-directory part of @{b}$%@{ub}.

@{b}$(<D)@{ub}
@{b}$(<F)@{ub}
     The directory part and the file-within-directory part of @{b}$<@{ub}.

@{b}$(^D)@{ub}
@{b}$(^F)@{ub}
     The directory part and the file-within-directory part of @{b}$^@{ub}.

@{b}$(+D)@{ub}
@{b}$(+F)@{ub}
     The directory part and the file-within-directory part of @{b}$+@{ub}.

@{b}$(?D)@{ub}
@{b}$(?F)@{ub}
     The directory part and the file-within-directory part of @{b}$?@{ub}.

   These variables are used specially by GNU @{b}make@{ub}:

@{b}MAKEFILES@{ub}
     Makefiles to be read on every invocation of @{b}make@{ub}.
     See @{"The Variable MAKEFILES" Link "MAKEFILES Variable"}.

@{b}VPATH@{ub}
     Directory search path for files not found in the current directory.
     See @{"VPATH Search Path for All Dependencies" Link "General Search"}.

@{b}SHELL@{ub}
     The name of the system default command interpreter, usually
     @{b}/bin/sh@{ub}.  You can set @{b}SHELL@{ub} in the makefile to change the
     shell used to run commands.  See @{"Command Execution" Link "Execution"}.

@{b}MAKESHELL@{ub}
     On MS-DOS only, the name of the command interpreter that is to be
     used by @{b}make@{ub}. This value takes precedence over the value of @{b}SHELL@{ub}.
     See @{"MAKESHELL variable" Link "Execution"}.

@{b}MAKE@{ub}
     The name with which @{b}make@{ub} was invoked.  Using this variable in
     commands has special meaning.  See @{"How the MAKE Variable Works" Link "MAKE Variable"}.

@{b}MAKELEVEL@{ub}
     The number of levels of recursion (sub-@{b}make@{ub}s).
     See @{"Variables-Recursion" Link "Variables-Recursion"}.

@{b}MAKEFLAGS@{ub}
     The flags given to @{b}make@{ub}.  You can set this in the environment or a
     makefile to set flags.
     See @{"Communicating Options to a Sub-make" Link "Options-Recursion"}.

@{b}MAKECMDGOALS@{ub}
     The targets given to @{b}make@{ub} on the command line.  Setting this
     variable has no effect on the operation of @{b}make@{ub}.
     See @{"Arguments to Specify the Goals" Link "Goals"}.

@{b}SUFFIXES@{ub}
     The default list of suffixes before @{b}make@{ub} reads any makefiles.


@EndNode

@Node "Complex Makefile" "make.guide/Complex Makefile"
@Next "Concept Index"
@Prev "Quick Reference"
@Toc "Main"

Complex Makefile Example
************************

   Here is the makefile for the GNU @{b}tar@{ub} program.  This is a moderately
complex makefile.

   Because it is the first target, the default goal is @{b}all@{ub}.  An
interesting feature of this makefile is that @{b}testpad.h@{ub} is a source file
automatically created by the @{b}testpad@{ub} program, itself compiled from
@{b}testpad.c@{ub}.

   If you type @{b}make@{ub} or @{b}make all@{ub}, then @{b}make@{ub} creates the @{b}tar@{ub} executable,
the @{b}rmt@{ub} daemon that provides remote tape access, and the @{b}tar.info@{ub} Info
file.

   If you type @{b}make install@{ub}, then @{b}make@{ub} not only creates @{b}tar@{ub}, @{b}rmt@{ub}, and
@{b}tar.info@{ub}, but also installs them.

   If you type @{b}make clean@{ub}, then @{b}make@{ub} removes the @{b}.o@{ub} files, and the @{b}tar@{ub},
@{b}rmt@{ub}, @{b}testpad@{ub}, @{b}testpad.h@{ub}, and @{b}core@{ub} files.

   If you type @{b}make distclean@{ub}, then @{b}make@{ub} not only removes the same
files as does @{b}make clean@{ub} but also the @{b}TAGS@{ub}, @{b}Makefile@{ub}, and @{b}config.status@{ub}
files.  (Although it is not evident, this makefile (and @{b}config.status@{ub})
is generated by the user with the @{b}configure@{ub} program, which is provided
in the @{b}tar@{ub} distribution, but is not shown here.)

   If you type @{b}make realclean@{ub}, then @{b}make@{ub} removes the same files as does @{b}make
distclean@{ub} and also removes the Info files generated from
@{b}tar.texinfo@{ub}.

   In addition, there are targets @{b}shar@{ub} and @{b}dist@{ub} that create
distribution kits.

     # Generated automatically from Makefile.in by configure.
# Un*x Makefile for GNU tar program.
# Copyright (C) 1991 Free Software Foundation, Inc.
     
# This program is free software; you can redistribute
# it and/or modify it under the terms of the GNU
# General Public License ...
...
...
     
SHELL = /bin/sh

#### Start of system configuration section. ####

srcdir = .

# If you use gcc, you should either run the
# fixincludes script that comes with it or else use
# gcc with the -traditional option.  Otherwise ioctl
# calls will be compiled incorrectly on some systems.
CC = gcc -O
YACC = bison -y
INSTALL = /usr/local/bin/install -c
INSTALLDATA = /usr/local/bin/install -c -m 644
     
# Things you might add to DEFS:
# -DSTDC_HEADERS        If you have ANSI C headers and
#                       libraries.
# -DPOSIX               If you have POSIX.1 headers and
#                       libraries.
# -DBSD42               If you have sys/dir.h (unless
#                       you use -DPOSIX), sys/file.h,
#                       and st_blocks in `struct stat'.
# -DUSG                 If you have System V/ANSI C
#                       string and memory functions
#                       and headers, sys/sysmacros.h,
#                       fcntl.h, getcwd, no valloc,
#                       and ndir.h (unless
#                       you use -DDIRENT).
# -DNO_MEMORY_H         If USG or STDC_HEADERS but do not
#                       include memory.h.
# -DDIRENT              If USG and you have dirent.h
#                       instead of ndir.h.
# -DSIGTYPE=int         If your signal handlers
#                       return int, not void.
# -DNO_MTIO             If you lack sys/mtio.h
#                       (magtape ioctls).
# -DNO_REMOTE           If you do not have a remote shell
#                       or rexec.
# -DUSE_REXEC           To use rexec for remote tape
#                       operations instead of
#                       forking rsh or remsh.
# -DVPRINTF_MISSING     If you lack vprintf function
#                       (but have _doprnt).
# -DDOPRNT_MISSING      If you lack _doprnt function.
#                       Also need to define
#                       -DVPRINTF_MISSING.
# -DFTIME_MISSING       If you lack ftime system call.
# -DSTRSTR_MISSING      If you lack strstr function.
# -DVALLOC_MISSING      If you lack valloc function.
# -DMKDIR_MISSING       If you lack mkdir and
#                       rmdir system calls.
# -DRENAME_MISSING      If you lack rename system call.
# -DFTRUNCATE_MISSING   If you lack ftruncate
#                       system call.
# -DV7                  On Version 7 Unix (not
#                       tested in a long time).
# -DEMUL_OPEN3          If you lack a 3-argument version
#                       of open, and want to emulate it
#                       with system calls you do have.
# -DNO_OPEN3            If you lack the 3-argument open
#                       and want to disable the tar -k
#                       option instead of emulating open.
# -DXENIX               If you have sys/inode.h
#                       and need it 94 to be included.

DEFS =  -DSIGTYPE=int -DDIRENT -DSTRSTR_MISSING \\
        -DVPRINTF_MISSING -DBSD42
# Set this to rtapelib.o unless you defined NO_REMOTE,
# in which case make it empty.
RTAPELIB = rtapelib.o
LIBS =
DEF_AR_FILE = /dev/rmt8
DEFBLOCKING = 20

CDEBUG = -g
CFLAGS = $(CDEBUG) -I. -I$(srcdir) $(DEFS) \\
        -DDEF_AR_FILE=\\"$(DEF_AR_FILE)\\" \\
        -DDEFBLOCKING=$(DEFBLOCKING)
LDFLAGS = -g
     
prefix = /usr/local
# Prefix for each installed program,
# normally empty or `g'.
binprefix =

# The directory to install tar in.
bindir = $(prefix)/bin

# The directory to install the info files in.
infodir = $(prefix)/info
     
#### End of system configuration section. ####

SRC1 =  tar.c create.c extract.c buffer.c \\
        getoldopt.c update.c gnu.c mangle.c
SRC2 =  version.c list.c names.c diffarch.c \\
        port.c wildmat.c getopt.c
SRC3 =  getopt1.c regex.c getdate.y
SRCS =  $(SRC1) $(SRC2) $(SRC3)
OBJ1 =  tar.o create.o extract.o buffer.o \\
        getoldopt.o update.o gnu.o mangle.o
OBJ2 =  version.o list.o names.o diffarch.o \\
        port.o wildmat.o getopt.o
OBJ3 =  getopt1.o regex.o getdate.o $(RTAPELIB)
OBJS =  $(OBJ1) $(OBJ2) $(OBJ3)
AUX =   README COPYING ChangeLog Makefile.in  \\
        makefile.pc configure configure.in \\
        tar.texinfo tar.info* texinfo.tex \\
        tar.h port.h open3.h getopt.h regex.h \\
        rmt.h rmt.c rtapelib.c alloca.c \\
        msd_dir.h msd_dir.c tcexparg.c \\
        level-0 level-1 backup-specs testpad.c
     
all:    tar rmt tar.info

tar:    $(OBJS)
        $(CC) $(LDFLAGS) -o $@ $(OBJS) $(LIBS)
     
rmt:    rmt.c
        $(CC) $(CFLAGS) $(LDFLAGS) -o $@ rmt.c
     
tar.info: tar.texinfo
        makeinfo tar.texinfo
     
install: all
        $(INSTALL) tar $(bindir)/$(binprefix)tar
        -test ! -f rmt || $(INSTALL) rmt /etc/rmt
        $(INSTALLDATA) $(srcdir)/tar.info* $(infodir)
     
$(OBJS): tar.h port.h testpad.h
regex.o buffer.o tar.o: regex.h
# getdate.y has 8 shift/reduce conflicts.
     
testpad.h: testpad
        ./testpad
     
testpad: testpad.o
        $(CC) -o $@ testpad.o
     
TAGS:   $(SRCS)
        etags $(SRCS)
     
clean:
        rm -f *.o tar rmt testpad testpad.h core
     
distclean: clean
        rm -f TAGS Makefile config.status
     
realclean: distclean
        rm -f tar.info*
     
shar: $(SRCS) $(AUX)
        shar $(SRCS) $(AUX) | compress \\
          > tar-`sed -e '/version_string/!d' \\
                     -e 's/[^0-9.]*\\([0-9.]*\\).*/\\1/' \\
                     -e q
                     version.c`.shar.Z
     
dist: $(SRCS) $(AUX)
        echo tar-`sed \\
             -e '/version_string/!d' \\
             -e 's/[^0-9.]*\\([0-9.]*\\).*/\\1/' \\
             -e q
             version.c` > .fname
        -rm -rf `cat .fname`
        mkdir `cat .fname`
        ln $(SRCS) $(AUX) `cat .fname`
        -rm -rf `cat .fname` .fname
        tar chZf `cat .fname`.tar.Z `cat .fname`
     
tar.zoo: $(SRCS) $(AUX)
        -rm -rf tmp.dir
        -mkdir tmp.dir
        -rm tar.zoo
        for X in $(SRCS) $(AUX) ; do \\
            echo $$X ; \\
            sed 's/$$/^M/' $$X \\
            > tmp.dir/$$X ; done
        cd tmp.dir ; zoo aM ../tar.zoo *
        -rm -rf tmp.dir


@EndNode

@Node "Concept Index" "make.guide/Concept Index"
@Next "Name Index"
@Prev "Complex Makefile"
@Toc "Main"

Index of Concepts
*****************

@Index "Concept Index"



 @{" # (comments), in commands                " Link "Commands"}   Commands
 @{" # (comments), in makefile                " Link "Makefile Contents"}   Makefile Contents
 @{" #include                                 " Link "Automatic Dependencies"}   Automatic Dependencies
 @{" $, in function call                      " Link "Syntax of Functions"}   Syntax of Functions
 @{" $, in rules                              " Link "Rule Syntax"}   Rule Syntax
 @{" $, in variable name                      " Link "Computed Names"}   Computed Names
 @{" $, in variable reference                 " Link "Reference"}   Reference
 @{" %, in pattern rules                      " Link "Pattern Intro"}   Pattern Intro
 @{" %, quoting in patsubst                   " Link "Text Functions"}   Text Functions
 @{" %, quoting in static pattern             " Link "Static Usage"}   Static Usage
 @{" %, quoting in vpath                      " Link "Selective Search"}   Selective Search
 @{" %, quoting with \ (backslash) <1>        " Link "Text Functions"}   Text Functions
 @{" %, quoting with \ (backslash) <2>        " Link "Selective Search"}   Selective Search
 @{" %, quoting with \ (backslash)            " Link "Static Usage"}   Static Usage
 @{" * (wildcard character)                   " Link "Wildcards"}   Wildcards
 @{" +, and define                            " Link "Sequences"}   Sequences
 @{" +=                                       " Link "Appending"}   Appending
 @{" ,v (RCS file extension)                  " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" - (in commands)                          " Link "Errors"}   Errors
 @{" -, and define                            " Link "Sequences"}   Sequences
 @{" --assume-new <1>                         " Link "Options Summary"}   Options Summary
 @{" --assume-new                             " Link "Instead of Execution"}   Instead of Execution
 @{" --assume-new, and recursion              " Link "Options-Recursion"}   Options-Recursion
 @{" --assume-old <1>                         " Link "Options Summary"}   Options Summary
 @{" --assume-old                             " Link "Avoiding Compilation"}   Avoiding Compilation
 @{" --assume-old, and recursion              " Link "Options-Recursion"}   Options-Recursion
 @{" --debug                                  " Link "Options Summary"}   Options Summary
 @{" --directory <1>                          " Link "Recursion"}   Recursion
 @{" --directory                              " Link "Options Summary"}   Options Summary
 @{" --directory, and --print-directory       " Link "-w Option"}   -w Option
 @{" --directory, and recursion               " Link "Options-Recursion"}   Options-Recursion
 @{" --dry-run <1>                            " Link "Echoing"}   Echoing
 @{" --dry-run <2>                            " Link "Instead of Execution"}   Instead of Execution
 @{" --dry-run                                " Link "Options Summary"}   Options Summary
 @{" --environment-overrides                  " Link "Options Summary"}   Options Summary
 @{" --file <1>                               " Link "Makefile Arguments"}   Makefile Arguments
 @{" --file <2>                               " Link "Makefile Names"}   Makefile Names
 @{" --file                                   " Link "Options Summary"}   Options Summary
 @{" --file, and recursion                    " Link "Options-Recursion"}   Options-Recursion
 @{" --help                                   " Link "Options Summary"}   Options Summary
 @{" --ignore-errors <1>                      " Link "Errors"}   Errors
 @{" --ignore-errors                          " Link "Options Summary"}   Options Summary
 @{" --include-dir <1>                        " Link "Options Summary"}   Options Summary
 @{" --include-dir                            " Link "Include"}   Include
 @{" --jobs <1>                               " Link "Options Summary"}   Options Summary
 @{" --jobs                                   " Link "Parallel"}   Parallel
 @{" --jobs, and recursion                    " Link "Options-Recursion"}   Options-Recursion
 @{" --just-print <1>                         " Link "Options Summary"}   Options Summary
 @{" --just-print <2>                         " Link "Echoing"}   Echoing
 @{" --just-print                             " Link "Instead of Execution"}   Instead of Execution
 @{" --keep-going <1>                         " Link "Errors"}   Errors
 @{" --keep-going <2>                         " Link "Options Summary"}   Options Summary
 @{" --keep-going                             " Link "Testing"}   Testing
 @{" --load-average <1>                       " Link "Parallel"}   Parallel
 @{" --load-average                           " Link "Options Summary"}   Options Summary
 @{" --makefile <1>                           " Link "Makefile Names"}   Makefile Names
 @{" --makefile <2>                           " Link "Options Summary"}   Options Summary
 @{" --makefile                               " Link "Makefile Arguments"}   Makefile Arguments
 @{" --max-load <1>                           " Link "Options Summary"}   Options Summary
 @{" --max-load                               " Link "Parallel"}   Parallel
 @{" --new-file <1>                           " Link "Instead of Execution"}   Instead of Execution
 @{" --new-file                               " Link "Options Summary"}   Options Summary
 @{" --new-file, and recursion                " Link "Options-Recursion"}   Options-Recursion
 @{" --no-builtin-rules                       " Link "Options Summary"}   Options Summary
 @{" --no-keep-going                          " Link "Options Summary"}   Options Summary
 @{" --no-print-directory <1>                 " Link "-w Option"}   -w Option
 @{" --no-print-directory                     " Link "Options Summary"}   Options Summary
 @{" --old-file <1>                           " Link "Avoiding Compilation"}   Avoiding Compilation
 @{" --old-file                               " Link "Options Summary"}   Options Summary
 @{" --old-file, and recursion                " Link "Options-Recursion"}   Options-Recursion
 @{" --print-data-base                        " Link "Options Summary"}   Options Summary
 @{" --print-directory                        " Link "Options Summary"}   Options Summary
 @{" --print-directory, and --directory       " Link "-w Option"}   -w Option
 @{" --print-directory, and recursion         " Link "-w Option"}   -w Option
 @{" --print-directory, disabling             " Link "-w Option"}   -w Option
 @{" --question <1>                           " Link "Instead of Execution"}   Instead of Execution
 @{" --question                               " Link "Options Summary"}   Options Summary
 @{" --quiet <1>                              " Link "Echoing"}   Echoing
 @{" --quiet                                  " Link "Options Summary"}   Options Summary
 @{" --recon <1>                              " Link "Options Summary"}   Options Summary
 @{" --recon <2>                              " Link "Echoing"}   Echoing
 @{" --recon                                  " Link "Instead of Execution"}   Instead of Execution
 @{" --silent <1>                             " Link "Options Summary"}   Options Summary
 @{" --silent                                 " Link "Echoing"}   Echoing
 @{" --stop                                   " Link "Options Summary"}   Options Summary
 @{" --touch <1>                              " Link "Options Summary"}   Options Summary
 @{" --touch                                  " Link "Instead of Execution"}   Instead of Execution
 @{" --touch, and recursion                   " Link "MAKE Variable"}   MAKE Variable
 @{" --version                                " Link "Options Summary"}   Options Summary
 @{" --warn-undefined-variables               " Link "Options Summary"}   Options Summary
 @{" --what-if <1>                            " Link "Options Summary"}   Options Summary
 @{" --what-if                                " Link "Instead of Execution"}   Instead of Execution
 @{" -b                                       " Link "Options Summary"}   Options Summary
 @{" -C <1>                                   " Link "Recursion"}   Recursion
 @{" -C                                       " Link "Options Summary"}   Options Summary
 @{" -C, and -w                               " Link "-w Option"}   -w Option
 @{" -C, and recursion                        " Link "Options-Recursion"}   Options-Recursion
 @{" -d                                       " Link "Options Summary"}   Options Summary
 @{" -e                                       " Link "Options Summary"}   Options Summary
 @{" -e (shell flag)                          " Link "Automatic Dependencies"}   Automatic Dependencies
 @{" -f <1>                                   " Link "Options Summary"}   Options Summary
 @{" -f <2>                                   " Link "Makefile Arguments"}   Makefile Arguments
 @{" -f                                       " Link "Makefile Names"}   Makefile Names
 @{" -f, and recursion                        " Link "Options-Recursion"}   Options-Recursion
 @{" -h                                       " Link "Options Summary"}   Options Summary
 @{" -i                                       " Link "Errors"}   Errors
 @{" -I                                       " Link "Options Summary"}   Options Summary
 @{" -i                                       " Link "Options Summary"}   Options Summary
 @{" -I                                       " Link "Include"}   Include
 @{" -j <1>                                   " Link "Parallel"}   Parallel
 @{" -j                                       " Link "Options Summary"}   Options Summary
 @{" -j, and archive update                   " Link "Archive Pitfalls"}   Archive Pitfalls
 @{" -j, and recursion                        " Link "Options-Recursion"}   Options-Recursion
 @{" -k <1>                                   " Link "Testing"}   Testing
 @{" -k <2>                                   " Link "Options Summary"}   Options Summary
 @{" -k                                       " Link "Errors"}   Errors
 @{" -l                                       " Link "Options Summary"}   Options Summary
 @{" -l (library search)                      " Link "Libraries-Search"}   Libraries-Search
 @{" -l (load average)                        " Link "Parallel"}   Parallel
 @{" -m                                       " Link "Options Summary"}   Options Summary
 @{" -M (to compiler)                         " Link "Automatic Dependencies"}   Automatic Dependencies
 @{" -MM (to GNU compiler)                    " Link "Automatic Dependencies"}   Automatic Dependencies
 @{" -n <1>                                   " Link "Instead of Execution"}   Instead of Execution
 @{" -n <2>                                   " Link "Options Summary"}   Options Summary
 @{" -n                                       " Link "Echoing"}   Echoing
 @{" -o <1>                                   " Link "Options Summary"}   Options Summary
 @{" -o                                       " Link "Avoiding Compilation"}   Avoiding Compilation
 @{" -o, and recursion                        " Link "Options-Recursion"}   Options-Recursion
 @{" -p                                       " Link "Options Summary"}   Options Summary
 @{" -q <1>                                   " Link "Instead of Execution"}   Instead of Execution
 @{" -q                                       " Link "Options Summary"}   Options Summary
 @{" -r                                       " Link "Options Summary"}   Options Summary
 @{" -S                                       " Link "Options Summary"}   Options Summary
 @{" -s <1>                                   " Link "Options Summary"}   Options Summary
 @{" -s                                       " Link "Echoing"}   Echoing
 @{" -t <1>                                   " Link "Instead of Execution"}   Instead of Execution
 @{" -t                                       " Link "Options Summary"}   Options Summary
 @{" -t, and recursion                        " Link "MAKE Variable"}   MAKE Variable
 @{" -v                                       " Link "Options Summary"}   Options Summary
 @{" -W                                       " Link "Options Summary"}   Options Summary
 @{" -w                                       " Link "Options Summary"}   Options Summary
 @{" -W                                       " Link "Instead of Execution"}   Instead of Execution
 @{" -w, and -C                               " Link "-w Option"}   -w Option
 @{" -w, and recursion                        " Link "-w Option"}   -w Option
 @{" -W, and recursion                        " Link "Options-Recursion"}   Options-Recursion
 @{" -w, disabling                            " Link "-w Option"}   -w Option
 @{" .a (archives)                            " Link "Archive Suffix Rules"}   Archive Suffix Rules
 @{" .c                                       " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" .C                                       " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" .cc                                      " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" .ch                                      " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" .d                                       " Link "Automatic Dependencies"}   Automatic Dependencies
 @{" .def                                     " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" .dvi                                     " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" .f                                       " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" .F                                       " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" .info                                    " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" .l                                       " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" .ln                                      " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" .mod                                     " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" .o                                       " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" .p                                       " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" .PRECIOUS intermediate files             " Link "Chained Rules"}   Chained Rules
 @{" .r                                       " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" .s                                       " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" .S                                       " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" .sh                                      " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" .sym                                     " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" .tex                                     " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" .texi                                    " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" .texinfo                                 " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" .txinfo                                  " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" .w                                       " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" .web                                     " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" .y                                       " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" :: rules (double-colon)                  " Link "Double-Colon"}   Double-Colon
 @{" := <1>                                   " Link "Flavors"}   Flavors
 @{" :=                                       " Link "Setting"}   Setting
 @{" = <1>                                    " Link "Flavors"}   Flavors
 @{" =                                        " Link "Setting"}   Setting
 @{" ? (wildcard character)                   " Link "Wildcards"}   Wildcards
 @{" @ (in commands)                          " Link "Echoing"}   Echoing
 @{" @, and define                            " Link "Sequences"}   Sequences
 @{" [...] (wildcard characters)              " Link "Wildcards"}   Wildcards
 @{" \ (backslash), for continuation lines    " Link "Simple Makefile"}   Simple Makefile
 @{" \ (backslash), in commands               " Link "Execution"}   Execution
 @{" \ (backslash), to quote % <1>            " Link "Selective Search"}   Selective Search
 @{" \ (backslash), to quote % <2>            " Link "Static Usage"}   Static Usage
 @{" \ (backslash), to quote %                " Link "Text Functions"}   Text Functions
 @{" __.SYMDEF                                " Link "Archive Symbols"}   Archive Symbols
 @{" algorithm for directory search           " Link "Search Algorithm"}   Search Algorithm
 @{" all (standard target)                    " Link "Goals"}   Goals
 @{" appending to variables                   " Link "Appending"}   Appending
 @{" ar                                       " Link "Implicit Variables"}   Implicit Variables
 @{" archive                                  " Link "Archives"}   Archives
 @{" archive member targets                   " Link "Archive Members"}   Archive Members
 @{" archive symbol directory updating        " Link "Archive Symbols"}   Archive Symbols
 @{" archive, and -j                          " Link "Archive Pitfalls"}   Archive Pitfalls
 @{" archive, and parallel execution          " Link "Archive Pitfalls"}   Archive Pitfalls
 @{" archive, suffix rule for                 " Link "Archive Suffix Rules"}   Archive Suffix Rules
 @{" Arg list too long                        " Link "Options-Recursion"}   Options-Recursion
 @{" arguments of functions                   " Link "Syntax of Functions"}   Syntax of Functions
 @{" as <1>                                   " Link "Implicit Variables"}   Implicit Variables
 @{" as                                       " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" assembly, rule to compile                " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" automatic generation of dependencies <1> " Link "Automatic Dependencies"}   Automatic Dependencies
 @{" automatic generation of dependencies     " Link "Include"}   Include
 @{" automatic variables                      " Link "Automatic"}   Automatic
 @{" backquotes                               " Link "Shell Function"}   Shell Function
 @{" backslash (\), for continuation lines    " Link "Simple Makefile"}   Simple Makefile
 @{" backslash (\), in commands               " Link "Execution"}   Execution
 @{" backslash (\), to quote % <1>            " Link "Selective Search"}   Selective Search
 @{" backslash (\), to quote % <2>            " Link "Text Functions"}   Text Functions
 @{" backslash (\), to quote %                " Link "Static Usage"}   Static Usage
 @{" backslashes in pathnames and wildcard expansion " Link "Wildcard Pitfall"}   Wildcard Pitfall
 @{" basename                                 " Link "File Name Functions"}   File Name Functions
 @{" binary packages                          " Link "Install Command Categories"}   Install Command Categories
 @{" broken pipe                              " Link "Parallel"}   Parallel
 @{" bugs, reporting                          " Link "Bugs"}   Bugs
 @{" built-in special targets                 " Link "Special Targets"}   Special Targets
 @{" C++, rule to compile                     " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" C, rule to compile                       " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" cc <1>                                   " Link "Implicit Variables"}   Implicit Variables
 @{" cc                                       " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" cd (shell command) <1>                   " Link "Execution"}   Execution
 @{" cd (shell command)                       " Link "MAKE Variable"}   MAKE Variable
 @{" chains of rules                          " Link "Chained Rules"}   Chained Rules
 @{" check (standard target)                  " Link "Goals"}   Goals
 @{" clean (standard target)                  " Link "Goals"}   Goals
 @{" clean target <1>                         " Link "Simple Makefile"}   Simple Makefile
 @{" clean target                             " Link "Cleanup"}   Cleanup
 @{" cleaning up                              " Link "Cleanup"}   Cleanup
 @{" clobber (standard target)                " Link "Goals"}   Goals
 @{" co <1>                                   " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" co                                       " Link "Implicit Variables"}   Implicit Variables
 @{" combining rules by dependency            " Link "Combine By Dependency"}   Combine By Dependency
 @{" command line variable definitions, and recursion " Link "Options-Recursion"}   Options-Recursion
 @{" command line variables                   " Link "Overriding"}   Overriding
 @{" commands                                 " Link "Rule Syntax"}   Rule Syntax
 @{" commands, backslash (\) in               " Link "Execution"}   Execution
 @{" commands, comments in                    " Link "Commands"}   Commands
 @{" commands, echoing                        " Link "Echoing"}   Echoing
 @{" commands, empty                          " Link "Empty Commands"}   Empty Commands
 @{" commands, errors in                      " Link "Errors"}   Errors
 @{" commands, execution                      " Link "Execution"}   Execution
 @{" commands, execution in parallel          " Link "Parallel"}   Parallel
 @{" commands, expansion                      " Link "Shell Function"}   Shell Function
 @{" commands, how to write                   " Link "Commands"}   Commands
 @{" commands, instead of executing           " Link "Instead of Execution"}   Instead of Execution
 @{" commands, introduction to                " Link "Rule Introduction"}   Rule Introduction
 @{" commands, quoting newlines in            " Link "Execution"}   Execution
 @{" commands, sequences of                   " Link "Sequences"}   Sequences
 @{" comments, in commands                    " Link "Commands"}   Commands
 @{" comments, in makefile                    " Link "Makefile Contents"}   Makefile Contents
 @{" compatibility                            " Link "Features"}   Features
 @{" compatibility in exporting               " Link "Variables-Recursion"}   Variables-Recursion
 @{" compilation, testing                     " Link "Testing"}   Testing
 @{" computed variable name                   " Link "Computed Names"}   Computed Names
 @{" conditionals                             " Link "Conditionals"}   Conditionals
 @{" continuation lines                       " Link "Simple Makefile"}   Simple Makefile
 @{" conventions for makefiles                " Link "Makefile Conventions"}   Makefile Conventions
 @{" ctangle <1>                              " Link "Implicit Variables"}   Implicit Variables
 @{" ctangle                                  " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" cweave <1>                               " Link "Implicit Variables"}   Implicit Variables
 @{" cweave                                   " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" deducing commands (implicit rules)       " Link "make Deduces"}   make Deduces
 @{" default directries for included makefiles " Link "Include"}   Include
 @{" default goal <1>                         " Link "How Make Works"}   How Make Works
 @{" default goal                             " Link "Rules"}   Rules
 @{" default makefile name                    " Link "Makefile Names"}   Makefile Names
 @{" default rules, last-resort               " Link "Last Resort"}   Last Resort
 @{" defining variables verbatim              " Link "Defining"}   Defining
 @{" deletion of target files <1>             " Link "Interrupts"}   Interrupts
 @{" deletion of target files                 " Link "Errors"}   Errors
 @{" dependencies                             " Link "Rule Syntax"}   Rule Syntax
 @{" dependencies, automatic generation <1>   " Link "Include"}   Include
 @{" dependencies, automatic generation       " Link "Automatic Dependencies"}   Automatic Dependencies
 @{" dependencies, introduction to            " Link "Rule Introduction"}   Rule Introduction
 @{" dependencies, list of all                " Link "Automatic"}   Automatic
 @{" dependencies, list of changed            " Link "Automatic"}   Automatic
 @{" dependencies, varying (static pattern)   " Link "Static Pattern"}   Static Pattern
 @{" dependency                               " Link "Rules"}   Rules
 @{" dependency pattern, implicit             " Link "Pattern Intro"}   Pattern Intro
 @{" dependency pattern, static (not implicit) " Link "Static Usage"}   Static Usage
 @{" directive                                " Link "Makefile Contents"}   Makefile Contents
 @{" directories, printing them               " Link "-w Option"}   -w Option
 @{" directories, updating archive symbol     " Link "Archive Symbols"}   Archive Symbols
 @{" directory part                           " Link "File Name Functions"}   File Name Functions
 @{" directory search (VPATH)                 " Link "Directory Search"}   Directory Search
 @{" directory search (VPATH), and implicit rules " Link "Implicit-Search"}   Implicit-Search
 @{" directory search (VPATH), and link libraries " Link "Libraries-Search"}   Libraries-Search
 @{" directory search (VPATH), and shell commands " Link "Commands-Search"}   Commands-Search
 @{" directory search algorithm               " Link "Search Algorithm"}   Search Algorithm
 @{" directory search, traditional            " Link "Search Algorithm"}   Search Algorithm
 @{" dist (standard target)                   " Link "Goals"}   Goals
 @{" distclean (standard target)              " Link "Goals"}   Goals
 @{" dollar sign ($), in function call        " Link "Syntax of Functions"}   Syntax of Functions
 @{" dollar sign ($), in rules                " Link "Rule Syntax"}   Rule Syntax
 @{" dollar sign ($), in variable name        " Link "Computed Names"}   Computed Names
 @{" dollar sign ($), in variable reference   " Link "Reference"}   Reference
 @{" double-colon rules                       " Link "Double-Colon"}   Double-Colon
 @{" duplicate words, removing                " Link "Text Functions"}   Text Functions
 @{" E2BIG                                    " Link "Options-Recursion"}   Options-Recursion
 @{" echoing of commands                      " Link "Echoing"}   Echoing
 @{" editor                                   " Link "Introduction"}   Introduction
 @{" Emacs (M-x compile)                      " Link "Errors"}   Errors
 @{" empty commands                           " Link "Empty Commands"}   Empty Commands
 @{" empty targets                            " Link "Empty Targets"}   Empty Targets
 @{" environment                              " Link "Environment"}   Environment
 @{" environment, and recursion               " Link "Variables-Recursion"}   Variables-Recursion
 @{" environment, SHELL in                    " Link "Execution"}   Execution
 @{" errors (in commands)                     " Link "Errors"}   Errors
 @{" errors with wildcards                    " Link "Wildcard Pitfall"}   Wildcard Pitfall
 @{" execution, in parallel                   " Link "Parallel"}   Parallel
 @{" execution, instead of                    " Link "Instead of Execution"}   Instead of Execution
 @{" execution, of commands                   " Link "Execution"}   Execution
 @{" exit status (errors)                     " Link "Errors"}   Errors
 @{" explicit rule, definition of             " Link "Makefile Contents"}   Makefile Contents
 @{" exporting variables                      " Link "Variables-Recursion"}   Variables-Recursion
 @{" f77 <1>                                  " Link "Implicit Variables"}   Implicit Variables
 @{" f77                                      " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" features of GNU make                     " Link "Features"}   Features
 @{" features, missing                        " Link "Missing"}   Missing
 @{" file name functions                      " Link "File Name Functions"}   File Name Functions
 @{" file name of makefile                    " Link "Makefile Names"}   Makefile Names
 @{" file name of makefile, how to specify    " Link "Makefile Names"}   Makefile Names
 @{" file name prefix, adding                 " Link "File Name Functions"}   File Name Functions
 @{" file name suffix                         " Link "File Name Functions"}   File Name Functions
 @{" file name suffix, adding                 " Link "File Name Functions"}   File Name Functions
 @{" file name with wildcards                 " Link "Wildcards"}   Wildcards
 @{" file name, basename of                   " Link "File Name Functions"}   File Name Functions
 @{" file name, directory part                " Link "File Name Functions"}   File Name Functions
 @{" file name, nondirectory part             " Link "File Name Functions"}   File Name Functions
 @{" files, assuming new                      " Link "Instead of Execution"}   Instead of Execution
 @{" files, assuming old                      " Link "Avoiding Compilation"}   Avoiding Compilation
 @{" files, avoiding recompilation of         " Link "Avoiding Compilation"}   Avoiding Compilation
 @{" files, intermediate                      " Link "Chained Rules"}   Chained Rules
 @{" filtering out words                      " Link "Text Functions"}   Text Functions
 @{" filtering words                          " Link "Text Functions"}   Text Functions
 @{" finding strings                          " Link "Text Functions"}   Text Functions
 @{" flags                                    " Link "Options Summary"}   Options Summary
 @{" flags for compilers                      " Link "Implicit Variables"}   Implicit Variables
 @{" flavors of variables                     " Link "Flavors"}   Flavors
 @{" FORCE                                    " Link "Force Targets"}   Force Targets
 @{" force targets                            " Link "Force Targets"}   Force Targets
 @{" Fortran, rule to compile                 " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" functions                                " Link "Functions"}   Functions
 @{" functions, for file names                " Link "File Name Functions"}   File Name Functions
 @{" functions, for text                      " Link "Text Functions"}   Text Functions
 @{" functions, syntax of                     " Link "Syntax of Functions"}   Syntax of Functions
 @{" g++ <1>                                  " Link "Implicit Variables"}   Implicit Variables
 @{" g++                                      " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" gcc                                      " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" generating dependencies automatically <1> " Link "Automatic Dependencies"}   Automatic Dependencies
 @{" generating dependencies automatically    " Link "Include"}   Include
 @{" get <1>                                  " Link "Implicit Variables"}   Implicit Variables
 @{" get                                      " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" globbing (wildcards)                     " Link "Wildcards"}   Wildcards
 @{" goal                                     " Link "How Make Works"}   How Make Works
 @{" goal, default <1>                        " Link "Rules"}   Rules
 @{" goal, default                            " Link "How Make Works"}   How Make Works
 @{" goal, how to specify                     " Link "Goals"}   Goals
 @{" home directory                           " Link "Wildcards"}   Wildcards
 @{" IEEE Standard 1003.2                     " Link "Overview"}   Overview
 @{" implicit rule                            " Link "Implicit Rules"}   Implicit Rules
 @{" implicit rule, and directory search      " Link "Implicit-Search"}   Implicit-Search
 @{" implicit rule, and VPATH                 " Link "Implicit-Search"}   Implicit-Search
 @{" implicit rule, definition of             " Link "Makefile Contents"}   Makefile Contents
 @{" implicit rule, how to use                " Link "Using Implicit"}   Using Implicit
 @{" implicit rule, introduction to           " Link "make Deduces"}   make Deduces
 @{" implicit rule, predefined                " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" implicit rule, search algorithm          " Link "Implicit Rule Search"}   Implicit Rule Search
 @{" included makefiles, default directries   " Link "Include"}   Include
 @{" including (MAKEFILES variable)           " Link "MAKEFILES Variable"}   MAKEFILES Variable
 @{" including other makefiles                " Link "Include"}   Include
 @{" incompatibilities                        " Link "Missing"}   Missing
 @{" Info, rule to format                     " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" install (standard target)                " Link "Goals"}   Goals
 @{" intermediate files                       " Link "Chained Rules"}   Chained Rules
 @{" intermediate files, preserving           " Link "Chained Rules"}   Chained Rules
 @{" intermediate targets, explicit           " Link "Special Targets"}   Special Targets
 @{" interrupt                                " Link "Interrupts"}   Interrupts
 @{" job slots                                " Link "Parallel"}   Parallel
 @{" job slots, and recursion                 " Link "Options-Recursion"}   Options-Recursion
 @{" jobs, limiting based on load             " Link "Parallel"}   Parallel
 @{" joining lists of words                   " Link "File Name Functions"}   File Name Functions
 @{" killing (interruption)                   " Link "Interrupts"}   Interrupts
 @{" last-resort default rules                " Link "Last Resort"}   Last Resort
 @{" ld                                       " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" lex <1>                                  " Link "Implicit Variables"}   Implicit Variables
 @{" lex                                      " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" Lex, rule to run                         " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" libraries for linking, directory search  " Link "Libraries-Search"}   Libraries-Search
 @{" library archive, suffix rule for         " Link "Archive Suffix Rules"}   Archive Suffix Rules
 @{" limiting jobs based on load              " Link "Parallel"}   Parallel
 @{" link libraries, and directory search     " Link "Libraries-Search"}   Libraries-Search
 @{" linking, predefined rule for             " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" lint                                     " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" lint, rule to run                        " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" list of all dependencies                 " Link "Automatic"}   Automatic
 @{" list of changed dependencies             " Link "Automatic"}   Automatic
 @{" load average                             " Link "Parallel"}   Parallel
 @{" loops in variable expansion              " Link "Flavors"}   Flavors
 @{" lpr (shell command) <1>                  " Link "Wildcard Examples"}   Wildcard Examples
 @{" lpr (shell command)                      " Link "Empty Targets"}   Empty Targets
 @{" m2c                                      " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" macro                                    " Link "Using Variables"}   Using Variables
 @{" make depend                              " Link "Automatic Dependencies"}   Automatic Dependencies
 @{" MAKECMDGOALS                             " Link "Goals"}   Goals
 @{" makefile                                 " Link "Introduction"}   Introduction
 @{" makefile name                            " Link "Makefile Names"}   Makefile Names
 @{" makefile name, how to specify            " Link "Makefile Names"}   Makefile Names
 @{" makefile rule parts                      " Link "Rule Introduction"}   Rule Introduction
 @{" makefile, and MAKEFILES variable         " Link "MAKEFILES Variable"}   MAKEFILES Variable
 @{" makefile, conventions for                " Link "Makefile Conventions"}   Makefile Conventions
 @{" makefile, how make processes             " Link "How Make Works"}   How Make Works
 @{" makefile, how to write                   " Link "Makefiles"}   Makefiles
 @{" makefile, including                      " Link "Include"}   Include
 @{" makefile, overriding                     " Link "Overriding Makefiles"}   Overriding Makefiles
 @{" makefile, remaking of                    " Link "Remaking Makefiles"}   Remaking Makefiles
 @{" makefile, simple                         " Link "Simple Makefile"}   Simple Makefile
 @{" makeinfo <1>                             " Link "Implicit Variables"}   Implicit Variables
 @{" makeinfo                                 " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" match-anything rule                      " Link "Match-Anything Rules"}   Match-Anything Rules
 @{" match-anything rule, used to override    " Link "Overriding Makefiles"}   Overriding Makefiles
 @{" missing features                         " Link "Missing"}   Missing
 @{" mistakes with wildcards                  " Link "Wildcard Pitfall"}   Wildcard Pitfall
 @{" modified variable reference              " Link "Substitution Refs"}   Substitution Refs
 @{" Modula-2, rule to compile                " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" mostlyclean (standard target)            " Link "Goals"}   Goals
 @{" multiple rules for one target            " Link "Multiple Rules"}   Multiple Rules
 @{" multiple rules for one target (::)       " Link "Double-Colon"}   Double-Colon
 @{" multiple targets                         " Link "Multiple Targets"}   Multiple Targets
 @{" multiple targets, in pattern rule        " Link "Pattern Intro"}   Pattern Intro
 @{" name of makefile                         " Link "Makefile Names"}   Makefile Names
 @{" name of makefile, how to specify         " Link "Makefile Names"}   Makefile Names
 @{" nested variable reference                " Link "Computed Names"}   Computed Names
 @{" newline, quoting, in commands            " Link "Execution"}   Execution
 @{" newline, quoting, in makefile            " Link "Simple Makefile"}   Simple Makefile
 @{" nondirectory part                        " Link "File Name Functions"}   File Name Functions
 @{" obj                                      " Link "Variables Simplify"}   Variables Simplify
 @{" OBJ                                      " Link "Variables Simplify"}   Variables Simplify
 @{" OBJECTS                                  " Link "Variables Simplify"}   Variables Simplify
 @{" objects                                  " Link "Variables Simplify"}   Variables Simplify
 @{" objs                                     " Link "Variables Simplify"}   Variables Simplify
 @{" OBJS                                     " Link "Variables Simplify"}   Variables Simplify
 @{" old-fashioned suffix rules               " Link "Suffix Rules"}   Suffix Rules
 @{" options                                  " Link "Options Summary"}   Options Summary
 @{" options, and recursion                   " Link "Options-Recursion"}   Options-Recursion
 @{" options, setting from environment        " Link "Options-Recursion"}   Options-Recursion
 @{" options, setting in makefiles            " Link "Options-Recursion"}   Options-Recursion
 @{" order of pattern rules                   " Link "Pattern Intro"}   Pattern Intro
 @{" origin of variable                       " Link "Origin Function"}   Origin Function
 @{" overriding makefiles                     " Link "Overriding Makefiles"}   Overriding Makefiles
 @{" overriding variables with arguments      " Link "Overriding"}   Overriding
 @{" overriding with override                 " Link "Override Directive"}   Override Directive
 @{" parallel execution                       " Link "Parallel"}   Parallel
 @{" parallel execution, and archive update   " Link "Archive Pitfalls"}   Archive Pitfalls
 @{" parts of makefile rule                   " Link "Rule Introduction"}   Rule Introduction
 @{" Pascal, rule to compile                  " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" pattern rule                             " Link "Pattern Intro"}   Pattern Intro
 @{" pattern rules, order of                  " Link "Pattern Intro"}   Pattern Intro
 @{" pattern rules, static (not implicit)     " Link "Static Pattern"}   Static Pattern
 @{" pattern rules, static, syntax of         " Link "Static Usage"}   Static Usage
 @{" pc <1>                                   " Link "Implicit Variables"}   Implicit Variables
 @{" pc                                       " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" phony targets                            " Link "Phony Targets"}   Phony Targets
 @{" pitfalls of wildcards                    " Link "Wildcard Pitfall"}   Wildcard Pitfall
 @{" portability                              " Link "Features"}   Features
 @{" POSIX                                    " Link "Overview"}   Overview
 @{" POSIX.2                                  " Link "Options-Recursion"}   Options-Recursion
 @{" post-installation commands               " Link "Install Command Categories"}   Install Command Categories
 @{" pre-installation commands                " Link "Install Command Categories"}   Install Command Categories
 @{" precious targets                         " Link "Special Targets"}   Special Targets
 @{" prefix, adding                           " Link "File Name Functions"}   File Name Functions
 @{" preserving intermediate files            " Link "Chained Rules"}   Chained Rules
 @{" preserving with .PRECIOUS <1>            " Link "Chained Rules"}   Chained Rules
 @{" preserving with .PRECIOUS                " Link "Special Targets"}   Special Targets
 @{" preserving with .SECONDARY               " Link "Special Targets"}   Special Targets
 @{" print (standard target)                  " Link "Goals"}   Goals
 @{" print target <1>                         " Link "Empty Targets"}   Empty Targets
 @{" print target                             " Link "Wildcard Examples"}   Wildcard Examples
 @{" printing directories                     " Link "-w Option"}   -w Option
 @{" printing of commands                     " Link "Echoing"}   Echoing
 @{" problems and bugs, reporting             " Link "Bugs"}   Bugs
 @{" problems with wildcards                  " Link "Wildcard Pitfall"}   Wildcard Pitfall
 @{" processing a makefile                    " Link "How Make Works"}   How Make Works
 @{" question mode                            " Link "Instead of Execution"}   Instead of Execution
 @{" quoting %, in patsubst                   " Link "Text Functions"}   Text Functions
 @{" quoting %, in static pattern             " Link "Static Usage"}   Static Usage
 @{" quoting %, in vpath                      " Link "Selective Search"}   Selective Search
 @{" quoting newline, in commands             " Link "Execution"}   Execution
 @{" quoting newline, in makefile             " Link "Simple Makefile"}   Simple Makefile
 @{" Ratfor, rule to compile                  " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" RCS, rule to extract from                " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" README                                   " Link "Makefile Names"}   Makefile Names
 @{" realclean (standard target)              " Link "Goals"}   Goals
 @{" recompilation                            " Link "Introduction"}   Introduction
 @{" recompilation, avoiding                  " Link "Avoiding Compilation"}   Avoiding Compilation
 @{" recording events with empty targets      " Link "Empty Targets"}   Empty Targets
 @{" recursion                                " Link "Recursion"}   Recursion
 @{" recursion, and -C                        " Link "Options-Recursion"}   Options-Recursion
 @{" recursion, and -f                        " Link "Options-Recursion"}   Options-Recursion
 @{" recursion, and -j                        " Link "Options-Recursion"}   Options-Recursion
 @{" recursion, and -o                        " Link "Options-Recursion"}   Options-Recursion
 @{" recursion, and -t                        " Link "MAKE Variable"}   MAKE Variable
 @{" recursion, and -W                        " Link "Options-Recursion"}   Options-Recursion
 @{" recursion, and -w                        " Link "-w Option"}   -w Option
 @{" recursion, and command line variable definitions " Link "Options-Recursion"}   Options-Recursion
 @{" recursion, and environment               " Link "Variables-Recursion"}   Variables-Recursion
 @{" recursion, and MAKE variable             " Link "MAKE Variable"}   MAKE Variable
 @{" recursion, and MAKEFILES variable        " Link "MAKEFILES Variable"}   MAKEFILES Variable
 @{" recursion, and options                   " Link "Options-Recursion"}   Options-Recursion
 @{" recursion, and printing directories      " Link "-w Option"}   -w Option
 @{" recursion, and variables                 " Link "Variables-Recursion"}   Variables-Recursion
 @{" recursion, level of                      " Link "Variables-Recursion"}   Variables-Recursion
 @{" recursive variable expansion <1>         " Link "Flavors"}   Flavors
 @{" recursive variable expansion             " Link "Using Variables"}   Using Variables
 @{" recursively expanded variables           " Link "Flavors"}   Flavors
 @{" reference to variables <1>               " Link "Reference"}   Reference
 @{" reference to variables                   " Link "Advanced"}   Advanced
 @{" relinking                                " Link "How Make Works"}   How Make Works
 @{" remaking makefiles                       " Link "Remaking Makefiles"}   Remaking Makefiles
 @{" removal of target files <1>              " Link "Errors"}   Errors
 @{" removal of target files                  " Link "Interrupts"}   Interrupts
 @{" removing duplicate words                 " Link "Text Functions"}   Text Functions
 @{" removing, to clean up                    " Link "Cleanup"}   Cleanup
 @{" reporting bugs                           " Link "Bugs"}   Bugs
 @{" rm                                       " Link "Implicit Variables"}   Implicit Variables
 @{" rm (shell command) <1>                   " Link "Wildcard Examples"}   Wildcard Examples
 @{" rm (shell command) <2>                   " Link "Errors"}   Errors
 @{" rm (shell command) <3>                   " Link "Phony Targets"}   Phony Targets
 @{" rm (shell command)                       " Link "Simple Makefile"}   Simple Makefile
 @{" rule commands                            " Link "Commands"}   Commands
 @{" rule dependencies                        " Link "Rule Syntax"}   Rule Syntax
 @{" rule syntax                              " Link "Rule Syntax"}   Rule Syntax
 @{" rule targets                             " Link "Rule Syntax"}   Rule Syntax
 @{" rule, and $                              " Link "Rule Syntax"}   Rule Syntax
 @{" rule, double-colon (::)                  " Link "Double-Colon"}   Double-Colon
 @{" rule, explicit, definition of            " Link "Makefile Contents"}   Makefile Contents
 @{" rule, how to write                       " Link "Rules"}   Rules
 @{" rule, implicit                           " Link "Implicit Rules"}   Implicit Rules
 @{" rule, implicit, and directory search     " Link "Implicit-Search"}   Implicit-Search
 @{" rule, implicit, and VPATH                " Link "Implicit-Search"}   Implicit-Search
 @{" rule, implicit, chains of                " Link "Chained Rules"}   Chained Rules
 @{" rule, implicit, definition of            " Link "Makefile Contents"}   Makefile Contents
 @{" rule, implicit, how to use               " Link "Using Implicit"}   Using Implicit
 @{" rule, implicit, introduction to          " Link "make Deduces"}   make Deduces
 @{" rule, implicit, predefined               " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" rule, introduction to                    " Link "Rule Introduction"}   Rule Introduction
 @{" rule, multiple for one target            " Link "Multiple Rules"}   Multiple Rules
 @{" rule, no commands or dependencies        " Link "Force Targets"}   Force Targets
 @{" rule, pattern                            " Link "Pattern Intro"}   Pattern Intro
 @{" rule, static pattern                     " Link "Static Pattern"}   Static Pattern
 @{" rule, static pattern versus implicit     " Link "Static versus Implicit"}   Static versus Implicit
 @{" rule, with multiple targets              " Link "Multiple Targets"}   Multiple Targets
 @{" s. (SCCS file prefix)                    " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" SCCS, rule to extract from               " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" search algorithm, implicit rule          " Link "Implicit Rule Search"}   Implicit Rule Search
 @{" search path for dependencies (VPATH)     " Link "Directory Search"}   Directory Search
 @{" search path for dependencies (VPATH), and implicit rules " Link "Implicit-Search"}   Implicit-Search
 @{" search path for dependencies (VPATH), and link libraries " Link "Libraries-Search"}   Libraries-Search
 @{" searching for strings                    " Link "Text Functions"}   Text Functions
 @{" secondary files                          " Link "Chained Rules"}   Chained Rules
 @{" secondary targets                        " Link "Special Targets"}   Special Targets
 @{" sed (shell command)                      " Link "Automatic Dependencies"}   Automatic Dependencies
 @{" selecting a word                         " Link "File Name Functions"}   File Name Functions
 @{" selecting word lists                     " Link "File Name Functions"}   File Name Functions
 @{" sequences of commands                    " Link "Sequences"}   Sequences
 @{" setting options from environment         " Link "Options-Recursion"}   Options-Recursion
 @{" setting options in makefiles             " Link "Options-Recursion"}   Options-Recursion
 @{" setting variables                        " Link "Setting"}   Setting
 @{" several rules for one target             " Link "Multiple Rules"}   Multiple Rules
 @{" several targets in a rule                " Link "Multiple Targets"}   Multiple Targets
 @{" shar (standard target)                   " Link "Goals"}   Goals
 @{" shell command                            " Link "Simple Makefile"}   Simple Makefile
 @{" shell command, and directory search      " Link "Commands-Search"}   Commands-Search
 @{" shell command, execution                 " Link "Execution"}   Execution
 @{" shell command, function for              " Link "Shell Function"}   Shell Function
 @{" shell file name pattern (in include)     " Link "Include"}   Include
 @{" shell wildcards (in include)             " Link "Include"}   Include
 @{" SHELL, MS-DOS specifics                  " Link "Execution"}   Execution
 @{" signal                                   " Link "Interrupts"}   Interrupts
 @{" silent operation                         " Link "Echoing"}   Echoing
 @{" simple makefile                          " Link "Simple Makefile"}   Simple Makefile
 @{" simple variable expansion                " Link "Using Variables"}   Using Variables
 @{" simplifying with variables               " Link "Variables Simplify"}   Variables Simplify
 @{" simply expanded variables                " Link "Flavors"}   Flavors
 @{" sorting words                            " Link "Text Functions"}   Text Functions
 @{" spaces, in variable values               " Link "Flavors"}   Flavors
 @{" spaces, stripping                        " Link "Text Functions"}   Text Functions
 @{" special targets                          " Link "Special Targets"}   Special Targets
 @{" specifying makefile name                 " Link "Makefile Names"}   Makefile Names
 @{" standard input                           " Link "Parallel"}   Parallel
 @{" standards conformance                    " Link "Overview"}   Overview
 @{" standards for makefiles                  " Link "Makefile Conventions"}   Makefile Conventions
 @{" static pattern rule                      " Link "Static Pattern"}   Static Pattern
 @{" static pattern rule, syntax of           " Link "Static Usage"}   Static Usage
 @{" static pattern rule, versus implicit     " Link "Static versus Implicit"}   Static versus Implicit
 @{" stem <1>                                 " Link "Pattern Match"}   Pattern Match
 @{" stem                                     " Link "Static Usage"}   Static Usage
 @{" stem, variable for                       " Link "Automatic"}   Automatic
 @{" strings, searching for                   " Link "Text Functions"}   Text Functions
 @{" stripping whitespace                     " Link "Text Functions"}   Text Functions
 @{" sub-make                                 " Link "Variables-Recursion"}   Variables-Recursion
 @{" subdirectories, recursion for            " Link "Recursion"}   Recursion
 @{" substitution variable reference          " Link "Substitution Refs"}   Substitution Refs
 @{" suffix rule                              " Link "Suffix Rules"}   Suffix Rules
 @{" suffix rule, for archive                 " Link "Archive Suffix Rules"}   Archive Suffix Rules
 @{" suffix, adding                           " Link "File Name Functions"}   File Name Functions
 @{" suffix, function to find                 " Link "File Name Functions"}   File Name Functions
 @{" suffix, substituting in variables        " Link "Substitution Refs"}   Substitution Refs
 @{" switches                                 " Link "Options Summary"}   Options Summary
 @{" symbol directories, updating archive     " Link "Archive Symbols"}   Archive Symbols
 @{" syntax of rules                          " Link "Rule Syntax"}   Rule Syntax
 @{" tab character (in commands)              " Link "Rule Syntax"}   Rule Syntax
 @{" tabs in rules                            " Link "Rule Introduction"}   Rule Introduction
 @{" TAGS (standard target)                   " Link "Goals"}   Goals
 @{" tangle <1>                               " Link "Implicit Variables"}   Implicit Variables
 @{" tangle                                   " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" tar (standard target)                    " Link "Goals"}   Goals
 @{" target                                   " Link "Rules"}   Rules
 @{" target pattern, implicit                 " Link "Pattern Intro"}   Pattern Intro
 @{" target pattern, static (not implicit)    " Link "Static Usage"}   Static Usage
 @{" target, deleting on error                " Link "Errors"}   Errors
 @{" target, deleting on interrupt            " Link "Interrupts"}   Interrupts
 @{" target, multiple in pattern rule         " Link "Pattern Intro"}   Pattern Intro
 @{" target, multiple rules for one           " Link "Multiple Rules"}   Multiple Rules
 @{" target, touching                         " Link "Instead of Execution"}   Instead of Execution
 @{" targets                                  " Link "Rule Syntax"}   Rule Syntax
 @{" targets without a file                   " Link "Phony Targets"}   Phony Targets
 @{" targets, built-in special                " Link "Special Targets"}   Special Targets
 @{" targets, empty                           " Link "Empty Targets"}   Empty Targets
 @{" targets, force                           " Link "Force Targets"}   Force Targets
 @{" targets, introduction to                 " Link "Rule Introduction"}   Rule Introduction
 @{" targets, multiple                        " Link "Multiple Targets"}   Multiple Targets
 @{" targets, phony                           " Link "Phony Targets"}   Phony Targets
 @{" terminal rule                            " Link "Match-Anything Rules"}   Match-Anything Rules
 @{" test (standard target)                   " Link "Goals"}   Goals
 @{" testing compilation                      " Link "Testing"}   Testing
 @{" tex <1>                                  " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" tex                                      " Link "Implicit Variables"}   Implicit Variables
 @{" TeX, rule to run                         " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" texi2dvi <1>                             " Link "Implicit Variables"}   Implicit Variables
 @{" texi2dvi                                 " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" Texinfo, rule to format                  " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" tilde (~)                                " Link "Wildcards"}   Wildcards
 @{" touch (shell command) <1>                " Link "Wildcard Examples"}   Wildcard Examples
 @{" touch (shell command)                    " Link "Empty Targets"}   Empty Targets
 @{" touching files                           " Link "Instead of Execution"}   Instead of Execution
 @{" traditional directory search             " Link "Search Algorithm"}   Search Algorithm
 @{" undefined variables, warning message     " Link "Options Summary"}   Options Summary
 @{" updating archive symbol directories      " Link "Archive Symbols"}   Archive Symbols
 @{" updating makefiles                       " Link "Remaking Makefiles"}   Remaking Makefiles
 @{" value                                    " Link "Using Variables"}   Using Variables
 @{" value, how a variable gets it            " Link "Values"}   Values
 @{" variable                                 " Link "Using Variables"}   Using Variables
 @{" variable definition                      " Link "Makefile Contents"}   Makefile Contents
 @{" variables                                " Link "Variables Simplify"}   Variables Simplify
 @{" variables, $ in name                     " Link "Computed Names"}   Computed Names
 @{" variables, and implicit rule             " Link "Automatic"}   Automatic
 @{" variables, appending to                  " Link "Appending"}   Appending
 @{" variables, automatic                     " Link "Automatic"}   Automatic
 @{" variables, command line                  " Link "Overriding"}   Overriding
 @{" variables, command line, and recursion   " Link "Options-Recursion"}   Options-Recursion
 @{" variables, computed names                " Link "Computed Names"}   Computed Names
 @{" variables, defining verbatim             " Link "Defining"}   Defining
 @{" variables, environment <1>               " Link "Variables-Recursion"}   Variables-Recursion
 @{" variables, environment                   " Link "Environment"}   Environment
 @{" variables, exporting                     " Link "Variables-Recursion"}   Variables-Recursion
 @{" variables, flavors                       " Link "Flavors"}   Flavors
 @{" variables, how they get their values     " Link "Values"}   Values
 @{" variables, how to reference              " Link "Reference"}   Reference
 @{" variables, loops in expansion            " Link "Flavors"}   Flavors
 @{" variables, modified reference            " Link "Substitution Refs"}   Substitution Refs
 @{" variables, nested references             " Link "Computed Names"}   Computed Names
 @{" variables, origin of                     " Link "Origin Function"}   Origin Function
 @{" variables, overriding                    " Link "Override Directive"}   Override Directive
 @{" variables, overriding with arguments     " Link "Overriding"}   Overriding
 @{" variables, recursively expanded          " Link "Flavors"}   Flavors
 @{" variables, setting                       " Link "Setting"}   Setting
 @{" variables, simply expanded               " Link "Flavors"}   Flavors
 @{" variables, spaces in values              " Link "Flavors"}   Flavors
 @{" variables, substituting suffix in        " Link "Substitution Refs"}   Substitution Refs
 @{" variables, substitution reference        " Link "Substitution Refs"}   Substitution Refs
 @{" variables, warning for undefined         " Link "Options Summary"}   Options Summary
 @{" varying dependencies                     " Link "Static Pattern"}   Static Pattern
 @{" verbatim variable definition             " Link "Defining"}   Defining
 @{" vpath                                    " Link "Directory Search"}   Directory Search
 @{" VPATH, and implicit rules                " Link "Implicit-Search"}   Implicit-Search
 @{" VPATH, and link libraries                " Link "Libraries-Search"}   Libraries-Search
 @{" weave <1>                                " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" weave                                    " Link "Implicit Variables"}   Implicit Variables
 @{" Web, rule to run                         " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" what if                                  " Link "Instead of Execution"}   Instead of Execution
 @{" whitespace, in variable values           " Link "Flavors"}   Flavors
 @{" whitespace, stripping                    " Link "Text Functions"}   Text Functions
 @{" wildcard                                 " Link "Wildcards"}   Wildcards
 @{" wildcard pitfalls                        " Link "Wildcard Pitfall"}   Wildcard Pitfall
 @{" wildcard, function                       " Link "File Name Functions"}   File Name Functions
 @{" wildcard, in archive member              " Link "Archive Members"}   Archive Members
 @{" wildcard, in include                     " Link "Include"}   Include
 @{" wildcards and MS-DOS/MS-Windows backslashes " Link "Wildcard Pitfall"}   Wildcard Pitfall
 @{" word, selecting a                        " Link "File Name Functions"}   File Name Functions
 @{" words, extracting first                  " Link "File Name Functions"}   File Name Functions
 @{" words, filtering                         " Link "Text Functions"}   Text Functions
 @{" words, filtering out                     " Link "Text Functions"}   Text Functions
 @{" words, finding number                    " Link "File Name Functions"}   File Name Functions
 @{" words, iterating over                    " Link "Foreach Function"}   Foreach Function
 @{" words, joining lists                     " Link "File Name Functions"}   File Name Functions
 @{" words, removing duplicates               " Link "Text Functions"}   Text Functions
 @{" words, selecting lists of                " Link "File Name Functions"}   File Name Functions
 @{" writing rule commands                    " Link "Commands"}   Commands
 @{" writing rules                            " Link "Rules"}   Rules
 @{" yacc <1>                                 " Link "Sequences"}   Sequences
 @{" yacc <2>                                 " Link "Implicit Variables"}   Implicit Variables
 @{" yacc                                     " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" Yacc, rule to run                        " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" ~ (tilde)                                " Link "Wildcards"}   Wildcards


@EndNode

@Node "Name Index" "make.guide/Name Index"
@Prev "Concept Index"
@Toc "Main"

Index of Functions, Variables, & Directives
*******************************************



 @{" $%                                       " Link "Automatic"}   Automatic
 @{" $(%D)                                    " Link "Automatic"}   Automatic
 @{" $(%F)                                    " Link "Automatic"}   Automatic
 @{" $(*D)                                    " Link "Automatic"}   Automatic
 @{" $(*F)                                    " Link "Automatic"}   Automatic
 @{" $(<D)                                    " Link "Automatic"}   Automatic
 @{" $(<F)                                    " Link "Automatic"}   Automatic
 @{" $(?D)                                    " Link "Automatic"}   Automatic
 @{" $(?F)                                    " Link "Automatic"}   Automatic
 @{" $(@D)                                    " Link "Automatic"}   Automatic
 @{" $(@F)                                    " Link "Automatic"}   Automatic
 @{" $(^D)                                    " Link "Automatic"}   Automatic
 @{" $(^F)                                    " Link "Automatic"}   Automatic
 @{" $*                                       " Link "Automatic"}   Automatic
 @{" $*, and static pattern                   " Link "Static Usage"}   Static Usage
 @{" $+                                       " Link "Automatic"}   Automatic
 @{" $<                                       " Link "Automatic"}   Automatic
 @{" $?                                       " Link "Automatic"}   Automatic
 @{" $@                                       " Link "Automatic"}   Automatic
 @{" $^                                       " Link "Automatic"}   Automatic
 @{" % (automatic variable)                   " Link "Automatic"}   Automatic
 @{" %D (automatic variable)                  " Link "Automatic"}   Automatic
 @{" %F (automatic variable)                  " Link "Automatic"}   Automatic
 @{" * (automatic variable)                   " Link "Automatic"}   Automatic
 @{" * (automatic variable), unsupported bizarre usage " Link "Missing"}   Missing
 @{" *D (automatic variable)                  " Link "Automatic"}   Automatic
 @{" *F (automatic variable)                  " Link "Automatic"}   Automatic
 @{" + (automatic variable)                   " Link "Automatic"}   Automatic
 @{" .DEFAULT <1>                             " Link "Last Resort"}   Last Resort
 @{" .DEFAULT                                 " Link "Special Targets"}   Special Targets
 @{" .DEFAULT, and empty commands             " Link "Empty Commands"}   Empty Commands
 @{" .DELETE_ON_ERROR                         " Link "Errors"}   Errors
 @{" .EXPORT_ALL_VARIABLES <1>                " Link "Variables-Recursion"}   Variables-Recursion
 @{" .EXPORT_ALL_VARIABLES                    " Link "Special Targets"}   Special Targets
 @{" .IGNORE <1>                              " Link "Errors"}   Errors
 @{" .IGNORE                                  " Link "Special Targets"}   Special Targets
 @{" .INTERMEDIATE                            " Link "Special Targets"}   Special Targets
 @{" .PHONY <1>                               " Link "Phony Targets"}   Phony Targets
 @{" .PHONY                                   " Link "Special Targets"}   Special Targets
 @{" .POSIX                                   " Link "Options-Recursion"}   Options-Recursion
 @{" .PRECIOUS <1>                            " Link "Interrupts"}   Interrupts
 @{" .PRECIOUS                                " Link "Special Targets"}   Special Targets
 @{" .SECONDARY                               " Link "Special Targets"}   Special Targets
 @{" .SILENT <1>                              " Link "Echoing"}   Echoing
 @{" .SILENT                                  " Link "Special Targets"}   Special Targets
 @{" .SUFFIXES <1>                            " Link "Special Targets"}   Special Targets
 @{" .SUFFIXES                                " Link "Suffix Rules"}   Suffix Rules
 @{" /usr/gnu/include                         " Link "Include"}   Include
 @{" /usr/include                             " Link "Include"}   Include
 @{" /usr/local/include                       " Link "Include"}   Include
 @{" < (automatic variable)                   " Link "Automatic"}   Automatic
 @{" <D (automatic variable)                  " Link "Automatic"}   Automatic
 @{" <F (automatic variable)                  " Link "Automatic"}   Automatic
 @{" ? (automatic variable)                   " Link "Automatic"}   Automatic
 @{" ?D (automatic variable)                  " Link "Automatic"}   Automatic
 @{" ?F (automatic variable)                  " Link "Automatic"}   Automatic
 @{" @ (automatic variable)                   " Link "Automatic"}   Automatic
 @{" @D (automatic variable)                  " Link "Automatic"}   Automatic
 @{" @F (automatic variable)                  " Link "Automatic"}   Automatic
 @{" ^ (automatic variable)                   " Link "Automatic"}   Automatic
 @{" ^D (automatic variable)                  " Link "Automatic"}   Automatic
 @{" ^F (automatic variable)                  " Link "Automatic"}   Automatic
 @{" addprefix                                " Link "File Name Functions"}   File Name Functions
 @{" addsuffix                                " Link "File Name Functions"}   File Name Functions
 @{" AR                                       " Link "Implicit Variables"}   Implicit Variables
 @{" ARFLAGS                                  " Link "Implicit Variables"}   Implicit Variables
 @{" AS                                       " Link "Implicit Variables"}   Implicit Variables
 @{" ASFLAGS                                  " Link "Implicit Variables"}   Implicit Variables
 @{" basename                                 " Link "File Name Functions"}   File Name Functions
 @{" CC                                       " Link "Implicit Variables"}   Implicit Variables
 @{" CFLAGS                                   " Link "Implicit Variables"}   Implicit Variables
 @{" CO                                       " Link "Implicit Variables"}   Implicit Variables
 @{" COFLAGS                                  " Link "Implicit Variables"}   Implicit Variables
 @{" COMSPEC                                  " Link "Execution"}   Execution
 @{" CPP                                      " Link "Implicit Variables"}   Implicit Variables
 @{" CPPFLAGS                                 " Link "Implicit Variables"}   Implicit Variables
 @{" CTANGLE                                  " Link "Implicit Variables"}   Implicit Variables
 @{" CWEAVE                                   " Link "Implicit Variables"}   Implicit Variables
 @{" CXX                                      " Link "Implicit Variables"}   Implicit Variables
 @{" CXXFLAGS                                 " Link "Implicit Variables"}   Implicit Variables
 @{" define                                   " Link "Defining"}   Defining
 @{" dir                                      " Link "File Name Functions"}   File Name Functions
 @{" else                                     " Link "Conditional Syntax"}   Conditional Syntax
 @{" endef                                    " Link "Defining"}   Defining
 @{" endif                                    " Link "Conditional Syntax"}   Conditional Syntax
 @{" export                                   " Link "Variables-Recursion"}   Variables-Recursion
 @{" FC                                       " Link "Implicit Variables"}   Implicit Variables
 @{" FFLAGS                                   " Link "Implicit Variables"}   Implicit Variables
 @{" filter                                   " Link "Text Functions"}   Text Functions
 @{" filter-out                               " Link "Text Functions"}   Text Functions
 @{" findstring                               " Link "Text Functions"}   Text Functions
 @{" firstword                                " Link "File Name Functions"}   File Name Functions
 @{" foreach                                  " Link "Foreach Function"}   Foreach Function
 @{" GET                                      " Link "Implicit Variables"}   Implicit Variables
 @{" GFLAGS                                   " Link "Implicit Variables"}   Implicit Variables
 @{" GNUmakefile                              " Link "Makefile Names"}   Makefile Names
 @{" GPATH                                    " Link "Search Algorithm"}   Search Algorithm
 @{" ifdef                                    " Link "Conditional Syntax"}   Conditional Syntax
 @{" ifeq                                     " Link "Conditional Syntax"}   Conditional Syntax
 @{" ifndef                                   " Link "Conditional Syntax"}   Conditional Syntax
 @{" ifneq                                    " Link "Conditional Syntax"}   Conditional Syntax
 @{" include                                  " Link "Include"}   Include
 @{" join                                     " Link "File Name Functions"}   File Name Functions
 @{" LDFLAGS                                  " Link "Implicit Variables"}   Implicit Variables
 @{" LEX                                      " Link "Implicit Variables"}   Implicit Variables
 @{" LFLAGS                                   " Link "Implicit Variables"}   Implicit Variables
 @{" MAKE <1>                                 " Link "MAKE Variable"}   MAKE Variable
 @{" MAKE                                     " Link "Flavors"}   Flavors
 @{" MAKECMDGOALS                             " Link "Goals"}   Goals
 @{" Makefile                                 " Link "Makefile Names"}   Makefile Names
 @{" makefile                                 " Link "Makefile Names"}   Makefile Names
 @{" MAKEFILES <1>                            " Link "Variables-Recursion"}   Variables-Recursion
 @{" MAKEFILES                                " Link "MAKEFILES Variable"}   MAKEFILES Variable
 @{" MAKEFLAGS                                " Link "Options-Recursion"}   Options-Recursion
 @{" MAKEINFO                                 " Link "Implicit Variables"}   Implicit Variables
 @{" MAKELEVEL <1>                            " Link "Flavors"}   Flavors
 @{" MAKELEVEL                                " Link "Variables-Recursion"}   Variables-Recursion
 @{" MAKEOVERRIDES                            " Link "Options-Recursion"}   Options-Recursion
 @{" MFLAGS                                   " Link "Options-Recursion"}   Options-Recursion
 @{" notdir                                   " Link "File Name Functions"}   File Name Functions
 @{" origin                                   " Link "Origin Function"}   Origin Function
 @{" OUTPUT_OPTION                            " Link "Catalogue of Rules"}   Catalogue of Rules
 @{" override                                 " Link "Override Directive"}   Override Directive
 @{" patsubst <1>                             " Link "Text Functions"}   Text Functions
 @{" patsubst                                 " Link "Substitution Refs"}   Substitution Refs
 @{" PC                                       " Link "Implicit Variables"}   Implicit Variables
 @{" PFLAGS                                   " Link "Implicit Variables"}   Implicit Variables
 @{" RFLAGS                                   " Link "Implicit Variables"}   Implicit Variables
 @{" RM                                       " Link "Implicit Variables"}   Implicit Variables
 @{" SHELL                                    " Link "Execution"}   Execution
 @{" shell                                    " Link "Shell Function"}   Shell Function
 @{" SHELL (command execution)                " Link "Execution"}   Execution
 @{" sort                                     " Link "Text Functions"}   Text Functions
 @{" strip                                    " Link "Text Functions"}   Text Functions
 @{" subst <1>                                " Link "Text Functions"}   Text Functions
 @{" subst                                    " Link "Multiple Targets"}   Multiple Targets
 @{" suffix                                   " Link "File Name Functions"}   File Name Functions
 @{" SUFFIXES                                 " Link "Suffix Rules"}   Suffix Rules
 @{" TANGLE                                   " Link "Implicit Variables"}   Implicit Variables
 @{" TEX                                      " Link "Implicit Variables"}   Implicit Variables
 @{" TEXI2DVI                                 " Link "Implicit Variables"}   Implicit Variables
 @{" unexport                                 " Link "Variables-Recursion"}   Variables-Recursion
 @{" vpath                                    " Link "Selective Search"}   Selective Search
 @{" VPATH                                    " Link "General Search"}   General Search
 @{" vpath                                    " Link "Directory Search"}   Directory Search
 @{" VPATH                                    " Link "Directory Search"}   Directory Search
 @{" WEAVE                                    " Link "Implicit Variables"}   Implicit Variables
 @{" wildcard <1>                             " Link "File Name Functions"}   File Name Functions
 @{" wildcard                                 " Link "Wildcard Function"}   Wildcard Function
 @{" word                                     " Link "File Name Functions"}   File Name Functions
 @{" wordlist                                 " Link "File Name Functions"}   File Name Functions
 @{" words                                    " Link "File Name Functions"}   File Name Functions
 @{" YACC                                     " Link "Implicit Variables"}   Implicit Variables
 @{" YACCR                                    " Link "Implicit Variables"}   Implicit Variables
 @{" YFLAGS                                   " Link "Implicit Variables"}   Implicit Variables

@EndNode

