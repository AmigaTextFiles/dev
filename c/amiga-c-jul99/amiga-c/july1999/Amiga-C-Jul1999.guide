@database Amiga_C_List.guide
@width 70

@node "Introduction" "Introduction"
@wordwrap

                         Amiga-C Mailing List Guide
                         ==========================

This guide is intended as an easy reference to the Amiga C mailing list.

It contains messages posted to the Amiga C mailing list during the month shown on the main page.

To subscribe to the Amiga C mailing list, search for amiga-c at Onelist.

http://www.onelist.com

This AmigaGuide was created using GuideMaker.rexx © Roger Light 1999
@endnode

@node "Main" "Amiga C Mailing List Guide"
                    @{b}Amiga C Mailing List Guide
                    ==========================@{ub}


                           July 1999

@{" Introduction " link Introduction } Introduction to the guide.

@{" Search " SYSTEM "RUN <>NIL: Searchguide Amiga-C-Jul1999.guide"} Search this file (requres SearchGuide)

 ------------------------------------------------------------------- 

@{" Re: (no subject) " Link "Mail_0"}      David Arbuthnot
@{" (no subject) " Link "Mail_1"}      Amiga-C
@{" Re: (no subject) " Link "Mail_2"}      David Arbuthnot
@{" (no subject) " Link "Mail_3"}      Mike Carter
@{" Re: (no subject) " Link "Mail_4"}      Gabriele Svelto
@{" Re: (no subject) " Link "Mail_5"}      Allan Odgaard
@{" Re: (no subject) " Link "Mail_6"}      Gregory Roberts II
@{" Re: (no subject) " Link "Mail_7"}      Tim Hanson
@{" Re: (no subject) " Link "Mail_8"}      Gabriele Svelto
@{" Re: (no subject) " Link "Mail_9"}      Tim Hanson
@{" Re: ARQ " Link "Mail_10"}      Colin Wenzel
@{" Asm -> C " Link "Mail_11"}      Mike Carter
@{" Re: Asm -> C " Link "Mail_12"}      Jesper Svennevid
@{" Attachment Gibberish " Link "Mail_13"}      JSteic1957@aol.com
@{" Re: Attachment Gibberish " Link "Mail_14"}      Michael Sage
@{" Re: Attachment Gibberish " Link "Mail_15"}      Mike Carter
@{" Re: Attachment Gibberish " Link "Mail_16"}      Jens Granseuer
@{" autoconfig question " Link "Mail_17"}      "William W. Toner II"
@{" Re: autoconfig question " Link "Mail_18"}      Ben Hutchings
@{" Bad MUIBuilder Code ? TRUE : FALSE " Link "Mail_19"}      David Arbuthnot
@{" Building structures dynamically " Link "Mail_20"}      Christian Hattemer
@{" Re: Building structures dynamically " Link "Mail_21"}      Gabriele Svelto
@{" Re: Building structures dynamically " Link "Mail_22"}      Allan Odgaard
@{" Re: Building structures dynamically " Link "Mail_23"}      Allan Odgaard
@{" Re: Building structures dynamically " Link "Mail_24"}      Gabriele Svelto
@{" Re: ByteRun encoding " Link "Mail_25"}      Allan Odgaard
@{" Re: ByteRun encoding " Link "Mail_26"}      Olaf Barthel
@{" ByteRun encoding " Link "Mail_27"}      Jens Granseuer
@{" Re: ByteRun encoding " Link "Mail_28"}      Allan Odgaard
@{" Re: ByteRun encoding " Link "Mail_29"}      Jens Granseuer
@{" Re: ByteRun encoding " Link "Mail_30"}      Jens Granseuer
@{" Re: ByteRun encoding " Link "Mail_31"}      Olaf Barthel
@{" Re: ByteRun encoding " Link "Mail_32"}      Olaf Barthel
@{" Re: ByteRun encoding " Link "Mail_33"}      Jens Granseuer
@{" Re: ByteRun encoding " Link "Mail_34"}      Jens Granseuer
@{" Re: ByteRun encoding " Link "Mail_35"}      Olaf Barthel
@{" Re: ByteRun encoding " Link "Mail_36"}      Jens Granseuer
@{" Re: ByteRun encoding " Link "Mail_37"}      Jens Granseuer
@{" Re[2]: [amiga-c] C Newbie " Link "Mail_38"}      "Andrzej J. Debicki"
@{" Re: C Newbie " Link "Mail_39"}      Jesper Svennevid
@{" Re: C Newbie " Link "Mail_40"}      Ben Hutchings
@{" Re: C Newbie " Link "Mail_41"}      Jesper Svennevid
@{" Re: C Newbie " Link "Mail_42"}      Ben Hutchings
@{" Re: C Newbie " Link "Mail_43"}      Mike Carter
@{" Re: C Newbie " Link "Mail_44"}      Mike Carter
@{" Re: C Newbie " Link "Mail_45"}      Allan Odgaard
@{" Re: Re: C Newbie " Link "Mail_46"}      Mike Carter
@{" Re: Re: C Newbie " Link "Mail_47"}      James S Perrin
@{" Re: Re: C Newbie " Link "Mail_48"}      Ben Hutchings
@{" Re: Re: C Newbie " Link "Mail_49"}      James S Perrin
@{" Re: Re: C Newbie " Link "Mail_50"}      Ben Hutchings
@{" Changing Progdir: " Link "Mail_51"}      Dominic Clifton
@{" Re: Changing Progdir: " Link "Mail_52"}      Olaf Barthel
@{" Re: Changing Progdir: " Link "Mail_53"}      Yves Grabowsky
@{" Chunky Bitmap Transparency? " Link "Mail_54"}      petah@geek.rcc.se
@{" Re: Chunky Bitmap Transparency? " Link "Mail_55"}      Steffen
@{" Re: Chunky Bitmap Transparency? " Link "Mail_56"}      Peter Eriksson
@{" Re: Chunky Bitmap Transparency? " Link "Mail_57"}      Allan Odgaard
@{" Re: Chunky Bitmap Transparency? " Link "Mail_58"}      Steffen
@{" Re: Chunky Bitmap Transparency? " Link "Mail_59"}      Allan Odgaard
@{" Re: Chunky Bitmap Transparency? " Link "Mail_60"}      Peter Eriksson
@{" Re: Chunky Bitmap Transparency? " Link "Mail_61"}      Allan Odgaard
@{" Re: Chunky Bitmap Transparency? " Link "Mail_62"}      Steffen
@{" Re: Chunky Bitmap Transparency? " Link "Mail_63"}      Allan Odgaard
@{" Re: Chunky Bitmap Transparency? " Link "Mail_64"}      Peter Eriksson
@{" Re: Chunky Bitmap Transparency? " Link "Mail_65"}      Allan Odgaard
@{" Re: Chunky Bitmap Transparency? " Link "Mail_66"}      Peter Eriksson
@{" Re: Chunky Bitmap Transparency? " Link "Mail_67"}      Allan Odgaard
@{" Re: Declaring auto variables " Link "Mail_68"}      John Niclasen
@{" Re: Declaring auto variables " Link "Mail_69"}      Tim Corringham
@{" DICE C " Link "Mail_70"}      Mark Gerics
@{" Digest Number 96 " Link "Mail_71"}      Rod_MacLean@uk.ibm.com
@{" Drawing images on Intution " Link "Mail_72"}      Darryl Hartwig
@{" Re: Drawing images on Intution " Link "Mail_73"}      Allan Odgaard
@{" Re: Drawing images on Intution " Link "Mail_74"}      Jens Granseuer
@{" Enforcer hit using feof() " Link "Mail_75"}      Gabriele Svelto
@{" Re: Enforcer hit using feof() " Link "Mail_76"}      Tim Corringham
@{" Re: Enforcer hit using feof() " Link "Mail_77"}      Mike Carter
@{" Re: Enforcer hit using feof() " Link "Mail_78"}      Gabriele Svelto
@{" Re: Enforcer hit using feof() " Link "Mail_79"}      Tim Corringham
@{" Re: Re: Enforcer hit using feof() " Link "Mail_80"}      Tim Corringham
@{" Re: Enforcer hit using feof() " Link "Mail_81"}      Stephen Williams
@{" Finding a beep in an audio signal (was FFT wanted) " Link "Mail_82"}      Fritsch Alexander
@{" Re: Finding a beep in an audio signal (was FFT wanted) " Link "Mail_83"}      Gurer Ozen
@{" Re: Finding the device that a volume is in " Link "Mail_84"}      Ben Hutchings
@{" Geekgadget GCC and Powerup... " Link "Mail_85"}      Fabien
@{" Re: Geekgadget GCC and Powerup... " Link "Mail_86"}      Malek Bengougam
@{" help with GCC+ CGX ? " Link "Mail_87"}      Fabien
@{" RE: help with GCC+ CGX ? " Link "Mail_88"}      Jesper Svennevid
@{" IPC Problems " Link "Mail_89"}      Jesper Svennevid
@{" libiff.a? " Link "Mail_90"}      Bablos
@{" Re: libiff.a? " Link "Mail_91"}      Stephen Williams
@{" Re: Re: libiff.a? " Link "Mail_92"}      Bablos
@{" Mastering minterms (was: Chunky Bitmap Transparency?) " Link "Mail_93"}      Peter Eriksson
@{" Re: Mastering minterms (was: Chunky Bitmap Transparency?) " Link "Mail_94"}      Peter Eriksson
@{" Re: Mastering minterms (was: Chunky Bitmap Transparency?) " Link "Mail_95"}      Olaf Barthel
@{" Re: Mastering minterms (was: Chunky Bitmap Transparency?) " Link "Mail_96"}      Ben Hutchings
@{" Re: Mastering minterms (was: Chunky Bitmap Transparency?) " Link "Mail_97"}      Olaf Barthel
@{" Re: Mastering minterms (was: Chunky Bitmap Transparency?) " Link "Mail_98"}      Peter Eriksson
@{" Re: Max Size of a Pathname " Link "Mail_99"}      Mike Carter
@{" Re: Max Size of a Pathname " Link "Mail_100"}      Mike Carter
@{" Re: Max Size of a Pathname " Link "Mail_101"}      Stephen Williams
@{" Re: Max Size of a Pathname " Link "Mail_102"}      Rod Schnell
@{" Re: Max Size of a Pathname " Link "Mail_103"}      Allan Odgaard
@{" Re: Max Size of a Pathname " Link "Mail_104"}      Oliver Roberts
@{" Re: Re: Max Size of a Pathname " Link "Mail_105"}      Ben Hutchings
@{" MUI and keyboard handling... " Link "Mail_106"}      "Andrzej J. Debicki"
@{" Re: MUI and keyboard handling... " Link "Mail_107"}      Allan Odgaard
@{" Re[2]: MUI and keyboard handling... " Link "Mail_108"}      "Andrzej J. Debicki"
@{" Re: MUI and keyboard handling... " Link "Mail_109"}      Allan Odgaard
@{" MUI Arexxing " Link "Mail_110"}      Fredrik Söderberg
@{" Re: MUI Arexxing " Link "Mail_111"}      Allan Odgaard
@{" Re: MUI Arexxing " Link "Mail_112"}      Allan Odgaard
@{" Re: MUI Arexxing " Link "Mail_113"}      Fredrik Söderberg
@{" Re: MUI Arexxing " Link "Mail_114"}      Fredrik Söderberg
@{" Re: MUI mailing list " Link "Mail_115"}      Stuart Kelly
@{" MUI programming " Link "Mail_116"}      Darryl Hartwig
@{" Re: Off topic: RAM " Link "Mail_117"}      Gabriele Svelto
@{" Re: Off topic: RAM " Link "Mail_118"}      Steffen
@{" Rawkey -> Vanillakey " Link "Mail_119"}      Felix Schwarz
@{" Re: Rawkey -> Vanillakey " Link "Mail_120"}      Ben Hutchings
@{" Re: Rawkey -> Vanillakey " Link "Mail_121"}      Allan Odgaard
@{" Re: Rawkey -> Vanillakey " Link "Mail_122"}      John Niclasen
@{" Re: Rawkey -> Vanillakey " Link "Mail_123"}      Felix Schwarz
@{" Re: Registers and GNU C++ was:C Newbie " Link "Mail_124"}      James S Perrin
@{" Re: Registers and GNU C++ was:C Newbie " Link "Mail_125"}      Ben Hutchings
@{" Re: Requesters " Link "Mail_126"}      Mike Carter
@{" Running a command with NO output.. " Link "Mail_127"}      Dominic Clifton
@{" Re: Running a command with NO output.. " Link "Mail_128"}      Allan Odgaard
@{" Re: Spam? " Link "Mail_129"}      Mike Carter
@{" Status of pools.lib " Link "Mail_130"}      Andrija Antonijevic
@{" Re: Status of pools.lib " Link "Mail_131"}      Olaf Barthel
@{" Re: Status of pools.lib " Link "Mail_132"}      Andrija Antonijevic
@{" Re: Status of pools.lib " Link "Mail_133"}      Rod Schnell
@{" Re: Status of pools.lib " Link "Mail_134"}      Olaf Barthel
@{" Re: Re: Status of pools.lib " Link "Mail_135"}      Olaf Barthel
@{" Re: Status of pools.lib " Link "Mail_136"}      Christian Hattemer
@{" Re: Re: Status of pools.lib " Link "Mail_137"}      ROBERT MEYERS
@{" Re: Re: Status of pools.lib " Link "Mail_138"}      Olaf Barthel
@{" Re: Re: Status of pools.lib " Link "Mail_139"}      Olaf Barthel
@{" Re: Status of pools.lib " Link "Mail_140"}      Christian Hattemer
@{" Re: Re: Status of pools.lib " Link "Mail_141"}      Olaf Barthel
@{" Re: Status of pools.lib " Link "Mail_142"}      Rod Schnell
@{" Re: Status of pools.lib " Link "Mail_143"}      Andrija Antonijevic
@{" stderr trouble with egcs " Link "Mail_144"}      nicholai@altavista.net
@{" Re: stderr trouble with egcs " Link "Mail_145"}      nicholai@altavista.net
@{" Re: stderr trouble with egcs " Link "Mail_146"}      Ben Hutchings
@{" TCP/IP sockets " Link "Mail_147"}      Rod Schnell
@{" Re: Text file lines " Link "Mail_148"}      Mike Carter
@{" Re: Text file lines " Link "Mail_149"}      Olaf Barthel
@{" Re: Text file lines " Link "Mail_150"}      Andrew Markwell
@{" The right way !! " Link "Mail_151"}      Colin Wenzel
@{" Re: The right way !! " Link "Mail_152"}      Ben Hutchings
@{" Re: The right way !! " Link "Mail_153"}      Steffen
@{" Re: The right way !! " Link "Mail_154"}      Colin Wenzel
@{" Re: The right way !! " Link "Mail_155"}      Colin Wenzel
@{" Re: The right way !! " Link "Mail_156"}      Jesper Svennevid
@{" Re: The right way !! " Link "Mail_157"}      Colin Wenzel
@{" Re: The right way !! " Link "Mail_158"}      Steffen
@{" Re: The right way !! " Link "Mail_159"}      Rod Schnell
@{" Re: The right way !! " Link "Mail_160"}      Ben Hutchings
@{" Re: The right way !! " Link "Mail_161"}      Colin Wenzel
@{" Re: The right way !! " Link "Mail_162"}      Colin Wenzel
@{" Re: The right way !! " Link "Mail_163"}      Rod Schnell
@{" Re: The right way !! " Link "Mail_164"}      Rod Schnell
@{" Re: The right way !! " Link "Mail_165"}      Colin Wenzel
@{" Re: The right way !! " Link "Mail_166"}      Ben Hutchings
@{" Re: The right way !! " Link "Mail_167"}      Tim Hanson
@{" Re: The right way !! " Link "Mail_168"}      Tim Hanson
@{" Re: The right way !! " Link "Mail_169"}      Tim Hanson
@{" Re: The right way !! " Link "Mail_170"}      Tim Hanson
@{" Re: The right way !! " Link "Mail_171"}      Tim Hanson
@{" Re: The right way !! " Link "Mail_172"}      Colin Wenzel
@{" Re: The right way !! " Link "Mail_173"}      Rod Schnell
@{" Re[2]: [amiga-c] The right way !! " Link "Mail_174"}      "Andrzej J. Debicki"
@{" Re: The right way !! " Link "Mail_175"}      Rod Schnell
@{" Re: The right way !! " Link "Mail_176"}      Jesper Svennevid
@{" Re: The right way !! " Link "Mail_177"}      Olaf Barthel
@{" Re: The right way !! " Link "Mail_178"}      Rod Schnell
@{" Re: The right way !! " Link "Mail_179"}      Ben Hutchings
@{" Re: Re[2]: [amiga-c] The right way !! " Link "Mail_180"}      Ben Hutchings
@{" Re: The right way !! " Link "Mail_181"}      Stephen Williams
@{" Re: Re: The right way !! " Link "Mail_182"}      "Andrzej J. Debicki"
@{" VBCC and MUI " Link "Mail_183"}      Martyn Capewell
@{" VBCC type checking " Link "Mail_184"}      Daithi O'Cuinn
@{" Re: VBCC type checking " Link "Mail_185"}      Daithi O'Cuinn
@{" Re: VBCC type checking " Link "Mail_186"}      Jens Granseuer
@{" Re: VBCC type checking " Link "Mail_187"}      Ben Hutchings
@{" vbccgui " Link "Mail_188"}      Chris Pratt
@{" Re: vbccgui " Link "Mail_189"}      "Andrzej J. Debicki"
@{" Wanted:: FFT " Link "Mail_190"}      Fritsch Alexander
@{" Re: Wanted:: FFT " Link "Mail_191"}      Peter Carlsson
@{" Re: Wanted:: FFT " Link "Mail_192"}      Colin Wenzel
@{" AW: Wanted:: FFT " Link "Mail_193"}      Fritsch Alexander
@{" Re: Welcome to amiga-c@onelist.com " Link "Mail_194"}      JSteic1957@aol.com
@{" Re: Welcome to amiga-c@onelist.com " Link "Mail_195"}      Jake Frederick
@{" Re: Welcome to amiga-c@onelist.com " Link "Mail_196"}      Rod_MacLean@uk.ibm.com
@{" Re: Welcome to amiga-c@onelist.com " Link "Mail_197"}      Rod Schnell
@{" Re: Re: Welcome to amiga-c@onelist.com " Link "Mail_198"}      Andrija Antonijevic
@{" Re: [Welcome to amiga-c@onelist.com] " Link "Mail_199"}      Jeffrey Barnes
@{" Re: Welcome to amiga-c@onelist.com] " Link "Mail_200"}      Mike Carter
@{" Re: [Re: Welcome to amiga-c@onelist.com]] " Link "Mail_201"}      Jeffrey Barnes
@ENDNODE
@NODE "Mail_0" " Re: (no subject) "
From: David Arbuthnot <Spinal.NGA@Digital.Prestel.co.uk>
Date: 07-08-99 16:09:53
Subject: @{b}Re: (no subject)@{ub}

From: David Arbuthnot <Spinal.NGA@Digital.Prestel.co.uk>

Hello Allan
>>> 3. How can I find a bug if my code is syntaticly correct but the program
>>> crashes when it's run ????
> 
> I can also recommend Mungwall and poolwatch - they check if you trash the
> bytes before or after an allocation, which actually happens quite a lot
> ;-)
> 
> Regards Allan

Unfortunatley my machine is seriousley outdated (A1200, 020, 6mb) which
means that I can't use enforcer or mungwall as they require an MMU (I
think) so can anybody suggest an enforcer like tool for checking memory
etc.. that does not require an MMU ?.


Regards
         Dave.


@ENDNODE
@NODE "Mail_1" " (no subject) "
From: Amiga-C <Spinal.NGA@Digital.Prestel.co.uk>
Date: 07-08-99 16:29:01
Subject: @{b}(no subject)@{ub}

From: Amiga-C <Spinal.NGA@Digital.Prestel.co.uk>

Hello,
        I very new to this list (although I have a quite good knowledge of
C) and I have a few questions about C.

1. Why are global variables bad ideas ????
2. When creating a shared library why can't I use dos.library functions
(Open,Close,etc...) ????
3. How can I find a bug if my code is syntaticly correct but the program
crashes when it's run ????

Thanks in advance for any help

Kind regards
        daSpinal (Dave Arbuthnot).


@ENDNODE
@NODE "Mail_2" " Re: (no subject) "
From: David Arbuthnot <Spinal.NGA@Digital.Prestel.co.uk>
Date: 07-08-99 21:05:51
Subject: @{b}Re: (no subject)@{ub}

From: David Arbuthnot <Spinal.NGA@Digital.Prestel.co.uk>

Hello Tim

On 31-Jul-99, you wrote:
 
> I`ve got another question though. Can library functions call other
> libraries? If so how do they know that they are open? or can library
> functions open the library themselves?
> 

A library has some standard routines that are used by Open/CloseLibrary()
routines to initalize the library and AFAIK in one of the routines you can
open all the libraries you need to use.
a library will have routines like this that __MUST__ be available:

UserLibOpen()
{
    /* your open library calls go here  plus some other stuff*/
}

UserLibClose()
{
     /*Close __ALL__ libraries you opened just here */
}

UserLibExpunge
{
    /* This is where the library is actually removed from memory (when it's
not open by other tasks/processes */
}

bear in mind though that the above may not be correct because I've still
alot to learn about libraries (and devices for that matter).

Kind Regards
      Dave Arbuthnot


@ENDNODE
@NODE "Mail_3" " (no subject) "
From: Mike Carter <mike.carter@bigfoot.com>
Date: 07-20-99 21:35:42
Subject: @{b}(no subject)@{ub}

From: Mike Carter <mike.carter@bigfoot.com>

Hi all,

Bit quite round here ATM.  Everybody must be on holiday
as the NetCOnnect ML is quiet too.

Just to let everybody know that there is now a nicer,
newer MUI mailing list featured on Onelist.  Simply
called MUI.

It's not offical and run by Allan Odgaard Mr. MUI man.

Dinky do,


Mike C.

-- 

.--------------------------------- ---- -    -- --------.
| AMiGA 1200EZT 060/PPC@240Mhz,50Mb RAM __/\__          |
| 4 HDD,DD FD,5 CD-ROMS,CDrW,ZiP250     \ o0 / bUDDa/S^D|
| SCSI+IDE,56kModem,BVGfX,19"VDU        /_'-_\          |
`------------------------------- --- -    \/   -- ------'
  http://fly.to/BuddasWurld               ICQ: 29173597


@ENDNODE
@NODE "Mail_4" " Re: (no subject) "
From: Gabriele Svelto <jlpicard@tiscalinet.it>
Date: 07-31-99 08:37:23
Subject: @{b}Re: (no subject)@{ub}

From: Gabriele Svelto <jlpicard@tiscalinet.it>

 Hello Dave,

>        I very new to this list (although I have a quite good knowledge of
> C) and I have a few questions about C.
> 
> 1. Why are global variables bad ideas ????
They are so bad for too main resons: first of all imagine that you declare a
variable of the same name somewhere else in the code, the new local
variable will hide your global variable and you'll probably get confused
when debugging. The other reason is that if you're working on a big project
with lots of source files you could forget that you have declared a global
variable in another file and so on... things get even worse if more people
is working on a project.

> 2. When creating a shared library why can't I use dos.library functions
> (Open,Close,etc...) ????
Don't know...

> 3. How can I find a bug if my code is syntaticly correct but the program
> crashes when it's run ????
I had the same probleme some time ago, first of all put printf() calls
everywhere to spot where the program crashes, to help you to track down the
reason you could write them like this:

printf("I am at line %d\n \
           my_variable_a: %d\n \
           my_variable_b: %d\n", __LINE__, my_variable_a, my_variable_b);

This way you can track down the problem and monitor the values contained in
your different variables. Otherwise you could use a debugger which tracks
down illegal access to memory like Enforcer, almost 75% of the crashes I
made where illegal writes to memory (like writing on 0x00000004,
ExecBase...)

 See ya


@ENDNODE
@NODE "Mail_5" " Re: (no subject) "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 07-31-99 08:57:42
Subject: @{b}Re: (no subject)@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 31-Jul-99, Gabriele Svelto wrote:

>> 1. Why are global variables bad ideas ????
> They are so bad for too main resons: [...]

You should probably say "too many reasons" :-)

To add to your list there's the problem about having the code re-entrant, and
one should always keep function variables encapsulated so that it's a) easy to
re-use in another context and b) the variables are not changed from places the
function doesn't know about, the latter is a huge source for bugs. Because a
year after introducing a global variable, then you cannot remember who depends
on it...

>> 3. How can I find a bug if my code is syntaticly correct but the program
>> crashes when it's run ????
> [...]

I can also recommend Mungwall and poolwatch - they check if you trash the bytes
before or after an allocation, which actually happens quite a lot ;-)

Regards Allan
-- 
     URL: http://www.DIKU.dk/students/duff/
<sb>
I think that God in creating man somewhat overestimated his ability.
-- Oscar Wilde


@ENDNODE
@NODE "Mail_6" " Re: (no subject) "
From: Gregory Roberts II <gregr@en.com>
Date: 07-31-99 11:36:34
Subject: @{b}Re: (no subject)@{ub}

From: Gregory Roberts II <gregr@en.com>



On Thu, 8 Jul 1999, Amiga-C wrote:

> Hello,
>         I very new to this list (although I have a quite good knowledge of
> C) and I have a few questions about C.
> 
> 2. When creating a shared library why can't I use dos.library functions
> (Open,Close,etc...) ????

In order to use dos.library functions you need to be a Process, where
shared libraries as just Tasks.  Tasks are an exec.library construct,
processes are from dos.library.  A process "contains" one or more tasks
and is created automatically when you run a program.  The Process
structure contains fun things that dos.library needs such as the current
directory and where to put up those wonderful "Please insert volume ABC in
any drive" requesters.  (btw, I really do think they're wonderful.  :-)

A shared library is just that: shared by many processes.  Therefore, it
doesn't have the context that dos.library needs to operate.

Hope this helps!
Greg


-- 
gregr@en.com
KC8BGC
Amiga Enthusiast  :)
IBM programmer    :(


@ENDNODE
@NODE "Mail_7" " Re: (no subject) "
From: Tim Hanson <msinister@connectfree.co.uk>
Date: 07-31-99 12:31:12
Subject: @{b}Re: (no subject)@{ub}

From: Tim Hanson <msinister@connectfree.co.uk>

Amiga-C wrote this on 08-Jul-99 at 17:29:01
 Hi Amiga-C 

-> 1. Why are global variables bad ideas ????
-> 2. When creating a shared library why can't I use dos.library functions
-> (Open,Close,etc...) ????
-> 3. How can I find a bug if my code is syntaticly correct but the program
-> crashes when it's run ????

    1.Mainly because they can introduce bugs which are hard to find. If a
local variable turns out to contain spurious data you know which piece of
code is to blame. They also make code less readable IMHO.
    2. No idea about this. Is it safe to call a shared library function from
within a shared library at all. I`ve never tried writing libraries. If anyone
knows more about this I for one would be interested to hear.
    3. Run it through a debugger, put lots of printf()s for important
variables. Also try enforcer/cyberguard and mungwall or equivalent. Develop a
very bad headache. Good Luck.  
-- 
      
Tim Hanson,
in the Basement,London.
Amiga A1200T,`040/25,603e/160,32MB Fast,BVisionPPC,
170MB IDE HD,ZIP SCSI,RENO x2CD SCSI,Pace 56K
Don`t waste  your time by visiting
http://www.sinister67.freeserve.co.uk



@ENDNODE
@NODE "Mail_8" " Re: (no subject) "
From: Gabriele Svelto <jlpicard@tiscalinet.it>
Date: 07-31-99 12:55:51
Subject: @{b}Re: (no subject)@{ub}

From: Gabriele Svelto <jlpicard@tiscalinet.it>

Hi Allan

> On 31-Jul-99, Gabriele Svelto wrote:
> 
>>> 1. Why are global variables bad ideas ????
>> They are so bad for too main resons: [...]
> 
> You should probably say "too many reasons" :-)

That was two main reasons ;-) ... my brain lost some cycles (like an Intel
cpu, argh)

> To add to your list there's the problem about having the code re-entrant,
> and one should always keep function variables encapsulated so that it's a)
> easy to re-use in another context and b) the variables are not changed
> from places the function doesn't know about, the latter is a huge source
> for bugs. Because a year after introducing a global variable, then you
> cannot remember who depends on it...

Perfectly agreed, I forgot,  that makes three main reasons

 See ya

 Gabriele


@ENDNODE
@NODE "Mail_9" " Re: (no subject) "
From: Tim Hanson <msinister@connectfree.co.uk>
Date: 07-31-99 19:00:41
Subject: @{b}Re: (no subject)@{ub}

From: Tim Hanson <msinister@connectfree.co.uk>

Gregory Roberts II wrote this on 31-Jul-99 at 12:36:34
 Hi Gregory 

-> A shared library is just that: shared by many processes.  Therefore, it
-> doesn't have the context that dos.library needs to operate.

    If I keep subscibing to this list much longer I`ll be some kind of expert.
;)
I learn something new every time I down load my mail.

    I`ve got another question though. Can library functions call other
libraries? If so how do they know that they are open? or can library
functions open the library themselves?

-- 
      
Tim Hanson,
in the Basement,London.
Amiga A1200T,`040/25,603e/160,32MB Fast,BVisionPPC,
170MB IDE HD,ZIP SCSI,RENO x2CD SCSI,Pace 56K
Don`t waste  your time by visiting
http://www.sinister67.freeserve.co.uk



@ENDNODE
@NODE "Mail_10" " Re: ARQ "
From: Colin Wenzel <colstv@hotkey.net.au>
Date: 07-01-99 01:43:27
Subject: @{b}Re: ARQ@{ub}

From: Colin Wenzel <colstv@hotkey.net.au>

On 01-Jul-99, Darryl Hartwig wrote:
>From: Darryl Hartwig <darrylh@powerup.com.au>

>Hello,

>I recently sent a mail to this list regarding EasyRequest()
>(to which no one replied).  It was to do with my statement
>that EasyRequest() seemed to leave a task running.  I
>believe this is now ARQ (which I have running in
>WBStartup).  When I take this out, the problem stopped
>(albeit that my requesters are now nowhere near as pretty
>and stay stuck in the top-left corner of the screen).

>Anyone had this problem, or can suggest a fix?


I keep deleting  that horror off my friends machines when they call
around for help,    I notice that everything crawsl to a halt & they 
simply don't notice it....    

That "thing" should be either fixed or deleted....

----------------------------------------------------
Colin Wenzel. Australia.   colstv@hotkey.net.au
URL:    http://www.hotkey.net.au/~colstv/      
                                               
'AMIGA' 4000T With  CS-III 68060 / 50Mhz 150Mb RAM. 
----------------------------------------------------


@ENDNODE
@NODE "Mail_11" " Asm -> C "
From: Mike Carter <mike.carter@bigfoot.com>
Date: 07-25-99 18:40:52
Subject: @{b}Asm -> C@{ub}

From: Mike Carter <mike.carter@bigfoot.com>

Hello,

Anybody here capable of converting a small piece of
system friendly OS code in assembler to the equivalent
C program?

There's comments but it doesn't help me understand it
much more.  The source creates what looks like a
standard BOOPSI class.

Anybody wanna have a go?  I'll mail them the source
privately if interested.

Dinky do,


Budda.

-- 

.--------------------------------- ---- -    -- --------.
| AMiGA 1200EZT 060/PPC@240Mhz,50Mb RAM __/\__          |
| 4 HDD,DD FD,5 CD-ROMS,CDrW,ZiP250     \ o0 / bUDDa/S^D|
| SCSI+IDE,56kModem,BVGfX,19"VDU        /_'-_\          |
`------------------------------- --- -    \/   -- ------'
  http://fly.to/BuddasWurld               ICQ: 29173597


@ENDNODE
@NODE "Mail_12" " Re: Asm -> C "
From: Jesper Svennevid <jesper@fxrealm.com>
Date: 07-25-99 21:26:17
Subject: @{b}Re: Asm -> C@{ub}

From: Jesper Svennevid <jesper@fxrealm.com>

> From: Mike Carter <mike.carter@bigfoot.com>
> 
> Hello,
> 
> Anybody here capable of converting a small piece of
> system friendly OS code in assembler to the equivalent
> C program?
> 
> There's comments but it doesn't help me understand it
> much more.  The source creates what looks like a
> standard BOOPSI class.
> 
> Anybody wanna have a go?  I'll mail them the source
> privately if interested.

Sure, I could have a go a it, it's always fun porting
stuff from one language to another :)

-- 
// Jesper Svennevid : jesper@fxrealm.com
Software Developer At FXRealm Studios : http://www.fxrealm.com/


@ENDNODE
@NODE "Mail_13" " Attachment Gibberish "
From: JSteic1957@aol.com
Date: 07-26-99 02:19:10
Subject: @{b}Attachment Gibberish@{ub}

From: JSteic1957@aol.com

Does anyone know why or what I should do with the WINMAIL.DAT sections I
receive from this mailing list?  Here is an example:

begin 600 WINMAIL.DAT
M>)\^(B43`0:0" `$```````!``$``0>0!@`(````Y 0```````#H``$-@ 0`
M`@````(``@`!!) &`!P!```!````# ````,``# #````"P`/#@`````"`?\/
M`0```$4`````````@2L?I+ZC$!F=;@#=`0]4`@````!A;6EG82UC0&]N96QI
M<W0N8V]M`%--5% `86UI9V$M8T!O;F5L:7-T+F-O;0`````>``(P`0````4`
M``!33510`````!X``S !````% ```&%M:6=A+6- ;VYE;&ES="YC;VT``P`5
M# $````#`/X/!@```!X``3 !````%@```"=A;6EG82UC0&]N96QI<W0N8V]M
M)P````(!"S !````&0```%--5% Z04U)1T$M0T!/3D5,25-4+D-/30`````#
end

I use my son's PC to access the internet, using AOL & Windows 95, since
my Amiga A4000T has some sort of problem that makes it crash randomly.
I think this gibberish is related to Windows 95, but I would like to know
if it's part of a code listing or what.

@ENDNODE
@NODE "Mail_14" " Re: Attachment Gibberish "
From: Michael Sage <msage_1@yahoo.com>
Date: 07-26-99 14:06:53
Subject: @{b}Re: Attachment Gibberish@{ub}

From: Michael Sage <msage_1@yahoo.com>



--- JSteic1957@aol.com wrote:
> From: JSteic1957@aol.com
> 
> Does anyone know why or what I should do with the
> WINMAIL.DAT sections I
> receive from this mailing list?  Here is an example:
> 
> begin 600 WINMAIL.DAT
> M>)\^(B43`0:0" `$```````!``$``0>0!@`(````Y
> 0```````#H``$-@ 0`
> M`@````(``@`!!) &`!P!```!````# ````,``#
> #````"P`/#@`````"`?\/
>
M`0```$4`````````@2L?I+ZC$!F=;@#=`0]4`@````!A;6EG82UC0&]N96QI
> M<W0N8V]M`%--5%
> `86UI9V$M8T!O;F5L:7-T+F-O;0`````>``(P`0````4`
> M``!33510`````!X``S !````% ```&%M:6=A+6-
> ;VYE;&ES="YC;VT``P`5
> M# $````#`/X/!@```!X``3
> !````%@```"=A;6EG82UC0&]N96QI<W0N8V]M
> M)P````(!"S !````&0```%--5%
> Z04U)1T$M0T!/3D5,25-4+D-/30`````#
> end
> 
> I use my son's PC to access the internet, using AOL
> & Windows 95, since
> my Amiga A4000T has some sort of problem that makes
> it crash randomly.
> I think this gibberish is related to Windows 95, but
> I would like to know
> if it's part of a code listing or what.
> 
> --------------------------- ONElist Sponsor
> ----------------------------
> 
> ONElist members are using Shared Files in great
> ways!
> http://www.onelist.com
> Are you?  If not, see our homepage for details.
> 
>
------------------------------------------------------------------------
>      -> Spread the URL:
> http://www.onelist.com/subscribe/amiga-c <- 
> 

What you have there is a UUEncoded binary file.  Mail
programs cannot transfer binary data (programs,
bitmaps, etc.) only ASCII text files.  To get around
this, a binary must be converted (or encoded) into a
text document.  

A UUEncoder (I don't remember what UU stands for)
converts the binary file to a text.  A UUDecoder
converts the text file to a binary file.  

Some mail programs that allow you to insert images
into mails do this encoding/decoding in the
background.

You can get UU encoders/decoders from Aminet.

You would copy the lines from the "begin" to the "end"
and paste them into a seperate text file (WINMAIL.TXT
for example).  Then, you would run a decoder against
WINMAIL.TXT.  The decoder would create WINMAIL.DAT.

Granted, you may not be able to use WINMAIL.DAT but,
atleast you'll have it.  :-)

Take care.
@ENDNODE
@NODE "Mail_15" " Re: Attachment Gibberish "
From: Mike Carter <mike.carter@bigfoot.com>
Date: 07-26-99 20:25:26
Subject: @{b}Re: Attachment Gibberish@{ub}

From: Mike Carter <mike.carter@bigfoot.com>

Hi JSteic1957@aol.com thanks for your mail that I got on 26-Jul-99
> From: JSteic1957@aol.com
> 
> Does anyone know why or what I should do with the
> WINMAIL.DAT sections I receive from this mailing
> list? Here is an example:
> 
> 
> I use my son's PC to access the internet, using AOL &
> Windows 95, since my Amiga A4000T has some sort of
> problem that makes it crash randomly. I think this

Maybe you have a power problem on your A4000 ?  Or
loose memory SIMM on your card?


> gibberish is related to Windows 95, but I would like
> to know if it's part of a code listing or what.

I've never seen it.  There's not been any attachments
to the list AFAIK so it must be just another piece of
windows crap :-/

Dinky do,


Mike C.
 
-- 

.--------------------------------- ---- -    -- --------.
| AMiGA 1200EZT 060/PPC@240Mhz,50Mb RAM __/\__          |
| 4 HDD,DD FD,5 CD-ROMS,CDrW,ZiP250     \ o0 / bUDDa/S^D|
| SCSI+IDE,56kModem,BVGfX,19"VDU        /_'-_\          |
`------------------------------- --- -    \/   -- ------'
  http://fly.to/BuddasWurld               ICQ: 29173597


@ENDNODE
@NODE "Mail_16" " Re: Attachment Gibberish "
From: Jens Granseuer <jensgr@gmx.net>
Date: 07-28-99 16:06:04
Subject: @{b}Re: Attachment Gibberish@{ub}

From: Jens Granseuer <jensgr@gmx.net>

JSteic1957@aol.com wrote:

> Does anyone know why or what I should do with the WINMAIL.DAT sections I
> receive from this mailing list?  Here is an example:
>
> begin 600 WINMAIL.DAT
> ...

Some people were recently complaining that this stuff was clinging
to my postings (and that's probably what you found, too). I have
no idea what it was but I'm rather sure that it actually is some
Windows mess. I switched my email program, so I expect
no more of that stuff turning up. Sorry!

Jens



@ENDNODE
@NODE "Mail_17" " autoconfig question "
From: "William W. Toner II" <btoner2@dclink.com>
Date: 07-14-99 02:06:10
Subject: @{b}autoconfig question@{ub}

From: "William W. Toner II" <btoner2@dclink.com>

A friend and I are working on a Zorro card, but have an issue with
Autoconfig we got to the point we need help with. Our board will later have
addons for a couple initially empty connectors, and so at boot time, the
Zorro card doesn't necessarily know how much address space is needed by
everything on it. So what we would like to know is, at boot time, when exec
asks us how much address space we want, do we get to run the boot rom
first, which would allow us to determine exactly what we need? If not,
that, does the boot ROM get run directly after we respond with just the
on-board known required space, so we can determine what addon modules may
or may not exist, and then we can config the addons as virtual Zorro cards?
Or does autoconfig read all address size requirements of all boards, set
their base addresses, and then after that it starts running through all the
boot ROMs? I had assumes we'd get to run the ROM right after gerring our
base address, so we could look at the addon connectors and find out what we
would need to do regarding virtual Zorro card config for each module. But a
discussion about this went nuts and we came up with the other two
possibilities I mentioned above, and got real confused. As there doesn't
seem to be abny documentation in the RKN Hardware book, or anywhere else
that I can find, concerning when the boot ROM gets run, I'd like to know if
anyone out there can set us straight. Appreciate the help...

Bill




@ENDNODE
@NODE "Mail_18" " Re: autoconfig question "
From: Ben Hutchings <womble@zzumbouk.demon.co.uk>
Date: 07-14-99 22:26:48
Subject: @{b}Re: autoconfig question@{ub}

From: Ben Hutchings <womble@zzumbouk.demon.co.uk>

On Tue, Jul 13, 1999 at 09:06:10PM -0500, William W. Toner II wrote:
> From: "William W. Toner II" <btoner2@dclink.com>
> 
> A friend and I are working on a Zorro card, but have an issue with
> Autoconfig we got to the point we need help with. Our board will later have
> addons for a couple initially empty connectors, and so at boot time, the
> Zorro card doesn't necessarily know how much address space is needed by
> everything on it. So what we would like to know is, at boot time, when exec
> asks us how much address space we want, do we get to run the boot rom
> first, which would allow us to determine exactly what we need?

No.

> If not, that, does the boot ROM get run directly after we respond
> with just the on-board known required space, so we can determine
> what addon modules may or may not exist, and then we can config the
> addons as virtual Zorro cards?
<snip>

I don't think so.

However, there are functions in expansion.library that you could
possibly call from your boot ROM code to add additional boards to
the system list.  Look at the AllocConfigDev, ReadExpansionRom and
ConfigBoard functions.

-- 
Ben Hutchings - womble@zzumbouk.demon.co.uk, http://www.zzumbouk.demon.co.uk
Team *AMIGA* | Jay Miner Society | Linux - the choice of a GNU generation
Asking whether machines can think is like
asking whether submarines can swim.

@ENDNODE
@NODE "Mail_19" " Bad MUIBuilder Code ? TRUE : FALSE "
From: David Arbuthnot <Spinal.NGA@Digital.Prestel.co.uk>
Date: 07-09-99 04:06:52
Subject: @{b}Bad MUIBuilder Code ? TRUE : FALSE@{ub}

From: David Arbuthnot <Spinal.NGA@Digital.Prestel.co.uk>

Hello,
    I think i've spotted a bug in some code generated by MUIBuilder (using
C_Gen2.2f) but i'd very much like a few more opinions on this.

I have a VirtgroupObject which contains seven groups. the code below defines
this right (the seven groups are grp_stdbtns & grp_usrbtns1-6)

<SNIP>

grp_btns = VirtgroupObject,
        VirtualFrame,
        MUIA_HelpNode, "grp_btns",
        MUIA_Weight, 25,
        MUIA_Frame, MUIV_Frame_Group,
        MUIA_Group_Columns, 8,
        Child, grp_stdbtns,
        Child, grp_usrbtns1,
        Child, grp_usrbtns2,
        Child, grp_usrbtns3,
        Child, grp_usrbtns4,
        Child, grp_usrbtns5,
        Child, grp_usrbtns6,
    End;

    grp_btns = ScrollgroupObject,
        MUIA_Weight, 25,
        MUIA_Scrollgroup_Contents, grp_btns,
    End;

<SNIP>

But as you can clearly see grp_btns is first declared as being a
VirtgroupObject
and then directly below it is re-declared as being a scrollgroupObject with
MUIA_Scrollgroup_contents as it's self. Is this a bug or am i going insane
???

NOTE: I would have compiled this but i've still got 20 functions to write
yet and i want to iron out all bugs in the gui first.
Kind regards
    Dave Arbuthnot

--------------------------------------------
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
--------------------------------------------
Ever get some buggy code????

Then heres what u do: Kill em all let god sort em out

EMAIL: Spinal.NGA@Digital.Prestel.co.uk
--------------------------------------------
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
--------------------------------------------


@ENDNODE
@NODE "Mail_20" " Building structures dynamically "
From: Christian Hattemer <Chris@heaven.riednet.wh.tu-darmstadt.de>
Date: 07-29-99 21:04:20
Subject: @{b}Building structures dynamically@{ub}

From: Christian Hattemer <Chris@heaven.riednet.wh.tu-darmstadt.de>

Hi,

I want to build an array of structure pointers dynamically. The main problem
is that the layout of the struct to be put in the array should also be
described dynamically.

I want to use this for a function which reads some data from a file and then
puts it into the array. The array is ment to be used mit MUIM_List_Insert.

I want to have to struct dynamic to be able to use the function to read
several types of data (i. e. several different structs) without changing the
code.

I thought of passing in another array like this, describing the structure to
be built:

struct ReadConfig
{
   ULONG Type;
   TEXT  Item[20];
   TEXT  StrDef[100];
   ULONG StrLen;
   ULONG NumDef;
};

struct ReadConfig[] =
{
   {TYPE_TEXT, "Data1", "Value1", 50, 0},
   {TYPE_NUM , "Data2", ""      ,  0, 5}
};

Type defines whether the element is a string or a number.
Item is a string which identifies the data in the file
StrDef is a default string which is copied into the structure if the data
wasn't in the file
StrLen is a lenght limit for the string in the struct
NumDef is the numerical default, simmilar to StrDef

StrDef and StrLen are only used if it's TYPE_TEXT, NumDef only if it's
TYPE_NUM.

In this example the created struct should look like this:

struct Data
{
   TEXT String[50];
   ULONG Num;
};

The big Question is now: How do I find out how much memory needs to be
allocated to hold the array, and how do I find out the offsets to fill in
the data?

Bye, Chris

-- 
            __
           ///
      __  ///  Amiga 4000T 040/40      Team *AMIGA*
      \\\///
       \XX/    http://www.riednet.wh.tu-darmstadt.de/~chris/

I am McCoy of Borg. I'm a Doctor, Not An Assimilator...


@ENDNODE
@NODE "Mail_21" " Re: Building structures dynamically "
From: Gabriele Svelto <jlpicard@tiscalinet.it>
Date: 07-30-99 12:31:21
Subject: @{b}Re: Building structures dynamically@{ub}

Hello Christian

(I saved the message as a text attachement 'cos YAM seem to have changed all
double asterisks and double slashes into Bold and Italic text :-))

> From: Christian Hattemer <Chris@heaven.riednet.wh.tu-darmstadt.de>
> 
> Hi,
> 
> I want to build an array of structure pointers dynamically. The main
> problem is that the layout of the struct to be put in the array should
> also be described dynamically.
> 
> I want to use this for a function which reads some data from a file and
> then puts it into the array. The array is ment to be used mit
> MUIM_List_Insert.
> 
> I want to have to struct dynamic to be able to use the function to read
> several types of data (i. e. several different structs) without changing
> the code.
> 
> I thought of passing in another array like this, describing the structure
> to be built:
> 
> struct ReadConfig
> {
>   ULONG Type;
>   TEXT  Item[20];
>   TEXT  StrDef[100];
>   ULONG StrLen;
>   ULONG NumDef;
> };
> 
> struct ReadConfig[] =
> {
>   {TYPE_TEXT, "Data1", "Value1", 50, 0},
>   {TYPE_NUM , "Data2", ""      ,  0, 5}
> };
> 
> Type defines whether the element is a string or a number.
> Item is a string which identifies the data in the file
> StrDef is a default string which is copied into the structure if the data
> wasn't in the file
> StrLen is a lenght limit for the string in the struct
> NumDef is the numerical default, simmilar to StrDef
> 
> StrDef and StrLen are only used if it's TYPE_TEXT, NumDef only if it's
> TYPE_NUM.
> 
> In this example the created struct should look like this:
> 
> struct Data
> {
>   TEXT String[50];
>   ULONG Num;
> };

If I have understood your problem you need to create an array of Data
structures which can be different (for example TEXT String could be of
another size etc...). You could then create the Data structure only using
pointers like that:

sruct Data
{
    TEXT *String; (is TEXT a #define of char?)
    ULONG Num;
}

Then you could create an array of Data structures:

struct Data Data_ptr = (struct Data *) malloc(n * sizeof(struct Data));

where n is the number of Data structures and then you could use an array of
ReadConfig for allocating memory for each string, take a look at the
example prog below:

struct Data
{
  TEXT *String;
  ULONG Num;
}

/* ... your code ...  */

struct ReadConfig *config;
struct Data *dataptr;
long n; /* /*/* Number of elements in config and dataptr arrays */
long temp;

config = (struct ReadConfig *) malloc(n* ** sizeof(struct ReadConfig));

/* Initialize your ReadConfig array for your needs... */

dataptr = (struct Data *) malloc(sizeof(struct Data));

/* Now allocate memory for the different elements of the Data array */

for (temp = 0; temp < n; temp++)
{
    if ( (config + temp)->StrLen != 0 )
    {
        /* Allocate memory */
        (dataptr + temp)->String = malloc((config + temp)->StrLen);
        /* Copy the default string */
        (void) strcpy((dataptr + temp)->String, (config + temp)->StrDef));
    }
    (...)    
    /* Initialise the rest of the array like that */
}

etc...

> The big Question is now: How do I find out how much memory needs to be
> allocated to hold the array, and how do I find out the offsets to fill in
> the data?

That's not a problem, you don't need to calculate any offsets at all if
you're using pointers, the compiler will do the work for you: for example,
for printing the string contained in the fourth structure of the Data array
you could simply write:

puts((dataptr + 3)->String);

 Hope this could help you

 Gabriele

@{fg shine}There should be a file text included with this guide.@{fg text}
@ENDNODE
@NODE "Mail_22" " Re: Building structures dynamically "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 07-30-99 14:08:42
Subject: @{b}Re: Building structures dynamically@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 30-Jul-99, Gabriele Svelto wrote:

> (I saved the message as a text attachement 'cos YAM seem to have changed all
> double asterisks and double slashes into Bold and Italic text :-))

That's only done during presentation, and can be disabled through amiga-t, or
the equivalent menuitem :-)

Regards Allan
-- 
     URL: http://www.DIKU.dk/students/duff/
<sb>
"One World, One Web, One Program" - Microsoft Promotional Ad
"Ein Volk, Ein Reich, Ein Fuhrer" - Adolf Hitler


@ENDNODE
@NODE "Mail_23" " Re: Building structures dynamically "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 07-30-99 14:19:04
Subject: @{b}Re: Building structures dynamically@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 29-Jul-99, Christian Hattemer wrote:

> I want to build an array of structure pointers dynamically. The main problem
> is that the layout of the struct to be put in the array should also be
> described dynamically.

Do you know about C++? Here you can have base-structures and subclasses which
extend or "specialize" your structure to its particular goal. Then you create
an array, which is typed to contain the base-structure, but you can actually
fill it with all structures derived from it (granted the array is an array of
pointers, rather than structure instances)

> I want to use this for a function which reads some data from a file and then
> puts it into the array. The array is ment to be used mit MUIM_List_Insert.

Maybe you should look into overloading MUIM_Import/Export for the list-object?
That's what I normally do when I need to load'n'save the contents of a MUI
listview.

> I want to have to struct dynamic to be able to use the function to read
> several types of data (i. e. several different structs) without changing the
> code.

I'm not sure if I follow this - if all you want is to read a file, and add all
items found in the file to a MUI listview - then this sounds like a trivial
job. Or is there more to it?

> The big Question is now: How do I find out how much memory needs to be
> allocated to hold the array,

And the array should have space for all items in your file? Either you check
the filesize and divide it by the size of your structure, or you could store
this info in the file - or maybe you could use a linked list instead of an
array - or perhaps you should repeatedly use MUIM_List_InsertSingle for each
item, instead of loading the entire thing in one big array (then ensure the
list has proper construct and destruct hooks to make a copy of the data)

> and how do I find out the offsets to fill in the data?

Now you really lost me...

Btw: Seeing fixed sized string buffers in your structures is not an eye-pleaser
;-)

Regards Allan
-- 
     URL: http://www.DIKU.dk/students/duff/
<sb>
Reality is for people who lack imagination.


@ENDNODE
@NODE "Mail_24" " Re: Building structures dynamically "
From: Gabriele Svelto <jlpicard@tiscalinet.it>
Date: 07-30-99 17:36:13
Subject: @{b}Re: Building structures dynamically@{ub}

From: Gabriele Svelto <jlpicard@tiscalinet.it>

Hello Christian

Sorry for reposting but my previous message was really messed up ;^)

> From: Christian Hattemer <Chris@heaven.riednet.wh.tu-darmstadt.de>
> 
> Hi,
> 
> I want to build an array of structure pointers dynamically. The main
> problem is that the layout of the struct to be put in the array should
> also be described dynamically.
> 
> I want to use this for a function which reads some data from a file and
> then puts it into the array. The array is ment to be used mit
> MUIM_List_Insert.
> 
> I want to have to struct dynamic to be able to use the function to read
> several types of data (i. e. several different structs) without changing
> the code.
> 
> I thought of passing in another array like this, describing the structure
> to be built:
> 
> struct ReadConfig
> {
>   ULONG Type;
>   TEXT  Item[20];
>   TEXT  StrDef[100];
>   ULONG StrLen;
>   ULONG NumDef;
> };
> 
> struct ReadConfig[] =
> {
>   {TYPE_TEXT, "Data1", "Value1", 50, 0},
>   {TYPE_NUM , "Data2", ""      ,  0, 5}
> };
> 
> Type defines whether the element is a string or a number.
> Item is a string which identifies the data in the file
> StrDef is a default string which is copied into the structure if the data
> wasn't in the file
> StrLen is a lenght limit for the string in the struct
> NumDef is the numerical default, simmilar to StrDef
> 
> StrDef and StrLen are only used if it's TYPE_TEXT, NumDef only if it's
> TYPE_NUM.
> 
> In this example the created struct should look like this:
> 
> struct Data
> {
>   TEXT String[50];
>   ULONG Num;
> };

If I have understood your problem you need to create an array of Data
structures which can be different (for example TEXT String could be of
another size etc...). You could then create the Data structure only using
pointers like that:

sruct Data
{
    TEXT *String; (is TEXT a #define of char?)
    ULONG Num;
}

Then you could create an array of Data structures:

struct Data Data_ptr = (struct Data *) malloc(n * sizeof(struct Data));

where n is the number of Data structures and then you could use an array of
ReadConfig for allocating memory for each string, take a look at the
example prog below:

struct Data
{
  TEXT *String;
  ULONG Num;
}

/* ... your code ...  */

struct ReadConfig *config;
struct Data *dataptr;
long n; /* Number of elements in config and dataptr arrays */
long temp;

config = (struct ReadConfig *) malloc(n * sizeof(struct ReadConfig));

/* Initialize your ReadConfig array for your needs... */

dataptr = (struct Data *) malloc(sizeof(struct Data));

/* Now allocate memory for the different elements of the Data array */

for (temp = 0; temp < n; temp++)
{
    if ( (config + temp)->StrLen != 0 )
    {
        /* Allocate memory */
        (dataptr + temp)->String = malloc((config + temp)->StrLen);
        /* Copy the default string */
        (void) strcpy((dataptr + temp)->String, (config + temp)->StrDef));
    }
    (...)    
    /* Initialise the rest of the array like that */
}

etc...

> The big Question is now: How do I find out how much memory needs to be
> allocated to hold the array, and how do I find out the offsets to fill in
> the data?

That's not a problem, you don't need to calculate any offsets at all if
you're using pointers, the compiler will do the work for you: for example,
for printing the string contained in the fourth structure of the Data array
you could simply write:

puts((dataptr + 3)->String);

 Hope this could help you

 Gabriele 


@ENDNODE
@NODE "Mail_25" " Re: ByteRun encoding "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 07-09-99 18:45:23
Subject: @{b}Re: ByteRun encoding@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 09-Jul-99, Jens Granseuer wrote:

> is there anyone out there who can provide a small
> and fast ByteRun (standard IFF-ILBM compression)
> encoding algorithm?

You could use IFFL_CompressBlock() from iff.library.

Regards Allan
-- 
     URL: http://www.DIKU.dk/students/duff/
<sb>
Q.  Which is the greater problem in the world today, ignorance or apathy?
A.  I don't know and I couldn't care less.


@ENDNODE
@NODE "Mail_26" " Re: ByteRun encoding "
From: Olaf Barthel <olsen-amigac@sourcery.han.de>
Date: 07-09-99 21:23:47
Subject: @{b}Re: ByteRun encoding@{ub}

From: "Olaf Barthel" <olsen-amigac@sourcery.han.de>

On Jul 9 Jens (Jens Granseuer) wrote:

> From: Jens Granseuer <jensgr@gmx.net>
> 
> Hi list,
> 
> is there anyone out there who can provide a small
> and fast ByteRun (standard IFF-ILBM compression)
> encoding algorithm?

   Hm... why not use the original EA-IFF ByteRun1 code?
Oh, and just in case: there's a bug in that code nobody
seems to have noticed in 14 years.

-- 
Home: Olaf Barthel, Brabeckstrasse 35, D-30559 Hannover
 Net: olsen@sourcery.han.de (Home), olsen@logicalline.com (Work)

@ENDNODE
@NODE "Mail_27" " ByteRun encoding "
From: Jens Granseuer <jensgr@gmx.net>
Date: 07-09-99 21:43:57
Subject: @{b}ByteRun encoding@{ub}

From: Jens Granseuer <jensgr@gmx.net>

Hi list,

is there anyone out there who can provide a small
and fast ByteRun (standard IFF-ILBM compression)
encoding algorithm?

Thanks in advance.

Jens Granseuer
jensgr@gmx.net


@ENDNODE
@NODE "Mail_28" " Re: ByteRun encoding "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 07-10-99 15:06:28
Subject: @{b}Re: ByteRun encoding@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 10-Jul-99, Jens Granseuer wrote:

>> You could use IFFL_CompressBlock() from iff.library.
> I think it would cause quite a bit of avoidable overhead
> to use the library for just this function.

hmmm... like the attachment your mailer adds to your messages? ;-)

But I think that iff.library is available as a link-library, so that you'd only
get the part you need. Even though I doubt it's worth the trouble, looking in
my Libs: directory:

   IFF.Library                 3160 ----rwed 30-May-95 17:23:04

> Besides, I'm not going to use it on an IFF-structured data...

   IFFL_CompressBlock(APTR source, APTR destination, ULONG size, ULONG mode)

    source      - Pointer to data to compress
    destination - Target address for compression
    size        - Number of data bytes to compress
    mode        - Compression mode. Currently, the following modes
                  are supported:

                  IFFL_COMPR_NONE     - Vanilla copy
                  IFFL_COMPR_BYTERUN1 - CmpByteRun1 (ILBM BODY data)
                  IFFL_COMPR_FIBDELTA - Fibonacci Delta (8SVX BODY data)

Regards Allan
-- 
     URL: http://www.DIKU.dk/students/duff/
<sb>
Reality is for people who lack imagination.


@ENDNODE
@NODE "Mail_29" " Re: ByteRun encoding "
From: Jens Granseuer <jensgr@gmx.net>
Date: 07-10-99 17:21:41
Subject: @{b}Re: ByteRun encoding@{ub}

From: Jens Granseuer <jensgr@gmx.net>

Allan Odgaard <Duff@DIKU.DK> wrote:

> You could use IFFL_CompressBlock() from iff.library.

I think it would cause quite a bit of avoidable overhead
to use the library for just this function. Besides, I'm not
going to use it on an IFF-structured data...

Jens Granseuer
jengr@gmx.net

begin 600 WINMAIL.DAT
M>)\^(@H-`0:0" `$```````!``$``0>0!@`(````Y 0```````#H``$-@ 0`
M`@````(``@`!!) &`!P!```!````# ````,``# #````"P`/#@`````"`?\/
M`0```$4`````````@2L?I+ZC$!F=;@#=`0]4`@````!A;6EG82UC0&]N96QI
M<W0N8V]M`%--5% `86UI9V$M8T!O;F5L:7-T+F-O;0`````>``(P`0````4`
M``!33510`````!X``S !````% ```&%M:6=A+6- ;VYE;&ES="YC;VT``P`5
M# $````#`/X/!@```!X``3 !````%@```"=A;6EG82UC0&]N96QI<W0N8V]M
M)P````(!"S !````&0```%--5% Z04U)1T$M0T!/3D5,25-4+D-/30`````#
M```Y``````L`0#H!`````@'V#P$````$`````````P8R`0B !P`8````25!-
M+DUI8W)O<V]F="!-86EL+DYO=&4`,0@!!( !`!\```!293H@6V%M:6=A+6-=
M($)Y=&52=6X@96YC;V1I;F<`J H!!8 #``X```#/!P<`"@`/`!4`*0`&`#H!
M`2" `P`.````SP<'``H`#P`1`#D`!@!&`0$)@ $`(0```#A#0CDS0T5#1#5#
M04)%,3$Y,4%&,#9"149"-C-$1$1&`+L'`0.0!@`L`P``$@````L`(P``````
M`P`F```````+`"D```````,`-@``````0 `Y`$"[[R77RKX!'@!P``$````?
M````4F4Z(%MA;6EG82UC72!">71E4G5N(&5N8V]D:6YG```"`7$``0```!8`
M```!OLK7)>_M:!'A-MD1T[I:M9TF:78Y```>`!X,`0````4```!33510````
M`!X`'PP!````#P```&IE;G-G<D!G;7@N;F5T```#``80U_C>2P,`!Q#B````
M'@`($ $```!E````04Q,04Y/1$=!05)$/$151D9 1$E+541+5U)/5$4Z64]5
M0T]53$154T5)1D9,0T]-4%)%4U-"3$]#2R@I1E)/34E&1DQ)0E)!4EE)5$A)
M3DM)5%=/54Q$0T%54T5154E414%"20`````"`0D0`0```*\!``"K`0``R (`
M`$Q:1G4'B7:U_P`*`0\"%0*H!>L"@P!0`O()`@!C: K <V5T,C<&``;#`H,R
M`\4"`'!R0G$1XG-T96T"@S.W`N0'$P*#-!+,%,5]"H _",\)V0* "H$-L0M@
M;F?X,3 S`% +"A11"_(34$IO$]!C!4!!;!DQ(!!/9&=A"Q$@/$0"=0W00$1)
M2U4N.$1+/@M&%6(!T" @^G<;`CH:#QL4"H\>[Q_XK1U;/B*7&HU9"& @!: 4
M=6P<,'41L"!)1FA&3%\(4&T34 >0<X)"%S!C:R@I( -2`B &D&8N;&EB<CD*
MP'DN( 4@#QV(22"T=&@+@&LGD 5 =R5S9&-A)<)Q=2L`)>!A)"!B*P%O9BQ 
M=F^4:60!H&PEX&]V!)"0:&5A9"C5=&\EL]\JH"7@)^4G0 6Q:B7 !4"C*J$$
M(&9U;AM :0(@N"X@0@>0+1 'D"PE\-HG)X!N&Q HU6<M`!E07RYF+((#H .1
M)@$M$\!R;G4;0 AP"8 @+2 !D"[;-2 H;$H)\ 0@1R@0`(!J90I0<BC5:@GP
M"<! X&=M>"YN$< H;!;!`@`Y< `#`! 0``````,`$1 `````0 `',,#P9:#6
ERKX!0 `(,,#P9:#6RKX!'@`]``$````%````4F4Z( `````CV `'
`
end


@ENDNODE
@NODE "Mail_30" " Re: ByteRun encoding "
From: Jens Granseuer <jensgr@gmx.net>
Date: 07-10-99 17:24:17
Subject: @{b}Re: ByteRun encoding@{ub}

From: Jens Granseuer <jensgr@gmx.net>

Olaf Barthel <olsen-amigac@sourcery.han.de> wrote:

>> is there anyone out there who can provide a small
>> and fast ByteRun (standard IFF-ILBM compression)
>> encoding algorithm?
>
>   Hm... why not use the original EA-IFF ByteRun1 code?
> Oh, and just in case: there's a bug in that code nobody
> seems to have noticed in 14 years.

Where can I get it from? I had a look at the IFF-specs
archive on aminet some time ago, but I couldn't find
any compression code.

Jens Granseuer
jengr@gmx.net

begin 600 WINMAIL.DAT
M>)\^(A$-`0:0" `$```````!``$``0>0!@`(````Y 0```````#H``$-@ 0`
M`@````(``@`!!) &`!P!```!````# ````,``# #````"P`/#@`````"`?\/
M`0```$4`````````@2L?I+ZC$!F=;@#=`0]4`@````!A;6EG82UC0&]N96QI
M<W0N8V]M`%--5% `86UI9V$M8T!O;F5L:7-T+F-O;0`````>``(P`0````4`
M``!33510`````!X``S !````% ```&%M:6=A+6- ;VYE;&ES="YC;VT``P`5
M# $````#`/X/!@```!X``3 !````%@```"=A;6EG82UC0&]N96QI<W0N8V]M
M)P````(!"S !````&0```%--5% Z04U)1T$M0T!/3D5,25-4+D-/30`````#
M```Y``````L`0#H!`````@'V#P$````$`````````P8R`0B !P`8````25!-
M+DUI8W)O<V]F="!-86EL+DYO=&4`,0@!!( !`!\```!293H@6V%M:6=A+6-=
M($)Y=&52=6X@96YC;V1I;F<`J H!!8 #``X```#/!P<`"@`/`!@`$0`&`"4!
M`2" `P`.````SP<'``H`#P`5`"T`!@`^`0$)@ $`(0```#A&0CDS0T5#1#5#
M04)%,3$Y,4%&,#9"149"-C-$1$1&`+X'`0.0!@#X`P``$@````L`(P``````
M`P`F```````+`"D```````,`-@``````0 `Y`("S^H+7RKX!'@!P``$````?
M````4F4Z(%MA;6EG82UC72!">71E4G5N(&5N8V]D:6YG```"`7$``0```!8`
M```!OLK7@OKM:!'B-MD1T[I:M9TF:78Y```>`!X,`0````4```!33510````
M`!X`'PP!````#P```&IE;G-G<D!G;7@N;F5T```#``80ZLL<L ,`!Q!_`0``
M'@`($ $```!E````3TQ!1D)!4E1(14P\3TQ314XM04U)1T%#0%-/55)#15)9
M2$%.1$574D]413I)4U1(15)%04Y93TY%3U545$A%4D572$]#04Y04D]6241%
M05--04Q,04Y$1D%35$)95$5254XH4P`````"`0D0`0```'P"``!X`@``PP0`
M`$Q:1G5K+/E6_P`*`0\"%0*H!>L"@P!0`O()`@!C: K <V5T,C<&``;#`H,R
M`\4"`'!R0G$1XG-T96T"@S.W`N0'$P*#-!+,%,5]"H _",\)V0* "H$-L0M@
M;F?X,3 S`% +"A11"_(34"IO$]!C!4!/"V!F(*)""L!T:&4#(#P&\($1L&XM
M86UI9P#0E$!S"&%C!)!Y+A& =&XN#; ^"T858@'0(/0@=QL".AH/&Q0*CQ_?
M3R#H'DL>%QJ-/B $`"#K&_$7H" `<'D"(":0"&"#!4 F5'=H;R!C`Y&9&O%V
M:0VP)J @<P# /&QL(R\D/R5,`'!D("QF81/ &[!Y$]!2=1T#H"@3P"PQ"Q$@
M24; 1BU)3$)-)_ #<.\34 >0`) "("DI/RI/)4PK"? %H&0+@&<FH&QGY06P
M:1OP;3\O/S!/(F^/,[\TSQL%.1%(;2XY<)$GL7D@;AL0('41L#<F0B<0!1!G
M"X '0"!%[D$N$"WP++8Q+F$-L#-?IS=%//<:CF@L+"-J.C"O!4 +@"?Q$; Z
M)D0G!""Y*,!B=3*@0%$;\&$%0.<\0CGA!N!D>3R?/:\:JU\1L!/@)C$GX!& 
M=D)R= YI'6 L4$!1,30@>7IE$9$N0OT:A#8_'K17XR9C* ))(&<1P"80!4!]
M`U(_2U$1@"Q0*, 7,&].:R:@)T,MTW-P!9!S]R#U"L 1<&E&D0(@)J <P/\F
M\$7!`W Z40=Q)J RX#^@#T& !4!+8 6@=6QD;O8G2]$+@&1.)B; +FH\,YM'
M]B#U2@GP!"!'<@!Q:F4*4'(@]6H)\ G 0/!G;7@N3W%);S5_"L$%%L$`62 #
M`! 0``````,`$1 `````0 `',&#B*"C7RKX!0 `(,&#B*"C7RKX!'@`]``$`
0```%````4F4Z( ````!+(0`'
`
end


@ENDNODE
@NODE "Mail_31" " Re: ByteRun encoding "
From: Olaf Barthel <olsen-amigac@sourcery.han.de>
Date: 07-10-99 21:45:12
Subject: @{b}Re: ByteRun encoding@{ub}

From: "Olaf Barthel" <olsen-amigac@sourcery.han.de>

On Jul 10 Jens (Jens Granseuer) wrote:

> From: Jens Granseuer <jensgr@gmx.net>
> 
> Olaf Barthel <olsen-amigac@sourcery.han.de> wrote:
> 
> >> is there anyone out there who can provide a small
> >> and fast ByteRun (standard IFF-ILBM compression)
> >> encoding algorithm?
> >
> >   Hm... why not use the original EA-IFF ByteRun1 code?
> > Oh, and just in case: there's a bug in that code nobody
> > seems to have noticed in 14 years.
> 
> Where can I get it from? I had a look at the IFF-specs
> archive on aminet some time ago, but I couldn't find
> any compression code.

   You might want to try the Amiga Developer CD. Failing that,
I could of course send you the relevant source code.

-- 
Home: Olaf Barthel, Brabeckstrasse 35, D-30559 Hannover
 Net: olsen@sourcery.han.de (Home), olsen@logicalline.com (Work)

@ENDNODE
@NODE "Mail_32" " Re: ByteRun encoding "
From: Olaf Barthel <olsen-amigac@sourcery.han.de>
Date: 07-11-99 21:32:57
Subject: @{b}Re: ByteRun encoding@{ub}

From: "Olaf Barthel" <olsen-amigac@sourcery.han.de>

On Jul 11 Jens (Jens Granseuer) wrote:

> From: Jens Granseuer <jensgr@gmx.net>
> 
> Olaf Barthel <olsen-amigac@sourcery.han.de> wrote:
> 
> >> >   Hm... why not use the original EA-IFF ByteRun1 code?
> >> > Oh, and just in case: there's a bug in that code nobody
> >> > seems to have noticed in 14 years.
> >> 
> >> Where can I get it from? I had a look at the IFF-specs
> >> archive on aminet some time ago, but I couldn't find
> >> any compression code.
> >
> >   You might want to try the Amiga Developer CD. Failing that,
> > I could of course send you the relevant source code.
> 
> I've got it, thanks. It was in the IFF specs after all. And rather
> hard to overlook, ahem.
> 
> Anyway, so far I've not been able to detect the bug you've
> mentioned. Any more hints?

   This is a bit difficult to explain :-/  I ran into this problem when
I adapted the original ByteRun1 compressor in one of my projects and
experienced a number of inexplicable crashes. What I found was that
the compression buffer (256 bytes in the original implementation) would
overflow. As far as I can tell, the bug is in the following piece of
code (as indicated by the "^^^^"):

    for (;  rowSize;  --rowSize) {
        buf[nbuf++] = c = GetByte();
        switch (mode) {
            case DUMP: 
                /* If the buffer is full, write the length byte,
                   then the data */
                if (nbuf>MaxDat) {
                    OutDump(nbuf-1);  
                    buf[0] = c; 
                    nbuf = 1;   rstart = 0; 
                    break;
                }

                if (c == lastc) {
                    if (nbuf-rstart >= MinRun) {
                        if (rstart > 0) OutDump(rstart);
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                        mode = RUN;
                    }
                    else if (rstart == 0)
                        mode = RUN;     /* no dump in progress,
                        so can't lose by making these 2 a run.*/
                }
                else  rstart = nbuf-1;          /* first of run */ 
                break;

The problem in the indicated section is that while the contents of the
buffer are dumped, the code "forgets" to mark the compression buffer as
emptied (note: it may not have been emptied completely). The indicated
section should be written as:

   if (rstart > 0) {
       int i;

       OutDump(rstart);

       for(i = 0 ; i < nbuf - rstart ; i++)
           buf[i] = buf[i+rstart];

       nbuf -= rstart;
       rstart = 0;
   }

I might be wrong, but a change like that made my adapted compressor
work as it should.

-- 
Home: Olaf Barthel, Brabeckstrasse 35, D-30559 Hannover
 Net: olsen@sourcery.han.de (Home), olsen@logicalline.com (Work)

@ENDNODE
@NODE "Mail_33" " Re: ByteRun encoding "
From: Jens Granseuer <jensgr@gmx.net>
Date: 07-11-99 22:54:35
Subject: @{b}Re: ByteRun encoding@{ub}

From: Jens Granseuer <jensgr@gmx.net>

Allan Odgaard <Duff@DIKU.DK> wrote:

> hmmm... like the attachment your mailer adds to your messages? ;-)

:-(((

>> Besides, I'm not going to use it on an IFF-structured data...
>
>   IFFL_CompressBlock(APTR source, APTR destination, ULONG size, > ULONG mode)

Oh, well. I just assumed it'd take an IFFHandle or something.
Anyway, since I've got the EA source I don't need it any more.
Thanks nevertheless.

Jens
jensgr@gmx.net

begin 600 WINMAIL.DAT
M>)\^(B43`0:0" `$```````!``$``0>0!@`(````Y 0```````#H``$-@ 0`
M`@````(``@`!!) &`!P!```!````# ````,``# #````"P`/#@`````"`?\/
M`0```$4`````````@2L?I+ZC$!F=;@#=`0]4`@````!A;6EG82UC0&]N96QI
M<W0N8V]M`%--5% `86UI9V$M8T!O;F5L:7-T+F-O;0`````>``(P`0````4`
M``!33510`````!X``S !````% ```&%M:6=A+6- ;VYE;&ES="YC;VT``P`5
M# $````#`/X/!@```!X``3 !````%@```"=A;6EG82UC0&]N96QI<W0N8V]M
M)P````(!"S !````&0```%--5% Z04U)1T$M0T!/3D5,25-4+D-/30`````#
M```Y``````L`0#H!`````@'V#P$````$`````````P8R`0B !P`8````25!-
M+DUI8W)O<V]F="!-86EL+DYO=&4`,0@!!( !`!4```!293H@0GET95)U;B!E
M;F-O9&EN9P!!!P$%@ ,`#@```,\'!P`+`!0`-@`C````50$!(( #``X```#/
M!P<`"P`4`#0`! ```#0!`0F `0`A````,$)&,3<Y0C-#1$-"0D4Q,3DQ048P
M-D)%1D(V,T1$1$8`I <!`Y &`,@#```2````"P`C```````#`"8```````L`
M*0```````P`V``````! `#D`P(;FT<[+O@$>`' ``0```!4```!293H@0GET
M95)U;B!E;F-O9&EN9P`````"`7$``0```!8````!OLO.T>:TG"&B-]$1T[I:
MM9TF:78Y```>`!X,`0````4```!33510`````!X`'PP!````#P```&IE;G-G
M<D!G;7@N;F5T```#``80,UGZ0P,`!Q!*`0``'@`($ $```!E````04Q,04Y/
M1$=!05)$/$151D9 1$E+541+5U)/5$4Z2$U-34Q)2T542$5!5%1!0TA-14Y4
M64]54DU!24Q%4D%$1%-43UE/55)-15-304=%4S\[+2DZ+2@H*$)%4TE$15,L
M24U.3P`````"`0D0`0```%("``!.`@``)@0``$Q:1G514DP]_P`*`0\"%0*H
M!>L"@P!0`O()`@!C: K <V5T,C<&``;#`H,R`\4"`'!R0G$1XG-T96T"@S.W
M`N0'$P*#-!+,%,5]"H _",\)V0* "H$-L0M@;F?X,3 S`% +"A11"_(34$IO
M$]!C!4!!;!DQ(!!/9&=A"Q$@/$0"=0W00$1)2U4N.$1+/@M&%6(!T" @^G<;
M`CH:#QL4"H\>[Q_XF2#J(#XBG1KG:&TE, (N)6 @;&EK92#T=&@ET&$"0 #0
M)2 )\/4%0'D(82 `P ,0!) F(&1D9 0@=&\FU0>0<P1A9P>0/R [+2F/(C\=
MTRE-';4Z+2@L(+\@!2E/(T0COQL4(Y!"!Y ":0VP<RP@22=M1"!N&Q @9V\+
M@&?E)^)U$; @:05 `B F("$#H$E&1BT3P')UIQM "' )@"!D)C!A)6'_*J\M
MWR%_,^\T_QL%.4$R,;1,7PA0;1-0*(%"%S `8VLH05!44B!R<PAA8V4P,#JS
M, %T&PN )C!I`B P,%5,3^1.1SKP:7H[43;N(Z\_&P4\I 1B*3X=M2 %3V@9
M,#!W91N )8!)(&KK,6 %0&$$$'4'@!PP,:!>)QPP`9 EP3($2 !P9/\G8#' 
M!< [``> )? P\3.&P$%N>7=A>3 P`)#V;CM ,$%V)= PT 5 )?*L14$Z]4+Q
M9 (@)P5 [FX)X$/2,?%Y0#$7H#.&\E01@&YK!"!)<$>@`"!?)@`G8 00,X8@
M!4H)\',-( 5J32$)P$!G;7A:+DEP=" %%L$`3U ```,`$! ``````P`1$ ``
M``! ``<PP,EQ=\[+O@% ``@PP,EQ=\[+O@$>`#T``0````4```!293H@````
#`+<#
`
end


@ENDNODE
@NODE "Mail_34" " Re: ByteRun encoding "
From: Jens Granseuer <jensgr@gmx.net>
Date: 07-11-99 22:57:44
Subject: @{b}Re: ByteRun encoding@{ub}

From: Jens Granseuer <jensgr@gmx.net>

Olaf Barthel <olsen-amigac@sourcery.han.de> wrote:

>> >   Hm... why not use the original EA-IFF ByteRun1 code?
>> > Oh, and just in case: there's a bug in that code nobody
>> > seems to have noticed in 14 years.
>> 
>> Where can I get it from? I had a look at the IFF-specs
>> archive on aminet some time ago, but I couldn't find
>> any compression code.
>
>   You might want to try the Amiga Developer CD. Failing that,
> I could of course send you the relevant source code.

I've got it, thanks. It was in the IFF specs after all. And rather
hard to overlook, ahem.

Anyway, so far I've not been able to detect the bug you've
mentioned. Any more hints?

Jens
jensgr@gmx.net


begin 600 WINMAIL.DAT
M>)\^(BH3`0:0" `$```````!``$``0>0!@`(````Y 0```````#H``$-@ 0`
M`@````(``@`!!) &`!P!```!````# ````,``# #````"P`/#@`````"`?\/
M`0```$4`````````@2L?I+ZC$!F=;@#=`0]4`@````!A;6EG82UC0&]N96QI
M<W0N8V]M`%--5% `86UI9V$M8T!O;F5L:7-T+F-O;0`````>``(P`0````4`
M``!33510`````!X``S !````% ```&%M:6=A+6- ;VYE;&ES="YC;VT``P`5
M# $````#`/X/!@```!X``3 !````%@```"=A;6EG82UC0&]N96QI<W0N8V]M
M)P````(!"S !````&0```%--5% Z04U)1T$M0T!/3D5,25-4+D-/30`````#
M```Y``````L`0#H!`````@'V#P$````$`````````P8R`0B !P`8````25!-
M+DUI8W)O<V]F="!-86EL+DYO=&4`,0@!!( !`!\```!293H@6V%M:6=A+6-=
M($)Y=&52=6X@96YC;V1I;F<`J H!!8 #``X```#/!P<`"P`4`#D`+ ```&$!
M`2" `P`.````SP<'``L`% `Y`!P```!1`0$)@ $`(0```#!%1C$W.4(S0T1#
M0D)%,3$Y,4%&,#9"149"-C-$1$1&`*<'`0.0!@!<! ``$@````L`(P``````
M`P`F```````+`"D```````,`-@``````0 `Y`("G4T+/R[X!'@!P``$````?
M````4F4Z(%MA;6EG82UC72!">71E4G5N(&5N8V]D:6YG```"`7$``0```!8`
M```!OLO/0DJTG"&C-]$1T[I:M9TF:78Y```>`!X,`0````4```!33510````
M`!X`'PP!````#P```&IE;G-G<D!G;7@N;F5T```#``807#DPQ@,`!Q#T`0``
M'@`($ $```!E````3TQ!1D)!4E1(14P\3TQ314XM04U)1T%#0%-/55)#15)9
M2$%.1$574D]413I(35=(64Y/5%53151(14]224=)3D%,14$M249&0EE415)5
M3C%#3T1%/T](+$%.1$I54U1)3D-!4P`````"`0D0`0```-T"``#9`@``500`
M`$Q:1G5 [>1X_P`*`0\"%0*H!>L"@P!0`O()`@!C: K <V5T,C<&``;#`H,R
M`\4"`'!R0G$1XG-T96T"@S.W`N0'$P*#-!+,%,5]"H _",\)V0* "H$-L0M@
M;F?X,3 S`% +"A11"_(34"IO$]!C!4!/"V!F(*)""L!T:&4#(#P&\($1L&XM
M86UI9P#0E$!S"&%C!)!Y+A& 1&XN#; ^('<;`CKK"H\:7R >E3X>$!X0(7 8
M2&TN(< >(&AY(%)N&Q @=1&P(!OQ( \%L!S0"X '0"!%02TH249&&[!Y$]!2
M=5AN,2 %H VP/R#*3XAH+" `<&0@:B* UP5 "X D@&$1L#HBLA>@@B<$(&$@
M8G5G)F(]&_!A!4 DDB(Q!N!D>8\@RA&P$^ $('1O(!& <G8HDG1I'6 F`"9Q
M,= T('EE$9$N(,@@R(Y7)Q(FD0.@22!G$<#W)F %0 -2/RW!$8 F`"> >1<P
M;VLET 5 (L(CP2UT<W %D',@R K $7!I[RJ!`B ET!S ;BX!'2 '@.<BL =Q
M)=!G;R7 )Z %0(,MT 6@=6QD;B<N0;4+@&0PF6XB( 6@;1-0?P>0`) QL222
M*^<@QB%Q6=4(8" <P6@%0'<`<"^A+2I =!V (K-!',(@1)YE*H 7,#!0!<!#
M1"'@ND8+<&P+@"? *!(L-N=_,X4B\!N@,Z$1H2G!)?%Y]S>A(L(7H&PYH#A"
M'20V"_D>E4DG*H$S`"X2)< H$?QN:RO0+< X$@0@)^,OX[\IP#!2)= !@#H!
M!T!L(>#Z027Q<B@P)Q$>E1&!)@#U*C%O*H!R+T(EP1P`(;#K/QQ#<'DX,'DE
MP!T@+E#[/\8B0F()X270`F BH2I _PVP&R,BPB>B/4% `1Z5!X#_`C UT0F 
M0U(B( 1@+6$Q8&T",',DUAZ52@GP,(9J@TUQ"<! 9VUX+C(1KS\<"OL58B ?
M(!;!`%) `````P`0$ `````#`!$0`````$ `!S"@?_8XS\N^`4 `"#"@?_8X
:S\N^`1X`/0`!````!0```%)E.B `````64$`
`
end


@ENDNODE
@NODE "Mail_35" " Re: ByteRun encoding "
From: Olaf Barthel <olsen-amigac@sourcery.han.de>
Date: 07-12-99 18:11:12
Subject: @{b}Re: ByteRun encoding@{ub}

From: "Olaf Barthel" <olsen-amigac@sourcery.han.de>

On Jul 12 Jens (Jens Granseuer) wrote:

> [...]
> 
> > The problem in the indicated section is that while the contents of the
> > buffer are dumped, the code "forgets" to mark the compression buffer as
> > emptied (note: it may not have been emptied completely). The indicated
> > section should be written as:
> 
> [...]
> 
> Hm, sounds reasonable. On the other hand, a buffer of 257 should do
> about the same. The maximum number of bytes put into the buffer
> before they are encoded is 128. Therefore the maximum buffer usage
> should be 128 (interrupted DUMP pass) + 129 (maximum RUN size)
> bytes.
> 
> Or did I miss something?

   It has been a while since I analyzed the code, so I don't recall every
little detail. But there's one thing I learned: never ever try to
fix a bug by making a buffer larger; there's no guarantee that the
buffer will be large enough. Always try to nail the bug by fixing
the algorithm; don't try to tinker with the symptoms, fix the
problem.

-- 
Home: Olaf Barthel, Brabeckstrasse 35, D-30559 Hannover
 Net: olsen@sourcery.han.de (Home), olsen@logicalline.com (Work)

@ENDNODE
@NODE "Mail_36" " Re: ByteRun encoding "
From: Jens Granseuer <jensgr@gmx.net>
Date: 07-12-99 20:54:31
Subject: @{b}Re: ByteRun encoding@{ub}

From: Jens Granseuer <jensgr@gmx.net>

Olaf Barthel <olsen-amigac@sourcery.han.de> wrote:

>> >> >   Hm... why not use the original EA-IFF ByteRun1 code?
>> >> > Oh, and just in case: there's a bug in that code nobody
>> >> > seems to have noticed in 14 years.

>> Anyway, so far I've not been able to detect the bug you've
>> mentioned. Any more hints?
>
>   This is a bit difficult to explain :-/  I ran into this problem when
> I adapted the original ByteRun1 compressor in one of my projects and
> experienced a number of inexplicable crashes. What I found was that
> the compression buffer (256 bytes in the original implementation) would
> overflow. As far as I can tell, the bug is in the following piece of
> code (as indicated by the "^^^^"):

[...]

                        if (rstart > 0) OutDump(rstart);
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[...]

> The problem in the indicated section is that while the contents of the
> buffer are dumped, the code "forgets" to mark the compression buffer as
> emptied (note: it may not have been emptied completely). The indicated
> section should be written as:

[...]

Hm, sounds reasonable. On the other hand, a buffer of 257 should do
about the same. The maximum number of bytes put into the buffer
before they are encoded is 128. Therefore the maximum buffer usage
should be 128 (interrupted DUMP pass) + 129 (maximum RUN size)
bytes.

Or did I miss something?

Jens

begin 600 WINMAIL.DAT
M>)\^(AD0`0:0" `$```````!``$``0>0!@`(````Y 0```````#H``$-@ 0`
M`@````(``@`!!) &`!P!```!````# ````,``# %````"P`/#@`````"`?\/
M`0```$4`````````@2L?I+ZC$!F=;@#=`0]4`@````!A;6EG82UC0&]N96QI
M<W0N8V]M`%--5% `86UI9V$M8T!O;F5L:7-T+F-O;0`````>``(P`0````4`
M``!33510`````!X``S !````% ```&%M:6=A+6- ;VYE;&ES="YC;VT``P`5
M# $````#`/X/!@```!X``3 !````%@```"=A;6EG82UC0&]N96QI<W0N8V]M
M)P````(!"S !````&0```%--5% Z04U)1T$M0T!/3D5,25-4+D-/30`````#
M```Y``````L`0#H!`````@'V#P$````$````````!0HR`0B !P`8````25!-
M+DUI8W)O<V]F="!-86EL+DYO=&4`,0@!!( !`!\```!293H@6V%M:6=A+6-=
M($)Y=&52=6X@96YC;V1I;F<`J H!!8 #``X```#/!P<`# `2`#8`'P`!`%$!
M`2" `P`.````SP<'``P`$@`V`!\``0!1`0$)@ $`(0```# X.34U0S V.#5#
M0T)%,3$Y,4%&,#9"149"-C-$1$1&`'$'`0.0!@!@!@``$@````L`(P``````
M`P`F```````+`"D```````,`-@``````0 `Y`*"P:3:'S+X!'@!P``$````?
M````4F4Z(%MA;6EG82UC72!">71E4G5N(&5N8V]D:6YG```"`7$``0```!8`
M```!OLR'-FD'AF;".(D1T[I:M9TF:78Y```>`!X,`0````4```!33510````
M`!X`'PP!````#P```&IE;G-G<D!G;7@N;F5T```#``80?<5)Z0,`!Q#G`P``
M'@`($ $```!E````3TQ!1D)!4E1(14P\3TQ314XM04U)1T%#0%-/55)#15)9
M2$%.1$574D]413I(35=(64Y/5%53151(14]224=)3D%,14$M249&0EE415)5
M3C%#3T1%/T](+$%.1$I54U1)3D-!4P`````"`0D0`0```.($``#>! ``B0H`
M`$Q:1G7Y,]\#_P`*`0\"%0*H!>L"@P!0`O()`@!C: K <V5T,C<&``;#`H,R
M`\4"`'!R0G$1XG-T96T"@S.W`N0'$P*#-!+,%,5]"H _",\)V0* "H$-L0M@
M;F?X,3 S`% +"A11"_(34"IO$]!C!4!/"V!F(*)""L!T:&4#(#P&\($1L&XM
M86UI9P#0E$!S"&%C!)!Y+A& =&XN#; ^"T858@'0(/0@=QL".AH/&Q0*CQ_?
M[R#H'DL>%QJ-/B1P)@$?`# @2&TN)K ?$&AYI"!N&Q @=1&P(!OQ'B %L!S0
M"X '0"!%05 M249&&[!Y$]!2L'5N,2 %H VP/R,OAR0_)4\F`$]H+" `<'AD
M(&HG< 5 "X I<&$M$; Z)Z(7H"<$(&$@V&)U9RWB&_!A!4 I@O,G(0;@9'DI
MWRKO*_\F`$<1L!/@!"!T;R 1@'8Y,!)T:1U@+8 M\3$TZ"!Y91&1+C"?'L,@
M]0,Q_R6706YY=V%YDRU '2 @9@K!22<TE/\O$ GA+5 "8">1-% -L!LC^R>R
M+R)Y"& Z<38/,:\RO/L'@ (P:0(@"8 FT#EQ0 #+!; GD&@+@'1S*<\^']\B
M7T'_0P\:]B9A5$%0!""K1\$O`6D%0&0&D&8T\$QU;#P1-%!E> M3((@Z+2\?
M`$D@<@.1OT%A-% ;\$?!&O$[46TFX3\)\$2?1:1,1QJ-2B!A9-YA!3 U$2>[
M*/EM$U 'D+\=( 7 +?% 82?@&Z!M)Q#]&O%J&S$NX2UP2^],_QJKGTE1!G$)
M\#4"+P!N=0;0_P204>(+@$E2-/ [0P4`+C#S' `UX"!7+Z)*( (0*4#_+8 Y
MH#0A+Z%3'U0O&JLGLA]0UD!1+Q$-T%<A*#(U_C8O$"D!1]$O<B?9!W +4&\3
MX$ A+[! 42D?$ A@;%=3#UL_&IQO-)!R&2!O_G= H00@.B)9P4H@+B O<?T<
M$&PM0#PV1\)?5 (09D#W9. +@"] < B0'6!1X6&?]V*O&JLOXRA9P0N 2( N
M("=/,E[@)Z,B7FUA(BFN.B#U:,\>PULFL5UMW_]J?T=$<F]'8@:07H 1H &0
M"P`@)?$P82!/=71$Y5;P<'/U*3L@]78O=J7_;6)W[WBI<&]O7VY/:=\:J_]'
MH">02R9?16Q($; ;0%WB_T?!+Y,F\ ,0)Y0%H (P0"'_!"!1\1OQ>]]\[QJK
M7B4*P+TGD&1U`0F 9F0OXR("$&1R9Q' <R(T,@# <O9K71^&%G.#+X0_53Q0
M\/LTX#41*"<Q+E%(40# )Q0_-',Z\XUV4-([8&8A>2G_)M!^PFQ'BH^+GQJK
M@)98@/]A4CKA'Q%(4()A98%MQGHM_Y'?>L^37R"?"S<>I2:0.=)_67$$(!>@
M+C "(#M")M!/_U]5+H(T82UP+4%>%E'Q7J#R-Y4V9&^;A0&@"& \%-YS'+">
M<7["`,!X!W!6\/M6V5[D<*(!2H4\4EY"FX7_.O"'X2>3)Q"&@E9A!'$U(?$$
M(#$R.)#C%Z"F5J,'^UXE)W!AB!";A95(I^%>@!-!8020<G5/(T1535902Q N
M,'-A("NGT3DC7H"C%E)53C/0:7J\92FEQE[R-?:;A4\%P/](@"V 2B <P 01
M'2 '@$K1]QE00::;A4H)\(I_FJ^;L@46P0"U@ ```P`0$ `````#`!$0````
M`$ `!S# HE>-A<R^`4 `"#"@L&DVA\R^`1X`/0`!````!0```%)E.B `````
"I1(`
`
end


@ENDNODE
@NODE "Mail_37" " Re: ByteRun encoding "
From: Jens Granseuer <jensgr@gmx.net>
Date: 07-13-99 23:26:45
Subject: @{b}Re: ByteRun encoding@{ub}

From: Jens Granseuer <jensgr@gmx.net>

Olaf Barthel <olsen-amigac@sourcery.han.de> wrote:

>    It has been a while since I analyzed the code, so I don't recall every
> little detail. But there's one thing I learned: never ever try to
> fix a bug by making a buffer larger; there's no guarantee that the
> buffer will be large enough. Always try to nail the bug by fixing
> the algorithm; don't try to tinker with the symptoms, fix the
> problem.

I guess I have to correct myself. I'm completely at a loss how the
256 bytes buffer could overflow. The 128 bytes of the DUMP
already contain the first three bytes of the RUN. The maximum
buffer usage should be 125 + 129 = 254 bytes...
Anyway, I'll give this some more checks.

One other question, though.

In the decoding part

    WORD n;
    WORD minus128 = -128;  /* get the compiler to generate a 
CMP.W */

    while( dstBytes > 0 )  {
	if ( (srcBytes -= 1) < 0 )  goto 
ErrorExit;
    	n = UGetByte();

    	if (n >= 0) {
                ....
	 
   }

    	else if (n != minus128) {

Why does the author try to generate a CMP.W?
What's the practical difference between

    if ( n != minus128 )

and

    if ( n != 128 )

?

Jens


begin 600 WINMAIL.DAT
M>)\^(B03`0:0" `$```````!``$``0>0!@`(````Y 0```````#H``$-@ 0`
M`@````(``@`!!) &`!P!```!````# ````,``# %````"P`/#@`````"`?\/
M`0```$4`````````@2L?I+ZC$!F=;@#=`0]4`@````!A;6EG82UC0&]N96QI
M<W0N8V]M`%--5% `86UI9V$M8T!O;F5L:7-T+F-O;0`````>``(P`0````4`
M``!33510`````!X``S !````% ```&%M:6=A+6- ;VYE;&ES="YC;VT``P`5
M# $````#`/X/!@```!X``3 !````%@```"=A;6EG82UC0&]N96QI<W0N8V]M
M)P````(!"S !````&0```%--5% Z04U)1T$M0T!/3D5,25-4+D-/30`````#
M```Y``````L`0#H!`````@'V#P$````$````````!0HR`0B !P`8````25!-
M+DUI8W)O<V]F="!-86EL+DYO=&4`,0@!!( !`!\```!293H@6V%M:6=A+6-=
M($)Y=&52=6X@96YC;V1I;F<`J H!!8 #``X```#/!P<`#0`5`!H`+0`"`$@!
M`2" `P`.````SP<'``T`%0`:`"T``@!(`0$)@ $`(0```# X-#,Q-4-!-C-#
M1$)%,3$Y,4%&,#9"149"-C-$1$1&`','`0.0!@"P!0``$@````L`(P``````
M`P`F```````+`"D```````,`-@``````0 `Y`$#EL*1ES;X!'@!P``$````?
M````4F4Z(%MA;6EG82UC72!">71E4G5N(&5N8V]D:6YG```"`7$``0```!8`
M```!OLUEI+#+0)MB.6<1T[I:M9TF:78Y```>`!X,`0````4```!33510````
M`!X`'PP!````#P```&IE;G-G<D!G;7@N;F5T```#``80.WK6BP,`!Q L`P``
M'@`($ $```!E````3TQ!1D)!4E1(14P\3TQ314XM04U)1T%#0%-/55)#15)9
M2$%.1$574D]413I)5$A!4T)%14Y!5TA)3$5324Y#14E!3D%,65I%1%1(14-/
M1$4L4T])1$].5%)%0T%,3$5615)93 `````"`0D0`0```#0$```P! ``@P<`
M`$Q:1G4:<[6G_P`*`0\"%0*H!>L"@P!0`O()`@!C: K <V5T,C<&``;#`H,R
M`\4"`'!R0G$1XG-T96T"@S.W`N0'$P*#-!+,%,5]"H _",\)V0* "H$-L0M@
M;F?X,3 S`% +"A11"_(34"IO$]!C!4!/"V!F(*)""L!T:&4#(#P&\($1L&XM
M86UI9P#0E$!S"&%C!)!Y+A& =&XN#; ^"T858@'0(/0@=QL".AH/&Q0*CQ_?
MNR#H'DL^(X<:C28!205 2Q& !"!B">$@81\0:.D#$&4@`)!N'6 F,";P4FX'
M0'EZ"8 @&_$@JP6@#; L)W!O)]%D`B V)P5 %Z!C!T #(&5VSQUQ(R\D/QJK
M;&D"0"=1UPVP`9 #$"X;L'4%0!OQ?1>@)P0@`B G8!OP"X!GCR?1)U *P"]0
M9#H@+U#?*F$J0RB '8 H@&\JKRN_D1JK9FEX)O%B=2_ ]F(Q8 # :R^B--(-
MT##!J0M@<F<$D#LNMVXI0+QG=0K `' 3T"]B82ZC_S&O,K\:JS7U`_ J(2:P
M-E07*D W8#4`:"Y@06QW_F$3L#$U,( N,2B#-/4TD;\OH3B_.<\:JRB2!T!G
M!;!=+:!H$_ I=3WE= N :W<[XQOP*(-S!L %, -P<_\I$#22.(] GQI^&O$"
M8!/@_BY&?Q[#(/4GX#>0!Y $('\GX!& *F ^$@6A*>$%0&V+$[ <$&8N8$DG
M;2C!_T6 )U 3T"@P)O %0"<`%S 9!!%H;P?@1D@R-3:?-2$3T":1-@0%H'5L
M*'!>;RIA&2!/<"Y@5"BA,30R.%!U;QN@*))$59Q-4"#U!T 7H&%D,6#_!: "
M, MQ*(,TD!&@+J()T7%2S%)53E(T`, _<&V,=6T@]37U=7-A/,$><T]@47(\
M85*0-2 K45*!.2 ]4#$T4'0NXUM0(/5!;GD]D2D03=#Y*B%G:4QR)S $(!T@
M!X#/-5 %L"BQ' !C:UM (/6=(/5/+U$;$"[1('%+X;]$8 (@*1 ;\#T37GQ)
M531M!8)D+Z(A(71>?"8"5XA/4D0P@#M<"F0'W1S ;ED`4I):H"U2D3; ^" O
M*C> $< HA46 )T$_,2$W<0GP!) X4$+!($/!4\ N5R J+V2P9+3M)R,H*7 3
MP$)0DT?0'O"Z*1\`7 ``(0`!D2 &D+(@:? H<QU0:D0M6J"Z,6K@/&JT0P`^
M(45,\/4%L$4_<'1DI6M3`Z!:H,Q51Q' :D(H*62A;EGK:Z(#H#Y:H#!JX&L2
M8_/;<<E;42YK-6YS?6_['!![$;!PM2%:H&5F<60@]5?^:#%@*8 'D4*C+I!/
M8#$F_6?O/W9G.% O$2B2$U `T/]$8"H!*7 &D#8A"? GL2:P_'1W">%C+VN4
M=3MJT%Y\_0!P9'Q_?8E^CP7 >88@]5I*"?!S7GP6P0"%( ,`$! ``````P`1
M$ ````! ``<P@.0A(V3-O@% ``@P0.6PI&7-O@$>`#T``0````4```!293H@
&`````-?&
`
end


@ENDNODE
@NODE "Mail_38" " Re[2]: [amiga-c] C Newbie "
From: "Andrzej J. Debicki" <denbi@softsystem.pl>
Date: 07-01-99 06:24:24
Subject: @{b}Re[2]: [amiga-c] C Newbie@{ub}

From: "Andrzej J. Debicki" <denbi@softsystem.pl>

Hello David,

roda, 30 czerwca 1999, you wrote:
> I use VBCC (also because I have no money). I found that once it was setup and
> installed (no install script), it was a breeze. Admittedly I haven't done any
> huge projects yet, but its easy enough to control from the vc frontend program,
> which calls all the other programs in order to compile your source.

I'm learning too and I've chosen vbcc. I think C is enough for me now.
And I'm using VPM as frontend. It's very simple but It's doing what I
want it to do. Maybe It's not up to date now (it has hardcoded phxlnk
for m68k code and you cannot exchange it with vlink) but as for my
needs is quite allright.

> If the book covers normal C then you will be okay, just don't try to use the DOS
> interrupt handlers ;)

Next to the books there are Amiga autodocs and includes. There's a lot of
knowledge inside...

--
Best regards,
Andrzej J. Debicki
denbi@softsystem.pl
http://friko3.onet.pl/rz/denbi
------------------------------------------
A1200T 060-50/603e-240, BVision, 34 MB RAM



@ENDNODE
@NODE "Mail_39" " Re: C Newbie "
From: Jesper Svennevid <jesper@fxrealm.com>
Date: 07-01-99 13:43:54
Subject: @{b}Re: C Newbie@{ub}

From: "Jesper Svennevid" <jesper@fxrealm.com>

> From: Volker Barthelmann <volker@vb.franken.de>
> 
> On Wed, 30 Jun 1999, Jake Frederick wrote:
> 
> > Which C compilers are most recommended? I
> > would like to keep my spending to a minimum so I was thrilled 
> when I saw the
> > new AF rated the freeware VBCC higher than the commercial compilers.
> 
> Interesting to hear. Did they do a bigger test? What did they compare?

They compared four compiler-systems still in development (as sas/c
has stopped being developed, it was not included), namely
Hisoft C++, StormC v3.0, GNU C/EGCS and VBCC. They looked at ease of
use, effiency on compiling a program with different optimizations
enabled, how much of the 'amiga'-specific extensions that were
supported, and 68k/ppc availability.

The benchmark test was compiling a dhrystone-tester, and VBCC did
quite nicely in that test, not with the smallest code(second last,
just before stormc), but with speed of the program, that beat the
code compiled with egcs.

The VBCC note looked like this:

(quote)
"VBCC is a Freeware ANSI C compiler. Like GCC it's retargetable,
but at the moment it only supports m68k, PPC, i386 and Alpha
processors. Although it has been in development for four years
compared to the others it's rather a newcomer.
  The quality of code generated by VBCC is on a par with GCC,
although, because it's a such a new program, it's probably less
reliable. It can do comparable optimisations and it can generate
cod for any 68k-series CPU and FPU, as well as avoiding the
unimplemented instructions on the '040 and '060.
  With the latest version, 0.7, support for the Amiga is improving.
VBCC can handle inlining of OS functions in a manner similar to GCC,
it can register specifications in function parameters, open
libraries automatically and can manage __saveds, __chip and far
modifiers (__near is recognised but ignored). A good selection
of supporting shared libraries is provided, including ones to permit
interfacing of code with the ixemul.library system.
  A nice feature of VBCC is that the name of a config file can be
passed as an argument on its command line. This makes the compilation
of programs for either PowerUp or WarpOS straightforward since the
necessary configurations are supplied. The linker supports ELF
objects and the Extended Hunk Format used by WarpOS.
  The only real problem with VBCC is its incompleteness. The
distribution is still rough around the edges and much is only half-
finished. A GUI error-browser and a MUI project manager are included,
but there's no Make utility or debugger. The documentation is rather
terse and example code non-existent.
  Nevertheless, for the majority of purposes VBCC is an excellent
system that's significantly easier to use and install than GCC."
(endquote)

And the "Decision Time" note looked like this:

(quote)
"The choice of which compiler to go for is, as with all software,
dependent on your own needs and pocket. Hisoft C++ is an excellent
choice for beginners because of its superb GUI and online help
system. StormC is a good solution for developing WarpOS software,
but its high price tag and decidedly average code production may
put off potential buyers. GCC is easily the best m68k compiler for
the power user who's not afraid of UNIX, but its PPC versions are
still too inelegant for my liking. The best allrounder in my book,
with it's good support of Amiga features, support for both PowerUp
and WarpOS and first class code generation, is VBCC."
(endquote)

(ouch, my fingers ache ;P)

> Is the article available somewhere?

I checked AF's faxback, and the comparison was NOT included in the
articles you could order :/

-- 
// Jesper Svennevid : jesper@fxrealm.com
   Software Developer At FXRealm Studios : http://www.fxrealm.com/


@ENDNODE
@NODE "Mail_40" " Re: C Newbie "
From: Ben Hutchings <womble@zzumbouk.demon.co.uk>
Date: 07-01-99 14:21:27
Subject: @{b}Re: C Newbie@{ub}

From: Ben Hutchings <womble@zzumbouk.demon.co.uk>

On Thu, Jul 01, 1999 at 03:43:54PM +0200, Jesper Svennevid wrote:
<snip>
> (quote)
> "The choice of which compiler to go for is, as with all software,
> dependent on your own needs and pocket. Hisoft C++ is an excellent
> choice for beginners because of its superb GUI and online help
> system.
<snip>

Isn't Hisoft C++ a rebranded Maxon C++?

-- 
Ben Hutchings - womble@zzumbouk.demon.co.uk, http://www.zzumbouk.demon.co.uk
Team *AMIGA* | Jay Miner Society | Linux - the choice of a GNU generation
For every action, there is an equal and opposite criticism. - Harrison

@ENDNODE
@NODE "Mail_41" " Re: C Newbie "
From: Jesper Svennevid <jesper@fxrealm.com>
Date: 07-01-99 14:32:07
Subject: @{b}Re: C Newbie@{ub}

From: "Jesper Svennevid" <jesper@fxrealm.com>

> From: Ben Hutchings <womble@zzumbouk.demon.co.uk>
> 
> On Thu, Jul 01, 1999 at 03:43:54PM +0200, Jesper Svennevid wrote:
> <snip>
> > (quote)
> > "The choice of which compiler to go for is, as with all software,
> > dependent on your own needs and pocket. Hisoft C++ is an excellent
> > choice for beginners because of its superb GUI and online help
> > system.
> <snip>
> 
> Isn't Hisoft C++ a rebranded Maxon C++?

It sure is, and that's stated in the article. (They also mention that
StormC also seems to be based on Maxon C++, I don't know anything
about that though :)

-- 
// Jesper Svennevid : jesper@fxrealm.com
   Software Developer At FXRealm Studios : http://www.fxrealm.com/ 

@ENDNODE
@NODE "Mail_42" " Re: C Newbie "
From: Ben Hutchings <womble@zzumbouk.demon.co.uk>
Date: 07-01-99 14:45:45
Subject: @{b}Re: C Newbie@{ub}

From: Ben Hutchings <womble@zzumbouk.demon.co.uk>

On Thu, Jul 01, 1999 at 04:32:07PM +0200, Jesper Svennevid wrote:
> From: "Jesper Svennevid" <jesper@fxrealm.com>
> 
> > From: Ben Hutchings <womble@zzumbouk.demon.co.uk>
> > 
> > On Thu, Jul 01, 1999 at 03:43:54PM +0200, Jesper Svennevid wrote:
> > <snip>
> > > (quote)
> > > "The choice of which compiler to go for is, as with all software,
> > > dependent on your own needs and pocket. Hisoft C++ is an excellent
> > > choice for beginners because of its superb GUI and online help
> > > system.
> > <snip>
> > 
> > Isn't Hisoft C++ a rebranded Maxon C++?
> 
> It sure is, and that's stated in the article. (They also mention that
> StormC also seems to be based on Maxon C++, I don't know anything
> about that though :)

Maxon C++ has a reputation in comp.sys.amiga.programmer for producing
not only very poor but incorrect object code for quite simple sources.
For example, something like:

    void example(void)
    {
        char test[256][3] = {0};
        /* and some real code here */
    }

resulted in something like:

        clr.b   (4,a7)
        clr.b   (5,a7)
        clr.b   (6,a7)
        clr.b   (8,a7)
        clr.b   (9,a7)
        clr.b   (10,a7)
        ...

because the code generator incorrectly applied the structure size
alignment rule to the `inner array' type of char[3].

-- 
Ben Hutchings - womble@zzumbouk.demon.co.uk, http://www.zzumbouk.demon.co.uk
Team *AMIGA* | Jay Miner Society | Linux - the choice of a GNU generation
For every action, there is an equal and opposite criticism. - Harrison

@ENDNODE
@NODE "Mail_43" " Re: C Newbie "
From: Mike Carter <mike.carter@bigfoot.com>
Date: 07-13-99 19:04:17
Subject: @{b}Re: C Newbie@{ub}

From: "Mike Carter" <mike.carter@bigfoot.com>

Re: [amiga-c] C Newbie interested me.  Here's some more to think about...

> From: Allan Odgaard <Duff@DIKU.DK>
> 
> On 30-Jun-99, Jake Frederick wrote:
> 
> > [...] Which C compilers are most recommended? I
> > would like to keep my spending to a minimum so I was thrilled when I saw the
> > new AF rated the freeware VBCC higher than the commercial compilers.
> 
> If you don't want to spend any money, and can live without a neat IDE then VBCC
> will probably do just fine.

Don't get excited or anything but I'm just starting a project to fill
the IDE gap for VBCC (and maybe other compilers).  MUI based.

And I'll be pickin' your brains Allan for help too :-)

Dinky do,



Mike C.

-- 
-------------------------------------------------------------
PROJECT STATUS...
Key To Driving Theory [#####################] done!
Scalos add-ons suite  [#########------------] usable now
<unamed> mp3 player   [####-----------------] skins & gadgets
-------------------------------------------------------------
JOIN UP TODAY -> http://www.onelist.com/subscribe.cgi/amiga-c

@ENDNODE
@NODE "Mail_44" " Re: C Newbie "
From: Mike Carter <mike.carter@bigfoot.com>
Date: 07-13-99 19:08:29
Subject: @{b}Re: C Newbie@{ub}

From: "Mike Carter" <mike.carter@bigfoot.com>

Re: [amiga-c] C Newbie interested me.  Here's some more to think about...

> Isn't Hisoft C++ a rebranded Maxon C++?

And I thought it was out of development now????

Dinky do,


Mike C.

-- 
-------------------------------------------------------------
PROJECT STATUS...
Key To Driving Theory [#####################] done!
Scalos add-ons suite  [#########------------] usable now
<unamed> mp3 player   [####-----------------] skins & gadgets
-------------------------------------------------------------
JOIN UP TODAY -> http://www.onelist.com/subscribe.cgi/amiga-c

@ENDNODE
@NODE "Mail_45" " Re: C Newbie "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 07-14-99 00:20:36
Subject: @{b}Re: C Newbie@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 13-Jul-99, Mike Carter wrote:

[...]
> Don't get excited or anything but I'm just starting a project to fill
> the IDE gap for VBCC (and maybe other compilers).  MUI based.

Since I've become so accustomed to C++ then I'd certainly prefer support for
GCC as well - even though I've never really used the compiler, but mainly
because I don't have the patience to read all the documentation required to
compile a simple Amiga program. Hopefully an IDE would change this... :-)

Regards Allan
-- 
     URL: http://www.DIKU.dk/students/duff/


@ENDNODE
@NODE "Mail_46" " Re: Re: C Newbie "
From: Mike Carter <mike.carter@bigfoot.com>
Date: 07-15-99 21:47:24
Subject: @{b}Re: Re: C Newbie@{ub}

From: "Mike Carter" <mike.carter@bigfoot.com>

[amiga-c] Re: C Newbie interested me.  Here's some more to think about...

> From: Allan Odgaard <Duff@DIKU.DK>
> 
> On 13-Jul-99, Mike Carter wrote:
> 
> [...]
> > Don't get excited or anything but I'm just starting a project to fill
> > the IDE gap for VBCC (and maybe other compilers).  MUI based.
> 
> Since I've become so accustomed to C++ then I'd certainly prefer support for
> GCC as well - even though I've never really used the compiler, but mainly
> because I don't have the patience to read all the documentation required to
> compile a simple Amiga program. Hopefully an IDE would change this... :-)

I would like to use GCC because of the C++ BUT I was under the
impression Amiga exes created need that stupid ixemul.library?  That's
as bad as Visual Basic DLLs although no way as big....

The idea of having the IDE install the compiler all neatly is what I'm
aiming at.  I'd like to concentrate on ONE C compiler though to make
it fit very closely into the IDE.  I liked VBCC because it had good
PPC support (which I own) and could compile for x86 too!

Dinky do,



Mike C.

-- 
-------------------------------------------------------------
PROJECT STATUS...
Key To Driving Theory [#####################] done!
Scalos add-ons suite  [#########------------] usable now
<unamed> mp3 player   [####-----------------] skins & gadgets
-------------------------------------------------------------
JOIN UP TODAY -> http://www.onelist.com/subscribe.cgi/amiga-c

@ENDNODE
@NODE "Mail_47" " Re: Re: C Newbie "
From: James S Perrin <j.perrin@mcc.ac.uk>
Date: 07-16-99 09:02:08
Subject: @{b}Re: Re: C Newbie@{ub}

From: James S Perrin <j.perrin@mcc.ac.uk>

Mike Carter wrote:

> I would like to use GCC because of the C++ BUT I was under the
> impression Amiga exes created need that stupid ixemul.library?  That's

You only require ixemul if compiling stuff written specifically for unix,
roughly if the source includes stuff like sys/*.h the functionally of which
ixemul supports. gcc uses ixemul by default but is easily turned off with
-noixemul in which case it uses the static link library libnix.

There are other problems of using GNU C++ on the amiga mainly the lack of
control register usage which makes using amiga shared libraries a
pain/impossible.

Regards
James
-- 
-----------------------------------------------------------------------------
James S. Perrin,                     | email: j.perrin@mcc.ac.uk
Manchester Visualization Centre,     | http://www.man.ac.uk/MVC/staff/perrin/
Manchester Computing, The University,| tel: +44 161 275 6945
Manchester, England. M13 9PL.        | fax: +44 161 275 6800/6040
-----------------------------------------------------------------------------
"The test of intellect is the refusal to belabor the obvious" - Alfred Bester
-----------------------------------------------------------------------------

@ENDNODE
@NODE "Mail_48" " Re: Re: C Newbie "
From: Ben Hutchings <womble@zzumbouk.demon.co.uk>
Date: 07-17-99 12:32:09
Subject: @{b}Re: Re: C Newbie@{ub}

From: Ben Hutchings <womble@zzumbouk.demon.co.uk>

On Fri, Jul 16, 1999 at 10:02:08AM +0100, James S Perrin wrote:
<snip>
> There are other problems of using GNU C++ on the amiga mainly the lack of
> control register usage which makes using amiga shared libraries a
> pain/impossible.

Can you elaborate on that?

-- 
Ben Hutchings - womble@zzumbouk.demon.co.uk, http://www.zzumbouk.demon.co.uk
Team *AMIGA* | Jay Miner Society | Linux - the choice of a GNU generation
Life is what happens to you while you're busy making other plans.
                                                               - John Lennon

@ENDNODE
@NODE "Mail_49" " Re: Re: C Newbie "
From: James S Perrin <j.perrin@mcc.ac.uk>
Date: 07-19-99 09:43:34
Subject: @{b}Re: Re: C Newbie@{ub}

From: James S Perrin <j.perrin@mcc.ac.uk>

Ben Hutchings wrote:
> 
> From: Ben Hutchings <womble@zzumbouk.demon.co.uk>
> 
> On Fri, Jul 16, 1999 at 10:02:08AM +0100, James S Perrin wrote:
> <snip>
> > There are other problems of using GNU C++ on the amiga mainly the lack of
> > control register usage which makes using amiga shared libraries a
> > pain/impossible.
> 
> Can you elaborate on that?

OK. though I'm not a GNU GURU :) So I appolgise for any inaccuracies

AS you may know amiga shared library functions are accessed in a rather
strange and none C like fashion. This being that the parameters are passed in
specific registers and not on the stack like regular function calls. All Amiga
comiplers have some way of handling this. GNU has particular difficulty
because it was ported from UNIX but the every clever Amigans have got it to
work.

GNU C uses "inline" headers generated for all shared libraries which contains
lots of techie stuff the get the values into the right registers. The main
tool is the GNU parameter "reg" iirc followed by the register name "a0,d2,f3
etc" which go in the function prototype.

For some (unknown) reason "reg" is not supported by GNU C++ and hence the
difficulty, if anyone can post further explanation I'll be greatful as well.
The amigos function do work though I think ?????

I came across this problem when trying to use stormMESA with C++ some time ago
though yesterday I hit on a possible solution though not particularly tidy.
Simply put all the library calls into C functions and then call these from the
C++ code for e.g the gears demo from MESA was rewritten as


gear.h

// ifdef needed to preserve C style function naming in object files 
#ifdef __cplusplus
extern "C" {
#endif

int gears(int argc, char **argv);

#ifdef __cplusplus
{
#endif



gears.c

// same as before except the main function is now called gears

int gears(int argc, char **argv)
{
......
 GL calls
......
}


run_gears.cxx

#include "gears.h"

int main(int argc, char **argv)
{
    gears(argc, argv);
    return 0;
}


compiled using the following

gcc -c gears.c
g++ -g run_gears.cxx

gcc -o run_gears run_gears.o gears.o -lgl

and yes it did work. Probably should try writing a class around the function
call as there is nothing C++ specific envolved. Anyone got any comments?

Regards
James

-- 
-----------------------------------------------------------------------------
James S. Perrin,                     | email: j.perrin@mcc.ac.uk
Manchester Visualization Centre,     | http://www.man.ac.uk/MVC/staff/perrin/
Manchester Computing, The University,| tel: +44 161 275 6945
Manchester, England. M13 9PL.        | fax: +44 161 275 6800/6040
-----------------------------------------------------------------------------
"The test of intellect is the refusal to belabor the obvious" - Alfred Bester
-----------------------------------------------------------------------------

@ENDNODE
@NODE "Mail_50" " Re: Re: C Newbie "
From: Ben Hutchings <womble@zzumbouk.demon.co.uk>
Date: 07-20-99 01:33:52
Subject: @{b}Re: Re: C Newbie@{ub}

From: Ben Hutchings <womble@zzumbouk.demon.co.uk>

On Mon, Jul 19, 1999 at 10:43:34AM +0100, James S Perrin wrote:
> From: James S Perrin <j.perrin@mcc.ac.uk>
> 
> Ben Hutchings wrote:
> > 
> > From: Ben Hutchings <womble@zzumbouk.demon.co.uk>
> > 
> > On Fri, Jul 16, 1999 at 10:02:08AM +0100, James S Perrin wrote:
> > <snip>
> > > There are other problems of using GNU C++ on the amiga mainly the lack of
> > > control register usage which makes using amiga shared libraries a
> > > pain/impossible.
> > 
> > Can you elaborate on that?
<snip> 
> GNU C uses "inline" headers generated for all shared libraries which contains
> lots of techie stuff the get the values into the right registers. The main
> tool is the GNU parameter "reg" iirc followed by the register name "a0,d2,f3
> etc" which go in the function prototype.
> 
> For some (unknown) reason "reg" is not supported by GNU C++ and hence the
> difficulty, if anyone can post further explanation I'll be greatful as well.
> The amigos function do work though I think ?????
<snip>

I think you are confused.  It is correct that he GNU C++ compiler
doesn't let you use register arguments for function prototypes.  The
reason for this is probably that it would further complicate overload
resolution.  However, there is nothing to stop you using inline
assembly code that puts things in the right registers.

The remaining problem with shared library calls is that the GNU C/C++
compiler isn't very good at juggling registers to put arguments in the
right places.  This is supposed to be fixed in the latest egcs, but
the Amiga patches haven't been merged with that yet.

-- 
Ben Hutchings - womble@zzumbouk.demon.co.uk, http://www.zzumbouk.demon.co.uk
Team *AMIGA* | Jay Miner Society | Linux - the choice of a GNU generation
You can't have everything.  Where would you put it?

@ENDNODE
@NODE "Mail_51" " Changing Progdir: "
From: Dominic Clifton <dominicc@barrysworld.co.uk>
Date: 07-01-99 16:23:03
Subject: @{b}Changing Progdir:@{ub}

From: Dominic Clifton <dominicc@barrysworld.co.uk>


Right, how can I change the path of progdir: for a program ?

can it be done like the task's window pointer ?

e.g.

say SYS:Utilites/MyProgram is started, if you opened a file called
Progdir:MyProgram.CFG the actual file would be SYS:Utilites/MyProgram.CFG

I want to change this so that when it opens "progdir:MyProgram.cfg" it
actually opens (say) "MyProgram:MyProgram.cfg" (i.e. the path is different)


The actual reason ?

Goes back to HydraBBS again,

the Node program has a library, one of the functions in that library
tells the node program (which as a progdir: of "HBBS:Doors/System/")
to display a screen to the user.

The important part here is that it *Tells* the node program, as opposed 
to the library function opening the file itself..

So, when the external account editor program (which has a Progdir: of 
"HBBS:Doors/User/AccountEdit/") calls the library function.

HBBS_DisplaySpecialScreen("Progdir:MyScreen.TXT")

The actual screen that is displayed (or would be if it existed) is:

HBBS:Doors/System/MyScreen.TXT

and not:

HBBS:Doors/User/AccountEdit/MyScreen.TXT


So what I want to do is this, before HydraBBS spawns the account editor, set
the progdir: of the Node program to the correct location!

OR

Have each external program call a library function (that's not executed
by the node program, but by the library) that tells the node program to
set it's progdir: accordingly.

And no, I can't move the function from the node program to the library!

Also, no, I can't parse the strings for progdir: and replace all occurences
with the actual directory of the external program.

Thanks for your help!

-- 

[Dominic Clifton - aka Hydra/CRoSS POiNT ]=-  -=[ Oh my god, it's an email]
[DreamCast, C++, DV, Sports Cars, Snowboarding, South Park, Placebo, Amiga]


@ENDNODE
@NODE "Mail_52" " Re: Changing Progdir: "
From: Olaf Barthel <olsen-amigac@sourcery.han.de>
Date: 07-01-99 18:34:51
Subject: @{b}Re: Changing Progdir:@{ub}

From: "Olaf Barthel" <olsen-amigac@sourcery.han.de>

On Jul 01 Dominic (Dominic Clifton) wrote:

> [..]
> So what I want to do is this, before HydraBBS spawns the account editor, set
> the progdir: of the Node program to the correct location!

   There is no easy way to preset the drawer bound to PROGDIR:. If you
resort to calling Execute(..) or System(..) to launch a program,
PROGDIR: will be automatically bound to the drawer the program was
loaded from. The Shell will implicitely do this for you and even
specifying NP_HomeDir on the tag item list won't help you, the tag
is dropped before the program is invoked. So, what's left? Implement
your own "Shell" by calling RunCommand(). Mind you, this is a really
complex task. There is some sample code on the Amiga Developer CD
in the Amiga Mail section ("Writing a UserShell").

-- 
Home: Olaf Barthel, Brabeckstrasse 35, D-30559 Hannover
 Net: olsen@sourcery.han.de (Home), olsen@logicalline.com (Work)

@ENDNODE
@NODE "Mail_53" " Re: Changing Progdir: "
From: Yves Grabowsky <YvesGrabowsky@t-online.de>
Date: 07-01-99 19:23:42
Subject: @{b}Re: Changing Progdir:@{ub}

From: YvesGrabowsky@t-online.de (Yves Grabowsky)

Hello Dominic,

On 01-Jul-99 wrote Dominic Clifton (dominicc@barrysworld.co.uk):
> From: Dominic Clifton <dominicc@barrysworld.co.uk>
> 
> 
> Right, how can I change the path of progdir: for a program ?
> 
> can it be done like the task's window pointer ?
> 
> e.g.
> 
> say SYS:Utilites/MyProgram is started, if you opened a file called
> Progdir:MyProgram.CFG the actual file would be SYS:Utilites/MyProgram.CFG
> 
> I want to change this so that when it opens "progdir:MyProgram.cfg" it
> actually opens (say) "MyProgram:MyProgram.cfg" (i.e. the path is
> different)
> 

Ever tried it with dos.library/CurrentDir()? :-)

Cu,
-- 
Yves Grabowsky
*ICQ:* 18762984
<tsb>Author of AminetFTPMail, AminetGetFTP, AmiURLRequester and SeekHTTP
<sb>*http://members.tripod.com/~rexxmaster/*
<sb>*http://www.iceman.nu/rexxmaster/*
<tsb>AMIGA rulez!


@ENDNODE
@NODE "Mail_54" " Chunky Bitmap Transparency? "
From: petah@geek.rcc.se
Date: 07-05-99 00:03:18
Subject: @{b}Chunky Bitmap Transparency?@{ub}

From: petah@geek.rcc.se

 Hi list,

 my question concerns a fast, reliable way of writing a routine that will copy a source bitmap
on top of a destination bitmap with color entry 0 being "transparent", eg. not copied at all.
Consider this:

 * Both source and destination bitmaps are "chunky", Picasso96 bitmaps.
 * When I copy the source on top of the destination, every color expect color 0 should be copied
   making color 0 "transparent".
 * Only 'C' language and AmigaOS calls are allowed.

 Of course, I could easily write a routine scanning the source bitmap pixel by pixel and just
omitting FALSE (= color entry 0) pixeldata, but this seems to be quite an overkill. I'm hoping
that there are a lot faster, and perhaps even easier ways I have yet to come up with to deal with
this.

 Well guys, now you know the problem. Any takers?

 Kind regards,
  Peter Eriksson - Sweden

@ENDNODE
@NODE "Mail_55" " Re: Chunky Bitmap Transparency? "
From: Steffen <steffen.mars@stenloese.mail.telia.com>
Date: 07-05-99 01:59:42
Subject: @{b}Re: Chunky Bitmap Transparency?@{ub}

From: Steffen <steffen.mars@stenloese.mail.telia.com>

On 05-Jul-99, petah@geek.rcc.se claimed:
>From: petah@geek.rcc.se

> Hi list,

> my question concerns a fast, reliable way of writing a routine that will
copy
>a source bitmap
>on top of a destination bitmap with color entry 0 being "transparent", eg.
not
>copied at all.
>Consider this:

> * Both source and destination bitmaps are "chunky", Picasso96 bitmaps.
> * When I copy the source on top of the destination, every color expect color
>0 should be copied
>   making color 0 "transparent".
> * Only 'C' language and AmigaOS calls are allowed.

> Of course, I could easily write a routine scanning the source bitmap pixel
by
>pixel and just
>omitting FALSE (= color entry 0) pixeldata, but this seems to be quite an
>overkill. I'm hoping
>that there are a lot faster, and perhaps even easier ways I have yet to come
>up with to deal with
>this.

> Well guys, now you know the problem. Any takers?

It seems the 'chunky-map' is not very suitable for that operation.
You could create a compressed format of the chunky-map:
1 Byte:
bit 7: Zeros/chunks
bit 0-6: Count
If zeros (bit 7 set), bits 0-6 represents the number of subsequent
transparent pixels. The destination position could be moved a similar
amount (it will skip the zeros).
If chunks (bit 7 unset), bits 0-6 represents the number of subsequent
chunks. The following values represents the chunks to be copied.
The process is repeated.
Depending on the type of graphics, this would be faster because:
- It is compressed, so there is less bytes to read from ram, reducing
probable bottleneck.
- Your program 'knows' where the zeros are, so it can skip those
areas.

You could even take advantage of this format, allowing color 0 to be
non-transparent, but that is another story.
If your source is a raster this would not be efficient however, as the
transparency would be scattered, but this could be done with another,
much simpler format.

> Kind regards,
>  Peter Eriksson - Sweden


@ENDNODE
@NODE "Mail_56" " Re: Chunky Bitmap Transparency? "
From: Peter Eriksson <petah@geek.rcc.se>
Date: 07-05-99 06:41:39
Subject: @{b}Re: Chunky Bitmap Transparency?@{ub}

From: Peter Eriksson <petah@geek.rcc.se>

	Hey Steffen / list,

 Thank you for your suggestion (in short, Steffen said that bit 7 could be
used to set transparency for bits 0 thru 6). However, I fail to see what
is so great about bit 7? Why can't I acheive the very same result using
bit 0?

 The reason for me asking is that the graphics data used is already set.
Color entry 0 has to be the transparent color and that is unfortunatly non
negotionable.

 Steffen, do you (or someother on this list) have any further suggestions
(please read the first e-mail on this thread to get all the details
regarding this matter)? Any help (and code snippets :) are much
appreciated!

	Kind regards,
	 Peter

--
                      [ tall enough to catch the stars ]


@ENDNODE
@NODE "Mail_57" " Re: Chunky Bitmap Transparency? "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 07-05-99 16:50:39
Subject: @{b}Re: Chunky Bitmap Transparency?@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 05-Jul-99, petah@geek.rcc.se wrote:

> my question concerns a fast, reliable way of writing a routine that will
> copy a source bitmap on top of a destination bitmap with color entry 0 being
> "transparent", eg. not copied at all. Consider this:

There is BltMaskBitMapRastPort() -- blit from source bitmap to destination
rastport with masking of source image.

The best way to generate a mask depends on how you "obtain" the bitmap, and
what you know about it.

Regards Allan
-- 
     URL: http://www.DIKU.dk/students/duff/
<sb>
Common sense is the collection of prejudices acquired by age eighteen.
-- Albert Einstein


@ENDNODE
@NODE "Mail_58" " Re: Chunky Bitmap Transparency? "
From: Steffen <steffen.mars@stenloese.mail.telia.com>
Date: 07-05-99 18:35:20
Subject: @{b}Re: Chunky Bitmap Transparency?@{ub}

From: Steffen <steffen.mars@stenloese.mail.telia.com>

On 05-Jul-99, Peter Eriksson claimed:
>From: Peter Eriksson <petah@geek.rcc.se>

>Hey Steffen / list,

> Thank you for your suggestion (in short, Steffen said that bit 7 could be
>used to set transparency for bits 0 thru 6). However, I fail to see what
>is so great about bit 7? Why can't I acheive the very same result using
>bit 0?

It's easier to work with:
unsigned char  code;
unsigned char  count;
if (code&128)  Transparent(code&127);
count = code&127;

It would be more clear, if i used binary numbers for 128 and 127, but
i don't remember how its done :(
Otherwise, you would extract count with:
count = (code>>1)&127;
wich is slower.

> The reason for me asking is that the graphics data used is already set.
>Color entry 0 has to be the transparent color and that is unfortunatly non
>negotionable.
It's only a feature of the format, that you can use color 0 as
non-transparent. You don't have to.

>....

>Kind regards,
> Peter


@ENDNODE
@NODE "Mail_59" " Re: Chunky Bitmap Transparency? "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 07-05-99 18:51:20
Subject: @{b}Re: Chunky Bitmap Transparency?@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 05-Jul-99, Steffen wrote:

> [...]
> unsigned char  code;
> unsigned char  count;
> if (code&128)  Transparent(code&127);
> count = code&127;

So this mutated run-length decoding should be faster than letting the blitter
write out the bitmap with a mask? I think Peter should stay with the various
Bltxxx() functions in graphics library ;-)

Regards Allan
-- 
     URL: http://www.DIKU.dk/students/duff/
<sb>
Man will occasionally stumble over the truth, but most times he will pick
himself up and carry on...
-- Winston Churchill


@ENDNODE
@NODE "Mail_60" " Re: Chunky Bitmap Transparency? "
From: Peter Eriksson <petah@geek.rcc.se>
Date: 07-05-99 23:28:58
Subject: @{b}Re: Chunky Bitmap Transparency?@{ub}

From: Peter Eriksson <petah@geek.rcc.se>

	Hi Allan / list,

 [ Earlier parts of thread removed to save some bandwidth ]

> > unsigned char  code;
> > unsigned char  count;
> > if (code&128)  Transparent(code&127);
> > count = code&127;
> 
> So this mutated run-length decoding should be faster than letting the blitter
> write out the bitmap with a mask? I think Peter should stay with the various
> Bltxxx() functions in graphics library ;-)

 Heh. Well Allan, you might have a point here. :) Problem is the graphics
data I am using is chunky graphics and not planar. Are the Bltxxx()
functions of graphics.library still feasonable to use? I presume the
"masks" you are referring to are the "minterms" as described in the
RKRM:Libraries 3rd Ed page 596? Well, whoever wrote the (real brief)
description of the "minterm" variable must have been doped up good - it
doesn't make much sense (at least not to me, but that's a whole other
story) at all - it just adds more to the confusion than giving answers.

 So where am I getting at? Well, I think I've come to the point where I
can formulate my problem into a new set of statements:

 * Two bitmaps with chunky data. One has to be copied on top of the other.
 * Color #0 of the source bitmap is to be considered "transparent", eg.
   not be copied at all.
 * If possible, graphics.library calls are to be used.
 * Only 'C' language is allowed.

 Allan and Steffan, are you guys willing to take another shot at this hm,
delicious dilemma? I'm looking forward of hearing your comments.

	Kind regards,
	 Peter

--
This e-mail sent by petah@geek.rcc.se
"Where is Super Thief?"


@ENDNODE
@NODE "Mail_61" " Re: Chunky Bitmap Transparency? "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 07-06-99 02:32:22
Subject: @{b}Re: Chunky Bitmap Transparency?@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 06-Jul-99, Peter Eriksson wrote:

> [...]
> Heh. Well Allan, you might have a point here. :) Problem is the graphics
> data I am using is chunky graphics and not planar. Are the Bltxxx()
> functions of graphics.library still feasonable to use?

The blitter functions in graphics library will only work on bitmaps. But if you
have an RTG system installed (like P96, which you mentioned yourself) then
these bitmaps can contain chunky data, and the system will use the blitter on
your graphics card, if it can deal with such.

> I presume the "masks" you are referring to are the "minterms" as
> described in the [...]

No - I'm refering to the mask which must be given as argument to
BltMaskBitMapRastPort(). This is a single bitplane that describes the
transparent areas of your bitmap. I.e. those pixels which shouldn't be copied.

> So where am I getting at? Well, I think I've come to the point where I
> can formulate my problem into a new set of statements:

I think it'd be easier if you told us exactly what it is you are doing (or
wants to do) e.g. how do you obtain the bitmaps? Do you ever want them to be
displayed on screen etc.

For example if you have the bitmaps in plain chunky data, and never want to
display them, then I think merging them with the processor is the fastest. But
if you have loaded both images with datatypes, and want to store one on top of
the other, in your about window, then you definitely don't want to mess with
the image data yourself.

Regards Allan
-- 
     URL: http://www.DIKU.dk/students/duff/
<sb>
Whenever you find that you are on the side of the majority, it is time to
reform.
-- Mark Twain


@ENDNODE
@NODE "Mail_62" " Re: Chunky Bitmap Transparency? "
From: Steffen <steffen.mars@stenloese.mail.telia.com>
Date: 07-06-99 06:15:24
Subject: @{b}Re: Chunky Bitmap Transparency?@{ub}

From: Steffen <steffen.mars@stenloese.mail.telia.com>

On 05-Jul-99, Allan Odgaard claimed:
>From: Allan Odgaard <Duff@DIKU.DK>

>On 05-Jul-99, Steffen wrote:

>> [...]
>> unsigned char  code;
>> unsigned char  count;
>> if (code&128)  Transparent(code&127);
>> count = code&127;

>So this mutated run-length decoding should be faster than letting the blitter
>write out the bitmap with a mask? I think Peter should stay with the various
>Bltxxx() functions in graphics library ;-)

As i pointed out, it depends on the type of graphics.
And yes, in some cases, this would be faster, as you map out the
areas that are transparent, and those that are not. I.e. if you encouter
16 transparent pixels this would be done either with:
if (code&128) destination+=code&127;

or:
{
if (*source) *destination=*source;
destination++;source++;
}
Wich will be performed 16 times. Now which is fastest ?

Even the non-transparent areas will be faster, as you don't have to
keep checking if the pixel is transparent or not, because you have
allready done that (by compressing). You would do a:
while (count--) *(destination++)=*(source++);

Instead of a:
{
if (*source) *destination=*source;
destination++;source++;
}

Because you would check a register, and decrement : while (count--)
Instead of checking a (slow?) memory address      : if (*source)
It's faster...

But, on the other hand; if there is a system call to do the trick, it
would be more compatible, which is in the end, of greater importance.
But if you want speed and you have non-animated (image doesn't change)
graphics, the 'mutated run-length' is fastest, and uses less memory
(wich allso makes it faster).

>Regards Allan

:Q


@ENDNODE
@NODE "Mail_63" " Re: Chunky Bitmap Transparency? "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 07-06-99 09:05:02
Subject: @{b}Re: Chunky Bitmap Transparency?@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 06-Jul-99, Steffen wrote:

> [...]
> And yes, in some cases, this would be faster, as you map out the
> areas that are transparent, and those that are not. [...]

With AGA's blitter then the logical (memory) operation that Peter wants to
perform (new_bmp = (bmp1 & mask) | (bmp2 & !mask)) can be done in one step,
parallel to the cpu. Which is often to prefer. Most modern blitters (found on
our gfx cards) are not as flexible as the AGA blitter, but they are many times
faster, so even if it has to create the new bitmap in 3 steps, then it's still
likely to beat your cpu function. Of course this assumption only holds if the
bitmaps are stored in memory that the blitter can access.

Regards Allan
-- 
     URL: http://www.DIKU.dk/students/duff/
<sb>
I have made this letter longer than usual because I lack the time to make it
shorter.
-- Blaise Pascal


@ENDNODE
@NODE "Mail_64" " Re: Chunky Bitmap Transparency? "
From: Peter Eriksson <petah@geek.rcc.se>
Date: 07-06-99 10:56:20
Subject: @{b}Re: Chunky Bitmap Transparency?@{ub}

From: Peter Eriksson <petah@geek.rcc.se>

	Hey Allan / list,

 [ old parts of thread in parts removed ]

> I think it'd be easier if you told us exactly what it is you are doing (or
> wants to do) e.g. how do you obtain the bitmaps? Do you ever want them to be
> displayed on screen etc.

 Alright, here goes. This is supposed to be a game, top down 2D
perspective. My program actually only holds one big bitmap, allocated
like this (error checking omitted in this code snippet):

 tilesBitMap = p96AllocBitMap(8960, 16, 8, BMF_CLEAR, NULL, RGBFB_CLUT);

This data is displayed using a custom written function:

// paintGfx() - paints a 16*16 graphicstile to screen
void paintGfx(UWORD gfxID, WORD destX, WORD destY)
{
 BltBitMapRastPort(tilesBitMap, gfxID * 16, 0, &(p96Screen->RastPort), destX, destY, 16, 16, 0x90)
}

 So far so good - this works like a charm. Right now, I first call 
paintGfx() "x * y times" to draw all the visible graphics. The idea is to
use a modified version of this call (something like "paintUpperGfx()") on
the very same space / dimensions to draw all the graphics residing on top
of the "original" graphics drawn by paintGfx().

 Eventually, I'll also implement some kind of double buffering to keep all
the animations smooth.

 Allan / list - any thoughts on what this "paintUpperGfx()" function
should look like? Right now, I'm only using one bitmap to save some memory
since every "graphics tile" used can be painted as both "lower" and
"upper". Should I create an additional _bitplane_ as well, telling what
pixels are "solid" and "transparent"? Or are you suggesting something
different? (And, as always - code snippets are highly appreciated! :)

	Kind regards,
	 Peter

--
                      [ tall enough to catch the stars ]


@ENDNODE
@NODE "Mail_65" " Re: Chunky Bitmap Transparency? "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 07-09-99 15:21:54
Subject: @{b}Re: Chunky Bitmap Transparency?@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 06-Jul-99, Peter Eriksson wrote:

>> [...]
> [...] Right now, I first call  paintGfx() "x * y times" to draw all the
> visible graphics.

Are all tiles identical? If so, then you may save a lot of time by re-using
what's already blitted on to the screen. I.e. giving you an exponential
growing src-size. This is probably best achieved using DoHookClipRects().

> The idea is to use a modified version of this call (something like
> "paintUpperGfx()") on
> the very same space / dimensions to draw all the graphics residing on top
> of the "original" graphics drawn by paintGfx().

> [...] Should I create an additional _bitplane_ as well, telling what
> pixels are "solid" and "transparent"? Or are you suggesting something
> different? (And, as always - code snippets are highly appreciated! :)

I'd go for the extra bitplane and then use BltMaskBitMapRastPort() in
paintUpperGfx().

Regards Allan
-- 
     URL: http://www.DIKU.dk/students/duff/
<sb>
It is actually very difficult for most people to understand how critical the
difference is between "doing it right" and "getting it done".
-- Allan Havemose


@ENDNODE
@NODE "Mail_66" " Re: Chunky Bitmap Transparency? "
From: Peter Eriksson <petah@geek.rcc.se>
Date: 07-09-99 23:29:22
Subject: @{b}Re: Chunky Bitmap Transparency?@{ub}

From: Peter Eriksson <petah@geek.rcc.se>

	Hi Allan / list,

> Are all tiles identical? If so, then you may save a lot of time by re-using
> what's already blitted on to the screen. I.e. giving you an exponential
> growing src-size. This is probably best achieved using DoHookClipRects().

 Thanks for the idea, but as every tile is unique this approach is no
good. However, I'll look into this solution for future concepts.

> I'd go for the extra bitplane and then use BltMaskBitMapRastPort() in
> paintUpperGfx().

 Alright - I believe this concludes this thread as well? In summary: if
you want to blit graphics onto existing graphics and have one color stand
out as "transparant" (in this case, palette entry #0), you should call
BltMaskBitMapRastPort().

 Allan - thank you very much for your assistance, I'll look into this as
soon as I get the chance. One last question - would you consider this to
be a fast, quick operation or is there much to be gained from "low level"
optimizations (read as: MC680x0 assembly)? Would this suggestion be fast
enough for well, say a 50 FPS 2D shoot em' up game with a zillion objects
being blitted, all with "transparency masks"?

	Kind regards,
	 Peter

--
                      [ tall enough to catch the stars ]


@ENDNODE
@NODE "Mail_67" " Re: Chunky Bitmap Transparency? "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 07-10-99 10:23:19
Subject: @{b}Re: Chunky Bitmap Transparency?@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 10-Jul-99, Peter Eriksson wrote:

> Thanks for the idea, but as every tile is unique [...]

OK - I didn't see the tile bitmap given as argument, which is why I thought it
might have been the same...

> [...] One last question - would you consider this to
> be a fast, quick operation or is there much to be gained from "low level"
> optimizations (read as: MC680x0 assembly)?

I don't think I'm qualified to answer this, but I can give it a try - if
someone else knows about this issue then please don't hesitate to correct my
errors!

It may be faster to use assembly on systems with a fast processor and a slow
blitter. But these could run the CPUBlit-patch, so I wouldn't go through the
trouble - and as it seems you're targeted at P96 then your users should have a
gfx card.

I'm not exactly sure how P96 implements BltMaskBitMapRastPort() because the
mask is AFAIK often in chipmem - which would mean it'd first have to be copied
to the gfx cards memory, and then used.
If this is the case, then you might improve the speed by using a real bitmap,
as transparency mask, and do the masking-operation yourself, using the proper
minterm value. OTOH minterms are for the AGA blitter, so if P96 cannot setup
the gfx cards blitter to do the operation then it'll fall back on the cpu,
which is very slow.

Regards Allan
-- 
     URL: http://www.DIKU.dk/students/duff/
<sb>
I have made this letter longer than usual because I lack the time to make it
shorter.
-- Blaise Pascal


@ENDNODE
@NODE "Mail_68" " Re: Declaring auto variables "
From: John Niclasen <Niclasen@bigfoot.com>
Date: 07-01-99 11:52:20
Subject: @{b}Re: Declaring auto variables@{ub}

From: John Niclasen <Niclasen@bigfoot.com>

On 30-Jun-99, Allan Odgaard wrote:
> On 30-Jun-99, Tim Hanson wrote:
> 
>> [...] I wonder how often this will be outweighed by the
>> extra LINK-UNLNKing that will be done.
> 
> It will only create one link/unlink pair. The compilers
> advantage of having variables declared only when they're
> actually used is so that variables which doesn't overlap
> (i.e. isn't active at the same time) can share the same
> register. This is not that easy to spot, if you start
> your function by declaring and initializing all
> variables.

Hmmm interesting! Never thought about that. I like some of
my code optimized for speed. I'm wondering, how effective
my SAS/C compiler is on this subject.

> Generally a function shouldn't exceed a page, but if it

Yes, no need to complicate things more than necessary.
Remember the old K.I.S.S.! Keep It Stupid Simple! (Can't
be said loud enough these days.)

But! One thing that pulls the other way is speed. The
smaller functions the more calls. And with every call,
there is some push and pop on the stack.

Bye
John Niclasen.


@ENDNODE
@NODE "Mail_69" " Re: Declaring auto variables "
From: Tim Corringham <tim@ramjam.u-net.com>
Date: 07-01-99 12:37:40
Subject: @{b}Re: Declaring auto variables@{ub}

From: tim@ramjam.u-net.com (Tim Corringham)

Hi John

> > It will only create one link/unlink pair. The compilers
> > advantage of having variables declared only when they're
> > actually used is so that variables which doesn't overlap
> > (i.e. isn't active at the same time) can share the same
> > register. This is not that easy to spot, if you start
> > your function by declaring and initializing all
> > variables.
>
> Hmmm interesting! Never thought about that. I like some of
> my code optimized for speed. I'm wondering, how effective
> my SAS/C compiler is on this subject.
>
> > Generally a function shouldn't exceed a page, but if it
>
> Yes, no need to complicate things more than necessary.
> Remember the old K.I.S.S.! Keep It Stupid Simple! (Can't
> be said loud enough these days.)
>
> But! One thing that pulls the other way is speed. The
> smaller functions the more calls. And with every call,
> there is some push and pop on the stack.

Not necessarily.

Many compilers will in-line small functions (i.e. it treats them
like macros), and other functions may be "statically incorporated"
(which means that their stack use is lifted to the caller's stack,
which means that there is no push/pop when calling that function).
There are lots of techniques used by compilers to improve efficiency,
and radically different techniques may be used in subtly different
circumstances.

I'd advise you not to worry about what the compiler does behind the
scenes. Write good algorithms, and let the compiler writers worry
about converting that to good machine code.

  Tim

--
======================================================================
Tim Corringham                            e-mail: tim@ramjam.u-net.com
Ramjam Consultants Ltd                       tel:  +44 (0)118 946 5940
Reading, England                             fax:  +44 (0)118 946 5941




@ENDNODE
@NODE "Mail_70" " DICE C "
From: Mark Gerics <mgerics@gfn.org>
Date: 07-10-99 14:03:31
Subject: @{b}DICE C@{ub}

From: Mark Gerics <mgerics@gfn.org>

Recently downloaded DICE, installed it - looks great! But...whenver I
compile anything, successfully or not, if I try to recompile, I get an
error message stating that vmake is an unrecognized command, and I cannot
re-compile anything until I reboot. Suggestions?
-- 
Always remember that you are unique.  Just like everyone else.

Amigafied and proud of it.


@ENDNODE
@NODE "Mail_71" " Digest Number 96 "
From: Rod_MacLean@uk.ibm.com
Date: 07-26-99 08:30:55
Subject: @{b}Digest Number 96@{ub}

From: Rod_MacLean@uk.ibm.com




JSteic1957@aol.com wrote:

> Does anyone know why or what I should do with the WINMAIL.DAT
> sections I receive from this mailing list?  Here is an example:
>
> begin 600 WINMAIL.DAT
> M[snip]
> end

It looks a bit like some uuencoded data - its very small though!

I can't check this but UUDECODE should turn it into a file called
WINMAIL.DAT.

     Rod

--
Rod MacLean - IT Specialist
L2L, IBM Perth (tel 01738 894135)
IEA GBIB1S3U @ IBMMAIL    (rod_maclean@uk.ibm.com)



@ENDNODE
@NODE "Mail_72" " Drawing images on Intution "
From: Darryl Hartwig <darrylh@powerup.com.au>
Date: 07-31-99 04:38:05
Subject: @{b}Drawing images on Intution@{ub}

From: Darryl Hartwig <darrylh@powerup.com.au>

Hello peoples,

Question:  I want to 'animate' an image across a window from
one position to another without 'overwriting' anything
underneath (sort of like moving an icon around the screen).
 Currently, I've been saving the graphics under the new
position of my image by ClipBlit() to another buffer
window, then drawing my image by DrawImage(), then
replacing the lost image by ClipBlit(), then moving on to
the next position and repeating the process.

Is there another way without having to save the current
image under the new position that I want to place my image?
 Like, how does a paint program handle brushes?

I also have eight colour images (3 planes deep).  However,
when I open my window on WB screen and display my images,
the colours are all wrong.

I've had a look at GetColorMap(), ObtainBestPen(),
ObtainPen(), LoadRGB32CM() and so on.  Some of the routines
talk about a Viewport - is this hooked up to a window
somehow?  And what combination of routines can I use to set
up the colours I want?

I found that the Viewport is hooked up to a screen - so I
can find that.

-- 
Seeya
<tsb>
<sb>Darryl Hartwig
<sb>Buccan, QLD
<sb>BTW, the Amiga is back for the future!
<sb>Member of USANA
<tsb>


@ENDNODE
@NODE "Mail_73" " Re: Drawing images on Intution "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 07-31-99 08:51:04
Subject: @{b}Re: Drawing images on Intution@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 31-Jul-99, Darryl Hartwig wrote:

> [...]
> Is there another way without having to save the current
> image under the new position that I want to place my image?

If you cannot reconstruct the background, then you must take a copy.
But have in mind that with simple-refresh windows then you're not really
guaranteed to actually get the background image, if the window is covered...

How is your background generated?

> And what combination of routines can I use to set
> up the colours I want?

Unless you're opening on a custom screen, then you should remap your image to
the screen colours, rather than changing them. The easy way is simply to save
your image to disk, e.g. in IFF/ILBM, and load it with datatypes, asking for
remapping. This will also apply dither to your image if the user has a V43+
picture.datatype.

If you don't want to do this, then use ObtainBestPen() to 'allocate' colours,
and remap to this, either by shufling around the bitplans, or have the image
in a chunky format, and use something like WritePixelArray8() to transfer it
to a bitmap.

> I found that the Viewport is hooked up to a screen - so I
> can find that.

And that's the one you want to use :-)

Regards Allan
-- 
     URL: http://www.DIKU.dk/students/duff/
<sb>
It is better to have tried and failed than to have failed to try, but the
result's the same.
-- Mike Dennison


@ENDNODE
@NODE "Mail_74" " Re: Drawing images on Intution "
From: Jens Granseuer <jensgr@gmx.net>
Date: 07-31-99 21:52:27
Subject: @{b}Re: Drawing images on Intution@{ub}

From: Jens Granseuer <jensgr@gmx.net>

Darryl Hartwig wrote:
> 
>  Currently, I've been saving the graphics under the new
> position of my image by ClipBlit() to another buffer
> window, then drawing my image by DrawImage(), then
> replacing the lost image by ClipBlit(), then moving on to
> the next position and repeating the process.
> 
> Is there another way without having to save the current
> image under the new position that I want to place my image?

The method I've been using for this problem is BltBitMap()/
BltBitMapRastPort(). I'd expect that those graphics.library
functions are lower level than Intuition and therefore work
slightly faster, though that's only a guess. And of course
you might get problems with overlapping windows and such...

Regards,
Jens


@ENDNODE
@NODE "Mail_75" " Enforcer hit using feof() "
From: Gabriele Svelto <jlpicard@tiscalinet.it>
Date: 07-26-99 08:51:27
Subject: @{b}Enforcer hit using feof()@{ub}

From: Gabriele Svelto <jlpicard@tiscalinet.it>

 Hello everybody,

I recently coded a program using this loop at some point:

while (!feof(finput))
{
    mem->inbuff = fgets(mem->inbuff, ANSI_LINE_L, finput);
    (void) puts(mem->inbuff);
}

Ignore the code inside (it works prefectly), the problem is that actually
when feof() returns EOF (i.e. end of file reached) I get the following
Enforcer hit:

26-Lug-99  09:48:14
BYTE-READ from 00000000                        PC: 4765547C
USP:  476CB090 SR: 0014 SW: 0521  (U0)(-)(-)  TCB: 47603308
Name: "Shell Process"  CLI: "Flowpp"  Hunk 0000 Offset 00001174 

I really cannot understand why I get such an hit, I first compiled the
program with vbcc and then with Dice but kept getting always the same hit.
If anybody has got an idea on how to fix I'll be grateful to hear it.


@ENDNODE
@NODE "Mail_76" " Re: Enforcer hit using feof() "
From: Tim Corringham <tim@ramjam.u-net.com>
Date: 07-26-99 10:50:57
Subject: @{b}Re: Enforcer hit using feof()@{ub}

From: tim@ramjam.u-net.com (Tim Corringham)

Hi Gabriele

> I recently coded a program using this loop at some point:
>
> while (!feof(finput))
> {
>     mem->inbuff = fgets(mem->inbuff, ANSI_LINE_L, finput);
>     (void) puts(mem->inbuff);
> }
>
> Ignore the code inside (it works prefectly), the problem is that actually
> when feof() returns EOF (i.e. end of file reached) I get the following

No, it is the code inside the loop that is wrong.

Imagine you are approaching the end of a file, you have one more line
to go

feof() returns false because the EOF flag isn't set yet.
fgets() reads the last line, and returns a pointer to your buffer
puts() outputs that line.

feof() returns false because the EOF flag still isn't set (there are
no more charcters in the file, but no attempt to read them has been made yet).
fgets() returns null because there are no more characters - the EOF flag
is now set.
puts() attempts to output the string from a null pointer -> Enforcer hit!

Pesonally, I'd recode it as:

while (fgets(mem->inbuff, ANSI_LINE_L, finput))
   puts(mem->inbuff);

That avoids the problem, as the loop terminates as soon as fgets() can't
read any more lines.

Hope this helps,

  Tim

--
======================================================================
Tim Corringham                            e-mail: tim@ramjam.u-net.com
Ramjam Consultants Ltd                       tel:  +44 (0)118 946 5940
Reading, England                             fax:  +44 (0)118 946 5941





@ENDNODE
@NODE "Mail_77" " Re: Enforcer hit using feof() "
From: Mike Carter <mike.carter@bigfoot.com>
Date: 07-26-99 20:29:05
Subject: @{b}Re: Enforcer hit using feof()@{ub}

From: Mike Carter <mike.carter@bigfoot.com>

Hi Tim thanks for your mail that I got on 26-Jul-99

>  Tim
> 
> --
> ======================================================================
> Tim Corringham e-mail: tim@ramjam.u-net.com Ramjam
> Consultants Ltd tel: +44 (0)118 946 5940 Reading,
> England fax: +44 (0)118 946 5941

I didn't realise it was you who I pre-ordered PFS3 from
at WoA on saturday! :)  And your on my mailing list ;)

Dinky do,

Mike Carter.

-- 

.--------------------------------- ---- -    -- --------.
| AMiGA 1200EZT 060/PPC@240Mhz,50Mb RAM __/\__          |
| 4 HDD,DD FD,5 CD-ROMS,CDrW,ZiP250     \ o0 / bUDDa/S^D|
| SCSI+IDE,56kModem,BVGfX,19"VDU        /_'-_\          |
`------------------------------- --- -    \/   -- ------'
  http://fly.to/BuddasWurld               ICQ: 29173597


@ENDNODE
@NODE "Mail_78" " Re: Enforcer hit using feof() "
From: Gabriele Svelto <jlpicard@tiscalinet.it>
Date: 07-27-99 11:31:08
Subject: @{b}Re: Enforcer hit using feof()@{ub}

From: Gabriele Svelto <jlpicard@tiscalinet.it>

Hi Tim.

> From: tim@ramjam.u-net.com (Tim Corringham)
> 
> Hi Gabriele
> 
>> I recently coded a program using this loop at some point:
>> 
>> while (!feof(finput))
>> {
>>     mem->inbuff = fgets(mem->inbuff, ANSI_LINE_L, finput);
>>     (void) puts(mem->inbuff);
>> }
>> 
>> Ignore the code inside (it works prefectly), the problem is that
>> actually
>> when feof() returns EOF (i.e. end of file reached) I get the following
> 
> No, it is the code inside the loop that is wrong.
> 
> Imagine you are approaching the end of a file, you have one more line
> to go
> 
> feof() returns false because the EOF flag isn't set yet.
> fgets() reads the last line, and returns a pointer to your buffer
> puts() outputs that line.
> 
> feof() returns false because the EOF flag still isn't set (there are no
> more charcters in the file, but no attempt to read them has been made
> yet). fgets() returns null because there are no more characters - the EOF
> flag is now set.
> puts() attempts to output the string from a null pointer -> Enforcer hit!
> 
> Pesonally, I'd recode it as:
> 
> while (fgets(mem->inbuff, ANSI_LINE_L, finput))
>   puts(mem->inbuff);
> 
> That avoids the problem, as the loop terminates as soon as fgets() can't
> read any more lines.
> 
> Hope this helps,
> 
>  Tim

Thanks Tim! I didn't know that the EOF flag was set only after a failed
attempt to read data, you helped me a lot 'cos I had another program giving
some problems for the same reason, thank you!


@ENDNODE
@NODE "Mail_79" " Re: Enforcer hit using feof() "
From: Tim Corringham <tim@ramjam.u-net.com>
Date: 07-28-99 12:27:56
Subject: @{b}Re: Enforcer hit using feof()@{ub}

From: tim@ramjam.u-net.com (Tim Corringham)

Hi Mike

> I didn't realise it was you who I pre-ordered PFS3 from
> at WoA on saturday! :)  And your on my mailing list ;)
>
It wasn't always until people left the stand that I looked at
the name and realised it was familar! I met loads of people
that I previously only knew as e-mail addresses - I'm not
sure I can remember exactly who was who though :-/

Regards,

  Tim

--
======================================================================
Tim Corringham                            e-mail: tim@ramjam.u-net.com
Ramjam Consultants Ltd                       tel:  +44 (0)118 946 5940
Reading, England                             fax:  +44 (0)118 946 5941


@ENDNODE
@NODE "Mail_80" " Re: Re: Enforcer hit using feof() "
From: Tim Corringham <tim@ramjam.u-net.com>
Date: 07-28-99 12:27:59
Subject: @{b}Re: Re: Enforcer hit using feof()@{ub}

From: tim@ramjam.u-net.com (Tim Corringham)

Hi Gabriele

> Thanks Tim! I didn't know that the EOF flag was set only after a failed
> attempt to read data, you helped me a lot 'cos I had another program giving
> some problems for the same reason, thank you!

A lot of people get confused with this because Pascal does it differently
(it uses a 1 char look-ahead to detect EOF sooner).

  Tim

--
======================================================================
Tim Corringham                            e-mail: tim@ramjam.u-net.com
Ramjam Consultants Ltd                       tel:  +44 (0)118 946 5940
Reading, England                             fax:  +44 (0)118 946 5941


@ENDNODE
@NODE "Mail_81" " Re: Enforcer hit using feof() "
From: Stephen Williams <sw@nysa.u-net.com>
Date: 07-31-99 09:37:38
Subject: @{b}Re: Enforcer hit using feof()@{ub}

From: Stephen Williams <sw@nysa.u-net.com>

Tim Corringham wrote:
> It wasn't always until people left the stand that I looked at
> the name and realised it was familar! I met loads of people
> that I previously only knew as e-mail addresses

I spoke to Ben Hutchings at WOA without realizing who it was :-)

Ben - I went to WOA with a friend, we were kinda lost coming out
of the Kensington tube station.  You seemed to know where you were
going, so we tagged along with you.  I was the short, geeky one in
the green shirt.  Remember?  Thought not.

-Stephen

-- 
[[ http://www.nysa.u-net.com/ ]]


@ENDNODE
@NODE "Mail_82" " Finding a beep in an audio signal (was FFT wanted) "
From: Fritsch Alexander <Alexander.Fritsch@icn.siemens.de>
Date: 07-29-99 16:39:27
Subject: @{b}Finding a beep in an audio signal (was FFT wanted)@{ub}

From: Fritsch Alexander <Alexander.Fritsch@icn.siemens.de>


Hi,
I found an FFT-function and I can now display the spectrum of my signal. But
I am not sure if a FFT is really the solution to my problem. Let me discribe
what I want to do.

I have an file with an audiosample, 8kHz, 16Bit, mono.
The sample contains a lot of noise and a telephone-number, lets say
1-2-3-3-1 in DTMF (multifrequency dailing). (This is not exactly my problem
but a good example)
A program should simple print out the numbers.

Is FFT the right algorithm here? Note that the signal may "jitter" (comes
from audio-tape) and has some noise, so timing would not be exact and
accuracy-dependent algorithms would not be a good solution...

What about "cross correlation"?


Any ideas?
Kind regards Alexander Fritsch

@ENDNODE
@NODE "Mail_83" " Re: Finding a beep in an audio signal (was FFT wanted) "
From: Gurer Ozen <palpa@garanti.net.tr>
Date: 07-29-99 19:17:22
Subject: @{b}Re: Finding a beep in an audio signal (was FFT wanted)@{ub}

From: Gurer Ozen <palpa@garanti.net.tr>

Hello Fritsch,

FA-> Is FFT the right algorithm here? Note that the signal may "jitter" (comes
FA-> from audio-tape) and has some noise, so timing would not be exact and
FA-> accuracy-dependent algorithms would not be a good solution...

FFT only converts time-domain data to frequency-domain data.
It cant be the main algoritm for noisy signals. In my opinion the best
way of this is using a neural network. But you'll need to convert the data
with FFT anyway, because recognition algoritms work better on frequency
domain datas.

FA-> What about "cross correlation"?

it can be, but a neural network will be better.


-- 
Gurer Ozen (http://palpa.cjb.net)

Q: How many Bell Labs Vice Presidents does it take to change a light bulb?
A: That's proprietary information. Answer available from AT&T on payment
   of license fee (binary only).


@ENDNODE
@NODE "Mail_84" " Re: Finding the device that a volume is in "
From: Ben Hutchings <womble@zzumbouk.demon.co.uk>
Date: 07-11-99 01:51:08
Subject: @{b}Re: Finding the device that a volume is in@{ub}

From: Ben Hutchings <womble@zzumbouk.demon.co.uk>

On Fri, Jun 04, 1999 at 01:12:05AM +0100, I wrote:
> If I have a lock on a file (in my case it's actually the root
> directory), how do I find out which device (if any) the file's volume
> is currently in?  I can find the volume node, no problem.  I can find
> the handler's process.  I can't see how to find the device node.

Well, that was answered.

Next question: how do I lock a device node?

I mustn't keep a lock on the whole DOS list for long periods of time.
Also, to keep the DOS list locked reliably I must not allow task
switching (LockDosList calls Forbid; I just have to avoid waiting).  I
can lock a volume node - as long as I hold a lock on anything on that
volume, the volume can't go away.  How can I do the same for a device
node?  (Handlers can be killed, after all.)

Ben.

-- 
Ben Hutchings - womble@zzumbouk.demon.co.uk, http://www.zzumbouk.demon.co.uk
Team *AMIGA* | Jay Miner Society | Linux - the choice of a GNU generation
Absolutum obsoletum. (If it works, it's out of date.) - Stafford Beer

@ENDNODE
@NODE "Mail_85" " Geekgadget GCC and Powerup... "
From: Fabien <Fabien.Coeurjoly@wanadoo.fr>
Date: 07-26-99 12:51:14
Subject: @{b}Geekgadget GCC and Powerup...@{ub}

From: Fabien <Fabien.Coeurjoly@wanadoo.fr>

Hi,


Recently I tried to install a working development environment with
Geekgadget, so as to recompile Mame0.36...(well I love this emulator! ; ) )

So I encountered some problems, and It seems that the powerup part of my
installation doesn't work properly :
I can compile a "Hello world"  (great ;) ) , but powerup kernel specific
functions aren't recognised, 
So, i guess my includes aren't properly installed...
So if someone could explain me where geekgadgets expects powerup includes to
be...
BTW, I transfered my os-include in   my /gg/os-include drawer   ? am i right
?

One more question: 
I want to play a bit with CybergraphX but It seems a file is missing:
in the file os-include/inline/Cybergraphics.h, there's a reference to the
file incude  libraries/cybergraphics.h , which I don't have....
If someone has it can he send it please ?

Thanks

Please help me !!

-- 

A4000 CSPPC 060/604e@180MHZ , CVPPC , IOblix , HD 6,4Go , CD 24x , Modem 56k

Fabien.Coeurjoly@wanadoo.fr

--

"I've known fellers like that." --Fire Chief





@ENDNODE
@NODE "Mail_86" " Re: Geekgadget GCC and Powerup... "
From: Malek Bengougam <malek_b@hotmail.com>
Date: 07-26-99 13:53:25
Subject: @{b}Re: Geekgadget GCC and Powerup...@{ub}

From: "Malek Bengougam" <malek_b@hotmail.com>


>Hi,
>
Hi Fabien,

>Recently I tried to install a working development environment with
>Geekgadget, so as to recompile Mame0.36...(well I love this emulator! ; ) )

;)

>So I encountered some problems, and It seems that the powerup part of my
>installation doesn't work properly :
>I can compile a "Hello world"  (great ;) ) , but powerup kernel specific
>functions aren't recognised,
>So, i guess my includes aren't properly installed...
>So if someone could explain me where geekgadgets expects powerup includes 
>to
>be...
>BTW, I transfered my os-include in   my /gg/os-include drawer   ? am i 
>right
>?

Yes, each include related to OS-stuff should get here (including Powerup, 
PowerPC, Warp3D etc...dirs)...but sometimes Egcs searches through à /ade/ 
directory...
Just add -v option to see where egcs looks them for

>One more question:
>I want to play a bit with CybergraphX but It seems a file is missing:
>in the file os-include/inline/Cybergraphics.h, there's a reference to the
>file incude  libraries/cybergraphics.h , which I don't have....
>If someone has it can he send it please ?
>

euh...Sorry I'm not at home...but I'm not sure there is kinda include ...

>Thanks

Mais de rien ;)

bye.
Malek


@ENDNODE
@NODE "Mail_87" " help with GCC+ CGX ? "
From: Fabien <Fabien.Coeurjoly@wanadoo.fr>
Date: 07-27-99 10:49:13
Subject: @{b}help with GCC+ CGX ?@{ub}

From: Fabien <Fabien.Coeurjoly@wanadoo.fr>

Hi,

I have a little problem with GCC (Geekgadgets) with compiling CGX progs...
my  /include/inline/cybergraphics.h contains a reference to
/include/libraries/cybergraphics.h
And i don't have this file....and it's not in the official CGX4 (or even 2
or 3)  SDK....

So if someone has a working CGX SDK for GCC....I'd be very interested! 

Thanks!

-- 

A4000 CSPPC 060/604e@180MHZ , CVPPC , IOblix , HD 6,4Go , CD 24x , Modem 56k

Fabien.Coeurjoly@wanadoo.fr

--

OBGYN.ZIP - Doc file for WOMEN.ZIP





@ENDNODE
@NODE "Mail_88" " RE: help with GCC+ CGX ? "
From: Jesper Svennevid <jesper@fxrealm.com>
Date: 07-27-99 15:35:49
Subject: @{b}RE: help with GCC+ CGX ?@{ub}

From: "Jesper Svennevid" <jesper@fxrealm.com>




> -----Original Message-----
> From: Fabien [mailto:Fabien.Coeurjoly@wanadoo.fr]
> Sent: Tuesday, July 27, 1999 12:49 PM
> To: amiga-c@onelist.com
> Subject: [amiga-c] help with GCC+ CGX ?
>
>
> From: Fabien <Fabien.Coeurjoly@wanadoo.fr>
>
> Hi,
>
> I have a little problem with GCC (Geekgadgets) with compiling CGX progs...
> my  /include/inline/cybergraphics.h contains a reference to
> /include/libraries/cybergraphics.h
> And i don't have this file....and it's not in the official CGX4 (or even 2
> or 3)  SDK....
>
> So if someone has a working CGX SDK for GCC....I'd be very interested!

Have a look at the utility 'fd2pragma', I think it can generate an
appropriate inline-file that can be used with GCC.

--
// Jesper Svennevid : jesper@fxrealm.com
   Software Developer At FXRealm Studios : http://www.fxrealm.com/



@ENDNODE
@NODE "Mail_89" " IPC Problems "
From: Jesper Svennevid <jesper@fxrealm.com>
Date: 07-26-99 16:16:47
Subject: @{b}IPC Problems@{ub}

From: "Jesper Svennevid" <jesper@fxrealm.com>

I'm working on a GetRight-clone for AmigaOS, and have struck
into some problems(For those who don't know, GetRight allows
you to resume downloads in both HTTP/FTP with a array of
nice features)...

The program is multithreaded, with a main-task managing the
MUI-GUI and creation/deletion of transfers. Each transfer
gets its own process, which manages the TCP/IP (as multithreaded
programs can't share SocketBase) and file I/O, and which
does IPC with the main-task for easy management. As long as
nothing goes wrong, every transfer responds very fast to a
request from the main-task as I use socket I/O that doesn't
that easily block up.

All IPC(Inter-Process Communication) is handled using signals,
semaphores and messages. 

The problem is this:

Every transfer-process is supposed to have two message-ports,
one for receiving commands, and one for sending reports of the
transfer to the main-task(The reports are used in the main-task
to update a lister containing all the transfers).

While the transfer is in progress I use WaitSelect() to both
wait for the socket to get data, and for these signals: the
command-port, SIGBREAKF_CTRL_C(for aborting the transfer) and
SIGBREAKF_CTRL_F.

HOWEVER, when I add the second message-port (the replyport for
sending reports), the process stops getting signals, so even
though I pass it a SIGBREAKF_CTRL_C-signal to tell it to stop
downloading, it never reaches the innerloop and the process
happily continues to download the file until it has finished,
while the main-task goes into a loop(a delay-loop that waits
for the transfer in question to clean up and exit is). When I
don't allocate the second message-port the process responds
to all signals it waits for.

All message-ports are allocated using CreateMsgPort(), so they
get signals assigned to them w/o problems, and I do error-
checking all the way(as it's a multithreading program, doing
sloppy error-checking just gets messy when you get a bug :),
and none of the allocations fail.

I have thought of one solution until now, and that is to scrap
the command-port, use SIGBREAKF_CTRL_E to notify the process
that there is a message waiting in the transfer-structure and
wait until the process has checked it. Then I can use the
port allocated for commands as a reply-port for the reports.
It's a nasty solution,and I don't want to do that as a message-
port is SO much more flexible. (Signals can conflict, whilst
a message-port queues the requests) It would also break the
abstraction-layer I've put up between the processes.

Example-code of the innerloop: (this is not how it really
looks, I'm typing from memory, but it should show how it
operates)

unsigned char data_buffer[4096];
BPTR pFile;
Transfer* p_transfer;
long sock;

time_t timer_count;
time_t timer_temp;

struct MsgPort* p_msgport;
struct MsgPort* p_refreshport;

RefreshMessage rfmsg;
int rf_sent = FALSE;

ULONG osigs = (1<<(p_msgport -> mp_SigBit))|SIGBREAKF_CTRL_C|
			SIGBREAKF_CTRL_F;

// this works just fine
p_msgport = CreateMsgPort();

// when this is performed, it stops responding to signals
p_refreshport = CreateMsgPort();

// send and process http-requests

sock = HTTP_resume(p_transfer);
if(-1 == sock)
 running = FALSE;

while(FALSE != running)
{
   int ret = 0;
   ULONG sigs = osigs;
   timeval_t tv;

   FD_ZERO(&rdfs);
   FD_SET(sock,&rdfs);

   // not 100% sure if this timeout is correct w/o looking
   // at the source

   tv.tv_sec = 10;
   tv.tv_usec = 0;

   // wait for input, errors and signals (or time out)

   ret = WaitSelect(sock+1,&rdfs,NULL,NULL,&tv,&sigs);

   if(0>ret)
   {
      // socket error

      Printf("Socket error.\n");
      running = FALSE;
   }
   else if(0==ret)
   {
      // timeout or signals

      if(0L == sigs)
      {
         Printf("Connection timed out.\n");
         running = FALSE;
      }
      else
      {
         if(sigs&SIGBREAKF_CTRL_C)
         {
            // user clicked 'Pause'

            Printf("Transfer break.\n");
            running = FALSE;
         }
         if(sigs&(1<<(p_msgport -> mp_SigBit)))
         {
            TransferMessage* msg;

            // process commands

            while(NULL != (msg=(TransferMessage*)GetMsg(p_msgport)))
            {
               ReplyMsg(msg);
            }
         }
      }
   }
   else
   {
      // data is ready

      if(FALSE != FD_ISSET(sock,&rdfs))
      {
         ULONG r_size;

         // read in blocks of 4kB (Should be replaced with
         // a query of the maximum data a recv() handles)

         r_size = p_transfer -> FullSize-
                  p_transfer -> CurrSize;
         r_size = (r_size<4096)?r_size:4096;

         // shouldn't really be MSG_WAITALL,
         // but I'm lazy right now :P

         if(0L != (r_size=recv(sock,data_buffer,
            r_size,MSG_WAITALL)))
         {
            Write(pFile,data_buffer,r_size);
            p_transfer -> CurrSize += r_size;

            if(p_transfer -> FullSize <=
               p_transfer -> CurrSize)
            {
               Printf("Transfer finished.\n");
               running = FALSE;
            }

            // semaphore is locked when program is reporting
            // and when a transfer is about to be aborted (so
            // we don't get run-away messages) .. this might
            // be a problem when more than one transfer is
            // in progress (some might not get a chance to
            // report), but I'll leave it to this right now

            if(FALSE != AttemptSemaphore(&gRefreshSemaphore))
		{
               // only refresh when 1+ second has passed
               // to avoid transfer slowdown because of
               // GUI refreshes

               timer_temp = time(NULL);
               if(timer_temp>timer_count)
               {
                  timer_count = timer_temp;

                  // this should be moved out to the signal-
                  // handler as soon as the IPC-issue is
                  // solved to reduce overhead

                  if(FALSE != rf_sent)
                  {
                     struct Message* msg;
                     msg = GetMsg(p_refreshport);
                     if(msg == (struct Message*)&rfmsg)
                        rf_sent = FALSE;
                  }

                  if(FALSE == rf_sent)
                  {
                     rfmsg.ExecMessage.mp_ReplyPort =
                        p_refreshport;
                     rfmsg.ExecMessage.mp_Length =
                        sizeof(RefreshMessage);
                     rfmsg.Entry = p_transfer;

                     // this is the only real part
                     // that needs semaphore-locking,
                     // so the time-critical part
                     // could be reduced

                     PutMsg(gpRefreshPort,&rfmsg);
                     rf_sent = TRUE;
                  }
               }

               ReleaseSemaphore(&gRefreshSemaphore);	
            }
         }
         else
         {
            // connection closed

            Printf("Connection closed by remote host.\n");
            running = FALSE;
         }
      }
   }
}

I'm reserving myself for any bugs in this source, it has NOT been
tested(and as it's incomplete, it won't even compile), and any
non-IPC bugs are irrelevant, those are not the issue here.

-- 
// Jesper Svennevid : jesper@fxrealm.com
   Software Developer At FXRealm Studios : http://www.fxrealm.com/


@ENDNODE
@NODE "Mail_90" " libiff.a? "
From: Bablos <bablos@cableinet.co.uk>
Date: 07-30-99 22:48:34
Subject: @{b}libiff.a?@{ub}

From: Bablos <bablos@cableinet.co.uk>

Hi There...

I need the file libiff.a in order to compile a project under GCC.  I can't
find it anywhere, and I'm not sure what to do in order to convert
iff.lib to libiff.a.

Can anyone help?


Bablos.


@ENDNODE
@NODE "Mail_91" " Re: libiff.a? "
From: Stephen Williams <sw@nysa.u-net.com>
Date: 07-31-99 09:33:33
Subject: @{b}Re: libiff.a?@{ub}

From: Stephen Williams <sw@nysa.u-net.com>

Bablos wrote:
> I need the file libiff.a in order to compile a project under GCC.  I can't
> find it anywhere, and I'm not sure what to do in order to convert
> iff.lib to libiff.a.

If you are using a recent version of egcs with a recent linker (ld),
you'll be able to use iff.lib.  Recent ports of the linker accept
object code in Amiga hunk format as well as a.out format.  I've linked
output from PhxAss (in hunk format) with output from egcs/gas (in
a.out format) using a recent ld.  Worked fine, no problems at all.

Not exactly the correct answer to your question, but I hope it's of
some help.

-Stephen

-- 
[[ http://www.nysa.u-net.com/ ]]


@ENDNODE
@NODE "Mail_92" " Re: Re: libiff.a? "
From: Bablos <bablos@cableinet.co.uk>
Date: 07-31-99 15:10:26
Subject: @{b}Re: Re: libiff.a?@{ub}

From: Bablos <bablos@cableinet.co.uk>

On 31-Jul-99, Stephen Williams spewed forth the following...
>From: Stephen Williams <sw@nysa.u-net.com>

>Bablos wrote:
>> I need the file libiff.a in order to compile a project under GCC.  I
>can't
>> find it anywhere, and I'm not sure what to do in order to convert
>> iff.lib to libiff.a.

>If you are using a recent version of egcs with a recent linker (ld),
>you'll be able to use iff.lib.  Recent ports of the linker accept
>object code in Amiga hunk format as well as a.out format.  I've linked
>output from PhxAss (in hunk format) with output from egcs/gas (in
>a.out format) using a recent ld.  Worked fine, no problems at all.

>Not exactly the correct answer to your question, but I hope it's of
>some help.

How do I specify this in the makefile for the project, and where should
I store the .lib file?  I've got a basic understanding of how SAS/C
works regarding this, but I haven't a clue with GCC!

Hope someone can help.


Bablos.


@ENDNODE
@NODE "Mail_93" " Mastering minterms (was: Chunky Bitmap Transparency?) "
From: Peter Eriksson <petah@geek.rcc.se>
Date: 07-10-99 18:00:43
Subject: @{b}Mastering minterms (was: Chunky Bitmap Transparency?)@{ub}

From: Peter Eriksson <petah@geek.rcc.se>

	Hi Allan / list,

 [ ... ]

> I'm not exactly sure how P96 implements BltMaskBitMapRastPort() because the
> mask is AFAIK often in chipmem - which would mean it'd first have to be copied
> to the gfx cards memory, and then used.
> If this is the case, then you might improve the speed by using a real bitmap,
> as transparency mask, and do the masking-operation yourself, using the proper
> minterm value. OTOH minterms are for the AGA blitter, so if P96 cannot setup
> the gfx cards blitter to do the operation then it'll fall back on the cpu,
> which is very slow.

 (just for the record, here's an extract from RKRM:Libraries page 598:
"The bltmask argument points to a word-aligned mask bitplane in Chip
memory with the same dimensions as the source bitmap.")

 Well, this was the approach I was first thinking of. However, mastering
the concept of "minterm" values isn't exactly like a walk in the park -
more like a dash in Jurassic Park. Why? Well Allan (and the rest of you
guys) - go get your copy of RKRM:Libraries and turn to page 596. The
author in question has dedicated about half a page of describing this
variable. Well, "describing" is hardly not the right word. I have never
built a "minterm" value myself and after having read page 596, I doubt I
ever will - I have read this over and over again and I still cannot grasp
how to deal with "minterm" variables.

 Now, I do have two bitmaps - one source, and one destination meaning
functions such as BltBitMapRastPort() would probably be well suitable if I
only knew how to "copy all chunky pixels that are TRUE but not any chunky
pixel that is FALSE" (chunky color entry 0 = FALSE = "transparent"). As
(most of) graphics.library is targetted towards planar graphics and not
chunky graphics, is it at all possible to use "minterm" variables? (The
RKRM:Libraries 3rd edition was written before third party hardware made
chunky graphics possible on Amiga systems, hence adding to the confusion).

 Well Allan - are you still following me or are you as lost as I am? :)

	Kind regards,
	 Peter



@ENDNODE
@NODE "Mail_94" " Re: Mastering minterms (was: Chunky Bitmap Transparency?) "
From: Peter Eriksson <petah@geek.rcc.se>
Date: 07-10-99 20:54:07
Subject: @{b}Re: Mastering minterms (was: Chunky Bitmap Transparency?)@{ub}

From: Peter Eriksson <petah@geek.rcc.se>

	Heya Olaf / list,

 [ Possible to use minterms for chunky graphics' transparency? ]

>    Yes, it's possible, but you will need several passes and temporary
> bitmaps.

 First of all, I'd like to say thanks for sorting the out the minterms.
Although I'm still confused, at least now I'm on a higher level. :) I'll
look into it more thoroughly when time permits me to. However, I get the
impression that minterms aren't the ideal solution here. What I'm looking
for is a fairly fast way of blitting (or copying) graphics on top of
existing graphics (in a RastPort), omitting a certain color to achieve
what you could call a "transparecy effect". Olaf, you are suggesting that
if this is to be done using minterms, then there would be an entire series
of calls involved while Allan claims that one BltMaskBitMapRastPort()
should do the trick. On the other hand, now I hear that this function
could blow my application to orbit because of (sigh) - bugs no one has
taken care of.

 Looks like I'm back to square one - I still have no idea what the best,
fastest and easiest AmigaOS powered way of getting blitted/copied
transparency is. Although the BltMaskBitMapRastPort() varient may be
tricky to implement, it seems as if it is the fastest way or am I totally
out of line? Olaf, I'm not aware that you have written and fast paced
games for AmigaOS (which is a real shame because I am confident that such
an attempt would make people laugh at the Quake 3 engine :) but if you
would and you were facing the same problem I am facing, what approach
would you go for? (Anyone of you dragging the old EGS RTG system into this
mess is 0xdead 0xbeef. That's a promise :)

	Kind regards,
	 Peter

--
                      [ tall enough to catch the stars ]


@ENDNODE
@NODE "Mail_95" " Re: Mastering minterms (was: Chunky Bitmap Transparency?) "
From: Olaf Barthel <olsen-amigac@sourcery.han.de>
Date: 07-10-99 21:44:27
Subject: @{b}Re: Mastering minterms (was: Chunky Bitmap Transparency?)@{ub}

From: "Olaf Barthel" <olsen-amigac@sourcery.han.de>

On Jul 10 Peter (Peter Eriksson) wrote:

> From: Peter Eriksson <petah@geek.rcc.se>
> 
> 	Hi Allan / list,
> 
>  [ ... ]
> 
> > I'm not exactly sure how P96 implements BltMaskBitMapRastPort() because the
> > mask is AFAIK often in chipmem - which would mean it'd first have to be copied
> > to the gfx cards memory, and then used.
> > If this is the case, then you might improve the speed by using a real bitmap,
> > as transparency mask, and do the masking-operation yourself, using the proper
> > minterm value. OTOH minterms are for the AGA blitter, so if P96 cannot setup
> > the gfx cards blitter to do the operation then it'll fall back on the cpu,
> > which is very slow.
> 
>  (just for the record, here's an extract from RKRM:Libraries page 598:
> "The bltmask argument points to a word-aligned mask bitplane in Chip
> memory with the same dimensions as the source bitmap.")

   Oh dear, building a working blit mask has its pitfalls, especially
if one of the bitmaps involved in a BltMaskBitMapRastPort() call is
of the interleaved type. That's when a bug in graphics.library will
rear its ugly head.

>  Well, this was the approach I was first thinking of. However, mastering
> the concept of "minterm" values isn't exactly like a walk in the park -
> more like a dash in Jurassic Park. Why? Well Allan (and the rest of you
> guys) - go get your copy of RKRM:Libraries and turn to page 596. The
> author in question has dedicated about half a page of describing this
> variable. Well, "describing" is hardly not the right word. I have never
> built a "minterm" value myself and after having read page 596, I doubt I
> ever will - I have read this over and over again and I still cannot grasp
> how to deal with "minterm" variables.

   "minterm", or rather "miniterm" is a common concept in a strain
of computer science whose name escapes me at the moment. Some people
use Venn diagrams to calculate miniterms, others jut down a table of
boolean values and their combinations, set up a disjunctive normal
form and factor it out. That's what I do. It goes like this:

You set up a table that describes how each bit set in the source and
the destination bitmap and how the combined result would look like.
Here is such a table for copying the source to the destination:

   B|C|D
   -+-+-
   0|0|0
   0|1|0
   1|0|1
   1|1|1

In this table B and C are the two sources available in BltBitMap(),
D is the result. With BltBitMap() B corresponds to the "source"
bitmap and C to the "destination" bitmap. Now look at the table:
the important lines are those that yield a result of 1, in this
case the last two. Now you need to turn these lines into a
disjunctive normal form. These consist of a list of terms,
OR'ed together, like this: (u AND v) OR ((NOT w) AND x) OR ...
Looking at the table above, it would yield the following
combination of terms: (B AND (NOT C)) OR (B AND C). This term
only yields TRUE if B=1 and C=0 or B=1 and C=1, as seen in the
last two lines of the table. Now there's a problem: the Amiga
blitter uses three sources A, B and C. We've got to add
source A to the terms. For example, if you had the term
(B AND C) you would replace it with two new terms:
(A AND B AND C) OR ((NOT A) AND B AND C). That way, regardless
of the value A has, the term would still yield the same result.
To spell it out:

    (B AND (NOT C)) OR (B AND C)

  = (     A  AND B AND (NOT C)) OR
    ((NOT A) AND B AND (NOT C)) OR
    (B AND C)

  = (     A  AND B AND (NOT C)) OR
    ((NOT A) AND B AND (NOT C)) OR
    (     A  AND B AND C) OR
    ((NOT A) AND B AND C)

And this finally yields the minterm combinations we need for the blitter.
The terms are defined in <hardware/blit.h>. For example, the constant
NABC corresponds to the term (NOT A) AND B AND C. Putting it all
together, the final minterm is:

   ABNC | NABNC | ABC | NABC = 0xCC

There are only 16 possible, working combinations of terms for two
blitter sources. I'm surprised nobody has documented them all.

>  Now, I do have two bitmaps - one source, and one destination meaning
> functions such as BltBitMapRastPort() would probably be well suitable if I
> only knew how to "copy all chunky pixels that are TRUE but not any chunky
> pixel that is FALSE" (chunky color entry 0 = FALSE = "transparent"). As
> (most of) graphics.library is targetted towards planar graphics and not
> chunky graphics, is it at all possible to use "minterm" variables?

   Yes, it's possible, but you will need several passes and temporary
bitmaps.

> (The
> RKRM:Libraries 3rd edition was written before third party hardware made
> chunky graphics possible on Amiga systems, hence adding to the confusion).

   Don't worry, all Amiga RTG systems will let you use blitter operating
system calls with chunky bitmaps. It would be pretty pointless if they
didn't ;)

-- 
Home: Olaf Barthel, Brabeckstrasse 35, D-30559 Hannover
 Net: olsen@sourcery.han.de (Home), olsen@logicalline.com (Work)

@ENDNODE
@NODE "Mail_96" " Re: Mastering minterms (was: Chunky Bitmap Transparency?) "
From: Ben Hutchings <womble@zzumbouk.demon.co.uk>
Date: 07-11-99 00:34:52
Subject: @{b}Re: Mastering minterms (was: Chunky Bitmap Transparency?)@{ub}

From: Ben Hutchings <womble@zzumbouk.demon.co.uk>

On Sat, Jul 10, 1999 at 08:00:43PM +0200, Peter Eriksson wrote:
> From: Peter Eriksson <petah@geek.rcc.se>
> 
> 	Hi Allan / list,
> 
>  [ ... ]
> 
> > I'm not exactly sure how P96 implements BltMaskBitMapRastPort() because the
> > mask is AFAIK often in chipmem - which would mean it'd first have to be copied
> > to the gfx cards memory, and then used.
> > If this is the case, then you might improve the speed by using a real bitmap,
> > as transparency mask, and do the masking-operation yourself, using the proper
> > minterm value. OTOH minterms are for the AGA blitter, so if P96 cannot setup
> > the gfx cards blitter to do the operation then it'll fall back on the cpu,
> > which is very slow.
> 
>  (just for the record, here's an extract from RKRM:Libraries page 598:
> "The bltmask argument points to a word-aligned mask bitplane in Chip
> memory with the same dimensions as the source bitmap.")
> 
>  Well, this was the approach I was first thinking of. However, mastering
> the concept of "minterm" values isn't exactly like a walk in the park -
> more like a dash in Jurassic Park. Why? Well Allan (and the rest of you
> guys) - go get your copy of RKRM:Libraries and turn to page 596. The
> author in question has dedicated about half a page of describing this
> variable. Well, "describing" is hardly not the right word. I have never
> built a "minterm" value myself and after having read page 596, I doubt I
> ever will - I have read this over and over again and I still cannot grasp
> how to deal with "minterm" variables.
<snip>

Minterms are easy.  Let me see if I can explain them briefly.

The minterm specifies a `blitter function', a logical function that
the blitter should use to combine its three inputs.  Why three?  These
are a mask, your source data, and the old destination data.  The Amiga
blitter operates on whole words (16 bits), which means that a mask and
two shift values are required to allow blitting to and from arbitrary
offsets within words.  For some functions, you specify the source and
the destination, and graphics.library sets up the rest for you.  For
others you specify mask data as well.

You can work out blitter functions by filling out complete truth
tables for the functions:

A B C | D(estination)
------+--
1 1 1 | h
1 1 0 | g
1 0 1 | f
1 0 0 | e
0 1 1 | d
0 1 0 | c
0 0 1 | b
0 0 0 | a

The minterm can be found by reading the bits down the last column; so
that in binary it is hgfedcba.  If you don't supply a mask then set
the last four values to 0; graphics.library will set them for you
(I think).

Example 1 - copying source to the destination:

You don't care what the old destination data is.  You want to set
D equal to B, i.e.:

B | D
--+--
1 | 1
0 | 0

If you write this out in full:

A B C | D
------+--
1 1 1 | 1
1 1 0 | 1
1 0 1 | 0
1 0 0 | 0
0 1 1 | 0
0 1 0 | 0
0 0 1 | 0
0 0 0 | 0

(remember, you're not using a mask).  This is where the `magic number'
0xC0 comes from.  Can you work out what minterms to use to perform a
logical AND on the destination?  For a logical OR?

Example 2 - cookie cut:

This is what you use for `software sprites' - you have a mask that
specifies transparency for your source data.  Where the mask is set to
1, you want the old destination data to show through; where it is set
to 0 you want to write your source data over it - i.e.:

A B C | D
------+--
1 X 1 | 1
1 X 0 | 0
0 1 X | 1
0 0 X | 0

In full:

A B C | D
------+--
1 1 1 | 1
1 1 0 | 0
1 0 1 | 1
1 0 0 | 0
0 1 1 | 1
0 1 0 | 1
0 0 1 | 0
0 0 0 | 0

Hence the cookie-cut minterm of $AC.

This is explained much more fully in the Hardware Reference Manual.

The CyberGraphX and Picasso 96 systems only implement some blitter
functions, and I don't know where they document *which* are
implemented.

-- 
Ben Hutchings - womble@zzumbouk.demon.co.uk, http://www.zzumbouk.demon.co.uk
Team *AMIGA* | Jay Miner Society | Linux - the choice of a GNU generation
Absolutum obsoletum. (If it works, it's out of date.) - Stafford Beer

@ENDNODE
@NODE "Mail_97" " Re: Mastering minterms (was: Chunky Bitmap Transparency?) "
From: Olaf Barthel <olsen-amigac@sourcery.han.de>
Date: 07-11-99 21:40:17
Subject: @{b}Re: Mastering minterms (was: Chunky Bitmap Transparency?)@{ub}

From: "Olaf Barthel" <olsen-amigac@sourcery.han.de>

On Jul 10 Peter (Peter Eriksson) wrote:

> From: Peter Eriksson <petah@geek.rcc.se>
> 
> 	Heya Olaf / list,
> 
>  [ Possible to use minterms for chunky graphics' transparency? ]
> 
> >    Yes, it's possible, but you will need several passes and temporary
> > bitmaps.
> 
>  First of all, I'd like to say thanks for sorting the out the minterms.
> Although I'm still confused, at least now I'm on a higher level. :) I'll
> look into it more thoroughly when time permits me to. However, I get the
> impression that minterms aren't the ideal solution here. What I'm looking
> for is a fairly fast way of blitting (or copying) graphics on top of
> existing graphics (in a RastPort), omitting a certain color to achieve
> what you could call a "transparecy effect". Olaf, you are suggesting that
> if this is to be done using minterms, then there would be an entire series
> of calls involved while Allan claims that one BltMaskBitMapRastPort()
> should do the trick. On the other hand, now I hear that this function
> could blow my application to orbit because of (sigh) - bugs no one has
> taken care of.

   Well... it might not crash, but the results may be unexpected due to
"interpretation" details concerning the size of the blit mask.

>  Looks like I'm back to square one - I still have no idea what the best,
> fastest and easiest AmigaOS powered way of getting blitted/copied
> transparency is. Although the BltMaskBitMapRastPort() varient may be
> tricky to implement, it seems as if it is the fastest way or am I totally
> out of line?

   Actually, you could write your own code for this purpose which could
be faster than BltMaskBitMapRastPort(). Internally, BltMaskBitMapRastPort()
does *three* blitter passes, but it is somewhat inefficient at setting up
its auxilary data and may get the size of the blit mask wrong. Sure,
it's portable, but it may not be "fast".

> Olaf, I'm not aware that you have written and fast paced
> games for AmigaOS (which is a real shame because I am confident that such
> an attempt would make people laugh at the Quake 3 engine :) but if you
> would and you were facing the same problem I am facing, what approach
> would you go for? (Anyone of you dragging the old EGS RTG system into this
> mess is 0xdead 0xbeef. That's a promise :)

   Lock the chunky bitmap, then hit the memory directly and as hard
as it gets using your very own algorithm, then unlock the bitmap again.
CyberGraphX/Picasso96 have primitives for that particular purpose.
Of course, this approach is not available for the Amiga custom chip
set. But with its planar architecture you'd be targetting the wrong
type of hardware, but that's just my personal opinion.

@ENDNODE
@NODE "Mail_98" " Re: Mastering minterms (was: Chunky Bitmap Transparency?) "
From: Peter Eriksson <petah@geek.rcc.se>
Date: 07-12-99 08:29:51
Subject: @{b}Re: Mastering minterms (was: Chunky Bitmap Transparency?)@{ub}

From: Peter Eriksson <petah@geek.rcc.se>

	Hey Olaf / list,

 [ Forget about minterms, lock onto memory and do it yourself ]

> Of course, this approach is not available for the Amiga custom chip
> set. But with its planar architecture you'd be targetting the wrong
> type of hardware, but that's just my personal opinion.

 Well, I think this would conclude this thread once and for all. Now, as
far as the planar memory arrangement goes, I have given this some thought.
I see your point, and I do agree with you, especially considering that the
graphics to be used only consist of 16 colors in total. However, there's
more to it than just that - this application is being written for MSDOS as
well as AmigaOS so it is not only a matter of functionality but also
portability. Right now, I feel the most important thing is to have a
working, stable version but as soon as I have the time, I'll look into
some "OCS/ECS fallback code".

 Last, but certainly not least, I'd like to thank Allan, Ben and Olaf for
making all sorts of crazy suggestions :) and helping me out. Your efforts
are not forgotten.

	Kind regards,
	 Peter



@ENDNODE
@NODE "Mail_99" " Re: Max Size of a Pathname "
From: Mike Carter <mike.carter@bigfoot.com>
Date: 07-03-99 12:15:16
Subject: @{b}Re: Max Size of a Pathname@{ub}

From: "Mike Carter" <mike.carter@bigfoot.com>

Re: [amiga-c] Max Size of a Pathname interested me.  Here's some more to think about...

>         fileName=AllocVec(size,MEMF_ANY);  ?

What is the difference is AllocVec and AllocMem functions?  Should I
be using a specific one for general allocations of memory?  I'm using
KS3.1 and am only concerned that my code works on at least KS3.x

The autodocs only mention that AllocVec keeps track of my memory. 
What does this mean?

Dinky do,


Mike C.

-- 
-------------------------------------------------------------
PROJECT STATUS...
Key To Driving Theory [#####################] done!
Scalos add-ons suite  [#########------------] usable now
<unamed> mp3 player   [####-----------------] skins & gadgets
-------------------------------------------------------------
JOIN UP TODAY -> http://www.onelist.com/subscribe.cgi/amiga-c

@ENDNODE
@NODE "Mail_100" " Re: Max Size of a Pathname "
From: Mike Carter <mike.carter@bigfoot.com>
Date: 07-03-99 12:16:54
Subject: @{b}Re: Max Size of a Pathname@{ub}

From: "Mike Carter" <mike.carter@bigfoot.com>

Re: [amiga-c] Max Size of a Pathname interested me.  Here's some more to think about...

> >> FILENAME_MAX 64 is defined, but that's just the filename, not the
> >> full path.
> > 
> > Uh, where?  The maximum component length is 30 characters, but that's
> > not specified in any header AFAIK.
> 
> stdio.h
> 
> #define FILENAME_MAX  64        /* maximum filename length */

ah-ha!  I knew I'd seen it defined somewhere but when I asked on this
list later on nobody knew.

Dinky do,

Mike C.

-- 
-------------------------------------------------------------
PROJECT STATUS...
Key To Driving Theory [#####################] done!
Scalos add-ons suite  [#########------------] usable now
<unamed> mp3 player   [####-----------------] skins & gadgets
-------------------------------------------------------------
JOIN UP TODAY -> http://www.onelist.com/subscribe.cgi/amiga-c

@ENDNODE
@NODE "Mail_101" " Re: Max Size of a Pathname "
From: Stephen Williams <sw@nysa.u-net.com>
Date: 07-12-99 18:54:55
Subject: @{b}Re: Max Size of a Pathname@{ub}

From: Stephen Williams <sw@nysa.u-net.com>

Mike Carter wrote:
> What is the difference is AllocVec and AllocMem functions?  Should I
> be using a specific one for general allocations of memory?  I'm using
> KS3.1 and am only concerned that my code works on at least KS3.x

I'd use AllocVec() and FreeVec().  With AllocMem(), you have to
keep track of the size of your allocation as well as its address.
With AllocVec(), you only have to track the pointer.  In this
respect, it works like malloc() and free().

If you need to do several small allocations, you might want to
look into AllocPooled(), which (I think) allocates one big chunk
of memory and does small allocations from within it, thus reducing
the risk of fragmentation.

> The autodocs only mention that AllocVec keeps track of my memory. 
> What does this mean?

See above :-)

Look at the prototypes and autodocs for FreeMem() and FreeVec(), you'll
see an important difference.

-Stephen

-- 
[[ http://www.nysa.u-net.com/ ]]


@ENDNODE
@NODE "Mail_102" " Re: Max Size of a Pathname "
From: Rod Schnell <rodsch@telusplanet.net>
Date: 07-12-99 20:12:04
Subject: @{b}Re: Max Size of a Pathname@{ub}

From:	Rod Schnell <rodsch@telusplanet.net>

Hello Mike

On 03-Jul-99, Mike Carter wrote:
> From: "Mike Carter" <mike.carter@bigfoot.com>
> 
> Re: [amiga-c] Max Size of a Pathname interested me. Here's some more to
> think about...
> 
>>         fileName=AllocVec(size,MEMF_ANY);  ?
> 
> What is the difference is AllocVec and AllocMem functions?  Should I
> be using a specific one for general allocations of memory?  I'm using
> KS3.1 and am only concerned that my code works on at least KS3.x
> 
> The autodocs only mention that AllocVec keeps track of my memory. 
> What does this mean?

It means you don't have to give the size when you free it...

FreeVec(fileName);

It's probably better to use memory pool functions with 3.x though. Just make
sure you have SetPatch v40.16 or better installed, or use the libpooled
functions.

  Rod


@ENDNODE
@NODE "Mail_103" " Re: Max Size of a Pathname "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 07-12-99 20:53:27
Subject: @{b}Re: Max Size of a Pathname@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 12-Jul-99, Stephen Williams wrote:

> [...] AllocPooled(), which (I think) allocates one big chunk
> of memory and does small allocations from within it, thus reducing
> the risk of fragmentation.

And makes it twice as fast. Though freeing a lot of small allocations (using
pools) is slow. But with pools you have the ability to simply delete a pool,
which will then free all sub-allocations, and this takes close to no time.

Regards Allan
-- 
     URL: http://www.DIKU.dk/students/duff/


@ENDNODE
@NODE "Mail_104" " Re: Max Size of a Pathname "
From: Oliver Roberts <oliver.roberts@iname.com>
Date: 07-12-99 23:48:22
Subject: @{b}Re: Max Size of a Pathname@{ub}

From: "Oliver Roberts" <oliver.roberts@iname.com>

Hi Mike,

On 03-Jul-99 13:15:16 BST, Mike Carter wrote:

> What is the difference is AllocVec and AllocMem functions?  Should I
> be using a specific one for general allocations of memory?  I'm using
> KS3.1 and am only concerned that my code works on at least KS3.x
>
> The autodocs only mention that AllocVec keeps track of my memory. 
> What does this mean?

It means that it keeps track of the /size/ of the memory allocation.
Therefore, FreeVec() only takes a single parameter - the pointer to the
memory to be freed, whereas with FreeMem() you have to pass the correct
size to it too.  Alloc/FreeVec are similar to ANSI malloc/free.

Alloc/FreeVec are easier to use (unless you want your code to work on KS
1.x! These funcs were introduced for KS 2.x), because you don't need to
store the size of the allocation yourself for use with FreeMem() later.
In general, it makes no real difference which you use (AllocVec will
actually call AllocMem itself anyway).

However, it is now perhaps more common to use Exec's pooled memory
functions instead of AllocVec/Mem.  See CreatePool() and AllocPooled()
in the autodoc.  These were introduced in KS 3.x, although they will
work with earlier OS versions as long as you link with pools.lib.

-- 
 Oliver Roberts   /~\ ___(~)__ __  |~~~/~|          UIN: 34640231
  Norwich, UK    | o | ' |~/. /. | | ~|| |     oliver.roberts@iname.com
                 |_|_|_M_|_\_,\__; |_| |_|  oliver@amigaf1.freeserve.co.uk
 Amiga Developer           |__/            http://www.nanunanu.org/~oliver/

        [ PGP public key available on request ]        Team *AMIGA*


@ENDNODE
@NODE "Mail_105" " Re: Re: Max Size of a Pathname "
From: Ben Hutchings <womble@zzumbouk.demon.co.uk>
Date: 07-13-99 01:24:33
Subject: @{b}Re: Re: Max Size of a Pathname@{ub}

From: Ben Hutchings <womble@zzumbouk.demon.co.uk>

On Mon, Jul 12, 1999 at 10:53:27PM +0200, Allan Odgaard wrote:
> From: Allan Odgaard <Duff@DIKU.DK>
> 
> On 12-Jul-99, Stephen Williams wrote:
> 
> > [...] AllocPooled(), which (I think) allocates one big chunk
> > of memory and does small allocations from within it, thus reducing
> > the risk of fragmentation.
> 
> And makes it twice as fast. Though freeing a lot of small allocations (using
> pools) is slow. But with pools you have the ability to simply delete a pool,
> which will then free all sub-allocations, and this takes close to no time.

AllocMem and FreeMem protect the memory list with Forbid/Permit.  With
a private memory pool you need only a semaphore if you share the pool
between the threads, and no protection at all if you do not.  AllocMem
and FreeMem require a search through a potentially long linked list;
they encourage fragmentation and become slower once this happens.
You may sometimes notice the system becoming sluggish when a program
is doing a lot of FreeMems before exitting.  When you use pools there
should be less fragmentation - especially if you use one pool for each
type of object you allocate, so that all objects in the pool have the
same size.

Somewhere in that paragraph you should be able to find about three
advantages of pools. ;-)

-- 
Ben Hutchings - womble@zzumbouk.demon.co.uk, http://www.zzumbouk.demon.co.uk
Team *AMIGA* | Jay Miner Society | Linux - the choice of a GNU generation
Make three consecutive correct guesses and you will be considered an expert.

@ENDNODE
@NODE "Mail_106" " MUI and keyboard handling... "
From: "Andrzej J. Debicki" <denbi@softsystem.pl>
Date: 07-09-99 05:53:52
Subject: @{b}MUI and keyboard handling...@{ub}

From: "Andrzej J. Debicki" <denbi@softsystem.pl>

Hello,

Thanks for help in my previous problem with MUI and hooks.

And here is another. I need to handle keypressing in my app. I need to
handle function keys (f1-f10). How to do this?

--
Andrzej J. Debicki
denbi@softsystem.pl
http://friko3.onet.pl/rz/denbi
------------------------------------------
A1200T 060-50/603e-240, BVision, 34 MB RAM



@ENDNODE
@NODE "Mail_107" " Re: MUI and keyboard handling... "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 07-09-99 16:08:35
Subject: @{b}Re: MUI and keyboard handling...@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 09-Jul-99, Andrzej J. Debicki wrote:

> And here is another. I need to handle keypressing in my app. I need to
> handle function keys (f1-f10). How to do this?

The best solution is to add an eventhandler to your window.
See Window.mui/MUIM_Window_AddEventHandler.

Regards Allan
-- 
     URL: http://www.DIKU.dk/students/duff/
<sb>
Everything should be made as simple as possible, but not simpler.
-- Albert Einstein


@ENDNODE
@NODE "Mail_108" " Re[2]: MUI and keyboard handling... "
From: "Andrzej J. Debicki" <denbi@softsystem.pl>
Date: 07-12-99 06:06:34
Subject: @{b}Re[2]: MUI and keyboard handling...@{ub}

From: "Andrzej J. Debicki" <denbi@softsystem.pl>

Hello Allan,

pi¹tek, 9 lipca 1999, you wrote:
>> And here is another. I need to handle keypressing in my app. I need to
>> handle function keys (f1-f10). How to do this?

> The best solution is to add an eventhandler to your window.
> See Window.mui/MUIM_Window_AddEventHandler.

So this means I have to learn how to create custom classes... ops! Too
much knowledge in so small period of time for my head.

Anybody have a hammer to help put this stuff to my brain? ;-)

Thanks for help.

--
Andrzej J. Debicki
denbi@softsystem.pl
http://friko3.onet.pl/rz/denbi
------------------------------------------
A1200T 060-50/603e-240, BVision, 34 MB RAM



@ENDNODE
@NODE "Mail_109" " Re: MUI and keyboard handling... "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 07-12-99 12:27:17
Subject: @{b}Re: MUI and keyboard handling...@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 12-Jul-99, Andrzej J. Debicki wrote:

>> The best solution is to add an eventhandler to your window.
>> See Window.mui/MUIM_Window_AddEventHandler.
> So this means I have to learn how to create custom classes... ops! Too
> much knowledge in so small period of time for my head.

Then use Window.mui/MUIA_Window_InputEvent - but get rid of it when you've
mastered custom classes.

Regards Allan
-- 
     URL: http://www.DIKU.dk/students/duff/


@ENDNODE
@NODE "Mail_110" " MUI Arexxing "
From: Fredrik Söderberg <mcdrill@hem.passagen.se>
Date: 07-11-99 09:06:40
Subject: @{b}MUI Arexxing@{ub}

From: Fredrik =?iso-8859-1?Q?S=F6derberg?= <mcdrill@hem.passagen.se>

Hi, does anyone know how to get MUI to return a string when it has
recieved a command on the port.

I checked in the demo source WBMan.c and have set up a arexx command list.
Then I read in MUIA_Application_RexxString and I suppose this is to be used
in some way...
I have got it to acknowledge the commands, but not the returning of a
string...
I just started MUI:ing so I'm no expert yet :)
*help*

-- 
|Fredrik "McDrill" Söderberg
|http://hem.passagen.se/mcdrill/
|"Life sucks, you can't live with it and you can't live without it"

@ENDNODE
@NODE "Mail_111" " Re: MUI Arexxing "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 07-12-99 12:40:11
Subject: @{b}Re: MUI Arexxing@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 11-Jul-99, Fredrik Söderberg wrote:

> Hi, does anyone know how to get MUI to return a string when it has
> recieved a command on the port.

Assuming you're using ARexx callback hooks then you could use
MUIA_Application_RexxString.

Regards Allan
-- 
     URL: http://www.DIKU.dk/students/duff/
<sb>
Man invented language to satisfy his deep need to complain.
-- Lily Tomlin


@ENDNODE
@NODE "Mail_112" " Re: MUI Arexxing "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 07-12-99 14:42:49
Subject: @{b}Re: MUI Arexxing@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 12-Jul-99, Fredrik Söderberg wrote:

>> Assuming you're using ARexx callback hooks then you could use
>> MUIA_Application_RexxString.
> Yeah, I kind of read something about that... but,
> I'm not too hooked with the hooking :)
> ie.
> What is an ARexx callback hook and how do I set MUIA_Application_RexxString?

Do you know what a normal hook is? Cause they're the same.
You set tags with SetAttrs() from intuition.library, or the MUI-macro set().
Your hook is AFAIK given an object pointer in one register, so simply call
set() on this object, with the above tag and a string of your choice.

Regards Allan
-- 
     URL: http://www.DIKU.dk/students/duff/
<sb>
Always remember that you are unique.  Just like everyone else.


@ENDNODE
@NODE "Mail_113" " Re: MUI Arexxing "
From: Fredrik Söderberg <mcdrill@hem.passagen.se>
Date: 07-12-99 15:02:58
Subject: @{b}Re: MUI Arexxing@{ub}

From: Fredrik =?iso-8859-1?Q?S=F6derberg?= <mcdrill@hem.passagen.se>

On 12-Jul-99, Allan Odgaard wrote:
>> Hi, does anyone know how to get MUI to return a string when it has
>> recieved a command on the port.

> Assuming you're using ARexx callback hooks then you could use
> MUIA_Application_RexxString.

Yeah, I kind of read something about that... but,
I'm not too hooked with the hooking :)
ie.
What is an ARexx callback hook and how do I set MUIA_Application_RexxString?

-- 
|Fredrik "McDrill" Söderberg
|http://hem.passagen.se/mcdrill/
|"Life sucks, you can't live with it and you can't live without it"

@ENDNODE
@NODE "Mail_114" " Re: MUI Arexxing "
From: Fredrik Söderberg <mcdrill@hem.passagen.se>
Date: 07-12-99 16:10:25
Subject: @{b}Re: MUI Arexxing@{ub}

From: Fredrik =?iso-8859-1?Q?S=F6derberg?= <mcdrill@hem.passagen.se>

On 12-Jul-99, Allan Odgaard wrote:

> Do you know what a normal hook is? Cause they're the same. You set tags
> with SetAttrs() from intuition.library, or the MUI-macro set(). Your hook
> is AFAIK given an object pointer in one register, so simply call set() on
> this object, with the above tag and a string of your choice.

Ahh... found the problem...

I had done this already, but thru mostly copying from wbman.c source...
I have never used hooks...

The problem anyway was that I thought you could use return(); also to return
a number-value too. Apparently not. :) 
Thanks, I wasn't sure I was doing it right, but it seems I was :)

-- 
|Fredrik "McDrill" Söderberg
|http://hem.passagen.se/mcdrill/
|"Life sucks, you can't live with it and you can't live without it"


@ENDNODE
@NODE "Mail_115" " Re: MUI mailing list "
From: Stuart Kelly <amigac@dkelly1.demon.co.uk>
Date: 07-11-99 15:26:11
Subject: @{b}Re: MUI mailing list@{ub}

From: Stuart Kelly <amigac@dkelly1.demon.co.uk>

Der Mike, 
         I subscrived to the MUI list using the address
below with SUBSCRIBE in the subject

    mui-request@SunSITE.Informatik.RWTH-Aachen.DE

Hope this helps, Stuart Kelly


@ENDNODE
@NODE "Mail_116" " MUI programming "
From: Darryl Hartwig <darrylh@powerup.com.au>
Date: 07-05-99 19:38:49
Subject: @{b}MUI programming@{ub}

From: Darryl Hartwig <darrylh@powerup.com.au>

Hello peoples,

I recently got the developer part of MUI to update my game. 
I've 'installed' it in my SYS: directory under the standard
MUI directory, ie a new folder called 'developer' has been
added.  This contains the Autodocs, C and other
directories.

I've been trying to get one of the sample code to compile
under DICE but am having no luck.  In the C/Include
directory, I've copied the files to the appropriate places
in my DICE directory, and I believe I've created the dlib
files muil.lib, muilr.lib etc correctly and placed them in
my DICE directory as well.

When I compile (make) the example, I get these errors:

DLINK: "" L:0 C:0 E:36 Undefined symbol: _MUIC_Group
(T:MUI-Demo)
DLINK: "" L:0 C:0 E:36 Undefined symbol: _MUIC_Floattext
(T:MUI-Demo)
etc...

If I then try to link in one of the muil.lib files using
Options - linker options, I get:

DLINK: "" L:0 C:0 E:37 Illegal A$-rel to far object:
_MUIC_Group [dlib:muilr.lib:T:classnames hn#0.0 ...(and
something else I can't see)
...

Help!

-- 
Seeya
<tsb>
<sb>Darryl Hartwig
<sb>Buccan, QLD
<sb>BTW, the Amiga is back for the future!
<sb>Member of USANA
<tsb>


@ENDNODE
@NODE "Mail_117" " Re: Off topic: RAM "
From: Gabriele Svelto <jlpicard@tiscalinet.it>
Date: 07-05-99 23:14:05
Subject: @{b}Re: Off topic: RAM@{ub}

From: Gabriele Svelto <jlpicard@tiscalinet.it>

On 30-Giu-99, Steffen wrote:

>
> Is it possible to use EDO for a Blizzard 1240-40 TERC ?
>

I use a 32MB EDO Simm since late 1997 on my Blizzard 1240-40 TERC and it
works fine, I even have another 16MB EDO simm on the BlizzardSCSI IV and
never had problems with it so I think that there should be no problems with
it.


@ENDNODE
@NODE "Mail_118" " Re: Off topic: RAM "
From: Steffen <steffen.mars@stenloese.mail.telia.com>
Date: 07-06-99 05:26:55
Subject: @{b}Re: Off topic: RAM@{ub}

From: Steffen <steffen.mars@stenloese.mail.telia.com>

On 06-Jul-99, Gabriele Svelto claimed:
>From: Gabriele Svelto <jlpicard@tiscalinet.it>

>On 30-Giu-99, Steffen wrote:

>>
>> Is it possible to use EDO for a Blizzard 1240-40 TERC ?
>>

>I use a 32MB EDO Simm since late 1997 on my Blizzard 1240-40 TERC and it
>works fine, I even have another 16MB EDO simm on the BlizzardSCSI IV and
>never had problems with it so I think that there should be no problems with
>it.

Thanks alot:)
If you have a sys-speed module, i would apreciate if you would send
it.


@ENDNODE
@NODE "Mail_119" " Rawkey -> Vanillakey "
From: Felix Schwarz <felix@innovative-web.de>
Date: 07-14-99 20:31:46
Subject: @{b}Rawkey -> Vanillakey@{ub}

From: Felix Schwarz <felix@innovative-web.de>

Hello!

I need to be able to get infos on when cursor-, shift- and alt-keys are
pressed and therefore use IDCMP_RAWKEY .. but how can I convert
these values to normal characters as received by IDCMP_VANILLAKEY ?
I saw MapRawKey, but this doesn`t seem to be suitable, as an inputevent-
message is required .. anybody knows a systemconform and keyboard-layout-
friendly solution ?

Regards,
   Felix Schwarz

-- 
Developer at Innovative

Innovative
c/o Felix Schwarz
Am Gründla 3
D-91074 Herzogenaurach
Germany

EMail: felix@innovative-web.de
WWW:   http://www.innovative-web.de/
Phone: +(0)049 (0)9132/3400



@ENDNODE
@NODE "Mail_120" " Re: Rawkey -> Vanillakey "
From: Ben Hutchings <womble@zzumbouk.demon.co.uk>
Date: 07-14-99 22:39:30
Subject: @{b}Re: Rawkey -> Vanillakey@{ub}

From: Ben Hutchings <womble@zzumbouk.demon.co.uk>

On Wed, Jul 14, 1999 at 09:31:46PM +0100, Felix Schwarz wrote:
> From: Felix Schwarz <felix@innovative-web.de>
> 
> Hello!
> 
> I need to be able to get infos on when cursor-, shift- and alt-keys are
> pressed and therefore use IDCMP_RAWKEY .. but how can I convert
> these values to normal characters as received by IDCMP_VANILLAKEY ?
> I saw MapRawKey, but this doesn`t seem to be suitable, as an inputevent-
> message is required .. anybody knows a systemconform and keyboard-layout-
> friendly solution ?

You can ask for both IDCMP_RAWKEY *and* IDCMP_VANILLAKEY, but you
won't get IDCMP_RAWKEY upstrokes.  See the ModifyIDCMP section in
intuition.doc.

-- 
Ben Hutchings - womble@zzumbouk.demon.co.uk, http://www.zzumbouk.demon.co.uk
Team *AMIGA* | Jay Miner Society | Linux - the choice of a GNU generation
Asking whether machines can think is like
asking whether submarines can swim.

@ENDNODE
@NODE "Mail_121" " Re: Rawkey -> Vanillakey "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 07-14-99 23:45:48
Subject: @{b}Re: Rawkey -> Vanillakey@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 15-Jul-99, John Niclasen wrote:

> I use RawKeyConvert() as described in Amiga RKRM
> [...]
>    static struct InputEvent ievent = {NULL,
     ^^^^^^

You probably don't want to have this structure static.

Regards Allan
-- 
     URL: http://www.DIKU.dk/students/duff/
<sb>
Reality is for people who lack imagination.


@ENDNODE
@NODE "Mail_122" " Re: Rawkey -> Vanillakey "
From: John Niclasen <Niclasen@bigfoot.com>
Date: 07-14-99 23:55:14
Subject: @{b}Re: Rawkey -> Vanillakey@{ub}

From: John Niclasen <Niclasen@bigfoot.com>

Hi Felix!

On 14-Jul-99, Felix Schwarz wrote:
> I need to be able to get infos on when cursor-, shift-
> and alt-keys are pressed and therefore use IDCMP_RAWKEY
> .. but how can I convert these values to normal
> characters as received by IDCMP_VANILLAKEY ? I saw
> MapRawKey, but this doesn`t seem to be suitable, as an
> inputevent- message is required .. anybody knows a
> systemconform and keyboard-layout- friendly solution ?

I use RawKeyConvert() as described in Amiga RKRM
"Intuition: Mouse and Keyboard":

    numchars=deadkeyconvert(imsg, buffer, BUFSIZE, 0L);
...

LONG deadkeyconvert(struct IntuiMessage *msg, UBYTE
*kbuffer,
    LONG kbsize, struct KeyMap *kmap)
{
    static struct InputEvent ievent = {NULL,
IECLASS_RAWKEY, 0, 0, 0};

    if(msg->Class != RAWKEY)
        return(-2);
    ievent.ie_Code = msg->Code;
    ievent.ie_Qualifier = msg->Qualifier;
    ievent.ie_position.ie_addr = *((APTR *)msg->IAddress);

    return(RawKeyConvert(&ievent, kbuffer, kbsize, kmap));
}

RawKeyConvert is in the console.device. By setting kmap to
zero, the default console device key map is used.

I hope, you can use this.

(I won't be receiving mails from this list for the next 14
days, because I'M GOING ON VACATION!!! YIPEEEE!
Heidelberg and Paris, here I come!)

Bye
John Niclasen
Denmark.

------------------------------------------------------------------------
     -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 
@ENDNODE
@NODE "Mail_123" " Re: Rawkey -> Vanillakey "
From: Felix Schwarz <felix@innovative-web.de>
Date: 07-15-99 18:29:58
Subject: @{b}Re: Rawkey -> Vanillakey@{ub}

From: Felix Schwarz <felix@innovative-web.de>

Hello Ben!

On 14-Jul-99, you wrote:

> You can ask for both IDCMP_RAWKEY *and* IDCMP_VANILLAKEY, but you
> won't get IDCMP_RAWKEY upstrokes.  See the ModifyIDCMP section in
> intuition.doc.

I know, and that`s exactly my problem :-)

Yours sincerly,
  Felix Schwarz

-- 
Developer at Innovative

Innovative
c/o Felix Schwarz
Am Gründla 3
D-91074 Herzogenaurach
Germany

EMail: felix@innovative-web.de
WWW:   http://www.innovative-web.de/
Phone: +(0)049 (0)9132/3400



@ENDNODE
@NODE "Mail_124" " Re: Registers and GNU C++ was:C Newbie "
From: James S Perrin <j.perrin@mcc.ac.uk>
Date: 07-21-99 09:31:05
Subject: @{b}Re: Registers and GNU C++ was:C Newbie@{ub}

From: James S Perrin <j.perrin@mcc.ac.uk>

Ben Hutchings wrote:
> 
> From: Ben Hutchings <womble@zzumbouk.demon.co.uk>
> 
> On Mon, Jul 19, 1999 at 10:43:34AM +0100, James S Perrin wrote:
> > From: James S Perrin <j.perrin@mcc.ac.uk>
> >
> > Ben Hutchings wrote:
> > >
> > > From: Ben Hutchings <womble@zzumbouk.demon.co.uk>
> > >
> > > On Fri, Jul 16, 1999 at 10:02:08AM +0100, James S Perrin wrote:
> > > <snip>
> > > > There are other problems of using GNU C++ on the amiga mainly the lack of
> > > > control register usage which makes using amiga shared libraries a
> > > > pain/impossible.
> > >
> > > Can you elaborate on that?
> <snip>
> > GNU C uses "inline" headers generated for all shared libraries which contains
> > lots of techie stuff the get the values into the right registers. The main
> > tool is the GNU parameter "reg" iirc followed by the register name "a0,d2,f3
> > etc" which go in the function prototype.
> >
> > For some (unknown) reason "reg" is not supported by GNU C++ and hence the
> > difficulty, if anyone can post further explanation I'll be greatful as well.
> > The amigos function do work though I think ?????
> <snip>
> 
> I think you are confused.  

You are probably right. But it goes to show how little clear information is
available. The amiga egc guide is the same as the gnu c guide and there are
only bits and pieces on the GG mailing lists.

> It is correct that he GNU C++ compiler
> doesn't let you use register arguments for function prototypes.  The
> reason for this is probably that it would further complicate overload
> resolution.  However, there is nothing to stop you using inline
> assembly code that puts things in the right registers.

There is. I haven't got the faintest idea how to do this. See above.

> 
> The remaining problem with shared library calls is that the GNU C/C++
> compiler isn't very good at juggling registers to put arguments in the
> right places.  This is supposed to be fixed in the latest egcs, but
> the Amiga patches haven't been merged with that yet.

ie you can't use shared libraries with GNU C or the lastest snapshot of
egc-1.1.2
correct ?

Regards
James
-- 
-----------------------------------------------------------------------------
James S. Perrin,                     | email: j.perrin@mcc.ac.uk
Manchester Visualization Centre,     | http://www.man.ac.uk/MVC/staff/perrin/
Manchester Computing, The University,| tel: +44 161 275 6945
Manchester, England. M13 9PL.        | fax: +44 161 275 6800/6040
-----------------------------------------------------------------------------
"The test of intellect is the refusal to belabor the obvious" - Alfred Bester
-----------------------------------------------------------------------------

@ENDNODE
@NODE "Mail_125" " Re: Registers and GNU C++ was:C Newbie "
From: Ben Hutchings <womble@zzumbouk.demon.co.uk>
Date: 07-29-99 01:09:02
Subject: @{b}Re: Registers and GNU C++ was:C Newbie@{ub}

From: Ben Hutchings <womble@zzumbouk.demon.co.uk>

On Wed, Jul 21, 1999 at 10:31:05AM +0100, James S Perrin wrote:
> From: James S Perrin <j.perrin@mcc.ac.uk>
> 
> Ben Hutchings wrote:
> > 
> > From: Ben Hutchings <womble@zzumbouk.demon.co.uk>
> > 
> > On Mon, Jul 19, 1999 at 10:43:34AM +0100, James S Perrin wrote:
<snip>
> > > For some (unknown) reason "reg" is not supported by GNU C++ and hence the
> > > difficulty, if anyone can post further explanation I'll be greatful as well.
> > > The amigos function do work though I think ?????
> > <snip>
> > 
> > I think you are confused.  
> 
> You are probably right. But it goes to show how little clear information is
> available. The amiga egc guide is the same as the gnu c guide and there are
> only bits and pieces on the GG mailing lists.

I think the guide is perfectly clear on this point!

> > It is correct that he GNU C++ compiler
> > doesn't let you use register arguments for function prototypes.  The
> > reason for this is probably that it would further complicate overload
> > resolution.  However, there is nothing to stop you using inline
> > assembly code that puts things in the right registers.
> 
> There is. I haven't got the faintest idea how to do this. See above.

Example:

void
AbortIO(struct IORequest *ioRequest)
{
   register struct ExecBase *a6 __asm("a6") = SysBase;
   register struct IORequest *a1 __asm("a1") = ioRequest;
   __asm volatile ("jsr a6@(-0x1e0:W)"
   : /* No Output */
   : "r" (a6), "r" (a1)
   : "d0", "d1", "a0", "a1", "fp0", "fp1", "cc", "memory");
}

> > The remaining problem with shared library calls is that the GNU C/C++
> > compiler isn't very good at juggling registers to put arguments in the
> > right places.  This is supposed to be fixed in the latest egcs, but
> > the Amiga patches haven't been merged with that yet.
> 
> ie you can't use shared libraries with GNU C or the lastest snapshot of
> egc-1.1.2
> correct ?

Yes, you can.  You just have to use stub libraries for a few functions
that use a lot of address registers (depending on whether you use
-msmall-data and -fomit-frame-pointer).

Ben.

-- 
Ben Hutchings - womble@zzumbouk.demon.co.uk, http://www.zzumbouk.demon.co.uk
Team *AMIGA* | Jay Miner Society | Linux - the choice of a GNU generation
Who are all these weirdos? - David Bowie, about L-Space IRC channel #afp

@ENDNODE
@NODE "Mail_126" " Re: Requesters "
From: Mike Carter <mike.carter@bigfoot.com>
Date: 07-15-99 21:44:23
Subject: @{b}Re: Requesters@{ub}

From: "Mike Carter" <mike.carter@bigfoot.com>

Re: [amiga-c] Requesters interested me.  Here's some more to think about...

> From: David McMinn <dmcminn@house-of-mojo.freeserve.co.uk>
> 
> Hi Mike
> 
> > When I try to obtain alock on something that isn't really there the
> > 'Please insert blahblahblah...' requester appears.  Back in Blitz
> > Basic there was some fiddle to temporarly suspend the requesters.  How
> > can I do this in 'C'?  And is it legally for the future?  - even if
> > it's not I'd like to know how to do it anyway :)
> 
> You set the pr_WindowPtr in your process structure to -1 to temporarily disable
> requesters. Code would be:
> 
> struct Process *myprocess;
> APTR old_winptr;
> 
> myprocess = FindTask(0);
> old_winptr = myprocess->pr_WindowPtr;
> myprocess->pr_WindowPtr = -1;
> 
> /* Do stuff here */
> 
> myprocess->pr_WindowPtr = old_winptr; /* to restore request4ers */

Thankyou for this!  And also thanks to Ben, and Jespers suggestions -
although it was too much like work to do this evening ;) But I may use
it as it is much better than just hiding the requesters!

But for now it works brilliant.  Now onto the next problem...

Dinky do,



Mike C.



-- 
-------------------------------------------------------------
PROJECT STATUS...
Key To Driving Theory [#####################] done!
Scalos add-ons suite  [#########------------] usable now
<unamed> mp3 player   [####-----------------] skins & gadgets
-------------------------------------------------------------
JOIN UP TODAY -> http://www.onelist.com/subscribe.cgi/amiga-c

@ENDNODE
@NODE "Mail_127" " Running a command with NO output.. "
From: Dominic Clifton <dominicc@barrysworld.co.uk>
Date: 07-06-99 17:49:12
Subject: @{b}Running a command with NO output..@{ub}

From: Dominic Clifton <dominicc@barrysworld.co.uk>


Is it possible for a program to run another program without having it's
output appear in a new window ?


I'm using dos.library/SystemTagList() and I'm specifing an SYS_Input of
a CON: window using the AUTO option, so that it only creates a window
if the called program writes to it's stdout/in.  

On the command that I'm running I also specify AmigaDOS file redirection,
e.g. "LHA <NIL: >RAM:Temp T RAM:MyFile.LHA".

This works FINE until the command that I'm called (take LHA for example)
fails and returns a return code.  I get the CON: AUTO window flash on
and off the screen with the message "LHA Failed Return Code X".

I don't care about the return code, all I want is the RAM:Temp file (in 
the example above). 

Grr..

Instead of opening the CON: window, should I be opening "RAM:Temp" and
passing that to SystemTagList() as SYS_Input ?

Or should I be using something other than SystemTagList() ? (bearing
in mind that I *NEED* the system path)

-- 

[Dominic Clifton - aka Hydra/CRoSS POiNT ]=-  -=[ Oh my god, it's an email]
[DreamCast, C++, DV, Sports Cars, Snowboarding, South Park, Placebo, Amiga]


@ENDNODE
@NODE "Mail_128" " Re: Running a command with NO output.. "
From: Allan Odgaard <Duff@DIKU.DK>
Date: 07-09-99 15:41:35
Subject: @{b}Re: Running a command with NO output..@{ub}

From: Allan Odgaard <Duff@DIKU.DK>

On 06-Jul-99, Dominic Clifton wrote:

> Is it possible for a program to run another program without having it's
> output appear in a new window ?

It should be...

> [...]
> This works FINE until the command that I'm called (take LHA for example)
> fails and returns a return code.  I get the CON: AUTO window flash on
> and off the screen with the message "LHA Failed Return Code X".

Errors are generally written to stderr, which isn't redirected.

> Instead of opening the CON: window, should I be opening "RAM:Temp" and
> passing that to SystemTagList() as SYS_Input ?

hmmm... in DOSTags.h there is a tag named SYS_Error - but it's commented.
Maybe you can set SYS_Input to nil, and stay with your current use of
redirection.

Regards Allan
-- 
     URL: http://www.DIKU.dk/students/duff/
<sb>
Whenever you find that you are on the side of the majority, it is time to
reform.
-- Mark Twain


@ENDNODE
@NODE "Mail_129" " Re: Spam? "
From: Mike Carter <mike.carter@bigfoot.com>
Date: 07-13-99 19:01:58
Subject: @{b}Re: Spam?@{ub}

From: "Mike Carter" <mike.carter@bigfoot.com>

[amiga-c] Spam? interested me.  Here's some more to think about...

> After subscribing to this list, I've started to receive SPAM with regular
> intervals.
> Has that happend for others? And/or do any one know for a fact that OneList.com
> actually do sell the email addresses that they obtain?

As list manager I can safely say there's no spam beeing put on to it
as complete mails.  The closest to crap is the small bit Onelist auto
add at the bottom of each email.

I'm on 3 lists all under Onelist and have had no spam from them.

Dinky do,


Mike C.

-- 
-------------------------------------------------------------
PROJECT STATUS...
Key To Driving Theory [#####################] done!
Scalos add-ons suite  [#########------------] usable now
<unamed> mp3 player   [####-----------------] skins & gadgets
-------------------------------------------------------------
JOIN UP TODAY -> http://www.onelist.com/subscribe.cgi/amiga-c

@ENDNODE
@NODE "Mail_130" " Status of pools.lib "
From: Andrija Antonijevic <TheAntony2@bigfoot.com>
Date: 07-23-99 01:23:01
Subject: @{b}Status of pools.lib@{ub}

From: Andrija Antonijevic <TheAntony2@bigfoot.com>

What is the status of pools.lib? AFAIK it should fix some bugs in pool
functions but I don't know where to get it. Is it freely distributable
(quick search for pool on Aminet gave nothing interesting) or can be
found on Developers CD?

-- 

     ///  /_\  _ _| |_ ___ _ _ _  _   http://www.bigfoot.com/~TheAntony
__  ///  / _ \| ' \  _/ _ \ ' \ || |   Amiga Translators' Organization
\\\///  /_/ \_\_||_\__\___/_||_\_, |        (*Serbian department*)
 \XX/  TheAntony@bigfoot.com   |__/              Team *AMIGA*

Good girls go to heaven... but bad girls go EVERYWHERE!!


@ENDNODE
@NODE "Mail_131" " Re: Status of pools.lib "
From: Olaf Barthel <olsen-amigac@sourcery.han.de>
Date: 07-23-99 10:15:32
Subject: @{b}Re: Status of pools.lib@{ub}

From: "Olaf Barthel" <olsen-amigac@sourcery.han.de>

On Jul 23 Andrija (Andrija Antonijevic) wrote:

> From: Andrija Antonijevic <TheAntony2@bigfoot.com>
> 
> What is the status of pools.lib? AFAIK it should fix some bugs in pool
> functions but I don't know where to get it. Is it freely distributable
> (quick search for pool on Aminet gave nothing interesting) or can be
> found on Developers CD?

   That pools.lib is part of the updated amiga.lib found on the Amiga
Developer CD. Basically, pools.lib came under the same license as the
regular amiga.lib.

-- 
Home: Olaf Barthel, Brabeckstrasse 35, D-30559 Hannover
 Net: olsen@sourcery.han.de (Home), olsen@logicalline.com (Work)

@ENDNODE
@NODE "Mail_132" " Re: Status of pools.lib "
From: Andrija Antonijevic <TheAntony2@bigfoot.com>
Date: 07-24-99 14:21:30
Subject: @{b}Re: Status of pools.lib@{ub}

From: Andrija Antonijevic <TheAntony2@bigfoot.com>

History books say that Olaf Barthel spoke these words on 23-Jul-99 AD.

>On Jul 23 Andrija (Andrija Antonijevic) wrote:

>> What is the status of pools.lib? AFAIK it should fix some bugs in pool
>> functions but I don't know where to get it. Is it freely distributable
>> (quick search for pool on Aminet gave nothing interesting) or can be
>> found on Developers CD?

>   That pools.lib is part of the updated amiga.lib found on the Amiga
>Developer CD. Basically, pools.lib came under the same license as the
>regular amiga.lib.

Thanks for the answer, Olaf. Since I have amiga.lib v40.14 I guess
I'll have to be careful a bit. Can you tell me what are the bugs in
pools functions? Are they in amiga.lib (so I can avoid them by
directly using Exec routines, although my program will run only on
v39+) or in Exec? Is that what SetPatch fixes?

Thanks!

-- 

     ///  /_\  _ _| |_ ___ _ _ _  _   http://www.bigfoot.com/~TheAntony
__  ///  / _ \| ' \  _/ _ \ ' \ || |   Amiga Translators' Organization
\\\///  /_/ \_\_||_\__\___/_||_\_, |        (*Serbian department*)
 \XX/  TheAntony@bigfoot.com   |__/              Team *AMIGA*

Windows to 486/50 mhz cpu: Don't rush me, don't rush me...


@ENDNODE
@NODE "Mail_133" " Re: Status of pools.lib "
From: Rod Schnell <rodsch@telusplanet.net>
Date: 07-26-99 02:16:28
Subject: @{b}Re: Status of pools.lib@{ub}

From:	Rod Schnell <rodsch@telusplanet.net>

Hello Andrija

On 24-Jul-99, Andrija Antonijevic wrote:
> From: Andrija Antonijevic <TheAntony2@bigfoot.com>
> 
> History books say that Olaf Barthel spoke these words on 23-Jul-99 AD.
> 
>> On Jul 23 Andrija (Andrija Antonijevic) wrote:
> 
>>> What is the status of pools.lib? AFAIK it should fix some bugs in pool
>>> functions but I don't know where to get it. Is it freely distributable
>>> (quick search for pool on Aminet gave nothing interesting) or can be
>>> found on Developers CD?
> 
>>   That pools.lib is part of the updated amiga.lib found on the Amiga
>> Developer CD. Basically, pools.lib came under the same license as the
>> regular amiga.lib.
> 
> Thanks for the answer, Olaf. Since I have amiga.lib v40.14 I guess
> I'll have to be careful a bit. Can you tell me what are the bugs in
> pools functions? Are they in amiga.lib (so I can avoid them by
> directly using Exec routines, although my program will run only on
> v39+) or in Exec? Is that what SetPatch fixes?

The lib pool functions in amiga.lib work fine, it's the asm pool functions in
ROM that are broken. Also, the lib functions work with amiga os 2.04 while
the asm functions require 3.x.

  Rod


@ENDNODE
@NODE "Mail_134" " Re: Status of pools.lib "
From: Olaf Barthel <olsen-amigac@sourcery.han.de>
Date: 07-26-99 21:16:12
Subject: @{b}Re: Status of pools.lib@{ub}

From: "Olaf Barthel" <olsen-amigac@sourcery.han.de>

On Jul 24 Andrija (Andrija Antonijevic) wrote:

> From: Andrija Antonijevic <TheAntony2@bigfoot.com>
> 
> History books say that Olaf Barthel spoke these words on 23-Jul-99 AD.
> 
> >On Jul 23 Andrija (Andrija Antonijevic) wrote:
> 
> >> What is the status of pools.lib? AFAIK it should fix some bugs in pool
> >> functions but I don't know where to get it. Is it freely distributable
> >> (quick search for pool on Aminet gave nothing interesting) or can be
> >> found on Developers CD?
> 
> >   That pools.lib is part of the updated amiga.lib found on the Amiga
> >Developer CD. Basically, pools.lib came under the same license as the
> >regular amiga.lib.
> 
> Thanks for the answer, Olaf. Since I have amiga.lib v40.14 I guess
> I'll have to be careful a bit. Can you tell me what are the bugs in
> pools functions?

   The bug is in the code that should take care of empty pools, i.e.
pools whose puddles were completely freed. The bug is that these
empty pools do not get released until the entire pool is deleted.
For example, if you were to create a pool, allocate ten MBytes of
memory from that pool, then release every single allocation, you'd
still have that pool eating up ten MBytes of memory. Only the final
DeletePool() would release that memory.

> Are they in amiga.lib (so I can avoid them by
> directly using Exec routines, although my program will run only on
> v39+) or in Exec?

   The same bug that is in ROM is in the amiga.lib code. It was
finally fixed in amiga.lib V40.20.

> Is that what SetPatch fixes?

   It fixes only the bug in the ROM code.

-- 
Home: Olaf Barthel, Brabeckstrasse 35, D-30559 Hannover
 Net: olsen@sourcery.han.de (Home), olsen@logicalline.com (Work)

@ENDNODE
@NODE "Mail_135" " Re: Re: Status of pools.lib "
From: Olaf Barthel <olsen-amigac@sourcery.han.de>
Date: 07-26-99 21:19:14
Subject: @{b}Re: Re: Status of pools.lib@{ub}

From: "Olaf Barthel" <olsen-amigac@sourcery.han.de>

On Jul 25 Rod (Rod Schnell) wrote:

> [..]
> The lib pool functions in amiga.lib work fine

   No, they don't work fine. The code in amiga.lib was the same as used in
the V40 ROM. While Mike Sinz found the time to provide a replacement
pools.lib and told Randell Jesup how to fix the ROM bug, Commodore didn't
manage to build a completely new and amiga.lib including the bug-fixed
pools.lib code. I merged the updated pools.lib and amiga.lib code for
amiga.lib 40.20, as found on the Amiga Developer CD.

-- 
Home: Olaf Barthel, Brabeckstrasse 35, D-30559 Hannover
 Net: olsen@sourcery.han.de (Home), olsen@logicalline.com (Work)

@ENDNODE
@NODE "Mail_136" " Re: Status of pools.lib "
From: Christian Hattemer <Chris@heaven.riednet.wh.tu-darmstadt.de>
Date: 07-27-99 11:52:06
Subject: @{b}Re: Status of pools.lib@{ub}

From: Christian Hattemer <Chris@heaven.riednet.wh.tu-darmstadt.de>

On 26-Jul-99 Olaf Barthel wrote:

>   The same bug that is in ROM is in the amiga.lib code. It was
> finally fixed in amiga.lib V40.20.

Where do I get this Version? On the Developer CD V1.2 is only V40.15
(22.11.95).

Bye, Chris

-- 
            __
           ///
      __  ///  Amiga 4000T 040/40      Team *AMIGA*
      \\\///
       \XX/    http://www.riednet.wh.tu-darmstadt.de/~chris/

Error #0300: Hardware not found. I'm off to buy some new.


@ENDNODE
@NODE "Mail_137" " Re: Re: Status of pools.lib "
From: ROBERT MEYERS <meyersrl@songs.sce.com>
Date: 07-27-99 12:41:53
Subject: @{b}Re: Re: Status of pools.lib@{ub}

From: "ROBERT MEYERS"<meyersrl@songs.sce.com>

From: Christian Hattemer <Chris@heaven.riednet.wh.tu-darmstadt.de>
     
On 26-Jul-99 Olaf Barthel wrote:
     
>   The same bug that is in ROM is in the amiga.lib code. It was 
> finally fixed in amiga.lib V40.20.
     
Where do I get this Version? On the Developer CD V1.2 is only V40.15 
(22.11.95).

     
     I had the same question.  I have Developer CD V1.1 and it has:
     
     amiga.lib  $VER: 40.15 (22.11.95)
     pools.lib  $VER: 40.5 (6.1.94)
     
     I'm confused.
     
     Bob Meyers


@ENDNODE
@NODE "Mail_138" " Re: Re: Status of pools.lib "
From: Olaf Barthel <olsen-amigac@sourcery.han.de>
Date: 07-28-99 08:41:59
Subject: @{b}Re: Re: Status of pools.lib@{ub}

From: "Olaf Barthel" <olsen-amigac@sourcery.han.de>

On Jul 27 Christian (Christian Hattemer) wrote:

> From: Christian Hattemer <Chris@heaven.riednet.wh.tu-darmstadt.de>
> 
> On 26-Jul-99 Olaf Barthel wrote:
> 
> >   The same bug that is in ROM is in the amiga.lib code. It was
> > finally fixed in amiga.lib V40.20.
> 
> Where do I get this Version? On the Developer CD V1.2 is only V40.15
> (22.11.95).

   Oops. My mistake. I constructed V40.15 from pre-built object files
I found on the backup tapes which were available to me when I was still
doing contract work for Amiga Technologies GmbH. The V40.20 build followed
much later, when I was able to build amiga.lib completely native. That
version was originally intended to find its place on an Amiga Developer CD
v2.1 which never materialized. Sorry :(

-- 
Home: Olaf Barthel, Brabeckstrasse 35, D-30559 Hannover
 Net: olsen@sourcery.han.de (Home), olsen@logicalline.com (Work)

@ENDNODE
@NODE "Mail_139" " Re: Re: Status of pools.lib "
From: Olaf Barthel <olsen-amigac@sourcery.han.de>
Date: 07-28-99 08:43:12
Subject: @{b}Re: Re: Status of pools.lib@{ub}

From: "Olaf Barthel" <olsen-amigac@sourcery.han.de>

On Jul 27 ROBERT (ROBERT MEYERS) wrote:

> From: "ROBERT MEYERS"<meyersrl@songs.sce.com>
> 
> From: Christian Hattemer <Chris@heaven.riednet.wh.tu-darmstadt.de>
>      
> On 26-Jul-99 Olaf Barthel wrote:
>      
> >   The same bug that is in ROM is in the amiga.lib code. It was 
> > finally fixed in amiga.lib V40.20.
>      
> Where do I get this Version? On the Developer CD V1.2 is only V40.15 
> (22.11.95).

   Don't worry: version 40.15 includes the pools.lib bug fix. I had
mixed up the release history of amiga.lib (V40.20 sits on my hard disk
drive as part of the Amiga Developer CD 2.1 which never made it into
the public).

-- 
Home: Olaf Barthel, Brabeckstrasse 35, D-30559 Hannover
 Net: olsen@sourcery.han.de (Home), olsen@logicalline.com (Work)

@ENDNODE
@NODE "Mail_140" " Re: Status of pools.lib "
From: Christian Hattemer <Chris@heaven.riednet.wh.tu-darmstadt.de>
Date: 07-28-99 12:44:11
Subject: @{b}Re: Status of pools.lib@{ub}

From: Christian Hattemer <Chris@heaven.riednet.wh.tu-darmstadt.de>

On 28-Jul-99 Olaf Barthel wrote:

> much later, when I was able to build amiga.lib completely native. That
> version was originally intended to find its place on an Amiga Developer CD
> v2.1 which never materialized. Sorry :(

Will we get a new CD with OS 3.5? You could put the lib there then...

Bye, Chris

-- 
            __
           ///
      __  ///  Amiga 4000T 040/40      Team *AMIGA*
      \\\///
       \XX/    http://www.riednet.wh.tu-darmstadt.de/~chris/

IBM - International Bullshit Manufacturing


@ENDNODE
@NODE "Mail_141" " Re: Re: Status of pools.lib "
From: Olaf Barthel <olsen-amigac@sourcery.han.de>
Date: 07-28-99 17:36:15
Subject: @{b}Re: Re: Status of pools.lib@{ub}

From: "Olaf Barthel" <olsen-amigac@sourcery.han.de>

On Jul 28 Christian (Christian Hattemer) wrote:

> From: Christian Hattemer <Chris@heaven.riednet.wh.tu-darmstadt.de>
> 
> On 28-Jul-99 Olaf Barthel wrote:
> 
> > much later, when I was able to build amiga.lib completely native. That
> > version was originally intended to find its place on an Amiga Developer CD
> > v2.1 which never materialized. Sorry :(
> 
> Will we get a new CD with OS 3.5?

   I don't know yet, but it would certainly make good sense :)

-- 
Home: Olaf Barthel, Brabeckstrasse 35, D-30559 Hannover
 Net: olsen@sourcery.han.de (Home), olsen@logicalline.com (Work)

@ENDNODE
@NODE "Mail_142" " Re: Status of pools.lib "
From: Rod Schnell <rodsch@telusplanet.net>
Date: 07-28-99 23:07:49
Subject: @{b}Re: Status of pools.lib@{ub}

From:	Rod Schnell <rodsch@telusplanet.net>

Hello Olaf

On 26-Jul-99, Olaf Barthel wrote:
> From: "Olaf Barthel" <olsen-amigac@sourcery.han.de>
> 
> On Jul 25 Rod (Rod Schnell) wrote:
> 
>> [..]
>> The lib pool functions in amiga.lib work fine
> 
>   No, they don't work fine. The code in amiga.lib was the same as used in
> the V40 ROM.

That's news to me, but it makes sense. I've never experienced the bugs myself,
just heard about them from others. Considering that practically everyone uses
the latest version of amiga.lib available, the lib code would work fine for
most of us anyhow. :)

In any case, the v39 ROM routines are broken and require v40.15+ (ROM, ROM
image, or setpatch) to fix them. Assuming the programmer compiles with the
latest amiga.lib and has 40.15 ROM on his own machine, the main problem is
users with v39 to 40.14 ROM on thier own machines experiencing bugs the
programmer can't duplicate.

  Rod


@ENDNODE
@NODE "Mail_143" " Re: Status of pools.lib "
From: Andrija Antonijevic <TheAntony2@bigfoot.com>
Date: 07-30-99 01:21:01
Subject: @{b}Re: Status of pools.lib@{ub}

From: Andrija Antonijevic <TheAntony2@bigfoot.com>

History books say that Olaf Barthel spoke these words on 26-Jul-99 AD.

>On Jul 24 Andrija (Andrija Antonijevic) wrote:

[...]

>> Thanks for the answer, Olaf. Since I have amiga.lib v40.14 I guess
>> I'll have to be careful a bit. Can you tell me what are the bugs in
>> pools functions?

>   The bug is in the code that should take care of empty pools, i.e.
>pools whose puddles were completely freed. The bug is that these
>empty pools do not get released until the entire pool is deleted.
>For example, if you were to create a pool, allocate ten MBytes of
>memory from that pool, then release every single allocation, you'd
>still have that pool eating up ten MBytes of memory. Only the final
>DeletePool() would release that memory.

Ouch. (Hopefully) now I finally know everything about that problem,
thanks :)

[...]

BTW, there's something strange I stumbled upon recently:

#include <proto/dos.h>

#define BUFLEN	1024

void main(void)
{
	char buf[BUFLEN] = {0};
	LONG len, i;

	/* Flush(Input()); */
	if ((len = FRead(Input(), buf, 1, BUFLEN - 1)) > 0)
	{
		Printf("%ld bytes read:\n", len);
		for (i = 0; i < len; i++)
			Printf("%02lx", (LONG)buf[i]);
		Printf("\n");
	}
}

When run:

16.Ram Disk:> Test
Abc<NL><EOF>
5 bytes read:
0A4162630A
~~
Notice the newline before my input? When I uncomment Flush(Input())
everything works fine:

16.Ram Disk:> Test
Abc<NL><EOF>
4 bytes read:
4162630A

No newline at the beginning... Am I missing something, should I have
expected this to happen? (I tried this with normal CON and KingCON,
compiled with SAS/C and gcc).

-- 

     ///  /_\  _ _| |_ ___ _ _ _  _   http://www.bigfoot.com/~TheAntony
__  ///  / _ \| ' \  _/ _ \ ' \ || |   Amiga Translators' Organization
\\\///  /_/ \_\_||_\__\___/_||_\_, |        (*Serbian department*)
 \XX/  TheAntony@bigfoot.com   |__/              Team *AMIGA*

The Universe is a big place... Perhaps the biggest


@ENDNODE
@NODE "Mail_144" " stderr trouble with egcs "
From: nicholai@altavista.net
Date: 07-04-99 16:27:54
Subject: @{b}stderr trouble with egcs@{ub}

From: nicholai@altavista.net

Hi,

I've got a problem with egcs under amigaos:

FILE *test = stderr;

Does anyone know why this declaration and
initialization produces the following error:

test.c:3: initializer element is not constant


I'm using ixemul and stdio.h is of course included
in the example above


/Nicholai

@ENDNODE
@NODE "Mail_145" " Re: stderr trouble with egcs "
From: nicholai@altavista.net
Date: 07-05-99 07:59:58
Subject: @{b}Re: stderr trouble with egcs@{ub}

From: nicholai@altavista.net

> stderr is allowed to be defined by a macro (and usually is).  In this
> case, the stderr macro appears to involve a function call.  The lesson
> is that you shouldn't depend on things the Standard doesn't guarantee.

As far as I can see, section 7.5 in K&R clearly states that stdin, stdout and
stderr are all file pointers. Did I miss something?

/Nicholai


----------------------------------------------------------------
Get your free email from AltaVista at http://altavista.iname.com

@ENDNODE
@NODE "Mail_146" " Re: stderr trouble with egcs "
From: Ben Hutchings <womble@zzumbouk.demon.co.uk>
Date: 07-05-99 23:58:37
Subject: @{b}Re: stderr trouble with egcs@{ub}

From: Ben Hutchings <womble@zzumbouk.demon.co.uk>

On Mon, Jul 05, 1999 at 03:59:58AM -0400, nicholai@altavista.net wrote:
> From: nicholai@altavista.net
> 
> > stderr is allowed to be defined by a macro (and usually is).  In this
> > case, the stderr macro appears to involve a function call.  The lesson
> > is that you shouldn't depend on things the Standard doesn't guarantee.
> 
> As far as I can see, section 7.5 in K&R clearly states that stdin, stdout and
> stderr are all file pointers. Did I miss something?

They are.  The file pointer may be the return value from a function
call or the result of some other expression that can only be evaluated
at run-time.  I'll check the ANSI standard if you like.

-- 
Ben Hutchings - womble@zzumbouk.demon.co.uk, http://www.zzumbouk.demon.co.uk
Team *AMIGA* | Jay Miner Society | Linux - the choice of a GNU generation
In a hierarchy, every employee tends to rise to his level of incompetence.

@ENDNODE
@NODE "Mail_147" " TCP/IP sockets "
From: Rod Schnell <rodsch@telusplanet.net>
Date: 07-19-99 20:25:01
Subject: @{b}TCP/IP sockets@{ub}

From:	Rod Schnell <rodsch@telusplanet.net>

Hello,

  I'm having some problems with sockets. The problems seem to be mostly due
to lack of decent documentation and examples for multiple and/or non-blocking
sockets. The standard reference books use read(), write(), thread() etc., and
don't cover amiga specific differences, while the amiga specific docs don't
cover non-blocking and/or multiple socket handling very well at all.

I need multiple sockets launched from a master process, running either as
non-blocking or preferably seperate processes and am unsure how to implement
them properly.

I also need a non-blocking connect() routine that can be aborted (from a gui)
and a handler for it.

If anyone has or knows where I can find solutions to these problems, I would
appreciate some help. Working example code using AmiTcp or Miami would be
especially helpfull.

  Rod


@ENDNODE
@NODE "Mail_148" " Re: Text file lines "
From: Mike Carter <mike.carter@bigfoot.com>
Date: 07-13-99 18:21:19
Subject: @{b}Re: Text file lines@{ub}

From: "Mike Carter" <mike.carter@bigfoot.com>

Re: [amiga-c] Text file lines interested me.  Here's some more to think about...

> From: "Ray Akey" <rakey@cnetbbs.net>
> 
> On Saturday, June 26, 1999 5:48 PM, Mike Carter wrote:
> > > > Why not remove the \n then?
> > > > 
> > > > Readbuffer[strlen(Readbuffer) - 1] = '\0';
> > > 
> > > Don't do that - the last line might not have a newline at the end of
> > > it.  Get a pointer to the end of the string, and then check whether
> > > there's a newline there or not.
> > 
> > That will probably be why my program crashes sometimes and also causes
> > hits.
> 
> Best way is to use strchr() or strrchr()..
> 
> char *s;
> if(s=strchr(Readbuffer, '\n'))
>     *s = '\0';

Where are these strchr() commands?  I *do* want to only use ROM
commands or runtime library commands if at all possible to keep size
down of my exes :-)

Dinky do,


Mike C
-- 
-------------------------------------------------------------
PROJECT STATUS...
Key To Driving Theory [#####################] done!
Scalos add-ons suite  [#########------------] usable now
<unamed> mp3 player   [####-----------------] skins & gadgets
-------------------------------------------------------------
JOIN UP TODAY -> http://www.onelist.com/subscribe.cgi/amiga-c

@ENDNODE
@NODE "Mail_149" " Re: Text file lines "
From: Olaf Barthel <olsen-amigac@sourcery.han.de>
Date: 07-14-99 08:35:16
Subject: @{b}Re: Text file lines@{ub}

From: "Olaf Barthel" <olsen-amigac@sourcery.han.de>

On Jul 13 Mike (Mike Carter) wrote:

> From: "Mike Carter" <mike.carter@bigfoot.com>
> 
> Re: [amiga-c] Text file lines interested me.  Here's some more to think about...
> 
> > From: "Ray Akey" <rakey@cnetbbs.net>
> > 
> > On Saturday, June 26, 1999 5:48 PM, Mike Carter wrote:
> > > > > Why not remove the \n then?
> > > > > 
> > > > > Readbuffer[strlen(Readbuffer) - 1] = '\0';
> > > > 
> > > > Don't do that - the last line might not have a newline at the end of
> > > > it.  Get a pointer to the end of the string, and then check whether
> > > > there's a newline there or not.
> > > 
> > > That will probably be why my program crashes sometimes and also causes
> > > hits.
> > 
> > Best way is to use strchr() or strrchr()..
> > 
> > char *s;
> > if(s=strchr(Readbuffer, '\n'))
> >     *s = '\0';
> 
> Where are these strchr() commands?  I *do* want to only use ROM
> commands or runtime library commands if at all possible to keep size
> down of my exes :-)

   Interesting point, but consider this: you'd have to implement a lot of
code on your own that may already have a working counterpart in the
compiler's run time library. While you could, of course, write all this
code yourself, the code in the compiler's run time library has already
been tested for correctness and compliance with the ANSI `C'
standard (well... this is true for commercial packages like SAS/C
or the GNU/BSD libraries, other packages may differ). What this boils
down to (or should boil down to) is that you will have to spend less
time checking the correctness of your implementation. Also, the size
of your program won't explode just because you resort to using routines
from the compiler run time library. Fairly basic building blocks like
strchr() or strcpy() are really tiny compared to other, more complex
components like the whole stdio code.

@ENDNODE
@NODE "Mail_150" " Re: Text file lines "
From: Andrew Markwell <andrewmarkwell@ukonline.co.uk>
Date: 07-14-99 13:41:22
Subject: @{b}Re: Text file lines@{ub}

From: Andrew Markwell <andrewmarkwell@ukonline.co.uk>

On 13-Jul-99  did write:
> From: "Mike Carter" <mike.carter@bigfoot.com>
> 
> Re: [amiga-c] Text file lines interested me. Here's some more to think
> about...
> 
>> From: "Ray Akey" <rakey@cnetbbs.net>
>> 
>> On Saturday, June 26, 1999 5:48 PM, Mike Carter wrote:
>>>>> Why not remove the \n then?
>>>>> 
>>>>> Readbuffer[strlen(Readbuffer) - 1] = '\0';
>>>> 
>>>> Don't do that - the last line might not have a newline at the end of
>>>> it.  Get a pointer to the end of the string, and then check whether
>>>> there's a newline there or not.
>>> 
>>> That will probably be why my program crashes sometimes and also causes
>>> hits.
>> 
>> Best way is to use strchr() or strrchr()..
>> 
>> char *s;
>> if(s=strchr(Readbuffer, '\n'))
>>     *s = '\0';
> 
> Where are these strchr() commands?  I *do* want to only use ROM
> commands or runtime library commands if at all possible to keep size
> down of my exes :-)

They are all in string.h and stdlib.h, also functions like memcpy(), memset(),
are useful for dealing with old style C strings.


@ENDNODE
@NODE "Mail_151" " The right way !! "
From: Colin Wenzel <colstv@hotkey.net.au>
Date: 07-04-99 15:39:34
Subject: @{b}The right way !!@{ub}

From: Colin Wenzel <colstv@hotkey.net.au>


This may sound rather simple to some of you, 
but I am having a hard time figuring out how to open 
my screens & windows in a way that will work
with graphics cards  & various different screen modes.

I have been coding in ASM & C for 12 years on the Amiga & have
a rather elaborate collection of library routines I have written
over the years,  but recently, a few friends have complained that
my programs wont promote properly on a gfx card or open their
screens in a "wierd way"  that looks bad.

Until recently  (2 months) I have just been using PAL HIRES 
screens on the OCS, ECS & AGA chipset...

I first call GetScreenData() to find  what the WBENCHSCREEN's
Width & Height are set to.

Then I just call OpenScreen() with these values & the ViewMode
set to  "HIRES".

This has been working fine for years until someone decides to set 
their WB screen to  interlaced,   then the GetScreenData()
returns a height that is twice as high as a HIRES screen.

So,  because my programs require 640x256  min display mode,
this seems to be fine,  except that  the text is half the size
& a bit squashed,  but it looks OK, so far...  
But !!   If I try to promote it to the gfx card (using mode pro)
in 800x600,  all hell breaks out....

The screen values are  whatever the WB screen was 
for example,   800x600....
My screen will open perfectly,  but the OpenWindow()  
(using the same with & height as the screen)
failes & refuses to open, until I limit the window height to 512.

This leaves a shitty blank band at the bottom of the screen.
with nothing in the bottom third...

No matter what I do, I cannot get a window to open in 800x600
( or whatever my screen & the WB was )

Any suggestions...... ??

Actually, is it possible to open my screens ON the gfx card
rather than using mode pro,   if yes,  how do you do it ??




Also,  I have seen some programs that have a 
Screen Mode  requester pop up.

I have looked in Gfx & intuition autodocs but can't find anything
in there about it.

Where/how do you get one of them to happen & what
results do you get from it...... 
 
----------------------------------------------------
Colin Wenzel. Australia.   colstv@hotkey.net.au
URL:    http://www.hotkey.net.au/~colstv/      
                                               
'AMIGA' 4000T With  CS-III 68060 / 50Mhz 150Mb RAM. 
----------------------------------------------------


@ENDNODE
@NODE "Mail_152" " Re: The right way !! "
From: Ben Hutchings <womble@zzumbouk.demon.co.uk>
Date: 07-05-99 00:59:51
Subject: @{b}Re: The right way !!@{ub}

From: Ben Hutchings <womble@zzumbouk.demon.co.uk>

On Mon, Jul 05, 1999 at 01:39:34AM +1000, Colin Wenzel wrote:
> From: Colin Wenzel <colstv@hotkey.net.au>
> 
> 
> This may sound rather simple to some of you, 
> but I am having a hard time figuring out how to open 
> my screens & windows in a way that will work
> with graphics cards  & various different screen modes.
<snip>
> I first call GetScreenData() to find  what the WBENCHSCREEN's
> Width & Height are set to.

GetScreenData has been obsolete since OS 2.0.  It now tends to lie, in
order to avoid confusing old software.  Read its autodoc entry for
information on the functions that replace it.

<snip>
> Also,  I have seen some programs that have a 
> Screen Mode  requester pop up.
> 
> I have looked in Gfx & intuition autodocs but can't find anything
> in there about it.
> 
> Where/how do you get one of them to happen & what
> results do you get from it...... 

That's part of asl.library.

-- 
Ben Hutchings - womble@zzumbouk.demon.co.uk, http://www.zzumbouk.demon.co.uk
Team *AMIGA* | Jay Miner Society | Linux - the choice of a GNU generation
Sturgeons's Law: Ninety percent of everything is crap.

@ENDNODE
@NODE "Mail_153" " Re: The right way !! "
From: Steffen <steffen.mars@stenloese.mail.telia.com>
Date: 07-05-99 01:22:36
Subject: @{b}Re: The right way !!@{ub}

On 04-Jul-99, Colin Wenzel claimed:
>From: Colin Wenzel <colstv@hotkey.net.au>


>This may sound rather simple to some of you, 
>but I am having a hard time figuring out how to open 
>my screens & windows in a way that will work
>with graphics cards  & various different screen modes.

>I have been coding in ASM & C for 12 years on the Amiga & have
>a rather elaborate collection of library routines I have written
>over the years,  but recently, a few friends have complained that
>my programs wont promote properly on a gfx card or open their
>screens in a "wierd way"  that looks bad.

>Until recently  (2 months) I have just been using PAL HIRES 
>screens on the OCS, ECS & AGA chipset...
So, what are you runing now ?

>I first call GetScreenData() to find  what the WBENCHSCREEN's
>Width & Height are set to.
>Then I just call OpenScreen() with these values & the ViewMode
>set to  "HIRES".

>This has been working fine for years until someone decides to set 
>their WB screen to  interlaced,   then the GetScreenData()
>returns a height that is twice as high as a HIRES screen.

>So,  because my programs require 640x256  min display mode,
>this seems to be fine,  except that  the text is half the size
>& a bit squashed,  but it looks OK, so far...
Your program is obviously designed to run 640x256, so you should use
that screen size, instead of that of the workbench.

>But !!   If I try to promote it to the gfx card (using mode pro)
>in 800x600,  all hell breaks out....
No mode-pro needed:
Try OpenScreenTags() or OpenScreenTagList(). Then supply this tag:
{SA_DisplayID,DEFAULT_MONITOR_ID}

>The screen values are  whatever the WB screen was 
>for example,   800x600....
>My screen will open perfectly,  but the OpenWindow()  
>(using the same with & height as the screen)
>failes & refuses to open, until I limit the window height to 512.
Are you certain it didn't run out of chip-mem ?

>This leaves a shitty blank band at the bottom of the screen.
>with nothing in the bottom third...

>No matter what I do, I cannot get a window to open in 800x600
>( or whatever my screen & the WB was )

>Any suggestions...... ??

>Actually, is it possible to open my screens ON the gfx card
>rather than using mode pro,   if yes,  how do you do it ??
I guess you just supply the right modeid.

>Also,  I have seen some programs that have a 
>Screen Mode  requester pop up.

>I have looked in Gfx & intuition autodocs but can't find anything
>in there about it.

>Where/how do you get one of them to happen & what
>results do you get from it...... 

This is from a window class i made (attached file). You should supply a
Window* where the SysWindow is located. You probably want to check the
asl autodocs. Note this is cxx, but can easily be converted to c.

@{fg shine}There should be a file screenmodereq.cxx included with this guide.@{fg text}
@ENDNODE
@NODE "Mail_154" " Re: The right way !! "
From: Colin Wenzel <colstv@hotkey.net.au>
Date: 07-05-99 03:14:49
Subject: @{b}Re: The right way !!@{ub}

From: Colin Wenzel <colstv@hotkey.net.au>

On 05-Jul-99, Steffen wrote:
>On 04-Jul-99, Colin Wenzel claimed:
>>From: Colin Wenzel <colstv@hotkey.net.au>
-snip-
>>Until recently  (2 months) I have just been using PAL HIRES 
>>screens on the OCS, ECS & AGA chipset...

>So, what are you runing now ?
I got hold of an ECS Spectrum card & I have CyberGfx 3 set up on it.
 
-snip-
>>But !!   If I try to promote it to the gfx card (using mode pro)
>>in 800x600,  all hell breaks out....

>No mode-pro needed:
>Try OpenScreenTags() or OpenScreenTagList(). Then supply this tag:
>{SA_DisplayID,DEFAULT_MONITOR_ID}

I didn't know about how to open up screens on gfx cards, or about
any of the new modes,  because all my docs seem to stop about v2,
although I got the dev-cd  & have the 3.1 autodocs & stuff,  
    (if you can find anything in that mess )
but when I went through it,  half of the stuff assumes you already 
know what it's for ??

For example,  I havn't used any functions that use TAGS.

Whenever I try to use anything,  the linker either refuses
to link in the stub  (there isn't one)  or if it does link
it crashes dismally,  I expect I am not using tags properly.

They just "APPEARED"   ka-fump !!!     
No explanations, no tutorials, no nothing.....

I still can't quite figure out what I am doing wrong....
I believe that the tags are supposed to be 32 bits long,
my compiler  (Aztec 5.2)  defaults to 16 bit ints,
so I think I should try casting the tags as longs..... 
But I havn't tried using them again for ages because
everything I did refused to work & I sort of lost
heart because I spent so much wasted time on them. 
 
The main problem is that there are no linker stubs,
I had to make them up myself for the new
UMult32() &  SDivMod32() functions in the
utility library.

Unfortunately, I can't find any updates to my compiler,
the company seems to have disappeared.
I had to "repair"  it myself, to fix the 060 FRESTORE bug
when I got the Cyberstorm 060.
(Also, I had to re-write the ASM startup code....)

So, eventually I will get most of the new stubs together & 
be able to use the functions,  the problem is that I
need to know WHAT I need to write stubs for. ?



>>Actually, is it possible to open my screens ON the gfx card
>>rather than using mode pro,   if yes,  how do you do it ??

>I guess you just supply the right modeid.

I presume by this you mean the 'ViewModes'  field 
of an  ExtNewScreen structure.  ?? 



And thanks heaps for the sample  screenmode requester code,
I have now found it in the asl docs as you said...

Funny that,  I never knew what ASL was for, 
I never even thought of looking in there..

I always used the  intuition  EasyRequest & AutoRequest
functions,  I thought that intuition had all the requesters....


Now all I have to do is figure out what a damn  BOOPSI   is ?


----------------------------------------------------
Colin Wenzel. Australia.   colstv@hotkey.net.au
URL:    http://www.hotkey.net.au/~colstv/      
                                               
'AMIGA' 4000T With  CS-III 68060 / 50Mhz 150Mb RAM. 
----------------------------------------------------


@ENDNODE
@NODE "Mail_155" " Re: The right way !! "
From: Colin Wenzel <colstv@hotkey.net.au>
Date: 07-05-99 03:52:44
Subject: @{b}Re: The right way !!@{ub}

From: Colin Wenzel <colstv@hotkey.net.au>

On 05-Jul-99, Ben Hutchings wrote:
>From: Ben Hutchings <womble@zzumbouk.demon.co.uk>
>GetScreenData has been obsolete since OS 2.0.  It now tends to lie, in
>order to avoid confusing old software.  Read its autodoc entry for
>information on the functions that replace it.

I didn't know that..
The problem is that I read the autodocs when they first
put that function in there,  it never occured to me that it
would change, so I never went back & re-read  it...

-snip-
>>Screen mode requester.
>That's part of asl.library.

Sure is,  now I know where to look............!!
Thanks...

----------------------------------------------------
Colin Wenzel. Australia.   colstv@hotkey.net.au
URL:    http://www.hotkey.net.au/~colstv/      
                                               
'AMIGA' 4000T With  CS-III 68060 / 50Mhz 150Mb RAM. 
----------------------------------------------------


@ENDNODE
@NODE "Mail_156" " Re: The right way !! "
From: Jesper Svennevid <jesper@fxrealm.com>
Date: 07-05-99 13:05:34
Subject: @{b}Re: The right way !!@{ub}

From: "Jesper Svennevid" <jesper@fxrealm.com>

> From: Colin Wenzel <colstv@hotkey.net.au>
> 
> 
> This may sound rather simple to some of you, 
> but I am having a hard time figuring out how to open 
> my screens & windows in a way that will work
> with graphics cards  & various different screen modes.
> 
> I have been coding in ASM & C for 12 years on the Amiga & have
> a rather elaborate collection of library routines I have written
> over the years,  but recently, a few friends have complained that
> my programs wont promote properly on a gfx card or open their
> screens in a "wierd way"  that looks bad.
> 
> Until recently  (2 months) I have just been using PAL HIRES 
> screens on the OCS, ECS & AGA chipset...
> 
> I first call GetScreenData() to find  what the WBENCHSCREEN's
> Width & Height are set to.
> 
> Then I just call OpenScreen() with these values & the ViewMode
> set to  "HIRES".
> 
> This has been working fine for years until someone decides to set 
> their WB screen to  interlaced,   then the GetScreenData()
> returns a height that is twice as high as a HIRES screen.
> 
> So,  because my programs require 640x256  min display mode,
> this seems to be fine,  except that  the text is half the size
> & a bit squashed,  but it looks OK, so far...  
> But !!   If I try to promote it to the gfx card (using mode pro)
> in 800x600,  all hell breaks out....
> 
> The screen values are  whatever the WB screen was 
> for example,   800x600....
> My screen will open perfectly,  but the OpenWindow()  
> (using the same with & height as the screen)
> failes & refuses to open, until I limit the window height to 512.
> 
> This leaves a shitty blank band at the bottom of the screen.
> with nothing in the bottom third...
> 
> No matter what I do, I cannot get a window to open in 800x600
> ( or whatever my screen & the WB was )
> 
> Any suggestions...... ??
> 
> Actually, is it possible to open my screens ON the gfx card
> rather than using mode pro,   if yes,  how do you do it ??
> 

Have a look at the functions graphics.library/BestModeIDA(),
(or at the native gfx-cards software mode-finder), and use that
one to obtain the screenmode (most prefferable, use the native
routine for the gfxboard at first (I think both Picasso96 and
CGFX has one), and if they aren't available, use BestModeIDA()).

If you can't open the library needed for doing gfxboard-type
access, you can for sure assume that the screen you open with
the displayid isn't on running on a non-native(ocs,ecs,aga)
display, but be sure to double-check with a call to
GetBitMapAttrs() with BMA_STANDARD.

Example-code:

enum ScreenType
{
   SCTYPE_PLANAR = 0,
   SCTYPE_GFXBOARD
};

struct Screen* gpScreen = NULL; // global pointer to screen
struct Window* gpWindow = NULL; // global pointer to window

unsigned long gScWidth = 0L;   // width of screen
unsigned long gScHeight = 0L;  // height of screen
unsigned long gScDepth = 0L;   // depth of screen
unsigned long gScDisplayMode = INVALID_ID; // screen mode-id
ScreenType gScType = SCTYPE_PLANAR; // type of screen

int OpenMyScreen()
{
   ULONG display_mode = INVALID_ID; // temp-id

   // cybergraphics has been opened previously, but the call
   // might have failed(if cybergraphics isn't available in
   // the system), so we check here. (You should never fail
   // completely if you rely on 3rd-party software for just
   // a few functions)

   // try to find the best mode using cybergraphics

   if(NULL != CyberGfxBase)
   {
      display_mode = BestCModeIDTags(
                     CYBRIDTG_Depth,8 // preffered depth of screen
                     CYBRIDTG_NominalWidth,640, // preffered width
                     CYBRIDTG_NominalHeight,256, // preffered height
                     TAG_END);
   }

   // used both as a fallback if you either can't use the
   // gfxboard-native routine or if it couldn't find a mode

   if(INVALID_ID == display_mode)
   {
      display_mode = BestModeID(
                                 BIDTAG_Depth,8, // preffered depth
                                 BIDTAG_NominalWidth,640,
                                 BIDTAG_NominalHeight,256,
                                 TAG_END);
   }

   // you should add a screenmode-requester here if it fails, just
   // not bail out as I do :)

   if(INVALID_ID == display_mode)
   {
      fprintf(stderr,"ERROR: Could not get display-mode for screen.\n");
      return FALSE;
   }

   // open screen (add a few more tags to this call :)

   if(NULL == (gpScreen = OpenScreenTags(
                              SA_DisplayID,display_mode,
                              SA_Type,CUSTOMSCREEN,
                              TAG_END)))
   {
      fprintf(stderr,"ERROR: Could not open screen.\n");
      return FALSE;
   }

   // NOW you can check the info about the screen, as the call to
   // OpenScreenTags() _MIGHT_ have been promoted

   gScWidth = gpScreen -> Width;
   gScHeight = gpScreen -> Height;
   gScDisplayMode = GetVPModeID(&gpScreen -> ViewPort);
   gScDepth = GetBitMapAttrs(gpScreen -> RastPort.BitMap,BMA_DEPTH);

   // next, query if the screen is running on a gfxboard

   if(NULL != CyberGfxBase)
   {
      if(FALSE != IsCyberMode(gScDisplayMode))
      {
         // yep, we are running on a gfxboard-screen, set
         // the appropriate value

         gScType = SCTYPE_GFXBOARD;

         // here you could proceed with some extra routines
         // to find out if you can do direct-access to the
         // chunky-bitmap with LockScreenTagList(), but I
         // leave this out for now
      }
      else
      {
         // cybergraphics returned negative, we are running
         // on a non-cgfx screen

         // just double-check, some darn hack might have fooled the
         // software

         if(FALSE ==
            GetBitMapAttrs(gpScreen -> RastPort.BitMap,BMA_STANDARD)))
         {
            fprintf(stderr,"ERROR: Bitmap is not of required type.\n");
            return FALSE;
         }
         gScType = SCTYPE_PLANAR;
      }
   }
   else
   {
      // screen-mode is planar

      // just double-check, some darn hack might have fooled the
      // software

      if(FALSE ==
         GetBitMapAttrs(gpScreen -> RastPort.BitMap,BMA_STANDARD)))
      {
         fprintf(stderr,"ERROR: Bitmap is not of required type.\n");
         return FALSE;
      }
      gScType = SCTYPE_PLANAR;
   }

   // open window

   if(NULL == (gpWindow = OpenWindowTags(
                              WA_CustomScreen,gpScreen,
                              WA_Width,gpScreen -> Width,
                              WA_Height,gpScreen -> Height,
                              TAG_END)))
   {
      fprintf(stderr,"ERROR: Could not open window.\n");
      return FALSE;
   }

   // the screen is open, and we know the width,height,depth and if
   // it's running on a gfxboard, ain't that nice? :D And the window
   // should have opened just nicely, covering the entire screen as
   // you 'told' it to, even if it's promoted

   return TRUE;
}

And use the taglist-calls, they are MUCH more easy to
use and very extensible than the original routines. :)

> Also,  I have seen some programs that have a 
> Screen Mode  requester pop up.
> 
> I have looked in Gfx & intuition autodocs but can't find anything
> in there about it.
>
> Where/how do you get one of them to happen & what
> results do you get from it...... 

Use asl.library for that, it includes a VERY easy way to open
screenmode-requesters, I guarantee that the routine you write
for that will be less than 10 lines (including closing/opening
the library and allocation/freeing of the requester :)

You get width, height, depth and display-mode of screen, among
a lot of other things that you might need.

I have a more complete source at home that I can post if you
feel the need of some better reference(I can't guarantee that
the example I wrote above really works, I wrote it in the
mail-client, without includes or autodocs :) ... Some of the
tags might have been wrong, check the arguments for the
function-call in the autodocs for the correct one.

A good place to visit to find info about cybergraphics is
http://www.vgr.com/, you'll find the SDK ready for download
there.

-- 
// Jesper Svennevid : jesper@fxrealm.com
   Software Developer At FXRealm Studios : http://www.fxrealm.com/


@ENDNODE
@NODE "Mail_157" " Re: The right way !! "
From: Colin Wenzel <colstv@hotkey.net.au>
Date: 07-05-99 16:02:23
Subject: @{b}Re: The right way !!@{ub}

From: Colin Wenzel <colstv@hotkey.net.au>


Just a note to  thank you (& others) for assisting me in figuring
out all the new "tag" stuff for opening screens & such.

I have written the stubs for the OpenScreenTagsList() &
The OpenWindowTagList()  & have got it working...
( As well as the display mode requester. )

The problems that I was having a long while ago when I first
tackled this stuff , appears to be the  sizeof the tags.
My old  K&R  compiler was passing (uwords)  on the stack 
to the stubs &  not (ulongs) ,   
so that was the main reason for the trouble.

Thanks.... 
----------------------------------------------------
Colin Wenzel. Australia.   colstv@hotkey.net.au
URL:    http://www.hotkey.net.au/~colstv/      
                                               
'AMIGA' 4000T With  CS-III 68060 / 50Mhz 150Mb RAM. 
----------------------------------------------------


@ENDNODE
@NODE "Mail_158" " Re: The right way !! "
From: Steffen <steffen.mars@stenloese.mail.telia.com>
Date: 07-05-99 18:18:03
Subject: @{b}Re: The right way !!@{ub}

From: Steffen <steffen.mars@stenloese.mail.telia.com>

On 05-Jul-99, Colin Wenzel claimed:
>From: Colin Wenzel <colstv@hotkey.net.au>

>On 05-Jul-99, Steffen wrote:
>>On 04-Jul-99, Colin Wenzel claimed:
>>>From: Colin Wenzel <colstv@hotkey.net.au>
>-snip-
>>>But !!   If I try to promote it to the gfx card (using mode pro)
>>>in 800x600,  all hell breaks out....

>>No mode-pro needed:
>>Try OpenScreenTags() or OpenScreenTagList(). Then supply this tag:
>>{SA_DisplayID,DEFAULT_MONITOR_ID}

>I didn't know about how to open up screens on gfx cards, or about
>any of the new modes,  because all my docs seem to stop about v2,
>although I got the dev-cd  & have the 3.1 autodocs & stuff,  
>    (if you can find anything in that mess )
>but when I went through it,  half of the stuff assumes you already 
>know what it's for ??
Yes, it's not exactly a tutorial.

>For example,  I havn't used any functions that use TAGS.

>Whenever I try to use anything,  the linker either refuses
>to link in the stub  (there isn't one)  or if it does link
>it crashes dismally,  I expect I am not using tags properly.

>They just "APPEARED"   ka-fump !!!     
>No explanations, no tutorials, no nothing.....

>I still can't quite figure out what I am doing wrong....
>I believe that the tags are supposed to be 32 bits long,
>my compiler  (Aztec 5.2)  defaults to 16 bit ints,
>so I think I should try casting the tags as longs..... 
>But I havn't tried using them again for ages because
>everything I did refused to work & I sort of lost
>heart because I spent so much wasted time on them. 

Tags are 32 bits/ ULONG. This *should* work:
Screen* scr;
scr = OpenScreenTags(0,
  SA_Width,640,
  SA_Height,256,
  SA_Depth,4,
  SA_DisplayID,DEFAULT_MONITOR_ID);

If it doesn't, check autodocs:intuition/openscreentaglist (example).

Or try:
Screen* scr;
TagItemtags[]={
  {SA_Width,640},
  {SA_Height,256},
  {SA_Depth,4},
  {SA_DisplayID,DEFAULT_MONITOR_ID},
  {TAG_DONE,0}};
scr = OpenScreenTagList(0,tags);

>....
>Unfortunately, I can't find any updates to my compiler,
>the company seems to have disappeared.
>I had to "repair"  it myself, to fix the 060 FRESTORE bug
>when I got the Cyberstorm 060.
>(Also, I had to re-write the ASM startup code....)

How about a new compiler ?


>So, eventually I will get most of the new stubs together & 
>be able to use the functions,  the problem is that I
>need to know WHAT I need to write stubs for. ?

What is a stub ??


>>>Actually, is it possible to open my screens ON the gfx card
>>>rather than using mode pro,   if yes,  how do you do it ??

>>I guess you just supply the right modeid.

>I presume by this you mean the 'ViewModes'  field 
>of an  ExtNewScreen structure.  ?? 

No, by a SA_DisplayID tag.


>And thanks heaps for the sample  screenmode requester code,
>I have now found it in the asl docs as you said...
You're welcome.


>Now all I have to do is figure out what a damn  BOOPSI   is ?
Don't look at me...


@ENDNODE
@NODE "Mail_159" " Re: The right way !! "
From: Rod Schnell <rodsch@telusplanet.net>
Date: 07-05-99 19:53:12
Subject: @{b}Re: The right way !!@{ub}

From:	Rod Schnell <rodsch@telusplanet.net>

Hello Colin

On 04-Jul-99, Colin Wenzel wrote:
> 
> I didn't know about how to open up screens on gfx cards, or about
> any of the new modes,  because all my docs seem to stop about v2,
> although I got the dev-cd  & have the 3.1 autodocs & stuff,  
>    (if you can find anything in that mess )
> but when I went through it,  half of the stuff assumes you already 
> know what it's for ??
> 
> For example,  I havn't used any functions that use TAGS.
>
> Whenever I try to use anything,  the linker either refuses
> to link in the stub  (there isn't one)  or if it does link
> it crashes dismally,  I expect I am not using tags properly.
> 
> They just "APPEARED"   ka-fump !!!     
> No explanations, no tutorials, no nothing.....
>

Get ahold of the amigamail archives (there are 2), they contain a lot of good
example code for all kinds of things.


> I still can't quite figure out what I am doing wrong....
> I believe that the tags are supposed to be 32 bits long,
> my compiler  (Aztec 5.2)  defaults to 16 bit ints,
>

Aztec hasn't been supported for many, many years... 10 or 15 years, if I
remember rightly. :)

> 
> Now all I have to do is figure out what a damn  BOOPSI   is ?
> 

BOOPSI = Basic Object Oriented ProgrammingSystem for Intuition. In a nutshell,
it's a way of adding new functionality to intuition through class libraries.

  Rod


@ENDNODE
@NODE "Mail_160" " Re: The right way !! "
From: Ben Hutchings <womble@zzumbouk.demon.co.uk>
Date: 07-05-99 23:52:51
Subject: @{b}Re: The right way !!@{ub}

From: Ben Hutchings <womble@zzumbouk.demon.co.uk>

On Tue, Jul 06, 1999 at 02:02:23AM +1000, Colin Wenzel wrote:
<snip>
> The problems that I was having a long while ago when I first
> tackled this stuff , appears to be the  sizeof the tags.
> My old  K&R  compiler

The differences between K&R first edition and Standard C have nothing
to do with this.  Standard C requires that int can store integers from
-32767 to 32767, so it can certainly be a 16-bit machine type.

> was passing (uwords) on the stack to the stubs & not (ulongs) ,

It was passing ints as ints!

> so that was the main reason for the trouble.

Right.  Commodore's NDK doesn't support use of 16-bit ints - did it
ever?

-- 
Ben Hutchings - womble@zzumbouk.demon.co.uk, http://www.zzumbouk.demon.co.uk
Team *AMIGA* | Jay Miner Society | Linux - the choice of a GNU generation
In a hierarchy, every employee tends to rise to his level of incompetence.

@ENDNODE
@NODE "Mail_161" " Re: The right way !! "
From: Colin Wenzel <colstv@hotkey.net.au>
Date: 07-06-99 02:05:46
Subject: @{b}Re: The right way !!@{ub}

From: Colin Wenzel <colstv@hotkey.net.au>

On 06-Jul-99, Ben Hutchings wrote:
>From: Ben Hutchings <womble@zzumbouk.demon.co.uk>

-snip-
>>..was passing (uwords) on the stack to the stubs & not (ulongs) ,
>      It was passing ints as ints!
>>so that was the main reason for the trouble.
>     Right.  Commodore's NDK doesn't support use of 16-bit ints -
>     did it ever?

Hmmmm..  Interesting point,  I remember that there was a 
"battle of the compilers" back in the 80's   where the
two main systems were Lattice-C  & Manx-C
   (it was in Australia anyway)

The normal programming practice of the time was to
use 16 bit ints, but the lattice compiler used 32
bit ints exclusively.

This allowed for horrid things like:
" int WindowPTR; "
to be used  (& it worked)   providing you used lattice C.

Although bad coding like this did still work well, 
the trouble occured when you tried to compile it on Manx.

At least there was a    +L  switch that would default all the
ints to longs,  that would allow you to get the thing compiled anyway.  

But to answer your question,  the answer is YES,  
ints were supposed to be 16 bits..  (words)  

For another instance,  if you specify a constant  '45'  as an
argument to a function, then a 16 bit  '45' gets pushed on the stack.
If you specify  '45L'   then a 32 bit push occurs.

Remember,  there is no argument type or count checking here....
Only the return value & type from a function can flag an error.

We have a tool called 'lint'   written by a company called
'Gimpel'  that did the argument type & count checking..
But you had to _use it_ before you found out if you stuffed up.
(Or just watch the fireworks)

Unfortunately,  like the proliferation of Microsoft & Intel, 
not necessarily the  best solution wins the battle.
The lattice compiler's won out by sheer numbers & the
ints turned into 32 bits by default !!!

Now no one  knows any different...  

----------------------------------------------------
Colin Wenzel. Australia.   colstv@hotkey.net.au
URL:    http://www.hotkey.net.au/~colstv/      
                                               
'AMIGA' 4000T With  CS-III 68060 / 50Mhz 150Mb RAM. 
----------------------------------------------------


@ENDNODE
@NODE "Mail_162" " Re: The right way !! "
From: Colin Wenzel <colstv@hotkey.net.au>
Date: 07-06-99 02:36:09
Subject: @{b}Re: The right way !!@{ub}

From: Colin Wenzel <colstv@hotkey.net.au>

On 06-Jul-99, Steffen wrote:
>From: Steffen <steffen.mars@stenloese.mail.telia.com>

>Tags are 32 bits/ ULONG. This *should* work:
>Screen* scr;
>scr = OpenScreenTags(0,
>  SA_Width,640,
>  SA_Height,256,
>  SA_Depth,4,
>  SA_DisplayID,DEFAULT_MONITOR_ID);


That does NOT work, but this does, 
if I declare the constants as longs......................

>Tags are 32 bits/ ULONG. This *should* work:
>Screen* scr;
>scr = OpenScreenTags( 0L,
>  SA_Width, 640L,
>  SA_Height, 256L,
>  SA_Depth, 4L,
>  SA_DisplayID,  (ulong)DEFAULT_MONITOR_ID);

The SA_#?    definitions are declared as 32 bit in the includes.


---------


>Or try:
>Screen* scr;
>TagItemtags[]={
>  {SA_Width,640},
>  {SA_Height,256},
>  {SA_Depth,4},
>  {SA_DisplayID,DEFAULT_MONITOR_ID},
>  {TAG_DONE,0}};
>scr = OpenScreenTagList(0,tags);

This works because a TagItem is declared as:
{
 ULONG ti_Tag; 
 ULONG ti_Data;
}

Also the constants 640,256....  et al   are placed into
a 32 bit structure space.   They get extended to 32 bits
automatically.



>>....
>>Unfortunately, I can't find any updates to my compiler,
>>the company seems to have disappeared.
>>I had to "repair"  it myself, to fix the 060 FRESTORE bug
>>when I got the Cyberstorm 060.
>>(Also, I had to re-write the ASM startup code....)

>  How about a new compiler ?

Hmmm...   thought about it,  especially when the 
060 problems cropped up..

But that means I will have to convert megabytes of 
K&R source code to c++ or whatever...
Plus, all my linker libraries are not transportable to others.

Also,  I have tried (briefly) a couple like DICE & another ??
But I couldn't get them going...

So,  until the new machine comes out & we find out what
CPU we are going to code on in the future,  i'll leave that
horrendous job until it's required.


>>So, eventually I will get most of the new stubs together & 
>>be able to use the functions,  the problem is that I
>>need to know WHAT I need to write stubs for. ?

>What is a stub ??

This is a stub.....................


#asm
include   '_LVOs'
xref  _SysBase
public  _OpenLibrary

_OpenLibrary:
  move.l  (_SysBase),a6
  move.l  4(sp),a1
  move.l  8(sp),d0
  jmp  _LVOOpenLibrary(a6)

#endasm

----------------------------
It is the entry point for calls to the  the OS,   
the stubs are attached to your object by the linker.

You need one of these for EVERY call in the OS.
I think they are already in your amiga.lib.

Unfortunately my amiga.lib stops at v2,  
so I have to make my own for the new calls.

I can't use the other versions  out there 
because the manx linker uses a different format.
(well the v3.6a did,  maybe I should check again.. ?
  since I got hold of v5.2 it may have changed... )
 



>>>I guess you just supply the right modeid.

>>I presume by this you mean the 'ViewModes'  field 
>>of an  ExtNewScreen structure.  ?? 

>No, by a SA_DisplayID tag.

I get it now,  I thought for a minute that you still had to 
supply the NewScreen structure pointer AND the tags.....



----------------------------------------------------
Colin Wenzel. Australia.   colstv@hotkey.net.au
URL:    http://www.hotkey.net.au/~colstv/      
                                               
'AMIGA' 4000T With  CS-III 68060 / 50Mhz 150Mb RAM. 
----------------------------------------------------


@ENDNODE
@NODE "Mail_163" " Re: The right way !! "
From: Rod Schnell <rodsch@telusplanet.net>
Date: 07-06-99 05:00:22
Subject: @{b}Re: The right way !!@{ub}

From:	Rod Schnell <rodsch@telusplanet.net>

Hello Colin

On 05-Jul-99, Colin Wenzel wrote:
> 
>>  How about a new compiler ?
> 
> Hmmm...   thought about it,  especially when the 
> 060 problems cropped up..
> 
> But that means I will have to convert megabytes of 
> K&R source code to c++ or whatever...
> Plus, all my linker libraries are not transportable to others.
> 
> Also,  I have tried (briefly) a couple like DICE & another ??
> But I couldn't get them going...
>

Have you tried SAS/C? It handles K&R C, works with the lastest libs and
there's plenty of existing source for it... It was and probably still is the
most used amiga C compiler.

  Rod


@ENDNODE
@NODE "Mail_164" " Re: The right way !! "
From: Rod Schnell <rodsch@telusplanet.net>
Date: 07-06-99 05:08:49
Subject: @{b}Re: The right way !!@{ub}

From:	Rod Schnell <rodsch@telusplanet.net>

Hello Colin

On 05-Jul-99, Colin Wenzel wrote:
> 
> Unfortunately,  like the proliferation of Microsoft & Intel, 
> not necessarily the  best solution wins the battle.
> The lattice compiler's won out by sheer numbers & the
> ints turned into 32 bits by default !!!

> Now no one  knows any different...  
> 

Actually, Lattice was bought out by SAS years ago, the compiler became SAS/C
and integer size is an option now. It can be set to use either 16 or 32 ints.

  Rod


@ENDNODE
@NODE "Mail_165" " Re: The right way !! "
From: Colin Wenzel <colstv@hotkey.net.au>
Date: 07-06-99 07:36:38
Subject: @{b}Re: The right way !!@{ub}

From: Colin Wenzel <colstv@hotkey.net.au>

On 06-Jul-99, Rod Schnell wrote:
-snip-
>Have you tried SAS/C? It handles K&R C, works with the lastest libs and
>there's plenty of existing source for it... It was and probably still is the
>most used amiga C compiler.
>  Rod

No I havn't,   I don't know where SAS/C  is available from   ?

But before I jump into something new for the old amiga 
I would want to try it before I buy it,  (if that's at all possible,)
maybe they have a limited executable size version that I
could test to see if it works ok...

I am really saving up for the new system,  obviously, it will
require a whole gammit of new tools,  so I may just put up with
my antique compiler for now,  at least I know her quirks...


----------------------------------------------------
Colin Wenzel. Australia.   colstv@hotkey.net.au
URL:    http://www.hotkey.net.au/~colstv/      
                                               
'AMIGA' 4000T With  CS-III 68060 / 50Mhz 150Mb RAM. 
----------------------------------------------------


@ENDNODE
@NODE "Mail_166" " Re: The right way !! "
From: Ben Hutchings <womble@zzumbouk.demon.co.uk>
Date: 07-08-99 00:09:31
Subject: @{b}Re: The right way !!@{ub}

From: Ben Hutchings <womble@zzumbouk.demon.co.uk>

On Tue, Jul 06, 1999 at 12:05:46PM +1000, Colin Wenzel wrote:
> From: Colin Wenzel <colstv@hotkey.net.au>
> 
> On 06-Jul-99, Ben Hutchings wrote:
> >From: Ben Hutchings <womble@zzumbouk.demon.co.uk>
> 
> -snip-
> >>..was passing (uwords) on the stack to the stubs & not (ulongs) ,
> >      It was passing ints as ints!
> >>so that was the main reason for the trouble.
> >     Right.  Commodore's NDK doesn't support use of 16-bit ints -
> >     did it ever?
> 
> Hmmmm..  Interesting point,  I remember that there was a 
> "battle of the compilers" back in the 80's   where the
> two main systems were Lattice-C  & Manx-C
>    (it was in Australia anyway)
> 
> The normal programming practice of the time was to
> use 16 bit ints, but the lattice compiler used 32
> bit ints exclusively.
> 
> This allowed for horrid things like:
> " int WindowPTR; "
> to be used  (& it worked)   providing you used lattice C.

It is a long-standing bad habit in Unix programs to assume that int,
long and pointer types are all 32-bit.  This assumption has also been
made in the design of SDKs for other operating systems where C is the
main supported development language (Windows, Amiga, etc).  I believe
it results from OS implementors that prefer to use assembly-language
and who know too much about the hardware and too little about
high-level programming.

> Although bad coding like this did still work well, 
> the trouble occured when you tried to compile it on Manx.
> 
> At least there was a    +L  switch that would default all the
> ints to longs,  that would allow you to get the thing compiled anyway.  

int and long are *distinct* types even if they have the same range.

> But to answer your question,  the answer is YES,  
> ints were supposed to be 16 bits..  (words)  
> 
> For another instance,  if you specify a constant  '45'  as an
> argument to a function, then a 16 bit  '45' gets pushed on the stack.
> If you specify  '45L'   then a 32 bit push occurs.
> 
> Remember,  there is no argument type or count checking here....
> Only the return value & type from a function can flag an error.

I'm not sure quite what you are saying here.  I understand the
particular problem of variable-arguments functions.  Does Manx support
prototypes for ordinary functions, or not?

> We have a tool called 'lint'   written by a company called
> 'Gimpel'  that did the argument type & count checking..
> But you had to _use it_ before you found out if you stuffed up.
> (Or just watch the fireworks)
> 
> Unfortunately,  like the proliferation of Microsoft & Intel, 
> not necessarily the  best solution wins the battle.
> The lattice compiler's won out by sheer numbers & the
> ints turned into 32 bits by default !!!

On 68020+, 32-bit integers are the natural integer type; AFAIK there
is no penalty for using long-words over words... except that AmigaOS
uses 68000 alignment rules and therefore compilers may misalign long-
words in memory.

> Now no one  knows any different...

-- 
Ben Hutchings - womble@zzumbouk.demon.co.uk, http://www.zzumbouk.demon.co.uk
Team *AMIGA* | Jay Miner Society | Linux - the choice of a GNU generation
Lowery's Law:
             If it jams, force it. If it breaks, it needed replacing anyway.

@ENDNODE
@NODE "Mail_167" " Re: The right way !! "
From: Tim Hanson <msinister@connectfree.co.uk>
Date: 07-09-99 00:29:57
Subject: @{b}Re: The right way !!@{ub}

From: Tim Hanson <msinister@connectfree.co.uk>

Colin Wenzel wrote this on 05-Jul-99 at 04:52:44
 Hi Colin 

->>> Screen mode requester.
->> That's part of asl.library.
-> 
-> Sure is,  now I know where to look............!!
-> Thanks...

    Might be worth having a look at Cybergraphics library aswell. But... is
the CGfx function CModeRequestTagList() broken? I can`t seem to get it to
filter screen depths.


Tim Hanson,
in the Basement,London.
Amiga A1200T,`040/25,603e/160,32MB Fast,BVisionPPC,
170MB IDE HD,ZIP SCSI,RENO x2CD SCSI,Pace 56K
Don`t waste  your time by visiting
http://www.sinister67.freeserve.co.uk



@ENDNODE
@NODE "Mail_168" " Re: The right way !! "
From: Tim Hanson <msinister@connectfree.co.uk>
Date: 07-09-99 00:35:25
Subject: @{b}Re: The right way !!@{ub}

From: Tim Hanson <msinister@connectfree.co.uk>

Steffen wrote this on 05-Jul-99 at 19:18:03
 Hi Steffen 

-> What is a stub ??

    It`s a bit of code the compiler writes for me to stop me looking even more
stupid than I already do.

      
Tim Hanson,
in the Basement,London.
Amiga A1200T,`040/25,603e/160,32MB Fast,BVisionPPC,
170MB IDE HD,ZIP SCSI,RENO x2CD SCSI,Pace 56K
Don`t waste  your time by visiting
http://www.sinister67.freeserve.co.uk



@ENDNODE
@NODE "Mail_169" " Re: The right way !! "
From: Tim Hanson <msinister@connectfree.co.uk>
Date: 07-09-99 00:42:02
Subject: @{b}Re: The right way !!@{ub}

From: Tim Hanson <msinister@connectfree.co.uk>

Rod Schnell wrote this on 05-Jul-99 at 20:53:12
 Hi Rod 

-> 
-> BOOPSI = Basic Object Oriented ProgrammingSystem for Intuition. In a
-> nutshell, it's a way of adding new functionality to intuition through class
-> libraries.

    And no matter how many times I reed the RKM BOOPSI section I still carry
on using gadtools. Is MUI easier to understand or do I need to comprehend
BOOPSI before I even try MUI?
-- 
      
Tim Hanson,
in the Basement,London.
Amiga A1200T,`040/25,603e/160,32MB Fast,BVisionPPC,
170MB IDE HD,ZIP SCSI,RENO x2CD SCSI,Pace 56K
Don`t waste  your time by visiting
http://www.sinister67.freeserve.co.uk



@ENDNODE
@NODE "Mail_170" " Re: The right way !! "
From: Tim Hanson <msinister@connectfree.co.uk>
Date: 07-09-99 00:53:55
Subject: @{b}Re: The right way !!@{ub}

From: Tim Hanson <msinister@connectfree.co.uk>

Rod Schnell wrote this on 06-Jul-99 at 06:00:22
 Hi Rod 

-> 
-> Have you tried SAS/C? It handles K&R C, works with the lastest libs and
-> there's plenty of existing source for it... It was and probably still is
-> the most used amiga C compiler.


    What is K&R?

-- 
      
Tim Hanson,
in the Basement,London.
Amiga A1200T,`040/25,603e/160,32MB Fast,BVisionPPC,
170MB IDE HD,ZIP SCSI,RENO x2CD SCSI,Pace 56K
Don`t waste  your time by visiting
http://www.sinister67.freeserve.co.uk



@ENDNODE
@NODE "Mail_171" " Re: The right way !! "
From: Tim Hanson <msinister@connectfree.co.uk>
Date: 07-09-99 01:02:13
Subject: @{b}Re: The right way !!@{ub}

From: Tim Hanson <msinister@connectfree.co.uk>

Ben Hutchings wrote this on 08-Jul-99 at 01:09:31
 Hi Ben 

-> int and long are *distinct* types even if they have the same range.

    How is this?

-- 
      
Tim Hanson,
in the Basement,London.
Amiga A1200T,`040/25,603e/160,32MB Fast,BVisionPPC,
170MB IDE HD,ZIP SCSI,RENO x2CD SCSI,Pace 56K
Don`t waste  your time by visiting
http://www.sinister67.freeserve.co.uk



@ENDNODE
@NODE "Mail_172" " Re: The right way !! "
From: Colin Wenzel <colstv@hotkey.net.au>
Date: 07-09-99 05:30:44
Subject: @{b}Re: The right way !!@{ub}

From: Colin Wenzel <colstv@hotkey.net.au>

On 09-Jul-99, Tim Hanson wrote:
>From: Tim Hanson <msinister@connectfree.co.uk>

>Steffen wrote this on 05-Jul-99 at 19:18:03
> Hi Steffen 

>-> What is a stub ??

>    It`s a bit of code the compiler writes for me to stop me looking even
more
>stupid than I already do.



Actually it's not,  it is already in the amiga.lib  & just gets linked in...

----------------------------------------------------
Colin Wenzel. Queensland, Australia.
EMAIL:  colstv@hotkey.net.au
URL:    http://www.hotkey.net.au/~colstv/      
                                               
'AMIGA' 4000T With  CS-III 68060 / 50Mhz 150Mb RAM. 
----------------------------------------------------


@ENDNODE
@NODE "Mail_173" " Re: The right way !! "
From: Rod Schnell <rodsch@telusplanet.net>
Date: 07-09-99 05:43:48
Subject: @{b}Re: The right way !!@{ub}

From:	Rod Schnell <rodsch@telusplanet.net>

Hello Tim

On 08-Jul-99, Tim Hanson wrote:
> From: Tim Hanson <msinister@connectfree.co.uk>
> 
> Rod Schnell wrote this on 06-Jul-99 at 06:00:22
> Hi Rod 
> 
> -> 
> -> Have you tried SAS/C? It handles K&R C, works with the lastest libs and
> -> there's plenty of existing source for it... It was and probably still is
> -> the most used amiga C compiler.
> 
> 
>    What is K&R?

Kernighan and Ritchie .... co-authors of "The C Programming Language", it's
considered the best C language reference book, often referred to as "The
Bible".

  Rod


@ENDNODE
@NODE "Mail_174" " Re[2]: [amiga-c] The right way !! "
From: "Andrzej J. Debicki" <denbi@softsystem.pl>
Date: 07-09-99 05:58:42
Subject: @{b}Re[2]: [amiga-c] The right way !!@{ub}

From: "Andrzej J. Debicki" <denbi@softsystem.pl>

Hello Tim,

pi¹tek, 9 lipca 1999, you wrote:

> From: Tim Hanson <msinister@connectfree.co.uk>
>     And no matter how many times I reed the RKM BOOPSI section I still carry
> on using gadtools. Is MUI easier to understand or do I need to comprehend
> BOOPSI before I even try MUI?

I never tried BOOPSI. I started from MUI and I think it's quite easy.
I have to say that my Amiga programming experience started about two
weeks ago. Maybe I'm not a Bill Gates ;-) but I think I know what
I'm doing. Of course I have some problems but I think it's because
I've never before tried to write programs for Ami using gadtools or
boopsi (or something).

--
Andrzej J. Debicki
denbi@softsystem.pl
http://friko3.onet.pl/rz/denbi
------------------------------------------
A1200T 060-50/603e-240, BVision, 34 MB RAM



@ENDNODE
@NODE "Mail_175" " Re: The right way !! "
From: Rod Schnell <rodsch@telusplanet.net>
Date: 07-09-99 06:03:19
Subject: @{b}Re: The right way !!@{ub}

From:	Rod Schnell <rodsch@telusplanet.net>

Hello Tim

On 08-Jul-99, Tim Hanson wrote:
> 
>    And no matter how many times I reed the RKM BOOPSI section I still carry
> on using gadtools. Is MUI easier to understand or do I need to comprehend
> BOOPSI before I even try MUI?

No, but it'd certainly help... Personally, I don't use MUI, I prefer ClassAct.
I won't go into why I prefer ClassAct here as that'd probably start a war. :)

And yes, either ClassAct or MUI is much simpler to use than plain BOOPSI.
In the same way as it's simpler to use ASL requestors than build your own.

  Rod


@ENDNODE
@NODE "Mail_176" " Re: The right way !! "
From: Jesper Svennevid <jesper@fxrealm.com>
Date: 07-09-99 11:21:47
Subject: @{b}Re: The right way !!@{ub}

From: "Jesper Svennevid" <jesper@fxrealm.com>

> And no matter how many times I reed the RKM BOOPSI section I 
> still carry on using gadtools. Is MUI easier to understand or
> do I need to comprehend BOOPSI before I even try MUI?

I never studied BOOPSI when I started doing my guis with
MUI, however it's good to learn how to use them later on :)

-- 
// Jesper Svennevid : jesper@fxrealm.com
   Software Developer At FXRealm Studios : http://www.fxrealm.com/


@ENDNODE
@NODE "Mail_177" " Re: The right way !! "
From: Olaf Barthel <olsen-amigac@sourcery.han.de>
Date: 07-09-99 19:03:30
Subject: @{b}Re: The right way !!@{ub}

From: "Olaf Barthel" <olsen-amigac@sourcery.han.de>

On Jul 09 Tim (Tim Hanson) wrote:

> From: Tim Hanson <msinister@connectfree.co.uk>
> 
> Rod Schnell wrote this on 06-Jul-99 at 06:00:22
>  Hi Rod 
> 
> -> 
> -> Have you tried SAS/C? It handles K&R C, works with the lastest libs and
> -> there's plenty of existing source for it... It was and probably still is
> -> the most used amiga C compiler.
> 
> 
>     What is K&R?

   In this context, it's the "original" language definition of `C' as
described in "The C programming language" by Kernighan & Ritchie, as
opposed to the ANSI `C' standard.

-- 
Home: Olaf Barthel, Brabeckstrasse 35, D-30559 Hannover
 Net: olsen@sourcery.han.de (Home), olsen@logicalline.com (Work)

@ENDNODE
@NODE "Mail_178" " Re: The right way !! "
From: Rod Schnell <rodsch@telusplanet.net>
Date: 07-10-99 19:18:43
Subject: @{b}Re: The right way !!@{ub}

From:	Rod Schnell <rodsch@telusplanet.net>

Hello Olaf

On 09-Jul-99, Olaf Barthel wrote:
>> 
>>    What is K&R?
> 
>   In this context, it's the "original" language definition of `C' as
> described in "The C programming language" by Kernighan & Ritchie, as
> opposed to the ANSI `C' standard.
> 

Actually, the 2nd edition of this book is the one to get and that's ANSI C.

  Rod


@ENDNODE
@NODE "Mail_179" " Re: The right way !! "
From: Ben Hutchings <womble@zzumbouk.demon.co.uk>
Date: 07-10-99 19:44:41
Subject: @{b}Re: The right way !!@{ub}

From: Ben Hutchings <womble@zzumbouk.demon.co.uk>

On Fri, Jul 09, 1999 at 02:02:13AM +0100, Tim Hanson wrote:
> From: Tim Hanson <msinister@connectfree.co.uk>
> 
> Ben Hutchings wrote this on 08-Jul-99 at 01:09:31
>  Hi Ben 
> 
> -> int and long are *distinct* types even if they have the same range.
> 
>     How is this?

Because the definition of the C language (any version - K&R, ANSI/ISO
standard, or C9X draft standard) says so.  This means, for example,
that you can't cast int * to long * implicitly even if int and long
have the same machine representation.

-- 
Ben Hutchings - womble@zzumbouk.demon.co.uk, http://www.zzumbouk.demon.co.uk
Team *AMIGA* | Jay Miner Society | Linux - the choice of a GNU generation
Absolutum obsoletum. (If it works, it's out of date.) - Stafford Beer

@ENDNODE
@NODE "Mail_180" " Re: Re[2]: [amiga-c] The right way !! "
From: Ben Hutchings <womble@zzumbouk.demon.co.uk>
Date: 07-10-99 23:31:25
Subject: @{b}Re: Re[2]: [amiga-c] The right way !!@{ub}

From: Ben Hutchings <womble@zzumbouk.demon.co.uk>

On Fri, Jul 09, 1999 at 07:58:42AM +0200, Andrzej J. Debicki wrote:
> From: "Andrzej J. Debicki" <denbi@softsystem.pl>
> 
> Hello Tim,
> 
> pitek, 9 lipca 1999, you wrote:
> 
> > From: Tim Hanson <msinister@connectfree.co.uk>
> >     And no matter how many times I reed the RKM BOOPSI section I still
> > carry on using gadtools. Is MUI easier to understand or do I need to
> > comprehend BOOPSI before I even try MUI?

The implementation of BOOPSI is really, really ugly.  It is also very
primitive in programming support, in that there is no support for
run-time binding (looking up supported attributes and methods at
run-time), no interface definition language, and no way to ensure
unique method and attribute IDs.  Finally, the fundamental problems it
has are that method invocation is slow and there is no support for
multiple inheritance of interfaces.

> I never tried BOOPSI. I started from MUI and I think it's quite easy.

Both Gadtools and MUI use BOOPSI, but MUI lets you manipulate its
objects as BOOPSI objects whereas Gadtools requires you to use its
special calls.

> I have to say that my Amiga programming experience started about two
> weeks ago. Maybe I'm not a Bill Gates ;-)

Bill Gates is much more of a businessman than a programmer.

> but I think I know what I'm doing. Of course I have some problems
> but I think it's because I've never before tried to write programs
> for Ami using gadtools or boopsi (or something).

Gadtools is easy to get started with, but you have to do a lot of work
to implement important things like keyboard navigation and font-
sensitive layout.  gtlayout.library may make this a lot easier, but
I've not tried it.  It also adds useful gadgets like tabs.

MUI is easy to use and has much more powerful gadgets, but it requires
you to understand OOP.  If you want to create custom gadgets for use
with MUI then you have to learn about the inner workings of BOOPSI,
and that is unpleasant!

-- 
Ben Hutchings - womble@zzumbouk.demon.co.uk, http://www.zzumbouk.demon.co.uk
Team *AMIGA* | Jay Miner Society | Linux - the choice of a GNU generation
Absolutum obsoletum. (If it works, it's out of date.) - Stafford Beer

@ENDNODE
@NODE "Mail_181" " Re: The right way !! "
From: Stephen Williams <sw@nysa.u-net.com>
Date: 07-11-99 15:36:40
Subject: @{b}Re: The right way !!@{ub}

From: Stephen Williams <sw@nysa.u-net.com>

Andrzej J. Debicki wrote:
> I have to say that my Amiga programming experience started about two
> weeks ago. Maybe I'm not a Bill Gates ;-) but I think I know what
> I'm doing.

Bill Gates may be many things, but a genius coder isn't one of them.
Sure, he wrote some code in the early days, but he's built his empire
because he's a canny businessman, not a coder extraordinaire.

You'd be better off aspiring to code like one of the Amiga's legends.
Like Matt Dillon, Holger Kruse or Olaf Barthel (not wanting to embarrass
anyone on the list ;-)

-Stephen

-- 
[[ http://www.nysa.u-net.com/ ]]


@ENDNODE
@NODE "Mail_182" " Re: Re: The right way !! "
From: "Andrzej J. Debicki" <denbi@softsystem.pl>
Date: 07-12-99 06:00:05
Subject: @{b}Re: Re: The right way !!@{ub}

From: "Andrzej J. Debicki" <denbi@softsystem.pl>

Hello Stephen,

niedziela, 11 lipca 1999, you wrote:
> Bill Gates may be many things, but a genius coder isn't one of them.
> Sure, he wrote some code in the early days, but he's built his empire
> because he's a canny businessman, not a coder extraordinaire.

I know that. But that was first example that came to my brain... :-)

> You'd be better off aspiring to code like one of the Amiga's legends.
> Like Matt Dillon, Holger Kruse or Olaf Barthel (not wanting to embarrass
> anyone on the list ;-)

Oh man. I'd like to be like those guys... But I think it'll take some
years...

--
Best regards,
Andrzej J. Debicki
denbi@softsystem.pl
http://friko3.onet.pl/rz/denbi
------------------------------------------
A1200T 060-50/603e-240, BVision, 34 MB RAM



@ENDNODE
@NODE "Mail_183" " VBCC and MUI "
From: Martyn Capewell <martyn@jubileeweb.freeserve.co.uk>
Date: 07-27-99 16:56:35
Subject: @{b}VBCC and MUI@{ub}

From: Martyn Capewell <martyn@jubileeweb.freeserve.co.uk>

Hello,

I've just joined this list after reading the archives from Aminet, and I've
learned quite a lot. It's nice to have some experts around.

I'm currently using VBCC, which I like a lot, but I'm having problems using
it to generate programs that use MUI.

After downloading the MUI developer docs from Aminet, I attempted to compile
some of the example sources. With some modification of demo.h, I got
ShowHide.c working. I then tried Class1.c, which compiled with some
warnings, and crashed at startup.

I compiled with: vc -lmui -lauto Class1.c
(after making a mui.lib)

and got these warnings:

>       DoSuperMethodA(cl,obj,msg);
warning 85 in line 115 of "Other:csource/mui/Class1.c": assignment of different pointers
>       DoSuperMethodA(cl,obj,msg);
warning 85 in line 152 of "Other:csource/mui/Class1.c": assignment of different pointers
> __saveds __asm ULONG MyDispatcher(register __a0 struct IClass *cl,register __a2 Object *obj,register __a1 Msg msg)
warning 125 in line 186 of "Other:csource/mui/Class1.c": no declaration-specifier, used int
> __saveds __asm ULONG MyDispatcher(register __a0 struct IClass *cl,register __a2 Object *obj,register __a1 Msg msg)
warning 54 in line 186 of "Other:csource/mui/Class1.c": ; expected
>       if (!(mcc = MUI_CreateCustomClass(((void*)0),"Area.mui",((void*)0),sizeof(struct MyData),MyDispatcher)))
warning 85 in line 218 of "Other:csource/mui/Class1.c": assignment of different pointers
>               while (DoMethod(app,0x80423ba6,&sigs) != -1)
warning 165 in line 265 of "Other:csource/mui/Class1.c": comparison redundant because operand is unsigned

I'm sure it's something very simple, but as I'm quite a newbie, I can't work
it out. Can anyone stop it crashing?

Thanks.


-- 
- Martyn Capewell
    {   Compsci, University of Cambridge   }
    { http://members.xoom.com/legerdemain0 }

@ENDNODE
@NODE "Mail_184" " VBCC type checking "
From: Daithi O'Cuinn <docuinn@cluke.demon.co.uk>
Date: 07-03-99 20:08:47
Subject: @{b}VBCC type checking@{ub}

From: Daithi O'Cuinn <docuinn@cluke.demon.co.uk>

Hello,

I'm using VBCC and I get error 39: invalid types for assignment
when I try to compile this line -

if(!(TempRPort = CreateTempRPort(Screen -> RastPort)))

even though I have set
struct RastPort *TempRPort;
and the function is
struct RastPort * CreateTempRPort(struct RastPort *Source);

what's going on??

Thanks,
-- 
Daithi O'Cuinn
docuinn@cluke.demon.co.uk


@ENDNODE
@NODE "Mail_185" " Re: VBCC type checking "
From: Daithi O'Cuinn <docuinn@cluke.demon.co.uk>
Date: 07-04-99 14:54:25
Subject: @{b}Re: VBCC type checking@{ub}

From: Daithi O'Cuinn <docuinn@cluke.demon.co.uk>

Hello Steffen

On 04-Jul-99, Steffen wrote:

> 
> The Screen->RastPort is a structure, if you want the pointer to it,
> use &Screen->RastPort.
> For further info, check the screen structure in
> include:intuition/screens.h

D'oh! Yes, this was it of course. Thanks!

Regards
-- 
Daithi O'Cuinn
docuinn@cluke.demon.co.uk


@ENDNODE
@NODE "Mail_186" " Re: VBCC type checking "
From: Jens Granseuer <jensgr@gmx.net>
Date: 07-05-99 00:02:22
Subject: @{b}Re: VBCC type checking@{ub}

From: Jens Granseuer <jensgr@gmx.net>

> That looks right.  But this appeared at the end of your message:
>
>> begin 600 WINMAIL.DAT
>> M>)\^(A<5`0:0" `$```````!``$``0>0!@`(````Y 0```````#H``$-@ 0`
>> M`@````(``@`!!) &`!P!```!````# ````,``# #````"P`/#@`````"`?\/
>> M`0```$4`````````@2L?I+ZC$!F=;@#=`0]4`@````!A;6EG82UC0&]N96QI

> Please can you disable this extra data.

Erm, yes, sorry about that. But... any ideas what it IS???
I just noticed myself and I have absolutely no idea where it comes
from...

Jens Granseuer
jensgr@gmx.net


@ENDNODE
@NODE "Mail_187" " Re: VBCC type checking "
From: Ben Hutchings <womble@zzumbouk.demon.co.uk>
Date: 07-05-99 01:02:04
Subject: @{b}Re: VBCC type checking@{ub}

From: Ben Hutchings <womble@zzumbouk.demon.co.uk>

On Tue, Jul 06, 1999 at 06:02:22AM +0400, Jens Granseuer wrote:
> From: Jens Granseuer <jensgr@gmx.net>
> 
> > That looks right.  But this appeared at the end of your message:
> >
> >> begin 600 WINMAIL.DAT
> >> M>)\^(A<5`0:0" `$```````!``$``0>0!@`(````Y 0```````#H``$-@ 0`
> >> M`@````(``@`!!) &`!P!```!````# ````,``# #````"P`/#@`````"`?\/
> >> M`0```$4`````````@2L?I+ZC$!F=;@#=`0]4`@````!A;6EG82UC0&]N96QI
> 
> > Please can you disable this extra data.
> 
> Erm, yes, sorry about that. But... any ideas what it IS???
> I just noticed myself and I have absolutely no idea where it comes
> from...

It might be some sort of user information that your mailer likes to
send out when you write to someone new.  I don't remember whether
you had written to the list before; if not then that might be what's
happening.

Ben.

-- 
Ben Hutchings - womble@zzumbouk.demon.co.uk, http://www.zzumbouk.demon.co.uk
Team *AMIGA* | Jay Miner Society | Linux - the choice of a GNU generation
Sturgeons's Law: Ninety percent of everything is crap.

@ENDNODE
@NODE "Mail_188" " vbccgui "
From: Chris Pratt <ChrisP@openboxsys.demon.co.uk>
Date: 07-14-99 23:20:38
Subject: @{b}vbccgui@{ub}

From: "Chris Pratt" <ChrisP@openboxsys.demon.co.uk>

Hi all.
    Just a quick question - has anybody got the vbccgui from Aminet working?
I followed the instructions to set it up, but when I run it, I just get a
minimized CLI window. SnoopDos reports everything loading OK, the last thing
being an execute of T:Command-00-T08. This Writes and Reads OK, but the GUI
doesn't load. Any ideas?

    Chrispy


@ENDNODE
@NODE "Mail_189" " Re: vbccgui "
From: "Andrzej J. Debicki" <denbi@softsystem.pl>
Date: 07-15-99 05:58:41
Subject: @{b}Re: vbccgui@{ub}

From: "Andrzej J. Debicki" <denbi@softsystem.pl>

Hello Chris,

czwartek, 15 lipca 1999, you wrote:

> From: "Chris Pratt" <ChrisP@openboxsys.demon.co.uk>

> Hi all.
>     Just a quick question - has anybody got the vbccgui from Aminet working?
> I followed the instructions to set it up, but when I run it, I just get a
> minimized CLI window. SnoopDos reports everything loading OK, the last thing
> being an execute of T:Command-00-T08. This Writes and Reads OK, but the GUI
> doesn't load. Any ideas?

I tried to make it working too but with no effects. I started to use
VPM included in vbcc package. It's very cimple byt it's doing what it
should do. The latest version 1.03 is using phxlnk (it's hardcoded for
m68k) but I'll contact the author and ask about making vlink usable.
He stoppped development of this util but maybe I'll take this one. He
told me that he'd like to put VPM under PD licence (or something like
that).

--
Andrzej J. Debicki
denbi@softsystem.pl
http://friko3.onet.pl/rz/denbi
------------------------------------------
A1200T 060-50/603e-240, BVision, 34 MB RAM



@ENDNODE
@NODE "Mail_190" " Wanted:: FFT "
From: Fritsch Alexander <Alexander.Fritsch@icn.siemens.de>
Date: 07-28-99 12:26:24
Subject: @{b}Wanted:: FFT@{ub}

From: Fritsch Alexander <Alexander.Fritsch@icn.siemens.de>


Hi, this time I am looking for an easy to use FFT-function.
I have an file containing a sound-sample (16Bit, 8kKhz) I want to display
the spectrum.
I tried a source found somewhere in the net, but the result seems to be
nonesens.

Could somebody point me to good source? It should be ANSI-C.

Kind reagards Alexander Fritsch

@ENDNODE
@NODE "Mail_191" " Re: Wanted:: FFT "
From: Peter Carlsson <peter.carlsson@space.se>
Date: 07-28-99 13:00:57
Subject: @{b}Re: Wanted:: FFT@{ub}

From: Peter Carlsson <peter.carlsson@space.se>

At 14:26 1999-07-28 +0200, you wrote:
>From: Fritsch Alexander <Alexander.Fritsch@icn.siemens.de>
>
>
>Hi, this time I am looking for an easy to use FFT-function.
>I have an file containing a sound-sample (16Bit, 8kKhz) I want to display
>the spectrum.
>I tried a source found somewhere in the net, but the result seems to be
>nonesens.
>
>Could somebody point me to good source? It should be ANSI-C.

Hello!

Don't know if this one is easy to use but have a
look at http://www.fftw.org/

Best regards,
Peter Carlsson

----------------------------------------------------------------
Peter Carlsson                    Tel: +46 31 735 45 26
Saab Ericsson Space AB            Fax: +46 31 735 40 00
S-405 15 Göteborg                 Email: peter.carlsson@space.se
SWEDEN                            URL: http://www.space.se
----------------------------------------------------------------


@ENDNODE
@NODE "Mail_192" " Re: Wanted:: FFT "
From: Colin Wenzel <colstv@hotkey.net.au>
Date: 07-28-99 15:26:39
Subject: @{b}Re: Wanted:: FFT@{ub}

From: Colin Wenzel <colstv@hotkey.net.au>

On 28-Jul-99, Fritsch Alexander wrote:
>From: Fritsch Alexander <Alexander.Fritsch@icn.siemens.de>

>Hi, this time I am looking for an easy to use FFT-function.
>I have an file containing a sound-sample (16Bit, 8kKhz) I want to display
>the spectrum.

It's already on Aminet,  search for "SpectrumA"

----------------------------------------------------
Colin Wenzel. Queensland, Australia.
EMAIL:  colstv@hotkey.net.au
URL:    http://www.hotkey.net.au/~colstv/      
                                               
'AMIGA' 4000T With  CS-III 68060 / 50Mhz 150Mb RAM. 
----------------------------------------------------


@ENDNODE
@NODE "Mail_193" " AW: Wanted:: FFT "
From: Fritsch Alexander <Alexander.Fritsch@icn.siemens.de>
Date: 07-28-99 15:50:28
Subject: @{b}AW: Wanted:: FFT@{ub}

From: Fritsch Alexander <Alexander.Fritsch@icn.siemens.de>

  Colin Wenzel <colstv@hotkey.net.au> wrote
>  
> It's already on Aminet,  search for "SpectrumA"
> 
	I found
http://ftp.uni-paderborn.de/pub/aminet/misc/edu/SpectrumAnalys.lha, but I am
looking for the source of a simple to use fft-function like
	void calc_fft (char *SourceSamples,char *DestBuffer, int Size)
	or something like that.
	The Aminet-Link is only an executable and the documentation is in
polish language...

	Kind regards Alexander Fritsch

@ENDNODE
@NODE "Mail_194" " Re: Welcome to amiga-c@onelist.com "
From: JSteic1957@aol.com
Date: 07-11-99 05:27:02
Subject: @{b}Re: Welcome to amiga-c@onelist.com@{ub}

From: JSteic1957@aol.com

I think you should know that the only way I found out about this mailing list 
was from a download from aminet.  Onelist.com doesn't show your list in 
existence (none that I could find).

@ENDNODE
@NODE "Mail_195" " Re: Welcome to amiga-c@onelist.com "
From: Jake Frederick <gonzo@acadia.net>
Date: 07-12-99 09:27:52
Subject: @{b}Re: Welcome to amiga-c@onelist.com@{ub}

From: Jake Frederick <gonzo@acadia.net>

On 11-Jul-99, JSteic1957@aol.com wrote:
> From: JSteic1957@aol.com
> 
> I think you should know that the only way I found out about this mailing
list
> was from a download from aminet. Onelist.com doesn't show your list in
> existence (none that I could find).
> 
I just joined the list a few weeks ago and I found it on onelist.com.
-- 
-If the doors of perception were cleansed everything would appear to man as it
truly is, infinite.-


@ENDNODE
@NODE "Mail_196" " Re: Welcome to amiga-c@onelist.com "
From: Rod_MacLean@uk.ibm.com
Date: 07-19-99 09:10:47
Subject: @{b}Re: Welcome to amiga-c@onelist.com@{ub}

From: Rod_MacLean@uk.ibm.com




Mike C said:
>
>> From: Jeffrey Barnes <jbarn02@netscape.net>
>>
>> hi
>> does any men have a casio databank watch?
>
> I do but by 'databank' what do you mean?  Mine is about 11 years old now!

I've got one - they say 'Databank' 'telememo' and 'illuminator' on the
face?
I got mine in Argos.

     Rod

ps. Is this off topic or what??!?  :)
--
Rod MacLean - IT Specialist
L2L, IBM Perth (tel 01738 894135)
IEA GBIB1S3U @ IBMMAIL    (rod_maclean@uk.ibm.com)



@ENDNODE
@NODE "Mail_197" " Re: Welcome to amiga-c@onelist.com "
From: Rod Schnell <rodsch@telusplanet.net>
Date: 07-26-99 02:31:18
Subject: @{b}Re: Welcome to amiga-c@onelist.com@{ub}

From:	Rod Schnell <rodsch@telusplanet.net>

Hello Andrija

>The lib pool functions in amiga.lib work fine, it's the asm pool functions in
>ROM that are broken. Also, the lib functions work with amiga os 2.04 (v37+)
while >the asm functions require 3.x (v39+).

OOPS! Actually, asm pool functions are in amiga.lib too. :) However, both asm
and lib functions will call the ROM routines with amiga os 3.x and it's those
routines that are broken, setpatch 40.16 fixes them.

    NAME@{ub}
        LibCreatePool -- Generate a private memory pool header (V33)@{b}

    SYNOPSIS@{ub}
        newPool=LibCreatePool(memFlags,puddleSize,threshSize)
        a0                    d0       d1         d2

        void *LibCreatePool(@{"ULONG" LINK "Includes:exec/types.h/File"
37},@{"ULONG" LINK "Includes:exec/types.h/File" 37},@{"ULONG" LINK
"Includes:exec/types.h/File" 37});@{b}

    FUNCTION@{ub}
        This function is a copy of the pool functions in V39 and up of
        EXEC.  In fact, if you are running in V39, this function will
        notice and call the EXEC function.  This function works in
        V33 and up (1.2) Amiga system.

        The C code interface is _LibCreatePool() and takes its arguments
        from the stack just like the C code interface for @{"CreatePool()"
LINK "tmp:docs2/exec/CreatePool"}
        in @{"amiga.lib" LINK "tmp:docs2/amiga_lib/MAIN"}.  The assembly code
interface is with the symbol
        _AsmCreatePool: and takes the parameters in registers with the
        additional parameter of ExecBase being in a6 which can be used
        from SAS/C 6 by a prototype of:

  Rod


@ENDNODE
@NODE "Mail_198" " Re: Re: Welcome to amiga-c@onelist.com "
From: Andrija Antonijevic <TheAntony2@bigfoot.com>
Date: 07-30-99 01:05:29
Subject: @{b}Re: Re: Welcome to amiga-c@onelist.com@{ub}

From: Andrija Antonijevic <TheAntony2@bigfoot.com>

History books say that Rod Schnell spoke these words (to himself :)) on 26-Jul-99 AD.

>Hello Andrija

>>The lib pool functions in amiga.lib work fine, it's the asm pool functions
>>in ROM that are broken. Also, the lib functions work with amiga os 2.04
>>(v37+)
>while >the asm functions require 3.x (v39+).

>OOPS! Actually, asm pool functions are in amiga.lib too. :) However, both asm
>and lib functions will call the ROM routines with amiga os 3.x and it's those
>routines that are broken, setpatch 40.16 fixes them.

[...]

OK, it makes sense now... Especially after Olaf's second message :)

-- 

     ///  /_\  _ _| |_ ___ _ _ _  _   http://www.bigfoot.com/~TheAntony
__  ///  / _ \| ' \  _/ _ \ ' \ || |   Amiga Translators' Organization
\\\///  /_/ \_\_||_\__\___/_||_\_, |        (*Serbian department*)
 \XX/  TheAntony@bigfoot.com   |__/              Team *AMIGA*

30 minutes of begging is not considered foreplay.


@ENDNODE
@NODE "Mail_199" " Re: [Welcome to amiga-c@onelist.com] "
From: Jeffrey Barnes <jbarn02@netscape.net>
Date: 07-17-99 11:44:07
Subject: @{b}Re: [Welcome to amiga-c@onelist.com]@{ub}

From: Jeffrey Barnes <jbarn02@netscape.net>

hi 
does any men have a casio databank watch?

____________________________________________________________________
Get your own FREE, personal Netscape WebMail account today at http://webmail.netscape.com.

@ENDNODE
@NODE "Mail_200" " Re: Welcome to amiga-c@onelist.com] "
From: Mike Carter <mike.carter@bigfoot.com>
Date: 07-17-99 21:51:39
Subject: @{b}Re: Welcome to amiga-c@onelist.com]@{ub}

From: Mike Carter <mike.carter@bigfoot.com>

> From: Jeffrey Barnes <jbarn02@netscape.net>
> 
> hi 
> does any men have a casio databank watch?

I do but by 'databank' what do you mean?  Mine is about 11 years old now!

Dinky do,


Mike C.


-- 

.--------------------------------- ---- -    -- --------.
| AMiGA 1200EZT 060/PPC@240Mhz,4 HDD,   __/\__  bUDDa oF|
| DD&HD FD,5 CD-ROMS,CDRW,EZ135,SCSI    \ o0 /  pROgREsS|
| 56kModem,BVGfX,19"VDU,Melody comming! /_ -_\   Ex-NFA |
`------------------------------- --- -    \/   -- ------'
  http://fly.to/BuddasWurld               ICQ: 29173597


@ENDNODE
@NODE "Mail_201" " Re: [Re: Welcome to amiga-c@onelist.com]] "
From: Jeffrey Barnes <jbarn02@netscape.net>
Date: 07-18-99 01:45:13
Subject: @{b}Re: [Re: Welcome to amiga-c@onelist.com]]@{ub}

From: Jeffrey Barnes <jbarn02@netscape.net>

Mike Carter <mike.carter@bigfoot.com> wrote:
> From: Mike Carter <mike.carter@bigfoot.com>
> 
> > From: Jeffrey Barnes <jbarn02@netscape.net>
> > 
> > hi 
> > does any men have a casio databank watch?
> 
> I do but by 'databank' what do you mean?  Mine is about 11 years old now!
> 
> Dinky do,
> 
> 
> Mike C.
> 
> 
> -- 
> 
> .--------------------------------- ---- -    -- --------.
> | AMiGA 1200EZT 060/PPC@240Mhz,4 HDD,   __/\__  bUDDa oF|
> | DD&HD FD,5 CD-ROMS,CDRW,EZ135,SCSI    \ o0 /  pROgREsS|
> | 56kModem,BVGfX,19"VDU,Melody comming! /_ -_\   Ex-NFA |
> `------------------------------- --- -    \/   -- ------'
>   http://fly.to/BuddasWurld               ICQ: 29173597
> 
> 
> --------------------------- ONElist Sponsor ----------------------------
> 
> The planet's eCenter for health & well-being. PlanetRX.
> <a href=" http://clickme.onelist.com/ad/planetrx1 ">Click Here</a>
> 
> ------------------------------------------------------------------------
>      -> Spread the URL: http://www.onelist.com/subscribe/amiga-c <- 


____________________________________________________________________
Get your own FREE, personal Netscape WebMail account today at http://webmail.netscape.com.

@ENDNODE
