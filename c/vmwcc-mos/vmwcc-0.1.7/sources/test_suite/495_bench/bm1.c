#include <stdio.h>

#define WriteLine() printf("\n");
#define WriteLong(x) printf(" %ld", x);
#define ReadLong(a) if (fscanf(stdin, "%ld", &a) != 1) a = 0;

long X[10240];
long Y[768];
long c[10240][768];
long b[10240][768];

long XSize;
long YSize;

void Initialize()
{
  long i;
  long seed;
  long max;

  ReadLong(seed);
  ReadLong(max);

  i = 0;
  while (i < XSize) {
    X[i] = ( seed * (i + 2) ) % max;
    //    ReadLong(X[i]);
    i = i + 1;
  }

  i = 0;
  while (i < YSize) {
    //    ReadLong(Y[i]);
    Y[i] = ( seed * (i + 2) ) % max;
    i = i + 1;
  }
}

void LCSLength()
{
  long m, n, i, j;

  XSize = 10240;
  YSize = 768;

  m = XSize;
  n = YSize;
  
  Initialize();

  i = 0;
  while (i < m) {
    c[i][0] = 0;
    i = i + 1;
  }

  j = 0;
  while (j < m) {
    c[0][j] = 0;
    j = j + 1;
  }

  j = 1;
  while (j < n) {
    i = 1;
    while (i < m) {
      if (X[i] == Y[j]) {
	c[i][j] = c[i-1][j-1] + 1;
	b[i][j] = 1;
      } else {
	if (c[i-1][j] >= c[i][j-1]) {
	  c[i][j] = c[i-1][j];
	  b[i][j] = 2;
	} else {
	  c[i][j] = c[i][j-1];
	  b[i][j] = 3;
	}
      }
      
      i = i + 1;
    }
    j = j + 1;
  }
}

void PrintLCS(long i, long j)
{
  if (i != 0) {

    if (j != 0)  {

      if (b[i][j] == 1) {
	PrintLCS(i-1,j-1);
	WriteLong(X[i]);
	WriteLine();
      } else {
	if (b[i][j] == 2) {
	  PrintLCS(i-1,j);
	} else {
	  PrintLCS(i,j-1);
	}
      }
    }
    
  }
  
}

void main()
{
  LCSLength();
  PrintLCS(XSize-1, YSize-1);
}

/*
input:  
11
235
 */

/* 
output:
 33
 44
 55
 66
 77
 88
 99
 110
 121
 132
 143
 154
 165
 176
 187
 198
 209
 220
 231
 7
 18
 29
 40
 51
 62
 73
 84
 95
 106
 117
 128
 139
 150
 161
 172
 183
 194
 205
 216
 227
 3
 14
 25
 36
 47
 58
 69
 80
 91
 102
 113
 124
 135
 146
 157
 168
 179
 190
 201
 212
 223
 234
 10
 21
 32
 43
 54
 65
 76
 87
 98
 109
 120
 131
 142
 153
 164
 175
 186
 197
 208
 219
 230
 6
 17
 28
 39
 50
 61
 72
 83
 94
 105
 116
 127
 138
 149
 160
 171
 182
 193
 204
 215
 226
 2
 13
 24
 35
 46
 57
 68
 79
 90
 101
 112
 123
 134
 145
 156
 167
 178
 189
 200
 211
 222
 233
 9
 20
 31
 42
 53
 64
 75
 86
 97
 108
 119
 130
 141
 152
 163
 174
 185
 196
 207
 218
 229
 5
 16
 27
 38
 49
 60
 71
 82
 93
 104
 115
 126
 137
 148
 159
 170
 181
 192
 203
 214
 225
 1
 12
 23
 34
 45
 56
 67
 78
 89
 100
 111
 122
 133
 144
 155
 166
 177
 188
 199
 210
 221
 232
 8
 19
 30
 41
 52
 63
 74
 85
 96
 107
 118
 129
 140
 151
 162
 173
 184
 195
 206
 217
 228
 4
 15
 26
 37
 48
 59
 70
 81
 92
 103
 114
 125
 136
 147
 158
 169
 180
 191
 202
 213
 224
 0
 11
 22
 33
 44
 55
 66
 77
 88
 99
 110
 121
 132
 143
 154
 165
 176
 187
 198
 209
 220
 231
 7
 18
 29
 40
 51
 62
 73
 84
 95
 106
 117
 128
 139
 150
 161
 172
 183
 194
 205
 216
 227
 3
 14
 25
 36
 47
 58
 69
 80
 91
 102
 113
 124
 135
 146
 157
 168
 179
 190
 201
 212
 223
 234
 10
 21
 32
 43
 54
 65
 76
 87
 98
 109
 120
 131
 142
 153
 164
 175
 186
 197
 208
 219
 230
 6
 17
 28
 39
 50
 61
 72
 83
 94
 105
 116
 127
 138
 149
 160
 171
 182
 193
 204
 215
 226
 2
 13
 24
 35
 46
 57
 68
 79
 90
 101
 112
 123
 134
 145
 156
 167
 178
 189
 200
 211
 222
 233
 9
 20
 31
 42
 53
 64
 75
 86
 97
 108
 119
 130
 141
 152
 163
 174
 185
 196
 207
 218
 229
 5
 16
 27
 38
 49
 60
 71
 82
 93
 104
 115
 126
 137
 148
 159
 170
 181
 192
 203
 214
 225
 1
 12
 23
 34
 45
 56
 67
 78
 89
 100
 111
 122
 133
 144
 155
 166
 177
 188
 199
 210
 221
 232
 8
 19
 30
 41
 52
 63
 74
 85
 96
 107
 118
 129
 140
 151
 162
 173
 184
 195
 206
 217
 228
 4
 15
 26
 37
 48
 59
 70
 81
 92
 103
 114
 125
 136
 147
 158
 169
 180
 191
 202
 213
 224
 0
 11
 22
 33
 44
 55
 66
 77
 88
 99
 110
 121
 132
 143
 154
 165
 176
 187
 198
 209
 220
 231
 7
 18
 29
 40
 51
 62
 73
 84
 95
 106
 117
 128
 139
 150
 161
 172
 183
 194
 205
 216
 227
 3
 14
 25
 36
 47
 58
 69
 80
 91
 102
 113
 124
 135
 146
 157
 168
 179
 190
 201
 212
 223
 234
 10
 21
 32
 43
 54
 65
 76
 87
 98
 109
 120
 131
 142
 153
 164
 175
 186
 197
 208
 219
 230
 6
 17
 28
 39
 50
 61
 72
 83
 94
 105
 116
 127
 138
 149
 160
 171
 182
 193
 204
 215
 226
 2
 13
 24
 35
 46
 57
 68
 79
 90
 101
 112
 123
 134
 145
 156
 167
 178
 189
 200
 211
 222
 233
 9
 20
 31
 42
 53
 64
 75
 86
 97
 108
 119
 130
 141
 152
 163
 174
 185
 196
 207
 218
 229
 5
 16
 27
 38
 49
 60
 71
 82
 93
 104
 115
 126
 137
 148
 159
 170
 181
 192
 203
 214
 225
 1
 12
 23
 34
 45
 56
 67
 78
 89
 100
 111
 122
 133
 144
 155
 166
 177
 188
 199
 210
 221
 232
 8
 19
 30
 41
 52
 63
 74
 85
 96
 107
 118
 129
 140
 151
 162
 173
 184
 195
 206
 217
 228
 4
 15
 26
 37
 48
 59
 70
 81
 92
 103
 114
 125
 136
 147
 158
 169
 180
 191
 202
 213
 224
 0
 11
 22
 33
 44
 55
 66
 77
 88
 99
 110
 121
 132
 143
 154
 165
 176
 187
 198
 209
 220
 231
 7
 18
 29
 40
 51
 62
 73
 84
 95
 106
 117
 128
 139
 150
 161
 172
 183
 194
 205
 216
 227
 3
 14
 25
 36
 47
 58
 69
 80
 91
 102
 113
 124
 135
 146
 157
 168
 179
 190
 201
 212
 223
 234
*/
