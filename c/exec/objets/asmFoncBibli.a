   XDEF  _asmOuvreBibli
   XDEF  _asmFermeBibli
   XDEF  _asmEpureBibli
   XDEF  _asmNulleBibli

   XREF  _LinkerDB	; @ du segment de donnée SAS/Lattice C
   XREF  __Bibliotheque_ouvre
   XREF  __Bibliotheque_ferme
   XREF  __Bibliotheque_epure

   CSECT asmFoncBibli

; empiler les arguments de droite à gauche

_asmOuvreBibli:
   movem.l  d1-d7/a0-a6,-(sp)
   lea		_LinkerDB,a4	; charge l'@ du segment de donnée
   move.l   d0,-(sp) ; version
   move.l   a6,-(sp)
   jsr      __Bibliotheque_ouvre	; base dans d0
   addq.l   #8,sp
   movem.l  (sp)+,d1-d7/a0-a6
   rts

_asmFermeBibli:
   movem.l  d1-d7/a0-a6,-(sp)
   lea		_LinkerDB,a4	; charge l'@ du segment de donnée
   move.l   a6,-(sp)
   jsr      __Bibliotheque_ferme	; valeur de retour dans d0
   addq.l   #4,sp
   movem.l  (sp)+,d1-d7/a0-a6
   rts

_asmEpureBibli:
   movem.l  d1-d7/a0-a6,-(sp)
   lea		_LinkerDB,a4	; charge l'@ du segment de donnée
   move.l   a6,-(sp)
   jsr      __Bibliotheque_epure	; dechargement bib si BCPL dans d0 sinon 0
   addq.l   #4,sp
   movem.l  (sp)+,d1-d7/a0-a6
   rts

_asmNulleBibli:
   moveq #0,d0 ; la fonction nulle renvoie 0
   rts

   END
