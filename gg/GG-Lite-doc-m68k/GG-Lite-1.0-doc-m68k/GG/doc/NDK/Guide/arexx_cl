@DATABASE "gg:doc/NDK/Guide/arexx_cl"
@MASTER   "gg:doc/NDK/AutoDocs/arexx_cl.doc"
@REMARK   This file was created by ADtoHT 2.1 on 06-Jan-13 19:19:11
@REMARK   Do not edit
@REMARK   ADtoHT is © 1993-1995 Christian Stieber

@NODE MAIN "arexx_cl.doc"
@TOC "gg:doc/NDK/Guide/TOC/MAIN"

                                  @{b}arexx_cl@{ub}

@{"datasheet" LINK "datasheet"}

@{"AM_EXECUTE" LINK "AM_EXECUTE"}  @{"AM_HANDLEINPUT()" LINK "AM_HANDLEINPUT"}

@ENDNODE
@NODE "datasheet" "arexx_cl/datasheet (information)"


    NAME
        @{"arexx_cl" LINK "gg:doc/NDK/Guide/arexx_cl/MAIN"} -- ARexx interface class.

    SUPERCLASS
        rootclass

    DESCRIPTION
        This class provides you with a very easy way to implement an ARexx
        interface.  It will setup a unique ARexx port, start ARexx macros,
        parse commands and dispatch command handler functions.

        All ARexx class methods and the callbacks you provide it are run in
        the context of the task you call ARexx class from. Thus if your
        application is a process, DOS is safe to use.

    METHODS
        @{"OM_NEW" LINK "gg:doc/NDK/Guide/Include/intuition/classusr.h/File" 63} -- Passed to superclass first.  Sets up the port.

        @{"OM_GET" LINK "gg:doc/NDK/Guide/Include/intuition/classusr.h/File" 66} -- Returns requested attributes.  Passed onto superclass.

        @{"OM_DISPOSE" LINK "gg:doc/NDK/Guide/Include/intuition/classusr.h/File" 64} -- Closes the port and frees all resources.  Passed onto
            superclass

        @{"AM_EXECUTE" LINK "gg:doc/NDK/Guide/arexx_cl/AM_EXECUTE"} -- Executes an ARexx command or macro.

        @{"AM_HANDLEINPUT" LINK "gg:doc/NDK/Guide/arexx_cl/AM_HANDLEINPUT"} -- Handles ARexx messages.

    ATTRIBUTES
        @{"AREXX_HostName" LINK "gg:doc/NDK/Guide/Include/classes/arexx.h/File" 59} (@{"STRPTR" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 67})
            The name of the host.  The ARexx portname is derived from this.
            In pretty much all cases, this should the same as your app's
            basename.  You should refrain from using names like "MYPROG_RX"
            or others with unnecessary suffixes.

            To create the portname, the hostname will be uppercased, and,
            unless @{"AREXX_NoSlot" LINK "gg:doc/NDK/Guide/Include/classes/arexx.h/File" 69} is specified, a slot number will be
            appended.

            Applicability is (@{"OM_NEW" LINK "gg:doc/NDK/Guide/Include/intuition/classusr.h/File" 63}, @{"OM_GET" LINK "gg:doc/NDK/Guide/Include/intuition/classusr.h/File" 66})

        @{"AREXX_NoSlot" LINK "gg:doc/NDK/Guide/Include/classes/arexx.h/File" 69} (@{"BOOL" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 91})
            Specifies that no slot number should be appended to the port
            name when it is being created.  This greatly increases the
            chances that your requested portname is in use, so your code
            must be sure to handle this situation.

            Defaults to @{"FALSE" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 98}.

            Applicability is (@{"OM_NEW" LINK "gg:doc/NDK/Guide/Include/intuition/classusr.h/File" 63})

        @{"AREXX_DefExtension" LINK "gg:doc/NDK/Guide/Include/classes/arexx.h/File" 61} (@{"STRPTR" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 67})
            Default filename extension for macros started by your app.  Do
            not include the ".", just the extension text.   In pretty much
            all cases, this should be the same as your app's basename.  You
            should refrain from using extensions like "myrx".

            Defaults to "rexx".

            Applicability is (@{"OM_NEW" LINK "gg:doc/NDK/Guide/Include/intuition/classusr.h/File" 63})

        @{"AREXX_Commands" LINK "gg:doc/NDK/Guide/Include/classes/arexx.h/File" 63} (@{"struct ARexxCmd" LINK "gg:doc/NDK/Guide/Include/classes/arexx.h/File" 118} *)
            The table of the commands supported by your ARexx interface.
            This will be a pointer to an array of @{"struct ARexxCmd" LINK "gg:doc/NDK/Guide/Include/classes/arexx.h/File" 118}.  If this
            array is not passed then your host will not be able to process
            any ARexx commands.

            The following fields must be setup initially by the app before
            @{"OM_NEW" LINK "gg:doc/NDK/Guide/Include/intuition/classusr.h/File" 63}:

                ac_Name (@{"STRPTR" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 67})
                The name of the command.  By convention this is usually all
                uppercase, though a case-insensitive comparisons will be
                done.

                ac_ID (@{"WORD" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 54})
                A unique number identifying this command.

                ac_Func (*()(@{"struct ARexxCmd" LINK "gg:doc/NDK/Guide/Include/classes/arexx.h/File" 118} *, @{"struct RexxMsg" LINK "gg:doc/NDK/Guide/Include/rexx/storage.h/File" 98} *))
                A pointer to the function that will be called when this
                command is received by your programme.  The function will
                get past a pointer to its ARexxCmd entry and the RexxMsg
                structure received for the command.  You may use this
                for setting ARexx variables, but please note that is may
                be @{"NULL" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 101}

                ac_ArgTemplate (@{"STRPTR" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 67})
                DOS @{"ReadArgs()" LINK "gg:doc/NDK/Guide/dos/ReadArgs"}-style argument template for this command.

                ac_Flags (@{"ULONG" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 52})
                Command flags.  Currently unused, but in order to remain
                compatable, you must ensure that this is @{"NULL" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 101}.

            These fields are ignored in @{"OM_NEW" LINK "gg:doc/NDK/Guide/Include/intuition/classusr.h/File" 63} and are set by the class
            when calling the ac_Func command callback.

                ac_ArgList (@{"ULONG" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 52} *)
                Result of @{"ReadArgs()" LINK "gg:doc/NDK/Guide/dos/ReadArgs"} using the arguments received with the
                command and ac_ArgTemplate as the template.

                ac_RC (@{"LONG" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 51})
                Primary result, the RC variable.  Also causes the RC2
                variable to return, and will cause RESULT to @{"NOT" LINK "gg:doc/NDK/Guide/Include/intuition/intuition.h/File" 1500} be set.

                ac_RC2 (@{"LONG" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 51})
                Secundary result, the RC2 variable.  This will not be set
                unless RC is non-zero.

                ac_Result (@{"STRPTR" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 67})
                RESULT variable, this should be a string.  If you want to
                return a number, you will have to convert it to a string
                first.  This string will not be set if RC is non-zero.

            The array must be terminated with a @{"NULL" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 101} ac_Name field.

            Applicability is (@{"OM_NEW" LINK "gg:doc/NDK/Guide/Include/intuition/classusr.h/File" 63})

        @{"AREXX_ErrorCode" LINK "gg:doc/NDK/Guide/Include/classes/arexx.h/File" 65} (@{"ULONG" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 52} *)
            A pointer to storage space for @{"OM_NEW" LINK "gg:doc/NDK/Guide/Include/intuition/classusr.h/File" 63} to store an error code
            when it fails trying to create the object.  Possible values
            are:

            @{"RXERR_NO_COMMAND_LIST" LINK "gg:doc/NDK/Guide/Include/classes/arexx.h/File" 78} - No command list was provided.
            @{"RXERR_NO_PORT_NAME" LINK "gg:doc/NDK/Guide/Include/classes/arexx.h/File" 79} - No host base name was provided.
            @{"RXERR_PORT_ALREADY_EXISTS" LINK "gg:doc/NDK/Guide/Include/classes/arexx.h/File" 80} - The  class  was unable to create a
                unique name of the base name you provided.
            @{"RXERR_OUT_OF_MEMORY" LINK "gg:doc/NDK/Guide/Include/classes/arexx.h/File" 81} - Not enough free memory.

            No error code will be returned if you provide a @{"NULL" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 101} pointer.

            Defaults @{"NULL" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 101}.

            Applicability is (@{"OM_NEW" LINK "gg:doc/NDK/Guide/Include/intuition/classusr.h/File" 63})

        @{"AREXX_SigMask" LINK "gg:doc/NDK/Guide/Include/classes/arexx.h/File" 67} (@{"ULONG" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 52})
            The signal mask for the object's message port.  This is the
            signal you will want to @{"Wait()" LINK "gg:doc/NDK/Guide/exec/Wait"} on so you know when there is
            activity at the ARexx port.

            Applicability is (@{"OM_GET" LINK "gg:doc/NDK/Guide/Include/intuition/classusr.h/File" 66})

        @{"AREXX_ReplyHook" LINK "gg:doc/NDK/Guide/Include/classes/arexx.h/File" 71} (@{"struct Hook" LINK "gg:doc/NDK/Guide/Include/utility/hooks.h/File" 28} *)
            This is a function hook that will get called whenever your host
            replies to an ARexx message.  This generally happens after your
            host has sent a message (eg. via @{"AM_EXECUTE" LINK "gg:doc/NDK/Guide/arexx_cl/AM_EXECUTE"}) and the task
            receiving the message has completed its processing with the
            message.  This is most useful for checking return codes from
            commands sent via @{"AM_EXECUTE" LINK "gg:doc/NDK/Guide/arexx_cl/AM_EXECUTE"}.

            The object parameter in the hook function will point to the
            Object * that is yur host, and the message parameter will be
            the ARexx message that is being replied to (from which you
            could extract result codes).

            Defaults to @{"NULL" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 101}.

            Applicability is (@{"OM_NEW" LINK "gg:doc/NDK/Guide/Include/intuition/classusr.h/File" 63}, @{"OM_GET" LINK "gg:doc/NDK/Guide/Include/intuition/classusr.h/File" 66})

    BUGS
        @{"AREXX_HostName" LINK "gg:doc/NDK/Guide/Include/classes/arexx.h/File" 59} MUST be all uppercase in V40 otherwise the checks for
        an already existing port won't work right.

@ENDNODE
@NODE "AM_EXECUTE" "arexx_cl/AM_EXECUTE"
@{b}

    NAME@{ub}
        @{"AM_EXECUTE" LINK "gg:doc/NDK/Guide/Include/classes/arexx.h/File" 94} -- Execute an ARexx macro.@{b}

    FUNCTION@{ub}
        This method allows you to execute a macro in another host.  The
        default host is the ARexx server.  This is how you would execute
        disk-based ARexx macros, by passing the name of the file as the
        command string to the ARexx server.

        This method uses the following custom message structure:

          @{"struct apExecute" LINK "gg:doc/NDK/Guide/Include/classes/arexx.h/File" 102}
          {
              @{"ULONG" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 52} MethodID;
              @{"STRPTR" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 67} ape_CommandString;
              @{"STRPTR" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 67} ape_PortName;
              @{"LONG" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 51} *ape_RC;
              @{"LONG" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 51} *ape_RC2;
              @{"STRPTR" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 67} *ape_Result;
              @{"BPTR" LINK "gg:doc/NDK/Guide/Include/dos/dos.h/File" 130} ape_IO;
          };

        ape_CommandString (@{"STRPTR" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 67})
            This must point to the command including arguments to execute.
            If the command is found in the host command list it will be
            executed.  Unknown commands will be shipped off to the ARexx
            server.

        ape_RC, ape_RC2, ape_Result (@{"LONG" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 51} *, @{"LONG" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 51} *, @{"STRPTR" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 67} *)
            After the command executed you will find the results in here if
            the command was one in your host, or if there was a problem
            sending the command to the specified host.  You will @{"NOT" LINK "gg:doc/NDK/Guide/Include/intuition/intuition.h/File" 1500} get the
            result of the command if it is sent to another host, since the
            command is sent asychronously.  Use @{"AREXX_ReplyHook" LINK "gg:doc/NDK/Guide/Include/classes/arexx.h/File" 71} for this.

        ape_IO (@{"BPTR" LINK "gg:doc/NDK/Guide/Include/dos/dos.h/File" 130})
            If you execute a script using this method you can pass a pointer
            to the IO channel ARexx must  use here.  This IO channel will be
            closed automatically for you after the command executed.@{b}

    RESULT@{ub}
        As errors are reported in acme_RC and acme_RC2 this method has no
        specific return code.

@ENDNODE
@NODE "AM_HANDLEINPUT" "arexx_cl/AM_HANDLEINPUT()"
@{b}

    NAME@{ub}
        AM_HANDLEINPUT@{b}

    FUNCTION@{ub}
        This method will handle all incoming and outgoing message traffic
        from your host.  When you are signalled you simply call this method
        and everything is done for you.@{b}

    RESULT@{ub}
        No return code is specified for this method.

@ENDNODE
