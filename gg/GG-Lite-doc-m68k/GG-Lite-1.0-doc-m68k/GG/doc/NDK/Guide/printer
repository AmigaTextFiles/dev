@DATABASE "gg:doc/NDK/Guide/printer"
@MASTER   "gg:doc/NDK/AutoDocs/printer.doc"
@REMARK   This file was created by ADtoHT 2.1 on 06-Jan-13 19:24:41
@REMARK   Do not edit
@REMARK   ADtoHT is © 1993-1995 Christian Stieber

@NODE MAIN "printer.doc"
@TOC "gg:doc/NDK/Guide/TOC/MAIN"

                               @{b}printer.device@{ub}

@{"background" LINK "background"}

@{"CallErrHook()" LINK "CallErrHook"}   @{"CMD_FLUSH" LINK "CMD_FLUSH"}       @{"CMD_INVALID" LINK "CMD_INVALID"}        @{"CMD_RESET" LINK "CMD_RESET"}
@{"CMD_START" LINK "CMD_START"}       @{"CMD_STOP" LINK "CMD_STOP"}        @{"CMD_WRITE" LINK "CMD_WRITE"}          @{"PBothReady()" LINK "PBothReady"}
@{"PQuery()" LINK "PQuery"}        @{"PRD_DUMPRPORT" LINK "PRD_DUMPRPORT"}   @{"PRD_DUMPRPORTTAGS" LINK "PRD_DUMPRPORTTAGS"}  @{"PRD_EDITPREFS" LINK "PRD_EDITPREFS"}
@{"PRD_PRTCOMMAND" LINK "PRD_PRTCOMMAND"}  @{"PRD_QUERY" LINK "PRD_QUERY"}       @{"PRD_RAWWRITE" LINK "PRD_RAWWRITE"}       @{"PRD_READPREFS" LINK "PRD_READPREFS"}
@{"PRD_SETERRHOOK" LINK "PRD_SETERRHOOK"}  @{"PRD_WRITEPREFS" LINK "PRD_WRITEPREFS"}  @{"PRead()" LINK "PRead"}            @{"PWrite()" LINK "PWrite"}

@ENDNODE
@NODE "background" "printer.device/background (information)"


The @{"printer.device" LINK "gg:doc/NDK/Guide/printer/MAIN"} gots a lot of new features with V44:

        - It is now possible to print hi- and true-color bitmaps
        - Planar bitmaps are read faster
        - Much more stable if wrong parameters for @{"PRD_DUMPRPORT" LINK "gg:doc/NDK/Guide/printer/PRD_DUMPRPORT"} are used
        - A lot of new features for printer drivers are supported.

        Creating a driver for @{"printer.device" LINK "gg:doc/NDK/Guide/printer/MAIN"} now gets much easier: the driver
        does not have to scale the bitmap anymore and can use its own
        algorithms for nearly everything (color conversion, color correction,
        all dither methods, anti aliasing). The driver is now run in a
        DOS process instead of a exec task so loading preferences or saving
        the output to a file is not longer a multithreading task.

        The driver gives more information for the preferences user interface
        (names of dither algorithms, names of shading algorithms, information
        about density interpretation) and for the printing itself (left and
        top border on paper, more page formats).

        Drivers can have its own preferences which can be edited and
        stored from every application. Driver can also have its own
        preferences editor (like PrinterPS).

@ENDNODE
@NODE "CallErrHook" "printer.device/CallErrHook()"
@{b}

   NAME@{ub}
        CallErrHook -- internal call of error hook@{b}

   SYNOPSIS@{ub}
        result = (*PrinterData->pd_CallErrHook)(hook, iorequest, msg);
        D0

        @{"LONG" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 51} CallErrHook(@{"struct Hook" LINK "gg:doc/NDK/Guide/Include/utility/hooks.h/File" 28} *, @{"struct IORequest" LINK "gg:doc/NDK/Guide/Include/exec/io.h/File" 18} *, @{"struct PrtErrMsg" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 384} *);@{b}

   FUNCTION@{ub}
        An application can set an error hook that is called in case of
        errors to display an formated and localized error message to the
        user. The driver can set an error hook to format and localize
        custom error messages and to call the application's error hook. This
        is done by calling PD->pd_CallErrHook() from the printer.device.
        CallErrHook will do additional formating like setting a title of
        the error message if no is set by the driver and then calls the
        application's error hook.@{b}

   RESULT@{ub}
        The return value of the hook is returned from CallErrHook.

@ENDNODE
@NODE "CMD_FLUSH" "printer.device/CMD_FLUSH"
@{b}

   NAME@{ub}
        @{"CMD_FLUSH" LINK "gg:doc/NDK/Guide/serial/CMD_FLUSH"} -- abort all I/O requests (immediate)@{b}

   FUNCTION@{ub}
        @{"CMD_FLUSH" LINK "gg:doc/NDK/Guide/serial/CMD_FLUSH"} aborts all stopped I/O at the unit.@{b}

   IO REQUEST@{ub}
        io_Message      mn_ReplyPort set if quick I/O is not possible
        io_Device       preset by the call to @{"OpenDevice" LINK "gg:doc/NDK/Guide/exec/OpenDevice"}
        io_Command      @{"CMD_FLUSH" LINK "gg:doc/NDK/Guide/serial/CMD_FLUSH"}
        io_Flags        @{"IOB_QUICK" LINK "gg:doc/NDK/Guide/Include/exec/io.h/File" 45} set if quick I/O is possible

@ENDNODE
@NODE "CMD_INVALID" "printer.device/CMD_INVALID"
@{b}

   NAME@{ub}
        @{"CMD_INVALID" LINK "gg:doc/NDK/Guide/Include/exec/io.h/File" 49} -- invalid command@{b}

   FUNCTION@{ub}
        @{"CMD_INVALID" LINK "gg:doc/NDK/Guide/Include/exec/io.h/File" 49} is always an invalid command, and sets the device
        error appropriately.@{b}

   IO REQUEST@{ub}
        io_Message      mn_ReplyPort set if quick I/O is not possible
        io_Command      @{"CMD_INVALID" LINK "gg:doc/NDK/Guide/Include/exec/io.h/File" 49}
        io_Flags        @{"IOB_QUICK" LINK "gg:doc/NDK/Guide/Include/exec/io.h/File" 45} set if quick I/O is possible

@ENDNODE
@NODE "CMD_RESET" "printer.device/CMD_RESET"
@{b}

   NAME@{ub}
        @{"CMD_RESET" LINK "gg:doc/NDK/Guide/serial/CMD_RESET"} -- reset the printer@{b}

   FUNCTION@{ub}
        @{"CMD_RESET" LINK "gg:doc/NDK/Guide/serial/CMD_RESET"} resets the printer device without destroying handles
        to the open device.@{b}

   IO REQUEST@{ub}
        io_Message      mn_ReplyPort set if quick I/O is not possible
        io_Device       preset by the call to @{"OpenDevice" LINK "gg:doc/NDK/Guide/exec/OpenDevice"}
        io_Command      @{"CMD_RESET" LINK "gg:doc/NDK/Guide/serial/CMD_RESET"}
        io_Flags        @{"IOB_QUICK" LINK "gg:doc/NDK/Guide/Include/exec/io.h/File" 45} set if quick I/O is possible

@ENDNODE
@NODE "CMD_START" "printer.device/CMD_START"
@{b}

   NAME@{ub}
        @{"CMD_START" LINK "gg:doc/NDK/Guide/serial/CMD_START"} -- restart after stop (immediate)@{b}

   FUNCTION@{ub}
        @{"CMD_START" LINK "gg:doc/NDK/Guide/serial/CMD_START"} restarts the unit after a stop command.@{b}

   IO REQUEST@{ub}
        io_Message      mn_ReplyPort set if quick I/O is not possible
        io_Device       preset by the call to @{"OpenDevice" LINK "gg:doc/NDK/Guide/exec/OpenDevice"}
        io_Command      @{"CMD_START" LINK "gg:doc/NDK/Guide/serial/CMD_START"}
        io_Flags        @{"IOB_QUICK" LINK "gg:doc/NDK/Guide/Include/exec/io.h/File" 45} set if quick I/O is possible

@ENDNODE
@NODE "CMD_STOP" "printer.device/CMD_STOP"
@{b}

   NAME@{ub}
        @{"CMD_STOP" LINK "gg:doc/NDK/Guide/serial/CMD_STOP"} -- pause current and queued I/O requests (immediate)@{b}

   FUNCTION@{ub}
        @{"CMD_STOP" LINK "gg:doc/NDK/Guide/serial/CMD_STOP"} pauses all queued requests for the unit, and tries to
        pause the current I/O request.  The only commands that will
        be subsequently allowed to be performed are immediate I/O
        requests, which include those to start, flush, and finish the
        I/O after the stop command.@{b}

   IO REQUEST@{ub}
        io_Message      mn_ReplyPort set if quick I/O is not possible
        io_Device       preset by the call to @{"OpenDevice" LINK "gg:doc/NDK/Guide/exec/OpenDevice"}
        io_Command      @{"CMD_STOP" LINK "gg:doc/NDK/Guide/serial/CMD_STOP"}
        io_Flags        @{"IOB_QUICK" LINK "gg:doc/NDK/Guide/Include/exec/io.h/File" 45} set if quick I/O is possible

@ENDNODE
@NODE "CMD_WRITE" "printer.device/CMD_WRITE"
@{b}

   NAME@{ub}
      @{"CMD_WRITE" LINK "gg:doc/NDK/Guide/serial/CMD_WRITE"} -- send output to the printer@{b}

   FUNCTION@{ub}
      This function causes a buffer of characters to be written to the
      current printer port (usually parallel or serial).  The number of
      characters is specified in io_Length, unless -1 is used, in which
      case output is sent until a 0x00 is encountered.

      The Printer device, like the Console device, maps ANSI X3.64 style
      7-bit printer control codes to the control code set of the current
      printer.  The ANSI codes supported can be found below.@{b}

   NOTES@{ub}
      Not all printers will support all functions.  In particular you may
      not assume that the MARGINS or TABS can be set.  Close to half the
      supported printers don't fully implement one or the other.  If you
      want the features of margins or tabs you will need to fake it
      internally by sending out spaces.

      Note that the printer device may have already sent out a "set
      margins" command to the printer.  If you are faking your own
      margins, be sure to cancel the old ones first.  (use the "@{"aCAM" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 139}"
      command)

      Defaults are set up so that if a normal AmigaDOS text file
      is sent to PRT:, it has the greatest chance of working.
      (AmigaDOS text files are defined as follows:)
              tabs            - every 8
              CR (0x0D)       - moves to start of current line
              LF (0x0A)       - moves to start of next line@{b}

   IO REQUEST@{ub}
       io_Message      mn_ReplyPort set
       io_Device       preset by @{"OpenDevice" LINK "gg:doc/NDK/Guide/exec/OpenDevice"}
       io_Unit         preset by @{"OpenDevice" LINK "gg:doc/NDK/Guide/exec/OpenDevice"}
       io_Command      @{"CMD_WRITE" LINK "gg:doc/NDK/Guide/serial/CMD_WRITE"}
       io_Length       number of characters to process, or if -1,
                       process until 0x00 encountered
       io_Data         pointer to block of data to process@{b}

   RESULTS@{ub}
       io_Error : if @{"CMD_WRITE" LINK "gg:doc/NDK/Guide/serial/CMD_WRITE"} succeeded, then io_Error will be zero.
              Otherwise io_Error will be non-zero.@{b}

   SEE ALSO@{ub}
       printer.h, @{"parallel.device" LINK "gg:doc/NDK/Guide/parallel/MAIN"}, @{"serial.device" LINK "gg:doc/NDK/Guide/serial/MAIN"}, Preferences


          ANSI X3.64 style COMMANDS

        @{"aRIS" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 49}         ESCc            hard reset
        @{"aRIN" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 50}         ESC#1           initialize to defaults
        @{"aIND" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 51}         ESCD            true linefeed (lf)
        @{"aNEL" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 52}         ESCE            return,lf
        @{"aRI" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 53}          ESCM            reverse lf              *

        @{"aSGR0" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 55}        ESC[0m          normal character set
        @{"aSGR3" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 56}        ESC[3m          italics on
        @{"aSGR23" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 57}       ESC[23m         italics off
        @{"aSGR4" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 58}        ESC[4m          underline on
        @{"aSGR24" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 59}       ESC[24m         underline off
        @{"aSGR1" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 60}        ESC[1m          boldface on
        @{"aSGR22" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 61}       ESC[22m         boldface off
        @{"aSFC" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 62}         SGR30-39        set foreground color
        @{"aSBC" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 63}         SGR40-49        set background color

        @{"aSHORP0" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 65}      ESC[0w          normal pitch
        @{"aSHORP2" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 66}      ESC[2w          elite on
        @{"aSHORP1" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 67}      ESC[1w          elite off
        @{"aSHORP4" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 68}      ESC[4w          condensed on
        @{"aSHORP3" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 69}      ESC[3w          condensed off
        @{"aSHORP6" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 70}      ESC[6w          enlarged on
        @{"aSHORP5" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 71}      ESC[5w          enlarged off

        @{"aDEN6" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 73}        ESC[6"z         shadow print on
        @{"aDEN5" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 74}        ESC[5"z         shadow print off
        @{"aDEN4" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 75}        ESC[4"z         doublestrike on
        @{"aDEN3" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 76}        ESC[3"z         doublestrike off
        @{"aDEN2" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 77}        ESC[2"z         Near Letter Quality (NLQ) on
        @{"aDEN1" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 78}        ESC[1"z         NLQ off

        @{"aSUS2" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 80}        ESC[2v          superscript on
        @{"aSUS1" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 81}        ESC[1v          superscript off
        @{"aSUS4" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 82}        ESC[4v          subscript on
        @{"aSUS3" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 83}        ESC[3v          subscript off
        @{"aSUS0" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 84}        ESC[0v          normalize the line      *
        @{"aPLU" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 85}         ESCL            partial line up         *
        @{"aPLD" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 86}         ESCK            partial line down       *

        @{"aFNT0" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 88}        ESC(B           US char set (default)   or Font 0
        @{"aFNT1" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 89}        ESC(R           French char set         or Font 1
        @{"aFNT2" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 90}        ESC(K           German char set         or Font 2
        @{"aFNT3" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 91}        ESC(A           UK char set             or Font 3
        @{"aFNT4" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 92}        ESC(E           Danish I char set       or Font 4
        @{"aFNT5" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 93}        ESC(H           Sweden char set         or Font 5
        @{"aFNT6" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 94}        ESC(Y           Italian char set        or Font 6
        @{"aFNT7" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 95}        ESC(Z           Spanish char set        or Font 7
        @{"aFNT8" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 96}        ESC(J           Japanese char set       or Font 8
        @{"aFNT9" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 97}        ESC(6           Norweign char set       or Font 9
        @{"aFNT10" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 98}       ESC(C           Danish II char set      or Font 10

        @{"aPROP2" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 116}       ESC[2p          proportional on         *
        @{"aPROP1" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 117}       ESC[1p          proportional off        *
        @{"aPROP0" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 118}       ESC[0p          proportional clear      *
        @{"aTSS" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 119}         ESC[n E         set proportional offset *
        @{"aJFY5" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 120}        ESC[5 F         auto left justify       *
        @{"aJFY7" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 121}        ESC[7 F         auto right justify      *
        @{"aJFY6" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 122}        ESC[6 F         auto full justify       *
        @{"aJFY0" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 123}        ESC[0 F         auto justify off        *
        @{"aJFY3" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 124}        ESC[3 F         letter space (justify)  *
        @{"aJFY1" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 125}        ESC[1 F         word fill(auto center)  *

        @{"aVERP0" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 127}       ESC[0z          1/8" line spacing
        @{"aVERP1" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 128}       ESC[1z          1/6" line spacing
        @{"aSLPP" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 129}        ESC[nt          set form length n
        @{"aPERF" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 130}        ESC[nq          set perforation skip to n lines (n>0)
        @{"aPERF0" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 131}       ESC[0q          perforation skip off

        @{"aLMS" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 133}         ESC#9           Left margin set         *
        @{"aRMS" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 134}         ESC#0           Right margin set        *
        @{"aTMS" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 135}         ESC#8           Top margin set          *
        @{"aBMS" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 136}         ESC#2           Bottom margin set       *
        @{"aSTBM" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 137}        ESC[Pn1;Pn2r    set T&B margins         *
        @{"aSLRM" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 138}        ESC[Pn1;Pn2s    set L&R margin          *
        @{"aCAM" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 139}         ESC#3           Clear margins

        @{"aHTS" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 141}         ESCH            Set horiz tab           *
        @{"aVTS" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 142}         ESCJ            Set vertical tabs       *
        @{"aTBC0" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 143}        ESC[0g          Clr horiz tab           *
        @{"aTBC3" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 144}        ESC[3g          Clear all h tab         *
        @{"aTBC1" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 145}        ESC[1g          Clr vertical tabs       *
        @{"aTBC4" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 146}        ESC[4g          Clr all v tabs          *
        @{"aTBCALL" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 147}      ESC#4           Clr all h & v tabs      *
        @{"aTBSALL" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 148}      ESC#5           Set default tabs (every 8)

        @{"aEXTEND" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 149}      ESC[Pn"x        Extended commands
                                     This is a mechanism for printer drivers to
                                     support extra commands which can be called
                                     by ANSI control sequences
        @{"aRAW" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 151}         ESC[Pn"r        Next 'Pn' chars are raw (ie. they are not
                                     parsed by the printer device, instead they
                                     are sent directly to the printer.


        (*) indicates that sending this command may cause unexpected results
            on a large number of printers.

@ENDNODE
@NODE "PBothReady" "printer.device/PBothReady()"
@{b}

   NAME@{ub}
        PBothReady - wait until output is finished@{b}

   FUNCTION@{ub}
        The function PBothReady should only be called from drivers. It waits
        until the output to the printer is finished.

@ENDNODE
@NODE "PRD_DUMPRPORT" "printer.device/PRD_DUMPRPORT"
@{b}

   NAME@{ub}
        @{"PRD_DUMPRPORT" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 31} -- dump the specified RastPort to a graphics printer@{b}

   FUNCTION@{ub}
        Print a rendition of the supplied RastPort, using the supplied
        ColorMap, position and scaling information, as specified in
        the printer preferences.@{b}

   IO REQUEST@{ub}
        io_Message      mn_ReplyPort set if quick I/O is not possible.
        io_Command      @{"PRD_DUMPRPORT" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 31}.
        io_Flags        @{"IOB_QUICK" LINK "gg:doc/NDK/Guide/Include/exec/io.h/File" 45} set if quick I/O is possible.
        io_RastPort     ptr to a RastPort.
        io_ColorMap     ptr to a ColorMap.
        io_Modes        the 'modes' flag from a ViewPort structure,
                        (the upper word is reserved and should be zero).

                        If you are running under version 36, or greater
                        of @{"graphics.library" LINK "gg:doc/NDK/Guide/graphics/MAIN"}, it is recommended that
                        you fill in "io_Modes" with the @{"ULONG" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 52} (32-bit)
                        value returned from calling:

                        @{"ULONG" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 52} ModeID = @{"GetVPModeID" LINK "gg:doc/NDK/Guide/graphics/GetVPModeID"}(@{"struct ViewPort" LINK "gg:doc/NDK/Guide/Include/graphics/view.h/File" 47} *);

                        Doing so provides for upwards compatability with
                        the new display modes available under V36
                        (example: aspect ratio calculations for new
                        display modes).

        io_SrcX         x offset into the RastPort to start printing from.
        io_SrcY         y offset into the RastPort to start printing from.
        io_SrcWidth     width of the RastPort to print (from io_SrcX).
        io_SrcHeight    height of the RastPort to print (from io_SrcY).
        io_DestCols     width of the printout in printer pixels.
        io_DestRows     height of the printout in printer pixels.
        io_Special      flag bits
                        (some of which pertain to DestCols and DestRows).
                        -if SPECIAL_MIL is set, then the associated
                         parameter is specified in thousandths of
                         an inch on the printer.  ie. if DestCols = 8000,
                         DestRows = 10500 and @{"SPECIAL_MILROWS" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 221} and
                         @{"SPECIAL_MILCOLS" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 220} is set then the printout would be
                         8.000 x 10.500 inches.
                        -if SPECIAL_FULL is set, then the specific dimension
                         is set to the maximum possible as determined
                         by the printer limits or the configuration
                         limits; whichever is less.
                        -if SPECIAL_FRAC is set, the parameter is
                         taken to be a longword binary fraction
                         of the maximum for that dimension.
                        -if all bits for a dimension are clear,
                         (ie. SPECIAL MIL/FULL/FRAC and ASPECT are @{"NOT" LINK "gg:doc/NDK/Guide/Include/intuition/intuition.h/File" 1500} set)
                         then the parameter is specified in printer pixels.
                        -if @{"SPECIAL_CENTER" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 226} is set then the image will be
                         put between the left and right edge of the paper.
                        -if @{"SPECIAL_ASPECT" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 227} is set, one of the dimensions
                         may be reduced/expanded to preserve the aspect
                         ratio of the print.
                        -SPECIAL_DENSITY(1-7) this allows for a maximum of 7
                         different print densities.  DENSITY1 is the lowest
                         density and the default.
                        -@{"SPECIAL_NOFORMFEED" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 235} - this allows for the mixing of
                         text and graphics or multiple graphic dumps on page
                         oriented printers (usually laser jet printers).
                         When this flag is set the page will not be ejected
                         after a graphic dump.  If you perform another
                         graphic dump without this flag set OR close the
                         printer after printing text after a graphic dump,
                         the page will be ejected.
                        -if @{"SPECIAL_TRUSTME" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 236} is set then the printer specific
                         driver is instructed to not issue a reset command
                         before and after the dump.  If this flag is @{"NOT" LINK "gg:doc/NDK/Guide/Include/intuition/intuition.h/File" 1500}
                         checked by the printer specific driver then setting
                         this flag has no effect.  Since we now recommend
                         that printer driver writers no longer issue a reset
                         command it is probably a safe idea to always set
                         this flag when calling for a dump.
                        -if @{"SPECIAL_NOPRINT" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 247} is set then the following is done:
                         Compute print size, set 'io_DestCols' and
                         'io_DestRows' in the calling program's 'IODRPReq'
                         structure and exit, DON'T PRINT.  This allows the
                         calling program to see what the final print size
                         would be in printer pixels.  Note that it modifies
                         the 'io_DestCols' and 'io_DestRows' fields of your
                         'IODRPReq' structure.  It also sets the print
                         density and updates the 'MaxXDots', 'MaxYDots',
                         'XDotsInch', and 'YDotsInch' fields of the
                         'PrinterExtendedData' structure.

        There following rules for the interpretation of io_DestRows and
        io_DestCols that may produce unexpected results when they are
        not greater than zero and io_Special is zero.  They have been
        retained for compatability.  The user will not trigger these
        other rules with well formed usage of io_Special.

        When io_Special is equal to 0, the following rules
        (from the V1.1 printer.device, and retained for compatibility
        reasons) take effect.  Remember, these special rules are
        for io_DestRows and io_DestCols and only take effect
        if io_Special is 0).

        a) DestCols>0 & DestRows>0 - use as absolute values.
           ie. DestCols=320 & DestRows=200 means that the picture
           will appear on the printer as 320x200 dots.
        b) DestCols=0 & DestRows>0 - use the printers maximum number
           of columns and print DestRows lines. ie. if DestCols=0
           and DestRows=200 than the picture will appear on the
           printer as wide as it can be and 200 dots high.
        c) DestCols=0 & DestRows=0 - same as above except the driver
           determines the proper number of lines to print based on
           the aspect ratio of the printer. ie. This results in the
           largest picture possible that is not distorted or inverted.
           Note: As of this writing, this is the call made by such
           program as DeluxePaint, GraphicCraft, and AegisImages.
        d) DestCols>0 &DestRows=0 - use the specified width and the
           driver determines the proper number of lines to print based
           on the aspect ratio of the printer. ie. if you desire a
           picture that is 500 pixels wide and aspect ratio correct,
           use DestCols=500 and DestRows=0.
        e) DestCols<0 or DestRows>0 - the final picture is either a
           reduction or expansion based on the fraction
           |DestCols| / DestRows in the proper aspect ratio.
           Some examples:
           1) if DestCols=-2 & DestRows=1 then the printed picture will
              be 2x the AMIGA picture and in the proper aspect ratio.
              (2x is derived from |-2| / 1 which gives 2.0)
           2) if DestCols=-1 & DestRows=2 then the printed picture will
              will be 1/2x the AMIGA picture in the proper aspect ratio.
              (1/2x is derived from |-1| / 2 which gives 0.5)@{b}

   NOTES@{ub}
        The printer selected in preferences must have graphics
        capability to use this command.  The error '@{"PDERR_NOTGRAPHICS" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 253}'
        is returned if the printer can not print graphics.

        Color printers may not be able to print black and white or
        greyscale pictures -- specifically, the Okimate 20 cannot print
        these with a color ribbon: you must use a black ribbon instead.
        If the printer has an input buffer option, use it.
        If the printer can be uni or bi directional, select
        uni-directional; this produces a much cleaner picture.
        Most printer drivers will attempt to set unidirectional
        printing if it is possible under software control.

        Please note that the width and height of the printable area on
        the printer is in terms of pixels and bounded by the following:
         a) WIDTH = (RIGHT_MARGIN - LEFT_MARGIN + 1) / CHARACTERS_PER_INCH
         b) HEIGHT = LENGTH / LINES_PER_INCH
        Margins are set by preferences.

        For BGR printer support, the YMC values in the printer
        specific render.c functions equate to BGR respectively, ie.
        yellow is blue, magenta is green, and cyan is red.

        For version 2.1 of the Operating @{"System" LINK "gg:doc/NDK/Guide/dos/SystemTagList"} (the Localization
        release), some of the printer drivers have been modified to
        support European A size paper (e.g., "A4").  See preferences.h
        for a list of defined sizes.  For most printers, this means
        the maximum X dots will be calculated based on millimeters
        minus 1/2 inch (approx 13 mm) - this is consistent with existing
        driver calculations (e.g., 8.0 inches wide for @{"US_LETTER" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 204}, and
        @{"US_LEGAL" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 205} sizes).

        Some printers, like the HP_LaserJet, and HP_DeskJet also
        calculate maximum Y dots.

        For all modified printer drivers, selecting paper sizes larger
        than the printer can handle may result in unexpected, or
        clipped results.  This allows for the possibility of using
        these drivers with future printers which may physically
        [and internally] support these larger sizes of paper.

        It is assumed that the user will make reasonable choices when
        selecting paper size (e.g., not select WIDE TRACTOR for a
        NARROW TRACTOR printer).

        Data Structures
        ---------------

               The printer specific and non-specific data structures can be read
               ONCE you have opened the printer device.  Here is a code fragment
               to illustrate how to do just that.

               #include <@{"exec/types.h" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File"}>
               #include <@{"devices/printer.h" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File"}>
               #include <@{"devices/prtbase.h" LINK "gg:doc/NDK/Guide/Include/devices/prtbase.h/File"}>
               #include <@{"devices/prtgfx.h" LINK "gg:doc/NDK/Guide/Include/devices/prtgfx.h/File"}>

               @{"struct IODRPReq" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 174} PReq;
               @{"struct PrinterData" LINK "gg:doc/NDK/Guide/Include/devices/prtbase.h/File" 104} *PD;
               @{"struct PrinterExtendedData" LINK "gg:doc/NDK/Guide/Include/devices/prtbase.h/File" 276} *PED;

          open the printer device / if it opened...
          if (@{"OpenDevice" LINK "gg:doc/NDK/Guide/exec/OpenDevice"}("printer.device", 0, &PReq, 0) == @{"NULL" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 101}) {
              get pointer to printer data
              PD = (@{"struct PrinterData" LINK "gg:doc/NDK/Guide/Include/devices/prtbase.h/File" 104} *)PReq.io_Device;
              get pointer to printer extended data
              PED = &PD->pd_SegmentData->ps_PED;
              let's see what's there
              @{"printf" LINK "gg:doc/NDK/Guide/amiga_lib/printf"}("PrinterName = '%s', Version=%u, Revision=%u\\n",
                  PED->ped_PrinterName, PD->pd_SegmentData->ps_Version,
                  PD->pd_SegmentData->ps_Revision,);
              @{"printf" LINK "gg:doc/NDK/Guide/amiga_lib/printf"}("PrinterClass=%u, ColorClass=%u\\n",
                  PED->ped_PrinterClass, PED->ped_ColorClass);
              @{"printf" LINK "gg:doc/NDK/Guide/amiga_lib/printf"}("MaxColumns=%u, NumCharSets=%u, NumRows=%u\\n",
                  PED->ped_MaxColumns, PED->ped_NumCharSets, PED->ped_NumRows);
              @{"printf" LINK "gg:doc/NDK/Guide/amiga_lib/printf"}("MaxXDots=%lu, MaxYDots=%lu, XDotsInch=%u, YDotsInch=%u\\n",
                  PED->ped_MaxXDots, PED->ped_MaxYDots,
                  PED->ped_XDotsInch, PED->ped_YDotsInch);
              @{"CloseDevice" LINK "gg:doc/NDK/Guide/exec/CloseDevice"}(&PReq);
          }

        Preferences
        -----------

           If you want the user to be able to access the printer preferences items
        without having to run preferences (like DPAINT II's printer requester),
        here is what you do.  You can look at the printer's copy of preferences
        by referring to 'PD->pd_Preferences' (the printer device MUST already be
        opened at this point).  After you have this you could put up a requester
        and allow the user to change whatever parameters they wanted.
        BEAR IN MIND THAT YOU ARE RESPONSIBLE FOR RANGE CHECKING THESE SELECTIONS!
        Listed below are the printer preferences items and their valid values.

        PrintPitch         - @{"PICA" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 178}, @{"ELITE" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 179}, @{"FINE" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 180}.
        PrintQuality       - @{"DRAFT" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 183}, @{"LETTER" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 184}.
        PrintSpacing       - @{"SIX_LPI" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 187}, @{"EIGHT_LPI" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 188}.
        PrintLeftMargin    - 1 to PrintRightMargin.
        PrintRightMargin   - PrintLeftMargin to 999.
        PaperLength        - 1 to 999.
        PrintImage         - @{"IMAGE_POSITIVE" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 191}, @{"IMAGE_NEGATIVE" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 192}.
        PrintAspect        - @{"ASPECT_HORIZ" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 195}, @{"ASPECT_VERT" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 196}.
        PrintShade         - @{"SHADE_BW" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 199}, @{"SHADE_GREYSCALE" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 200}, @{"SHADE_COLOR" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 201}.
        PrintThreshold     - 1 to 15.
        PrintFlags         - @{"CORRECT_RED" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 275}, @{"CORRECT_GREEN" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 276}, @{"CORRECT_BLUE" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 277}, @{"CENTER_IMAGE" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 279},
                             @{"IGNORE_DIMENSIONS" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 281}, @{"BOUNDED_DIMENSIONS" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 282},
                             @{"ABSOLUTE_DIMENSIONS" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 283}, @{"PIXEL_DIMENSIONS" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 284},
                             @{"MULTIPLY_DIMENSIONS" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 285}, @{"INTEGER_SCALING" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 287},
                             @{"ORDERED_DITHERING" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 289}, @{"HALFTONE_DITHERING" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 290}.
                             @{"FLOYD_DITHERING" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 291}, @{"ANTI_ALIAS" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 293}, @{"GREY_SCALE2" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 294}
        PrintMaxWidth      - 0 to 65535.
        PrintMaxHeight     - 0 to 65535.
        PrintDensity       - 1 to 7.
        PrintXOffset       - 0 to 255.

        Asynchronous I/O
        ----------------

            The recommended way to do asynchronous i/o is...

        a) To send requests for i/o.

            @{"struct IORequest" LINK "gg:doc/NDK/Guide/Include/exec/io.h/File" 18} *ioreq;
            @{"struct MsgPort" LINK "gg:doc/NDK/Guide/Include/exec/ports.h/File" 28} *port;
            @{"UBYTE" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 62} signal;

            port = ioreq->io_Message.mn_ReplyPort;
            signal = port->mp_SigBit;

            @{"SendIO" LINK "gg:doc/NDK/Guide/exec/SendIO"}(ioreq);  send request
            @{"Wait" LINK "gg:doc/NDK/Guide/exec/Wait"}(signal);  wait for completion (go to sleep)
            while ((Msg = @{"GetMsg" LINK "gg:doc/NDK/Guide/exec/GetMsg"}(port)) != @{"NULL" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 101}) {  get ALL messages
            }

        b) To abort a previous request for i/o.

            @{"struct IORequest" LINK "gg:doc/NDK/Guide/Include/exec/io.h/File" 18} *ioreq;

            @{"AbortIO" LINK "gg:doc/NDK/Guide/exec/AbortIO"}(ioreq);  abort request
            @{"WaitIO" LINK "gg:doc/NDK/Guide/exec/WaitIO"}(ioreq);  wait for reply

            at this point you can re-use 'ioreq'.

            Note that in the above examples 'ioreq' could be any one of...
            a) @{"struct IOStdReq" LINK "gg:doc/NDK/Guide/Include/exec/io.h/File" 27}    a standard i/o request
            b) @{"struct IODRPReq" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 174}    a dumprport i/o request
            c) @{"struct IOPrtCmdReq" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 156} a printer command i/o request

            It is recommend that you do asynchronous i/o in your programs
            and give the user a way of aborting all requests.


                       V1.3 Printer Driver Notes
                       -------------------------

               In general densities which use more than one pass should only be
        used for B&W shade dumps.  They can be used for Grey-Scale or Color Shade
        dumps BUT the output may tend to look muddy or dark.  Also multiple pass
        Color dumps tend to dirty or smear the ribbon (ie. yellow will get
        contaminated with the other colors on the ribbon; you have been warned).


        Alphacom_AlphaPro_101
        ---------------------
        1. Daisywheel printer (text only).

        Brother_HR-15XL
        ---------------
        1. Daisywheel printer (text only).

        CalComp_ColorMaster
        -------------------
        1. Thermal transfer b&w/color printer (text and graphics).
        2. Use Black ribbon for non-color dumps; Color ribbon for color dumps.
        3. Linefeeds # of vertical dots printed.
        4. Densities supported are 203x200(1) dpi.
        5. This is a dual printer driver.  Select a PaperSize of 'Narrow Tractor'
           for use with the ColorMaster; 'Wide Tractor' for use with the
           ColorView-5912 (which uses 11 x 17 inch paper).

        CalComp_ColorMaster2
        -------------------
        1. Thermal transfer b&w/color printer (text and graphics).
        2. Use Black ribbon for non-color dumps; Color ribbon for color dumps.
        3. Linefeeds # of vertical dots printed.
        4. Densities supported are 203x200(1) dpi.
        5. This is a dual printer driver.  Select a PaperSize of 'Narrow Tractor'
           for use with the ColorMaster; 'Wide Tractor' for use with the
           ColorView-5912 (which uses 11 x 17 inch paper).
        6. This driver is the same as the Calcomp_ColorMaster driver EXCEPT it is
           approximately 2 times faster (during color dumps) and requires LOTS of
           memory (up to 1,272,003 bytes for a full 8 x 10 inch (1600 x 2000 dot)
           color dump).  Typically full-size (color) dumps are 1600 x 1149 dots and
           require 730,767 bytes.  Memory requirements for the ColorView-5912
           are up to 2,572,803 bytes for a full 10 x 16 inch (2048 x 3200 dot)
           color dump.  Typically full-size (color) dumps are 2048 x 2155 dots and
           require 1,732,623 bytes.  The memory requirements are 1/3 when doing a
           non-color printout (on both the ColorMaster and ColorView).

        Canon_PJ-1080A
        --------------
        1. Ink jet b&w/color printer (text and graphics).
        2. Linefeeds # of vertical dots printed.
        3. Densities supported are 83x84(1) dpi.

        @{"CBM_MPS1000" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 226}
        -----------
        1. Dot matrix b&w printer (text and graphics).
        2. Linefeeds # of vertical dots printed (-1/3 dot if PaperType = Single). *2
        3. Density     XDPI    YDPI    XYDPI   Comments
               1       120      72      8640
               2       120     144     17280   two pass
               3       240      72     17280                   *1
               4       120     216     25920   three pass
               5       240     144     34560   two pass        *1
               6       240     216     51840   three pass      *1
               7       same as 6
        4. Print width for @{"US_LETTER" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 204} size paper is 8.0 inches.
        5. As of version 35.48, this driver calculates maximum X dots for
           European A size paper as defined in preferences.h.  Some of
           these sizes are too large for this printer.

        Diablo_630
        ----------
        1. Daisywheel printer (text only).

        Diablo_Advantage_D25
        --------------------
        1. Daisywheel printer (text only).

        Diablo_C-150
        ------------
        1. Ink jet b&w/color printer (text and graphics).
        2. Always linefeeds 4 dots (limitation of printer).
        3. A PaperSize of 'Wide Tractor' selects a maximum print width of
           8.5 inches (for wide roll paper).
        5. Densities supported are 120x120(1) dpi.

        EpsonQ (24-pin Epson compatible)
        ------
        1. Dot matrix b&w/color printer (text and graphics).
        2. Drives all EpsonQ (LQ1500, LQ2500, etc.) compatible printers.
        3. Linefeeds # of vertical dots printed.
        4. Density     XDPI    YDPI    XYDPI   Comments
               1        90     180     16200
               2       120     180     21600
               3       180     180     32400
               4       360     180     64800   *1
               5,6,7   same as 4
        5. A PaperSize of 'Wide Tractor' selects a maximum print width of
           13.6 inches (for wide carriage printers).
        6. A PaperType of 'Single' uses only 16 of the 24 pins, whereas a PaperType
           of 'Fanfold' uses all 24 pins.  The 'Single' option is useful for those
           printers which have a weak power supply and cannot drive all 24 pins
           continuously.  If during a single pass of the print head you notice that
           the top two thirds of the graphics are darker than the bottom one third
           then you will probably need to drop down to 16 pins.
        7. As of version 35.71, this driver calculates maximum X dots for
           European A size paper as defined in preferences.h.  The calculation
           is based on millimeters minus 1/2 inch (approx 13mm).  Maximum
           paper width is 13.6 inches, so some European A sizes are too large
           for this printer.

        EpsonX[CBM_MPS-1250] (8/9-pin Epson compatible)
        --------------------
        1. Dot matrix b&w/color printer (text and graphics).
        2. Drives all EpsonX (EX/FX/JX/LX/MX/RX, etc.) compatible printers.
        3. Linefeeds # of vertical dots printed (-1/3 dot if PaperType = Single). *2
        4. Density     XDPI    YDPI    XYDPI   Comments
               1       120      72      8640
               2       120     144     17280   two pass
               3       240      72     17280                   *1
               4       120     216     25920   three pass
               5       240     144     34560   two pass        *1
               6       240     216     51840   three pass      *1
               7       same as 6

        5. A PaperSize of 'Wide Tractor' selects a maximum print width of
           13.6 inches (for wide carriage printers).
        6. Use this driver if you own a CBM_MPS-1250 (as it is EpsonX compatible).
        7. As of version 35.42, this driver calculates maximum X dots for
           European A size paper as defined in preferences.h.  The calculation
           is based on millimeters minus 1/2 inch (approx 13mm).  Maximum
           paper width is 13.6 inches, so some European A sizes are too large
           for this printer.

        EpsonXOld (8/9-pin Epson compatible)
        ---------
        1. Dot matrix b&w printer (text and graphics).
        2. Drives all very old EpsonX (EX/FX/JX/LX/MX/RX, etc.) compatible printers.
        3. Linefeeds # of vertical dots printed.
        4. Density     XDPI    YDPI    XYDPI   Comments
               1        60     72       4320
               2       120     72       8640   (double speed)                  *1
               3       120     72       8640
               4       240     72      17280                                   *1
               5       120     72       8640   (for use on old Star printers)
               6       240     72      17280   (for use on old Star printers)  *1
               7       240     72      17280   (same as density 4)             *1
        5. A PaperSize of 'Wide Tractor' selects a maximum print width of
           13.6 inches (for wide carriage printers).
        6. Use this driver if the EpsonX driver does not work properly in graphics
           or text mode on your EpsonX compatible printer.

        generic
        -------
        1. Text only printer.

        Howtek_Pixelmaster
        ------------------
        1. Plastic ink jet b&w/color printer (text and graphics).
        2. Linefeeds # of vertical dots printed.
        3. Density     XDPI    YDPI    XYDPI   Comments
               1        80      80      6400
               2       120     120     14400
               3       160     160     25600
               4       240     240     57600
               5,6,7   same as 4
        4. Maximum print area is 8.0 x 10.0 inches.

        HP_DeskJet
        ----------
        1. Ink jet non-color printer (text and graphics).
        2. Linefeeds # of vertical dots printed.
        3. Density     XDPI    YDPI    XYDPI   Comments
               1        75      75      5625
               2       100     100     10000
               3       150     150     22500
               4       300     300     90000
               5,6,7   same as 4
        4. Maximum print area is 8.0 x 10.0 inches @{"US_LEGAL" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 205}, and 8.0 x
           13.0 inches @{"US_LETTER" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 204}.
        5. As of version 35.29, the driver will calculate maximum area
           size for European A size paper as defined in preferences.h.
           The driver calculates the maximum X, and Y dots based on
           millimeters, minus 1/2 inch from the width, and minus 1"
           from the height (approx 13mm, and 26mm respectively).
           Therefore the margin area is consistent with US paper sizes.
        6. Some European A sizes are too large for this printer.

        HP_LaserJet (LaserJet+/LaserJetII compatible)
        -----------
        1. Laser engine non-color printer (text and graphics).
        2. Linefeeds # of vertical dots printed.
        3. Density     XDPI    YDPI    XYDPI   Comments
               1        75      75      5625
               2       100     100     10000
               3       150     150     22500
               4       300     300     90000
               5,6,7   same as 4
        4. Maximum print area is 8.0 x 10.0 inches @{"US_LEGAL" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 205}, and 8.0 x
           13.0 inches @{"US_LETTER" LINK "gg:doc/NDK/Guide/Include/intuition/preferences.h/File" 204}.
        5. As of version 35.59, the driver will calculate maximum area
           size for European A size paper as defined in preferences.h.
           The driver calculates the maximum X, and Y dots based on
           millimeters, minus 1/2 inch from the width, and minus 1"
           from the height (approx 13 mm, and 26 mm respectively).
           Therefore the margin area is consistent with US paper sizes.
        6. Some European A sizes are too large for this printer.

        HP_PaintJet
        -----------
        1. Ink jet b&w/color printer (text and graphics).
        2. Linefeeds # of vertical dots printed.
        3. Densities supported are 180x180(1) dpi.

        HP_ThinkJet
        ----------
        1. Ink jet non-color printer (text and graphics).
        2. Linefeeds # of vertical dots printed.
        3. Density     XDPI    YDPI    XYDPI   Comments
               1        96     96       9216
               2       192     96      18432
               3,4,5,6,7       same as 4
        4. This printer prints 640 dots X in 96 DPI mode, and 120 dots
           X in 192 DPI mode.  Other sizes are not supported by the
           printer.

        Imagewriter II (Imagewriter compatible)
        --------------
        1. Dot matrix b&w/color printer (text and graphics).
        2. Linefeeds # of vertical dots printed.
        3. Density     XDPI    YDPI    XYDPI   Comments
               1        80      72      5760
               2       120      72      8640
               3       144      72     10368
               4       160      72     11520
               5       120     144     17280   two pass
               6       144     144     20736   two pass
               7       160     144     23040   two pass

        Nec_Pinwriter (24-wire Pinwriter compatible (P5/P6/P7/P9/P2200))
        -------------
        1. Dot matrix b&w/color printer (text and graphics).
        2. Drives all NEC 24-wire Pinwriter compatible printers.
        3. Linefeeds # of vertical dots printed.
        4. Density     XDPI    YDPI    XYDPI   Comments
               1        90     180      16200
               2       120     180      21600
               3       180     180      32400
               4       120     360      43200  two pass
               5       180     360      64800  two pass
               6       360     180      64800
               7       360     360     129600  two pass
        5. A PaperSize of 'Wide Tractor' selects a maximum print width of
           13.6 inches (for wide carriage printers).
        6. As of version 35.17, this driver calculates maximum X dots for
           European A size paper as defined in preferences.h.  The calculation
           is based on millimeters minus 1/2 inch (approx 13mm).  Maximum
           paper width is 13.6 inches, so some European A sizes are too large
           for this printer.

        Okidata_92
        ----------
        1. Dot matrix non-color printer (text and graphics).
        2. Always linefeeds 7/72 inch (limitation of printer in graphics mode).
        3. Densities supported are 72x72 dpi.

        Okidata_293I
        ------------
        1. Dot matrix b&w/color printer (text and graphics).
        2. Drives 292 or 293 using the IBM interface module.
        3. Linefeeds # of vertical dots printed (-1/2 dot if PaperType = Single) *3
        4. Density     XDPI    YDPI    XYDPI   Comments
               1       120     144     17280
               2       240     144     34560
               3       120     288     34560   two pass
               4       240     288     69120   two pass
               5,6,7   same as 4
        5. A PaperSize of 'Wide Tractor' selects a maximum print width of
           13.6 inches (for wide carriage printers).

        Okimate-20
        ----------
        1. Thermal transfer b&w/color printer (text and graphics).
        2. Use Black ribbon for non-color dumps; Color ribbon for color dumps.
        3. Linefeeds an even # of dots printed. (ie. if 3 printed, 4 advanced).
        4. Densities supported are 120x144(1) dpi.

        Quadram_QuadJet
        ---------------
        1. Ink jet b&w/color printer (text and graphics).
        2. Linefeeds # of vertical dots printed.
        3. Densities supported are 83x84(1) dpi.

        Qume_LetterPro_20
        -----------------
        1. Daisywheel printer (text only).

        Seiko_5300
        ----------
        1. Thermal transfer b&w/color printer (graphics only).
        2. Use Black ribbon for non-color dumps; Color ribbon for color dumps.
        3. Density     XDPI    YDPI    XYDPI   Comments
               1       152     152     23104   drives CH-5301 printer
               2       203     203     41209   drives CH-5312 printer
               3       240     240     57600   drives CH-5303 printer
               4, 5,6,7        same as 3
               You must select the proper density to drive the specific printer
               that you have.
        4. This driver is not on the V1.3 Workbench or Extras disk.  It is
           available on BIX and directly from Seiko.

        Seiko_5300a
        -----------
        1. Thermal transfer b&w/color printer (graphics only).
        2. Use Black ribbon for non-color dumps; Color ribbon for color dumps.
        3. Density     XDPI    YDPI    XYDPI   Comments
               1       152     152     23104   drives CH-5301 printer
               2       203     203     41209   drives CH-5312 printer
               3       240     240     57600   drives CH-5303 printer
               4, 5,6,7        same as 3
               You must select the proper density to drive the specific printer
               that you have.
        4. This driver is the same as the Seiko_5300 driver EXCEPT it is
           approximately 2 times faster (during color dumps) and requires LOTS of
           memory (up to 1,564,569 bytes for a full 8 x 10 inch (1927 x 2173 dot)
           color dump).  Typically full-size (color) dumps are 1927 x 1248 dots
           and require 898,569 bytes.  The memory requirements are 1/3 when doing
           a non-color printout.
        5. This driver is not on the V1.3 Workbench or Extras disk.  It is
           available on BIX and directly from Seiko.

        Tektronix_4693D
        ---------------
        1. Thermal transfer b&w/color printer (graphics only).
        2. Densities supported are 300x300(1) dpi
        3. Due to the way the printer images a picture none of the printer
           preferences options affect the printout with the following exceptions:
           a)Aspect - Horizontal, Vertical
           b)Shade - B&W, Grey_Scale, Color
           ...as a result of this only full size pictures can be printed.
        4. Keypad menu option 3b COLOR ADJUSTMENT may be set from the keypad.
           For normal prints this option should be set to "do not adjust".
        5. Keypad menu option 3d VIDEO COLOR CORRECTION may be set from the keypad.
           For normal prints this option should be set to "do not adjust".
        6. Keypad menu option 5 BACKGROUND COLOR EXCHANGE may be set from the
           keypad.  For normal prints this option should be set to "print colors
           as received".
        7. Once a picture has been printed additional copies may be printed
           without resending by using the printers keypad.
        8. This driver is not on the V1.3 Workbench or Extras disk.  It is
           available on BIX and directly from Tektronix.

        Tektronix_4696
        --------------
        1. Ink jet b&w/color printer (text and graphics).
        2. Always linefeeds 4 dots (limitation of printer).
        3. Densities supported are 121x120(1), 242x120(black)(2) and
           242x120(color)(3).
           Selecting a density of 2 or higher really doesn't give you true 242 dpi
           resolution since the printer only has 121 x dots per inch.
           Instead this mode tells the printer to go into it's double pass mode.
           Here, it outputs a line of dots at 121 dpi; and outputs the line again
           (shifted to the right by 1/242 of an inch).  This produces much more
           vibrate colors and gives the illusion of more resolution.  One drawback
           is that large areas of solid colors (red, green, and blue specifically)
           tend to over-saturate the paper with ink.  Density1 outputs all colors
           in one pass.  Density 2 does a double pass on black.  Density 3 does a
           double pass on all colors.  Density 1 to 3 correspond to the printer's
           graphics printing modes 1 to 3 (respectively).
        4. This driver is not on the V1.3 Workbench or Extras disk.  It is
           available on BIX and directly from Tektronix.
        5. A PaperSize of 'Wide Tractor' selects a maximum print width of
           9.0 inches (for wide roll paper).

        Toshiba_P351C (24-pin Toshiba compatible)
        -------------
        1. Dot matrix b&w/color printer (text and graphics).
        2. Drives all Toshiba_P351C compatible printers.
        3. Linefeeds # of vertical dots printed.
        4. Density     XDPI    YDPI    XYDPI   Comments
               1       180     180     32400
               2       360     180     64800
               3,4,5,6,7       same as 2
        5. A PaperSize of 'Wide Tractor' selects a maximum print width of
           13.5 inches (for wide carriage printers).

        Toshiba_P351SX (24-pin Toshiba compatible)
        --------------
        1. Dot matrix b&w/color printer (text and graphics).
        2. Drives all Toshiba_P351SX (321SL, 321SLC, 341SL) compatible printers.
        3. Linefeeds # of vertical dots printed.
        4. Density     XDPI    YDPI    XYDPI   Comments
               1       180     180      32400
               2       360     180      64800
               3       180     360      64800  two pass
               4       360     360     129600  two pass
               5,6,7   same as 4
        5. A PaperSize of 'Wide Tractor' selects a maximum print width of
           13.5 inches (for wide carriage printers).

        Xerox_4020
        ----------
        1. Ink jet b&w/color printer (text and graphics).
        2. Always linefeeds 4 dots (limitation of printer).
        3. This driver is IDENTICAL to the Diablo_C-150 driver EXCEPT it outputs
           all black dots TWICE.  This is a special feature of this printer and
           produces much more solid, darker black shades.  Please note that some
           printing time overhead results from this feature; if you don't want it
           use the Diablo_C-150 driver.
        4. Densities supported are 121x120(1) and 242x240(2) dpi.
           Selecting a density of 2 or higher really doesn't give you true 240 dpi
           resolution since the Xerox_4020 only has 121 x dots per inch.
           Instead this mode tells the printer to go into it's pseudo 240 dpi mode.
           Here, it outputs a line of dots at 121 dpi; moves the paper up 1/240 of
           an inch and outputs the line again (shifted to the right by 1/240 of an
           inch).  This produces much more vibrate colors and gives the illusion
           of more resolution.  One drawback is that large areas of solid colors
           (red, green, and blue specifically) tend to over-saturate the paper with
           ink.
        5. A PaperSize of 'Wide Tractor' selects a maximum print width of
           9.0 inches (for wide roll paper).


        Notes
        -----

        *0 - on most printers friction fed paper tends to produce better looking
             (ie. less horizontal banding) graphic dumps than tractor fed paper.

        *1 - in this mode the printer cannot print two consecutive dots in a row.
             It is recommended that you only use this density for B&W Shade dumps.

        *2 - only when 72 YDPI is selected.  This option is useful if you notice
             tiny white horizontal strips in your printout.

        *3 - only when 144 YDPI is selected.  This option is useful if you notice
             tiny white horizontal strips in your printout.

@ENDNODE
@NODE "PRD_DUMPRPORTTAGS" "printer.device/PRD_DUMPRPORTTAGS"
@{b}

   NAME@{ub}
        @{"PRD_DUMPRPORTTAGS" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 43} -- dump the specified RastPort to a printer (V44)@{b}

   FUNCTION@{ub}
        Print a rendition of the supplied RastPort, using the supplied
        ColorMap, position and scaling information, as specified in
        the printer preferences.@{b}

   IO REQUEST@{ub}
        io_Message      mn_ReplyPort set if quick I/O is not possible.
        io_Command      @{"PRD_DUMPRPORT" LINK "PRD_DUMPRPORT"}.
        io_Flags        @{"IOB_QUICK" LINK "gg:doc/NDK/Guide/Include/exec/io.h/File" 45} set if quick I/O is possible.
        io_RastPort     ptr to a RastPort.
        io_ColorMap     ptr to a ColorMap.
        io_Modes        the 'modes' flag from a ViewPort structure,
                        (the upper word is reserved and should be zero).

                        If you are running under version 36, or greater
                        of @{"graphics.library" LINK "gg:doc/NDK/Guide/graphics/MAIN"}, it is recommended that
                        you fill in "io_Modes" with the @{"ULONG" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 52} (32-bit)
                        value returned from calling:

                        @{"ULONG" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 52} ModeID = @{"GetVPModeID" LINK "gg:doc/NDK/Guide/graphics/GetVPModeID"}(@{"struct ViewPort" LINK "gg:doc/NDK/Guide/Include/graphics/view.h/File" 47} *);

                        Doing so provides for upwards compatability with
                        the new display modes available under V36
                        (example: aspect ratio calculations for new
                        display modes).

        io_SrcX         x offset into the RastPort to start printing from.
        io_SrcY         y offset into the RastPort to start printing from.
        io_SrcWidth     width of the RastPort to print (from io_SrcX).
        io_SrcHeight    height of the RastPort to print (from io_SrcY).
        io_DestCols     width of the printout in printer pixels.
        io_DestRows     height of the printout in printer pixels.
        io_Special      flag bits
        io_TagList      a list of tags to specify more parameters for the
                        dump.@{b}

   TAGS@{ub}
        @{"DRPA_SourceHook" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 306} a pointer to @{"struct Hook" LINK "gg:doc/NDK/Guide/Include/utility/hooks.h/File" 28} which is called to read
                        the source data. io_RastPort and io_ColorMap are
                        ignored and should be @{"NULL" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 101}.

                        The hook is called with object == @{"NULL" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 101} and message
                        is a pointer to @{"struct DRPSourceMsg" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 315}. It must read
                        an array of source data.

                        Each pixel of the array is an @{"ULONG" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 52} of form
                        0x00RRGGBB.

                        Some printer drivers have set PPCB_NOSTRIPE which
                        means they cannot print in stripes. Using
                        @{"DRPA_SourceHook" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 306} is the best way for printing for such
                        printers because you can still prepare the printer
                        source data in stripes then.

                        The Source Hook is always called in the context of
                        the printer driver DOS process.

        @{"DRPA_AspectX" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 327}    the X aspect ratio.
        @{"DRPA_AspectY" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 328}    the Y aspect ratio. This values overwrites the
                        aspect ratio from GfxBase or io_Modes and is used
                        for scaling.

@ENDNODE
@NODE "PRD_EDITPREFS" "printer.device/PRD_EDITPREFS"
@{b}

   NAME@{ub}
        @{"PRD_EDITPREFS" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 41} - open the driver preferences window (V44)@{b}

   FUNCTION@{ub}
        New drivers can have own preferences. This commands ask the driver
        to open a window to allow the user to change the prefs. Typically
        this is done with an @{"DoIO()" LINK "gg:doc/NDK/Guide/exec/DoIO"} call.

        Every application should have a button "Driver Options..." (that
        calls @{"PRD_EDITPREFS" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 41}) in its printer dialog.@{b}

   IO REQUEST@{ub}
        io_Message      mn_ReplyPort set if quick I/O is not possible.
        io_Command      @{"PRD_EDITPREFS" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 41}
        io_Flags        @{"IOB_QUICK" LINK "gg:doc/NDK/Guide/Include/exec/io.h/File" 45} set if quick I/O is possible.
        io_TagList      a list of tags to specify more parameters

        The following tags are currently defined:

        @{"PPRA_Window" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 351} (@{"struct Window" LINK "gg:doc/NDK/Guide/Include/intuition/intuition.h/File" 909} *)   a pointer to a window. This prefs
                window will open on the same screen and lock the window from
                user input.
        @{"PPRA_Screen" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 352} (@{"struct Screen" LINK "gg:doc/NDK/Guide/Include/intuition/screens.h/File" 133} *)   a pointer to a screen. That can be
                used if no window is open.
        @{"PPRA_PubScreen" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 353} (@{"STRPTR" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 67}) a name of a public screen that will be used
                to open the window. This can be @{"NULL" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 101} to use the default
                public screen.

@ENDNODE
@NODE "PRD_PRTCOMMAND" "printer.device/PRD_PRTCOMMAND"
@{b}

   NAME@{ub}
       @{"PRD_PRTCOMMAND" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 30} -- send a command to the printer@{b}

   FUNCTION@{ub}
      This function sends a command to either the parallel or serial
      device.  The printer device maps this command to the control
      code set of the current printer.  The commands supported can
      be found with the printer.device/Write command.  All printers
      may not support all functions.

        IO REQUEST IOPrtCmdReq
            io_Message      mn_ReplyPort set
            io_Device       preset by @{"OpenDevice" LINK "gg:doc/NDK/Guide/exec/OpenDevice"}
            io_Unit         preset by @{"OpenDevice" LINK "gg:doc/NDK/Guide/exec/OpenDevice"}
            io_Command      @{"PRD_PRTCOMMAND" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 30}
            io_PrtCommand   the actual command number
            io_Parm0        parameter for the command
            io_Parm1        parameter for the command
            io_Parm2        parameter for the command
            io_Parm3        parameter for the command@{b}

   RESULTS@{ub}
       Errors: if the @{"PRD_PRTCOMMAND" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 30} succeeded, then io_Error will be zero.
       Otherwise io_Error will be non-zero.  An error of -1 indicates that
       the command is not supported by the current printer driver.  This
       could be used to check if the connected printer supports a particular
       command (italics for example).@{b}

   SEE ALSO@{ub}
       @{"printer.device/PWrite()" LINK "PWrite"} printer.h, @{"parallel.device" LINK "gg:doc/NDK/Guide/parallel/MAIN"}, Preferences

@ENDNODE
@NODE "PRD_QUERY" "printer.device/PRD_QUERY"
@{b}

   NAME@{ub}
        @{"PRD_QUERY" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 32} -- query printer port/line status@{b}

   FUNCTION@{ub}
        This command returns the status of the printer port's lines and
        registers.  Since the printer port uses either the serial or
        parallel port for i/o, the actual status returned is either the
        serial or parallel port's status.@{b}

   IO REQUEST@{ub}
        io_Message      mn_ReplyPort set if quick I/O is not possible
        io_Device       preset by the call to @{"OpenDevice" LINK "gg:doc/NDK/Guide/exec/OpenDevice"}
        io_Command      @{"PRD_QUERY" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 32}
        io_Data         ptr to 2 UBYTES where result will be stored.@{b}

   RESULTS@{ub}
     io_Data          BIT  ACTIVE  FUNCTION (SERIAL DEVICE)

             LSB       0    low    reserved
                       1    low    reserved
                       2    low    reserved
                       3    low    Data Set Ready
                       4    low    Clear To Send
                       5    low    Carrier Detect
                       6    low    Ready To Send
                       7    low    Data Terminal Ready
             MSB       8    high   read buffer overflow
                       9    high   break sent (most recent output)
                      10    high   break received (as latest input)
                      11    high   transmit x-OFFed
                      12    high   receive x-OFFed
                   13-15           reserved


     io_Data          BIT  ACTIVE  FUNCTION (PARALLEL DEVICE)

                       0     hi     printer busy (offline)
                       1     hi     paper out
                       2     hi     printer selected
                                     (WARNING: the bit 2 line is also connected
                                      to the serial port's ring indicator pin
                                      on the A500 and A2000)
                     3-7            reserved

     io_Actual       1-parallel, 2-serial

@ENDNODE
@NODE "PRD_RAWWRITE" "printer.device/PRD_RAWWRITE"
@{b}

   NAME@{ub}
        @{"PRD_RAWWRITE" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 29} -- transparent write command@{b}

   FUNCTION@{ub}
        This is a non standard write command that performs no
        processing on the data passed to it.@{b}

   IO REQUEST@{ub}
        io_Message      mn_ReplyPort set if quick I/O is not possible
        io_Command      @{"PRD_RAWWRITE" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 29}
        io_Flags        @{"IOB_QUICK" LINK "gg:doc/NDK/Guide/Include/exec/io.h/File" 45} set if quick I/O is possible
        io_Length       the number of bytes in io_Data
        io_Data         the raw bytes to write to the printer

@ENDNODE
@NODE "PRD_READPREFS" "printer.device/PRD_READPREFS"
@{b}

   NAME@{ub}
        @{"PRD_READPREFS" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 39} - read the current driver preferences in a buffer (V44)@{b}

   FUNCTION@{ub}
        This is a non standard read command that reads the driver
        preferences.@{b}

   IO REQUEST@{ub}
        io_Message      mn_ReplyPort set if quick I/O is not possible
        io_Command      @{"PRD_READPREFS" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 39}
        io_Flags        @{"IOB_QUICK" LINK "gg:doc/NDK/Guide/Include/exec/io.h/File" 45} set if quick I/O is possible
        io_Length       the size of the buffer in io_Data
        io_Data         a buffer
        io_Actual       the number of bytes copied to the buffer.

        If the read fails because the buffer is too small you should double
        the size of the buffer and try it again.

        Never interpret the contents of the buffer. You are allowed to save
        it to file (as one block of data) and of course to write it back to
        the driver (@{"PRD_WRITEPREFS" LINK "PRD_WRITEPREFS"}).

        If you close the printer device between @{"PRD_EDITPREFS" LINK "PRD_EDITPREFS"} and the
        actual printing (@{"CMD_WRITE" LINK "CMD_WRITE"} or @{"PRD_DUMPRPORTTAGS" LINK "PRD_DUMPRPORTTAGS"}) you must read
        the prefs after @{"PRD_EDITPREFS" LINK "PRD_EDITPREFS"} and write it back before printing
        or the driver may forget the user changes.

@ENDNODE
@NODE "PRD_SETERRHOOK" "printer.device/PRD_SETERRHOOK"
@{b}

   NAME@{ub}
        @{"PRD_SETERRHOOK" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 42} -- set a hook for error messages (V44)@{b}

   FUNCTION@{ub}
        This command sets a hook that will be called if the printer.device
        returns with an error from any other I/O command. This allows
        printer drivers to use private error messages.@{b}

   IO REQUEST@{ub}
        io_Message      mn_ReplyPort set if quick I/O is not possible
        io_Device       preset by the call to @{"OpenDevice" LINK "gg:doc/NDK/Guide/exec/OpenDevice"}
        io_Command      PRD_SETERRORHOOK
        io_Hook         a pointer to a hook that will be called

        Two standard hook values a defined:

        @{"PDHOOK_NONE" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 359}     no error hook is to be used
        @{"PDHOOK_STD" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 360}      @{"EasyRequest()" LINK "gg:doc/NDK/Guide/intuition/EasyRequestArgs"} is used to display the error message

        The hook gets a pointer to the IORequest that caused the error as
        the object and a pointer to the following structure as message:

        @{"struct PrtErrMsg" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 384} {
                @{"ULONG" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 52} pe_Version;
                @{"ULONG" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 52} pe_ErrorLevel;
                @{"struct Window" LINK "gg:doc/NDK/Guide/Include/intuition/intuition.h/File" 909} *pe_Window; /* window for @{"EasyRequest()" LINK "gg:doc/NDK/Guide/intuition/EasyRequestArgs"} */
                @{"struct EasyStruct" LINK "gg:doc/NDK/Guide/Include/intuition/intuition.h/File" 1457} *pe_ES;
                @{"ULONG" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 52} *pe_IDCMP;
                @{"APTR" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 49} pe_ArgList;
        };
                pe_Version      the message version number @{"PDHOOK_VERSION" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 394}
                pe_ErrorLevel   one of @{"RETURN_WARN" LINK "gg:doc/NDK/Guide/Include/dos/dos.h/File" 233}, @{"RETURN_ERROR" LINK "gg:doc/NDK/Guide/Include/dos/dos.h/File" 234}, @{"RETURN_FAIL" LINK "gg:doc/NDK/Guide/Include/dos/dos.h/File" 235}
                pe_Window       a window pointer (for @{"EasyRequest()" LINK "gg:doc/NDK/Guide/intuition/EasyRequestArgs"}) or @{"NULL" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 101}
                pe_ES           a pointer to the error message structure
                pe_IDCMP        a pointer to IDCMP Flags for @{"EasyRequest()" LINK "gg:doc/NDK/Guide/intuition/EasyRequestArgs"}
                pe_ArgList      a pointer to an array of arguments

                The simplest case is to use that structure to call @{"EasyRequest()" LINK "gg:doc/NDK/Guide/intuition/EasyRequestArgs"}
                or to @{"printf()" LINK "gg:doc/NDK/Guide/amiga_lib/printf"} a message to a console (use the error message from
                pe_ES and the pe_ArgList).

@ENDNODE
@NODE "PRD_WRITEPREFS" "printer.device/PRD_WRITEPREFS"
@{b}

   NAME@{ub}
        @{"PRD_WRITEPREFS" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 40} - write the current driver prefs from a buffer (V44)@{b}

   FUNCTION@{ub}
        This is a non standard write command that writes the driver
        preferences.@{b}

   IO REQUEST@{ub}
        io_Message      mn_ReplyPort set if quick I/O is not possible
        io_Command      @{"PRD_WRITEPREFS" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 40}
        io_Flags        @{"IOB_QUICK" LINK "gg:doc/NDK/Guide/Include/exec/io.h/File" 45} set if quick I/O is possible
        io_Length       the length of the buffer
        io_Data         a buffer
        io_Actual       the number of bytes copied to the driver prefs.

        The printer driver checks the buffer before copying it to its
        preferences. So you don't have to worry about changing the printer
        driver between @{"PRD_READPREFS" LINK "PRD_READPREFS"} and @{"PRD_WRITEPREFS" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 40}.

@ENDNODE
@NODE "PQuery" "printer.device/PQuery()"
@{b}

   NAME@{ub}
        PQuery - read number of chars in input buffer@{b}

   SYNOPSIS@{ub}
        error = (*PrinterData->pd_PQuery)(*length);
        D0

        @{"LONG" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 51} @{"PRead" LINK "PRead"}(@{"LONG" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 51} *);@{b}

   FUNCTION@{ub}
        PQuery reads the number of data in the input buffer which can be
        read from the printer port. The variable length points to is set
        to the number of readable chars.

@ENDNODE
@NODE "PRead" "printer.device/PRead()"
@{b}

   NAME@{ub}
        PRead - internal read from printer port@{b}

   SYNOPSIS@{ub}
        error = (*PrinterData->pd_PRead)(buffer, length, tv);
        D0

        @{"LONG" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 51} PRead(@{"UBYTE" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 62} *, @{"ULONG" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 52} *, @{"struct timeval" LINK "gg:doc/NDK/Guide/Include/devices/timer.h/File" 30} *);@{b}

   FUNCTION@{ub}
        PRead reads a buffer of data from the printer port. The variable
        length points to is set to the actual number of read bytes.

        tv points to a @{"struct timeval" LINK "gg:doc/NDK/Guide/Include/devices/timer.h/File" 30} or is @{"NULL" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 101} in which case the default
        time is PrinterExtendedData.ped_TimeoutSecs. If the time of tv
        ellapes before the @{"CMD_READ" LINK "gg:doc/NDK/Guide/audio/CMD_READ"} at the printer port is done two different
        things may happen: If at least one char is read PRead() returns. If
        no char is read but @{"PQuery" LINK "PQuery"} returns a value larger 0 the read is
        repeated with that length to read all outstanding data.

@ENDNODE
@NODE "PWrite" "printer.device/PWrite()"
@{b}

   NAME@{ub}
        PWrite -- internal write to printer port@{b}

   SYNOPSIS@{ub}
        error = (*PrinterData->pd_PWrite)(buffer, length);
        D0

        @{"LONG" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 51} PWrite(@{"UBYTE" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 62} *, @{"ULONG" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 52});@{b}

   FUNCTION@{ub}
        PWrite writes 'length' bytes directly to the printer.  This
        function is generally called by printer drivers to send
        their buffer(s) to the printer.

        This function is accessed by referencing off the PrinterData (PD)
        structure.  Below is a code fragment to show how to do get access
        to a pointer to the PrinterData (PD) structure.

        #include <@{"exec/types.h" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File"}>
        #include <@{"devices/printer.h" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File"}>
        #include <@{"devices/prtbase.h" LINK "gg:doc/NDK/Guide/Include/devices/prtbase.h/File"}>

        @{"struct IODRPReq" LINK "gg:doc/NDK/Guide/Include/devices/printer.h/File" 174} PReq;
        @{"struct PrinterData" LINK "gg:doc/NDK/Guide/Include/devices/prtbase.h/File" 104} *PD;
        @{"struct PrinterExtendedData" LINK "gg:doc/NDK/Guide/Include/devices/prtbase.h/File" 276} *PED;

        /* open the printer device (any version); if it opened... */
        if (@{"OpenDevice" LINK "gg:doc/NDK/Guide/exec/OpenDevice"}("printer.device", 0, &PReq, 0) == @{"NULL" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 101}) {

            /* get pointer to printer data structure */
            PD = (@{"struct PrinterData" LINK "gg:doc/NDK/Guide/Include/devices/prtbase.h/File" 104} *)PReq.io_Device;

            /* write something directly to the printer */
            (*PD->pd_PWrite)("Hello world\\n", 12);

            @{"CloseDevice" LINK "gg:doc/NDK/Guide/exec/CloseDevice"}(&PReq); /* close the printer device */
        }

@ENDNODE
