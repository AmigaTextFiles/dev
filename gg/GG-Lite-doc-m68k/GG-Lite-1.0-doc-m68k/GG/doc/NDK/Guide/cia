@DATABASE "gg:doc/NDK/Guide/cia"
@MASTER   "gg:doc/NDK/AutoDocs/cia.doc"
@REMARK   This file was created by ADtoHT 2.1 on 06-Jan-13 19:19:50
@REMARK   Do not edit
@REMARK   ADtoHT is © 1993-1995 Christian Stieber

@NODE MAIN "cia.doc"
@TOC "gg:doc/NDK/Guide/TOC/MAIN"

                                @{b}cia.resource@{ub}

@{"AbleICR()" LINK "AbleICR"}  @{"AddICRVector()" LINK "AddICRVector"}  @{"RemICRVector()" LINK "RemICRVector"}  @{"SetICR()" LINK "SetICR"}

@ENDNODE
@NODE "AbleICR" "cia.resource/AbleICR()"
@{b}

   NAME@{ub}
        @{"AbleICR" LINK "gg:doc/NDK/Guide/Include/inline/cia.h/File" 28} -- Enable/disable ICR interrupts.@{b}

   SYNOPSIS@{ub}
        oldMask = @{"AbleICR" LINK "gg:doc/NDK/Guide/Include/inline/cia.h/File" 28}( Resource, mask )
        D0                 A6        D0

        @{"WORD" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 54} @{"AbleICR" LINK "gg:doc/NDK/Guide/Include/inline/cia.h/File" 28}( @{"struct Library" LINK "gg:doc/NDK/Guide/Include/exec/libraries.h/File" 34} *, @{"WORD" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 54} );@{b}

   FUNCTION@{ub}
        This function provides a means of enabling and disabling 8520
        CIA interrupt control registers. In addition it returns the
        previous enable mask.@{b}

   INPUTS@{ub}
        mask            A bit mask indicating which interrupts to be
                            modified. If bit 7 is clear the mask
                            indicates interrupts to be disabled. If
                            bit 7 is set, the mask indicates
                            interrupts to be enabled. Bit positions
                            are identical to those in 8520 ICR.@{b}

   RESULTS@{ub}
        oldMask         The previous enable mask before the requested
                            changes. To get the current mask without
                            making changes, call the function with a
                            null parameter.@{b}

   EXAMPLES@{ub}
        Get the current mask:
            mask = @{"AbleICR" LINK "gg:doc/NDK/Guide/Include/inline/cia.h/File" 28}(0)
        Enable both timer interrupts:
            @{"AbleICR" LINK "gg:doc/NDK/Guide/Include/inline/cia.h/File" 28}(0x83)
        Disable serial port interrupt:
            @{"AbleICR" LINK "gg:doc/NDK/Guide/Include/inline/cia.h/File" 28}(0x08)@{b}

   EXCEPTIONS@{ub}
        Enabling the mask for a pending interrupt will cause an
        immediate processor interrupt (that is if everything else is
        enabled). You may want to clear the pending interrupts with
        @{"SetICR()" LINK "SetICR"} prior to enabling them.@{b}

   NOTE@{ub}
        The CIA resources are special in that there is more than one
        of them in the system. Because of this, the C language stubs
        in @{"amiga.lib" LINK "gg:doc/NDK/Guide/amiga_lib/MAIN"} for the CIA resources require an extra parameter
        to specify which CIA resource to use. The synopsis for the
        @{"amiga.lib" LINK "gg:doc/NDK/Guide/amiga_lib/MAIN"} stubs is as follows:

        oldMask = @{"AbleICR" LINK "gg:doc/NDK/Guide/Include/inline/cia.h/File" 28}( Resource, mask )
        D0                 A6        D0

        @{"WORD" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 54} @{"AbleICR" LINK "gg:doc/NDK/Guide/Include/inline/cia.h/File" 28}( @{"struct Library" LINK "gg:doc/NDK/Guide/Include/exec/libraries.h/File" 34} *, @{"WORD" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 54} );@{b}

   SEE ALSO@{ub}
        @{"cia.resource/SetICR()" LINK "SetICR"}

@ENDNODE
@NODE "AddICRVector" "cia.resource/AddICRVector()"
@{b}

   NAME@{ub}
        @{"AddICRVector" LINK "gg:doc/NDK/Guide/Include/inline/cia.h/File" 22} -- attach an interrupt handler to a CIA bit.@{b}

   SYNOPSIS@{ub}
        interrupt = @{"AddICRVector" LINK "gg:doc/NDK/Guide/Include/inline/cia.h/File" 22}( Resource, iCRBit, interrupt )
        D0                        A6        D0      A1

        @{"struct Interrupt" LINK "gg:doc/NDK/Guide/Include/exec/interrupts.h/File" 22} *@{"AddICRVector" LINK "gg:doc/NDK/Guide/Include/inline/cia.h/File" 22}( @{"struct Library" LINK "gg:doc/NDK/Guide/Include/exec/libraries.h/File" 34} *, @{"WORD" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 54},
                @{"struct Interrupt" LINK "gg:doc/NDK/Guide/Include/exec/interrupts.h/File" 22} * );@{b}

   FUNCTION@{ub}
        Assign interrupt processing code to a particular interrupt bit
        of the CIA ICR.  If the interrupt bit has already been
        assigned, this function will fail, and return a pointer to the
        owner interrupt.  If it succeeds, a null is returned.

        This function will also enable the CIA interrupt for the given
        ICR bit.@{b}

   INPUTS@{ub}
        iCRBit          Bit number to set (0..4).
        interrupt       Pointer to interrupt structure.@{b}

   RESULT@{ub}
        interrupt       Zero if successful, otherwise returns a
                            pointer to the current owner interrupt
                            structure.@{b}

   NOTE@{ub}
        A processor interrupt may be generated immediately if this call
        is successful.

        In general, it is probably best to only call this function
        while DISABLED so that the resource to which the interrupt
        handler is being attached may be set to a known state before
        the handler is called. You MUST @{"NOT" LINK "gg:doc/NDK/Guide/Include/intuition/intuition.h/File" 1500} change the state of the
        resource before attaching your handler to it.

        The CIA resources are special in that there is more than one
        of them in the system. Because of this, the C language stubs
        in @{"amiga.lib" LINK "gg:doc/NDK/Guide/amiga_lib/MAIN"} for the CIA resources require an extra parameter
        to specify which CIA resource to use. The synopsis for the
        @{"amiga.lib" LINK "gg:doc/NDK/Guide/amiga_lib/MAIN"} stubs is as follows:

        interrupt = @{"AddICRVector" LINK "gg:doc/NDK/Guide/Include/inline/cia.h/File" 22}( Resource, iCRBit, interrupt )
        D0                        A6        D0      A1

        @{"struct Interrupt" LINK "gg:doc/NDK/Guide/Include/exec/interrupts.h/File" 22} *@{"AddICRVector" LINK "gg:doc/NDK/Guide/Include/inline/cia.h/File" 22}( @{"struct Library" LINK "gg:doc/NDK/Guide/Include/exec/libraries.h/File" 34} *, @{"WORD" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 54},
                @{"struct Interrupt" LINK "gg:doc/NDK/Guide/Include/exec/interrupts.h/File" 22} *);

        ***WARNING***

        Never assume that any of the CIA hardware is free for use.
        Always use the @{"AddICRVector" LINK "gg:doc/NDK/Guide/Include/inline/cia.h/File" 22}() function to obtain ownership
        of the CIA hardware registers your code will use.

        Note that there are two (2) interval timers per CIA.  If
        your application needs one of the interval timers, you
        can try to obtain any one of the four (4) until @{"AddICRVector" LINK "gg:doc/NDK/Guide/Include/inline/cia.h/File" 22}()
        succeeds.  If all four interval timers are in-use, your
        application should exit cleanly.

        If you just want ownership of a CIA hardware timer, or register,
        but do not want interrupts generated, use the @{"AddICRVector" LINK "gg:doc/NDK/Guide/Include/inline/cia.h/File" 22}()
        function to obtain ownership, and use the @{"AbleICR()" LINK "AbleICR"} function
        to turn off (or on) interrupts as needed.

        Note that CIA-B generates level 6 interrupts (which can degrade
        system performance by blocking lower priority interrupts).  As
        usual, interrupt handling code should be optimized for speed.

        Always call @{"RemICRVector()" LINK "RemICRVector"} when your code exits to release
        ownership of any CIA hardware obtained with @{"AddICRVector" LINK "gg:doc/NDK/Guide/Include/inline/cia.h/File" 22}().@{b}

   SEE ALSO@{ub}
        @{"cia.resource/RemICRVector()" LINK "RemICRVector"}, @{"cia.resource/AbleICR()" LINK "AbleICR"}

@ENDNODE
@NODE "RemICRVector" "cia.resource/RemICRVector()"
@{b}

   NAME@{ub}
        @{"RemICRVector" LINK "gg:doc/NDK/Guide/Include/inline/cia.h/File" 25} -- Detach an interrupt handler from a CIA bit.@{b}

   SYNOPSIS@{ub}
        @{"RemICRVector" LINK "gg:doc/NDK/Guide/Include/inline/cia.h/File" 25}( Resource, iCRBit, interrupt )
                      A6        D0      A1

        void @{"RemICRVector" LINK "gg:doc/NDK/Guide/Include/inline/cia.h/File" 25}( @{"struct Library" LINK "gg:doc/NDK/Guide/Include/exec/libraries.h/File" 34} *, @{"WORD" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 54}, @{"struct Interrupt" LINK "gg:doc/NDK/Guide/Include/exec/interrupts.h/File" 22} *);@{b}

   FUNCTION@{ub}
        Disconnect interrupt processing code for a particular
        interrupt bit of the CIA ICR.

        This function will also disable the CIA interrupt for the
        given ICR bit.@{b}

   INPUTS@{ub}
        iCRBit          Bit number to set (0..4).
        interrupt       Pointer to interrupt structure.@{b}

   RESULT@{ub}@{b}

   NOTE@{ub}
        The CIA resources are special in that there is more than one
        of them in the system. Because of this, the C language stubs
        in @{"amiga.lib" LINK "gg:doc/NDK/Guide/amiga_lib/MAIN"} for the CIA resources require an extra parameter
        to specify which CIA resource to use. The synopsis for the
        @{"amiga.lib" LINK "gg:doc/NDK/Guide/amiga_lib/MAIN"} stubs is as follows:

        @{"RemICRVector" LINK "gg:doc/NDK/Guide/Include/inline/cia.h/File" 25}( Resource, iCRBit, interrupt )
                      A6        D0      A1

        void @{"RemICRVector" LINK "gg:doc/NDK/Guide/Include/inline/cia.h/File" 25}( @{"struct Library" LINK "gg:doc/NDK/Guide/Include/exec/libraries.h/File" 34} *, @{"WORD" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 54}, @{"struct Interrupt" LINK "gg:doc/NDK/Guide/Include/exec/interrupts.h/File" 22} *);@{b}

   SEE ALSO@{ub}
        @{"cia.resource/AddICRVector()" LINK "AddICRVector"}

@ENDNODE
@NODE "SetICR" "cia.resource/SetICR()"
@{b}

   NAME@{ub}
        @{"SetICR" LINK "gg:doc/NDK/Guide/Include/inline/cia.h/File" 31} -- Cause, clear, and sample ICR interrupts.@{b}

   SYNOPSIS@{ub}
        oldMask = @{"SetICR" LINK "gg:doc/NDK/Guide/Include/inline/cia.h/File" 31}( Resource, mask )
        D0                A6        D0

        @{"WORD" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 54} @{"SetICR" LINK "gg:doc/NDK/Guide/Include/inline/cia.h/File" 31}( @{"struct Library" LINK "gg:doc/NDK/Guide/Include/exec/libraries.h/File" 34} *, @{"WORD" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 54} );@{b}

   FUNCTION@{ub}
        This function provides a means of reseting, causing, and
        sampling 8520 CIA interrupt control registers.@{b}

   INPUTS@{ub}
        mask            A bit mask indicating which interrupts to be
                            effected. If bit 7 is clear the mask
                            indicates interrupts to be reset.  If bit
                            7 is set, the mask indicates interrupts to
                            be caused. Bit positions are identical to
                            those in 8520 ICR.@{b}

   RESULTS@{ub}
        oldMask         The previous interrupt register status before
                            making the requested changes.  To sample
                            current status without making changes,
                            call the function with a null parameter.@{b}

   EXAMPLES@{ub}
        Get the interrupt mask:
            mask = @{"SetICR" LINK "gg:doc/NDK/Guide/Include/inline/cia.h/File" 31}(0)
        Clear serial port interrupt:
            @{"SetICR" LINK "gg:doc/NDK/Guide/Include/inline/cia.h/File" 31}(0x08)@{b}

   NOTE@{ub}
        The CIA resources are special in that there is more than one
        of them in the system. Because of this, the C language stubs
        in @{"amiga.lib" LINK "gg:doc/NDK/Guide/amiga_lib/MAIN"} for the CIA resources require an extra parameter
        to specify which CIA resource to use. The synopsis for the
        @{"amiga.lib" LINK "gg:doc/NDK/Guide/amiga_lib/MAIN"} stubs is as follows:

        oldMask = @{"SetICR" LINK "gg:doc/NDK/Guide/Include/inline/cia.h/File" 31}( Resource, mask )
        D0                A6        D0

        @{"WORD" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 54} @{"SetICR" LINK "gg:doc/NDK/Guide/Include/inline/cia.h/File" 31}( @{"struct Library" LINK "gg:doc/NDK/Guide/Include/exec/libraries.h/File" 34} *, @{"WORD" LINK "gg:doc/NDK/Guide/Include/exec/types.h/File" 54} );

        ***WARNING***

        Never read the contents of the CIA interrupt control registers
        directly.  Reading the contents of one of the CIA interrupt
        control registers clears the register.  This can result in
        interrupts being missed by critical operating system code, and
        other applications.@{b}

   EXCEPTIONS@{ub}
        Setting an interrupt bit for an enabled interrupt will cause
        an immediate interrupt.@{b}

   SEE ALSO@{ub}
        @{"cia.resource/AbleICR()" LINK "AbleICR"}

@ENDNODE
