<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title> TemplateZThread::ThreadLocal class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.15 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>ThreadLocal  Class Template Reference</h1><code>#include &lt;ThreadLocal.h&gt;</code>
<p>
<p>Inheritance diagram for ThreadLocal:
<p><center><img src="classZThread_1_1ThreadLocal.png" usemap="#ThreadLocal_map" border="0"></center>
<map name="ThreadLocal_map">
<area href="classZThread_1_1AbstractThreadLocal.html" alt="AbstractThreadLocal" shape="rect" coords="0,56,142,80">
<area href="classZThread_1_1NonCopyable.html" alt="NonCopyable" shape="rect" coords="0,0,142,24">
<area href="classZThread_1_1InheritableThreadLocal.html" alt="InheritableThreadLocal" shape="rect" coords="0,168,142,192">
</map>
<a href="classZThread_1_1ThreadLocal-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Public Methods</h2></td></tr>
<tr><td nowrap align=right valign=top><a name="a0" doxytag="ZThread::ThreadLocal::~ThreadLocal"></a>
virtual&nbsp;</td><td valign=bottom><a class="el" href="classZThread_1_1ThreadLocal.html#a0">~ThreadLocal</a> ()  throw ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Destroy this <a class="el" href="classZThread_1_1ThreadLocal.html">ThreadLocal</a>.</em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>T&nbsp;</td><td valign=bottom><a class="el" href="classZThread_1_1ThreadLocal.html#a1">get</a> () const  throw ()</td></tr>
<tr><td nowrap align=right valign=top>T&nbsp;</td><td valign=bottom><a class="el" href="classZThread_1_1ThreadLocal.html#a2">set</a> (T val) const  throw ()</td></tr>
<tr><td colspan=2><br><h2>Protected Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>virtual void *&nbsp;</td><td valign=bottom><a class="el" href="classZThread_1_1ThreadLocal.html#b0">initialValue</a> () const  throw ()</td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<h3>template&lt;class T&gt;<br>
 class ZThread::ThreadLocal&lt; T &gt;</h3>

<dl compact><dt><b>
Author: </b><dd>
Eric Crahen &lt;<a href="mailto:crahen@cse.buffalo.edu">crahen@cse.buffalo.edu</a>&gt; </dl><dl compact><dt><b>
Date: </b><dd>
&lt;2002-05-30T17:50:36-0400&gt; </dl><dl compact><dt><b>
Version: </b><dd>
2.2.0</dl>Provides a method to access the local storage of each thread. No matter what thread access this object, it will always store values unique to each thread. This is done using the local storage allocated by the OS for each thread. It doesn't require any locking and is very fast
<p>
The first time a <a class="el" href="classZThread_1_1ThreadLocal.html">ThreadLocal</a> veriable is accessed by a thread the <a class="el" href="classZThread_1_1ThreadLocal.html#b0">initialValue</a>() method will be invoked. This allows subclasses to perfrom any special  actions they might need to when a new thread uses one of these variables.
<p>
The <a class="el" href="classZThread_1_1AbstractThreadLocal.html#a5">destroyValue</a>() method is invoked when a thread that has  used a <a class="el" href="classZThread_1_1ThreadLocal.html">ThreadLocal</a> is about to exit.
<p>
The recommended usage of this object would be something like in the example shown below
<p>
<div class="fragment"><pre> <font class="keyword">class </font>MyClass {
 <font class="keyword">protected</font>:

 <font class="keyword">static</font> ThreadLocal&lt;int&gt; _threadKey;

 <font class="keyword">public</font>:
 
 <font class="keywordtype">int</font> getValue()<font class="keyword"> const </font>{
   <font class="keywordflow">return</font> _threadKey.get();
 }
 
 <font class="keywordtype">int</font> setValue(<font class="keywordtype">int</font> n)<font class="keyword"> const </font>{
   <font class="keywordflow">return</font> _threadKey.set(n);
 }

 };
</pre></div>
<p>
The <a class="el" href="classZThread_1_1ThreadLocal.html">ThreadLocal</a> object itself acts as the key, instead of some arbitrary integer that needed to be defined by the programmer before. This is a much more elegant solution.
<p>
<dl compact><dt><b>
See also: </b><dd>
<a class="el" href="classZThread_1_1AbstractThreadLocal.html">AbstractThreadLocal</a> </dl>
<p>
<hr><h2>Member Function Documentation</h2>
<a name="a1" doxytag="ZThread::ThreadLocal::get"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> T get </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap> const  throw ()<code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the value associated with the current thread and this object via fetch(). If no association exists, then <a class="el" href="classZThread_1_1ThreadLocal.html#b0">initialValue</a>() is invoked.
<p>
<dl compact><dt><b>
Returns: </b><dd>
T associated value</dl><dl compact><dt><b>
Exceptions: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em><a class="el" href="classZThread_1_1Synchronization__Exception.html">Synchronization_Exception</a></em>&nbsp;</td><td>
 - thrown if there is an error allocating native thread local storage </td></tr>
</table>
</dl>
<p>
Reimplemented from <a class="el" href="classZThread_1_1AbstractThreadLocal.html#b0">AbstractThreadLocal</a>.    </td>
  </tr>
</table>
<a name="b0" doxytag="ZThread::ThreadLocal::initialValue"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> virtual void* initialValue </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap> const  throw ()<code> [inline, protected, virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Invoked by the framework the first time a <a class="el" href="classZThread_1_1ThreadLocal.html#a1">get</a>() or <a class="el" href="classZThread_1_1ThreadLocal.html#a2">set</a>() is invoked on a  <a class="el" href="classZThread_1_1ThreadLocal.html">ThreadLocal</a> variable from a particular thread.
<p>
<dl compact><dt><b>
Returns: </b><dd>
void* - value that will be set for the executing thread </dl>
<p>
Implements <a class="el" href="classZThread_1_1AbstractThreadLocal.html#a2">AbstractThreadLocal</a>.    </td>
  </tr>
</table>
<a name="a2" doxytag="ZThread::ThreadLocal::set"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> T set </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">T&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>val</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap> const  throw ()<code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set the value associated with the current thread and this object. This value  can only be retrieved from the current thread.<dl compact><dt><b>
Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>T</em>&nbsp;</td><td>
new associated value </td></tr>
</table>
</dl><dl compact><dt><b>
Returns: </b><dd>
T old associated value, if no association exists, then <a class="el" href="classZThread_1_1ThreadLocal.html#b0">initialValue</a>()  is invoked.</dl><dl compact><dt><b>
Exceptions: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em><a class="el" href="classZThread_1_1Synchronization__Exception.html">Synchronization_Exception</a></em>&nbsp;</td><td>
 - thrown if there is an error allocating native thread local storage </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li>ThreadLocal.h</ul>
<hr><address align="right"><small>Generated on Mon Jun 10 22:44:46 2002 for ZThread by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.15 </small></address>
</body>
</html>
