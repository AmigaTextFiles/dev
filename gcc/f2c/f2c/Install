;$VER:

;(W) by Gianluca Molinari

(set #language (getenv "Language"))

(complete 0)

;=============================================================================
; English strings

(set #msg-wrong-installer-version "\nSorry, but for use this wizard you need Installer V43 or higher.\n")

(set #readmetext "README")

(set #msg-introduction 
	"\nInstallation script for the AmigaOS4 version of f2c"
)

(set #msg-select-docdir "\nSelect the directory where to install f2c documentation.\nIf the selected directory doesn't exist a new one will be created.\n")

(set #msg-select-lib "\nSelect the libf2c library to install\n(see Help for more information)\n")

(set #msg-select-lib-help "The static library libf2c.a, needed to link the translated C code\ngenerated by f2c, is avalaible for both clib2 and newlib C runtime\nlibraries.There aren't differences between the two libraries,\nso install the version that you prefer or both\n")

(set #msg-exit "f2c is now installed.")
(set #msg-exit-0
	(cat "\nClib2 version of " #msg-exit)
)
(set #msg-exit-1
	(cat "\nNewlib version of the " #msg-exit)
)
(set #msg-exit-2 "\nBoth clib2 and newlib versions of f2c are now installed.")

;=============================================================================

(if (< @installer-version 43)
(abort #msg-wrong-installer-version)
)

(welcome
  #msg-introduction
)

(run "SYS:Utilities/Multiview README.amigaos")

(set #lib-version
  (askchoice
	(prompt #msg-select-lib)
	(help #msg-select-lib-help)
	(choices "clib2" "newlib" "both")
	(default 0)
  )
)

(set #doc-directory
	(askdir
		(prompt #msg-select-docdir)
		(help #msg-select-docdir)
		(default "SDK:Documentation/f2c")
		(newpath)
	)
)

(copyfiles 
	(source "f2c")
	(dest	"SDK:Local/C/")
)

(copyfiles
	(source "doc/")
	(dest #doc-directory)
	(all)
)

(if (= #lib-version 0)
	(
		(copyfiles
			(source "clib2/include/")
			(dest "SDK:Local/clib2/include/")
			(all)
		)

		(copyfiles
			(source "clib2/lib/")
			(dest "SDK:Local/clib2/lib/")
			(all)
		)
		
		(complete 100)

		(exit #msg-exit-0 (quiet))
	)
)

(if (= #lib-version 1)
	(
		(copyfiles
			(source "newlib/include/")
			(dest "SDK:Local/newlib/include/")
			(all)
		)

		(copyfiles
			(source "newlib/lib/")
			(dest "SDK:Local/newlib/lib/")
			(all)
		)

		(complete 100)

		(exit #msg-exit-1 (quiet))
	)
)

(if (= #lib-version 2)
	(
		(copyfiles
			(source "clib2/include/")
			(dest "SDK:Local/clib2/include/")
			(all)
		)
		(copyfiles
			(source "newlib/include/")
			(dest "SDK:Local/newlib/include/")
			(all)
		)
		(copyfiles
			(source "clib2/lib/")
			(dest "SDK:Local/clib2/lib/")
			(all)
		)
		(copyfiles
			(source "newlib/lib/")
			(dest "SDK:Local/newlib/lib/")
			(all)
		)

		(complete 100)

		(exit #msg-exit-2 (quiet))
	)
)
