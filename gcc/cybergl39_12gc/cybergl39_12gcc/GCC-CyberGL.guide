@DATABASE "GCC-CyberGL.guide"
@$VER: GCC-CyberGL.guide V0.4 13-Apr-1998
@AUTHOR "Sebastian Huebner <cyco@gmx.de>"
@WIDTH 80
@INDEX "Index"

@REMARK ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

@NODE "Main" "cybergl39_12gcc - GCC-CyberGL.guide"

                         @{B}cybergl39_12gcc@{UB}

                GCC-CyberGL.guide  V0.4  13-Apr-1998

    This package is based on @{B}@{I}cybergl39_12dev.lha@{UI}@{UB}, freely available
     at http://www.vgr.com/cybergl/. It is slightly modified, bugfixed and
  extended to let you develop programs with @{B}GCC@{UB}, the GNU C compiler,
              that is a part of the @{I}Geek Gadgets@{UI} project.


                      @{" Idea & Copyright       " LINK "Copyright"}
                      @{" Installation           " LINK "Installation"}
                      @{" How to use             " LINK "How_to_use"}
                      @{" Troubleshooting        " LINK "Troubleshooting"}
                      @{" Changes & Bugfixes     " LINK "Bugfixes"}
                      @{" Sources of Information " LINK "Sources"}
                      @{" Greetinx & Contact     " LINK "Contact"}

                      @{" INDEX                  " LINK "Index"}

@ENDNODE

@REMARK ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

@NODE "Copyright" "Idea & Copyright"

@{B}IDEA:@{UB}

 Phase 5 Digital Products haved developed an implementation of OpenGL for
 the AMIGA, that is called @{B}CyberGL@{UB}. To write your own programs you
 can get the package cybergl39_12dev.lha from http://www.vgr.com/cybergl/.
 Unfortunately this package only supports the SAS C compiler and it is not
 possible to use the freely available GCC compiler, for example included
 in the @{I}Geek Gadgets@{UI} environment.

 @{B}cybergl_lib.fd@{UB} says:
   @{I}"We provide a pragma file for SAS/C since SAS/C supports fpu registers
    in pragma files. GNU C or other compilers probably need special stub
    libraries, we can't provide yet."@{UI}

 But with the help of this SAS pragma file and the brilliant FD2Pragma by Dirk
 Stroeker @{I}(Hi!)@{UI} - after a few bugfixes - I was able to create the needed inlines
 for gcc. Additionally a stub library is included @{I}(libCyberGL.a)@{UI}, which gives
 you the possibility to use CyberGL in an GL_APICOMPATIBLE way.


@{B}COPYRIGHT:@{UB}

 The only included (and modified) file from the original package is
 @{B}cybergl_protos.h@{UB}. It says:

  @{I}/*
  **	$VER: cybergl_protos.h 39.12 (12.03.1998)
  **
  **	C prototypes. For use with 32 bit integers only.
  **
  **	Copyright © 1996-1998 by phase5 digital products
  **	All Rights reserved.
  **
  */@{UI}

 You can find it in cybergl39_12gcc/orig/. Just do a "diff" to see, which lines
 differ from the original file, or see @{"changes & bugfixes" LINK "Bugfixes"}.

 So my files are definetly @{I}Freeware@{UI} (feel free to email @{"me" LINK "Contact"}), cybergl_protos.h
 is © Phase 5 Digital Products.

@ENDNODE

@REMARK ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

@NODE "Installation" "Installation"

@{B}ATTENTION:@{UB}

           YOU NEED A 68040 OR 68060 CPU TO USE CYBERGL WITH GCC !! 


@{B}INSTALLATION:@{UB}

 First, you need cybergl39_12@{B}usr@{UB}.lha, that contains the standard shared library.
 You can get it from Aminet (/biz/p5/cybergl39_12usr.lha) or from ftp.phase5.de
 (/pub/phase5/cgx3/cybergl39_12usr.lha). It contains 3 versions of
 cybergl.library (030/040/060). Copy the right one to LIBS:cybergl.library.

 You should get cybergl39_12@{B}dev@{UB}.lha from http://www.vgr.com/cybergl/, too, because
 it includes some useful examples to start with cybergl and we need the two files
 C/Include/cybergl/{cybergl.h|display.h}.

 Now unarchive cybergl39_12@{B}gcc@{UB}.lha (Aminet: /dev/gcc/cybergl39_12gcc.lha)
 to e.g. RAM:.

 Normally, gcc searches for the system include files in GG:os-include. If it isn't
 there, you should create it. All other amiga system files should live here, too.
 Or you use an independent directory, then copy the cybergl includes there. I will
 suppose here that you are using GG:os-include.

 If you are using an old version of cybergl-dev (last was 39.8), delete
 GG:os-include/libraries/cybergl.h and GG:os-include/libraries/cybergl_display.h.
 Since 39.12, they live in an own directory "cybergl" and are called cybergl.h
 and display.h! The SAS/C pragma file in pragmas/cybergl_pragmas.h is useless
 for us, but it will be replaced soon.

 @{B}Install the includes:@{UB}

   Just copy all files in cybergl39_12gcc/include to GG:os-include, or to
   a place you would like them to live.

     Copy RAM:cybergl39_12gcc/include/ GG:os-include/ ALL

   Copy the two files from cybergl39_12dev/C/Include/cybergl to the same
   directory.

     MakeDir GG:os-include/cybergl
     Copy RAM:cybergl39_12dev/C/Include/cybergl/ GG:os-include/ ALL

 @{B}Install the link library:@{UB}

   Normally gcc searches for link libraries in GG:lib, so you should copy
   libCyberGL.a there.

     Copy RAM:cybergl39_12gcc/lib/libCyberGL.a GG:lib/

 Done!

@ENDNODE

@REMARK ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

@NODE "How_to_use" "How to use"

@{B}HOW TO USE:@{UB}

 After @{"installing" LINK "Installation"} the includes and the link library, we're ready to go. There
 are only a few point to think of, when porting the SAS/C examples to gcc.

 - Since gcc has no library-auto-open feature you always have to open and check
   for cybergl.library yourself. You need a global variable to store the pointer
   to the library base that @{B}IS NOT EXTERN@{UB}! SAS/C uses an extern base
   pointer for its l-a-o feature.

         /* global */
         struct Library *CyberGLBase;

         /* in main() */
         if(CyberGLBase=OpenLibrary("cybergl.library",0))
         {
            ... /* your program */

            CloseLibrary(CyberGLBase);
         }
         else
           puts("Unable to open cybergl.library!");

 - You always have to define SHARED, because the supplied link library only
   includes stubs for some special functions.

         #define SHARED

 - You alwas have to include inline/cybergl.h, because the supplied... (see
   above ;-). This include file and the whole cybergl.library use fpu registers
   to specify parameters, so you have to compile with the -m68040 flag (see
   @{"troubleshooting" LINK "Troubleshooting"}). Yes, this implies that your program is only usable
   with a 68040 or 68060 cpu, but - cybergl needs speed, so it is unusable
   on anything below 040, anyhow.

         #include <inline/cybergl>

         gcc -m68040 example.c -o example

 - If you would like to use the GL_APICOMPATIBLE way of calling glLookAt(),
   glOrtho(), etc. you need to link with the supplied link libray libCyberGL.a.
   @{B}Attention@{UB}: you need to specify the link library @{U}behind@{UU} the source/object
   files that use the stub functions (see @{"troubleshooting" LINK "Troubleshooting"})!

         #define GL_APICOMPATIBLE

         gcc -m68040 example.c -lCyberGL -o example

@ENDNODE

@REMARK ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

@NODE "Troubleshooting" "Troubleshooting"

@{B}TROUBLESHOOTING:@{UB}


 - @{B}"XXX.o(.text+0xYYYY): undefined reference to `CyberGLBase'"@{UB}

   ==> You must not define CyberGLBase as @{I}extern@{UI}.

   ==> You have to open cybergl.library with OpenLibrary().



 - @{B}"XXX.o(.text+0xYYYY): undefined reference to `glZZZ_stub'"@{UB}

   ==> When using CyberGL GL_APICOMPATIBLE, you have to link with "-lCyberGL".

   ==> "-lCyberGL" has to be specified behind the object that uses functions
       in libCyberGL.a.



 - @{B}"XXX.c:YY: register number for `_ZZ' isn't suitable for the data type"@{UB}

   ==> Compile with "-m68040" (FPU!) @{B}Note:@{UB} Yes, you need a 040!



 - @{B}"XXX.c:YY: warning: initialization makes integer from pointer without a cast"@{UB}

   ==> You used a "Tags"-function with a string: Use @{I}(ULONG)"String"@{UI},
       because all tags are mapped to ULONGS internally by inline/cybergl.h.



 - @{B}"XXX.c:YY: libraries/cybergl.h: No such file or directory"@{UB}
   @{B}"XXX.c:YY: libraries/cybergl_display.h: No such file or directory"@{UB}

   ==> cybergl.h & display.h now live in INCLUDE:cybergl/ .




 See @{"How to use" LINK "How_to_use"} for details!
@ENDNODE

@REMARK ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

@NODE "Bugfixes" "Changes & Bugfixes"

@{B}BUGFIXES:@{UB}

 @{U}pragmas/cybergl_pragmas.h@{UU}

 (1) glPixelTransferf is #pragma flibcall (not #pragma libcall)

 (2) glProject and glUnProject aren't GL_APICOMPATIBLE (says cyberg_protos.h),
     so they have only one parameter in a0

 (3) glTexImage1D has only 8 parameters (not 9)


 @{U}clib/cybergl_protos.h@{UU}

 (4) There's no type "struct TagList *", it is called "struct TagItem *"

 (5) glFrustum, glProject and glUnProject aren't GL_APICOMPATIBLE, so they
     need glFrustum_stub, glProject_stub and glUnProject_stub


@{B}CHANGES:@{UB}

 @{U}pragmas/cybergl_pragmas.h@{UU}

 - glPixelTransferf is flibcall (1)
 - glProject/glUnProject only 1 parameter (a0); check for GL_APICOMPATIBLE (2)
 - glTexImage1D has 8 parameter (3)

 @{U}clib/cybergl_protos.h@{UU}

 - openGLWindowTagList, attachGLWindowTagList, attachGLWndToRPTagList:
   "struct TagList *" replaced by "struct TagItem *" (4)
 - #define glProject glProject_stub
   #define glUnProject glUnProject_stub
   #define glFrustum glFrustum_stub (5)

@ENDNODE

@REMARK ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

@NODE "Sources" "Sources of Information"

@{B}SOURCES OF INFOMATION:@{UB}

  @{U}CyberGL by Phase 5@{UU}
  http://www.vgr.com/cybergl/
  http://www.vgr.com/cybergl/cybergl39_12dev.lha                (examples)

  @{U}Architectural Review Board (ARB): OpenGL@{UU}
  http://www.opengl.org/
  http://www.opengl.org/Info/Info.html                          (FAQs,...)
  http://www.opengl.org/Developers/developers.html              (specs,...)

  @{U}OpenGL Specification  V1.2  Mar-1998@{UU}
  ftp://sgigate.sgi.com/pub/opengl/doc/opengl1.2/opengl1.2.ps   (PostScript)



  @{U}CyberGL Workshop by German "AMIGA Magazin"@{UU} (language: german)
  http://www.magnamedia.de/amiga/magazin/a04-97/cyber.html
  http://www.magnamedia.de/amiga/magazin/a05-97/cyber.html
  http://www.magnamedia.de/amiga/magazin/a06-97/cyber.html

@ENDNODE

@REMARK ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

@NODE "Contact" "Greetinx & Contact"

@{U}Greetinx to:@{UU}  Dirk Stoecker (author of FD2Pragma)

              Kamil Iskra   (author of FD2Inline)


              Andreas "Aenda makes the difference" Retzlaff

              Alexander "ALeX" Kazik

              Andreas "Andreas" Mayer-Guerr


@{U}Contact me:@{UU}   Sebastian Huebner <cyco@gmx.de>

@ENDNODE

@REMARK ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

@NODE "Index" "Index"
No Index yet. Sorry.
@ENDNODE
