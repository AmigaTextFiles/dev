@database "ixprefs"

Ixprefs v.1.2--ixemul.library configuration program
Copyright © 1995 Kriton Kyrimis

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or
(at your option) any later version.

GUI designed using GadToolsBox 2.0c by Jan van den Baard

@master "ixprefs.guide"

@Node Main "ixprefs user's guide"
                               IXPREFS
          A configuration program for ixemul.library v.41.0-41.1
                             Version 1.2

 @{"Introduction" link introduction}
 @{"Distribution" link distribution}
 @{"Requirements" link requirements}
 @{"Installation" link installation}
 @{"Recompiling" link recompiling}

 @{"The ixprefs window" link window}
 @{"The ixprefs menu" link menu}
 @{"CLI usage" link CLI}
 @{"Useful option combinations" link combinations}

 @{"Configuration file format" link format}

 @{"Program history" link history}

 @{"Author" link author}
 @{"Acknowledgments" link acknowledgments}
@endnode

@node introduction "Introduction"
Ixemul.library version 41.0 came with numerous new configuration options, one
of which I wanted to use.  By playing with ixconfig, the configuration program
that comes with ixemul.library, I saw that this program had two deficiencies:

  a. It has almost as many command line options as UNIX ls, which are hard to
     remember.
  b. Making the new configuration persistent is done using a horrible kludge,
     namely the -s option, which makes ixemul.library unflushable.  Even if
     you have memory to burn, permanently allocating 120+ Kbytes, just to
     remember the handful of bits that define the configuration of
     ixemul.library, is a terrible waste.

Having a bit of spare time, I decided to try addressing these two points:
By writing a graphical configuration program, I believe I have addressed the
first, and by not supporting the equivalent of the -s option, I hope that I
can give the maintainers of ixemul.library the incentive to read, at library
startup, the configuration from a file similar to the one that ixprefs
maintains, so that ixemul.library will not have to stay permanently in memory
if it is to remember its configuration.
@endnode
@node installation "Installation"
Simply copy ixprefs (and, optionally, ixprefs.info) somewhere on your disk.
@endnode
@node recompiling "Recompiling"
To recompile, edit the Makefile, adjust the CPU, CFLAGS and LDFLAGS
assignments, and type "make".

If you use GadToolsBox to modify the GUI, make sure that you first generate
ixprefs.c and then save the project.  The makefile patches the generated C
code using diff, and to do this correctly, it assumes that ixprefs.c depends
on ixprefs.c.gui.

When creating C source code, you will create files ixprefs.c and
ixprefs_temp.c.  The latter contains templates for all functions called to
handle gadgets and menus.  If you have not added any new gadgets or menus,
you can discard this file, otherwise cut the templates for the new functions
and add them to functions.c.
@endnode
@node window "The ixprefs window"
 @{"  " link translatedot} translate . and ..  @{"  " link slash} translate /  @{"  " link symlinks} translate symlinks
 @{"  " link amigados} allow AmigaDOS notation                membuf size @{"      " link membuf}
 @{"  " link watcher} enable stack watcher                 red zone size @{"      " link redzone}
 @{"      " link blocks} physical blocks build one logical block (for stdio)
 @{"  " link ignoreenv} ignore global environment (ENV:)
 @{"  " link pattern} use UNIX-style pattern-matching (@{"  " link case} case sensitive)
 @{"  " link suppress} suppress the "Insert volume in drive" requester
 @{"  " link console} open console if no errorstream was provided
 @{"  " link fibcache} disable fibcache

 @{"Save " link save}                      @{" Use " link use}                      @{"Cancel" link cancel}
@endnode
@node translatedot "translate . and .."
If this option is set, ixemul.library interprets "." as the current
directory and ".." as the parent directory.
@endnode
@node slash "translate /"
If this option is set, ixemul.library interprets "/foo" as "foo:".
@endnode
@node symlinks "translate symlinks"
If this option is set, then symbolic links created to files containing "." and
".." are made to the equivalent AmigaDOS name, so that programs that are not
clients of ixemul.library can access these links.  If this option is not set,
no such name translation is made, and only clients of ixemul.library can
access these links.

Note that ixconfig reports the opposite setting of this option.
@endnode
@node amigados "allow AmigaDOS notation"
If this option is set, ixemul.library interprets "foo:bar" as file "bar"
on device "foo".  If this option is not set, then this file must be accessed
as "/foo/dev" (the @{"translate /" link slash} option must be set for this to work).
@endnode
@node membuf "membuf size"
Files up to this size in bytes are cached in memory.
@endnode
@node watcher "enable stack watcher"
@endnode
@node redzone "red zone size"
@endnode
@node blocks "physical blocks to build one logical block (for stdio)"
This number denotes the number of physical (usually 512-byte) blocks that
ixemul treats as one block during I/O, for efficiency.
@endnode
@node ignoreenv "ignore global environment"
If this option is set, the getenv() function returns local environment
variables, i.e., those created by the AmigaDOS "set" command".  If this
option is not set, the getenv() function returns global environment variables,
i.e., those created by the AmigaDOS "setenv" command".
@endnode
@node pattern "use UNIX-style pattern-matching"
The ixemul.library startup code expands wildcards in the command line.  If
this option is set, wildcards are expanded in the UNIX way (e.g., use "*.c"
to specify all C source files).  If this option is not set, wildcards are
expanded in the Amiga way (e.g., use "#?.c" to specify all C source files).
@endnode
@node case "case sensitive"
If this option is set, pattern matching in wildcard expansion is case
sensitive, i.e., *.c expands to all files ending in .c (lower case), while
*.C expands to all files ending in .C (upper case).  If this option is not
set, wildcard expansion is case insensitive (e.g., *.c expands to files ending
in both .c and .C).  This option only has meaning if the
@{"use UNIX-style pattern matching" link pattern} option is set.
@endnode
@node suppress "suppress the `Insert volume in drive' requester"
If this option is not set, whenever ixemul.library tries to access a
non-existent volume, it will pop up a requester asking for the volume to be
inserted.  If this option is set, ixemul.library will not pop up this
requester.
@endnode
@node console "open console if no errorstream was provided"
AmigaDOS 2.0 introduced an error stream for AmigaDOS processes, and
ixemul.library connects sterr to this stream.  Unfortunately, most shells,
including the Commodore one, ignore this field and do not provide an error
stream for the processes they create.  For such processes, ixemul.library
provides two alternatives: if this option is set, it will open "*", i.e., the
current console window, and connect stderr to it.  If this option is not set,
it will connect stderr to stdout.  The only case where the latter alternative
should be required is when a process is run in the background, with stdin
and stdout redirected, and then the console window is closed.  If stderr
points to the console, then the window will not close until the program
terminates.
@endnode
@node fibcache "disable fibcache"
The original ixemul.library configuration program did not provide for setting
this option--use with extreme care!
@endnode
@node save "Save"
Applies the user-specified configuration to ixemul.library, saves it to
S:ixprefs, and exits.
@endnode
@node use "Use"
Applies the user-specified configuration to ixemul.library and exits.
@endnode
@node cancel "Cancel"
Exits the program without making any changes to the configuration.
@endnode
@node menu "The ixprefs menu"
 Project  Edit
 @{"Save " link save}    @{"Reset to defaults" link defaults}
 @{"Use  " link use}    @{"Last saved       " link last}
 @{"About" link about}    @{"Restore          " link restore}
 @{"Quit " link quit}
@endnode
@node CLI "CLI usage"
Type "ixprefs" without any arguments, to get the @{"ixprefs window" link window}.

Alternatively, you can control the program from the CLI.  You can use either
short options, e.g., "-m 1024", or long options, e.g. "--membuf-limit 1024".
If you use long options, you need only specify enough of the option name to
disambiguate it from other option names, e.g., "--mem 1024".

The following CLI options are available:

-. 1, --translate-dots
  @{"translate . and .." link translatedot}
-. 0, --no-translate-dots
  don't @{"translate . and .." link translatedot}
-/ 1, --translate-slash
  @{"translate /foo -> foo: and a//b -> a/b" link slash}
-/ 0, --no-translate-slash
  don't @{"translate /foo -> foo: and a//b -> a/b" link slash}
-l 1, --translate-symlinks
  @{"translate contents of symbolic links" link symlinks}
-l 0, --no-translate-symlinks
  don't @{"translate contents of symbolic links" link symlinks}
-a 0, --force-translation
  don't @{"allow AmigaDOS notation" link amigados}
-a 1, --no-force-translation
  @{"allow AmigaDOS notation" link amigados}
-m N, --membuf-limit N
  @{"files upto N bytes are cached in memory" link membuf}
-w 1, --watch-stack
  enable @{"stack watcher" link watcher}
-w 0, --no-watch-stack
  disable @{"stack watcher" link watcher}
-r N, --red-zone-size N
  set @{"red zone size" link redzone} to N bytes
-b N, --fs-buf-factor N
  @{"N physical blocks map into 1 logical (stdio) block" link blocks}
-i 1, --ignore-global-env
  @{"ignore global environment" link ignoreenv} (ENV:)
-i 0, --no-ignore-global-env
  don't @{"ignore global environment" link ignoreenv} (ENV:)
-p 1, --unix-pattern-matching
  @{"use UNIX-style filename pattern-matching" link pattern}
-p 0, --no-unix-pattern-matching
  don't @{"use UNIX-style filename pattern-matching" link pattern}
-s 1, --unix-pattern-matching-case-sensitive
  @{"use case sensitive UNIX pattern matching" link case}
-s 0, --no-unix-pattern-matching-case-sensitive
  don't @{"use case sensitive UNIX patter matching" link case}
-v 0, --insert-disk-requester
  @{"suppress the `Insert volume in drive' requester" link suppress}
-v 1, --noinsert-disk-requester
  @{"don't suppress the `Insert volume in drive' requester" link suppress}
-c 1, --no-ces-then-open-console
  @{"open console if no errorstream was provided" link console}
-c 0, --no-no-ces-then-open-console
  don't @{"open console if no errorstream was provided" link console}
  (Yes, there are two "no"s in this option!)
-x 1, --disable-fibcache
  @{"disable FileInfoBlock cache" link fibcache}
-x 0, --no-disable-fibcache
  don't @{"disable FileInfoBlock cache" link fibcache}
-d, --default
  reset settings to defaults (other options are ignored)
-L, --last-saved
  reset settings from S:ixprefs
  (other options, including --default, are ignored)
-S, --save
  save new configuration
-R, --report
  display new configuration
-V, --version
  displays information about the @{"program" link distribution} and its @{"author" link author}
  (other options, including --default and --last-saved are ignored)
-h, --help
  display the various ixprefs options
@endnode
@node about "About"
Displays information about the @{"program" link distribution} and its @{"author" link author}.
@endnode
@node quit "Quit"
Exits the program without making any changes to the configuration.
@endnode
@node defaults "Reset to defaults"
Resets the various options to their default values.
@endnode
@node last "Last saved"
Reads the configuration stored in S:ixprefs.
@endnode
@node restore "Restore"
Sets the various options to the values that are currently being used by
ixemul.library.
@endnode
@node combinations "Useful option combinations"
Here are some option combinations used by ixconfig, the original configuration
program for ixemul.library:

* Full AmigaDOS mode, no ./ translations:
  @{"translate . and .." link translatedot}      NO
  @{"translate /" link slash}             NO
  @{"allow AmigaDOS notation" link amigados} YES
  @{"translate symlinks" link symlinks}      NO

* use UNIX-style filename pattern-matching:
  @{"use UNIX-style pattern-matching" link pattern} YES
  @{"case sensitive" link case}                  NO
  
* use case-sensitive UNIX-style filename pattern-matching
  @{"use UNIX-style pattern-matching" link pattern} YES
  @{"case sensitive" link case}                  YES
@endnode
@node history "Program history"
Version 1.0	June 23, 1995
First public release.

Version 1.1	June 26, 1995
* Made the following enhancements, suggested by Kamil Iskra
  (kiskra@ernie.icslab.agh.edu.pl):
  + Ixprefs window is now font adaptive.
  + Ixprefs window is now activated when opened.
  + GZZ adjust flag in GadToolsBox turned off.
  + CheckBox gadgets are now scalable under AmigaDOS 3.x.
  + NewLook menus under AmigaDOS 3.x
  + Use OpenFont() rather than DiskFont() to access system font, as this font
    is always in memory.
  + Slightly rearranged window layout to avoid problems with sizable gadgets.
* Updated the documentation.

Version 1.2	July 3, 1995
* Added a UNIX-style CLI interface using getopt_long().
* Modified showrequester() to print messages on stderr if the ixprefs window
  is not open, so that no requesters pop up when the CLI interface is used.
* Updated ixemul.library version check, so that the program now runs under
  both version 41.0 and 41.1 without producing a warning.
* Fixed the dates in this section.  Not that anyone cares, but the previous
  versions of this program were written in June, not May!
* Updated the documentation.
@endnode
@node author "Author"
Kriton Kyrimis

UUCP:     pythia!theseas!kriton!kyrimis
INTERNET: kyrimis@theseas.ntua.gr
WWW:      http://www.hpcl.cti.gr/~kyrimis
-----
"Officially, I am here quite unofficially!"
-----
@endnode
@node distribution "Distribution"
Ixprefs v.1.2--ixemul.library configuration program
Copyright © 1995 @{"Kriton Kyrimis" link author}

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or
(at your option) any later version.

GUI designed using GadToolsBox 2.0c by Jan van den Baard
@endnode
@node requirements "Requirements"
Ixprefs requires version 41.0 or 41.1 of ixemul.library.  It will refuse to
run under previous versions, as they had fewer configuration options,
maintained in a different order in the ixemul library base.

Versions of ixemul.library later than 41.1 are also likely (but not certain!)
to be incompatible with this version of ixprefs, due to the clean-up that the
library is undergoing.  If you have such a later version, ixprefs will ask for
your confirmation before proceeding--use at your own risk!
@endnode
@node format "Configuration file format"
Ixprefs saves the ixemul.library configuration in S:ixprefs.  The file
contains lines of the form "option=value", where "option" is the name of a
field in the ixemul library base structure.  Options may appear in any order,
and the file can be edited by hand.  Comments may be added by preceding each
comment line with a #.  If any of the options ixprefs recognizes are missing,
the default value is used.

The following configuration file example shows all options recognized by
ixprefs, and describes the default configuration. (Note that
ix_translate_symlinks actually works in reverse: 0 means "enable translation"!)

ix_no_insert_disk_requester=0
ix_unix_pattern_matching_case_sensitive=0
ix_unix_pattern_matching=0
ix_no_ces_then_open_console=1
ix_ignore_global_env=0
ix_disable_fibcache=0
ix_translate_dots=1
ix_watch_stack=0
ix_force_translation=0
ix_translate_symlinks=0
ix_translate_slash=1
ix_membuf_limit=0
ix_red_zone_size=0
ix_fs_buf_factor=64
@endnode
@node acknowledgments "Acknowledgments"
Thanks to Kamil Iskra (kiskra@ernie.icslab.agh.edu.pl) for his enhancement
suggestions (see program @{"history" link history}).
@endnode
