#/***************************************************************************
#
# SimpleDebug - A debugging/tracing tool
# print tracing messages when needed
# Copyright (C) 2009- by Mikko Koivunalho
#
# This is a makefile for Amiga SAS/C compiler
#
# This software is free software; you can redistribute it and/or
# modify it under the terms of the GNU Lesser General Public
# License as published by the Free Software Foundation; either
# version 2.1 of the License, or (at your option) any later version.
#
# This library is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# Lesser General Public License for more details.
#
# $Id: SMakefile 41 2009-04-01 19:32:29Z svn.username $
#
#***************************************************************************/
#
##

DEBUG = DEBUG=SYMBOLFLUSH DEFINE=SIMPLE_DEBUG=1
DEBUGLIBRARIES = LIB:ddebug.lib
OPTIMIZE = Optimize OptimizerGlobal OptimizerPeephole OptimizerInline \
OptimizerTime OptimizerSchedule 

WARN = WARN=ALL
IGNORE = IGNORE=61,148,149
FLAGS = ANSI STRICT PARAMETERS=REGISTERS STRINGMERGE NOICONS \
COMMENTNEST NOERRORREXX $(WARN) $(IGNORE)


LINKLIBRARIES = LIB:sc.lib LIB:amiga.lib
STARTUPCODE = LIB:c.o

LINKFLAGS = ADDSYM SMALLCODE NOICONS NOALVS
TARGET = Amiga/bin/TestSimpleDebug

all: $(TARGET)

$(TARGET): TestSimpleDebug.o TestSimpleDebug_more.o
	slink FROM $(STARTUPCODE) TestSimpleDebug.o TestSimpleDebug_more.o LIB $(LINKLIBRARIES) $(DEBUGLIBRARIES) $(LINKFLAGS) TO $(TARGET)

TestSimpleDebug.o: TestSimpleDebug.c TestSimpleDebug_more.h
	sc $(FLAGS) $(DEBUG) TestSimpleDebug.c

TestSimpleDebug_more.o: TestSimpleDebug_more.c
	sc $(FLAGS) $(DEBUG) TestSimpleDebug_more.c

clean:
	Delete $(TARGET)
	Delete TestSimpleDebug.o
	Delete TestSimpleDebug_more.o

final:
	sc $(FLAGS) $(OPTIMIZE) TestSimpleDebug.c
	sc $(FLAGS) $(OPTIMIZE) TestSimpleDebug_more.c
	slink FROM $(STARTUPCODE) TestSimpleDebug.o TestSimpleDebug_more.o LIB $(LINKLIBRARIES) $(LINKFLAGS) STRIPDEBUG TO $(TARGET)

