/** 
 ** Crash
 ** A program that "safely" crashes by writing to address 0,
 ** that is guaranteed never written to.
 **
 **/

#define DEBUG_MODE 	 0
#define APP_VERSTAG	"\0$VER: Crash 1.1 (20.06.2021) This program \"safely\" crashes by writing to address 0 that is protected."			// Amiga version cookie
#define APP_EXTVER	"\0$EXTVER: Crash 1.01rc1 (20.06.2021) This program \"safely\" crashes by writing to address 0 that is protected."	// Non-Amiga version cookie
#define APP_NAME	"Crash"
#define APP_AUTHOR	"Marko K. Seppänen, Gothenburg (Sweden, EU)"

#include <stdio.h>
#include <dos/dos.h>

int main(int argc, char **argv){
	char* used_VERSTAG = (char*)APP_VERSTAG;	// so the Amiga-version-string isn't optimized away later
	char* used_EXTVER = (char*)APP_EXTVER;		// so the Extraversion-string isn't optimized away later

	/*
	   Makes a "safe" crash by writing to address 0. The address 0 is protected
	   and is guaranteed never written to.
	 */
	printf("Now crashing with purpose..!\n\n");
	#ifdef __AROS__
    int ret;
    __asm__ __volatile__ ("call *%0" : "=a" (ret) : "0" (0) : "ecx", "edx", "memory");
	#else
	int* zero = 0;
	*zero = 0;

	return RETURN_FAIL;
	#endif
}
