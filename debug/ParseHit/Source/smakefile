PROJECTNAME	= ParseHit
MODULES_O_PROTO = PH_main.o
MODULES_C_PROTO = PH_main.c
MODULES_O	= $(MODULES_O_PROTO)
MODULES_C	= $(MODULES_C_PROTO)
EXECUTE_STRING = 	AAAAAAA:$(PROJECTNAME)

all: prototypes.h $(PROJECTNAME)

$(PROJECTNAME): $(MODULES_O) smakefile SCOPTIONS
	sc LINK OBJ=$(MODULES_O) PNAME=$(PROJECTNAME)
	run Programmation:Utilitaire/Enforcer FILE "ram:EnforcerHit" SMALL
	$(EXECUTE_STRING)
	run >nil: <nil: Programmation:Utilitaire/Enforcer QUIT
	ParseHit "ram:EnforcerHit"
	delete ram:EnforcerHit

runprog:
	run Programmation:Utilitaire/Enforcer FILE "ram:EnforcerHit" SMALL 
	$(EXECUTE_STRING)
	run >nil: <nil: Programmation:Utilitaire/Enforcer QUIT

archive:
	lha -x -a -r -2 u BACKUP:BAK_$(PROJECTNAME) *.c *.h smakefile SCOPTIONS Start-Up Autre/*

profile:
	lprof $(EXECUTE_STRING)
	lstat >ram:SortieLstat -f $(PROJECTNAME)
	DHUtil:TraitementTexte/CygnusED/ED ram:SortieLstat

clean:
	delete $(MODULES_O) Prototypes.h

.c.o:
	sc >ram:erreur_$* $*.c

Prototypes.h: $(MODULES_C_PROTO)
	programmation:Utilitaire/mkproto -o ram:prototypes.h -p -n -s $(MODULES_C_PROTO)
	move ram:prototypes.h ""
