DEFINITION MODULE MuiL{"muimaster.library",5}; (* note that version 5 is very old - if you need newer functions
                                                  test this! 
                                               *)

(***************************************************************************
**
** $VER: MuiL.def 3.7 (29.1.97)
**
** The following updates have been done by
**
**   Olaf "Olf" Peters <olf@informatik.uni-bremen.de>
**
** $HISTORY:
**
**  29.1.97  3.7   : updated for MUI 3.7 release
**  13.8.96  3.6   : updated for MUI 3.6 release
**  21.2.96  3.3   : updated for MUI 3.3 release
** 18.11.95  3.1   : updated for MUI 3.1 release
**
***************************************************************************)

(*
** Modula-Interface for muimaster.library
**
** MUI (c) 1993-96 by Stefan Stuntz
**
** Modula-Interface done by Christian "Kochtopf" Scholz in 1993/94
**
** If you got problems please contact :
**
**  ruebe@pool.informatik.rwth-aachen.de
*)

FROM SYSTEM     IMPORT ADDRESS;
FROM MuiClasses IMPORT mCustomClassPtr, mRenderInfoPtr, ClassDispatcher, MADFlagSet;
FROM MuiD       IMPORT mPenSpecPtr, APTR, StrPtr ;

IMPORT
  ed : ExecD,
  gd : GraphicsD,
  id : IntuitionD,
  R  : Reg,
  ud : UtilityD ;

TYPE mImage     = ADDRESS;
TYPE mImageInfo = ADDRESS;

VAR  
     muiMasterVersion       : INTEGER;
     muiMasterBase          : ed.LibraryPtr;

CONST
     muiMasterMinVersion    = 4;
     muiMasterName          = "muimaster.library";

PROCEDURE mNewObject 
            (class{R.A0}    : StrPtr;
             taglist{R.A1}  : ud.TagItemPtr) : APTR ; CODE -30;

PROCEDURE mDisposeObject
            (obj{R.A0}      : APTR); CODE -36;
 
PROCEDURE mRequestA 
            (app{R.D0}      : APTR;
             win{R.D1}      : APTR;
             flags{R.D2}    : LONGINT;
             title{R.A0}    : StrPtr;
             gadgets{R.A1}  : StrPtr;
             format{R.A2}   : StrPtr;
             params{R.A3}   : ud.TagItemPtr): LONGINT; CODE -42;


PROCEDURE mAllocAslRequest
            (reqtype{R.D0}  : LONGINT;
             taglist{R.A0}  : ud.TagItemPtr) : APTR; CODE -48;

PROCEDURE mAslRequest 
            (requester{R.A0}: APTR;
             taglist{R.A1}  : ud.TagItemPtr) : BOOLEAN; CODE -54;

PROCEDURE mFreeAslRequest 
            (requester{R.A0}: APTR); CODE -60;

PROCEDURE mError() : LONGINT; CODE -66;

PROCEDURE MakeObject
            (objtype{R.D0}      : LONGINT;
             params{R.A0}       : ud.TagItemPtr) : id.ObjectPtr; CODE -120;

(******************************************)
(* functions to be used in custom classes *)
(******************************************)

PROCEDURE moSetError
            (num{R.D0}      : LONGINT) : LONGINT; CODE -72;

PROCEDURE moGetClass
            (classname{R.A0}: StrPtr) : id.IClassPtr; CODE -78;

PROCEDURE moFreeClass
            (classptr{R.A0} : id.IClassPtr); CODE -84;


PROCEDURE moRequestIDCMP
            (obj{R.A0}      : id.ObjectPtr;
             flags{R.D0}    : id.IDCMPFlagSet); CODE -90;

PROCEDURE moRejectIDCMP
            (obj{R.A0}      : id.ObjectPtr;
             flags{R.D0}    : id.IDCMPFlagSet); CODE -96;

PROCEDURE moRedraw
            (obj{R.A0}      : id.ObjectPtr;
             flags{R.D0}    : MADFlagSet); CODE -102;

PROCEDURE moAddClipping
            (mri{R.A0}  : mRenderInfoPtr;
             left{R.D0},
             top{R.D1},
             width{R.D2},
             height{R.D3} : INTEGER) : APTR; CODE -168;

PROCEDURE moRemoveClipping
            (mri{R.A0}    : mRenderInfoPtr;
             handle{R.A1} : APTR) ; CODE -174 ;

PROCEDURE moAddClipRegion
            (mri{R.A0} : mRenderInfoPtr;
             r{R.A1}   : gd.RegionPtr) : APTR ; CODE -180;

PROCEDURE moRemoveClipRegion
            (mri{R.A0}    : mRenderInfoPtr;
             handle{R.A1} : APTR) ; CODE -186;

PROCEDURE moBeginRefresh
            (mri{R.A0}    : mRenderInfoPtr;
             flags{R.D0}  : LONGINT) : BOOLEAN ; CODE -192 ;

PROCEDURE moEndRefresh
            (mri{R.A0}    : mRenderInfoPtr;
             flags{R.D0}  : LONGINT) ; CODE -198 ;

PROCEDURE moCreateCustomClass
            (base{R.A0}         : ed.LibraryPtr;
             supername{R.A1}    : StrPtr;
             supermcc{R.A2}     : mCustomClassPtr;
             datasize{R.D0}     : LONGINT;
             dispatcher{R.A3}   : ClassDispatcher) : mCustomClassPtr;  CODE -108;

PROCEDURE moDeleteCustomClass
            (mcc{R.A0}          : mCustomClassPtr) : BOOLEAN; CODE -114;


PROCEDURE moObtainPen
            (mri{R.A0}   : mRenderInfoPtr;
             spec{R.A1}  : mPenSpecPtr;
             flags{R.D0} : LONGCARD) : LONGINT ; CODE -156;

PROCEDURE moReleasePen
            (mri{R.A0} : mRenderInfoPtr;
             pen{R.D0} : LONGINT) ; CODE -162 ;


(*************************************************************)
(* layout function, use only in custom layout callback hook! *)
(*************************************************************)

PROCEDURE moLayout
            (obj{R.A0}    : id.ObjectPtr;
             left{R.D0},
             top{R.D1},
             width{R.D2},
             height{R.D3} : LONGINT;
             flag{R.D4}   : LONGCARD) : BOOLEAN; CODE -126;

END MuiL.


