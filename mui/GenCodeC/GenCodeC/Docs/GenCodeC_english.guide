@database GenCodeC
@master LANG:sc/source/GenCodeC_Dist/Docs/GenCodeC_english.guide
@$VER: Version 2.2c
@author "Billault"
@(c) ""
@remark Created with Heddley v1.1 (c) Edd Dumbill 1994

@node "Main" "GenCodeC"


                  @{b}A C Code Generator

              for MUIBuilder (C) Totel Eric@{ub}

                     @{i}Version 2.2g@{ui}

         @{fg highlight} (C) Billault Ludovic & Xavier  1995-1998@{fg text}



      @{"Distribution" link "Distribution" 0}       Important !!!
      @{"Requirements" link "Requirements" 0}       What do you need ?
      @{"Installation" link "Installation" 0}       Installation and the archive description
      @{"Getting started" link "Use" 0}    How does it work ?
      @{"Generated Code" link "Generated Code" 0}     Generated Files
      @{"Bugs" link "Bugs" 0}               Nobody 's perfect !!
      @{"Future" link "Future" 0}             To do
      @{"Acknowledges" link "Acknowledges" 0}       Thank you for your work 
      @{"History" link "History" 0}
      @{"Authors" link "Authors" 0}


      @{b}Note :@{ub} Sorry for our bad english !!, but we think that a software can't
             be distributed without english documentation.
@endnode

@node "Distribution" "Distribution"
      GenCodeC (c) is @{b}@{i}FREEWARE@{ub}@{ui}. Like any @{b}@{i}FREEWARE@{ub}@{ui} program, you mustn't pay more
than 20FF, 3$ US, 4DM for this product.

      All the files of the GenCodeC (c) archive stay under authors copyright.
None modification of these files is authorized without authors permission.

      There 's no warranty about this product. You can't blame us for any
problem that could occurs using GenCodeC.
@endnode

@node "Requirements" "Requirements"
      - An @{b}Amiga@{ub}

      - OS 2.1 or under

      - MUIBuilder v2.2 (c)

      - MUI (c) : not included :-(

      - TextField v2.0 (c) : included in MUIBuilder archive

      - WriteCatalog (c) : included in archive
@endnode

@node "Installation" "Installation"
      
      @{b}@{i}Installation@{ub}@{ui}

        In order to install the new version of GenCodeC (c), you must :

        - Copy the Module directory content in the MUIBuilder:Modules
          directory.
          Be careful, if you use the SAS/C compiler, copy the file named
          Hook_utility.o.sasc, if you use the gcc compiler, copy the file
          named Hook_utility.o.gcc. Don't forget to rename this file in
          Hook_utility.o.
        - Copy the TextField/Gadgets directory content in the
          SYS:Classes/Gadgets directory (provided with MUIBuider (c)).
        - If you use gcc or egcs, copy libmui.a in your lib directory and
          replace the file proto/muimaster.h by muimaster.h provided in GccLib
          directory.
        - That's All !!!


     @{b}@{i}Archive description@{ub}@{ui}

        Module     The required files (data and code) to use GenCodeC (c),
                    except TextField.

        Docs        The documentations files (english and french in amaguide
                    format).         

        GccLib      Files for gcc or egcs in order to compile without inline
                    file.

        MUIB        The .MUIB files used for GenCodeC (c) and WriteCatalog (c).

        Source      The source files.

        Safe Memory The memory manager written by Simon Bullen.
@endnode

@node "Use" "Usage of the Generator"

      @{b}@{i}Description of the generator@{ub}@{ui}

         The new features of the generator are :
            - "intelligent" generation of a @{"Main File" link "Struct Main" 0}
            - files needed for @{"localization" link "WriteCatalog" 0} are now generated
            - you can defined specific @{"header" link "H-Header" 0} for each project


      @{b}@{i}Description of the GUI@{ub}@{ui}

         +------------------------------------------------------+
         | +--------------------------------------------------+ |
         | |@{"                Information Field                " link "Information" 0}| |
         | +--------------------------------------------------+ |
         |                                     +-+              |
         |                  @{"Generate Main File" link "Generate Main" 0}|v|              |
         |                                     +-+      +-+     |
         |  @{"Add new entries in Catalog Description File" link "Catalog" 0}|v|     |
         |                                              +-+     |
         | +---------------+ +--------------+ +---------------+ |
         | |@{"   H-Header   " link "H-Header" 0}| |@{"   C-Header   " link "C-Header" 0}| |@{"  Main-Header " link "Main-Header" 0}| |
         | |               +----------------------------------+ |
         | |+---------------------------------------------++-+| |
         | ||/* Types */                                  ||H|| |
         | ||#include <exec/types.h>                      ||H|| |
         | ||                                             ||H|| |
         | ||                                             |+-+| |
         | ||                                             | ^ | |
         | ||                                             | v | |
         | |+---------------------------------------------+---+ |
         | +--------------------------------------------------+ |
         | +---------------+ +---------------+ +--------------+ |
         | |@{"   Generate   " link "Generate Code" 0}| |@{"   Save Local  " link "Save Local" 0}| |@{" Save Global " link "Save Global" 0}| |
         | +---------------+ +---------------+ +--------------+ |
         +------------------------------------------------------+
@endnode

@node "Generated Code" "Generated Code"

      @{b}@{i}Generated Code@{ub}@{ui}

         The generated files depend on the options that the user chooses before
         generating C code.


         Here, a list of the different files generated for each option :

            - option 'Generate Main' <--> 'Project Name'Main.c

            - option 'Localization'  <--> 'Project Name'_cat.h and
                                          'Project Name'_cat.c

            - MUI Code               <--> 'Project Name'GUI.h et
                                          'Project Name'GUI.c

            - Hook functions used    <--> 'Hook_utility.h' et
                                          'Hook_utility.c'

            - Externals variables or
              functions used         <--> 'Project Name'Extern.h

         Then, generated files are :

            - @{"Main File" link "Struct Main" 0}
            - @{"MUI Code" link "Struct MUI" 0}
            - @{"Files for localization" link "WriteCatalog" 0}
            - @{"Hook_utility" link "Struct Hook" 0}
            - @{"File 'Extern.h'" link "Struct Extern" 0}
@endnode

@node "Information" "                Information Field              "

      @{b}@{i}Information Field@{ub}@{ui}

         You can know the generated file by seeing this field.
@endnode

@node "Generate Main" "Generate Main File"

      @{b}@{i}Generate Main File@{ub}@{ui}

         If you want the program generate a file that contains a 'Main' 
         function, check this 'chec mark'.

         In this file, you can find a loop that handles the IDCMP identifiers.
         For more information, see @{"Structure of Main File" link "Struct Main" 0}. 

      @{b}@{i}Note :@{ub}@{ui}

         Although you can always generate a Main File, it's possible that this
         file has no sense. A generation of this file is 'correct' only if you
         select 'Code', 'Environment' and 'Declarations' options in
         MUIBuilder (c).
@endnode

@node "Catalog" "Add new entries in Catalog Description File"

     @{b}@{i} New entries in Catalog Description@{ub}@{ui}

         If you want add new entries in the Catalog Description file, check 
         this 'check mark'. When you click on the @{"Generate" link "Generate Code" 0} button,a GUI will
         appear and you will be able to modify the Catalog Description file.

         This 'Check Mark' appears only if you select the 'Localization' option
         in MUIBuilder (c).

         Moreover, you can modify the Catalog Description file using the
         @{"WriteCatalog" link "WriteCatalog" 0} program. Be careful, you have to specify the same name
         for the GetStringName field in this program and in MUIBuilder (c)
         (GetString field).
@endnode

@node "WriteCatalog" "WriteCatalog"
      @{b}WriteCatalog (c)@{ub} is a little utility whose aim is generating two C 
      sources files in which you find all required functions for localization.



      @{b}@{i}How to execute this program@{ub}@{ui}

        Launch WriteCatalog from WB or CLI.

        The options are (only if you launch the program from the CLI) :
           - CDN or CatalogDescriptionName : File name for the catalog
                                             description file
           - GSN or GetStringName : C function name used in order to read
                                    the localized strings.
           - Reserved : It's reserved Na! (:-((()

        You can also specify these parameters in the GUI of the program GUI. If
        you don't specify a file name for the catalog description file, a file
        requester asks you the name ! 


      @{b}@{i}GUI description@{ub}@{ui}

        Put the 'GetStringName' in this field (C function called to read the
        localized strings).

        The second gadget is a TextField gadget so you can modify the catalog
        description file.

        Click on the 'Generate Files' button to generates two C files (.c and
        .h) in the same directory than the catalog description file. When you
        click on this button, the catalog description file is automatically
        saved.

        Click on the 'Save' button to save the catalog description file.

      @{b}@{i}Description of the .c and .h generated files@{ub}@{ui}

        The .h file contains all prototypes of the next functions :
            - OpenAppCatalog in order to open the catalog
            - CloseAppCatalog in order to close the catalog
            - FunctionReadString in order to read the localized strings.

        Moreover, the .h file contains a list of all identifiers in order to
        handle localized strings (parameters for the function 
        'FunctionReadString').

        The .c file contains the wole implementation of these functions and the
        declaration of the default strings.
@endnode

@node "H-Header" "   H-Header   "

      @{b}@{i}H-Header@{ub}@{ui}

         This field is a TextField register. By writting in this textfield you 
         can modify what it will inserted in the beginning of the .h file 
         corresponding to the description of MUI interface.

         The header that is showed in the register group coresponds to :
           - the "H-Header" file
             if the project has no specific headers;
           - the "'Project Name'.H-Header" file
             if the project has specific headers.

         The header is saved in the 'Module/C_Headers' diretory. For more
         information, see the '@{"Save Local" link "Save Local" 0}' and '@{"Save Global" link "Save Global" 0}' buttons.
@endnode

@node "C-Header" "   C-Header   "

      @{b}@{i}C-Header@{ub}@{ui}

         This field is a TextField register. By writting in this textfield you 
         can modify what it will inserted in the beginning of the .h file 
         corresponding to the description of MUI interface.

         The header that is showed in the register coresponds to :
           - the "C-Header" file
             if the project has no specific headers;
           - the "'Project Name'.C-Header" file
             if the project has specific headers.

         The header is saved in the 'Module/C_Headers' diretory. For more
         information, see the '@{"Save Local" link "Save Local" 0}' and '@{"Save Global" link "Save Global" 0}' buttons.
@endnode

@node "Main-Header" "  Main-Header "

      @{b}@{i}Main-Heade@{ub}@{ui}r

         This field is a TextField register. By writting in this textfield you 
         can modify what it will inserted in the beginning of the .h file 
         corresponding to the description of MUI interface.

         The header that is showed in the register coresponds to :
           - the "Main-Header" file
             if the project has no specific headers;
           - the "'Project Name'.Main-Header" file
             if the project has specific headers.

         The header is saved in the 'Module/C_Headers' diretory. For more
         information, see the '@{"Save Local" link "Save Local" 0}' and '@{"Save Global" link "Save Global" 0}' buttons.
@endnode

@node "Generate Code" "   Generate   "

      @{b}@{i}Generate@{ub}@{ui}

         Click on this button to generate C source files. After the generation,
         the program gives the control to MUIBuilder (c).

         If you want to know more about the generated files, see 
         @{"Generated Code" link "Generated Code" 0}.

      @{b}@{i}Notes@{ub}@{ui} :

         While the generator produces files, the name of the generated file is 
         indicated in '@{"Information field" link "Information" 0}'.

         If the option '@{"Add New entries in Catalog Description" link "Catalog" 0}' is selected, a
         new window will appear so you will be able to modify the catalog
         description file so that your modifications will be included in your
         code.
@endnode

@node "Struct Main" "Structure of the Main file"

      @{b}@{i}Code Main@{ub}@{ui}

         This is a new feature. Now, you can tell the generator to produce a
'main file' where you can find a loop that handles the IDCMP identifiers, a
function init that opens all required resources (MUI, Catalog if you want
localized code ...) and a function end that closes all resources. So you can
test your code without write anything (good !! isn't it:-)).

         Another feature is an 'intelligent' generation, that is to say the
generator doesn't erase your modifications between two generations. But be
careful, you have to respect some constraints for this (not really anoying). The
generator places some comments in the code, you don't have to erase it if you
want the generator works good. 

         We propose to explain you the structure of this 'main file', so you can
know what you can or can't modify in the C file. Don't be afraid, the generator
makes a backup of your old code in a file named 'old_name'.bak.

         To work correctly, the generator 'cut' the 'main file' in some blocks.
Some blocks are regenerated all time, some are copied from the old 'main file'
and some are computing (they can change, it depends on your options). The
regenerated blocks are preceded by a '@{fg shine}|@{fg text}' symbol, the copied blocks are preceded
by a '@{fg shine}>@{fg text}' symbol and the computing blocks by a '@{fg shine}?@{fg text}' symbol in the next example
(not in the generated source !!!).


      @{b}@{i}Structure of the main file@{ub}@{ui}

@{fg shine} |@{fg text} /* Main-Header File inserted by GenCodeC */ 
@{fg shine} |@{i}@{fg text} Header corresponding to Main-Header @{ui}
@{fg shine} |@{i}@{fg text} Don't modify it !!!. Modify it by the Textfield requester@{ui}
 @{fg shine}|@{fg text} @{"Main-Header" link "Main-Header" 0}
@{fg shine} |@{fg text} /* GenCodeC header end */
@{fg shine} >
 >@{fg text} /* Include generated by GenCodeC */
@{fg shine} >@{i}@{fg text} Most often the 'Projet Name'GUI.h and some others.@{ui}
@{fg shine} >@{fg text}
@{fg shine} |@{fg text} /* Declarations for libraries (inserted by GenCodeC) */
@{fg shine} ?@{i}@{fg text} MUI.library and localization if selected@{ui}
@{fg shine} >@{fg text}
@{fg shine} |@{fg text} /* Init() function */
@{fg shine} >@{fg text} void init( void )
@{fg shine} >@{fg text} {
@{fg shine} ?@{fg text}   if (!(MUIMasterBase = OpenLibrary(MUIMASTER_NAME,MUIMASTER_VMIN)))
@{fg shine} >@{fg text}   {
@{fg shine} >@{fg text}      printf("Can't Open MUIMaster Library\n");
@{fg shine} >@{fg text}      exit(20);
@{fg shine} >@{fg text}   }
@{fg shine} >@{fg text} }
@{fg shine} |@{fg text} /* GenCodeC init() end */
@{fg shine} >@{fg text}
@{fg shine} |@{fg text} /* End() function */
@{fg shine} >@{fg text} void end( void )
@{fg shine} >@{fg text} {
@{fg shine} ?@{fg text}   CloseLibrary(MUIMasterBase);
@{fg shine} >@{fg text}   exit(20);
@{fg shine} >@{fg text} }
@{fg shine} |@{fg text} /* GenCodeC end() end */
@{fg shine} >@{fg text}
@{fg shine} |@{fg text} /* Main Function inserted by GenCodeC */
@{fg shine} >@{fg text} int main(int argc,char **argv)
@{fg shine} >@{fg text} {
@{fg shine} >@{fg text}  @{i} Creation of your application@{ui}
@{fg shine} >@{fg text}
@{fg shine} >@{fg text}  @{i} Handling loop@{ui}
@{fg shine} >@{fg text}   while (running)
@{fg shine} >@{fg text}   {
@{fg shine} >@{fg text}      switch (DoMethod(App->App,MUIM_Application_Input,&signal))
@{fg shine} >@{fg text}      {
@{fg shine} >@{fg text}         case MUIV_Application_ReturnID_Quit:
@{fg shine} >@{fg text}                 running = FALSE;
@{fg shine} >@{fg text}                 break;
@{fg shine} >@{fg text}      }
@{fg shine} >@{fg text}
@{fg shine} >@{fg text}      @{i}  Events handling defined in MUIBuilder (c)@{ui}
@{fg shine} |@{fg text}        /* Insert your code between the "case" statement and
@{fg shine} |@{fg text}          comment "end of case..." */
@{fg shine} ?@{fg text}            case ID_1:
@{fg shine} >@{fg text}                @{i}  Write what you want@{ui}
@{fg shine} ?@{fg text}              /* end of case ID_1 */
@{fg shine} ?@{fg text}            case ID_2:
@{fg shine} >@{fg text}                 @{i} Write what you want@{ui}
@{fg shine} ?@{fg text}              /* end of case ID_2 * /
@{fg shine} |@{fg text}         /* End computing of IDCMP */ }
@{fg shine} >@{fg text}
@{fg shine} >@{fg text}         @{i} Write what you want@{ui}
@{fg shine} >@{fg text}      }
@{fg shine} >@{fg text}      if (running && signal) Wait(signal);
@{fg shine} >@{fg text}   }
@{fg shine} >@{fg text}   DisposeApp(App);
@{fg shine} >@{fg text}   end();
@{fg shine} >@{fg text} }

         Don't be afraid, that 's not too complex, it's only 'logic' :-).
@endnode

@node "Struct MUI" "MUI Code"

      @{b}@{i}MUI Code@{ub}@{ui}

         The generated code produced by GenCodeC (c) contains two files .c and
.h that correspond to the MUI Interface. They have not really changed from the
first version of the generator (Thank you to Eric). Just some minors have
changed in order to have a best code.

         BE CAREFUL, these files are regenerated at each generation, so don't
modify them if you don't want to lose your work. If you want modify your GUI,
use MUIBuilder (c) (:-)), it's so easy. However, if you have some examples where
it's necessary to modify the code, send us a mail.
@endnode

@node "Struct Hook" "Hook_utility"

      By using this "mini package" 'Hook_utility' you can easily install Hook
      functions. It contains two files ('Hook_utility.h' and 'Hook_utility.o').
      To use it, you just have to link your code with 'Hook_utility.o'
      (We hope :-)).
      BE CAREFUL: You'll have to compile your project with 'FAR' option if you
      want to use this package or you'll have to recompile Hook_utility.o.

      To install a hook function, just write this (generated by GenCodeC) :
          struct Hook my_Hook;
          InstallHook(&my_Hook,my_function,Data);

      The Hook structure is the structure used by MUI (c) when you use
      notification. The function that you want MUI called (when you pressed a
      button for instance) is my_function and Data is a pointer on data that
      you can use as you want. 

      BE CAREFUL, you have to allocate yourself the memory needed for the hook
      structure, InstallHook just initiliase the structure.


     @{b}@{i}Technical details@{ub}@{ui}

      The prototype for 'my_function' is defined in 'Hook_utility.h' and his
      named is 'proto_c_function' e.g
          APTR my_function(struct Hook *a0,APTR a2,APTR a1)
      The first parameter is the structure itself (this is the first parameter
      of InstallHook function). a2 and a1 depends on the MUI (c) notification.
      For more information, see MUI_Notify.doc.

      The parameter named Data in InstallHook function is a field of the Hook
      structure (in fact, it is the h_Data field). So, you can use this pointer
      to passed some datas in the hook structure and you just have to use
      a0->h_Data in your function (my_function) to use the data.


      Here, you can see an example of a code generated by GenCodeC (c):

         struct Hook MyHook;
         APTR truc(struct Hook *a0, APTR a2, APTR a1);
         InstallHook(&MyHook,truc,NULL);
                /* NULL corresponds to the h_Data field */

         ....

         DoMethod(Object->BT, /* BT is the notified object (here a button) */
           MUIM_Notifiy, MUIA_Pressed, TRUE,
           Object->App,
           2,
           MUIM_CallHook,&MyHook
           );

         When the user will click on the BT Button, the truc function will be
         called by MUI (c). a0 points to myHook, a2 is Object->App and
         a0->h_Data is NULL. 

         So, you can get the Author of the application using a2 (Here,
         Object->App points to the application) :
               char *name;
               get(a2,MUIA_Application_Author,&name);
               printf("%s\\n",name);
@endnode

@node "Struct Extern" "File 'Extern.h'"

      @{b}@{i}File 'Extern.h'@{ub}@{ui}

         There 's not too many things to say. In fact, it's only an interface
between your @{"Hook functions" link "Struct Hook" 0}, extern variables and so on and your own code.
@endnode

@node "Save Local" "   Save Local  "

      @{b}@{i}Save Local@{ub}@{ui}

         Click on this button to save all the headers (@{"H-Header" link "H-Header" 0}, @{"C-Header" link "C-Header" 0} and
         @{"Main-Header" link "Main-Header" 0}) in three files. These files are located in the
         'Module/c_Headers' directory and have the next names:
           - 'H-Header'    <--> 'Project Name'.H-Header
           - 'C-Header'    <--> 'Project Name'.C-Header
           - 'Main-Header' <--> 'Project Name'.Main-Header

         These files will be used for the project whose name is 'Project Name'.
@endnode

@node "Save Global" " Save Global "

      @{b}@{i}Save Global@{ub}@{ui}

         Click on this button to save all the headers (@{"H-Header" link "H-Header" 0}, @{"C-Header" link "C-Header" 0} and
         @{"Main-Header" link "Main-Header" 0}) in three files. These files are located in the
         'Module/c_Headers' directory and have the next names :
           - 'H-Header'    <--> H-Header
           - 'C-Header'    <--> C-Header
           - 'Main-Header' <--> Main-Header

         These files will be used for all projects that have no specific
         headers.
@endnode

@node "History" "History"
      Version 1.0 :  First C Code Generator written by Eric Totel.

      Version 2.0ß:  A main file is generated. So we can test your work quickly
                     (just a little compilation).
                     Generation of files in order to localize your work.
                     Not distributed (???).

      Version 2.1 :  New C sources for the generator.
                     Some bugs fixed.
                     Not distributed.

      Version 2.2ß:  Integration of a GUI (generated by MUIBuilder (c) and
                     GenCodeC (c) 2.1 and 2.2ß).
                     Some other bugs fixed.
                     Creation of @{"WriteCatalog" link "WriteCatalog" 0}.

      Version 2.2c:  Some bugs fixed.
                     Addition of an object file of @{"Hook_utility.o" link "Struct Hook" 0} for gcc.

      Version 2.2d:  Some bugs fixed.
                     Modification of the header of *cat.c file.

      Version 2.2e:  One bug fixed :
                         This bug appeared when GenCodeC could not copy
                         "Hook_Utility.*"
                     Hook_Utility.o is now generated with NoStackExt and
                         NoStackCheck option
                     An entry was added in "Main-Header" :
                         LONG __stack=8192 (in order to avoid bugs with MUI 3.7
                                            and more)

      Version 2.2f:  You can now compile with SAS/C, gcc and the others
                         compilers
                     Add a file "libmui.a" in order to compile without any pbs
                         with gcc and MUI 3.8 (no need to use inlines)

      Version 2.2g:  Allocations are no longer 'PUBLIC'                  

      Version 2.2h:  Add muimaster.h file in GccLib directory in order to
                         compile with gcc
@endnode

@node "Bugs" "Bugs"

      @{b}@{i}How to report bugs@{ub}@{ui}

         If you find some bugs, contact us at @{"our adress" link "Authors" 0}.
@endnode

@node "Future" "Future"

      @{b}@{i}Future for GenCodeC@{ub}@{ui}

         Wait for MUIBuilder 3.0 !!!

         Replace 'Textfield' by 'TextView' written by E.F.Pritchard.

         If you have any ideas about an improvement of this generator, contact
         us at @{"our address" link "Authors" 0}.
@endnode

@node "Acknowledges" "Acknowledges"
      Thank you for your work :

          - @{b}@{i}Stephan Stuntz@{ub}@{ui} for MUI (c).

          - @{b}@{i}Eric Totel@{ub}@{ui} for MUIBuilder (c) and for the first GenCodeC.

          - @{b}@{i}Edd Dumbill@{ub}@{ui} for Heddley v1.1 (c). It's a good Guide Generator.

          - @{b}@{i}Jochen Wiedmann@{ub}@{ui} for FlexCat (c).

          - @{b}@{i}Simon Bullen@{ub}@{ui} for his very good 'Safe Memory' (See the 'Safe Memory'
            directory in the archive).

          - @{b}@{i}Mark Thomas@{ub}@{ui} for his TextField gadget (See the 'TextField' directory
            in the archive).

          - AND the very best of 'the @{b}AMIGA@{ub} (c) Copyright 1995 Amiga
            Technologies'.
@endnode

@node "Authors" "Authors"

   M. @{b}@{i}Billault Ludovic & Xavier@{ub}@{ui}
   24, rue Mesliers
   Les Noëls
   41350 Vineuil

   FRANCE

   @{b}E-Mail@{ub}: Xavier.Billault@ramses.frmug.org or
           Ludovic.Billault@tcc.thomson-csf.com
@endnode

