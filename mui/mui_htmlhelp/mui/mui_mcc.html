<HTML>
<HEAD>
<title>Notes on writing MCC code</title>
<link rev=made href=mailto:svermeulen@ragnarok.mtroyal.ab.ca>
</HEAD>
<BODY>
<pre>

From: "Klaus Melchior" <kmel@eifel.oche.de>
Date: Mon, 04 Mar 96 19:32:59 +0500
Mime-Version: 1.0
Content-Transfer-Encoding: 7bit
Subject: MCC Registration Report 04.03.96
Message-Id: <27687@eifel.adsp.sub.org>
Resent-Message-Id: <"zqnaa1.0.A06.zuqEn"@sunsite>
Resent-From: mui@sunsite.Informatik.RWTH-Aachen.DE
Reply-To: mui@sunsite.Informatik.RWTH-Aachen.DE
X-Mailing-List: <mui@sunsite.informatik.rwth-aachen.de> archive/latest/483
X-Loop: mui@sunsite.informatik.rwth-aachen.de
Precedence: list
Resent-Sender: mui-request@sunsite.Informatik.RWTH-Aachen.DE
X-Lines: 40
Status: RO
Content-Type: text/plain; charset="us-ascii"
Content-Length: 833


- Registered:

0x8002xxxx Busy.mcc,p         Klaus Melchior,kmel@eifel.oche.de
           Listtree.mcc,p

0x8057xxxx Mailtext.mcc       Olaf Peters,olf@informatik.uni-bremen.de


- ToDo:

0x8002xxxx Bookmarks.mcc      Klaus Melchior,kmel@eifel.oche.de
           Explorer.mcc,p

0x8xxxxxxx NewString.mcc,p    Ruediger Sopp,rs@nostlgic.tng.oche.de

0x8516xxxx stringnumeric.mcc  Oliver Wagner,olli@lsd.wupper.de
           toolbar.mcc
           toolbutton.mcc

0x81eexxxx MonthNavigator.mcc Kai Hoffmann,i07m@Informatik.Uni-Bremen.DE



- Info:

* To get an example C source for MCCs and MCPs
* To get more informations about MCCs or MCPs

-> Write to: mccreg@eifel.oche.de

* To get information about the classes

-> Write to the author, not me!


--
kmel@eifel.tng.oche.de  ...motorolling
http://www.etechnik.fh-aachen.de/~kmel


From: "Stefan Stuntz" <stuntz@informatik.tu-muenchen.de>
Date:   Sun, 10 Mar 1996 18:14:10 +0100
X-Mailer: IntuiNews 1.3b Beta 7 (2.2.96)
Subject: General things about mccs
Message-Id: <81319943@magic.informatik.tu-muenchen.de>
Organization: Home of MUI
Resent-Message-Id: <"klVnB3.0.eK6.uumGn"@sunsite>
Resent-From: mui@sunsite.Informatik.RWTH-Aachen.DE
Reply-To: mui@sunsite.Informatik.RWTH-Aachen.DE
X-Mailing-List: <mui@sunsite.informatik.rwth-aachen.de> archive/latest/555
X-Loop: mui@sunsite.informatik.rwth-aachen.de
Precedence: list
Resent-Sender: mui-request@sunsite.Informatik.RWTH-Aachen.DE
Content-Type: text
Content-Length: 518
X-Lines: 15
Status: RO

Hi!

You should *only* make mccs when you intend to release a custom class to
the public and document its interface. You should *not* make mccs for
classes which are only used by yourself. If you need a class in
different executables, you may put this class into an external library
to reuse the code.

So again... a xyz.mcc needs to be public and needs to have its interface
well documented, otherwise it shouldnt be a xyz.mcc. If you dont want
others to use your classes, dont make them mccs!

--
Greetings, Stefan


From: "Klaus Melchior" <kmel@eifel.oche.de>
Date: Wed, 13 Mar 96 14:33:55 +0500
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Subject: MCCReg: MCC Info
Message-ID: <27858@eifel.adsp.sub.org>
X-Lines: 112
Status: RO
Content-Type: text/plain; charset="us-ascii"
Content-Length: 3136


/*** Information about MUI Custom Classes  $VER: 0.2 ***/


- Preface:

You should *only* make mccs when you intend to release a custom class
to the public and document its interface. You should *not* make mccs
for classes which are only used by yourself. If you need a class in
different executables, you may put this class into an external library
to reuse the code.

So again... a xyz.mcc needs to be public and needs to have its
interface well documented, otherwise it shouldnt be a xyz.mcc. If you
don't want others to use your classes, dont make them mccs!



- Info:

* to register

  1) At first send *only* information to about what kind of class you
     are writing. A short description is fine.

  2) Ask yourself if the class should be made publically,
     is there an *interest*?
     All new classes *should* be discussed in the MUI mailing list:
       mui@sunsite.Informatik.RWTH-Aachen.DE !

  3) If you don't know your MUI serial nr (4 digits), ask me!

  4) Create Autodocs, Includes and an example for your class,
     test it with the latest MUI release, Enforcer and Mungwall or
     PoolWatch!

  5) Make a list of _all_ IDs the class is using, this means all
     public and private ones!

  6) Create a archive with:
     - class, readme
     - autodocs, C includes
     - demo, demo source
     - ID list
     > send it to: mccreg@eifel.oche.de


* to get an example C source for MCCs and MCPs

> write to: mccreg@eifel.oche.de



- More Info:

* Public name for the custom class.

Note that you *must* register public names with the author of MUI. All
unregistered public classes are promised to go on a builtin blacklist
and will fail with future versions of MUI!


* Attributes and methods for the new class.

Your tags have to be named MUI(A/M)_<classname>_<foobar>. The upper
sixteen bits of your tag values need to be (TAG_USER | ( <your MUI
serial Nr> << 16 )) Again, classes with invalid tag specs are promised
to go on the blacklist. This implies that you have to be a registered
MUI user if you want to distribute public classes.

The first ID tag is used for internal purpose, so you don't have to
use it!

Example:

If your serial number is 4711 (decimal):

          4711 = 0x1267
        tagbase: 0x9267xxxx
First usable ID: 0x92670001
           last: 0x9267ffff


* File specification:

Custom class header files should have a "_mcc.h" appended and should
be place in 'Include:mui/'!
Autodocs files should be named "MCC_<Name>.doc".


* MCC archives (example):

Filename: 'MCC_<Name><Version>.lha'

MCC_<Name>/Developer/AutoDocs/MCC_<Name>.doc
MCC_<Name>/Developer/Include/mui/<Name>_mcc.h
MCC_<Name>/Developer/Modula/txt/MCC<Name>.def
MCC_<Name>/Developer/Modula/txt/MCC<Name>.mod
MCC_<Name>/Developer/Oberon/txt/mcc<Name>.mod
MCC_<Name>/Developer/Show_<Name>
MCC_<Name>/Developer/Show_<Name>.c
MCC_<Name>/Docs/deutsch/<Name>.mcc.doc
MCC_<Name>/Docs/deutsch/<Name>.mcc.guide
MCC_<Name>/Docs/english/<Name>.mcc.doc
MCC_<Name>/Docs/english/<Name>.mcc.guide
MCC_<Name>/Libs/MUI/<Name>.mcc
MCC_<Name>/Libs/MUI/<Name>.mcp
MCC_<Name>/MCC_<Name>2_0.readme

See also 'MCC_Busy2_0.lha" on Aminet.

From: "Kai Hofmann" <i07m@informatik.uni-bremen.de>
Date: Sat, 16 Mar 1996 13:53:01 +0100
Mime-Version: 1.0
Content-Transfer-Encoding: quoted-printable
X-Mailer: IntuiNews 1.3a (7.9.95)
Subject: MonthNavigator.mcc Beta-Testers wanted!
Message-Id: <60805175@informatik.uni-bremen.de>
Organization: Privat Amiga site
Resent-Message-Id: <"tDi5z2.0.mP3.GhhIn"@sunsite>
Resent-From: mui@sunsite.Informatik.RWTH-Aachen.DE
Reply-To: mui@sunsite.Informatik.RWTH-Aachen.DE
X-Mailing-List: <mui@sunsite.informatik.rwth-aachen.de> archive/latest/656
X-Loop: mui@sunsite.informatik.rwth-aachen.de
Precedence: list
Resent-Sender: mui-request@sunsite.Informatik.RWTH-Aachen.DE
X-Lines: 21
Status: RO
Content-Type: text/plain; charset="iso-8859-1"
Content-Length: 857

MonthNavigator.mcc is working fine now, there are still some problems, but
I think its time to make the class available to developers (may be some us=
ers
are interested too).

If you are interested in MonthNavigator.mcc I will send the archive uuenco=
ded
(~65K email) to you.

-------------------------------------------------------------------
Kai Hofmann             EMail: i07m@zfn.uni-bremen.de
FB 3, Informatik               i07m@informatik.uni-bremen.de
Universit=E4t Bremen    WWW  : http://www.informatik.uni-bremen.de/~i07m
                        IRC  : PowerStat
-------------------------------------------------------------------


From: "Stefan Stuntz" <stuntz@informatik.tu-muenchen.de>
Date:   Wed, 03 Apr 1996 13:57:52 +0100
X-Mailer: IntuiNews 1.3b Beta 7 (2.2.96)
Subject: Re: Cutom class crashes.
Message-Id: <81320841@magic.informatik.tu-muenchen.de>
Organization: Home of MUI
Resent-Message-Id: <"Ve9nL3.0.sN6.PYcOn"@sunsite>
Resent-From: mui@sunsite.Informatik.RWTH-Aachen.DE
Reply-To: mui@sunsite.Informatik.RWTH-Aachen.DE
X-Mailing-List: <mui@sunsite.informatik.rwth-aachen.de> archive/latest/892
X-Loop: mui@sunsite.informatik.rwth-aachen.de
Precedence: list
Resent-Sender: mui-request@sunsite.Informatik.RWTH-Aachen.DE
Content-Type: text
Content-Length: 1246
X-Lines: 31
Status: RO

Jens Boenisch wrote

> > That is why I just decided to drop SAS/c for gcc and Storm. It seems
> > that SAS and MUI and not working together perfectly! (Stefan, are YOU
> > using SAS ?). And I thing it is SAS fault (but I am not sure)
>
> SAS/C has some problems with setting the register A4 correctly when you
> compile with libcode turned on. The only thing I can suggest about this
> is not using libcode. It suxx anyway :)

Good point. I also do not use LIBCODE for all the MUI stuff since things
are a lot easier without. This SAS library creating kit has always been
somewhat strange IMHO. If you write libraries, better do it yourself
like in my mccheader.c.

Note again... if you write .mccs, MUI takes care of setting A6 before it
calls the dispatcher of your custom class. However, MUI *cannot* take
care about A6 when you use hooks (like e.g. list display hooks). Thus,
you cannot reference global vars in your hooks unless you get your A6
from somewhere else.

An easy solution is that you turn your hooks into methods by letting the
hook perform only a DoMethod() on your object. DoMethod() does not
reference any global vars.

All this affects external .mccs, not other private classes contained in
your code.

--
Greetings, Stefan




