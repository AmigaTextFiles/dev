; $VER: Urltext_Install 18.8 (19.4.2003)

(procedure P_SetMessages

    (if (= "italiano" @language)
        (
            (set #AskMCCsDirPromptMsg           "Scegli la directory dove installare le classi MUI")
            (set #AskMCCsDirHelpMsg             "Nella directory che sceglierai, verranno copiate le classi MUI.")

            (set #CopyingMCCsMsg                "Sto copiando le classi MUI...")
        )
    (if (= "español" @language)
        (
            (set #AskMCCsDirPromptMsg           "Elija el directorio donde desea copiar las clases MUI de Urltext.")
            (set #AskMCCsDirHelpMsg             "En el directorio que elija se copiarán las clases MUI de Urltext (Urltext.mcc y Urltext.mcp). Por defecto: MUI:libs/mui/")

            (set #CopyingMCCsMsg                "Copiando/Actualizando clases MUI de Urltext...")
        )
        (
            (set #AskMCCsDirPromptMsg           "Select the drawer where you want to copy the MUI classes")
            (set #AskMCCsDirHelpMsg             "In the drawer you supply here, there will be installed the MUI classes.")

            (set #CopyingMCCsMsg                "Copying or Updating MUI classes")
        )
    )
    )
)

(procedure P_AskMCCsDir
    (set #MCC-dir
        (askdir
            (prompt #AskMCCsDirPromptMsg)
            (help #AskMCCsDirHelpMsg)
            (default @default-dest)
        )
    )
)

(procedure P_CopyMCCs
    (working #CopyingMCCsMsg)
    (set #localMCCSDir (tackon #source-dir "MUI/"))
    (foreach #localMCCsDir "#?"
        (copylib
            (source (tackon #localMCCsDir @each-name))
            (dest @default-dest)
        )
    )
)

(procedure P_CopyCatalogs
    (set #catSourceDir (tackon #source-dir (tackon "Catalogs" @language)))
    (set #catDestDir (tackon "Locale:" (tackon "Catalogs" @language)))
    (if (= (and (= (exists (#catSourceDir)) 2) (= (exists (#catDestDir)) 2)) 1)
        (foreach #catSourceDir "#?"
            (copylib
                (source (tackon #catSourceDir @each-name))
                (dest #catDestDir)
            )
        )
    )
)

(set @default-dest "MUI:LIBS/MUI/")
(set #source-dir (if (= 1 (exists @icon)) (pathonly (expandpath @icon)) (expandpath @icon)))

(P_SetMessages)

(complete 0)
(P_AskMCCsDir)
(set @default-dest #MCC-dir)
(P_CopyMCCs)
(complete 80)
(P_CopyCatalogs)
(complete 100)
