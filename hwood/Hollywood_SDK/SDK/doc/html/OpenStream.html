<html>
<!-- generated from hollywood_sdk.meta by MetaDoc 1.13 (c) by Andreas Falkenhahn -->
<head>
<title>OpenStream</title>
<meta name="author" content="Andreas Falkenhahn">
<meta name="generator" content="MetaDoc 1.13">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
<!--
body {font-family: sans-serif;}
ul.toc {list-style: none; margin-left: 20px; padding-left: 0px;}
dt.autodoc {font-variant: small-caps; font-size: larger; margin-top: 10px; margin-bottom: 10px; padding-left: 0.2em; padding-top: 0.2em; padding-bottom: 0.2em;
	background-color: #bae1ff; border-width: 1px; border-color: #3baaff; border-style: solid;}
dt.codelist {margin-bottom: 0.2em;}
h2.heading {background-color: #bae1ff; font-family: Arial; padding-top: 0.4em; padding-bottom: 0.4em;}
code {background-color: #f2f2f2; padding: 2px 4px; font-weight: bold;}
pre {background-color: #f2f2f2; border: 1px solid #ddd; padding: 0.3em;}
		
-->
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<dl>
<dt class="autodoc"><b>Name</b></dt><dd>
OpenStream -- open a sound file (V5.0)</dd>
<dt class="autodoc"><b>Synopsis</b></dt><dd>
<pre>
APTR handle = OpenStream(STRPTR filename, struct LoadSoundCtrl *ctrl);</pre>
</dd>
<dt class="autodoc"><b>Function</b></dt><dd>
This function has to open the specified filename, check if it is in a sound file
format that the plugin wants to handle, and, if it is, return a handle to the sound file
back to Hollywood. Otherwise it has to return <code>NULL</code>. The handle returned by <code>OpenStream()</code> is
an opaque datatype that only your plugin knows about. Hollywood will simply pass
this handle back to your <a href="StreamSamples.html">StreamSamples()</a> function when it wants to
have the raw PCM data of the sound file.

<p>
This function also has to provide certain information about the sound file it
has just opened. This information has to be written to the <code>struct LoadSoundCtrl</code>
that is passed in the second parameter. This structure looks like this:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>struct LoadSoundCtrl
{
    ULONG Samples;                  // [out]
    int Channels;                   // [out]
    int Bits;                       // [out]
    int Frequency;                  // [out]
    ULONG Flags;                    // [out]
    int SubSong;                    // [in]  -- V5.3
    int NumSubSongs;                // [out] -- V5.3
    STRPTR Adapter;                 // [in]  -- V6.0
    struct hwUserTagList *UserTags; // [in]  -- V10.0
};
</pre></td></tr></table><p>

The following information has to be written to the <code>struct LoadSoundCtrl</code> pointer
by <code>OpenStream()</code>:

<p>
<dl>
<dt class="codelist"><code>Samples:</code></dt>
<dd>
The total number of PCM frames in the sound file. This can be 0 if you set the
<code>HWSNDFLAGS_INFINITE</code> flag (see below).

<p>
</dd>
<dt class="codelist"><code>Channels:</code></dt>
<dd>
The number of channels used by the sound file. This must be either 1 (mono) or 2
(stereo).

<p>
</dd>
<dt class="codelist"><code>Bits:</code></dt>
<dd>
The number of bits per PCM sample. This must be either 8 or 16.

<p>
</dd>
<dt class="codelist"><code>Frequency:</code></dt>
<dd>
The number of PCM frames that should be played per second. Usually 44100
or 48000.

<p>
</dd>
<dt class="codelist"><code>Flags:</code></dt>
<dd>
A combination of the following flags describing additional properties
of the stream:

<p>
<dl>
<dt class="codelist"><code>HWSNDFLAGS_BIGENDIAN</code></dt>
<dd>
The PCM samples are stored in big endian format. This flag is only meaningful
if the bit resolution is 16. This flag is unsupported on Windows, AROS x86,
and Android.

<p>
</dd>
<dt class="codelist"><code>HWSNDFLAGS_SIGNEDINT</code></dt>
<dd>
The PCM samples are stored as signed integers. This flag must always be set for 16-bit
samples. For 8-bit samples this flag is unsupported on Windows, Linux and Android,
i.e. 8-bit samples must always be unsigned on these three platforms. On all other
platforms this flag must be set for 8-bit samples and the samples must be signed.

<p>
</dd>
<dt class="codelist"><code>HWSNDFLAGS_CANSEEK</code></dt>
<dd>
Plugin supports seeking directly to PCM frames using <a href="SeekStream.html">SeekStream()</a>.
Note that even if this flag isn't set, your plugin still needs to be able
to rewind the stream, i.e. seek it back to the very beginning when 0 is
passed to <a href="SeekStream.html">SeekStream()</a>. See <a href="SeekStream.html">SeekStream</a> for details.

<p>
</dd>
<dt class="codelist"><code>HWSNDFLAGS_INFINITE:</code></dt>
<dd>
Set this flag to tell Hollywood that this stream will loop forever and will never finish.
In that case you also have to set <code>Samples</code> to 0. (V9.0)
</dd></dl>

<p>
</dd>
<dt class="codelist"><code>SubSong:</code></dt>
<dd>
This member will be set by Hollywood to the sub-song within the sound file
that Hollywood wants your plugin to open. Only useful for old tracker
modules. (V5.3)

<p>
</dd>
<dt class="codelist"><code>NumSubSongs:</code></dt>
<dd>
This must be set by your plugin to the total number of sub-songs in the
sound file. This is typically set to 1 because most sound file formats
do not support sub-songs. This feature is only here to allow support for
old tracker module formats that can have various sub-songs in the same
file. (V5.3)

<p>
</dd>
<dt class="codelist"><code>Adapter:</code></dt>
<dd>
Starting with Hollywood 6.0 users can specify the file adapter that should be used
to open certain files. If this member is non-<code>NULL</code>, Hollywood wants your plugin to
use the file adapter specified in <code>Adapter</code> to open the sound file. This means that you
have to use <a href="hw_FOpenExt.html">hw_FOpenExt()</a> instead of <a href="hw_FOpen.html">hw_FOpen()</a>
to open the sound file. Make sure to check for Hollywood 6.0 before trying to access
this member because it isn't there in previous versions. See <a href="hw_FOpenExt.html">hw_FOpenExt</a> for details. (V6.0)

<p>
</dd>
<dt class="codelist"><code>UserTags:</code></dt>
<dd>
This member will be set to a list of user tags in case they were specified
in the Hollywood script. User tags are a way of passing additional information
from Hollywood scripts to plugin functions. Note that even if your plugin doesn't
support any user tags, you should still look for this tag and pass the user
tags to <a href="hw_FOpenExt.html">hw_FOpenExt</a> because the user tags passed in <code>UserTags</code> could
also be intended for another plugin, namely the file adapter plugin passed
in <code>Adapter</code>. See <a href="UserTags.html">User tags</a> for details. Make sure to check for Hollywood 10.0
before trying to access this member because it isn't there in previous versions.
(V10.0)
</dd></dl>

<p>
Please note that you should not use ANSI C functions like <code>fopen()</code> to
open the file that is passed to this function because the filename that is passed
to this function can also be a specially formatted filename specification that
Hollywood uses to load files that have been linked to applets or executables. In
order to be able to load these files correctly, you have to use special IO functions
provided by Hollywood. See <a href="FileIO.html">File IO information</a> for details.

<p>
</dd>
<dt class="autodoc"><b>Inputs</b></dt><dd>
<dl>
<dt><i>filename</i></dt>
<dd>filename to open</dd>
<dt><i>ctrl</i></dt>
<dd>pointer to a <code>struct LoadSoundCtrl</code> for storing information
about the sound file</dl>
</dd>
<dt class="autodoc"><b>Results</b></dt><dd>
<dl>
<dt><i>handle</i></dt>
<dd>a handle that identifies this sound file or <code>NULL</code> if plugin doesn't
want to handle this sound file</dd></dl>
</dd></dl>
<hr>
<font size=-2><a href="OpenStream_.html" target="_top">Show TOC</a></font>
</body>
</html>