<html>
<!-- generated from hollywood_sdk.meta by MetaDoc 1.13 (c) by Andreas Falkenhahn -->
<head>
<title>clib2 versus newlib</title>
<meta name="author" content="Andreas Falkenhahn">
<meta name="generator" content="MetaDoc 1.13">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
<!--
body {font-family: sans-serif;}
ul.toc {list-style: none; margin-left: 20px; padding-left: 0px;}
dt.autodoc {font-variant: small-caps; font-size: larger; margin-top: 10px; margin-bottom: 10px; padding-left: 0.2em; padding-top: 0.2em; padding-bottom: 0.2em;
	background-color: #bae1ff; border-width: 1px; border-color: #3baaff; border-style: solid;}
dt.codelist {margin-bottom: 0.2em;}
h2.heading {background-color: #bae1ff; font-family: Arial; padding-top: 0.4em; padding-bottom: 0.4em;}
code {background-color: #f2f2f2; padding: 2px 4px; font-weight: bold;}
pre {background-color: #f2f2f2; border: 1px solid #ddd; padding: 0.3em;}
		
-->
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<h2 class="heading">3.3 clib2 versus newlib</h2>

<p>
Developers targetting the AmigaOS 4 platform can choose between two different C runtime libraries:
clib2 and newlib. clib2 is linked statically into the binary whereas newlib is available as a
shared library. Since Hollywood uses clib2 it is recommended that you use clib2 for your plugins
as well. This can be achieved by compiling your sources with the following compiler setting:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>gcc -mcrt=clib2 ...
</pre></td></tr></table><p>

Please note that clib2 is not thread-safe by default. Thus, if you need a thread-safe C runtime
you need to link against <code>clib2-ts</code> instead, i.e.

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>gcc -mcrt=clib2-ts ...
</pre></td></tr></table><p>

If you want to use newlib for your plugins, you need to be very careful not to mix clib2 and
newlib structures and handles. For example, all handles (e.g. an stdio <code>FILE</code> handle) allocated by
Hollywood will be clib2 handles since Hollywood uses clib2. Thus, you must not pass them to a
newlib stdio function since the internal representation of these handles might differ. Also,
you must be careful when using structures that are shared between the C runtime provided by
Hollywood and your plugin. Hollywood's C runtime will use the structures as defined in the clib2
headers whereas your plugin will use the format defined the newlib headers.

<p>
Finally, you also have to open <code>newlib.library</code> on your own if you want to use
newlib in your plugin.

<p>
<hr>
<font size=-2><a href="AmigaOSclib2_.html" target="_top">Show TOC</a></font>
</body>
</html>