<html>
<!-- generated from hollywood_sdk.meta by MetaDoc 1.13 (c) by Andreas Falkenhahn -->
<head>
<title>FileRequest</title>
<meta name="author" content="Andreas Falkenhahn">
<meta name="generator" content="MetaDoc 1.13">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
<!--
body {font-family: sans-serif;}
ul.toc {list-style: none; margin-left: 20px; padding-left: 0px;}
dt.autodoc {font-variant: small-caps; font-size: larger; margin-top: 10px; margin-bottom: 10px; padding-left: 0.2em; padding-top: 0.2em; padding-bottom: 0.2em;
	background-color: #bae1ff; border-width: 1px; border-color: #3baaff; border-style: solid;}
dt.codelist {margin-bottom: 0.2em;}
h2.heading {background-color: #bae1ff; font-family: Arial; padding-top: 0.4em; padding-bottom: 0.4em;}
code {background-color: #f2f2f2; padding: 2px 4px; font-weight: bold;}
pre {background-color: #f2f2f2; border: 1px solid #ddd; padding: 0.3em;}
		
-->
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<dl>
<dt class="autodoc"><b>Name</b></dt><dd>
FileRequest -- open a file requester (V6.0, optional)</dd>
<dt class="autodoc"><b>Synopsis</b></dt><dd>
<pre>
int error = FileRequest(APTR handle, STRPTR title, ULONG flags,
                STRPTR *result, struct hwTagList *tags);</pre>
</dd>
<dt class="autodoc"><b>Function</b></dt><dd>
This function must open a file requester (also known as an open dialog box or file chooser dialog)
that prompts the user to select a file for opening or saving. The function must then return
a fully qualified path to this file to Hollywood by setting the fourth parameter to a string
pointer that your function has allocated. Hollywood will then call <a href="FreeRequest.html">FreeRequest()</a>
on this string when it is done with it.  If the user cancels the file requester, you have
to write <code>NULL</code> to the <code>result</code> string pointer.

<p>
The <code>flags</code> and <code>tags</code> parameters are used to control the appearance of the file requester. The following
flags are currently defined:

<p>
<dl>
<dt class="codelist"><code>HWFILEREQFLAGS_MULTISELECT:</code></dt>
<dd>
If this flag is set, your requester has to allow the selection of multiple files. In multi-select
mode the return string pointer that you write to the <code>result</code> parameter has to be a list of fully
qualified paths to files. The individual filenames are separated from one another by a single <code>NULL</code>
terminator byte whereas the complete list is terminated by two <code>NULL</code> terminator bytes to signal the
list end to Hollywood. This flag cannot be combined with <code>HWFILEREQFLAGS_SAVEMODE</code>.

<p>
</dd>
<dt class="codelist"><code>HWFILEREQFLAGS_SAVEMODE:</code></dt>
<dd>
If this flag is set, Hollywood wants your requester to open in save mode, i.e. the user should
select a file for saving. In contrast to open file mode, the user might select a file that doesn't
exist when in save mode and the requester should also make the user confirm that the file can
be overwritten in case he selects an existing file. This flag cannot be combined with <code>HWFILEREQFLAGS_MULTISELECT</code>.
</dd></dl>

<p>
Hollywood also passes a taglist to this function. Your implementation has to
handle the following tags:

<p>
<dl>
<dt class="codelist"><code>HWFILEREQTAG_FROMSCRIPT:</code></dt>
<dd>
The <code>iData</code> member of this tag item is set to <code>True</code> if Hollywood has called you
while the script is running. This might be important to know because requesters
should not block window refresh so you might want to setup a temporary modal
event loop if this tag has been set to <code>True</code> to enable your display to stay
responsive.

<p>
</dd>
<dt class="codelist"><code>HWFILEREQTAG_EXTENSIONS:</code></dt>
<dd>
If this tag is set, the requester should only show files that use the specified
file extension. The <code>pData</code> member of this tag item is set to a string that
contains a list of file extensions that should be shown. The individual extensions
do not contain a dot and are separated by a vertical bar character (|), for
example &quot;jpg|jpeg|png|bmp|gif|lbm|ilbm&quot;.

<p>
</dd>
<dt class="codelist"><code>HWFILEREQTAG_DEFDRAWER:</code></dt>
<dd>
If this tag is set, Hollywood wants your requester to show the files of this
directory when it opens. The directory is passed as a string in the <code>pData</code>
member of this tag item.

<p>
</dd>
<dt class="codelist"><code>HWFILEREQTAG_DEFFILE:</code></dt>
<dd>
If this tag is set, Hollywood wants your requester to preselect this file
when it opens. The file is passed as a string in the <code>pData</code> member of this
tag item.

<p>
</dd>
<dt class="codelist"><code>HWFILEREQTAG_FILTERS:</code></dt>
<dd>
Starting with Hollywood 9.0, <code>FileRequest()</code> supports the declaration of
filter groups via an optional table argument. If a script passes such a
filter group to <code>FileRequest()</code>, it will be forwarded to your plugin in
this tag item. The <code>pData</code> member of the tag item will be set to a pointer
to a <code>struct hwFileReqFilterInfo</code> containing the first item of
the filter group and a pointer to the next item.

<p>
The <code>struct hwFileReqFilterInfo</code> looks like this:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>struct hwFileReqFilterInfo
{
    struct hwFileReqFilterInfo *Succ;
    STRPTR Description;
    STRPTR Filter;
    ULONG Flags;
};
</pre></td></tr></table><p>

Here is a description of the structure members:

<p>
<dl>
<dt class="codelist"><code>Succ:</code></dt>
<dd>
Contains a pointer to the next node in the list or <code>NULL</code> for the tail node.

<p>
</dd>
<dt class="codelist"><code>Description:</code></dt>
<dd>
Contains the filter group's description.

<p>
</dd>
<dt class="codelist"><code>Filter:</code></dt>
<dd>
Contains the actual file extensions that should be part of this filter group.

<p>
</dd>
<dt class="codelist"><code>Flags:</code></dt>
<dd>
A combination of flags for this filter group. The following flags are currently
defined:

<p>
<dl>
<dt class="codelist"><code>HWFILEREQFILTERFLAGS_HIDE:</code></dt>
<dd>
If this flag is set, your file requester shouldn't show the actual file
extensions that are part of the group but just the group description.
</dd></dl>
</dd></dl>

<p>
(V9.0)
</dd></dl>

<p>
<code>FileRequest()</code> is an optional API and must only be implemented if <code>HWSRAFLAGS_FILEREQUEST</code> has been
passed to <a href="hw_SetRequesterAdapter.html">hw_SetRequesterAdapter()</a>. See <a href="hw_SetRequesterAdapter.html">hw_SetRequesterAdapter</a> for details.

<p>
</dd>
<dt class="autodoc"><b>Inputs</b></dt><dd>
<dl>
<dt><i>handle</i></dt>
<dd>display handle or <code>NULL</code> if no display is open</dd>
<dt><i>title</i></dt>
<dd>title string for the requester's window</dd>
<dt><i>flags</i></dt>
<dd>flags controlling the requester's appearance (see above)</dd>
<dt><i>result</i></dt>
<dd><code>STRPTR</code> pointer for storing the user's selection</dd>
<dt><i>tags</i></dt>
<dd>taglist for additional options (see above)</dl>
</dd>
<dt class="autodoc"><b>Results</b></dt><dd>
<dl>
<dt><i>error</i></dt>
<dd>error code or 0 for success</dd></dl>
</dd></dl>
<hr>
<font size=-2><a href="FileRequest_.html" target="_top">Show TOC</a></font>
</body>
</html>