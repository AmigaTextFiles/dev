<html>
<!-- generated from hollywood_sdk.meta by MetaDoc 1.13 (c) by Andreas Falkenhahn -->
<head>
<title>HandleEvents</title>
<meta name="author" content="Andreas Falkenhahn">
<meta name="generator" content="MetaDoc 1.13">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
<!--
body {font-family: sans-serif;}
ul.toc {list-style: none; margin-left: 20px; padding-left: 0px;}
dt.autodoc {font-variant: small-caps; font-size: larger; margin-top: 10px; margin-bottom: 10px; padding-left: 0.2em; padding-top: 0.2em; padding-bottom: 0.2em;
	background-color: #bae1ff; border-width: 1px; border-color: #3baaff; border-style: solid;}
dt.codelist {margin-bottom: 0.2em;}
h2.heading {background-color: #bae1ff; font-family: Arial; padding-top: 0.4em; padding-bottom: 0.4em;}
code {background-color: #f2f2f2; padding: 2px 4px; font-weight: bold;}
pre {background-color: #f2f2f2; border: 1px solid #ddd; padding: 0.3em;}
		
-->
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<dl>
<dt class="autodoc"><b>Name</b></dt><dd>
HandleEvents -- handle display events (V6.0)</dd>
<dt class="autodoc"><b>Synopsis</b></dt><dd>
<pre>
int error = HandleEvents(lua_State *L, ULONG flags, struct hwTagList *t);</pre>
</dd>
<dt class="autodoc"><b>Function</b></dt><dd>
This function must handle all display events that have come in. Hollywood will call this
function many times per second so that your application stays responsive. As this is
called so very often, you may want to implement a throttle here so that you only poll
for events 50 times per second or so. Otherwise, <code>HandleEvents()</code> has the potential to
slow down your script's execution significantly if polling for events is too expensive
and you do not implement a throttle. Be sure to benchmark raw performance of scripts
with your display adapter and compare them to the performance of Hollywood's inbuilt
display handler to see if your adapter needs optimizing.

<p>
The following flags may be passed in the second parameter:

<p>
<dl>
<dt class="codelist"><code>HWHEFLAGS_LINEHOOK:</code></dt>
<dd>
This flag is set if <code>HandleEvents()</code> has been called from the Lua line hook.

<p>
</dd>
<dt class="codelist"><code>HWHEFLAGS_MODAL:</code></dt>
<dd>
If this flag is set, then <code>HandleEvents()</code> has been called from a modal loop that Hollywood
is currently running. A modal loop is a temporary event loop set up by functions that
block the script execution until certain events happen, e.g. <code>WaitLeftMouse()</code> or <code>InKeyStr()</code>.

<p>
</dd>
<dt class="codelist"><code>HWHEFLAGS_CHECKEVENT:</code></dt>
<dd>
This flag is set if <code>HandleEvents()</code> has been called as a result of the script calling
Hollywood's <code>CheckEvent()</code> command.

<p>
</dd>
<dt class="codelist"><code>HWHEFLAGS_WAITEVENT:</code></dt>
<dd>
This flag is set if <code>HandleEvents()</code> has been called because <a href="WaitEvents.html">WaitEvents()</a>
has triggered.
</dd></dl>

<p>
Your <code>HandleEvents()</code> function should always call <a href="hw_MasterServer.html">hw_MasterServer()</a>
with the <code>HWMSFLAGS_DRAWVIDEOS</code> flag set so that Hollywood can update any videos that are
currently playing. If you don't do that, video playback won't work correctly.

<p>
The third parameter is a tag list which is currently always <code>NULL</code>. This might change
in the future, though.

<p>
<code>HandleEvents()</code> must return an error code or 0 for success. A special return value is
<code>ERR_USERABORT</code>. If your <code>HandleEvents()</code> returns <code>ERR_USERABORT</code>, Hollywood will quit.
Thus, it is suggested that you return <code>ERR_USERABORT</code> if the user has clicked your
display's close widget, pressed the escape key, etc. Note that you should not return
<code>ERR_USERABORT</code> in case the <code>HWDISPSATAG_USERCLOSE</code> attribute has been set to <code>True</code>
using <a href="SetDisplayAttributes.html">SetDisplayAttributes()</a>. See <a href="SetDisplayAttributes.html">SetDisplayAttributes</a> for details.

<p>
Please note that this function must handle events on all displays that have currently
been opened by <a href="OpenDisplay.html">OpenDisplay()</a>. Additionally, it could also happen
that no display is open at all and your <code>HandleEvents()</code> function is called. Be prepared to
deal with these cases.

<p>
All standard window events like sizing a window, moving a window, key presses and
mouse events, etc. should be forwarded to Hollywood using <a href="hw_PostEventEx.html">hw_PostEventEx()</a>
so that Hollywood is able to notify any handlers that might listen to these events.

<p>
</dd>
<dt class="autodoc"><b>Inputs</b></dt><dd>
<dl>
<dt><i>L</i></dt>
<dd>pointer to the <code>lua_State</code></dd>
<dt><i>flags</i></dt>
<dd>combination of flags (see above)</dd>
<dt><i>t</i></dt>
<dd>tag list containing additional parameters (see above)</dl>
</dd>
<dt class="autodoc"><b>Results</b></dt><dd>
<dl>
<dt><i>error</i></dt>
<dd>error code or 0 for success; returning <code>ERR_USERABORT</code> tells Hollywood to quit</dd></dl>
</dd></dl>
<hr>
<font size=-2><a href="HandleEvents_.html" target="_top">Show TOC</a></font>
</body>
</html>