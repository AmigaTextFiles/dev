<html>
<!-- generated from hollywood_sdk.meta by MetaDoc 1.13 (c) by Andreas Falkenhahn -->
<head>
<title>RegisterImageSaver</title>
<meta name="author" content="Andreas Falkenhahn">
<meta name="generator" content="MetaDoc 1.13">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
<!--
body {font-family: sans-serif;}
ul.toc {list-style: none; margin-left: 20px; padding-left: 0px;}
dt.autodoc {font-variant: small-caps; font-size: larger; margin-top: 10px; margin-bottom: 10px; padding-left: 0.2em; padding-top: 0.2em; padding-bottom: 0.2em;
	background-color: #bae1ff; border-width: 1px; border-color: #3baaff; border-style: solid;}
dt.codelist {margin-bottom: 0.2em;}
h2.heading {background-color: #bae1ff; font-family: Arial; padding-top: 0.4em; padding-bottom: 0.4em;}
code {background-color: #f2f2f2; padding: 2px 4px; font-weight: bold;}
pre {background-color: #f2f2f2; border: 1px solid #ddd; padding: 0.3em;}
		
-->
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<dl>
<dt class="autodoc"><b>Name</b></dt><dd>
RegisterImageSaver -- register a new image saver (V5.0)</dd>
<dt class="autodoc"><b>Synopsis</b></dt><dd>
<pre>
void RegisterImageSaver(struct SaveImageReg *reg)</pre>
</dd>
<dt class="autodoc"><b>Function</b></dt><dd>
Hollywood will call this function to get information about the image saver
your plugin wants to register. In addition, <code>RegisterImageSaver()</code> has to
tell Hollywood whether it wants to register another image saver. Hollywood
will pass a pointer to a <code>struct SaveImageReg</code> to this function.
This structure looks like this:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>struct SaveFormatReg
{
    ULONG CapsMask;     [out]
    ULONG FormatID;     [in/out]
    STRPTR FormatName;  [out]
};

struct SaveImageReg
{
    struct SaveFormatReg hdr;
};
</pre></td></tr></table><p>

Your implementation has to do the following with the individual structure
members:

<p>
<dl>
<dt class="codelist"><code>CapsMask:</code></dt>
<dd>
This must be set to a combination of flags that tell Hollywood about the
capabilities of the image saver that is to be registered. The following
flags are currently supported:

<p>
<dl>
<dt class="codelist"><code>HWSAVEIMGCAPS_ARGB:</code></dt>
<dd>
Your image saver supports source image data that is delivered as a 32-bit
ARGB pixel array.

<p>
</dd>
<dt class="codelist"><code>HWSAVEIMGCAPS_CLUT:</code></dt>
<dd>
Your image saver supports source image data that is delivered as 8-bit
CLUT pixels that are index values for a palette look-up table.

<p>
</dd>
<dt class="codelist"><code>HWSAVEIMGCAPS_ALPHA:</code></dt>
<dd>
Your image saver supports alpha channel saving. This is only supported if
you also set <code>HWSAVEIMGCAPS_ARGB</code>.

<p>
</dd>
<dt class="codelist"><code>HWSAVEIMGCAPS_MORE:</code></dt>
<dd>
If you set this flag, Hollywood will call <code>RegisterImageSaver()</code> again so that
you can register another saver. If you don't want to register another saver,
don't set this flag. (V5.3)
</dd></dl>

<p>
Note that <code>HWSAVEIMGCAPS_ARGB</code> and <code>HWSAVEIMGCAPS_CLUT</code>
are not mutually exclusive. You can set them both if the target image format
supports both true colour and palette-based pixel data storage.

<p>
</dd>
<dt class="codelist"><code>FormatID:</code></dt>
<dd>
This member must be set to a unique 32-bit value that should be assigned to
the constant that is registered for accessing this image saver from Hollywood
scripts. Values smaller than 32768 are reserved for internal Hollywood use. You may
use values larger than 32768 for your saver but if you want to publish your
plugin, you need to contact Airsoft Softwair to obtain a unique value that
is still vacant. This won't cost you anything; it's just needed to make sure
that plugin image savers don't use conflicting identifiers. Also, once you
have published your image saver plugin, the <code>FormatID</code> you have specified
must not be changed or you will break compatibility with applets or executables
that have been compiled with previous versions. If you are registering more
than one image saver using <code>HWSAVEIMGCAPS_MORE</code>, you can look at the
<code>FormatID</code> member to tell how many times Hollywood has already called
<code>RegisterImageSaver()</code> because <code>FormatID</code> will contain the identifier
of the last image saver you registered. If <code>FormatID</code> is 0, then this
is the first call to <code>RegisterImageSaver()</code>. Note that it is not recommended
to keep your own counter because Hollywood might call <code>RegisterImageSaver()</code>
multiple times, i.e. it might first loop over <code>RegisterImageSaver()</code> to determine
how many image savers there are in total and then it might loop over
<code>RegisterImageSaver()</code> again to actually register their names.

<p>
</dd>
<dt class="codelist"><code>FormatName:</code></dt>
<dd>
This must be set to a string that should form the second half of the constant
that Hollywood registers for your image saver. This string you specify here
must follow the naming restrictions for Hollywood constants, i.e. only
alphabetical characters, numbers and very few special characters like the
underscore character are allowed. The <code>#IMGFMT_</code> prefix must not be included
in the string you pass. Hollywood will add this automatically, i.e. if you
pass the string &quot;TESTFORMAT&quot; here, Hollywood will make your image saver
available under the constant <code>#IMGFMT_TESTFORMAT</code>.
</dd></dl>

<p>
</dd>
<dt class="autodoc"><b>Inputs</b></dt><dd>
<dl>
<dt><i>reg</i></dt>
<dd>pointer to a <code>struct SaveImageReg</code> to be filled out by your implementation</dd></dl>
</dd></dl>
<hr>
<font size=-2><a href="RegisterImageSaver_.html" target="_top">Show TOC</a></font>
</body>
</html>