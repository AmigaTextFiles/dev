<html>
<!-- generated from hollywood_sdk.meta by MetaDoc 1.13 (c) by Andreas Falkenhahn -->
<head>
<title>SaveImage</title>
<meta name="author" content="Andreas Falkenhahn">
<meta name="generator" content="MetaDoc 1.13">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
<!--
body {font-family: sans-serif;}
ul.toc {list-style: none; margin-left: 20px; padding-left: 0px;}
dt.autodoc {font-variant: small-caps; font-size: larger; margin-top: 10px; margin-bottom: 10px; padding-left: 0.2em; padding-top: 0.2em; padding-bottom: 0.2em;
	background-color: #bae1ff; border-width: 1px; border-color: #3baaff; border-style: solid;}
dt.codelist {margin-bottom: 0.2em;}
h2.heading {background-color: #bae1ff; font-family: Arial; padding-top: 0.4em; padding-bottom: 0.4em;}
code {background-color: #f2f2f2; padding: 2px 4px; font-weight: bold;}
pre {background-color: #f2f2f2; border: 1px solid #ddd; padding: 0.3em;}
		
-->
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<dl>
<dt class="autodoc"><b>Name</b></dt><dd>
SaveImage -- save image to disk (V5.0)</dd>
<dt class="autodoc"><b>Synopsis</b></dt><dd>
<pre>
int ok = SaveImage(STRPTR filename, struct SaveImageCtrl *ctrl);</pre>
</dd>
<dt class="autodoc"><b>Function</b></dt><dd>
This function must save the image provided by the pointer in the second parameter to
the filename specified in the first parameter. Hollywood passes a pointer to a
<code>struct SaveImageCtrl</code> to this function. This structure looks like this:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>struct SaveImageCtrl
{
    APTR Data;                      // [in]
    ULONG *Palette;                 // [in]
    int Width;                      // [in]
    int Height;                     // [in]
    int Modulo;                     // [in]
    int Format;                     // [in]
    int Quality;                    // [in]
    int Colors;                     // [in]
    ULONG TransIndex;               // [in]
    ULONG Flags;                    // [in]
    ULONG FormatID;                 // [in] -- V5.3
    STRPTR Adapter;                 // [in] -- V10.0
    struct hwUserTagList *UserTags; // [in] -- V10.0
};
</pre></td></tr></table><p>

In this structure Hollywood passes the following information to your <code>SaveImage()</code> function:

<p>
<dl>
<dt class="codelist"><code>Data:</code></dt>
<dd>
The pixel data to save to the file. The actual format of this data depends on the
<code>Format</code> member.

<p>
</dd>
<dt class="codelist"><code>Width:</code></dt>
<dd>
Width of the image in pixels.

<p>
</dd>
<dt class="codelist"><code>Height:</code></dt>
<dd>
Height of the image in pixels.

<p>
</dd>
<dt class="codelist"><code>Modulo:</code></dt>
<dd>
Number of bytes used by a single row of pixel data. This may be larger than the specified
width because there may be some padding involved.

<p>
</dd>
<dt class="codelist"><code>Format:</code></dt>
<dd>
This specifies the pixel format of the source data passed in <code>Data</code>. May be one
of the following constants:

<p>
<dl>
<dt class="codelist"><code>HWSAVEIMGFMT_ARGB:</code></dt>
<dd>
Data is a 32-bit array consisting of ARGB pixels.

<p>
</dd>
<dt class="codelist"><code>HWSAVEIMGFMT_CLUT:</code></dt>
<dd>
Data contains 8-bit indices into a color look-up table. This color look-up table is
passed in <code>Palette</code> below.
</dd></dl>

<p>
You will only have to handle those formats here that you have explicitly declared
as supported when Hollywood called your <a href="RegisterImageSaver.html">RegisterImageSaver()</a>
function.

<p>
</dd>
<dt class="codelist"><code>Quality:</code></dt>
<dd>
This contains a value between 0 and 100 indicating the desired quality for the output
file. Image formats that use lossy compression can use this member to determine compression
settings for the image. Image formats that don't use any compression or offer lossless
compression can ignore this member.

<p>
</dd>
<dt class="codelist"><code>Colors:</code></dt>
<dd>
This contains the number of colors in the color look-up table passed in the <code>Palette</code>
member. This member is only used if <code>Format</code> is <code>HWSAVEIMGFMT_CLUT</code>.

<p>
</dd>
<dt class="codelist"><code>Palette:</code></dt>
<dd>
Contains the look-up table that you need to convert the CLUT pixel values to RGB color
values. This table consists of as many 32-bit ARGB values as has been set in the <code>Colors</code>
member. Note that <code>Palette</code> is only used if <code>Format</code> is <code>HWSAVEIMGFMT_CLUT</code>.

<p>
</dd>
<dt class="codelist"><code>TransIndex:</code></dt>
<dd>
If <code>Format</code> is <code>HWSAVEIMGFMT_CLUT</code> this member specifies the index of
the color that should appear transparent in the image. The value specified here is only
valid if the <code>HWSAVEIMGFLAGS_TRANSINDEX</code> flag has been set (see below).

<p>
</dd>
<dt class="codelist"><code>Flags:</code></dt>
<dd>
Contains a combination of flags specifying further options:

<p>
<dl>
<dt class="codelist"><code>HWSAVEIMGFLAGS_ALPHA:</code></dt>
<dd>
Pixel data contains alpha channel transparency values.

<p>
</dd>
<dt class="codelist"><code>HWSAVEIMGFLAGS_TRANSINDEX:</code></dt>
<dd>
The <code>TransIndex</code> member contains the index of a palette entry that should be
made transparent in the output image.
</dd></dl>

<p>
</dd>
<dt class="codelist"><code>FormatID:</code></dt>
<dd>
This member contains the identifier of the image format the file should be saved in.
You only need to look at this member if your plugin supports more than one output
image format. But be careful, you are only allowed to look at this member if the
user is running at least Hollywood 5.3. Otherwise, you must not access this member
because older versions of Hollywood don't support it. (V5.3)

<p>
</dd>
<dt class="codelist"><code>Adapter:</code></dt>
<dd>
Starting with Hollywood 10.0 users can specify the file adapter that should be used
to save an image file. If this member is non-<code>NULL</code>, Hollywood wants your plugin to
use the file adapter specified in <code>Adapter</code> to save the image. This means that you
have to use <a href="hw_FOpenExt.html">hw_FOpenExt()</a> instead of <a href="hw_FOpen.html">hw_FOpen()</a>
to save the image. Make sure to check for Hollywood 10.0 before trying to access
this member because it isn't there in previous versions. See <a href="hw_FOpenExt.html">hw_FOpenExt</a> for details. (V10.0)

<p>
</dd>
<dt class="codelist"><code>UserTags:</code></dt>
<dd>
This member will be set to a list of user tags in case they were specified
in the Hollywood script. User tags are a way of passing additional information
from Hollywood scripts to plugin functions. Note that even if your plugin doesn't
support any user tags, you should still look for this tag and pass the user
tags to <a href="hw_FOpenExt.html">hw_FOpenExt</a> because the user tags passed in <code>UserTags</code> could
also be intended for another plugin, namely the file adapter plugin passed
in <code>Adapter</code>. See <a href="UserTags.html">User tags</a> for details. Make sure to check for Hollywood 10.0
before trying to access this member because it isn't there in previous versions.
(V10.0)
</dd></dl>

<p>
This function has to return <code>True</code> if the image has been successfully saved or <code>False</code>
in case of an error.

<p>
</dd>
<dt class="autodoc"><b>Inputs</b></dt><dd>
<dl>
<dt><i>filename</i></dt>
<dd>path to a destination file</dd>
<dt><i>ctrl</i></dt>
<dd>pointer to a <code>struct SaveImageCtrl</code> containing the image to be saved</dl>
</dd>
<dt class="autodoc"><b>Results</b></dt><dd>
<dl>
<dt><i>ok</i></dt>
<dd><code>True</code> or <code>False</code> indicating success or failure</dd></dl>
</dd></dl>
<hr>
<font size=-2><a href="SaveImage_.html" target="_top">Show TOC</a></font>
</body>
</html>