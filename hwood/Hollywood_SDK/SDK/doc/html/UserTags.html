<html>
<!-- generated from hollywood_sdk.meta by MetaDoc 1.13 (c) by Andreas Falkenhahn -->
<head>
<title>User tags</title>
<meta name="author" content="Andreas Falkenhahn">
<meta name="generator" content="MetaDoc 1.13">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
<!--
body {font-family: sans-serif;}
ul.toc {list-style: none; margin-left: 20px; padding-left: 0px;}
dt.autodoc {font-variant: small-caps; font-size: larger; margin-top: 10px; margin-bottom: 10px; padding-left: 0.2em; padding-top: 0.2em; padding-bottom: 0.2em;
	background-color: #bae1ff; border-width: 1px; border-color: #3baaff; border-style: solid;}
dt.codelist {margin-bottom: 0.2em;}
h2.heading {background-color: #bae1ff; font-family: Arial; padding-top: 0.4em; padding-bottom: 0.4em;}
code {background-color: #f2f2f2; padding: 2px 4px; font-weight: bold;}
pre {background-color: #f2f2f2; border: 1px solid #ddd; padding: 0.3em;}
		
-->
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<h2 class="heading">2.18 User tags</h2>

<p>
User tags are a way of passing additional information from Hollywood scripts to plugins. They
can be used to pass an unlimited amount of additional data to plugins directly from the
Hollywood script. For example, let's suppose there's a plugin that can load PDF pages as
images. Such a plugin would need two additional pieces of information to do its job, namely
the page to load and optionally a password in case the PDF is password-protected. Both pieces
of information could be passed to the plugin using user tags.

<p>
From the Hollywood script's point of view, user tags are simply passed in an optional
<code>UserTags</code> table accepted by many Hollywood functions, e.g. <code>LoadBrush()</code>. To pass the
optional page and password arguments to an image plugin, a Hollywood script could do the
following:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>LoadBrush(1, &quot;test.pdf&quot;, {UserTags = {Page = 5, Password = &quot;secret&quot;}})
</pre></td></tr></table><p>

All tags that the script passes in the <code>UserTags</code> table that is accepted by all commands that
support plugins are then forwarded to plugins in a <code>struct hwUserTagList</code> linked
list. For image plugins, the pointer to the first <code>struct hwUserTagList</code> node is passed
to your <a href="LoadImage.html">LoadImage()</a> implementation in the <code>struct LoadImageCtrl</code> argument.
Your <a href="LoadImage.html">LoadImage()</a> implementation can then examine all user tags that are in the list
by iterating through the individual list nodes. <code>struct hwUserTagList</code> looks like this:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>struct hwUserTagList
{
    struct hwUserTagList *Succ;
    STRPTR Name;
    STRPTR Str;
    double Val;
    int Length;
};
</pre></td></tr></table><p>

Here is a description of the structure members:

<p>
<dl>
<dt class="codelist"><code>Succ:</code></dt>
<dd>
Contains a pointer to the next node in the list or <code>NULL</code> for the tail node.

<p>
</dd>
<dt class="codelist"><code>Name:</code></dt>
<dd>
Name of the user tag.

<p>
</dd>
<dt class="codelist"><code>Str:</code></dt>
<dd>
If the user has set the tag to a string value, it is passed here. If
this is <code>NULL</code>, then you have to examine the <code>Val</code> member below.

<p>
</dd>
<dt class="codelist"><code>Val:</code></dt>
<dd>
If the user has set the tag to a numerical value, it is passed in
this structure member.

<p>
</dd>
<dt class="codelist"><code>Length:</code></dt>
<dd>
If the user has set the tag to a string value, this structure member
contains the string length in bytes (not including the terminating 0).
This structure member is useful when passing binary data through user
tags. In that case there can be <code>NULL</code> characters in the string so the
only way to find out the length of the data in <code>Str</code> is via this member.
</dd></dl>

<p>
Note that even if your plugin doesn't support any user tags, you should still
look for the user tag list and pass it on to functions like <a href="hw_FOpenExt.html">hw_FOpenExt</a>
because the user tags passed to your plugin could also be intended for another
plugin like the file adapter plugin that is used to handle the actual file I/O.
That's why it is important that plugins always forward the user tags list
to all functions that support user tags.

<p>
<hr>
<font size=-2><a href="UserTags_.html" target="_top">Show TOC</a></font>
</body>
</html>