<html>
<!-- generated from hollywood_sdk.meta by MetaDoc 1.13 (c) by Andreas Falkenhahn -->
<head>
<title>OpenDisplay</title>
<meta name="author" content="Andreas Falkenhahn">
<meta name="generator" content="MetaDoc 1.13">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
<!--
body {font-family: sans-serif;}
ul.toc {list-style: none; margin-left: 20px; padding-left: 0px;}
dt.autodoc {font-variant: small-caps; font-size: larger; margin-top: 10px; margin-bottom: 10px; padding-left: 0.2em; padding-top: 0.2em; padding-bottom: 0.2em;
	background-color: #bae1ff; border-width: 1px; border-color: #3baaff; border-style: solid;}
dt.codelist {margin-bottom: 0.2em;}
h2.heading {background-color: #bae1ff; font-family: Arial; padding-top: 0.4em; padding-bottom: 0.4em;}
code {background-color: #f2f2f2; padding: 2px 4px; font-weight: bold;}
pre {background-color: #f2f2f2; border: 1px solid #ddd; padding: 0.3em;}
		
-->
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<dl>
<dt class="autodoc"><b>Name</b></dt><dd>
OpenDisplay -- open a display (V6.0)</dd>
<dt class="autodoc"><b>Synopsis</b></dt><dd>
<pre>
APTR handle = OpenDisplay(STRPTR title, int x, int y, int width,
                  int height, ULONG flags, struct hwTagList *tags);</pre>
</dd>
<dt class="autodoc"><b>Function</b></dt><dd>
This function has to open a new display that is described by the parameters passed
to this function. Hollywood will pass the position of the display on screen as
well as its dimensions. All values are in pixels. Additionally, a flags bitfield
and a tag list is passed to this function.

<p>
Your implementation has to return a handle that is used to refer to this display
later or <code>NULL</code> in case an error has occurred.

<p>
The <code>flags</code> parameter can be a combination of the following individual flags:

<p>
<dl>
<dt class="codelist"><code>HWDISPFLAGS_BORDERLESS:</code></dt>
<dd>
Window should be opened without any border decoration.

<p>
</dd>
<dt class="codelist"><code>HWDISPFLAGS_SIZEABLE:</code></dt>
<dd>
Window should be resizeable. Note that this flag refers to user resizability
only. Even if this flag isn't set, Hollywoood might still ask your window to resize
by calling the <a href="SizeMoveDisplay.html">SizeMoveDisplay()</a> function.

<p>
</dd>
<dt class="codelist"><code>HWDISPFLAGS_FIXED:</code></dt>
<dd>
Window dragging should be disabled.

<p>
</dd>
<dt class="codelist"><code>HWDISPFLAGS_NOHIDE:</code></dt>
<dd>
Window should not have a widget for minimizing.

<p>
</dd>
<dt class="codelist"><code>HWDISPFLAGS_NOCLOSE:</code></dt>
<dd>
Window should not have a close widget.

<p>
</dd>
<dt class="codelist"><code>HWDISPFLAGS_AUTOSCALE:</code></dt>
<dd>
This flag is set if the user has enabled auto scaling for this window. If that
is the case, the window's physical dimensions won't necessarily match the
dimensions of its back buffer.

<p>
</dd>
<dt class="codelist"><code>HWDISPFLAGS_LAYERSCALE:</code></dt>
<dd>
This flag is set if the user has enabled layer scaling for this window. Layer
scaling uses a different technique than auto scaling which means that the
back buffer size will match the window's physical size in case layer scaling
is active.

<p>
</dd>
<dt class="codelist"><code>HWDISPFLAGS_LAYERS:</code></dt>
<dd>
This flag is set if layers are enabled for this window.

<p>
</dd>
<dt class="codelist"><code>HWDISPFLAGS_DOUBLEBUFFER:</code></dt>
<dd>
This flag is set if Hollywood will use double buffer drawing for this window.

<p>
</dd>
<dt class="codelist"><code>HWDISPFLAGS_HARDWAREDB:</code></dt>
<dd>
This flag is set if Hollywood is using a hardware double buffer provided by
the plugin for this window.

<p>
</dd>
<dt class="codelist"><code>HWDISPFLAGS_FULLSCREEN:</code></dt>
<dd>
If this flag is set, the display should be opened in full screen mode. You
may choose to ignore the <code>x</code> and <code>y</code> parameters in that case.

<p>
</dd>
<dt class="codelist"><code>HWDISPFLAGS_DISABLEBLANKER:</code></dt>
<dd>
If this flag is set, the screen blanker should be disabled while this display
is opened.

<p>
</dd>
<dt class="codelist"><code>HWDISPFLAGS_ALWAYSONTOP:</code></dt>
<dd>
If this flag is set, the display should always stay on top of other windows. (V7.1)

<p>
</dd>
<dt class="codelist"><code>HWDISPFLAGS_SCALEFACTOR:</code></dt>
<dd>
If this flag is set, the display has scale factor mode enabled. You can get
the scale factor by querying <code>HWDISPATTR_SCALEFACTOR</code> using <a href="hw_GetDisplayAttr.html">hw_GetDisplayAttr()</a>.
Note that an enabled scale factor mode doesn't necessarily mean that the scale
factor is different from 1.0. Scale factor mode can be enabled and the scale
factor can still be 1.0 in which case your display should behave as if no scale
factor mode was active. (V9.0)

<p>
</dd>
<dt class="codelist"><code>HWDISPFLAG_TRAPRMB:</code></dt>
<dd>
If this flag is set, the user has set the <code>TrapRMB</code> option to <code>True</code>. (V9.0)

<p>
</dd>
<dt class="codelist"><code>HWDISPFLAG_KEEPPROPORTIONS:</code></dt>
<dd>
If this flag is set, the user has set the <code>KeepProportions</code> option to <code>True</code>. (V9.0)
</dd></dl>

<p>
Additionally, Hollywood will pass a tag list to <code>OpenDisplay()</code>. This tag list
can contain the following tags:

<p>
<dl>
<dt class="codelist"><code>HWDISPTAG_BUFFERWIDTH:</code></dt>
<dd>
This tag is always provided and contains the pixel width of Hollywood's back
buffer for this display. Please note that this is not necessarily the same
as the window's physical dimensions. If autoscaling is active, back buffer
size and the window's physical dimensions can be different. It is suggested
that you allocate a pixel buffer of this size and first draw everything into
this back buffer. After that you refresh the display using the graphics you
have drawn into the back buffer. For optimized drawing you should implement a
custom double buffer using <code>HWPLUG_CAPS_DOUBLEBUFFER</code>. Custom double buffers
don't have to draw into the back buffer first because double buffer frames are
usually updated multiple times per second so there's no need to cache an
additional back buffer for refreshing the window when parts of it have to
be redrawn.

<p>
</dd>
<dt class="codelist"><code>HWDISPTAG_BUFFERHEIGHT:</code></dt>
<dd>
This tag is always provided and contains the pixel height of Hollywood's back
buffer for this display. See above for details.

<p>
</dd>
<dt class="codelist"><code>HWDISPTAG_OPTIMIZEDREFRESH:</code></dt>
<dd>
This tag is always provided and it is set to a pointer to a <code>ULONG</code>. Your
plugin can write <code>True</code> to this pointer if it wants Hollywood to enable
optimized refresh for this display. Optimized refresh should be enabled
on systems where it's more efficient to refresh the complete display instead
of several smaller parts. By default, Hollywood prefers to refresh just
the parts of the display that actually need refreshing. On some backends,
however, this is quite slow if several smaller parts have to be updated.
It is often faster to refresh the complete display on these systems. This
is especially true for backends that are double buffer based because
refreshing a single tile on double buffer based backends means doing a
complete buffer flip which doesn't look so nice and is quite slow. That's
why it is wise to enable this option on some systems. By default, optimized
refresh is disabled.

<p>
</dd>
<dt class="codelist"><code>HWDISPTAG_SINGLEREFRESHFX:</code></dt>
<dd>
This tag is always provided and it is set to a pointer to a <code>ULONG</code>. Your
plugin can write <code>True</code> to this pointer if it wants Hollywood to enable single
refresh transition effect drawing for this display. This option is related
to the <code>HWDISPTAG_OPTIMIZEDREFRESH</code> tag (see above). If you set the pointer
that you are passed here to <code>True</code>, Hollywood will draw one transition effect
frame in exactly one video frame. If it is set to <code>False</code> (which is also the
default), Hollywood might emit more than one video frame for a single
transition effect frame. This is especially so for transition effect frames
that consist of many small parts that need to be updated. If <code>HWDISPTAG_SINGLEREFRESHFX</code>
is not set to <code>True</code>, Hollywood will prefer to draw many small parts instead
of the complete frame all at once. On some systems, however, drawing many
small bits totally kills the performance. In that case you need to set this tag
to <code>True</code>. See above in <code>HWDISPTAG_OPTIMIZEDREFRESH</code> for additional information.

<p>
</dd>
<dt class="codelist"><code>HWDISPTAG_LUASTATE:</code></dt>
<dd>
This tag is always provided and contains a pointer to the <code>lua_State</code>.

<p>
</dd>
<dt class="codelist"><code>HWDISPTAG_MONITOR:</code></dt>
<dd>
This tag is always provided and specifies the monitor that this display
should be opened on. Monitors are counted from 0 which specifies the
primary monitor.

<p>
</dd>
<dt class="codelist"><code>HWDISPTAG_SCREENWIDTH:</code></dt>
<dd>
If <code>HWDISPFLAGS_FULLSCREEN</code> has been set, this tag contains the desired
pixel width for the full screen mode. This is not necessarily the same
as the display width since the user might explicitly choose a full
screen resolution that is larger than the display, e.g. an 800x600
screen mode for a 640x480 display.

<p>
</dd>
<dt class="codelist"><code>HWDISPTAG_SCREENHEIGHT:</code></dt>
<dd>
Contains the desired pixel screen height if <code>HWDISPFLAGS_FULLSCREEN</code>
has been set. See above for details.

<p>
</dd>
<dt class="codelist"><code>HWDISPTAG_SCREENDEPTH:</code></dt>
<dd>
Contains the desired screen depth if <code>HWDISPFLAGS_FULLSCREEN</code> has been
set. On most systems you may choose to ignore this since most modern
systems all operate in 32-bit true colour mode.

<p>
</dd>
<dt class="codelist"><code>HWDISPTAG_SCALEWIDTH:</code></dt>
<dd>
If <code>HWDISPFLAGS_AUTOSCALE</code> or <code>HWDISPFLAGS_LAYERSCALE</code> is active, this
tag contains the current scale width.

<p>
</dd>
<dt class="codelist"><code>HWDISPTAG_SCALEHEIGHT:</code></dt>
<dd>
If <code>HWDISPFLAGS_AUTOSCALE</code> or <code>HWDISPFLAGS_LAYERSCALE</code> is active, this
tag contains the current scale height.

<p>
</dd>
<dt class="codelist"><code>HWDISPTAG_SCALEMODE:</code></dt>
<dd>
If <code>HWDISPFLAGS_AUTOSCALE</code> or <code>HWDISPFLAGS_LAYERSCALE</code> is active, this
tag contains the current scale mode. Currently, only 0 and 1 are
defined here. 0 means hard scaling with no interpolation whereas 1
means anti-alias interpolated scaling.

<p>
</dd>
<dt class="codelist"><code>HWDISPTAG_DEPTH:</code></dt>
<dd>
Contains the desired pixel depth for the display. This is mostly
interesting in palette modes. (V9.0)

<p>
</dd>
<dt class="codelist"><code>HWDISPTAG_PALETTE:</code></dt>
<dd>
If the display is a palette mode display, the <code>pData</code> member of this
tag will be set to a <code>ULONG</code> array containing the display's palette.
The individual colors will be stored as RGB values in the palette array.
(V9.0)

<p>
</dd>
<dt class="codelist"><code>HWDISPTAG_PALETTEMODE:</code></dt>
<dd>
If the display is a palette mode display, the <code>pData</code> member of this
tag will be set to a pointer to an <code>int</code>. Your display adapter can
write the value <code>True</code> to this <code>int</code> to signal that it supports genuine
palette mode. A genuine palette mode is a screen mode which is palette-based
so that changing a single pen will automatically change all pixels that
use that pen. A genuine palette display allows Hollywood to use several
optimizations because screen pixels can be changed by just changing
color registers, i.e. without copying any actual pixel data. If you
enable genuine palette mode, you must also set <code>HWSDAFLAGS_PALETTE</code>
and one or both of <code>HWSDAFLAGS_PENDRAW</code> and <code>HWSDAFLAGS_SETPALETTE</code>
using <a href="hw_SetDisplayAdapter.html">hw_SetDisplayAdapter()</a>.
See <a href="hw_SetDisplayAdapter.html">hw_SetDisplayAdapter</a> for details. (V9.0)

<p>
</dd>
<dt class="codelist"><code>HWDISPTAG_MENU:</code></dt>
<dd>
If a menu bar should be attached to this display, Hollywood will
set the <code>pData</code> member of this tag to a <code>struct hwMenuTreeInfo</code>
pointer which contains all nodes and leaves of the menu bar.
See <a href="SetMenuBar.html">SetMenuBar</a> for a description of this structure.
Whenever the user selects a menu item, you need to post an <code>HWEVT_MENUITEM</code>
event to Hollywood's event queue. See <a href="hw_PostEvent.html">hw_PostEvent</a> for details.
Note that this tag will only ever be set if your display adapter
has signalled that it supports menus by setting the <code>HWSDAFLAGS_MENUADAPTER</code>
when calling <a href="hw_SetDisplayAdapter.html">hw_SetDisplayAdapter()</a>.
See <a href="hw_SetDisplayAdapter.html">hw_SetDisplayAdapter</a> for details. (V9.0)

<p>
</dd>
<dt class="codelist"><code>HWDISPTAG_XPOSITION:</code></dt>
<dd>
The <code>pData</code> member of this tag is set to a pointer to an <code>int</code> that
contains the display's x position. This is identical to the x position
passed to your <code>OpenDisplay()</code> implementation. However, if your implementation
decides to open the display at a position different to the requested
one, you should write the actual x position of your display to the <code>int</code>
pointer passed in the <code>pData</code> member of the tag so that Hollywood can
get to know the display's real x position. (V9.1)

<p>
</dd>
<dt class="codelist"><code>HWDISPTAG_YPOSITION:</code></dt>
<dd>
The <code>pData</code> member of this tag is set to a pointer to an <code>int</code> that
contains the display's y position. This is identical to the y position
passed to your <code>OpenDisplay()</code> implementation. However, if your implementation
decides to open the display at a position different to the requested
one, you should write the actual y position of your display to the <code>int</code>
pointer passed in the <code>pData</code> member of the tag so that Hollywood can
get to know the display's real y position. (V9.1)

<p>
</dd>
<dt class="codelist"><code>HWDISPTAG_FLAGS:</code></dt>
<dd>
The <code>pData</code> member of this tag is set to a pointer to a <code>ULONG</code> that
contains the display flags. This is identical to the display flags
passed to your <code>OpenDisplay()</code> implementation. However, if your implementation
decides to modify the requested display flags in any way (e.g. adding
or removing flags), you should write the actual display flags to the
<code>ULONG</code> pointer passed in the <code>pData</code> member of the tag so that Hollywood
can get to know the display's real flags. (V9.1)

<p>
</dd>
<dt class="codelist"><code>HWDISPTAG_USERTAGS:</code></dt>
<dd>
If this is set, <code>pData</code> will point to a <code>struct hwUserTagList</code> containing
a list of user tags passed by the Hollywood script. User tags are a way of
passing additional information from Hollywood scripts to plugin functions.
See <a href="UserTags.html">User tags</a> for details. (V10.0)
</dd></dl>

<p>
Please note that Hollywood supports multiple displays so <code>OpenDisplay()</code>
can be called several times. Hollywood also supports multiple full
screen displays if they are to appear on different monitors. Be prepared
to deal with these cases.

<p>
</dd>
<dt class="autodoc"><b>Inputs</b></dt><dd>
<dl>
<dt><i>title</i></dt>
<dd>caption string for the display's window border</dd>
<dt><i>x</i></dt>
<dd>desired x position of this display in pixels</dd>
<dt><i>y</i></dt>
<dd>desired y position of this display in pixels</dd>
<dt><i>width</i></dt>
<dd>desired width for this display in pixels</dd>
<dt><i>height</i></dt>
<dd>desired height for this display in pixels</dd>
<dt><i>flags</i></dt>
<dd>flags describing additional options (see above)</dd>
<dt><i>tags</i></dt>
<dd>tag list describing additional options (see above)</dl>
</dd>
<dt class="autodoc"><b>Results</b></dt><dd>
<dl>
<dt><i>handle</i></dt>
<dd>a handle to the newly allocated display or <code>NULL</code> in case of an error</dd></dl>
</dd></dl>
<hr>
<font size=-2><a href="OpenDisplay_.html" target="_top">Show TOC</a></font>
</body>
</html>