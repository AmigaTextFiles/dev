<html>
<!-- generated from hollywood_sdk.meta by MetaDoc 1.13 (c) by Andreas Falkenhahn -->
<head>
<title>MeasureText</title>
<meta name="author" content="Andreas Falkenhahn">
<meta name="generator" content="MetaDoc 1.13">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
<!--
body {font-family: sans-serif;}
ul.toc {list-style: none; margin-left: 20px; padding-left: 0px;}
dt.autodoc {font-variant: small-caps; font-size: larger; margin-top: 10px; margin-bottom: 10px; padding-left: 0.2em; padding-top: 0.2em; padding-bottom: 0.2em;
	background-color: #bae1ff; border-width: 1px; border-color: #3baaff; border-style: solid;}
dt.codelist {margin-bottom: 0.2em;}
h2.heading {background-color: #bae1ff; font-family: Arial; padding-top: 0.4em; padding-bottom: 0.4em;}
code {background-color: #f2f2f2; padding: 2px 4px; font-weight: bold;}
pre {background-color: #f2f2f2; border: 1px solid #ddd; padding: 0.3em;}
		
-->
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<dl>
<dt class="autodoc"><b>Name</b></dt><dd>
MeasureText -- measure text string (V10.0)</dd>
<dt class="autodoc"><b>Synopsis</b></dt><dd>
<pre>
int error = MeasureText(APTR handle, STRPTR str, int count, int encoding,
                struct hwTextExtent *te, struct hwTextLayout *tl, struct
                hwTagList *tags);</pre>
</dd>
<dt class="autodoc"><b>Function</b></dt><dd>
This function must return the dimensions of the text passed in <code>str</code> when rendered
with the font passed in <code>handle</code>. Note that <code>str</code> is not null-terminated. Instead, the
string's length in bytes is passed in the <code>count</code> parameter. The <code>encoding</code> parameter
specifies the character encoding of the string. This will be either <code>HWOS_ENCODING_UTF8</code>
or <code>HWOS_ENCODING_ISO8859_1</code>.

<p>
If the plugin hasn't set the <code>HWFONTFLAGS_LAYOUT</code> flag for the font in its <a href="LoadFont.html">LoadFont()</a>
implementation, the string passed in <code>str</code> will never contain any line breaks. Handling line
breaks is only necessary if your plugin has requested to do its own layouting by setting the
<code>HWFONTFLAGS_LAYOUT</code> flag in <a href="LoadFont.html">LoadFont()</a>.

<p>
Your <code>MeasureText()</code> implementation has to return the dimensions of the text in
the <code>te</code> parameter that points to a <code>struct hwTextExtent</code> which looks like
this:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>struct hwTextExtent
{
    int MinX;    [out]
    int MinY;    [out]
    int MaxX;    [out]
    int MaxY;    [out]
    int Width;   [out]
    int Height;  [out]
};
</pre></td></tr></table><p>

Your implementation of <code>MeasureText()</code> must set all the structure members to the correct
dimensions. Here is a description of the individual structure members:

<p>
<dl>
<dt class="codelist"><code>MinX:</code></dt>
<dd>
Set this to the offset to the left side of the bounding box. This can be negative
when characters extend to the previous character's area. This often
happens with character such as &quot;j&quot;.

<p>
</dd>
<dt class="codelist"><code>MinY:</code></dt>
<dd>
Set this to the offset from the baseline to the top of the bounding box. This
should always be negative.

<p>
</dd>
<dt class="codelist"><code>MaxX:</code></dt>
<dd>
Set this to the offset to the right side of the bounding box.

<p>
</dd>
<dt class="codelist"><code>MaxY:</code></dt>
<dd>
Set this to the offset from the baseline to the bottom of the bounding box.

<p>
</dd>
<dt class="codelist"><code>Width:</code></dt>
<dd>
Set this to the cursor advance that rendering the text will cause.

<p>
</dd>
<dt class="codelist"><code>Height:</code></dt>
<dd>
This should be set to the font height.
</dd></dl>

<p>
All values are in <code>struct hwTextExtent</code> are in pixels.

<p>
The <code>tl</code> parameter contains a pointer to a <code>struct hwTextLayout</code>. This
structure contains detailed information about the text layout. Most of the
structure members are only initialized for fonts that have requested to do
their own layouting by setting the <code>HWFONTFLAGS_LAYOUT</code> flag in <a href="LoadFont.html">LoadFont()</a>.
The only structure members that are supported for fonts that haven't set
<code>HWFONTFLAGS_LAYOUT</code> are <code>CharSpacing</code> and <code>Style</code> but the only style flag that
can be set for fonts that haven't set <code>HWFONTFLAGS_LAYOUT</code> is <code>HWFONTSTYLE_ANTIALIAS</code>.

<p>
<code>struct hwTextLayout</code> looks like this:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>struct hwTextLayout
{
    ULONG Color;     [in]
    ULONG Style;     [in]
    int Align;       [in]
    int WrapWidth;   [in]
    int LineSpacing; [in]
    int CharSpacing; [in]
    int Indent;      [in]
    int AdvanceX;    [out]
    int AdvanceY;    [out]
    int *Tabs;       [in]
    int TabCount;    [in]
};
</pre></td></tr></table><p>

Here is a description of the individual structure members:

<p>
<dl>
<dt class="codelist"><code>Color:</code></dt>
<dd>
The desired font color as an RGB value.

<p>
</dd>
<dt class="codelist"><code>Style:</code></dt>
<dd>
A bit combination of style flags. The following style flags are currently
defined:

<p>
<dl>
<dt class="codelist"><code>HWFONTSTYLE_ANTIALIAS:</code></dt>
<dd>
Use anti-aliasing.

<p>
</dd>
<dt class="codelist"><code>HWFONTSTYLE_BOLD:</code></dt>
<dd>
Bold text.

<p>
</dd>
<dt class="codelist"><code>HWFONTSTYLE_ITALIC:</code></dt>
<dd>
Italic text.

<p>
</dd>
<dt class="codelist"><code>HWFONTSTYLE_UNDERLINED:</code></dt>
<dd>
Underlined text.
</dd></dl>

<p>
</dd>
<dt class="codelist"><code>Align:</code></dt>
<dd>
The desired text alignment. This can be one of the following alignment
types:

<p>
<dl>
<dt class="codelist"><code>HWTEXTALIGN_LEFT:</code></dt>
<dd>
Left alignment.

<p>
</dd>
<dt class="codelist"><code>HWTEXTALIGN_RIGHT:</code></dt>
<dd>
Right alignment.

<p>
</dd>
<dt class="codelist"><code>HWTEXTALIGN_CENTER:</code></dt>
<dd>
Centered alignment.

<p>
</dd>
<dt class="codelist"><code>HWTEXTALIGN_JUSTIFIED:</code></dt>
<dd>
Justified alignment.
</dd></dl>

<p>
</dd>
<dt class="codelist"><code>WrapWidth:</code></dt>
<dd>
The maximum number of pixels per line. If a word exceeds this number of pixels,
it should be moved to the next line. If this is 0, then no wordwrapping should
take place.

<p>
</dd>
<dt class="codelist"><code>LineSpacing:</code></dt>
<dd>
Adjustment pixels between lines. This can be a positive or negative
value. A negative value moves lines closer together, whereas a positive value
increases the spacing between lines. A value of 0 means no custom line adjustment.

<p>
</dd>
<dt class="codelist"><code>CharSpacing:</code></dt>
<dd>
Adjustment pixels between characters. This can be a positive or negative
value. A negative value moves characters closer together, whereas a positive value
increases the spacing between characters. A value of 0 means no custom character
adjustment.

<p>
</dd>
<dt class="codelist"><code>Indent:</code></dt>
<dd>
The indentation in pixels for the very first line of text. If this is greater than 0,
text on the very first line should be indented by this number of pixels.

<p>
</dd>
<dt class="codelist"><code>AdvanceX:</code></dt>
<dd>
This must be set to the number of pixels the cursor should be advanced horizontally
after drawing the text.

<p>
</dd>
<dt class="codelist"><code>AdvanceY:</code></dt>
<dd>
This must be set to the number of pixels the cursor should be advanced vertically
after drawing the text.

<p>
</dd>
<dt class="codelist"><code>Tabs:</code></dt>
<dd>
An integer array containing a number of tab stops. Whenever a tab character is
encountered, your text layouter should advance to the next tab stop. The number of
tab stops in the <code>Tabs</code> array is indicated by the <code>TabCount</code> member (see below).
Note that this can also be <code>NULL</code>.

<p>
</dd>
<dt class="codelist"><code>TabCount:</code></dt>
<dd>
Number of tab stops in the <code>Tab</code> member (see above).
</dd></dl>

<p>
</dd>
<dt class="autodoc"><b>Inputs</b></dt><dd>
<dl>
<dt><i>handle</i></dt>
<dd>the font handle allocated by <a href="LoadFont.html">LoadFont()</a></dd>
<dt><i>str</i></dt>
<dd>text to measure (this is not null-terminated!)</dd>
<dt><i>count</i></dt>
<dd>length of the text to measure in bytes</dd>
<dt><i>encoding</i></dt>
<dd>character encoding of the text (see above)</dd>
<dt><i>te</i></dt>
<dd>pointer to a <code>struct hwTextExtent</code> that receives the text's dimensions</dd>
<dt><i>tl</i></dt>
<dd>pointer to a <code>struct hwTextLayout</code> that contains layout information</dd>
<dt><i>tags</i></dt>
<dd>tag list containing further options or <code>NULL</code></dl>
</dd>
<dt class="autodoc"><b>Results</b></dt><dd>
<dl>
<dt><i>error</i></dt>
<dd>error code or 0 for success</dd></dl>
</dd></dl>
<hr>
<font size=-2><a href="MeasureText_.html" target="_top">Show TOC</a></font>
</body>
</html>