<html>
<!-- generated from hollywood_sdk.meta by MetaDoc 1.13 (c) by Andreas Falkenhahn -->
<head>
<title>AdapterMainLoop</title>
<meta name="author" content="Andreas Falkenhahn">
<meta name="generator" content="MetaDoc 1.13">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
<!--
body {font-family: sans-serif;}
ul.toc {list-style: none; margin-left: 20px; padding-left: 0px;}
dt.autodoc {font-variant: small-caps; font-size: larger; margin-top: 10px; margin-bottom: 10px; padding-left: 0.2em; padding-top: 0.2em; padding-bottom: 0.2em;
	background-color: #bae1ff; border-width: 1px; border-color: #3baaff; border-style: solid;}
dt.codelist {margin-bottom: 0.2em;}
h2.heading {background-color: #bae1ff; font-family: Arial; padding-top: 0.4em; padding-bottom: 0.4em;}
code {background-color: #f2f2f2; padding: 2px 4px; font-weight: bold;}
pre {background-color: #f2f2f2; border: 1px solid #ddd; padding: 0.3em;}
		
-->
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<dl>
<dt class="autodoc"><b>Name</b></dt><dd>
AdapterMainLoop -- enter display adapter's main loop (V6.1, optional)</dd>
<dt class="autodoc"><b>Synopsis</b></dt><dd>
<pre>
int error = AdapterMainLoop(lua_State *L, int (*f)(APTR data), APTR data,
                  ULONG flags, struct hwTagList *tags);</pre>
</dd>
<dt class="autodoc"><b>Function</b></dt><dd>
This function is optional and must only be implemented if the <code>HWEXT_DISPLAYADAPTER_MAINLOOP</code>
extension bit has been set. See <a href="ExtensionOverview.html">Extension plugins</a> for details. In that case,
it must start the display adapter's main loop and after that run the function
that is passed in the second parameter forwarding the third parameter <code>data</code> to it.

<p>
Normally, Hollywood doesn't explicitly ask display adapters to start their main
loop since not all toolkits are main loop-based. Instead, by default, Hollywood repeatedly asks
display adapters to wait for events by calling the <a href="WaitEvents.html">WaitEvents()</a>
function and to handle events by calling the <a href="HandleEvents.html">HandleEvents()</a>
function. Some toolkits, however, don't fit into this model very well because their
API expects you to call a function which runs the main loop which in turn does all
the event waiting and handling. If the toolkit your display adapter uses employs
such a design, you can set the <code>HWEXT_DISPLAYADAPTER_MAINLOOP</code> extension bit to
make Hollywood ask your plugin to start its main loop and call the function which
hands back control to Hollywood after the main loop has been started.

<p>
Note that even if <code>HWEXT_DISPLAYADAPTER_MAINLOOP</code> has been set, Hollywood will still
call your display adapter's <a href="WaitEvents.html">WaitEvents()</a> and <a href="HandleEvents.html">HandleEvents()</a>
functions but you don't have to do anything in <a href="WaitEvents.html">WaitEvents()</a> then.
It can just be an empty function. However, in <a href="HandleEvents.html">HandleEvents()</a>
you still have to call into the master server and run timer callbacks. See <a href="HandleEvents.html">HandleEvents</a> for details.

<p>
Since this function starts the main loop of your display adapter, it is not expected
to return until Hollywood should shut down, i.e. until the user has closed all
displays managed by your display adapter.

<p>
</dd>
<dt class="autodoc"><b>Inputs</b></dt><dd>
<dl>
<dt><i>L</i></dt>
<dd>pointer to the <code>lua_State</code></dd>
<dt><i>f</i></dt>
<dd>function you have to call right after starting your main loop</dd>
<dt><i>data</i></dt>
<dd>data you have to pass to the function passed in the second parameter</dd>
<dt><i>flags</i></dt>
<dd>reserved for future use (currently 0)</dd>
<dt><i>tags</i></dt>
<dd>reserved for future use (currently <code>NULL</code>)</dl>
</dd>
<dt class="autodoc"><b>Results</b></dt><dd>
<dl>
<dt><i>error</i></dt>
<dd>error code or 0 for success</dd></dl>
</dd></dl>
<hr>
<font size=-2><a href="AdapterMainLoop_.html" target="_top">Show TOC</a></font>
</body>
</html>