<html>
<!-- generated from hollywood_sdk.meta by MetaDoc 1.13 (c) by Andreas Falkenhahn -->
<head>
<title>LoadFont</title>
<meta name="author" content="Andreas Falkenhahn">
<meta name="generator" content="MetaDoc 1.13">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
<!--
body {font-family: sans-serif;}
ul.toc {list-style: none; margin-left: 20px; padding-left: 0px;}
dt.autodoc {font-variant: small-caps; font-size: larger; margin-top: 10px; margin-bottom: 10px; padding-left: 0.2em; padding-top: 0.2em; padding-bottom: 0.2em;
	background-color: #bae1ff; border-width: 1px; border-color: #3baaff; border-style: solid;}
dt.codelist {margin-bottom: 0.2em;}
h2.heading {background-color: #bae1ff; font-family: Arial; padding-top: 0.4em; padding-bottom: 0.4em;}
code {background-color: #f2f2f2; padding: 2px 4px; font-weight: bold;}
pre {background-color: #f2f2f2; border: 1px solid #ddd; padding: 0.3em;}
		
-->
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<dl>
<dt class="autodoc"><b>Name</b></dt><dd>
LoadFont -- load font (V10.0)</dd>
<dt class="autodoc"><b>Synopsis</b></dt><dd>
<pre>
APTR handle = LoadFont(STRPTR name, int size, struct hwLoadFontCtrl *lf,
                  struct hwTagList *tags);</pre>
</dd>
<dt class="autodoc"><b>Function</b></dt><dd>
This function is called whenever Hollywood loads a font. The name of the font
is passed in <code>name</code> and the size in <code>size</code>. Your plugin needs to check if the
specified font is in a format that the plugin wants to handle, and, if it is,
return a handle to the font back to Hollywood. Otherwise it has to return <code>NULL</code>.
The handle returned by <code>LoadFont()</code> is an opaque datatype that only your plugin
knows about. Hollywood will pass this handle to all your font plugin functions.

<p>
<code>LoadFont()</code> is also passed a pointer to a <code>struct hwLoadFontCtrl</code> in
the third parameter. This structure is used to pass some additional arguments
to your plugin and your plugin can also pass some information back to
Hollywood using this structure pointer. <code>struct hwLoadFontCtrl</code> looks
like this:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>struct hwLoadFontCtrl
{
    STRPTR Name;                    [out]
    STRPTR Adapter;                 [in]
    ULONG *Palette;                 [out]
    ULONG TransPen;                 [out]
    ULONG Flags;                    [in/out]
    int Depth;                      [out]
    int Height;                     [out]
    int Baseline;                   [out]
    struct hwUserTagList *UserTags; [in]
};
</pre></td></tr></table><p>

Here's an explanation of the individual structure members:

<p>
<dl>
<dt class="codelist"><code>Name:</code></dt>
<dd>
This can be set to a string that contains the name of the font. The string
pointer must remain valid until <a href="FreeFont.html">FreeFont()</a> is called.

<p>
</dd>
<dt class="codelist"><code>Adapter:</code></dt>
<dd>
Users can specify the file adapter that should be used to open certain files. If
this member is non-<code>NULL</code>, Hollywood wants your plugin to use the file adapter
specified in <code>Adapter</code> to open the file. This means that you have to use
<a href="hw_FOpenExt.html">hw_FOpenExt()</a> instead of <a href="hw_FOpen.html">hw_FOpen()</a>
to open the file. See <a href="hw_FOpenExt.html">hw_FOpenExt</a> for details.

<p>
</dd>
<dt class="codelist"><code>Palette:</code></dt>
<dd>
If the font is a palette-based color font, you need to set this member to a pointer
to a palette, stored as a <code>ULONG</code> array of 256 RGB colors. Note that the <code>ULONG</code> array
must always have 256 entries, even if the font's bit depth is less than 8. Initialize
unused palette entries to 0.

<p>
</dd>
<dt class="codelist"><code>TransPen:</code></dt>
<dd>
If the font is a palette-based color font and uses a transparent pen, set this
structure member to the index of the pen that should appear transparent. Pen
indices start from 0. By default, pen 0 will appear transparent. If you want to
have no transparency, set this member to <code>HWPEN_NONE</code>.

<p>
</dd>
<dt class="codelist"><code>Flags:</code></dt>
<dd>
This field contains a combination of bit flags. Some can be set by Hollywood
before it calls <code>LoadFont()</code> and some flags can be set by your plugin to pass
information back to Hollywood. The following flags are currently defined:

<p>
<dl>
<dt class="codelist"><code>HWFONTFLAGS_VECTOR:</code></dt>
<dd>
Set this flag if the font you have opened is a vector font. This means that
you must implement <a href="SetFontScale.html">SetFontScale()</a> so that it applies a scaling factor
when Hollywood asks for it. If you also set <code>HWFONTFLAGS_LAYOUT</code> (see below),
you don't have to implement <a href="SetFontScale.html">SetFontScale()</a> but in that case your
<a href="RenderText.html">RenderText()</a> implementation must be able to apply a 2D transformation
matrix to the text before drawing.

<p>
</dd>
<dt class="codelist"><code>HWFONTFLAGS_USEPOINTS:</code></dt>
<dd>
Hollywood will set this flag if the size passed to <code>LoadFont()</code> is in points
instead of pixels. Your implementation must look for this flag and act
accordingly.

<p>
</dd>
<dt class="codelist"><code>HWFONTFLAGS_ANTIALIAS:</code></dt>
<dd>
Set this flag if the font supports anti-aliasing.

<p>
</dd>
<dt class="codelist"><code>HWFONTFLAGS_NOFILE:</code></dt>
<dd>
Set this flag if the font passed to your <code>LoadFont()</code> implementation in the <code>name</code>
parameter isn't a file. This is important to know for Hollywood's linker. If
<code>HWFONTFLAGS_NOFILE</code> isn't set, the linker will try to link the font when
compiling applets or executables. This must be prevented for fonts that do
not directly exist as files. E.g. if your <code>LoadFont()</code> function is passed &quot;Arial&quot;
in <code>name</code> and you don't set <code>HWFONTFLAGS_NOFILE</code>, Hollywood's linker will try
to link a file named &quot;Arial&quot; which will of course fail.

<p>
</dd>
<dt class="codelist"><code>HWFONTFLAGS_LAYOUT:</code></dt>
<dd>
Set this flag if your plugin wants to take over font layouting completely.
By default, Hollywood's font layouter is used which means that Hollywood will
take care of handling word-wrapping, kerning, justification, alignment, text
formatting codes and so on. This means that your plugin just needs to deliver
the glyph extents and bitmaps and Hollywood will do the rest. If your plugin
wants to its own layouting, though, you can set the <code>HWFONTFLAGS_LAYOUT</code> flag.
In that case, Hollywood's layouter won't be used at all for this font but
your plugin can do its own layouting.
</dd></dl>

<p>
</dd>
<dt class="codelist"><code>Depth:</code></dt>
<dd>
This member must be set to the color depth of the font. Set this to 1 for
monochrome fonts, to 8 for fonts that support anti-aliasing (i.e. 256 levels
of gray) or to 32 for color fonts with alpha transparency. If the <code>Palette</code>
member is set as well (see above), <code>Depth</code> must be a value between 1 and 8.
Note that if you set this to 8 with <code>Palette</code> set to <code>NULL</code> to indicate that the
font supports anti-aliasing your <a href="RenderText.html">RenderText()</a> implementation must
also be able to draw to a 1-bit monochrome target. In other words: Fonts
that support anti-aliasing must also support non-anti-aliased drawing.

<p>
</dd>
<dt class="codelist"><code>Height:</code></dt>
<dd>
Set this to the font height in pixels.

<p>
</dd>
<dt class="codelist"><code>Baseline:</code></dt>
<dd>
Set this to the baseline of the font. Hollywood needs to know the font's
baseline to correctly position font styles like underlining etc.

<p>
</dd>
<dt class="codelist"><code>UserTags:</code></dt>
<dd>
This member will be set to a list of user tags in case they were specified
in the Hollywood script. User tags are a way of passing additional information
from Hollywood scripts to plugin functions. Note that even if your plugin doesn't
support any user tags, you should still look for this tag and pass the user
tags to <a href="hw_FOpenExt.html">hw_FOpenExt</a> because the user tags passed in <code>UserTags</code> could
also be intended for another plugin, namely the file adapter plugin passed
in <code>Adapter</code>. See <a href="UserTags.html">User tags</a> for details.
</dd></dl>

<p>
Please note that you should not use ANSI C functions like <code>fopen()</code> to
open the file that is passed to this function because the filename that is passed
to this function can also be a specially formatted filename specification that
Hollywood uses to load files that have been linked to applets or executables. In
order to be able to load these files correctly, you have to use special IO functions
provided by Hollywood. See <a href="FileIO.html">File IO information</a> for details.

<p>
</dd>
<dt class="autodoc"><b>Inputs</b></dt><dd>
<dl>
<dt><i>name</i></dt>
<dd>name of the font to open; this isn't necessarily a file</dd>
<dt><i>size</i></dt>
<dd>desired font size</dd>
<dt><i>lf</i></dt>
<dd>pointer to a <code>struct LoadFontCtrl</code> that is used to exchange
further information</dd>
<dt><i>tags</i></dt>
<dd>tag list containing further options or <code>NULL</code></dl>
</dd>
<dt class="autodoc"><b>Results</b></dt><dd>
<dl>
<dt><i>handle</i></dt>
<dd>a handle that identifies this font or <code>NULL</code> if the plugin doesn't
want to handle this font</dd></dl>
</dd></dl>
<hr>
<font size=-2><a href="LoadFont_.html" target="_top">Show TOC</a></font>
</body>
</html>