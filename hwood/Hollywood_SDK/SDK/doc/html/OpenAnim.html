<html>
<!-- generated from hollywood_sdk.meta by MetaDoc 1.13 (c) by Andreas Falkenhahn -->
<head>
<title>OpenAnim</title>
<meta name="author" content="Andreas Falkenhahn">
<meta name="generator" content="MetaDoc 1.13">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
<!--
body {font-family: sans-serif;}
ul.toc {list-style: none; margin-left: 20px; padding-left: 0px;}
dt.autodoc {font-variant: small-caps; font-size: larger; margin-top: 10px; margin-bottom: 10px; padding-left: 0.2em; padding-top: 0.2em; padding-bottom: 0.2em;
	background-color: #bae1ff; border-width: 1px; border-color: #3baaff; border-style: solid;}
dt.codelist {margin-bottom: 0.2em;}
h2.heading {background-color: #bae1ff; font-family: Arial; padding-top: 0.4em; padding-bottom: 0.4em;}
code {background-color: #f2f2f2; padding: 2px 4px; font-weight: bold;}
pre {background-color: #f2f2f2; border: 1px solid #ddd; padding: 0.3em;}
		
-->
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<dl>
<dt class="autodoc"><b>Name</b></dt><dd>
OpenAnim -- open an animation file (V5.0)</dd>
<dt class="autodoc"><b>Synopsis</b></dt><dd>
<pre>
APTR handle = OpenAnim(STRPTR filename, struct LoadAnimCtrl *ctrl);</pre>
</dd>
<dt class="autodoc"><b>Function</b></dt><dd>
This function has to open the specified filename, check if it is in an animation
format that the plugin wants to handle, and, if it is, return a handle to the animation
back to Hollywood. Otherwise it has to return <code>NULL</code>. The handle returned by <code>OpenAnim()</code> is
an opaque datatype that only your plugin knows about. Hollywood will simply pass
this handle back to your <a href="LoadFrame.html">LoadFrame()</a> function when it wants to
have the raw pixel data of a single frame.

<p>
This function also has to provide certain information about the animation it
has just loaded. This information has to be written to the <code>struct LoadAnimCtrl</code>
that is passed in the second parameter. This structure looks like this:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>struct LoadAnimCtrl
{
    int Width;                      // [out]
    int Height;                     // [out]
    int LineWidth;                  // [out]
    int NumFrames;                  // [out]
    int AlphaChannel;               // [out]
    int ForceAlphaChannel;          // [out]
    STRPTR Adapter;                 // [in]     -- V6.0
    ULONG Flags;                    // [in]     -- V6.0
    ULONG *Palette;                 // [unused] -- V9.0
    ULONG TransPen;                 // [unused] -- V9.0
    int Depth;                      // [unused] -- V9.0
    int Type;                       // [out]    -- V9.0
    struct hwUserTagList *UserTags; // [in]     -- V10.0
};
</pre></td></tr></table><p>

<b>Be careful when accessing above structure members: LoadAnimCtrl has seen several
revisions in Hollywood's history. Before accessing members that haven't been there
in all Hollywood versions you must make sure that your plugin has been opened
by a Hollywood version that has those members or you will access unallocated memory!</b>

<p>
The following information has to be written to the <code>struct LoadAnimCtrl</code> pointer
by <code>OpenAnim()</code>:

<p>
<dl>
<dt class="codelist"><code>NumFrames:</code></dt>
<dd>
Must be set to the number of frames in this animation.

<p>
</dd>
<dt class="codelist"><code>Width:</code></dt>
<dd>
Must be set to the animation width in pixels. Note that Hollywood only supports
animations which use the same width for every frame.

<p>
</dd>
<dt class="codelist"><code>Height:</code></dt>
<dd>
Must be set to the animation height in pixels. Note that Hollywood only supports
animations which use the same height for every frame.

<p>
</dd>
<dt class="codelist"><code>AlphaChannel:</code></dt>
<dd>
Must be set to <code>True</code> or <code>False</code>, depending on whether or not this animation uses
frames that have an alpha channel.

<p>
</dd>
<dt class="codelist"><code>ForceAlphaChannel:</code></dt>
<dd>
If this is set to <code>True</code>, Hollywood will automatically create an alpha channel for
all objects that load this animation. For example, if the user calls <code>OpenAnim()</code>
on your animation but does not set the <code>LoadAlpha</code> tag to <code>True</code>, the animation will still
get an alpha channel if you set <code>ForceAlphaChannel</code> to <code>True</code>. Note that this functionality
was broken before Hollywood 6.0.

<p>
</dd>
<dt class="codelist"><code>Adapter:</code></dt>
<dd>
Starting with Hollywood 6.0 users can specify the file adapter that should be used
to open certain files. If this member is non-<code>NULL</code>, Hollywood wants your plugin to
use the file adapter specified in <code>Adapter</code> to open the animation. This means that you
have to use <a href="hw_FOpenExt.html">hw_FOpenExt()</a> instead of <a href="hw_FOpen.html">hw_FOpen()</a>
to open the animation. Make sure to check for Hollywood 6.0 before trying to access
this member because it isn't there in previous versions. See <a href="hw_FOpenExt.html">hw_FOpenExt</a> for details. (V6.0)

<p>
</dd>
<dt class="codelist"><code>Flags:</code></dt>
<dd>
The following flags may be set by Hollywood:

<p>
<dl>
<dt class="codelist"><code>HWANMFLAGS_TRANSPARENCY:</code></dt>
<dd>
This flag will be set whenever the user sets the <code>LoadTransparency</code> tag to <code>True</code>. You
may then choose to write a frame's transparency information to its alpha channel and
set the <code>ForceAlphaChannel</code> member to <code>True</code>. See above for more information. (V6.0)

<p>
</dd>
<dt class="codelist"><code>HWANMFLAGS_LOADPALETTE:</code></dt>
<dd>
This flag will be set whenever the user sets the <code>LoadPalette</code> tag to <code>True</code>. If this
flag is set, your implementation of <code>OpenAnim()</code> should fail in case the anim does
not have a palette. If it has a palette, you have to return that palette when
Hollywood calls your <a href="LoadFrame.html">LoadFrame()</a> implementation. Note that
palette anims must always use <code>HWANIMTYPE_RASTER</code>. They may not register as vector
anims. (V9.0)
</dd></dl>

<p>
Make sure to check for Hollywood 6.0 before trying to access
this member because it isn't there in previous versions. (V6.0)

<p>
</dd>
<dt class="codelist"><code>Type:</code></dt>
<dd>
If the <code>HWEXT_ANIM_VECTOR</code> extension bit has been set, <code>Type</code> must be set to the
anim type. This may be either <code>HWANIMTYPE_RASTER</code> or <code>HWANIMTYPE_VECTOR</code>.
If you set this to <code>HWANIMTYPE_VECTOR</code>, Hollywood will call your <a href="TransformFrame.html">TransformFrame()</a>
function whenever it needs to transform a frame. This allows you to do lossless
transformation of the vector frame. For anim frames of type <code>HWANIMTYPE_RASTER</code>,
<a href="TransformFrame.html">TransformFrame()</a> will never be called. Instead, Hollywood does
all transformations itself. (V9.0)

<p>
</dd>
<dt class="codelist"><code>UserTags:</code></dt>
<dd>
This member will be set to a list of user tags in case they were specified
in the Hollywood script. User tags are a way of passing additional information
from Hollywood scripts to plugin functions. Note that even if your plugin doesn't
support any user tags, you should still look for this tag and pass the user
tags to <a href="hw_FOpenExt.html">hw_FOpenExt</a> because the user tags passed in <code>UserTags</code> could
also be intended for another plugin, namely the file adapter plugin passed
in <code>Adapter</code>. See <a href="UserTags.html">User tags</a> for details. Make sure to check for Hollywood 10.0
before trying to access this member because it isn't there in previous versions.
(V10.0)
</dd></dl>

<p>
Please note that you should not use ANSI C functions like <code>fopen()</code> to
open the file that is passed to this function because the filename that is passed
to this function can also be a specially formatted filename specification that
Hollywood uses to load files that have been linked to applets or executables. In
order to be able to load these files correctly, you have to use special IO functions
provided by Hollywood. See <a href="FileIO.html">File IO information</a> for details.

<p>
</dd>
<dt class="autodoc"><b>Inputs</b></dt><dd>
<dl>
<dt><i>filename</i></dt>
<dd>filename to open</dd>
<dt><i>ctrl</i></dt>
<dd>pointer to a <code>struct LoadAnimCtrl</code> for storing information
about the animation</dl>
</dd>
<dt class="autodoc"><b>Results</b></dt><dd>
<dl>
<dt><i>handle</i></dt>
<dd>a handle that identifies this animation or <code>NULL</code> if plugin doesn't
want to handle this animation</dd></dl>
</dd></dl>
<hr>
<font size=-2><a href="OpenAnim_.html" target="_top">Show TOC</a></font>
</body>
</html>