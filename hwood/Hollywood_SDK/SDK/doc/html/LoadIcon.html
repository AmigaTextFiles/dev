<html>
<!-- generated from hollywood_sdk.meta by MetaDoc 1.13 (c) by Andreas Falkenhahn -->
<head>
<title>LoadIcon</title>
<meta name="author" content="Andreas Falkenhahn">
<meta name="generator" content="MetaDoc 1.13">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
<!--
body {font-family: sans-serif;}
ul.toc {list-style: none; margin-left: 20px; padding-left: 0px;}
dt.autodoc {font-variant: small-caps; font-size: larger; margin-top: 10px; margin-bottom: 10px; padding-left: 0.2em; padding-top: 0.2em; padding-bottom: 0.2em;
	background-color: #bae1ff; border-width: 1px; border-color: #3baaff; border-style: solid;}
dt.codelist {margin-bottom: 0.2em;}
h2.heading {background-color: #bae1ff; font-family: Arial; padding-top: 0.4em; padding-bottom: 0.4em;}
code {background-color: #f2f2f2; padding: 2px 4px; font-weight: bold;}
pre {background-color: #f2f2f2; border: 1px solid #ddd; padding: 0.3em;}
		
-->
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<dl>
<dt class="autodoc"><b>Name</b></dt><dd>
LoadIcon -- load icon into memory (V9.0)</dd>
<dt class="autodoc"><b>Synopsis</b></dt><dd>
<pre>
APTR handle = LoadIcon(STRPTR filename, struct hwTagList *tags);</pre>
</dd>
<dt class="autodoc"><b>Function</b></dt><dd>
This function has to open the specified filename, check if it is in a format that
the plugin wants to handle, and, if it is, return a handle to the icon back to
Hollywood. Otherwise it has to return <code>NULL</code>. The handle returned by <code>LoadIcon()</code> is
an opaque datatype that only your plugin knows about. Hollywood will simply pass
this handle back to your <a href="GetIconImages.html">GetIconImages()</a> function when it wants to
get the individual images in your icon.

<p>
Hollywood may also pass a tag list to your <code>LoadIcon()</code> implementation. This
list may contain the following tags:

<p>
<dl>
<dt class="codelist"><code>HWLDICONTAG_ADAPTER:</code></dt>
<dd>
If this tag is specified, Hollywood wants your plugin to use the file adapter specified
by the string stored in the <code>pData</code> member to open the icon. This means that you
have to use <a href="hw_FOpenExt.html">hw_FOpenExt()</a> instead of <a href="hw_FOpen.html">hw_FOpen()</a>
to open the icon file because the former doesn't support file adapters. See <a href="hw_FOpenExt.html">hw_FOpenExt</a> for details.

<p>
</dd>
<dt class="codelist"><code>HWLDICONTAG_AMIGAEXT:</code></dt>
<dd>
If this tag is set, <code>pData</code> points to a <code>struct hwIconAmigaExt</code> that your plugin
can initialize with metadata obtained from the icon. This is for compatibility with
Amiga icons which contain metadata in addition to the image data. <code>struct hwIconAmigaExt</code>
looks like this:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>struct hwIconAmigaExt
{
    int Type;
    int ViewMode;
    int IconX;
    int IconY;
    int DrawerX;
    int DrawerY;
    int DrawerWidth;
    int DrawerHeight;
    int StackSize;
    STRPTR DefaultTool;
    STRPTR *ToolTypes;
    ULONG Flags;
};
</pre></td></tr></table><p>

Here's an explanation of the individual structure members:

<p>
<dl>
<dt class="codelist"><code>Type:</code></dt>
<dd>
This must be set to the icon's type. This can be one of the following predefined
constants:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>HWAMIGAICON_NONE
HWAMIGAICON_DISK
HWAMIGAICON_DRAWER
HWAMIGAICON_TOOL
HWAMIGAICON_PROJECT
HWAMIGAICON_GARBAGE
HWAMIGAICON_DEVICE
HWAMIGAICON_KICKSTART
</pre></td></tr></table><p>

</dd>
<dt class="codelist"><code>ViewMode:</code></dt>
<dd>
This must be set to the icon's view mode. This can be one of the following
predefined constants:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>HWAMIGAICONMODE_NONE
HWAMIGAICONMODE_ICONS
HWAMIGAICONMODE_NAME
HWAMIGAICONMODE_DATE
HWAMIGAICONMODE_SIZE
HWAMIGAICONMODE_TYPE
</pre></td></tr></table><p>

</dd>
<dt class="codelist"><code>IconX:</code></dt>
<dd>
The icon's x position on Workbench screen.

<p>
</dd>
<dt class="codelist"><code>IconY:</code></dt>
<dd>
The icon's y position on Workbench screen.

<p>
</dd>
<dt class="codelist"><code>DrawerX:</code></dt>
<dd>
In case <code>Type</code> is set to a container type like <code>HWAMIGAICON_DRAWER</code>,
set this to the x position of the new window that will be opened
when double-clicking the icon.

<p>
</dd>
<dt class="codelist"><code>DrawerY:</code></dt>
<dd>
In case <code>Type</code> is set to a container type like <code>HWAMIGAICON_DRAWER</code>,
set this to the y position of the new window that will be opened
when double-clicking the icon.

<p>
</dd>
<dt class="codelist"><code>DrawerWidth:</code></dt>
<dd>
In case <code>Type</code> is set to a container type like <code>HWAMIGAICON_DRAWER</code>,
set this to the width of the new window that will be opened when
double-clicking the icon.

<p>
</dd>
<dt class="codelist"><code>DrawerHeight:</code></dt>
<dd>
In case <code>Type</code> is set to a container type like <code>HWAMIGAICON_DRAWER</code>,
set this to the height of the new window that will be opened when
double-clicking the icon.

<p>
</dd>
<dt class="codelist"><code>StackSize:</code></dt>
<dd>
In case <code>Type</code> is set to <code>HWAMIGAICON_TOOL</code> or <code>HWAMIGAICON_PROJECT</code>,
the desired stack size for the program to be launched.

<p>
</dd>
<dt class="codelist"><code>DefaultTool:</code></dt>
<dd>
In case <code>Type</code> is set to <code>HWAMIGAICON_PROJECT</code>, this must be set to
a null-terminated string containing name (and optionally path) of
the program to open the file with.

<p>
</dd>
<dt class="codelist"><code>ToolTypes:</code></dt>
<dd>
If the icon has tooltypes, store them in this field. If set, this
must be an array of <code>STRPTR</code>, each array item containing a single tooltype
stored as a null-terminated string. The array you pass here must be terminated
by a <code>NULL</code> entry which must be the last one.

<p>
</dd>
<dt class="codelist"><code>Flags:</code></dt>
<dd>
This structure member may be set to a combination of the following
flags:

<p>
<dl>
<dt class="codelist"><code>HWAMIGAICONFLAGS_VIEWALL:</code></dt>
<dd>
If this is set and <code>Type</code> is a container type like <code>HWAMIGAICON_DRAWER</code>, all
files will be visible, not only those that have an icon.
</dd></dl>
</dd></dl>

<p>
</dd>
<dt class="codelist"><code>HWLDICONTAG_USERTAGS:</code></dt>
<dd>
If this is set, <code>pData</code> will point to a <code>struct hwUserTagList</code> containing
a list of user tags passed by the Hollywood script. User tags are a way of passing additional information
from Hollywood scripts to plugin functions. Note that even if your plugin doesn't
support any user tags, you should still look for this tag and pass the user
tags to <a href="hw_FOpenExt.html">hw_FOpenExt</a> because the user tags passed in <code>UserTags</code> could
also be intended for another plugin, namely the file adapter plugin passed
in <code>Adapter</code>. See <a href="UserTags.html">User tags</a> for details. (V10.0)
</dd></dl>

<p>
Please note that you should not use ANSI C functions like <code>fopen()</code> to
open the file that is passed to this function because the filename that is passed
to this function can also be a specially formatted filename specification that
Hollywood uses to load files that have been linked to applets or executables. In
order to be able to load these files correctly, you have to use special IO functions
provided by Hollywood. See <a href="FileIO.html">File IO information</a> for details.

<p>
</dd>
<dt class="autodoc"><b>Inputs</b></dt><dd>
<dl>
<dt><i>filename</i></dt>
<dd>filename to open</dd>
<dt><i>tags</i></dt>
<dd>tag list containing further options or <code>NULL</code></dl>
</dd>
<dt class="autodoc"><b>Results</b></dt><dd>
<dl>
<dt><i>handle</i></dt>
<dd>a handle that identifies this icon or <code>NULL</code> if plugin doesn't
want to handle this icon</dd></dl>
</dd></dl>
<hr>
<font size=-2><a href="LoadIcon_.html" target="_top">Show TOC</a></font>
</body>
</html>