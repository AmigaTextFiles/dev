<html>
<!-- generated from hollywood_sdk.meta by MetaDoc 1.13 (c) by Andreas Falkenhahn -->
<head>
<title>StreamSamples</title>
<meta name="author" content="Andreas Falkenhahn">
<meta name="generator" content="MetaDoc 1.13">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
<!--
body {font-family: sans-serif;}
ul.toc {list-style: none; margin-left: 20px; padding-left: 0px;}
dt.autodoc {font-variant: small-caps; font-size: larger; margin-top: 10px; margin-bottom: 10px; padding-left: 0.2em; padding-top: 0.2em; padding-bottom: 0.2em;
	background-color: #bae1ff; border-width: 1px; border-color: #3baaff; border-style: solid;}
dt.codelist {margin-bottom: 0.2em;}
h2.heading {background-color: #bae1ff; font-family: Arial; padding-top: 0.4em; padding-bottom: 0.4em;}
code {background-color: #f2f2f2; padding: 2px 4px; font-weight: bold;}
pre {background-color: #f2f2f2; border: 1px solid #ddd; padding: 0.3em;}
		
-->
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<dl>
<dt class="autodoc"><b>Name</b></dt><dd>
StreamSamples -- get raw PCM frames from sound stream (V5.0)</dd>
<dt class="autodoc"><b>Synopsis</b></dt><dd>
<pre>
int error = StreamSamples(APTR handle, struct StreamSamplesCtrl *ctrl);</pre>
</dd>
<dt class="autodoc"><b>Function</b></dt><dd>
This function has to read the number of raw PCM frames requested from the
specified sound stream and copy them to the memory buffer that is passed
to this function. Hollywood will pass a pointer to a <code>struct StreamSamplesCtrl</code>
to this function. This structure looks like this:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>struct StreamSamplesCtrl
{
    APTR Buffer;    // [in]
    int Request;    // [in]
    int Written;    // [out]
    int Done;       // [out]
};
</pre></td></tr></table><p>

Here is the meaning of the individual members:

<p>
<dl>
<dt class="codelist"><code>Buffer:</code></dt>
<dd>
This is a pointer to a memory buffer. You have to copy the PCM frames
to this buffer.

<p>
</dd>
<dt class="codelist"><code>Request:</code></dt>
<dd>
Contains the number of PCM frames that Hollywood wants you to copy to the
memory buffer. Note that this value is specified in PCM frames, not in bytes.
So if the request is 1024 and your PCM samples are formatted as 16-bit wide stereo
frames, you would have to copy 4096 bytes to the memory buffer.

<p>
</dd>
<dt class="codelist"><code>Written:</code></dt>
<dd>
This must be set by your implementation to the number of PCM frames that
has actually been written to <code>Buffer</code>. Once again, the value is
specified in PCM frames, not in bytes.

<p>
</dd>
<dt class="codelist"><code>Done:</code></dt>
<dd>
Set this to <code>True</code> if the stream end has been reached. Otherwise set it to <code>False</code>.
</dd></dl>

<p>
<code>StreamSamples()</code> must return an error code or 0 for success.

<p>
This function must be implemented in a thread-safe way. Hollywood will usually
call this function from a helper thread so make sure that your implementation
is thread-safe.

<p>
</dd>
<dt class="autodoc"><b>Inputs</b></dt><dd>
<dl>
<dt><i>handle</i></dt>
<dd>handle returned by <a href="OpenStream.html">OpenStream()</a></dd>
<dt><i>ctrl</i></dt>
<dd>pointer to a <code>struct StreamSamplesCtrl</code> containing Hollywood's request</dl>
</dd>
<dt class="autodoc"><b>Results</b></dt><dd>
<dl>
<dt><i>error</i></dt>
<dd>error code or 0 for success</dd></dl>
</dd></dl>
<hr>
<font size=-2><a href="StreamSamples_.html" target="_top">Show TOC</a></font>
</body>
</html>