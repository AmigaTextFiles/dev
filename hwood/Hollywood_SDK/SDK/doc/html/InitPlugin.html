<html>
<!-- generated from hollywood_sdk.meta by MetaDoc 1.13 (c) by Andreas Falkenhahn -->
<head>
<title>InitPlugin</title>
<meta name="author" content="Andreas Falkenhahn">
<meta name="generator" content="MetaDoc 1.13">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
<!--
body {font-family: sans-serif;}
ul.toc {list-style: none; margin-left: 20px; padding-left: 0px;}
dt.autodoc {font-variant: small-caps; font-size: larger; margin-top: 10px; margin-bottom: 10px; padding-left: 0.2em; padding-top: 0.2em; padding-bottom: 0.2em;
	background-color: #bae1ff; border-width: 1px; border-color: #3baaff; border-style: solid;}
dt.codelist {margin-bottom: 0.2em;}
h2.heading {background-color: #bae1ff; font-family: Arial; padding-top: 0.4em; padding-bottom: 0.4em;}
code {background-color: #f2f2f2; padding: 2px 4px; font-weight: bold;}
pre {background-color: #f2f2f2; border: 1px solid #ddd; padding: 0.3em;}
		
-->
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<dl>
<dt class="autodoc"><b>Name</b></dt><dd>
InitPlugin -- init plugin (V5.0)</dd>
<dt class="autodoc"><b>Synopsis</b></dt><dd>
<pre>
int success = InitPlugin(hwPluginBase *self, hwPluginAPI *cl, STRPTR path);</pre>
</dd>
<dt class="autodoc"><b>Function</b></dt><dd>
This function must initialize your plugin and report information about it back
to Hollywood. Your <code>InitPlugin()</code> implementation must fill out all fields of the
<code>hwPluginBase</code> structure that is passed to it:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>typedef struct _hwPluginBase
{
    ULONG CapsMask;       // [out]
    int Version;          // [out]
    int Revision;         // [out]
    int hwVersion;        // [in/out]
    int hwRevision;       // [in/out]
    STRPTR Name;          // [out]
    STRPTR ModuleName;    // [out]
    STRPTR Author;        // [out]
    STRPTR Description;   // [out]
    STRPTR Copyright;     // [out]
    STRPTR URL;           // [out]
    STRPTR Date;          // [out]
    STRPTR Settings;      // [out]
    STRPTR HelpFile;      // [out]
} hwPluginBase;
</pre></td></tr></table><p>

Here is an explanation about the function of the different structure members:

<p>
<dl>
<dt class="codelist"><code>CapsMask:</code></dt>
<dd>
This is a bitmask describing the capabilities of your plugin, i.e. which features
your plugin provides. Hollywood uses this bitmask to determine which function pointers
it has to import from your plugin. This member must be set to one or more of the
following capabilities:

<p>
<dl>
<dt class="codelist"><code>HWPLUG_CAPS_CONVERT</code></dt>
<dd>
Plugin can convert custom file types into Hollywood scripts.
See <a href="ConvertScriptOverview.html">Convert script plugins</a> for details.

<p>
</dd>
<dt class="codelist"><code>HWPLUG_CAPS_LIBRARY</code></dt>
<dd>
Plugin adds new commands and constants. See <a href="LibraryOverview.html">Library plugins</a> for details.

<p>
</dd>
<dt class="codelist"><code>HWPLUG_CAPS_IMAGE</code></dt>
<dd>
Plugin provides a loader for additional image formats. See <a href="ImageOverview.html">Image plugins</a> for details.

<p>
</dd>
<dt class="codelist"><code>HWPLUG_CAPS_ANIM</code></dt>
<dd>
Plugin provides a loader for additional animation formats. See <a href="AnimOverview.html">Animation plugins</a> for details.

<p>
</dd>
<dt class="codelist"><code>HWPLUG_CAPS_SOUND</code></dt>
<dd>
Plugin provides a loader for additional sound formats. See <a href="SoundOverview.html">Sound plugins</a> for details.

<p>
</dd>
<dt class="codelist"><code>HWPLUG_CAPS_VECTOR</code></dt>
<dd>
Plugin provides an implementation to draw vector graphics. See <a href="VectorGfxOverview.html">Vectorgraphics plugins</a> for details.

<p>
</dd>
<dt class="codelist"><code>HWPLUG_CAPS_VIDEO</code></dt>
<dd>
Plugin provides a loader for additional video formats. See <a href="VideoOverview.html">Video plugins</a> for details.

<p>
</dd>
<dt class="codelist"><code>HWPLUG_CAPS_SAVEIMAGE</code></dt>
<dd>
Plugin provides a saver for additional image formats. See <a href="ImageSaverOverview.html">Image saver plugins</a> for details.

<p>
</dd>
<dt class="codelist"><code>HWPLUG_CAPS_SAVEANIM</code></dt>
<dd>
Plugin provides a saver for additional animation formats. See <a href="AnimSaverOverview.html">Animation saver plugins</a> for details.

<p>
</dd>
<dt class="codelist"><code>HWPLUG_CAPS_SAVESAMPLE</code></dt>
<dd>
Plugin provides a saver for additional sound formats. See <a href="SampleSaverOverview.html">Sample saver plugins</a> for details.

<p>
</dd>
<dt class="codelist"><code>HWPLUG_CAPS_REQUIRE</code></dt>
<dd>
Plugin wants to be called when the user does a <code>@REQUIRE</code> on it. See <a href="RequireHookOverview.html">Require hook plugins</a> for details. (V6.0)

<p>
</dd>
<dt class="codelist"><code>HWPLUG_CAPS_DISPLAYADAPTER</code></dt>
<dd>
Plugin replaces Hollywood's inbuilt display handler. See <a href="DisplayAdapterOverview.html">Display adapter plugins</a> for details. (V6.0)

<p>
</dd>
<dt class="codelist"><code>HWPLUG_CAPS_TIMERADAPTER</code></dt>
<dd>
Plugin replaces Hollywood's inbuilt timer handler. See <a href="TimerAdapterOverview.html">Timer adapter plugins</a> for details. (V6.0)

<p>
</dd>
<dt class="codelist"><code>HWPLUG_CAPS_REQUESTERADAPTER</code></dt>
<dd>
Plugin replaces Hollywood's inbuilt requester handler. See <a href="RequesterAdapterOverview.html">Requester adapter plugins</a> for details. (V6.0)

<p>
</dd>
<dt class="codelist"><code>HWPLUG_CAPS_FILEADAPTER</code></dt>
<dd>
Plugin provides a loader for additional file formats. See <a href="FileAdapterOverview.html">File adapter plugins</a> for details. (V6.0)

<p>
</dd>
<dt class="codelist"><code>HWPLUG_CAPS_DIRADAPTER</code></dt>
<dd>
Plugin provides a loader for additional directory formats. See <a href="DirAdapterOverview.html">Directory adapter plugins</a> for details. (V6.0)

<p>
</dd>
<dt class="codelist"><code>HWPLUG_CAPS_AUDIOADAPTER</code></dt>
<dd>
Plugin replaces Hollywood's inbuilt audio driver. See <a href="AudioAdapterOverview.html">Audio adapter plugins</a> for details. (V6.0)

<p>
</dd>
<dt class="codelist"><code>HWPLUG_CAPS_EXTENSION</code></dt>
<dd>
This is a special plugin type that does not offer any functionality on its
own. Its only purpose is to extend other plugin types. See <a href="ExtensionOverview.html">Extension plugins</a> for details. (V6.0)

<p>
</dd>
<dt class="codelist"><code>HWPLUG_CAPS_NETWORKADAPTER</code></dt>
<dd>
Plugin provides a handler for custom network protocols. See <a href="NetworkAdapterOverview.html">Network adapter plugins</a> for details. (V8.0)

<p>
</dd>
<dt class="codelist"><code>HWPLUG_CAPS_SERIALIZE</code></dt>
<dd>
Plugin provides a new data serializer. See <a href="SerializeOverview.html">Serializer plugins</a> for details. (V9.0)

<p>
</dd>
<dt class="codelist"><code>HWPLUG_CAPS_ICON</code></dt>
<dd>
Plugin provides a loader for additional icon formats. See <a href="IconOverview.html">Icon plugins</a> for details. (V9.0)

<p>
</dd>
<dt class="codelist"><code>HWPLUG_CAPS_SAVEICON</code></dt>
<dd>
Plugin provides a saver for additional icon formats. See <a href="IconSaverOverview.html">Icon saver plugins</a> for details. (V9.0)

<p>
</dd>
<dt class="codelist"><code>HWPLUG_CAPS_IPCADAPTER</code></dt>
<dd>
Plugin replaces Hollywood's inbuilt IPC handler. See <a href="IPCAdapterOverview.html">IPC adapter plugins</a> for details. (V9.0)

<p>
</dd>
<dt class="codelist"><code>HWPLUG_CAPS_FONT</code></dt>
<dd>
Plugin provides a loader for additional font formats. See <a href="FontOverview.html">Font plugins</a> for details. (V10.0)

<p>
</dd>
<dt class="codelist"><code>HWPLUG_CAPS_FILESYSADAPTER</code></dt>
<dd>
Plugin replaces Hollywood's inbuilt filesystem handler. See <a href="FilesysAdapterOverview.html">Filesystem adapter plugins</a> for details. (V10.0)
</dd></dl>

<p>
You have to implement all functions for every capability bit you set in <code>CapsMask</code>
otherwise Hollywood will fail to load your plugin.

<p>
</dd>
<dt class="codelist"><code>Version:</code></dt>
<dd>
Set this to the current version of your plugin.

<p>
</dd>
<dt class="codelist"><code>Revision:</code></dt>
<dd>
Set this to the current revision of your plugin.

<p>
</dd>
<dt class="codelist"><code>hwVersion:</code></dt>
<dd>
This contains the Hollywood version that has just opened your plugin. You should
store this value somewhere because you might need it later to check whether
a certain feature is available in this Hollywood version or not. After that, set
this member to the minimum Hollywood version required by your plugin.

<p>
</dd>
<dt class="codelist"><code>hwRevision:</code></dt>
<dd>
This contains the Hollywood revision that has just opened your plugin. You should
store this value somewhere because you might need it later to check whether
a certain feature is available in this Hollywood revision or not. After that,
set this to the minimum Hollywood revision required by your plugin.

<p>
</dd>
<dt class="codelist"><code>Name:</code></dt>
<dd>
Set this to a string describing the name of your plugin. This can contain
spaces and need not be unique. Non-ASCII characters must be encoded as UTF-8.

<p>
</dd>
<dt class="codelist"><code>ModuleName:</code></dt>
<dd>
Set this to the module name of your plugin. The module name of your plugin
must be identical to its file name minus the <code>*.hwp</code> extension. If
file and module names do not match, Hollywood will refuse to load your plugin.
This may only contain ASCII characters which are allowed in file names.

<p>
</dd>
<dt class="codelist"><code>Author:</code></dt>
<dd>
Set this to the name(s) of the plugin author(s). Non-ASCII characters must be
encoded as UTF-8.

<p>
</dd>
<dt class="codelist"><code>Description:</code></dt>
<dd>
Set this to a string describing the plugin's functionality. Non-ASCII characters
must be encoded as UTF-8.

<p>
</dd>
<dt class="codelist"><code>Copyright:</code></dt>
<dd>
Set this to a string containing relevant copyright information. Non-ASCII characters
must be encoded as UTF-8.

<p>
</dd>
<dt class="codelist"><code>URL:</code></dt>
<dd>
Set this to a string containing a link to the plugin's website. This may
be <code>NULL</code>.

<p>
</dd>
<dt class="codelist"><code>Date:</code></dt>
<dd>
Set this to the build date of the plugin. This may be <code>NULL</code>. If set, it should
use the format &quot;dd.mm.yy&quot;.

<p>
</dd>
<dt class="codelist"><code>Settings:</code></dt>
<dd>
This can be set to the full path of an external program that can be used
to configure settings for your plugin. It is advised to store this program
relative to your plugin's path. You can find out the full path of your plugin
by looking at the third argument that is passed to <code>InitPlugin()</code>. This will tell
you where the user has installed your plugin. If you set this member, the user will
be able to launch the external program from the Hollywood GUI. If your plugin
doesn't feature such a program, set this member to <code>NULL</code>.

<p>
</dd>
<dt class="codelist"><code>HelpFile:</code></dt>
<dd>
This can be set to the full path of a help file that acts as a user manual
for the plugin. It is advised to store this help file relative to your plugin's
path. You can find out the full path of your plugin by looking at the third
argument that is passed to <code>InitPlugin()</code>. This will tell you where the user has
installed your plugin. If you set this member, the user will be able to open this
help file from the Hollywood GUI. If your plugin doesn't come with a help file,
set this member to <code>NULL</code>.
</dd></dl>

<p>
Note that all string pointers you use to initialize the <code>hwPluginBase</code>
structure must stay valid until <a href="ClosePlugin.html">ClosePlugin()</a> is called.

<p>
The second parameter that is passed to <code>InitPlugin()</code> is a pointer to a
<code>hwPluginAPI</code> vector which is the gateway to all plugin API functions
provided by Hollywood. Plugin API functions are grouped into several different
library bases like <code>GfxBase</code> and <code>SysBase</code>. Please note that
this parameter can be <code>NULL</code>. If this is the case, your plugin should not initialize
itself but just fill out the <code>hwPluginBase</code> structure and return <code>True</code>.
If Hollywood passes <code>NULL</code> in <code>hwPluginAPI</code> it only wants to collect
information about your plugin without actually loading it.

<p>
<b>Important: You have to be very careful about the plugin API functions you
call from your InitPlugin() implementation.</b> This is because an older Hollywood
version might have called your <code>InitPlugin()</code> function and if you try to call
newer plugin API functions that are unavailable in the Hollywood version that
has just called <code>InitPlugin()</code>, your plugin will crash terribly. You always have
to check the <code>hwVersion</code> and <code>hwRevision</code> members of the <code>hwPluginBase</code> structure
that is passed to your <code>InitPlugin()</code> function before you call any of the plugin
APIs. These checks only have to be done in <code>InitPlugin()</code> and <a href="ClosePlugin.html">ClosePlugin()</a>
since they can be called by any Hollywood version. All the other functions of
your plugin will only be called if the host Hollywood version matches the one
you request in your <code>InitPlugin()</code> implementation using the <code>hwVersion</code> and <code>hwRevision</code>
members. <code>InitPlugin()</code> and <a href="ClosePlugin.html">ClosePlugin()</a>, however, may be
called by any arbitrary Hollywood version and the only assumption you can make
is that it will be at least Hollywood 5.0 which is calling you because 5.0 is
the version that introduced the new plugin system explained here. <b>Please take
this advice very seriously because a plugin which does not cleanly work with
older Hollywood versions will also crash all executables compiled by these
previous Hollywood versions because they will usually also scan and load all
available plugins and if there is a plugin which isn't compatible with older
versions, projects compiled with older Hollywood versions will suddenly crash
badly.</b>

<p>
Additionally, <code>InitPlugin()</code> can also be called by Hollywood Designer. In that
case you have to be careful as well, because Hollywood Designer supports only
a subset of the official Hollywood plugin API so many function pointers inside
<code>hwPluginBase</code> will be <code>NULL</code> and you cannot call them. That is why your <code>InitPlugin()</code>
implementation also has to check whether it was called by Hollywood or by
Hollywood Designer and act accordingly then. See <a href="DesignerCompatibility.html">Designer compatibility</a> for details.

<p>
The third parameter contains the full path to the plugin's location on the
user's hard drive. This may be useful information if you need to load files from
the plugin's directory or store preferences files in the plugin's directory, etc.

<p>
<code>InitPlugin()</code> has to return either <code>True</code> or <code>False</code> to signal success or failure.
If it returns <code>False</code>, <a href="ClosePlugin.html">ClosePlugin()</a> won't ever be called on
this plugin.

<p>
</dd>
<dt class="autodoc"><b>Inputs</b></dt><dd>
<dl>
<dt><i>self</i></dt>
<dd>pointer to structure that your plugin has to fill out</dd>
<dt><i>cl</i></dt>
<dd>pointer to Hollywood's plugin API functions or <code>NULL</code> (see above)</dd>
<dt><i>path</i></dt>
<dd>full path to the plugin's shared library file</dl>
</dd>
<dt class="autodoc"><b>Results</b></dt><dd>
<dl>
<dt><i>success</i></dt>
<dd><code>True</code> or <code>False</code> indicating whether initialization was successful</dd></dl>
</dd></dl>
<hr>
<font size=-2><a href="InitPlugin_.html" target="_top">Show TOC</a></font>
</body>
</html>