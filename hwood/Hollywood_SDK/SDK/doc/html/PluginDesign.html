<html>
<!-- generated from hollywood_sdk.meta by MetaDoc 1.13 (c) by Andreas Falkenhahn -->
<head>
<title>Basic plugin design</title>
<meta name="author" content="Andreas Falkenhahn">
<meta name="generator" content="MetaDoc 1.13">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
<!--
body {font-family: sans-serif;}
ul.toc {list-style: none; margin-left: 20px; padding-left: 0px;}
dt.autodoc {font-variant: small-caps; font-size: larger; margin-top: 10px; margin-bottom: 10px; padding-left: 0.2em; padding-top: 0.2em; padding-bottom: 0.2em;
	background-color: #bae1ff; border-width: 1px; border-color: #3baaff; border-style: solid;}
dt.codelist {margin-bottom: 0.2em;}
h2.heading {background-color: #bae1ff; font-family: Arial; padding-top: 0.4em; padding-bottom: 0.4em;}
code {background-color: #f2f2f2; padding: 2px 4px; font-weight: bold;}
pre {background-color: #f2f2f2; border: 1px solid #ddd; padding: 0.3em;}
		
-->
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<h2 class="heading">2.4 Basic plugin design</h2>

<p>
Every Hollywood plugin needs to export the functions <a href="InitPlugin.html">InitPlugin()</a>
and <a href="ClosePlugin.html">ClosePlugin()</a>. As their names imply, these two functions initialize
and close a plugin. By calling <a href="InitPlugin.html">InitPlugin()</a> Hollywood asks your plugin
to identify itself, i.e. it needs to report certain information back to Hollywood, e.g. its
feature set, author, version, minimum required Hollywood version and so on. Depending on this
information, Hollywood will then import other function pointers from the plugin, depending on
the feature set the plugin has reported to Hollywood.

<p>
To describe its feature set, the plugin sets the <code>hwPluginBase.CapsMask</code> field
to a combination of capability bits taken from the <code>HWPLUG_CAPS_XXX</code> definitions
in <code>hollywood/plugin.h</code>. Hollywood then knows what this plugin can do and will
import the needed function pointers. For example, if <code>hwPluginBase.CapsMask</code> is
set to <code>HWPLUG_CAPS_SOUND|HWPLUG_CAPS_SAVESAMPLE</code>, Hollywood will know that
this plugin can load sound files and save sample files. Hollywood will therefore import
the following additional function pointers from the plugin:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>OpenStream()
CloseStream()
SeekStream()
StreamSamples()
GetFormatName()
RegisterSampleSaver()
SaveSample()
</pre></td></tr></table><p>

If one of the function pointers listed above cannot be resolved, Hollywood won't load
this plugin.

<p>
See <a href="InitPlugin.html">InitPlugin()</a> for details.

<p>
See <a href="ClosePlugin.html">ClosePlugin()</a> for details.

<p>
Note that starting with Hollywood 10.0, all functions exported by plugins should use the
prefix <code>hwp_</code> to avoid name clashes with other APIs. Thus, for a plugin targetting Hollywood
10.0 or better, the plugin example from above should better export the following functions
instead of the one listed above:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>hwp_OpenStream()
hwp_CloseStream()
hwp_SeekStream()
hwp_StreamSamples()
hwp_GetFormatName()
hwp_RegisterSampleSaver()
hwp_SaveSample()
</pre></td></tr></table><p>

Using the <code>hwp_</code> prefix makes sure that there are no clashes with other (system) APIs.
Keep in mind, though, that if you use the <code>hwp_</code> prefix in your function exports, your
plugin won't run on any Hollywood version that is older than 10.0. That's why in
this documentation the <code>hwp_</code> prefix won't be explicitly mentioned in the documentation
of the individual plugin functions because many plugin authors might want to target older
Hollywood versions as well. If your plugin needs Hollywood 10.0 or better, though, you
should always use the <code>hwp_</code> prefix in your function exports and you should also define
the <code>HW_USEPREFIX</code> macro so that the correct prototypes are used in <code>hollywood/plugin.h</code>.

<p>
<hr>
<font size=-2><a href="PluginDesign_.html" target="_top">Show TOC</a></font>
</body>
</html>