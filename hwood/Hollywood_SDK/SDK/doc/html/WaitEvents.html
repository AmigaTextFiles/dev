<html>
<!-- generated from hollywood_sdk.meta by MetaDoc 1.13 (c) by Andreas Falkenhahn -->
<head>
<title>WaitEvents</title>
<meta name="author" content="Andreas Falkenhahn">
<meta name="generator" content="MetaDoc 1.13">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
<!--
body {font-family: sans-serif;}
ul.toc {list-style: none; margin-left: 20px; padding-left: 0px;}
dt.autodoc {font-variant: small-caps; font-size: larger; margin-top: 10px; margin-bottom: 10px; padding-left: 0.2em; padding-top: 0.2em; padding-bottom: 0.2em;
	background-color: #bae1ff; border-width: 1px; border-color: #3baaff; border-style: solid;}
dt.codelist {margin-bottom: 0.2em;}
h2.heading {background-color: #bae1ff; font-family: Arial; padding-top: 0.4em; padding-bottom: 0.4em;}
code {background-color: #f2f2f2; padding: 2px 4px; font-weight: bold;}
pre {background-color: #f2f2f2; border: 1px solid #ddd; padding: 0.3em;}
		
-->
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<dl>
<dt class="autodoc"><b>Name</b></dt><dd>
WaitEvents -- wait until events come in (V6.0)</dd>
<dt class="autodoc"><b>Synopsis</b></dt><dd>
<pre>
int error = WaitEvents(lua_State *L, ULONG flags, struct hwTagList *t);</pre>
</dd>
<dt class="autodoc"><b>Function</b></dt><dd>
This function must halt the program's execution until an event comes in. The event
must then be handled by your <a href="HandleEvents.html">HandleEvents()</a> implementation.
<code>WaitEvents()</code> has to return an error code or 0 for success.

<p>
The following flags may be passed in the second parameter:

<p>
<dl>
<dt class="codelist"><code>HWWEFLAGS_MODAL:</code></dt>
<dd>
If this flag is set, then <code>WaitEvents()</code> has been called from a modal loop that Hollywood
is currently running. A modal loop is a temporary event loop set up by functions that
block the script execution until certain events happen, e.g. <code>WaitLeftMouse()</code> or <code>InKeyStr()</code>.
If <code>HWWEFLAGS_MODAL</code> is not set, then you can be sure that Hollywood is currently running the
script's main loop. This means that your <code>WaitEvents()</code> implementation has been called as a
result of the script calling Hollywood's <code>WaitEvent()</code> function.
</dd></dl>

<p>
The third parameter is a tag list that can contain the following tags:

<p>
<dl>
<dt class="codelist"><code>HWWETAG_AMIGASIGNALS:</code></dt>
<dd>
This tag is always passed on Amiga systems and your <code>WaitEvents()</code> implementation must take
it into account. The <code>pData</code> item of this tag is set to a <code>ULONG</code> pointer that contains
a combination of signal bits that your <code>WaitEvents()</code> implementation has to take into
account. Thus, on Amiga systems all <code>WaitEvents()</code> implementations must be based on
<code>exec.library/Wait()</code>. You may choose to wait on additional signals but you also
must take the signals that you get from Hollywood into account. Furthermore, you must
write the signals that have broken your <code>WaitEvents()</code> implementation back to the <code>ULONG</code>
pointer before you return from this function. This is because Hollywood needs to know
which signals have triggered so that it can take appropriate action.
</dd></dl>

<p>
Please note that this function must wait for events on all displays that have currently
been opened by <a href="OpenDisplay.html">OpenDisplay()</a>. Additionally, it could also happen
that no display is open at all and your <code>WaitEvents()</code> function is called. Be prepared to
deal with these cases.

<p>
Also note that your <code>WaitEvents()</code> implementation must be capable of being woken up
by <a href="ForceEventLoopIteration.html">ForceEventLoopIteration()</a> when this is called from
worker threads. See <a href="ForceEventLoopIteration.html">ForceEventLoopIteration</a> for details.

<p>
</dd>
<dt class="autodoc"><b>Inputs</b></dt><dd>
<dl>
<dt><i>L</i></dt>
<dd>pointer to the <code>lua_State</code></dd>
<dt><i>flags</i></dt>
<dd>combination of flags (see above)</dd>
<dt><i>t</i></dt>
<dd>tag list containing additional parameters (see above)</dl>
</dd>
<dt class="autodoc"><b>Results</b></dt><dd>
<dl>
<dt><i>error</i></dt>
<dd>error code or 0 for success</dd></dl>
</dd></dl>
<hr>
<font size=-2><a href="WaitEvents_.html" target="_top">Show TOC</a></font>
</body>
</html>