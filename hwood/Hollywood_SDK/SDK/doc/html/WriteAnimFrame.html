<html>
<!-- generated from hollywood_sdk.meta by MetaDoc 1.13 (c) by Andreas Falkenhahn -->
<head>
<title>WriteAnimFrame</title>
<meta name="author" content="Andreas Falkenhahn">
<meta name="generator" content="MetaDoc 1.13">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
<!--
body {font-family: sans-serif;}
ul.toc {list-style: none; margin-left: 20px; padding-left: 0px;}
dt.autodoc {font-variant: small-caps; font-size: larger; margin-top: 10px; margin-bottom: 10px; padding-left: 0.2em; padding-top: 0.2em; padding-bottom: 0.2em;
	background-color: #bae1ff; border-width: 1px; border-color: #3baaff; border-style: solid;}
dt.codelist {margin-bottom: 0.2em;}
h2.heading {background-color: #bae1ff; font-family: Arial; padding-top: 0.4em; padding-bottom: 0.4em;}
code {background-color: #f2f2f2; padding: 2px 4px; font-weight: bold;}
pre {background-color: #f2f2f2; border: 1px solid #ddd; padding: 0.3em;}
		
-->
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<dl>
<dt class="autodoc"><b>Name</b></dt><dd>
WriteAnimFrame -- write single animation frame to disk (V5.0)</dd>
<dt class="autodoc"><b>Synopsis</b></dt><dd>
<pre>
int ok = WriteAnimFrame(APTR stream, struct SaveAnimCtrl *ctrl);</pre>
</dd>
<dt class="autodoc"><b>Function</b></dt><dd>
This function must save the frame described in the second parameter to the animation
stream that is passed in the first parameter. This stream pointer is a handle that
has been created by the <a href="BeginAnimStream.html">BeginAnimStream()</a> function. The second
parameter is a pointer to a <code>struct SaveAnimCtrl</code>. This structure looks like this:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>struct SaveAnimCtrl
{
    APTR Data;        // [in]
    ULONG *Palette;   // [in]
    int Modulo;       // [in]
    int Colors;       // [in]
    ULONG TransIndex; // [in]
    int Delay;        // [in]
    ULONG Flags;      // [in]
    ULONG FormatID;   // [in] -- V5.3
};
</pre></td></tr></table><p>

Hollywood passes the following information to your <code>WriteAnimFrame()</code> function:

<p>
<dl>
<dt class="codelist"><code>Data:</code></dt>
<dd>
The pixel data to save to the frame. The actual format of this data depends on the
<code>Format</code> member.

<p>
</dd>
<dt class="codelist"><code>Modulo:</code></dt>
<dd>
Number of bytes used by a single row of pixel data. This may be more than needed to store for
the width that has been passed to <a href="BeginAnimStream.html">BeginAnimStream()</a> since there may be some padding.

<p>
</dd>
<dt class="codelist"><code>Colors:</code></dt>
<dd>
This contains the number of colors in the color look-up table passed in the <code>Palette</code>
member. This member is only used if <code>HWSAVEANMFMT_CLUT</code> has been passed to <a href="BeginAnimStream.html">BeginAnimStream()</a>.

<p>
</dd>
<dt class="codelist"><code>Palette:</code></dt>
<dd>
Contains the look-up table that you need to convert the CLUT pixel values to RGB color
values. This table consists of as many 32-bit ARGB values as has been set in the <code>Colors</code>
member. Note that <code>Palette</code> is only used if <code>HWSAVEANMFMT_CLUT</code> has been passed to
<a href="BeginAnimStream.html">BeginAnimStream()</a>.

<p>
</dd>
<dt class="codelist"><code>TransIndex:</code></dt>
<dd>
If this animation stream has been created using <code>HWSAVEANMFMT_CLUT</code> this member specifies the index of
the color that should appear transparent in the animation. The value specified here is only
valid if the <code>HWSAVEANMFLAGS_TRANSINDEX</code> flag has been set (see below).

<p>
</dd>
<dt class="codelist"><code>Delay:</code></dt>
<dd>
The delay for this frame in milliseconds or 0 if there should be no delay. Not all animation
formats support frame-based delaying.

<p>
</dd>
<dt class="codelist"><code>Flags:</code></dt>
<dd>
Contains a combination of flags specifying further options:

<p>
<dl>
<dt class="codelist"><code>HWSAVEANMFLAGS_ALPHA:</code></dt>
<dd>
Pixel data contains alpha channel transparency values.

<p>
</dd>
<dt class="codelist"><code>HWSAVEANMFLAGS_TRANSINDEX:</code></dt>
<dd>
The <code>TransIndex</code> member contains the index of a palette entry that should be
made transparent in the output animation.
</dd></dl>

<p>
</dd>
<dt class="codelist"><code>FormatID:</code></dt>
<dd>
This member contains the identifier of the animation format the frame should be saved in.
You only need to look at this member if your plugin supports more than one output
animation format. But be careful, you are only allowed to look at this member if the
user is running at least Hollywood 5.3. Otherwise, you must not access this member
because older versions of Hollywood don't support it. (V5.3)
</dd></dl>

<p>
This function has to return <code>True</code> if the frame has been successfully saved or <code>False</code>
in case of an error.

<p>
</dd>
<dt class="autodoc"><b>Inputs</b></dt><dd>
<dl>
<dt><i>stream</i></dt>
<dd>output anim stream handle created by <a href="BeginAnimStream.html">BeginAnimStream()</a></dd>
<dt><i>ctrl</i></dt>
<dd>pointer to a <code>struct SaveAnimCtrl</code> containing the frame to be saved</dl>
</dd>
<dt class="autodoc"><b>Results</b></dt><dd>
<dl>
<dt><i>ok</i></dt>
<dd><code>True</code> or <code>False</code> indicating success or failure</dd></dl>
</dd></dl>
<hr>
<font size=-2><a href="WriteAnimFrame_.html" target="_top">Show TOC</a></font>
</body>
</html>