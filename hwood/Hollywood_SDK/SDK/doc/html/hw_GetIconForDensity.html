<html>
<!-- generated from hollywood_sdk.meta by MetaDoc 1.13 (c) by Andreas Falkenhahn -->
<head>
<title>hw_GetIconForDensity</title>
<meta name="author" content="Andreas Falkenhahn">
<meta name="generator" content="MetaDoc 1.13">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
<!--
body {font-family: sans-serif;}
ul.toc {list-style: none; margin-left: 20px; padding-left: 0px;}
dt.autodoc {font-variant: small-caps; font-size: larger; margin-top: 10px; margin-bottom: 10px; padding-left: 0.2em; padding-top: 0.2em; padding-bottom: 0.2em;
	background-color: #bae1ff; border-width: 1px; border-color: #3baaff; border-style: solid;}
dt.codelist {margin-bottom: 0.2em;}
h2.heading {background-color: #bae1ff; font-family: Arial; padding-top: 0.4em; padding-bottom: 0.4em;}
code {background-color: #f2f2f2; padding: 2px 4px; font-weight: bold;}
pre {background-color: #f2f2f2; border: 1px solid #ddd; padding: 0.3em;}
		
-->
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<dl>
<dt class="autodoc"><b>Name</b></dt><dd>
hw_GetIconForDensity -- get density-optimized image from icon (V8.0)</dd>
<dt class="autodoc"><b>Synopsis</b></dt><dd>
<pre>
struct hwIconEntry *icon = hw_GetIconForDensity(lua_ID *id, double
                        *density, ULONG flags, struct hwTagList *tags);</pre>
</dd>
<dt class="autodoc"><b>Function</b></dt><dd>
This function can be used to retrieve an icon image that fits best to the density
specified in the <code>density</code> parameter. Note that this parameter is a pointer to a
<code>double</code>, not a <code>double</code>. If the <code>density</code> parameter is <code>NULL</code>, the current monitor's
default density is used. You also have to pass the object identifier of the icon
whose images should be scanned to find an image that fits best for the requested
density. The object identifier must be passed as a <code>lua_ID</code>. See <a href="LuaID.html">Object identifiers</a> for details.

<p>
The <code>flags</code> parameter can be used to configure how <code>hw_GetIconForDensity()</code> should
behave when scanning the icon for images. The following flags are currently
defined:

<p>
<dl>
<dt class="codelist"><code>HWGIFDFLAGS_SELECTED:</code></dt>
<dd>
Set this flag if you want <code>hw_GetIconForDensity()</code> to return the selected image
instead of the normal image. If this flag is set and there is no selected image,
<code>hw_GetIconForDensity()</code> will fail.

<p>
</dd>
<dt class="codelist"><code>HWGIFDFLAGS_NOSCALE:</code></dt>
<dd>
By default, <code>hw_GetIconForDensity()</code> will scale images if they don't exactly fit
the required density. If you don't want this behaviour, you can set HWGIFDFLAGS_NOSCALE
to prevent <code>hw_GetIconForDensity()</code> from scaling images. Note, however, that in this
case the image returned by <code>hw_GetIconForDensity()</code> might not be an exact match for
the specified density.

<p>
</dd>
<dt class="codelist"><code>HWGIFDFLAGS_INTERPOLATE:</code></dt>
<dd>
By default, <code>hw_GetIconForDensity()</code> will scale images if they don't exactly fit
the required density. If you set this flag, interpolation will be used when scaling
images. It is recommended to set this tag because images typically look much better
with interpolated scaling.

<p>
</dd>
<dt class="codelist"><code>HWGIFDFLAGS_MUSTMATCH:</code></dt>
<dd>
Set this flag if <code>hw_GetIconForDensity()</code> should only accept images which match the
specified density exactly. If there is no exact match, <code>hw_GetIconForDensity()</code> will
return <code>NULL</code>.
</dd></dl>

<p>
<code>hw_GetIconForDensity()</code> will return a pointer to a <code>struct hwIconEntry</code> which looks
like this:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>struct hwIconEntry
{
    APTR Data;
    int Width;
    int Height;
    ULONG Flags;
    ULONG *Palette;  // V9.0
    ULONG TransPen;  // V9.0
    int Depth;       // V9.0
};
</pre></td></tr></table><p>

Here is a description of the structure members of <code>struct hwIconEntry</code>:

<p>
<dl>
<dt class="codelist"><code>Data:</code></dt>
<dd>
This will be set to a 32-bit ARGB pixel buffer containing the image data of this item.
The alpha byte will always be set for every pixel. The pixel buffer's size will
be exactly <code>width * height * 4</code>. No row padding will be used. The pixel
buffer pointer will be valid until you call <a href="hw_FreeIcon.html">hw_FreeIcon()</a>.

<p>
</dd>
<dt class="codelist"><code>Width:</code></dt>
<dd>
Contains the image's width.

<p>
</dd>
<dt class="codelist"><code>Height:</code></dt>
<dd>
Contains the image's height.

<p>
</dd>
<dt class="codelist"><code>Flags:</code></dt>
<dd>
This contains a combination of flags for this image. The following flags are
currently supported:

<p>
<dl>
<dt class="codelist"><code>HWICONFLAGS_DEFAULT:</code></dt>
<dd>
This flag marks the default icon. Hollywood's icon type allows scripts to designate
an icon as the default one. It's up to you how you interpret and handle the default
icon.

<p>
</dd>
<dt class="codelist"><code>HWICONFLAGS_SELECTED:</code></dt>
<dd>
If this flag is set, the image is a selected icon state. On AmigaOS and compatibles,
icon images usually have two states: normal and selected.

<p>
</dd>
<dt class="codelist"><code>HWICONFLAGS_OPAQUE:</code></dt>
<dd>
This flag is set if the image doesn't use any transparency and all alpha bytes are
set to 255 (i.e. visible).

<p>
</dd>
<dt class="codelist"><code>HWICONFLAGS_EXTENDED:</code></dt>
<dd>
This flag is set if <code>struct hwIconEntry</code> has the structure extensions
introduced in Hollywood 9.0. Before you access any of those extensions, e.g.
the <code>Palette</code> or <code>Depth</code> members, you must either check if this flag is set or
if the Hollywood version that opened your plugin is at least 9.0. (V9.0)
</dd></dl>

<p>
</dd>
<dt class="codelist"><code>Palette:</code></dt>
<dd>
This will always be <code>NULL</code> because <code>hw_GetIconForDensity()</code> currently won't return palette images. (V9.0)

<p>
</dd>
<dt class="codelist"><code>TransPen:</code></dt>
<dd>
This will always be <code>HWPEN_NONE</code> because <code>hw_GetIconForDensity()</code> currently won't return palette
images. (V9.0)

<p>
</dd>
<dt class="codelist"><code>Depth:</code></dt>
<dd>
This will always be 32 because <code>hw_GetIconForDensity()</code> currently won't return palette images. (V9.0)
</dd></dl>

<p>
The image that is returned by this function must be freed using the <a href="hw_FreeIcon.html">hw_FreeIcon()</a>
function. See <a href="hw_FreeIcon.html">hw_FreeIcon</a> for details.

<p>
</dd>
<dt class="autodoc"><b>Designer compatibility</b></dt><dd>
Unsupported

<p>
</dd>
<dt class="autodoc"><b>Inputs</b></dt><dd>
<dl>
<dt><i>id</i></dt>
<dd>object identifier of icon to use</dd>
<dt><i>density</i></dt>
<dd>pointer to a <code>double</code> containing the desired density or <code>NULL</code> to use
the current monitor's default density</dd>
<dt><i>flags</i></dt>
<dd>flags that specify how <code>hw_GetIconForDensity()</code> should behave (see above)</dd>
<dt><i>tags</i></dt>
<dd>reserved for future use; pass <code>NULL</code></dl>
</dd>
<dt class="autodoc"><b>Results</b></dt><dd>
<dl>
<dt><i>icon</i></dt>
<dd>icon image that is best optimized for the specified density or <code>NULL</code> on error</dd></dl>
</dd></dl>
<hr>
<font size=-2><a href="hw_GetIconForDensity_.html" target="_top">Show TOC</a></font>
</body>
</html>