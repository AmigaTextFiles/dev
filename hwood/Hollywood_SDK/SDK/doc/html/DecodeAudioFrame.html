<html>
<!-- generated from hollywood_sdk.meta by MetaDoc 1.13 (c) by Andreas Falkenhahn -->
<head>
<title>DecodeAudioFrame</title>
<meta name="author" content="Andreas Falkenhahn">
<meta name="generator" content="MetaDoc 1.13">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
<!--
body {font-family: sans-serif;}
ul.toc {list-style: none; margin-left: 20px; padding-left: 0px;}
dt.autodoc {font-variant: small-caps; font-size: larger; margin-top: 10px; margin-bottom: 10px; padding-left: 0.2em; padding-top: 0.2em; padding-bottom: 0.2em;
	background-color: #bae1ff; border-width: 1px; border-color: #3baaff; border-style: solid;}
dt.codelist {margin-bottom: 0.2em;}
h2.heading {background-color: #bae1ff; font-family: Arial; padding-top: 0.4em; padding-bottom: 0.4em;}
code {background-color: #f2f2f2; padding: 2px 4px; font-weight: bold;}
pre {background-color: #f2f2f2; border: 1px solid #ddd; padding: 0.3em;}
		
-->
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<dl>
<dt class="autodoc"><b>Name</b></dt><dd>
DecodeAudioFrame -- get audio frame from packet (V5.0)</dd>
<dt class="autodoc"><b>Synopsis</b></dt><dd>
<pre>
int status = DecodeAudioFrame(APTR handle, APTR packet,
               struct DecodeAudioFrameCtrl *ctrl);</pre>
</dd>
<dt class="autodoc"><b>Function</b></dt><dd>
This function must decode the specified audio packet into PCM audio frames. Hollywood will
pass a pointer to a <code>struct DecodeAudioFrameCtrl</code> structure to this function.
This structure looks like the following:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>struct DecodeAudioFrameCtrl
{
    WORD *Buffer;     // [in]
    int BufferSize;   // [in]
    int Written;      // [out]
    int Done;         // [out]
};
</pre></td></tr></table><p>

Your <code>DecodeAudioFrame()</code> implementation has to write to the following members of
this structure:

<p>
<dl>
<dt class="codelist"><code>Buffer:</code></dt>
<dd>
This contains a pointer to a memory buffer allocated for you by Hollywood. You
have to write the individual PCM frames to this buffer. Please note that
audio must always be written as 16-bit PCM frames in native endian byte order.
In case the video uses stereo sound, the PCM samples must be stored in interleaved
order.

<p>
</dd>
<dt class="codelist"><code>BufferSize:</code></dt>
<dd>
Contains the size of the memory buffer in bytes. This should always be enough
to hold one second of audio PCM data but be sure to check against this value
when writing PCM frames to the buffer allocated by Hollywood or you might
trash innocent memory. If there's not enough space, simply set <code>Done</code>
to <code>False</code> and Hollywood will call you again.

<p>
</dd>
<dt class="codelist"><code>Written:</code></dt>
<dd>
This must be set to the number of bytes that you have copied to the memory
buffer. Please note that this is specified in bytes, not in PCM frames or
samples.

<p>
</dd>
<dt class="codelist"><code>Done:</code></dt>
<dd>
This must be set to <code>False</code> if there is more audio data to decode in this packet.
In that case, Hollywood will call you again. If you've decoded all audio data
that is in this packet, set this member to <code>True</code>. Hollywood will then free the
packet using <a href="FreePacket.html">FreePacket()</a>.
</dd></dl>

<p>
This function must return a status code: 0 indicates success, any other value
indicates failure.

<p>
This function must be implemented in a thread-safe way.

<p>
</dd>
<dt class="autodoc"><b>Inputs</b></dt><dd>
<dl>
<dt><i>handle</i></dt>
<dd>handle returned by <a href="OpenVideo.html">OpenVideo()</a></dd>
<dt><i>packet</i></dt>
<dd>pointer to a packet allocated by <a href="NextPacket.html">NextPacket()</a></dd>
<dt><i>ctrl</i></dt>
<dd>pointer to a <code>struct DecodeAudioFrameCtrl</code> to be filled out by the function</dl>
</dd>
<dt class="autodoc"><b>Results</b></dt><dd>
<dl>
<dt><i>status</i></dt>
<dd>a status code (see above)</dd></dl>
</dd></dl>
<hr>
<font size=-2><a href="DecodeAudioFrame_.html" target="_top">Show TOC</a></font>
</body>
</html>