<html>
<!-- generated from hollywood_sdk.meta by MetaDoc 1.13 (c) by Andreas Falkenhahn -->
<head>
<title>hw_SetDisplayAdapter</title>
<meta name="author" content="Andreas Falkenhahn">
<meta name="generator" content="MetaDoc 1.13">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
<!--
body {font-family: sans-serif;}
ul.toc {list-style: none; margin-left: 20px; padding-left: 0px;}
dt.autodoc {font-variant: small-caps; font-size: larger; margin-top: 10px; margin-bottom: 10px; padding-left: 0.2em; padding-top: 0.2em; padding-bottom: 0.2em;
	background-color: #bae1ff; border-width: 1px; border-color: #3baaff; border-style: solid;}
dt.codelist {margin-bottom: 0.2em;}
h2.heading {background-color: #bae1ff; font-family: Arial; padding-top: 0.4em; padding-bottom: 0.4em;}
code {background-color: #f2f2f2; padding: 2px 4px; font-weight: bold;}
pre {background-color: #f2f2f2; border: 1px solid #ddd; padding: 0.3em;}
		
-->
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<dl>
<dt class="autodoc"><b>Name</b></dt><dd>
hw_SetDisplayAdapter -- install a display adapter (V6.0)</dd>
<dt class="autodoc"><b>Synopsis</b></dt><dd>
<pre>
int error = hw_SetDisplayAdapter(hwPluginBase *self, ULONG flags,
                struct hwTagList *tags);</pre>
</dd>
<dt class="autodoc"><b>Function</b></dt><dd>
This function can be used to activate a plugin that has the <code>HWPLUG_CAPS_DISPLAYADAPTER</code>
capability flag set. This function must only be called from inside your <a href="RequirePlugin.html">RequirePlugin()</a>
implementation. If this function succeeds, Hollywood's inbuilt display driver will
be completely replaced by the display driver provided by your plugin and Hollywood will
call into your plugin whenever it needs to deal with displays. In the first parameter, you have
to pass a pointer to the <code>hwPluginBase</code> that Hollywood has passed to your plugin's
<a href="InitPlugin.html">InitPlugin()</a> function. The second parameter must be set to a
combination of flags. The following flags are currently defined:

<p>
<dl>
<dt class="codelist"><code>HWSDAFLAGS_PERMANENT:</code></dt>
<dd>
If this flag is set, the display adapter will be made permanent. This means that other
plugins won't be able to overwrite this display adapter with their own one. If <code>HWSDAFLAGS_PERMANENT</code>
is set, all subsequent calls to <code>hw_SetDisplayAdapter()</code> will fail and your display adapter
will persist.

<p>
</dd>
<dt class="codelist"><code>HWSDAFLAGS_TIEDVIDEOBITMAP:</code></dt>
<dd>
Set this flag to indicate that your video bitmaps depend on your display, i.e. they cannot
exist without the display. This is normally true for all device-dependent bitmaps.
If this flag is set and the user closes the display, Hollywood will call your <a href="ReadVideoPixels.html">ReadVideoPixels()</a>
function to convert the device-dependent bitmaps (DDBs) into device-independent bitmaps (DIBs). Once
the user opens the display again, Hollywood will call your <a href="AllocVideoBitMap.html">AllocVideoBitMap()</a>
function to convert the DIBs back into DDBs. Obviously, this flag is only meaningful if you
also set the <code>HWSDAFLAGS_VIDEOBITMAPADAPTER</code> flag.

<p>
</dd>
<dt class="codelist"><code>HWSDAFLAGS_SOFTWAREFALLBACK:</code></dt>
<dd>
Set this flag if you want your display adapter to fall back to software bitmaps if hardware
bitmaps (i.e. video bitmaps) cannot be allocated for some reason, e.g. out of memory. If
this flag is set and Hollywood cannot allocate a hardware bitmap, it will simply allocate a software
bitmap instead. Obviously, this flag is only meaningful if you also set the <code>HWSDAFLAGS_VIDEOBITMAPADAPTER</code>
flag.

<p>
</dd>
<dt class="codelist"><code>HWSDAFLAGS_CUSTOMSCALING:</code></dt>
<dd>
Set this flag to indicate that your display adapter wants to do scaling on its own
in case autoscaling mode is active. If this flag is not set, Hollywood will do the
autoscaling for you but this might be slower then. See <a href="BltBitMap.html">BltBitMap</a> for details.

<p>
</dd>
<dt class="codelist"><code>HWSDAFLAGS_VIDEOBITMAPADAPTER:</code></dt>
<dd>
Set this flag to indicate that your display adapter supports custom hardware (video)
bitmaps. Hollywood will then call your <a href="AllocVideoBitMap.html">AllocVideoBitMap()</a>
function whenever it needs to allocate a hardware bitmap. See <a href="AllocVideoBitMap.html">AllocVideoBitMap</a> for details.
If you set this flag, you should also provide the <code>HWSDATAG_VIDEOBITMAPCAPS</code> tag to
fine-tune the capabilities of your video bitmap adapter (see below).

<p>
</dd>
<dt class="codelist"><code>HWSDAFLAGS_BITMAPADAPTER:</code></dt>
<dd>
Set this flag to indicate that your display adapter wants to allocate all software
bitmaps on its own. Hollywood will then call your <a href="AllocBitMap.html">AllocBitMap()</a>
function whenever it needs to allocate a software bitmap. Hollywood's inbuilt software
bitmap handler will never be used if this flag is set. See <a href="AllocBitMap.html">AllocBitMap</a> for details.

<p>
</dd>
<dt class="codelist"><code>HWSDAFLAGS_DOUBLEBUFFERADAPTER:</code></dt>
<dd>
Set this flag if your display adapter wants to offer a custom hardware double buffering
mode. If this flag is set, Hollywood will call your plugin's <a href="BeginDoubleBuffer.html">BeginDoubleBuffer()</a>
function when the user calls Hollywood's <code>BeginDoubleBuffer()</code> function with the optional
argument set to <code>True</code>. See <a href="BeginDoubleBuffer.html">BeginDoubleBuffer</a> for details.

<p>
</dd>
<dt class="codelist"><code>HWSDAFLAGS_ALPHADRAW:</code></dt>
<dd>
Set this flag to indicate that your implementations of <a href="RectFill.html">RectFill()</a>,
<a href="Line.html">Line()</a>, and <a href="WritePixel.html">WritePixel()</a> support alpha-blending.
If this flag isn't set, Hollywood will do any alpha-blending on its own and your
implementations of functions like <a href="RectFill.html">RectFill()</a> will only have to
be able to draw static colors. See <a href="RectFill.html">RectFill</a> for details.

<p>
</dd>
<dt class="codelist"><code>HWSDAFLAGS_SLEEP:</code></dt>
<dd>
Set this flag to indicate that you want Hollywood to call your plugin's <a href="Sleep.html">Sleep()</a>
function whenever it needs to sleep for a certain amount of time. See <a href="Sleep.html">Sleep</a> for details.

<p>
</dd>
<dt class="codelist"><code>HWSDAFLAGS_VWAIT:</code></dt>
<dd>
Set this flag to indicate that you want Hollywood to call your plugin's <a href="VWait.html">VWait()</a>
function whenever it needs to wait for the vertical blank. See <a href="VWait.html">VWait</a> for details.

<p>
</dd>
<dt class="codelist"><code>HWSDAFLAGS_MONITORINFO:</code></dt>
<dd>
Set this flag to indicate that your display adapter provides its own functions to
query information about all available monitors. If this flag is set, Hollywood will
call your plugin's <a href="GetMonitorInfo.html">GetMonitorInfo()</a> function to obtain
information about monitors available to the system. See <a href="GetMonitorInfo.html">GetMonitorInfo</a> for details.

<p>
</dd>
<dt class="codelist"><code>HWSDAFLAGS_GRABSCREEN:</code></dt>
<dd>
Set this flag to indicate that your plugin provides custom routines for grabbing the
desktop screen pixels. If this flag is set, Hollywood will call your plugin's <a href="GrabScreenPixels.html">GrabScreenPixels()</a>
function whenever it needs to grab the desktop screen's pixels. If this flag isn't
set, Hollywood will use its inbuilt screen grabber. See <a href="GrabScreenPixels.html">GrabScreenPixels</a> for details.

<p>
</dd>
<dt class="codelist"><code>HWSDAFLAGS_DRAWALWAYS:</code></dt>
<dd>
By default, Hollywood will never call any of your display adapter's functions that draw graphics
to a display when that display is hidden or minimized. If you don't want this behaviour, set
this flag and Hollywood will always call your display adapter's drawing functions, even when
the display is hidden or minimized. (V6.1)

<p>
</dd>
<dt class="codelist"><code>HWSDAFLAGS_PALETTE:</code></dt>
<dd>
Set this flag to tell Hollywood that your display adapter can handle CLUT graphics. If <code>HWSDAFLAGS_PALETTE</code>
is set, display adapters need to be prepared to deal with the new <code>HWBBFLAGS_SRCCLUTBITMAP</code> flag in
<a href="BltBitMap.html">BltBitMap()</a>. If this flag is set, the bitmap passed to <a href="BltBitMap.html">BltBitMap()</a>
is a CLUT one and you need to draw it using the palette and transparent pen passed in the new <code>Palette</code>
and <code>TransPen</code> fields of <code>struct hwBltBitMapCtrl</code>. See <a href="BltBitMap.html">BltBitMap</a> for details. (V9.0)

<p>
</dd>
<dt class="codelist"><code>HWSDAFLAGS_PENDRAW:</code></dt>
<dd>
Set this flag to indicate that your <a href="Line.html">Line()</a>, <a href="RectFill.html">RectFill()</a>, and
<a href="WritePixel.html">WritePixel()</a> implementations can handle pen values instead of colors as well.
In that case, the <code>color</code> argument of those functions will be set to a pen index instead but only if the
display that is passed to the functions is a display that has set <code>HWDISPTAG_PALETTEMODE</code> to <code>True</code> in
its <a href="OpenDisplay.html">OpenDisplay()</a> instantiation. (V9.0)

<p>
</dd>
<dt class="codelist"><code>HWSDAFLAGS_SETPALETTE:</code></dt>
<dd>
Set this flag to indicate that your display adapter can change pixel colors by changing the palette.
This is very useful on classic Amiga hardware where you can simply modify the hardware's color registers
to change pixels without actually copying any pixel data. If display adapters set this flag,
Hollywood will call into the display adapter's <a href="SetPalette.html">SetPalette()</a> function whenever the
palette changes instead of re-drawing all pixels with the new palette by calling your <a href="BltBitMap.html">BltBitMap()</a>
function. To make your display adapter support the new <a href="SetPalette.html">SetPalette()</a> function, you
also need to set the <code>HWEXT_DISPLAYADAPTER_PALETTE</code> extension bit in your plugin. Note that <code>HWSDAFLAGS_SETPALETTE</code>
is only supported for displays that have set <code>HWDISPTAG_PALETTEMODE</code> to <code>True</code> their <a href="OpenDisplay.html">OpenDisplay()</a>
instantiation. (V9.0)

<p>
</dd>
<dt class="codelist"><code>HWSDAFLAGS_CLUTBITMAPADAPTER:</code></dt>
<dd>
Set this flag to indicate that your display adapter can also allocate CLUT bitmaps.
Hollywood will then call your <a href="AllocBitMap.html">AllocBitMap()</a> function whenever
it needs to allocate a CLUT bitmap. Hollywood's inbuilt CLUT bitmap handler will never
be used if this flag is set. See <a href="AllocBitMap.html">AllocBitMap</a> for details. Note that <code>HWSDAFLAGS_BITMAPADAPTER</code>
needs to be set as well if you set this flag. <code>HWSDAFLAGS_CLUTBITMAPADAPTER</code> can't be
used without setting <code>HWSDAFLAGS_BITMAPADAPTER</code>. (V9.0)

<p>
</dd>
<dt class="codelist"><code>HWSDAFLAGS_MENUADAPTER:</code></dt>
<dd>
Set this flag to indicate that your display adapter supports menus. Hollywood will then
pass menus that should be attached to your display in the <code>HWDISPTAG_MENU</code> tag when calling
<a href="OpenDisplay.html">OpenDisplay()</a> or by calling your <a href="SetMenuBar.html">SetMenuBar()</a> function.
Note that if you set this flag, you also need to set the <code>HWEXT_DISPLAYADAPTER_MENUADAPTER</code>
extension bit in your plugin and implement all functions required for menu handling. (V9.0)

<p>
</dd>
<dt class="codelist"><code>HWSDAFLAGS_SETTRAYICON:</code></dt>
<dd>
Set this flag to indicate that your display adapter supports custom tray icons. Hollywood
will then call your <a href="SetTrayIcon.html">SetTrayIcon()</a> implementation whenever the script
changes the tray icon. Note that if you set this flag, you also need to set the <code>HWEXT_DISPLAYADAPTER_TRAYICON</code>
extension bit in your plugin. (V9.0)
</dd></dl>

<p>
Additionally, <code>hw_SetDisplayAdapter()</code> accepts a tag list that allows you to configure
further settings for the new display adapter. The following tags are currently
recognized:

<p>
<dl>
<dt class="codelist"><code>HWSDATAG_PIXELFORMAT:</code></dt>
<dd>
This tag allows you to set the pixel format that should be used when allocating
bitmaps. Hollywood will allocate all of its software bitmaps in the pixel format
specified in the <code>iData</code> member of this tag. See <a href="PixelFormats.html">Pixel format information</a> for a list of available pixel formats.
Please note that this tag doesn't have any effect if you provide your own bitmap
adapter by setting the <code>HWSDAFLAGS_BITMAPADAPTER</code>. Obviously, the pixel format specified
here doesn't have any effect on hardware (video) bitmaps either.

<p>
</dd>
<dt class="codelist"><code>HWSDATAG_BITMAPHOOK:</code></dt>
<dd>
This tag can be used to provide custom routines for drawing to software bitmaps.
You have to set the <code>iData</code> member of this tag to a combination of the following flags:

<p>
<dl>
<dt class="codelist"><code>HWBMAHOOK_BLTBITMAP:</code></dt>
<dd>
Indicates that your <a href="BltBitMap.html">BltBitMap()</a> implementation wants to be called
whenever Hollywood needs to blit a bitmap that doesn't have an accompanying mask or
alpha channel to a software bitmap. Your <a href="BltBitMap.html">BltBitMap()</a> implementation
has to do this blit operation then instead of Hollywood. See <a href="BltBitMap.html">BltBitMap</a> for details.
Hollywood will pass the <code>HWBBFLAGS_DESTBITMAP</code> flag to <a href="BltBitMap.html">BltBitMap()</a>
so that it knows that the specified destination handle is a software bitmap.

<p>
</dd>
<dt class="codelist"><code>HWBMAHOOK_BLTMASKBITMAP:</code></dt>
<dd>
Indicates that your <a href="BltBitMap.html">BltBitMap()</a> implementation wants to be called
whenever Hollywood needs to blit a bitmap that has an accompanying mask to a software bitmap.
Your <a href="BltBitMap.html">BltBitMap()</a> implementation has to do this blit operation then
instead of Hollywood. See <a href="BltBitMap.html">BltBitMap</a> for details.
Hollywood will pass the <code>HWBBFLAGS_DESTBITMAP</code> flag to <a href="BltBitMap.html">BltBitMap()</a>
so that it knows that the specified destination handle is a software bitmap.

<p>
</dd>
<dt class="codelist"><code>HWBMAHOOK_BLTALPHABITMAP:</code></dt>
<dd>
Indicates that your <a href="BltBitMap.html">BltBitMap()</a> implementation wants to be called
whenever Hollywood needs to blit a bitmap that has an an accompanying alpha channel to
a software bitmap. Your <a href="BltBitMap.html">BltBitMap()</a> implementation has to do this
blit operation then instead of Hollywood. See <a href="BltBitMap.html">BltBitMap</a> for details.
Hollywood will pass the <code>HWBBFLAGS_DESTBITMAP</code> flag to <a href="BltBitMap.html">BltBitMap()</a>
so that it knows that the specified destination handle is a software bitmap.

<p>
</dd>
<dt class="codelist"><code>HWBMAHOOK_BLTCLUTBITMAP:</code></dt>
<dd>
Indicates that your <a href="BltBitMap.html">BltBitMap()</a> implementation wants to be called
whenever Hollywood needs to blit a CLUT bitmap to an RGB software bitmap. Your
<a href="BltBitMap.html">BltBitMap()</a> implementation has to do this blit operation then instead
of Hollywood. See <a href="BltBitMap.html">BltBitMap</a> for details. Hollywood will pass the <code>HWBBFLAGS_DESTBITMAP</code>
flag to <a href="BltBitMap.html">BltBitMap()</a> so that it knows that the specified destination
handle is a software bitmap. Note that <code>HWBMAHOOK_BLTCLUTBITMAP</code> is only supported
if <code>HWSDAFLAGS_PALETTE</code> is set as well. (V9.0)

<p>
</dd>
<dt class="codelist"><code>HWBMAHOOK_RECTFILL:</code></dt>
<dd>
Indicates that your <a href="RectFill.html">RectFill()</a> implementation wants to be called
whenever Hollywood needs draw a filled rectangle to a software bitmap. Your <a href="RectFill.html">RectFill()</a> implementation
has to do this operation then instead of Hollywood. See <a href="RectFill.html">RectFill</a> for details.
Hollywood will pass the <code>HWRFFLAGS_DESTBITMAP</code> flag to <a href="RectFill.html">RectFill()</a>
so that it knows that the specified destination handle is a software bitmap.

<p>
</dd>
<dt class="codelist"><code>HWBMAHOOK_WRITEPIXEL:</code></dt>
<dd>
Indicates that your <a href="WritePixel.html">WritePixel()</a> implementation wants to be called
whenever Hollywood needs plot a single pixel to a software bitmap. Your <a href="WritePixel.html">WritePixel()</a> implementation
has to do this operation then instead of Hollywood. See <a href="WritePixel.html">WritePixel</a> for details.
Hollywood will pass the <code>HWWPFLAGS_DESTBITMAP</code> flag to <a href="WritePixel.html">WritePixel()</a>
so that it knows that the specified destination handle is a software bitmap.

<p>
</dd>
<dt class="codelist"><code>HWBMAHOOK_LINE:</code></dt>
<dd>
Indicates that your <a href="Line.html">Line()</a> implementation wants to be called
whenever Hollywood needs draw a line to a software bitmap. Your <a href="Line.html">Line()</a> implementation
has to do this operation then instead of Hollywood. See <a href="Line.html">Line</a> for details.
Hollywood will pass the <code>HWLIFLAGS_DESTBITMAP</code> flag to <a href="Line.html">Line()</a>
so that it knows that the specified destination handle is a software bitmap.
</dd></dl>

<p>
</dd>
<dt class="codelist"><code>HWSDATAG_VIDEOBITMAPCAPS:</code></dt>
<dd>
If you've enabled video bitmap support for this display adapter by setting the <code>HWSDAFLAGS_VIDEOBITMAPADAPTER</code>
flag, the <code>iData</code> member of this tag configures the exact capability set of your video bitmap
adapter. This must be set to a combination of the following flags:

<p>
<dl>
<dt class="codelist"><code>HWVBMCAPS_SCALE:</code></dt>
<dd>
Set this to indicate that your video bitmap adapter supports bitmap scaling.
See <a href="AllocVideoBitMap.html">AllocVideoBitMap</a> for details.

<p>
</dd>
<dt class="codelist"><code>HWVBMCAPS_TRANSFORM:</code></dt>
<dd>
Set this to indicate that your video bitmap adapter supports bitmap transformation.
See <a href="AllocVideoBitMap.html">AllocVideoBitMap</a> for details.

<p>
</dd>
<dt class="codelist"><code>HWVBMCAPS_OFFSCREENCOLOR:</code></dt>
<dd>
Set this to indicate that your <a href="BltBitMap.html">BltBitMap()</a>, <a href="RectFill.html">RectFill()</a>,
<a href="Line.html">Line()</a>, and <a href="WritePixel.html">WritePixel()</a> functions can draw to
off-screen video bitmaps in color mode. Hollywood will pass one of the <code>HWxxFLAGS_DESTVIDEOBITMAP</code>
flags to these functions to indicate that the destination is a video bitmap.

<p>
</dd>
<dt class="codelist"><code>HWVBMCAPS_OFFSCREENALPHA:</code></dt>
<dd>
Set this to indicate that your <a href="BltBitMap.html">BltBitMap()</a>, <a href="RectFill.html">RectFill()</a>,
<a href="Line.html">Line()</a>, and <a href="WritePixel.html">WritePixel()</a> functions can draw to
the alpha channel of off-screen video bitmaps. Hollywood will pass the <code>HWxxFLAGS_DESTVIDEOBITMAP</code>
and the <code>HWxxFLAGS_ALPHAONLY</code> flags to these functions to indicate that the destination is a
video bitmap and that the function must only draw to the alpha channel.

<p>
</dd>
<dt class="codelist"><code>HWVBMCAPS_BLITTRANSFORM:</code></dt>
<dd>
Set this to indicate that your <a href="BltBitMap.html">BltBitMap()</a> implementation is able to
do its own bitmap transformation based on the <code>Matrix</code> member that is set in <code>struct hwBltBitMapCtrl</code>.
If you don't set this tag, Hollywood will do the transformation for you but this might be
slower than a customized implementation in <a href="BltBitMap.html">BltBitMap()</a>. (V8.0)

<p>
</dd>
<dt class="codelist"><code>HWVBMCAPS_BLITALPHAMOD:</code></dt>
<dd>
Set this to indicate that your <a href="BltBitMap.html">BltBitMap()</a> implementation is able to
do its own alpha modulation based on the <code>AlphaMod</code> member that is set in <code>struct hwBltBitMapCtrl</code>.
If you don't set this tag, Hollywood will do the alpha modulation for you but this might be
slower than a customized implementation in <a href="BltBitMap.html">BltBitMap()</a>. (V8.0)
</dd></dl>
</dd></dl>

<p>
See <a href="DisplayAdapterOverview.html">Display adapter plugins</a> for information on how to write display adapter plugins.

<p>
</dd>
<dt class="autodoc"><b>Designer compatibility</b></dt><dd>
Unsupported

<p>
</dd>
<dt class="autodoc"><b>Inputs</b></dt><dd>
<dl>
<dt><i>self</i></dt>
<dd><code>hwPluginBase</code> pointer passed to <a href="InitPlugin.html">InitPlugin()</a></dd>
<dt><i>flags</i></dt>
<dd>combination of flags (see above)</dd>
<dt><i>tags</i></dt>
<dd>tag list specifying further options (see above)</dl>
</dd>
<dt class="autodoc"><b>Results</b></dt><dd>
<dl>
<dt><i>error</i></dt>
<dd>error code or 0 for success</dd></dl>
</dd></dl>
<hr>
<font size=-2><a href="hw_SetDisplayAdapter_.html" target="_top">Show TOC</a></font>
</body>
</html>