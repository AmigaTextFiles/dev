<html>
<!-- generated from hollywood_sdk.meta by MetaDoc 1.13 (c) by Andreas Falkenhahn -->
<head>
<title>SaveIcon</title>
<meta name="author" content="Andreas Falkenhahn">
<meta name="generator" content="MetaDoc 1.13">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
<!--
body {font-family: sans-serif;}
ul.toc {list-style: none; margin-left: 20px; padding-left: 0px;}
dt.autodoc {font-variant: small-caps; font-size: larger; margin-top: 10px; margin-bottom: 10px; padding-left: 0.2em; padding-top: 0.2em; padding-bottom: 0.2em;
	background-color: #bae1ff; border-width: 1px; border-color: #3baaff; border-style: solid;}
dt.codelist {margin-bottom: 0.2em;}
h2.heading {background-color: #bae1ff; font-family: Arial; padding-top: 0.4em; padding-bottom: 0.4em;}
code {background-color: #f2f2f2; padding: 2px 4px; font-weight: bold;}
pre {background-color: #f2f2f2; border: 1px solid #ddd; padding: 0.3em;}
		
-->
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<dl>
<dt class="autodoc"><b>Name</b></dt><dd>
SaveIcon -- save icon to disk (V9.0)</dd>
<dt class="autodoc"><b>Synopsis</b></dt><dd>
<pre>
int ok = SaveIcon(STRPTR filename, struct hwIconList *list, struct
             hwTagList *tags);</pre>
</dd>
<dt class="autodoc"><b>Function</b></dt><dd>
This function must save the icon to the specified filename. The icon's images
are passed to <code>SaveIcon()</code> in the form of a <code>struct hwIconList</code> that
contains one node per image.

<p>
<code>struct hwIconList</code> looks like this:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>struct hwIconList
{
    struct hwIconList *Succ;
    APTR Data;
    int Width;
    int Height;
    ULONG Flags;
    ULONG *Palette;
    ULONG TransPen;
    int Depth;
    APTR UserData;
};
</pre></td></tr></table><p>

For each node in the list, <code>struct hw_IconList</code> will be initialized as
follows:

<p>
<dl>
<dt class="codelist"><code>Succ:</code></dt>
<dd>
Will be set to a pointer to the next list node or <code>NULL</code> if this node is the last one.

<p>
</dd>
<dt class="codelist"><code>Data:</code></dt>
<dd>
Will be set to the image's pixel data. For RGB images, this will be set to a 32-bit
ARGB pixel buffer, for CLUT images to an 8-bit pixel buffer. For 32-bit images the
alpha byte will always be set for every pixel. For CLUT images, the <code>Palette</code> member
(see below) will be set. The pixel buffer's size will be exactly <code>width * height * bpp</code>.
No row padding will be used.

<p>
</dd>
<dt class="codelist"><code>Width:</code></dt>
<dd>
Contains the image's width in pixels.

<p>
</dd>
<dt class="codelist"><code>Height:</code></dt>
<dd>
Contains the image's height in pixels.

<p>
</dd>
<dt class="codelist"><code>Flags:</code></dt>
<dd>
May be set to a combination of flags for this image. The following flags are
currently supported:

<p>
<dl>
<dt class="codelist"><code>HWICONFLAGS_DEFAULT:</code></dt>
<dd>
This flag marks the default icon. Hollywood's icon type allows scripts to designate
an icon as the default one. It's up to you how you interpret and handle the default
icon.

<p>
</dd>
<dt class="codelist"><code>HWICONFLAGS_SELECTED:</code></dt>
<dd>
If this flag is set, the image in this list node describes a selected icon
state. On AmigaOS and compatibles, icon images usually have two states: normal and
selected. This flag will be used to mark an image as the selected image.

<p>
</dd>
<dt class="codelist"><code>HWICONFLAGS_OPAQUE:</code></dt>
<dd>
This flag will be set if the image doesn't use any transparency and all alpha bytes are
set to 255 (i.e. visible).
</dd></dl>

<p>
</dd>
<dt class="codelist"><code>Palette:</code></dt>
<dd>
If the image is a CLUT image, this will be set to a pointer to an array
of <code>ULONGs</code> which contains the palette colors for the image. The palette
colors are stored as raw RGB values.

<p>
</dd>
<dt class="codelist"><code>TransPen:</code></dt>
<dd>
If the image is a CLUT image and has a transparent pen, this member will be set
to the pen that should be transparent. If there is no transparent pen, this
will be set to <code>HWPEN_NONE</code>.

<p>
</dd>
<dt class="codelist"><code>Depth:</code></dt>
<dd>
This will be set to the image's depth. This will be a bit depth either between 1
and 8 for CLUT images or 32 for RGB images with alpha channel.
</dd></dl>

<p>
The <code>tags</code> argument will be set to a tag list that can contain the following
tags:

<p>
<dl>
<dt class="codelist"><code>HWSVICONTAG_FORMAT:</code></dt>
<dd>
This tag contains the identifier of the icon format the file should be saved in.
You only need to handle this tag if your plugin supports more than one output icon
format. Nevertheless, this tag will always be present.

<p>
</dd>
<dt class="codelist"><code>HWSVICONTAG_COMPRESSION:</code></dt>
<dd>
Hollywood's <code>SaveIcon()</code> function allows scripts to specify a compression level
between 0 and 100 because some icon formats might use lossy compression.
<code>HWSVICONTAG_COMPRESSION</code> will simply forward the specified compression level
to your plugin.

<p>
</dd>
<dt class="codelist"><code>HWSVICONTAG_AMIGAEXT:</code></dt>
<dd>
If this tag is present, the <code>pData</code> member of it will be set to a <code>struct hwIconAmigaExt</code>
pointer. This structure is used for storing metadata that is present in every
Amiga icon. See <a href="LoadIcon.html">LoadIcon</a> for a detailed description of this structure.

<p>
</dd>
<dt class="codelist"><code>HWSVICONTAG_ADAPTER:</code></dt>
<dd>
Starting with Hollywood 10.0, users can specify the file adapter that should be used
to save an icon. If this tag is set, Hollywood wants your plugin to use the file adapter
specified in the <code>pData</code> member of the tag to save the icon. This means that you
have to use <a href="hw_FOpenExt.html">hw_FOpenExt()</a> instead of <a href="hw_FOpen.html">hw_FOpen()</a>
to save the icon. See <a href="hw_FOpenExt.html">hw_FOpenExt</a> for details. (V10.0)

<p>
</dd>
<dt class="codelist"><code>HWSVICONTAG_USERTAGS:</code></dt>
<dd>
If this is set, <code>pData</code> will point to a <code>struct hwUserTagList</code> containing
a list of user tags passed by the Hollywood script. User tags are a way of passing additional information
from Hollywood scripts to plugin functions. Note that even if your plugin doesn't
support any user tags, you should still look for this tag and pass the user
tags to <a href="hw_FOpenExt.html">hw_FOpenExt</a> because the user tags passed in <code>UserTags</code> could
also be intended for another plugin, namely the file adapter plugin passed
in <code>Adapter</code>. See <a href="UserTags.html">User tags</a> for details. (V10.0)
</dd></dl>

<p>
This function has to return <code>True</code> if the image has been successfully saved or <code>False</code>
in case of an error.

<p>
</dd>
<dt class="autodoc"><b>Inputs</b></dt><dd>
<dl>
<dt><i>filename</i></dt>
<dd>path to a destination file</dd>
<dt><i>list</i></dt>
<dd>linked list of all images that should be saved to the icon</dd>
<dt><i>tags</i></dt>
<dd>tag list containing further parameters</dl>
</dd>
<dt class="autodoc"><b>Results</b></dt><dd>
<dl>
<dt><i>ok</i></dt>
<dd><code>True</code> or <code>False</code> indicating success or failure</dd></dl>
</dd></dl>
<hr>
<font size=-2><a href="SaveIcon_.html" target="_top">Show TOC</a></font>
</body>
</html>