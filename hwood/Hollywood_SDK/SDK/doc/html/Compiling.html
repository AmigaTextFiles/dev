<html>
<!-- generated from hollywood_sdk.meta by MetaDoc 1.13 (c) by Andreas Falkenhahn -->
<head>
<title>Compiling plugins</title>
<meta name="author" content="Andreas Falkenhahn">
<meta name="generator" content="MetaDoc 1.13">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
<!--
body {font-family: sans-serif;}
ul.toc {list-style: none; margin-left: 20px; padding-left: 0px;}
dt.autodoc {font-variant: small-caps; font-size: larger; margin-top: 10px; margin-bottom: 10px; padding-left: 0.2em; padding-top: 0.2em; padding-bottom: 0.2em;
	background-color: #bae1ff; border-width: 1px; border-color: #3baaff; border-style: solid;}
dt.codelist {margin-bottom: 0.2em;}
h2.heading {background-color: #bae1ff; font-family: Arial; padding-top: 0.4em; padding-bottom: 0.4em;}
code {background-color: #f2f2f2; padding: 2px 4px; font-weight: bold;}
pre {background-color: #f2f2f2; border: 1px solid #ddd; padding: 0.3em;}
		
-->
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<h2 class="heading">2.6 Compiling plugins</h2>

<p>
All source files that include <code>hollywood/plugin.h</code> need to be compiled with certain
preprocessor commands defined, depending on the platform. Here is a list of preprocessor
commands that may need to be defined, depending on your platform:

<p>
<dl>
<dt class="codelist"><code>HW_AMIGAOS3</code></dt>
<dd>
Needs to be defined for AmigaOS 3 builds.

<p>
</dd>
<dt class="codelist"><code>HW_AMIGAOS4</code></dt>
<dd>
Needs to be defined for AmigaOS 4 builds.

<p>
</dd>
<dt class="codelist"><code>HW_ANDROID</code></dt>
<dd>
Needs to be defined for Android builds.

<p>
</dd>
<dt class="codelist"><code>HW_AROS</code></dt>
<dd>
Needs to be defined for AROS builds.

<p>
</dd>
<dt class="codelist"><code>HW_LINUX</code></dt>
<dd>
Needs to be defined for Linux builds.

<p>
</dd>
<dt class="codelist"><code>HW_LITTLE_ENDIAN</code></dt>
<dd>
Needs to be defined for little endian builds.

<p>
</dd>
<dt class="codelist"><code>HW_MACOS</code></dt>
<dd>
Needs to be defined for macOS builds.

<p>
</dd>
<dt class="codelist"><code>HW_MORPHOS</code></dt>
<dd>
Needs to be defined for MorphOS builds.

<p>
</dd>
<dt class="codelist"><code>HW_WARPOS</code></dt>
<dd>
Needs to be defined for WarpOS builds.

<p>
</dd>
<dt class="codelist"><code>HW_WIN32</code></dt>
<dd>
Needs to be defined for Windows builds.
</dd></dl>

<p>
Also make sure to use the <code>HW_EXPORT</code> macro on all function declarations that you export as
shared library functions to Hollywood, i.e.

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>HW_EXPORT int InitPlugin(hwPluginBase *self, hwPluginAPI *cl, STRPTR p)
{
    ...
}
</pre></td></tr></table><p>

Note that when targetting Hollywood 10.0 or better, your plugin function exports should
always use the <code>hwp_</code> prefix. Thus, if you target Hollywood 10.0 or better, you should
export your <a href="InitPlugin.html">InitPlugin()</a> function like this instead:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>HW_EXPORT int hwp_InitPlugin(hwPluginBase *s, hwPluginAPI *c, STRPTR p)
{
    ...
}
</pre></td></tr></table><p>

Using the <code>hwp_</code> prefix makes sure that there are no clashes with other (system) APIs.
Keep in mind, though, that if you use the <code>hwp_</code> prefix in your function exports, your
plugin won't run on any Hollywood version that is older than 10.0. That's why in
this documentation the <code>hwp_</code> prefix won't be explicitly mentioned in the documentation
of the individual plugin functions because many plugin authors might want to target older
Hollywood versions as well. If your plugin needs Hollywood 10.0 or better, though, you
should always use the <code>hwp_</code> prefix in your function exports and you should also define
the <code>HW_USEPREFIX</code> macro so that the correct prototypes are used in <code>hollywood/plugin.h</code>.

<p>
Finally, don't forget to target your plugin for the right architecture. The 32-bit version
of Hollywood can only load plugins compiled for a 32-bit architecture whereas the 64-bit
version can only load plugins compiled for 64-bit. Modern compilers often default to 64-bit
binaries nowadays so keep in mind that these binaries can't be loaded by the 32-bit versions
of Hollywood. To make it easier for you to distinguish between 32-bit and 64-bit builds,
the Hollywood SDK will automatically define the <code>HW_64BIT</code> preprocessor constant when it
has detected that you are building for a 64-bit target.

<p>
On AmigaOS you also need to make sure that you do not link the compiler's startup code
against the plugin as this can cause conflicts. You also must not use any library auto-open
features provided by the compiler. You need to manually open all Amiga libraries that your
plugin requires. See <a href="AmigaOSCRT.html">AmigaOS C runtime limitations</a> for details.

<p>
<hr>
<font size=-2><a href="Compiling_.html" target="_top">Show TOC</a></font>
</body>
</html>