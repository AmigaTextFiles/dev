<html>
<!-- generated from hurl.meta by MetaDoc 1.13 (c) by Andreas Falkenhahn -->
<head>
<title>Using the low-level interface</title>
<meta name="author" content="Andreas Falkenhahn">
<meta name="generator" content="MetaDoc 1.13">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
<!--
body {font-family: sans-serif;}
ul.toc {list-style: none; margin-left: 20px; padding-left: 0px;}
dt.autodoc {font-variant: small-caps; font-size: larger; margin-top: 10px; margin-bottom: 10px; padding-left: 0.2em; padding-top: 0.2em; padding-bottom: 0.2em;
	background-color: #bae1ff; border-width: 1px; border-color: #3baaff; border-style: solid;}
dt.codelist {margin-bottom: 0.2em;}
h2.heading {background-color: #bae1ff; font-family: Arial; padding-top: 0.4em; padding-bottom: 0.4em;}
code {background-color: #f2f2f2; padding: 2px 4px; font-weight: bold;}
pre {background-color: #f2f2f2; border: 1px solid #ddd; padding: 0.3em;}
		
-->
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<h2 class="heading">3.3 Using the low-level interface</h2>

<p>
Using hURL's low-level interface is more difficult than using the high-level interface
because it allows you to access curl's APIs directly. This means that you should first
make yourself familiar with curl's API so that you know how it is designed and how it
can serve your purposes.

<p>
Basically, using a curl API directly involves the following three steps:

<p>
<ol>
<li>Create a curl object handle, e.g. a curl easy handle.
</li><li>Do something with the handle, e.g. start a transfer.
</li><li>Destroy the handle.
</li></ol>

<p>
For example, to transfer a file using curl's easy interface, you could use the
following code:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>@REQUIRE &quot;hurl&quot;

; this function will be called whenever there is new data
Function p_WriteData(data$)
   WriteBytes(1, data$)
EndFunction

OpenFile(1, &quot;test.html&quot;, #MODE_WRITE)

; create easy object and configure it
e = hurl.Easy({URL = &quot;https://www.paypal.com/&quot;, WriteFunction =
        p_WriteData, FollowLocation = True})

; transfer data
e:Perform()

; destroy easy object
e:Close()
CloseFile(1)
</pre></td></tr></table><p>

The code above downloads the page at <a href="https://www.paypal.com/" target="_blank">https://www.paypal.com/</a> and saves it to the
file <code>test.html</code> using curl's easy interface. It does so by first creating an
easy object using <a href="hurlEasy.html">hurl.Easy()</a> and then setting the options <code>#CURLOPT_URL</code>,
<code>#CURLOPT_WRITEFUNCTION</code>, and <code>#CURLOPT_FOLLOWLOCATION</code> on that easy object.

<p>
As shown above, curl options can be get directly when creating curl objects. Alternatively,
you can also create an empty curl object and get the options afterwards, like so:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>e = hurl.Easy()
e:SetOpt_URL(&quot;https://www.paypal.com/&quot;)
e:SetOpt_WriteFunction(p_WriteData)
e:SetOpt_FollowLocation(True)
</pre></td></tr></table><p>

This code does the same thing as the code in corresponding section above. The only
difference is that options aren't get at creation time but after creation. Furthermore,
you can also get multiple options at once after object creation. Here is another
alternative for the two code snippets above:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>e = hurl.Easy()
e:SetOpt({URL = &quot;https://www.paypal.com/&quot;, WriteFunction = p_WriteData,
            FollowLocation = True})
</pre></td></tr></table><p>

Finally, you can also use <a href="easySetOpt.html">easy:SetOpt()</a> to get curl options on curl easy handles.
So there is even a fourth way of doing what the code snippets above do. Here it is:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>e = hurl.Easy()
e:SetOpt(#CURLOPT_URL, &quot;https://www.paypal.com/&quot;)
e:SetOpt(#CURLOPT_WRITEFUNCTION, p_WriteData)
e:SetOpt(#CURLOPT_FOLLOWLOCATION, True)
</pre></td></tr></table><p>

For more information on the function of curl's various options, please refer to the following
chapters.

<p>
<hr>
<font size=-2><a href="LowLevelInterface_.html" target="_top">Show TOC</a></font>
</body>
</html>