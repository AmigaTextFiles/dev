<html>
<!-- generated from Plananarama.meta by MetaDoc 1.14 (c) by Andreas Falkenhahn -->
<head>
<title>Palette mode</title>
<meta name="author" content="Andreas Falkenhahn">
<meta name="generator" content="MetaDoc 1.14">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
<!--
body {font-family: sans-serif;}
ul.toc {list-style: none; margin-left: 20px; padding-left: 0px;}
dt.autodoc {font-variant: small-caps; font-size: larger; margin-top: 10px; margin-bottom: 10px; padding-left: 0.2em; padding-top: 0.2em; padding-bottom: 0.2em;
	background-color: #bae1ff; border-width: 1px; border-color: #3baaff; border-style: solid;}
dt.codelist {margin-bottom: 0.2em;}
h2.heading {background-color: #bae1ff; font-family: Arial; padding-top: 0.4em; padding-bottom: 0.4em;}
code {background-color: #f2f2f2; padding: 2px 4px; font-weight: bold;}
pre {background-color: #f2f2f2; border: 1px solid #ddd; padding: 0.3em;}
		
-->
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<h2 class="heading">3.4 Palette mode</h2>

<p>
When using palette mode with Plananarama, you can achieve a better performance than in remapping
mode but it comes at the cost that you must design your script specifically for Plananarama's
palette mode. For example, you must make sure that your Hollywood display is a palette display.
Otherwise you obviously won't gain any performance improvement because if the Hollywood display
doesn't use a palette but RGB graphics, all graphics still have to be remapped just like in
remapping mode.

<p>
Here is some example code that sets up a palette display and puts Plananarama in palette mode:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>@REQUIRE &quot;plananarama&quot;, {PaletteMode = True}
@DISPLAY {Palette = #PALETTE_AGA}

SetPaletteMode(#PALETTEMODE_PEN)
SetFillStyle(#FILLCOLOR)
SetDrawPen(2)
Box(#CENTER, #CENTER, 320, 240)
</pre></td></tr></table><p>

The code does several very important steps that are necessary to take full advantage of
Plananarama's palette mode: First, it creates a palette display by using the <code>Palette</code> tag
to assign the inbuilt palette <code>#PALETTE_AGA</code> to the display. Alternatively, you could also
create a palette display by simply assigning a palette BGPic to it, e.g. like so:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>@REQUIRE &quot;plananarama&quot;, {PaletteMode = True}
@BGPIC 1, &quot;background.iff&quot;, {LoadPalette = True}
</pre></td></tr></table><p>

Since we set <code>LoadPalette</code> to <code>True</code> in the code above, your display will automatically become
a palette display because its BGPic is a palette one.

<p>
The second very important thing the first code snippet does is calling <code>SetPaletteMode()</code> with
<code>#PALETTEMODE_PEN</code> passed to it. This is very important because if you don't do that, Hollywood
will still remap all graphics to your display's palette which is slow. Only by setting palette
mode to <code>#PALETTEMODE_PEN</code> can you tell Hollywood to not do any remapping but just copy the raw
pixels. Of course, this means that if you draw images their palette must match the display
palette or you'll get wrong colors.

<p>
Finally, the code snippet calls <code>SetDrawPen()</code> to set a drawing pen. This step is very important
if you want to draw graphics primitives like lines, rectangles, circles, and so on. If the
palette mode has been set to <code>#PALETTEMODE_PEN</code>, Hollywood functions like <code>Box()</code>, <code>Line()</code>, <code>Circle()</code>,
etc. will ignore the RGB color that is passed to them. Instead, they will draw using the pen
that has been set using <code>SetDrawPen()</code>. This is why the code above will draw a white rectangle
and not a black one, even though the color argument in the call to <code>Box()</code> defaults to black
because it has been left out.

<p>
Since we have full control over the hardware color registers, we could now easily turn the
white rectangle into a red one by just changing the color of palette pen 2. This can be done
like this:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>SetPen(2, #RED)
</pre></td></tr></table><p>

Then we could smoothly fade out the red rectangle to black by doing something like this:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>For Local k = 32 To 0 Step -1
   SetPen(2, RGB(255 * (k/32), 0, 0))
   VWait
Next
</pre></td></tr></table><p>

Of course you could also cycle the palette colors and apply a completely new palette using
Hollywood's <code>SetPalette()</code> function. Lots of things are possible in palette mode.

<p>
Another advantage of using palette mode is that your script won't require guigfx.library
and render.library. To speed up drawing in palette mode, it's advised to install BlazeWCP
though. See <a href="Requirements.html">Requirements</a> for details.

<p>
<hr>
<font size=-2><a href="PaletteMode_.html" target="_top">Show TOC</a></font>
</body>
</html>