<html>
<!-- generated from Plananarama.meta by MetaDoc 1.14 (c) by Andreas Falkenhahn -->
<head>
<title>planar.CreateSprite</title>
<meta name="author" content="Andreas Falkenhahn">
<meta name="generator" content="MetaDoc 1.14">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
<!--
body {font-family: sans-serif;}
ul.toc {list-style: none; margin-left: 20px; padding-left: 0px;}
dt.autodoc {font-variant: small-caps; font-size: larger; margin-top: 10px; margin-bottom: 10px; padding-left: 0.2em; padding-top: 0.2em; padding-bottom: 0.2em;
	background-color: #bae1ff; border-width: 1px; border-color: #3baaff; border-style: solid;}
dt.codelist {margin-bottom: 0.2em;}
h2.heading {background-color: #bae1ff; font-family: Arial; padding-top: 0.4em; padding-bottom: 0.4em;}
code {background-color: #f2f2f2; padding: 2px 4px; font-weight: bold;}
pre {background-color: #f2f2f2; border: 1px solid #ddd; padding: 0.3em;}
		
-->
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<dl>
<dt class="autodoc"><b>Name</b></dt><dd>
planar.CreateSprite -- create hardware sprite from brush (V2.0)</dd>
<dt class="autodoc"><b>Synopsis</b></dt><dd>
<pre>
[id] = planar.CreateSprite(id, brushid)</pre>
</dd>
<dt class="autodoc"><b>Function</b></dt><dd>
This function converts the brush specified by <code>brushid</code> into a hardware sprite
and assigns the identifier <code>id</code> to it. If you specify <code>Nil</code> in the <code>id</code> argument,
<code>planar.CreateSprite()</code> will automatically choose a vacant identifier for this
sprite and return it to you.

<p>
Note that the brush you pass to this function must respect the Amiga hardware
sprite limitations. This means that it must adhere to the following rules:

<p>
<ul class="toc">
<li>&ndash;&nbsp;it must be a palette brush
</li><li>&ndash;&nbsp;on OCS/ECS systems the maximum sprite width is 16 pixels
</li><li>&ndash;&nbsp;on AGA systems the maximum sprite width is 64 pixels
</li><li>&ndash;&nbsp;the palette brush must use either 4 or 16 colors
</li></ul>

<p>
Also note that the Amiga hardware supports only 8 sprite DMA channels. Each
channel can have a 4 color sprite. The 8 sprite DMA channels are tied to the
following color registers:

<p>
<ul class="toc">
<li>&ndash;&nbsp;Channels 0 and 1: Color registers 16 to 19 (color 16 is transparent).
Note that channel 0 is reserved for use by Intuition for the mouse pointer.
</li><li>&ndash;&nbsp;Channels 2 and 3: Color registers 20 to 23 (color 20 is transparent).
</li><li>&ndash;&nbsp;Channels 4 and 5: Color registers 24 to 27 (color 24 is transparent).
</li><li>&ndash;&nbsp;Channels 6 and 7: Color registers 28 to 31 (color 28 is transparent).
</li></ul>

<p>
Two channels can be combined to create a 16 color sprite. This means that if
you use 16 color sprites, you can only have 4 instead of 8 because a 16 color
sprite will block two sprite DMA channels. 16 color sprites are tied to the
color registers 16 to 31 (color 16 is transparent).

<p>
Note that <code>planar.CreateSprite()</code> won't map the sprite to a sprite DMA channel immediately.
This is the job of <a href="planarMapSprite.html">planar.MapSprite()</a>. Thus, you
can create more hardware sprites with <code>planar.CreateSprite()</code> than there are sprite
DMA channels. This is useful if you want to animate sprites, for example.
In that case, you could first convert all the animation frames to hardware
sprites using <code>planar.CreateSprite()</code> and then map and unmap the single animation
frames before/after displaying them with <a href="planarMoveSprite.html">planar.MoveSprite()</a>.

<p>
</dd>
<dt class="autodoc"><b>Inputs</b></dt><dd>
<dl>
<dt><i>id</i></dt>
<dd>identifier for the hardware sprite or <code>Nil</code> for auto id selection</dd>
<dt><i>brushid</i></dt>
<dd>identifier of the palette brush to be converted to a hardware sprite</dl>
</dd>
<dt class="autodoc"><b>Results</b></dt><dd>
<dl>
<dt><i>id</i></dt>
<dd>optional: identifier of the hardware sprite; will only be returned
if you pass <code>Nil</code> as argument 1 (see above)</dl>
</dd>
<dt class="autodoc"><b>Example</b></dt><dd>
<pre>
@REQUIRE &quot;plananarama&quot;, {PaletteMode = True}
@DISPLAY {Palette = #PALETTE_AGA}
SetPaletteMode(#PALETTEMODE_PEN)
SetFillStyle(#FILLCOLOR)
CreateBrush(1, 64, 64, {Palette = #PALETTE_GRAY4})
SelectBrush(1)
For Local k = 0 To 2
   SetDrawPen(k + 1)
   Box(k * 21, 0, 21, 64)
Next
EndSelect
planar.CreateSprite(1, 1)
planar.MapSprite(1)
Repeat
   planar.MoveSprite(1, MouseX(), MouseY())
   planar.VWait()
Forever
</pre>
The code above will create a 4 color 64x64 sprite, map it to a sprite DMA
channel and then move it to where the mouse pointer is. Note that it doesn't
matter that we pass <code>#PALETTE_GRAY4</code> to <code>CreateBrush()</code> since the hardware sprite
will use the screen's palette so we just use <code>#PALETTE_GRAY4</code> as a dummy to
tell <code>CreateBrush()</code> to give us a 16 color sprite.

</dd></dl>
<hr>
<font size=-2><a href="planarCreateSprite_.html" target="_top">Show TOC</a></font>
</body>
</html>