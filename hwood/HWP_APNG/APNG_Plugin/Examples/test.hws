@REQUIRE "apng"

@DISPLAY {Width = 800, Height = 536, Color = #WHITE}

@ANIM 1, "spinfox.png", {LoadAlpha = True}
@ANIM 2, "chompy.png", {LoadAlpha = True}

EnableLayers()

w = {GetAttribute(#ANIM, 1, #ATTRWIDTH), GetAttribute(#ANIM, 2, #ATTRWIDTH)}
h = {GetAttribute(#ANIM, 1, #ATTRHEIGHT), GetAttribute(#ANIM, 2, #ATTRHEIGHT)}

SetFillStyle(#FILLCOLOR)
Box(0, 0, 800, 536, #WHITE)

colors = {#RED, #BLUE, #GREEN, #YELLOW, #LIME, #FUCHSIA, #GRAY, #PURPLE, #OLIVE}

For Local y = 0 To 3
	For Local x = 0 To 4
		DisplayAnimFrame(IIf(y % 2, 2, 1), x * w[y%2], dy, 1)
	Next
	
	dy = dy + h[y%2]
Next
	
SetInterval(1, Function() 

	Local k = 2
	Local t = {}
	Local i = 0

	For Local y = 0 To 3
		For Local x = 0 To 4
			t[i] = k
			t[i+1] = {Frame = 0}
			i = i + 2
			k = k + 1
		Next
	Next

	SetLayerStyle(Unpack(t))

	EndFunction, 1000\20)

SetInterval(2, Function()

	SetLayerStyle(1, {Color = colors[cc]})
	cc = Wrap(cc + 1, 0, ListItems(colors))

	EndFunction, 2000)

Repeat
	WaitEvent
Forever
