;AWNP_test03.hws by Salvatore Di Vincenzo 2015

@DISPLAY {hidden=True}

OpenFile(1,"awnpipe:/xct", #MODE_READWRITE)
OpenFile(2,"gadgets4.gui", #MODE_READ)
;Carica le linee di testo dal file gadgets.gui, e lo scrive nella pipe
While Not Eof(2) do WriteLine(1,ReadLine(2))
CloseFile(2)
Wait(10)
i=0
cmd={}

repeat
    writeline(1, "con")
    cmd[i] = readline(1)

    ;Questo comando print è molto utile in fase di debug, per vedere
    ;quale numero corrisponde ad uno specifico gadget
    ;print(cmd[i])

    ;Gestione degli eventi dei gadget, e della chiusura della finestra e del programma
	if i>8
    	if cmd[i-6] = "c" and cmd[i-5]="l" and cmd[i-4]="o" and cmd[i-3]="s" and cmd[i-2]="e" and cmd[i-1]=" " and cmd[i]="0"
    		closefile(1) ;chiude il file aperto per lavorare sulla pipe
    		end() ;chiude il programma anche per hollywood
    	endif
    endif
    i=i+1
    checkevent()
Forever
