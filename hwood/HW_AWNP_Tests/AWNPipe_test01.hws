;AWNP_test01.hws by Salvatore Di Vincenzo 2015

@display {hidden=true}

;Apertura di AWNPipe, e scrittura dei componenti della finestra
openfile(1,"awnpipe:/xct", #MODE_READWRITE)
writeline(1,"title \"Esempio 1\" cg db dg  sg v h tl a cs")
writeline(1,"layout v si")
writeline(1,"layout v si")
writeline(1,"string gt AmigaOS cj ro minw 200")
writeline(1,"Button gt Test_1")
writeline(1,"le")
writeline(1,"le")
writeline(1,"open")
wait(10)

i=0
cmd={}

repeat
    writeline(1, "con")
    cmd[i] = readline(1)

    ;Questo comando print è molto utile in fase di debug, per vedere
    ;quale numero corrisponde ad uno specifico gadget
    ;print(cmd[i])

    ;Gestione degli eventi dei gadget, e della chiusura della finestra e del programma
	if i>8
    	if cmd[i-6] = "c" and cmd[i-5]="l" and cmd[i-4]="o" and cmd[i-3]="s" and cmd[i-2]="e" and cmd[i-1]=" " and cmd[i]="0"
    		closefile(1) ;chiude il file aperto per lavorare sulla pipe
    		end() ;chiude il programma anche per hollywood
    	endif

        if cmd[i-7] = "g" and  cmd[i-6]="a" and cmd[i-5]="d" and cmd[i-4]="g" and cmd[i-3]="e" and  cmd[i-2]="t" and  cmd[i-1]=" " and  cmd[i]="4"
            systemrequest("Test","Messaggio di\nprova!!!","ok",#reqicon_information)
        endif
    endif
    i=i+1
    checkevent()
forever
