;
; $VER: MUIRoyale-Setup 1.7 (01.10.17)
;
; Done by Andreas Falkenhahn
;

(message (cat "\nWelcome to the Setup utility for\n\n"
	"MUI Royale 1.7\n\n"
	"Copyright © 2012-2017 by Andreas Falkenhahn"
))

(welcome)

(set basepath
	(askdir
		(prompt  "Where do you want to have MUI Royale installed? (a drawer will be created)")
		(help    @askdir-help)
		(default "SYS:")
	)
)

(set sstr (substr basepath (- (strlen basepath) 1) 1))
(if (or (= sstr "/") (= sstr ":"))
	(set destpath (cat basepath "MUIRoyale"))
	(set destpath (cat basepath "/MUIRoyale"))
)

(set whichver
	(askchoice
		(prompt  "Please select your platform.")
		(help    @askoptions-help)
		(choices "AmigaOS 3" "MorphOS" "AmigaOS 4" "AROS (x86)")
	)
)

; AmigaOS3 (default)
(set #platform "AmigaOS3")

; MorphOS
(if (= whichver 1) (
	(set #platform "MorphOS")
))

; AmigaOS4
(if (= whichver 2) (
	(set #platform "AmigaOS4")
))

; AROS
(if (= whichver 3) (
	(set #platform "AROS")
))

(set @default-dest destpath)

(makedir destpath)
(makedir "LIBS:Hollywood")

(copylib
	(source (cat "Platforms/" #platform "/muiroyale.hwp"))
	(dest   "LIBS:Hollywood")
	(prompt "muiroyale.hwp")
	(help @copylib-help)
	(optional "nofail" "force" "askuser")
	(confirm)
)

; no longer required since v1.3 -> kill any potential old copy
(delete "LIBS:Hollywood/muiroyale.hwc" (optional "force"))

(copyfiles
	(source  "Data.icon")
	(dest    basepath)
	(newname "MUIRoyale.info")
	(optional force oknodelete)
)

(copyfiles
	(source "Data")
	(dest   destpath)
	(all)
	(optional "nofail" "force" "askuser")
)

(if (exists "Hollywood:GUI" (noreq)) (

	(makedir "Hollywood:Examples/MUIRoyale")

	(copyfiles
		(source "Data/ExamplesHWGUI")
		(dest   "Hollywood:Examples/MUIRoyale")
		(all)
		(optional "nofail" "force" "askuser")
	)

	(copyfiles (source "Data/Examples/AppWindow.hws") (dest "Hollywood:Examples/MUIRoyale/AppWindow") (optional force oknodelete))
	(copyfiles (source "Data/Examples/AppWindow.xml") (dest "Hollywood:Examples/MUIRoyale/AppWindow") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Class1.hws") (dest "Hollywood:Examples/MUIRoyale/Class1") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Class1.xml") (dest "Hollywood:Examples/MUIRoyale/Class1") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Class2.hws") (dest "Hollywood:Examples/MUIRoyale/Class2") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Class2.xml") (dest "Hollywood:Examples/MUIRoyale/Class2") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Class3.hws") (dest "Hollywood:Examples/MUIRoyale/Class3") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Class3.xml") (dest "Hollywood:Examples/MUIRoyale/Class3") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Dynamic1.hws") (dest "Hollywood:Examples/MUIRoyale/Dynamic1") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Dynamic1.xml") (dest "Hollywood:Examples/MUIRoyale/Dynamic1") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Dynamic2.hws") (dest "Hollywood:Examples/MUIRoyale/Dynamic2") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Dynamic2.xml") (dest "Hollywood:Examples/MUIRoyale/Dynamic2") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Dynamic3.hws") (dest "Hollywood:Examples/MUIRoyale/Dynamic3") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Dynamic3.xml") (dest "Hollywood:Examples/MUIRoyale/Dynamic3") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Dynamic4.hws") (dest "Hollywood:Examples/MUIRoyale/Dynamic4") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Dynamic4.xml") (dest "Hollywood:Examples/MUIRoyale/Dynamic4") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Menus.hws") (dest "Hollywood:Examples/MUIRoyale/Menus") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Menus.xml") (dest "Hollywood:Examples/MUIRoyale/Menus") (optional force oknodelete))
	(copyfiles (source "Data/Examples/MUI-Demo.hws") (dest "Hollywood:Examples/MUIRoyale/MUI-Demo") (optional force oknodelete))
	(copyfiles (source "Data/Examples/MUI-Demo.xml") (dest "Hollywood:Examples/MUIRoyale/MUI-Demo") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Pages.hws") (dest "Hollywood:Examples/MUIRoyale/Pages") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Pages.xml") (dest "Hollywood:Examples/MUIRoyale/Pages") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Popup.hws") (dest "Hollywood:Examples/MUIRoyale/Popup") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Popup.xml") (dest "Hollywood:Examples/MUIRoyale/Popup") (optional force oknodelete))
	(copyfiles (source "Data/Examples/ShowHide.hws") (dest "Hollywood:Examples/MUIRoyale/ShowHide") (optional force oknodelete))
	(copyfiles (source "Data/Examples/ShowHide.xml") (dest "Hollywood:Examples/MUIRoyale/ShowHide") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Virtual.hws") (dest "Hollywood:Examples/MUIRoyale/Virtual") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Virtual.xml") (dest "Hollywood:Examples/MUIRoyale/Virtual") (optional force oknodelete))

	(copyfiles (source "Data/Examples/External/Listtree.hws") (dest "Hollywood:Examples/MUIRoyale/Listtree") (optional force oknodelete))
	(copyfiles (source "Data/Examples/External/Listtree.xml") (dest "Hollywood:Examples/MUIRoyale/Listtree") (optional force oknodelete))
	(copyfiles (source "Data/Examples/External/TextEditor.hws") (dest "Hollywood:Examples/MUIRoyale/TextEditor") (optional force oknodelete))
	(copyfiles (source "Data/Examples/External/TextEditor.xml") (dest "Hollywood:Examples/MUIRoyale/TextEditor") (optional force oknodelete))
	(copyfiles (source "Data/Examples/External/Toolbar.hws") (dest "Hollywood:Examples/MUIRoyale/Toolbar") (optional force oknodelete))
	(copyfiles (source "Data/Examples/External/Toolbar.xml") (dest "Hollywood:Examples/MUIRoyale/Toolbar") (optional force oknodelete))
	(makedir "Hollywood:Examples/MUIRoyale/TextEditor/TextEditor")
	(copyfiles (source "Data/Examples/External/TextEditor") (dest "Hollywood:Examples/MUIRoyale/TextEditor/TextEditor") (all) (optional "nofail" "force" "askuser"))
	(makedir "Hollywood:Examples/MUIRoyale/Toolbar/Toolbar")
	(copyfiles (source "Data/Examples/External/Toolbar") (dest "Hollywood:Examples/MUIRoyale/Toolbar/Toolbar") (all) (optional "nofail" "force" "askuser"))

	(copyfiles (source "Data/Examples/Hollywood/Anim.hws") (dest "Hollywood:Examples/MUIRoyale/Anim") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Hollywood/Anim.xml") (dest "Hollywood:Examples/MUIRoyale/Anim") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Hollywood/Image.hws") (dest "Hollywood:Examples/MUIRoyale/Image") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Hollywood/Image.xml") (dest "Hollywood:Examples/MUIRoyale/Image") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Hollywood/MultiDisplays.hws") (dest "Hollywood:Examples/MUIRoyale/MultiDisplays") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Hollywood/MultiDisplays.xml") (dest "Hollywood:Examples/MUIRoyale/MultiDisplays") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Hollywood/Scrollbar.hws") (dest "Hollywood:Examples/MUIRoyale/Scrollbar") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Hollywood/Scrollbar.xml") (dest "Hollywood:Examples/MUIRoyale/Scrollbar") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Hollywood/SongPlayer.hws") (dest "Hollywood:Examples/MUIRoyale/SongPlayer") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Hollywood/SongPlayer.xml") (dest "Hollywood:Examples/MUIRoyale/SongPlayer") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Hollywood/VideoPlayer.hws") (dest "Hollywood:Examples/MUIRoyale/VideoPlayer") (optional force oknodelete))
	(copyfiles (source "Data/Examples/Hollywood/VideoPlayer.xml") (dest "Hollywood:Examples/MUIRoyale/VideoPlayer") (optional force oknodelete))

	(makedir "Hollywood:Examples/MUIRoyale/Anim/Anim")
	(copyfiles (source "Data/Examples/Hollywood/Anim") (dest "Hollywood:Examples/MUIRoyale/Anim/Anim") (all) (optional "nofail" "force" "askuser"))
	(makedir "Hollywood:Examples/MUIRoyale/Image/Image")
	(copyfiles (source "Data/Examples/Hollywood/Image") (dest "Hollywood:Examples/MUIRoyale/Image/Image") (all) (optional "nofail" "force" "askuser"))
	(makedir "Hollywood:Examples/MUIRoyale/MultiDisplays/MultiDisplays")
	(copyfiles (source "Data/Examples/Hollywood/MultiDisplays") (dest "Hollywood:Examples/MUIRoyale/MultiDisplays/MultiDisplays") (all) (optional "nofail" "force" "askuser"))
	(makedir "Hollywood:Examples/MUIRoyale/Scrollbar/Scrollbar")
	(copyfiles (source "Data/Examples/Hollywood/Scrollbar") (dest "Hollywood:Examples/MUIRoyale/Scrollbar/Scrollbar") (all) (optional "nofail" "force" "askuser"))
	(makedir "Hollywood:Examples/MUIRoyale/SongPlayer/SongPlayer")
	(copyfiles (source "Data/Examples/Hollywood/SongPlayer") (dest "Hollywood:Examples/MUIRoyale/SongPlayer/SongPlayer") (all) (optional "nofail" "force" "askuser"))
	(makedir "Hollywood:Examples/MUIRoyale/VideoPlayer/VideoPlayer")
	(copyfiles (source "Data/Examples/Hollywood/VideoPlayer") (dest "Hollywood:Examples/MUIRoyale/VideoPlayer/VideoPlayer") (all) (optional "nofail" "force" "askuser"))
))

(set #cmdline (cat "Assign MUIRoyale: \"" destpath "\""))

(startup
	(prompt  "\nAn assign has to be inserted in your user-startup. Please click Continue.")
	(help    @startup-help)
	"MUIRoyale"
	(command #cmdline)
	(confirm)
)

(run #cmdline)

(message (cat "\nMUI Royale optionally requires the following components:\n\n"
	"- TextEditor.mcc 15.47 or better for the <texteditor> class\n"
	"- TheBar.mcc 26.11 or better for the <toolbar> class\n"
	"- codesets.library for UTF-8 support\n\n"
	"None of these components is required by default. You only need them if you want to use the features described above."))

(message (cat "\nMUI Royale comes with over 20 ready-to-run examples.\n\n"
	"The examples have been integrated into your Hollywood GUI (only "
	"if Hollywood is installed on this system). Now that you have installed "
	"MUI Royale, there will be a new MUI Royale tab in the Hollywood GUI which "
	"allows you to conveniently launch the example scripts that come with MUI Royale.\n\n"
	"Click to see a screenshot that shows how to launch the example scripts "
	"that come with MUI Royale from the Hollywood GUI."))

(run ("Sys:Utilities/MultiView GUI.png"))

(exit)
