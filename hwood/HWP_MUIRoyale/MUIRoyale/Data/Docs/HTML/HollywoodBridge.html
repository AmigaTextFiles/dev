<html>
<!-- generated from muiroyale.meta by MetaDoc 1.7 (c) by Andreas Falkenhahn -->
<head>
<title>Hollywood bridge</title>
<meta name="author" content="Andreas Falkenhahn">
<meta name="generator" content="MetaDoc 1.7">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
<!--
body {font-family: sans-serif;}
ul.toc {list-style: none; margin-left: 20px; padding-left: 0px;}
dt.autodoc {font-variant: small-caps; font-size: larger; margin-top: 10px; margin-bottom: 10px; padding-left: 0.2em; padding-top: 0.2em; padding-bottom: 0.2em;
	background-color: #bae1ff; border-width: 1px; border-color: #3baaff; border-style: solid;}
dt.codelist {margin-bottom: 0.2em;}
h2.heading {background-color: #bae1ff; font-family: Arial; padding-top: 0.4em; padding-bottom: 0.4em;}
code {background-color: #f2f2f2; padding: 2px 4px; font-weight: bold;}
pre {background-color: #f2f2f2; border: 1px solid #ddd; padding: 0.3em;}
		
-->
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<h2 class="heading">3.14 Hollywood bridge</h2>

<p>
A powerful feature of MUI Royale is that it allows you to embed complete
Hollywood displays inside your MUI GUIs using <a href="Hollywood.html">Hollywood class</a>.
Whenever you draw something to a Hollywood display that is attached to Hollywood
class, it will automatically be drawn to your MUI GUI as well. You can even hide
the Hollywood display so that the user does not even notice that Hollywood is
running in the background. Furthermore, all mouse clicks and key strokes that
happen inside Hollywood class will be forwarded to the corresponding Hollywood
display as normal Hollywood events. Thus, Hollywood class allows you to use almost
all of Hollywood's powerful features inside a MUI GUI as well.

<p>
Let's have a look at an example. The following code uses Hollywood class to embed
a playing animation of size 320x200 inside a MUI GUI. For this, the Hollywood
display's size is changed to 320x200 and then it is embedded in the MUI GUI using
a MUI object of type <a href="Hollywood.html">Hollywood class</a>. Here is the XML GUI
declaration first:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;iso-8859-1&quot;?&gt;
&lt;application base=&quot;HOLIBRIDGE&quot;&gt;
   &lt;window title=&quot;Hollywood bridge&quot; muiid=&quot;MAIN&quot; notify=&quot;closerequest&quot;&gt;
      &lt;vgroup&gt;
         &lt;hgroup&gt;
            &lt;rectangle/&gt;
            &lt;hollywood display=&quot;1&quot;/&gt;
            &lt;rectangle/&gt;
         &lt;/hgroup&gt;
         &lt;hgroup&gt;
            &lt;button id=&quot;play&quot; notify=&quot;pressed&quot;&gt;Play&lt;/button&gt;
            &lt;button id=&quot;stop&quot; notify=&quot;pressed&quot;&gt;Stop&lt;/button&gt;
         &lt;/hgroup&gt;
      &lt;/vgroup&gt;
   &lt;/window&gt;
&lt;/application&gt;
</pre></td></tr></table><p>

Note that we use MUI objects of <a href="Rectangle.html">Rectangle class</a> to pad the
non-resizable Hollywood object. This is necessary for the GUI to stay resizable.
Here is the code now that shows you to connect MUI and Hollywood:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>@ANIM 1, &quot;amy_walks.anim&quot;
@DISPLAY {Width = 320, Height = 200, Hidden = True}

Function p_AnimFunc()
   Local numframes = GetAttribute(#ANIM, 1, #ATTRNUMFRAMES)
   curframe = Wrap(curframe + 1, 1, numframes + 1)
   DisplayAnimFrame(1, 0, 0, curframe)
EndFunction

Function p_EventFunc(msg)
   Switch msg.Class
   Case &quot;Window&quot;:
      Switch msg.Attribute
      Case &quot;CloseRequest&quot;:
         End
      EndSwitch
   Case &quot;Button&quot;:
      Switch msg.Attribute
      Case &quot;Pressed&quot;:
         Switch msg.ID
         Case &quot;play&quot;:
            SetInterval(1, p_AnimFunc, 50)
         Case &quot;stop&quot;:
            ClearInterval(1)
         EndSwitch
      EndSwitch
   EndSwitch
EndFunction

InstallEventHandler({MUIRoyale = p_EventFunc})
mui.CreateGUI(FileToString(&quot;GUI.xml&quot;))

Repeat
   WaitEvent
Forever
</pre></td></tr></table><p>

With a little bit more work we can also make the anim movable with the
mouse. The user can then click into the Hollywood object and drag the
anim around using his mouse. Here is the code for that:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>@ANIM 1, &quot;amy_walks.anim&quot;
@DISPLAY {Width = 320, Height = 200, Hidden = True}

Function p_AnimFunc()
   Local numframes = GetAttribute(#ANIM, 1, #ATTRNUMFRAMES)
   curframe = Wrap(curframe + 1, 1, numframes + 1)
   SelectBrush(1)
   Cls
   DisplayAnimFrame(1, offx, offy, curframe)
   EndSelect
   DisplayBrush(1, 0, 0)
EndFunction

Function p_MouseFunc()
   If IsLeftMouse() = True
     Local mx, my = MouseX(), MouseY()
     If (grabx = -1) And (graby = -1) Then
       grabx, graby = mx - offx, my - offy
     offx = mx - grabx
     offy = my - graby
   Else
     grabx, graby = -1, -1
   EndIf
EndFunction

Function p_EventFunc(msg)
   Switch msg.Class
   Case &quot;Window&quot;:
      Switch msg.Attribute
      Case &quot;CloseRequest&quot;:
         End
      EndSwitch
   Case &quot;Button&quot;:
      Switch msg.Attribute
      Case &quot;Pressed&quot;:
         Switch msg.ID
         Case &quot;play&quot;:
            SetInterval(1, p_AnimFunc, 50)
            SetInterval(2, p_MouseFunc, 20)
         Case &quot;stop&quot;:
            ClearInterval(1)
            ClearInterval(2)
         EndSwitch
      EndSwitch
   EndSwitch
EndFunction

CreateBrush(1, 320, 200)

InstallEventHandler({MUIRoyale = p_EventFunc})
mui.CreateGUI(FileToString(&quot;GUI8.xml&quot;))

Repeat
   WaitEvent
Forever
</pre></td></tr></table><p>

Finally, it is also possible to make the Hollywood object resizable by
specifying the attributes <a href="HollywoodMinWidth.html">Hollywood.MinWidth</a>, <a href="HollywoodMinHeight.html">Hollywood.MinHeight</a>,
<a href="HollywoodMaxWidth.html">Hollywood.MaxWidth</a>, and <a href="HollywoodMaxHeight.html">Hollywood.MaxHeight</a>.
Whenever the user resizes the MUI window, your Hollywood display will
receive a <code>SizeWindow</code> event that you can listen to using the
<code>InstallEventHandler()</code> Hollywood function. When using a resizable
Hollywood object, we can remove the two <code>&lt;rectangle&gt;</code> objects
used solely as padding space. The XML code looks like this then:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;iso-8859-1&quot;?&gt;
&lt;application base=&quot;HOLIBRIDGE&quot;&gt;
   &lt;window title=&quot;Hollywood bridge&quot; muiid=&quot;MAIN&quot; notify=&quot;closerequest&quot;&gt;
      &lt;vgroup&gt;
         &lt;hollywood display=&quot;1&quot; minwidth=&quot;32&quot; minheight=&quot;32&quot;
            maxwidth=&quot;16384&quot; maxheight=&quot;16384&quot;/&gt;
         &lt;hgroup&gt;
            &lt;button id=&quot;play&quot; notify=&quot;pressed&quot;&gt;Play&lt;/button&gt;
            &lt;button id=&quot;stop&quot; notify=&quot;pressed&quot;&gt;Stop&lt;/button&gt;
         &lt;/hgroup&gt;
      &lt;/vgroup&gt;
   &lt;/window&gt;
&lt;/application&gt;
</pre></td></tr></table><p>

Note that we specify 16384 for both <a href="HollywoodMaxWidth.html">Hollywood.MaxWidth</a> and
<a href="HollywoodMaxHeight.html">Hollywood.MaxHeight</a>. This is to indicate that our Hollywood
object doesn't really have a maximum size. That is why we set these
two attribute to the maximum allowable size of 16384 pixels. This
should be sufficiently large enough for most purposes.

<p>
Our code is pretty much the same as before with the exception that we
now have to handle the <code>SizeWindow</code> event to take care of
GUI resize events. Here is the adapted code from above:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>@ANIM 1, &quot;amy_walks.anim&quot;
@DISPLAY {Width = 320, Height = 200, Hidden = True}

Function p_AnimFunc()
   Local numframes = GetAttribute(#ANIM, 1, #ATTRNUMFRAMES)
   curframe = Wrap(curframe + 1, 1, numframes + 1)
   SelectBrush(1)
   Cls
   DisplayAnimFrame(1, offx, offy, curframe,
     {Width = swidth, Height = sheight})
   EndSelect
   DisplayBrush(1, 0, 0)
EndFunction

Function p_MouseFunc()
   If IsLeftMouse() = True
     Local mx, my = MouseX(), MouseY()
     If (grabx = -1) And (graby = -1) Then
       grabx, graby = mx - offx, my - offy
     offx = mx - grabx
     offy = my - graby
   Else
     grabx, graby = -1, -1
   EndIf
EndFunction

Function p_EventFunc(msg)
   If msg.Action = &quot;SizeWindow&quot;
     swidth = msg.Width
     sheight = msg.Height
     CreateBrush(1, swidth, sheight)
     Return
   EndIf

   Switch msg.Class
   Case &quot;Window&quot;:
      Switch msg.Attribute
      Case &quot;CloseRequest&quot;:
         End
      EndSwitch
   Case &quot;Button&quot;:
      Switch msg.Attribute
      Case &quot;Pressed&quot;:
         Switch msg.ID
         Case &quot;play&quot;:
            SetInterval(1, p_AnimFunc, 50)
            SetInterval(2, p_MouseFunc, 20)
         Case &quot;stop&quot;:
            ClearInterval(1)
            ClearInterval(2)
         EndSwitch
      EndSwitch
   EndSwitch
EndFunction

swidth, sheight = 320, 200
CreateBrush(1, swidth, sheight)

InstallEventHandler({MUIRoyale = p_EventFunc, SizeWindow = p_EventFunc})
mui.CreateGUI(FileToString(&quot;GUI8.xml&quot;))

Repeat
   WaitEvent
Forever
</pre></td></tr></table><p>

From this example you can see that <a href="Hollywood.html">Hollywood class</a> is really
quite powerful and can be used to achieve lots of innovative GUI ideas only limited
by your creativity. By the way, the example above is also included in the MUI Royale
distribution. You can find it in the drawer <code>Examples/Hollywood</code>.

<p>
<hr>
<font size=-2><a href="HollywoodBridge_.html" target="_top">Show TOC</a></font>
</body>
</html>