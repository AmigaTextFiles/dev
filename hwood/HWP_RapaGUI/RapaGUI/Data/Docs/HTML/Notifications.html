<html>
<!-- generated from RapaGUI.meta by MetaDoc 1.16 (c) by Andreas Falkenhahn -->
<head>
<title>Attribute notifications</title>
<meta name="author" content="Andreas Falkenhahn">
<meta name="generator" content="MetaDoc 1.16">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
<!--
body {font-family: sans-serif;}
ul.toc {list-style: none; margin-left: 20px; padding-left: 0px;}
dt.autodoc {font-variant: small-caps; font-size: larger; margin-top: 10px; margin-bottom: 10px; padding-left: 0.2em; padding-top: 0.2em; padding-bottom: 0.2em;
	background-color: #bae1ff; border-width: 1px; border-color: #3baaff; border-style: solid;}
dt.codelist {margin-bottom: 0.2em;}
h2.heading {background-color: #bae1ff; font-family: Arial; padding-top: 0.4em; padding-bottom: 0.4em;}
code {background-color: #f2f2f2; padding: 2px 4px; font-weight: bold;}
pre {background-color: #f2f2f2; border: 1px solid #ddd; padding: 0.3em;}
		
-->
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<h2 class="heading">3.7 Attribute notifications</h2>

<p>
RapaGUI's event handling is based on the values of certain attributes of
the different MOAI classes. You can listen to the values of all attributes
that have an applicability of <code>N</code>. If you set up a listener on an
attribute value, RapaGUI will run your event callback whenever the attribute
value changes.

<p>
For example, you could set up a listener on the <a href="ListviewActive.html">Listview.Active</a>
attribute which contains the active item of a listview widget. If you do
this, your event handler will be called whenever the active item of the
respective listview widget changes. To install a listener on a certain
attribute, you have to set up a notification for this attribute in your
object declaration. This is done directly in the XML file by using the
<code>Notify</code> attribute that is accepted by all MOAI classes:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>&lt;listview id=&quot;lv&quot; notify=&quot;active&quot;&gt;
   &lt;column&gt;
      &lt;item&gt;One&lt;/item&gt;
      &lt;item&gt;Two&lt;/item&gt;
      &lt;item&gt;Three&lt;/item&gt;
   &lt;/column&gt;
&lt;/listview&gt;
</pre></td></tr></table><p>

The code above will run your event callback whenever the active item of
the listview object that has the id <code>lv</code> changes because you've requested
to listen to the value of the <a href="ListviewActive.html">Listview.Active</a> attribute.

<p>
If you want to listen to multiple notifications on the same MOAI object,
you have to separate them using semicolons, e.g.:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>&lt;listview id=&quot;lv&quot; notify=&quot;active; doubleclick&quot;&gt;
...
&lt;/listview&gt;
</pre></td></tr></table><p>

As you can see, the code above installs listeners on both attributes, <a href="ListviewActive.html">Listview.Active</a>
and <a href="ListviewDoubleClick.html">Listview.DoubleClick</a>, so that your event callback is also
invoked when the user double clicks on a listview entry.

<p>
Alternatively, you can also set up or remove notifications at run-time using the
<a href="moaiNotify.html">moai.Notify()</a> function from your code.

<p>
To print the currently active listview item from your event handler, you could
then use the following code:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>Function p_EventHandler(msg)
    Switch msg.action
    Case &quot;RapaGUI&quot;:
       Switch msg.attribute
       Case &quot;Active&quot;:
          Switch msg.id
          Case &quot;lv&quot;:
             DebugPrint(&quot;Active listview item:&quot;, msg.triggervalue)
          EndSwitch
       EndSwitch
    EndSwitch
EndFunction
</pre></td></tr></table><p>

Keep in mind, though, that attribute values can also be changed manually.
For example, your program might want to manually activate a certain listview
item by doing something like this:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>moai.Set(&quot;lv&quot;, &quot;active&quot;, 5)  ; activate item number 6
</pre></td></tr></table><p>

Since the call above changes the value of the <a href="ListviewActive.html">Listview.Active</a> attribute
as well, your event handler callback will be triggered by this call, too. If you
don't want this, you can use the special attribute <a href="MOAINoNotify.html">MOAI.NoNotify</a>
in your call to <a href="moaiSet.html">moai.Set()</a>. Whenever <a href="MOAINoNotify.html">MOAI.NoNotify</a>
is set to <code>True</code>, the attribute's value will be changed without invoking any
event handlers. Thus, to change the active listview item without triggering any
event callbacks, you would just write:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>moai.Set(&quot;lv&quot;, &quot;active&quot;, 5, &quot;nonotify&quot;, True)
</pre></td></tr></table><p>

Finally, as already mentioned in the previous section, there are some attributes
that RapaGUI always listens to. These are: <a href="ButtonPressed.html">Button.Pressed</a>, <a href="ButtonSelected.html">Button.Selected</a>,
<a href="ToolbarbuttonPressed.html">Toolbarbutton.Pressed</a>, <a href="ToolbarbuttonSelected.html">Toolbarbutton.Selected</a>, and <a href="MenuitemSelected.html">Menuitem.Selected</a>.
Since these are so common and widely used and you will normally always want to listen to attributes
like <a href="ButtonPressed.html">Button.Pressed</a> because pressing a button will always cause a reaction, RapaGUI
listens to them automatically. Thus, you don't have to explicitly request a notification on these
attributes, i.e. writing the following is redundant:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>&lt;button id=&quot;btn&quot; notify=&quot;pressed&quot;&gt;Click me&lt;/button&gt;
</pre></td></tr></table><p>

Instead, you can just write:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>&lt;button id=&quot;btn&quot;&gt;Click me&lt;/button&gt;
</pre></td></tr></table><p>

The same is true for menu items and toolbar buttons.

<p>
<hr>
<font size=-2><a href="Notifications_.html" target="_top">Show TOC</a></font>
</body>
</html>