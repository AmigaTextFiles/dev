<html>
<!-- generated from RapaGUI.meta by MetaDoc 1.16 (c) by Andreas Falkenhahn -->
<head>
<title>Dynamic objects</title>
<meta name="author" content="Andreas Falkenhahn">
<meta name="generator" content="MetaDoc 1.16">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
<!--
body {font-family: sans-serif;}
ul.toc {list-style: none; margin-left: 20px; padding-left: 0px;}
dt.autodoc {font-variant: small-caps; font-size: larger; margin-top: 10px; margin-bottom: 10px; padding-left: 0.2em; padding-top: 0.2em; padding-bottom: 0.2em;
	background-color: #bae1ff; border-width: 1px; border-color: #3baaff; border-style: solid;}
dt.codelist {margin-bottom: 0.2em;}
h2.heading {background-color: #bae1ff; font-family: Arial; padding-top: 0.4em; padding-bottom: 0.4em;}
code {background-color: #f2f2f2; padding: 2px 4px; font-weight: bold;}
pre {background-color: #f2f2f2; border: 1px solid #ddd; padding: 0.3em;}
		
-->
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<h2 class="heading">3.8 Dynamic objects</h2>

<p>
Most applications create their GUI by a simple call to <a href="moaiCreateApp.html">moai.CreateApp()</a>
which is passed an XML declaration that contains the complete user interface of the whole
application. In some situations, though, it might be necessary to create MOAI objects after
the call to <a href="moaiCreateApp.html">moai.CreateApp()</a> and insert them into the existing
application.

<p>
This is possible by using the <a href="moaiCreateObject.html">moai.CreateObject()</a> API. This function
allows you to create a MOAI object from an XML declaration, pretty similar to what <a href="moaiCreateApp.html">moai.CreateApp()</a>
does except that <a href="moaiCreateObject.html">moai.CreateObject()</a> doesn't allow you to create
an application because there can be only one application.

<p>
For example, you can create a button using <a href="moaiCreateObject.html">moai.CreateObject()</a> like
this:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>moai.CreateObject([[&lt;button id=&quot;mybutton&quot;&gt;Click me&lt;/button&gt;]])
</pre></td></tr></table><p>

It is very important to set an identifer for the MOAI object you create using <a href="moaiCreateObject.html">moai.CreateObject()</a>
because the identifier is needed to refer to the object later. Now that we have created the
button we could insert it into an existing window layout. Let's suppose our window layout
currently looks like this:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>&lt;window&gt;
   &lt;hgroup id=&quot;mygroup&quot;&gt;
      &lt;button id=&quot;ok&quot;&gt;OK&lt;/button&gt;
      &lt;button id=&quot;cancel&quot;&gt;Cancel&lt;/button&gt;
   &lt;/hgroup&gt;
&lt;/window&gt;
</pre></td></tr></table><p>

We could now use the <a href="GroupInsert.html">Group.Insert</a> method to insert the newly created button after the
&quot;OK&quot; button. We would have to use the following code to do that:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>moai.DoMethod(&quot;mygroup&quot;, &quot;initchange&quot;)
moai.DoMethod(&quot;mygroup&quot;, &quot;insert&quot;, &quot;mybutton&quot;, &quot;ok&quot;)
moai.DoMethod(&quot;mygroup&quot;, &quot;exitchange&quot;)
</pre></td></tr></table><p>

You can see that we're also calling the methods <a href="GroupInitChange.html">Group.InitChange</a> and <a href="GroupExitChange.html">Group.ExitChange</a>.
This is very important. Those methods have to be run whenever you change the children of a group, i.e.
you remove or add children. RapaGUI needs you to call these methods because after removing or adding
group children a window relayout becomes necessary. That's why simply calling <a href="GroupInsert.html">Group.Insert</a>
or any other method that changes the number of group children isn't enough.

<p>
Of course, we can also remove children from groups. This is possible by using <a href="GroupRemove.html">Group.Remove</a>.
The following code removes the &quot;Cancel&quot; button from the above window layout:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>moai.DoMethod(&quot;mygroup&quot;, &quot;initchange&quot;)
moai.DoMethod(&quot;mygroup&quot;, &quot;remove&quot;, &quot;cancel&quot;)
moai.DoMethod(&quot;mygroup&quot;, &quot;exitchange&quot;)
</pre></td></tr></table><p>

After this call, the MOAI object with the id &quot;cancel&quot; has become a detached object. This means that you
could also attach it to a group now again by using <a href="GroupInsert.html">Group.Insert</a> or a similar method.
Note that all methods which insert MOAI objects into existing layouts only accept detached
objects. It's not possible to insert the same MOAI object into multiple groups. As soon as you
insert a MOAI object into a group (or menu tree), it changes its state from detached to attached.
Once a MOAI object is in attached state, it can no longer be passed to methods which expect
a detached object. In order to turn a MOAI object from attached to detached state, you need
to use a method like <a href="GroupRemove.html">Group.Remove</a> to detach a MOAI object from a group.

<p>
As a final note, the XML code you pass to <a href="moaiCreateObject.html">moai.CreateObject()</a> can
also be a complete tree, e.g. you could create a complete window with just a single call to
<a href="moaiCreateObject.html">moai.CreateObject()</a>. This is all possible. <a href="moaiCreateObject.html">moai.CreateObject()</a>
isn't limited to creating single MOAI objects but it can create multiple objects for you as
well. When you're creating a window or dialog with <a href="moaiCreateObject.html">moai.CreateObject()</a>,
though, don't forget to add it to the application object by calling <a href="ApplicationAddWindow.html">Application.AddWindow</a>
since window objects are also in detached state by default unless they have been added to
an application object. For dialogs, you can just use <a href="moaiCreateDialog.html">moai.CreateDialog()</a>
which will implicitly call <a href="ApplicationAddWindow.html">Application.AddWindow</a>.

<p>
<hr>
<font size=-2><a href="DynamicObjects_.html" target="_top">Show TOC</a></font>
</body>
</html>