<html>
<!-- generated from RapaGUI.meta by MetaDoc 1.16 (c) by Andreas Falkenhahn -->
<head>
<title>Tutorial</title>
<meta name="author" content="Andreas Falkenhahn">
<meta name="generator" content="MetaDoc 1.16">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
<!--
body {font-family: sans-serif;}
ul.toc {list-style: none; margin-left: 20px; padding-left: 0px;}
dt.autodoc {font-variant: small-caps; font-size: larger; margin-top: 10px; margin-bottom: 10px; padding-left: 0.2em; padding-top: 0.2em; padding-bottom: 0.2em;
	background-color: #bae1ff; border-width: 1px; border-color: #3baaff; border-style: solid;}
dt.codelist {margin-bottom: 0.2em;}
h2.heading {background-color: #bae1ff; font-family: Arial; padding-top: 0.4em; padding-bottom: 0.4em;}
code {background-color: #f2f2f2; padding: 2px 4px; font-weight: bold;}
pre {background-color: #f2f2f2; border: 1px solid #ddd; padding: 0.3em;}
		
-->
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<h2 class="heading">4.1 Tutorial</h2>

<p>
Welcome to the RapaGUI tutorial! This small step-by-step document will guide
you through the process of creating your first GUI with RapaGUI in very few
steps. We will create a little GUI application that consists of a listview,
a text entry widget, and two buttons. The two buttons should be programmed
to allow the addition and removal of items from the listview. The data to
be inserted into the listview should be taken from the text entry widget.
Here is what this little application looks like on Windows:

<p>
<img src="img/tutorial.png">

<p>
Let us start with the basics: In RapaGUI GUIs are created using XML files that
contain a description of a number of windows containing a variety of GUI elements.
Here is a minimal GUI description for a RapaGUI GUI that contains a window with
a listview, a text entry widget, and two buttons in XML format:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;iso-8859-1&quot;?&gt;
&lt;application&gt;
   &lt;window title=&quot;Example GUI&quot;&gt;
      &lt;vgroup&gt;
         &lt;listview&gt;
            &lt;column/&gt;
         &lt;/listview&gt;
         &lt;textentry/&gt;
         &lt;hgroup&gt;
            &lt;button id=&quot;add&quot;&gt;Add&lt;/button&gt;
            &lt;button id=&quot;rem&quot;&gt;Remove&lt;/button&gt;
         &lt;/hgroup&gt;
      &lt;/vgroup&gt;
   &lt;/window&gt;
&lt;/application&gt;
</pre></td></tr></table><p>

The <code>&lt;application&gt;</code> object is the master MOAI object for every application and
must only be used once per application. All other MOAI objects are children of
<a href="Application.html">Application class</a>. The root element of every <code>&lt;window&gt;</code>
object must be derived from <a href="Group.html">Group class</a>, i.e. it must be either
<code>&lt;vgroup&gt;</code>, <code>&lt;hgroup&gt;</code>, or <code>&lt;colgroup&gt;</code>. Also note that
there must be only one root element per window.

<p>
To see how our XML declaration above looks as a GUI, we have to save it to
a file named <code>GUI.xml</code> and then use the following code to make RapaGUI convert
it to a native GUI for the operating system Hollywood is running on:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>@REQUIRE &quot;RapaGUI&quot;

moai.CreateApp(FileToString(&quot;GUI.xml&quot;))

Repeat
   WaitEvent
Forever
</pre></td></tr></table><p>

Next you should add some information about your program using the <code>@APPAUTHOR</code>,
<code>@APPCOPYRIGHT</code>, <code>@APPDESCRIPTION</code>, <code>@APPTITLE</code>, and <code>@APPVERSION</code>
preprocessor commands. RapaGUI needs this information for several purposes, e.g. the
information passed in <code>@APPTITLE</code> is used by the MUI preferences window
on AmigaOS and compatibles. Here is an example declaration of these preprocessor commands:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>@APPTITLE &quot;Tutorial&quot;
@APPVERSION &quot;$VER: Tutorial 1.0 (29.12.15)&quot;
@APPCOPYRIGHT &quot;Copyright &copy;2015, Andreas Falkenhahn&quot;
@APPAUTHOR &quot;Andreas Falkenhahn&quot;
@APPDESCRIPTION &quot;The tutorial app from the RapaGUI guide&quot;
</pre></td></tr></table><p>

The next thing we have to do is install an event handler callback using the
<code>InstallEventHandler()</code> Hollywood function because our Hollywood
script needs to be informed every time a RapaGUI event comes in. Thus, we
have to modify our code as follows:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>@REQUIRE &quot;RapaGUI&quot;

Function p_EventFunc(msg)
   ; contents follow below
EndFunction

InstallEventHandler({RapaGUI = p_EventFunc})
moai.CreateApp(FileToString(&quot;GUI.xml&quot;))

Repeat
   WaitEvent
Forever
</pre></td></tr></table><p>

What we have done here is installing the function <code>p_EventFunc</code> as an
event handler callback that gets executed whenever a RapaGUI event comes
in. When we get such an event, we then have to check which MOAI class and attribute
has triggered it. This is done by looking into the <code>msg.Class</code> and
<code>msg.Attribute</code> fields of the event message that our callback receives
as its first parameter.

<p>
The next thing we want to do is add the functionality that whenever the user
presses the &quot;Add&quot; button the text in the text entry widget should get added to the
listview as the last entry. To do this, we first have to find a way of identifying
our widgets from the Hollywood script. This is done by giving them IDs in the
XML declaration. IDs are simply text strings that are used for talking to MOAI
objects from Hollywood scripts. So let's add some IDs now for all widgets that
we need to talk to. We have to modify our XML declaration like this:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>...
         &lt;listview id=&quot;mylistview&quot;&gt;
            &lt;column/&gt;
         &lt;/listview&gt;
         &lt;textentry id=&quot;mystring&quot;/&gt;
         &lt;hgroup&gt;
            &lt;button id=&quot;mybt1&quot;&gt;Add&lt;/button&gt;
            &lt;button id=&quot;mybt2&quot;&gt;Remove&lt;/button&gt;
         &lt;/hgroup&gt;
...
</pre></td></tr></table><p>

Now that we have done this we can add some code to our event handler callback
that grabs the contents of the text entry widget and adds it to the end of the
list in our listview object. This is done by first calling <a href="moaiGet.html">moai.Get()</a>
on the <a href="TextentryText.html">Textentry.Text</a> attribute to get the contents of the string
widget and then running the method <a href="ListviewInsert.html">Listview.Insert</a> on the listview
widget using <a href="moaiDoMethod.html">moai.DoMethod()</a> to insert the entry into the
listview. Here is the code that has to be inserted into <code>p_EventFunc</code> for
this purpose:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>   Switch msg.Class
   ...
   Case &quot;Button&quot;:
      Switch msg.Attribute
      Case &quot;Pressed&quot;:
         Switch msg.ID
         Case &quot;mybt1&quot;:    ; &quot;Add&quot; button was pressed
            Local s$ = moai.Get(&quot;mystring&quot;, &quot;text&quot;)
            moai.DoMethod(&quot;mylistview&quot;, &quot;insert&quot;, &quot;bottom&quot;, s$)
         EndSwitch
      EndSwitch
   EndSwitch
</pre></td></tr></table><p>

The next thing we want to do is implement the functionality of our &quot;Remove&quot;
button. Whenever this button is pressed, we want the active entry to be removed
from the listview. We can do this by running the <a href="ListviewRemove.html">Listview.Remove</a>
method on the listview. Hence, we have to modify our code like this:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>         Switch msg.ID
         ...
         Case &quot;mybt2&quot;:    ; &quot;Remove&quot; button was pressed
            moai.DoMethod(&quot;mylistview&quot;, &quot;remove&quot;, &quot;active&quot;)
         EndSwitch
</pre></td></tr></table><p>

Now we want the active entry of the listview to be automatically displayed
in the text entry widget. For this purpose we have to set up a notification on
the <a href="ListviewActive.html">Listview.Active</a> attribute which is triggered whenever the
active entry of the listview changes. Thus, we have to modify our XML file
like this:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>...
         &lt;listview id=&quot;mylistview&quot; notify=&quot;active&quot;&gt;
            &lt;column/&gt;
         &lt;/listview&gt;
...
</pre></td></tr></table><p>

In our event handler callback we can implement this functionality quite
easily by running the <a href="ListviewGetEntry.html">Listview.GetEntry</a> method and then setting
the text entry widgets contents using the <a href="TextentryText.html">Textentry.Text</a> attribute.
Here is the code for doing that:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>   Switch msg.Class
   ...
   Case &quot;Listview&quot;:
      Switch msg.Attribute
      Case &quot;Active&quot;:
         Local s$ = moai.DoMethod(&quot;mylistview&quot;, &quot;getentry&quot;, &quot;active&quot;)
         moai.Set(&quot;mystring&quot;, &quot;text&quot;, s$)
      EndSwitch
   EndSwitch
</pre></td></tr></table><p>

If you try this code, you will set that the <a href="ListviewActive.html">Listview.Active</a>
attribute is not only triggered when the user selects a new listview
entry with his mouse, but also when entries are removed from the listview
and thus cause a new entry becoming the active one.

<p>
The next thing we want to do is disable the &quot;Remove&quot; button when there
is no active entry in the listview. We can disable widgets by setting
the <a href="AreaDisabled.html">Area.Disabled</a> attribute to <code>True</code>. As there are no entries in
the listview initially, we have to set <a href="AreaDisabled.html">Area.Disabled</a> to <code>True</code>
already at the start of our program. So you have to insert this code:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>...
moai.CreateApp(FileToString(&quot;GUI.xml&quot;))
moai.Set(&quot;mybt2&quot;, &quot;disabled&quot;, True)
...
</pre></td></tr></table><p>

Now we have to make some modifications to our event handler callback.
Whenever we get the notification on <a href="ListviewActive.html">Listview.Active</a> we have
to check if it is different from the special value &quot;Off&quot;. If that is
the case, we will enable the &quot;Remove&quot; button. The special value &quot;Off&quot;
(-1) is returned by <a href="ListviewActive.html">Listview.Active</a> whenever there is no active
entry in the listview. We have to modify our code like this:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>   Switch msg.Class
   ...
   Case &quot;Listview&quot;:
      Switch msg.Attribute
      Case &quot;Active&quot;:
         Local s$ = moai.DoMethod(&quot;mylistview&quot;, &quot;getentry&quot;, &quot;active&quot;)
         moai.Set(&quot;mystring&quot;, &quot;text&quot;, s$)
         moai.Set(&quot;mybt2&quot;, &quot;disabled&quot;, IIf(msg.triggervalue = -1,
             True, False))
      EndSwitch
   EndSwitch
</pre></td></tr></table><p>

We use the field <code>msg.TriggerValue</code> here. This always contains
the current value of the attribute that has triggered the event, i.e. in our
case it contains the current value of the <a href="ListviewActive.html">Listview.Active</a> attribute.
We could also call <a href="moaiGet.html">moai.Get()</a> manually on <a href="ListviewActive.html">Listview.Active</a>
first, but this is not really required because we can simply use the <code>msg.TriggerValue</code>
shortcut.

<p>
The last thing we want to do is add a menu to our GUI. All RapaGUI programs should
have a menu item informs the user that this program was done using RapaGUI. You can
popup the this dialog by running the <a href="ApplicationAboutRapaGUI.html">Application.AboutRapaGUI</a> method on the
application object. To add this menu to our program, we use <a href="Menubar.html">Menubar class</a>.
Here is the XML code that you have to add before your window declaration:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>...
&lt;application&gt;
   &lt;menubar id=&quot;mymenubar&quot;&gt;
      &lt;menu title=&quot;File&quot;&gt;
         &lt;item id=&quot;menabout&quot;&gt;About...&lt;/item&gt;
         &lt;item id=&quot;menaboutrapagui&quot;&gt;About RapaGUI...&lt;/item&gt;
         &lt;item/&gt;
         &lt;item id=&quot;menquit&quot;&gt;Quit&lt;/item&gt;
      &lt;/menu&gt;
   &lt;/menubar&gt;
   ...
&lt;/application&gt;
</pre></td></tr></table><p>

After we have created our menubar object using the XML code above we have
to attach this menubar to our window. This is done by setting the
<a href="WindowMenubar.html">Window.Menubar</a> attribute to our menubar object. Here is the
XML code for this:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>&lt;window title=&quot;Example GUI&quot; menubar=&quot;mymenubar&quot;&gt;
</pre></td></tr></table><p>

Now we have to add code to our event handler function that takes the appropriate
action when a menu item is selected. Before we can do that, however, we need to
assign an ID to our application object because we need to use <a href="moaiDoMethod.html">moai.DoMethod()</a>
on it. Here is how the XML code needs to be adapted:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>&lt;application id=&quot;app&quot;&gt;
</pre></td></tr></table><p>

Now we can write the code for our event handler callback function that
handles menu items:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>   Switch msg.Class
   ...
   Case &quot;Menuitem&quot;:
      Switch msg.Attribute
      Case &quot;Selected&quot;:
         Switch msg.id
         Case &quot;menabout&quot;:
            moai.Request(&quot;Test&quot;, &quot;Test program\n&quot; ..
                &quot;&copy; 2015 by Andreas Falkenhahn&quot;, &quot;OK&quot;)
         Case &quot;menaboutrapagui&quot;:
            moai.DoMethod(&quot;app&quot;, &quot;aboutrapagui&quot;)
         Case &quot;menquit&quot;:
            End
         EndSwitch
      EndSwitch
   EndSwitch
</pre></td></tr></table><p>

Some final touches to our program could be adding online help to our widgets
by using the <a href="AreaTooltip.html">Area.Tooltip</a> and <a href="MenuitemHelp.html">Menuitem.Help</a> attributes,
adding a status bar, and adding keyboard shortcuts for the menu items using
the underscore character. These changes are left as an exercise for the reader.

<p>
So here is what our final program looks like. First the XML file:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;iso-8859-1&quot;?&gt;
&lt;application id=&quot;app&quot;&gt;
   &lt;menubar id=&quot;mymenubar&quot;&gt;
      &lt;menu title=&quot;File&quot;&gt;
         &lt;item id=&quot;menabout&quot;&gt;About...&lt;/item&gt;
         &lt;item id=&quot;menaboutrapagui&quot;&gt;
            About RapaGUI...&lt;/item&gt;
         &lt;item/&gt;
         &lt;item id=&quot;menquit&quot;&gt;Quit&lt;/item&gt;
      &lt;/menu&gt;
   &lt;/menubar&gt;
   &lt;window title=&quot;Example GUI&quot; menubar=&quot;mymenubar&quot;&gt;
      &lt;vgroup&gt;
        &lt;listview id=&quot;mylistview&quot; notify=&quot;active&quot;&gt;
            &lt;column/&gt;
         &lt;/listview&gt;
         &lt;textentry id=&quot;mystring&quot;/&gt;
         &lt;hgroup&gt;
            &lt;button id=&quot;mybt1&quot;&gt;Add&lt;/button&gt;
            &lt;button id=&quot;mybt2&quot;&gt;Remove&lt;/button&gt;
         &lt;/hgroup&gt;
      &lt;/vgroup&gt;
   &lt;/window&gt;
&lt;/application&gt;
</pre></td></tr></table><p>

And here is the code for the program logic:

<p>
<table cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td><td><pre>@REQUIRE &quot;RapaGUI&quot;

@APPTITLE &quot;Tutorial&quot;
@APPVERSION &quot;$VER: Tutorial 1.0 (29.12.15)&quot;
@APPCOPYRIGHT &quot;Copyright &copy;2015, Andreas Falkenhahn&quot;
@APPAUTHOR &quot;Andreas Falkenhahn&quot;
@APPDESCRIPTION &quot;The tutorial app from the RapaGUI guide&quot;

Function p_EventFunc(msg)

   Switch msg.Class
   Case &quot;Button&quot;:
      Switch msg.Attribute
      Case &quot;Pressed&quot;:
         Switch msg.ID
         Case &quot;mybt1&quot;:    ; &quot;Add&quot; button was pressed
            Local s$ = moai.Get(&quot;mystring&quot;, &quot;text&quot;)
            moai.DoMethod(&quot;mylistview&quot;, &quot;insert&quot;, &quot;bottom&quot;, s$)
         Case &quot;mybt2&quot;:    ; &quot;Remove&quot; button was pressed
            moai.DoMethod(&quot;mylistview&quot;, &quot;remove&quot;, &quot;active&quot;)
         EndSwitch
      EndSwitch

   Case &quot;Listview&quot;:
      Switch msg.Attribute
      Case &quot;Active&quot;:
         Local s$ = moai.DoMethod(&quot;mylistview&quot;, &quot;getentry&quot;, &quot;active&quot;)
         moai.Set(&quot;mystring&quot;, &quot;text&quot;, s$)
         moai.Set(&quot;mybt2&quot;, &quot;disabled&quot;, IIf(msg.triggervalue = -1,
             True, False))
      EndSwitch

   Case &quot;Menuitem&quot;:
      Switch msg.Attribute
      Case &quot;Selected&quot;:
         Switch msg.id
         Case &quot;menabout&quot;:
            moai.Request(&quot;Test&quot;, &quot;Test program\n&quot; ..
                &quot;&copy; 2015 by Andreas Falkenhahn&quot;, &quot;OK&quot;)
         Case &quot;menaboutrapagui&quot;:
            moai.DoMethod(&quot;app&quot;, &quot;aboutrapagui&quot;)
         Case &quot;menquit&quot;:
            End
         EndSwitch
      EndSwitch
   EndSwitch

EndFunction

InstallEventHandler({RapaGUI = p_EventFunc})
moai.CreateApp(FileToString(&quot;GUI.xml&quot;))
moai.Set(&quot;mybt2&quot;, &quot;disabled&quot;, True)

Repeat
   WaitEvent
Forever
</pre></td></tr></table><p>

That's it! Now you should be able to create fantastic new GUI programs with Hollywood
and RapaGUI. Thank you for reading this tutorial and enjoy the power of modern GUI programming
with Hollywood and RapaGUI at your hands!

<p>
<hr>
<font size=-2><a href="Tutorial_.html" target="_top">Show TOC</a></font>
</body>
</html>