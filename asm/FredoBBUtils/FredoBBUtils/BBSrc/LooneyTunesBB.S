*** Looney Tunes Bootblock!! (plays a little tune)
*** Bootblock spécial: joue la musique des dessins animés Warner Bros!

Start:
	dc.l	$444f5300,0,$370
Main:
;	move.l	4.w,a6
	MOVEM.L	D0-A6,-(A7)
	move.l	#DATASIZE,d0
	moveq	#2,d1		;chip
	jsr	-198(a6)	;AllocMem()
	move.l	d0,a4
	tst.l	d0
	beq.w	nomem
* copier données sonores en chip mem
	LEA	LB_0100(PC),A0
	move.l	a4,a1
	move	#DATASIZE-1,d0
.cop	move.b	(a0)+,(a1)+
	dbf	d0,.cop
.play
	lea	$DFF000,A5
	MOVE	#$000F,$0096(A5)
;	lea	lb_0100(pc),a4
	MOVE.L	A4,$00A0(A5)
	MOVE.L	A4,$00B0(A5)
	MOVE.L	A4,$00C0(A5)
	MOVE.L	A4,$00D0(A5)
	MOVEQ	#$10,D0
	swap	d0
	move.l	D0,$00A4(A5)
	move.l	D0,$00B4(A5)
	move.l	D0,$00C4(A5)
	move.l	D0,$00D4(A5)
	move	#$820F,$0096(A5)
	lea	$74(a4),a0
	lea	$20(a4),a1
;	LEA	LB_0174(PC),A0
;	LEA	LB_0120(PC),A1
LB_0064	move	#$000F,$0096(A5)
	MOVEQ	#0,D1
	MOVE.B	(A0)+,D1
	BEQ.B	LB_00BC
	SUBQ	#1,D1
	MOVEQ	#0,D2
	MOVE.B	(A0)+,D2
	BEQ.B	LB_0098
	MOVEQ	#0,D0
	MOVE.B	(A0)+,D0
	move	0(A1,D0.W),D0
	BEQ.B	LB_0090
	move	D0,$06(A5,D2.W)
	move	#$003F,$08(A5,D2.W)
	BRA.B	LB_00A2
LB_0090	clr	$08(A5,D2.W)
	BRA.B	LB_00A2
LB_0098	MOVEQ	#0,D0
	MOVE.B	(A0)+,D0
	move	0(A1,D0.W),$0180(A5)
LB_00A2	move	#$820F,$0096(A5)
	move	D1,D0
	BEQ.B	LB_00B0
	BSR.B	LB_00EA
LB_00B0	BTST	#6,$00BFE001
	BNE.B	LB_0064
LB_00BC	move	#$000F,$0096(A5)

	move.l	a4,a1
	move.l	#DATASIZE,d0
	jsr	-210(a6)	;FreeMem()

nomem	MOVEM.L	(A7)+,D0-A6
	LEA	dosname(PC),A1
	JSR	-96(A6)
	MOVE.L	D0,A0
	MOVE.L	22(A0),A0
	MOVEQ	#0,D0
	RTS	
LB_00EA	tst.b	6(A5)
	BNE.B	LB_00EA
LB_00F2	tst.b	6(A5)
	BEQ.B	LB_00F2
	DBF	D0,LB_00EA
	RTS	
dosname	dc.b	'dos.library',0
	even
LB_0100
	DC.B	$00,$15,$34,$43,$5D,$66,$71,$77
	DC.B	$6A,$6E,$75,$79,$7F,$73,$51,$28
	DC.B	$00,$D8,$AF,$8D,$81,$87,$8B,$92
	DC.B	$96,$89,$8F,$9A,$A3,$BD,$CC,$EB
LB_0120
	DC.B	$00,$00,$0F,$33,$0F,$FF,$03,$3F
	DC.B	$00,$00,$03,$F8,$03,$C0,$03,$8A
	DC.B	$03,$58,$03,$28,$02,$FA,$02,$D0
	DC.B	$02,$A6,$02,$80,$02,$5C,$02,$3A
	DC.B	$02,$1A,$01,$FC,$01,$E0,$01,$C5
	DC.B	$01,$AC,$01,$94,$01,$7D,$01,$68
	DC.B	$01,$53,$01,$40,$01,$2E,$01,$1D
	DC.B	$01,$0D,$00,$FE,$00,$F0,$00,$E2
	DC.B	$00,$D6,$00,$CA,$00,$BE,$00,$B4
	DC.B	$00,$AA,$00,$A0,$00,$97,$00,$8F
	DC.B	$00,$87,$00,$7F
LB_0174
	DC.B	$07,$A0,$36,$07,$A0,$38,$07,$A0
	DC.B	$3A,$07,$A0,$3C,$07,$A0,$3E,$07
	DC.B	$A0,$40,$07,$A0,$42,$07,$A0,$44
	DC.B	$07,$A0,$46,$01,$00,$06,$01,$A0
	DC.B	$48,$01,$B0,$40,$01,$C0,$36,$25
	DC.B	$D0,$1E,$01,$A0,$44,$01,$B0,$08
	DC.B	$01,$C0,$08,$0D,$D0,$08,$19,$A0
	DC.B	$40,$19,$A0,$44,$01,$00,$02,$01
	DC.B	$A0,$48,$01,$B0,$40,$01,$C0,$38
	DC.B	$0D,$D0,$20,$01,$A0,$08,$01,$B0
	DC.B	$08,$01,$C0,$08,$0D,$D0,$08,$0D
	DC.B	$A0,$46,$0D,$A0,$08,$01,$D0,$20
	DC.B	$0D,$A0,$48,$0D,$A0,$08,$01,$D0
	DC.B	$08,$0D,$A0,$40,$0D,$A0,$08,$01
	DC.B	$00,$04,$01,$A0,$44,$01,$B0,$40
	DC.B	$01,$C0,$2C,$0D,$D0,$1C,$0D,$A0
	DC.B	$08,$01,$A0,$44,$01,$B0,$40,$01
	DC.B	$C0,$30,$0D,$D0,$1E,$0D,$A0,$08
	DC.B	$01,$A0,$44,$01,$B0,$40,$01,$C0
	DC.B	$32,$0D,$D0,$20,$0D,$A0,$08,$01
	DC.B	$A0,$44,$01,$B0,$40,$01,$C0,$34
	DC.B	$79,$D0,$22,$01,$00,$02,$01,$A0
	DC.B	$44,$01,$B0,$3A,$01,$C0,$32,$25
	DC.B	$D0,$1A,$01,$A0,$40,$01,$B0,$08
	DC.B	$01,$C0,$08,$0D,$D0,$08,$19,$A0
	DC.B	$3E,$19,$A0,$40,$01,$00,$04,$01
	DC.B	$A0,$44,$01,$B0,$32,$01,$C0,$26
	DC.B	$0D,$D0,$1E,$01,$A0,$08,$01,$B0
	DC.B	$08,$01,$C0,$08,$0D,$D0,$08,$0D
	DC.B	$A0,$42,$0D,$A0,$08,$01,$D0,$1E
	DC.B	$0D,$A0,$44,$0D,$A0,$08,$01,$D0
	DC.B	$08,$0D,$A0,$3E,$0D,$A0,$08,$01
	DC.B	$00,$06,$01,$A0,$40,$01,$B0,$30
	DC.B	$01,$C0,$28,$0D,$D0,$1E,$0D,$A0
	DC.B	$08,$01,$A0,$40,$01,$B0,$30,$01
	DC.B	$C0,$28,$0D,$D0,$0A,$0D,$A0,$08
	DC.B	$01,$A0,$40,$01,$B0,$30,$01,$C0
	DC.B	$28,$0D,$D0,$1E,$0D,$A0,$08,$01
	DC.B	$A0,$40,$01,$B0,$30,$01,$C0,$28
	DC.B	$79,$D0,$10,$01,$A0,$08,$01,$B0
	DC.B	$08,$01,$C0,$36,$19,$D0,$1E,$01
	DC.B	$00,$02,$01,$B0,$4E,$0D,$A0,$48
	DC.B	$01,$D0,$20,$0D,$C0,$38,$01,$A0
	DC.B	$40,$01,$B0,$48,$01,$C0,$3A,$19
	DC.B	$D0,$22,$01,$B0,$08,$0D,$A0,$08
	DC.B	$01,$C0,$20,$0D,$D0,$38,$01,$00
	DC.B	$02,$01,$A0,$48,$01,$B0,$4E,$01
	DC.B	$C0,$36,$19,$D0,$1E,$01,$B0,$48
	DC.B	$0D,$A0,$40,$01,$D0,$20,$0D,$C0
	DC.B	$20,$01,$A0,$08,$01,$B0,$08,$01
	DC.B	$C0,$3A,$19,$D0,$22,$01,$00,$06
	DC.B	$01,$B0,$4E,$0D,$A0,$48,$01,$D0
	DC.B	$20,$0D,$C0,$38,$01,$A0,$4A,$01
	DC.B	$B0,$44,$01,$C0,$36,$19,$D0,$1E
	DC.B	$01,$A0,$08,$01,$B0,$08,$01,$C0
	DC.B	$44,$19,$D0,$2C,$01,$A0,$4E,$01
	DC.B	$B0,$48,$01,$C0,$44,$19,$D0,$2C
	DC.B	$01,$A0,$4A,$01,$B0,$44,$01,$C0
	DC.B	$44,$19,$D0,$2C,$01,$B0,$08,$19
	DC.B	$A0,$08,$01,$00,$06,$01,$B0,$4E
	DC.B	$19,$A0,$48,$01,$B0,$4A,$19,$A0
	DC.B	$44,$01,$B0,$08,$19,$A0,$08,$01
	DC.B	$00,$02,$01,$A0,$1A,$01,$B0,$22
	DC.B	$01,$C0,$2C,$19,$D0,$44,$01,$00
	DC.B	$04,$01,$A0,$08,$01,$B0,$08,$01
	DC.B	$C0,$08,$19,$D0,$38,$01,$00,$06
	DC.B	$19,$D0,$3A,$01,$00,$02,$19,$D0
	DC.B	$44,$01,$A0,$1E,$25,$B0,$26,$01
	DC.B	$A0,$08,$01,$B0,$08,$01,$C0,$08
	DC.B	$0D,$D0,$08,$01,$A0,$1A,$31,$D0
	DC.B	$48,$01,$00,$04,$01,$A0,$1E,$01
	DC.B	$B0,$28,$01,$C0,$30,$79,$D0,$4E
	DC.B	$00,$00,$00,$00,$00,$00,$00,$00
DATASIZE=*-LB_0100

End:
	dcb.b	512*2,0
