@database CadOS.guide
@$VER: CadOS.guide 1.3
@author Kyzer/CSG
@smartwrap
@node main "CadOS 1.3 documentation"

            The CadOS operating system - an OS for demo coders
                           version 1.3 - release 1

   CadOS on the Internet : @{b}http://www.abdn.ac.uk/~u13sac/kyzer/cados.html@{ub}

 @{"  " link intro} Introduction

 @{"  " link usage} Usage

 @{"  " link autodocs} Autodocs

 @{"  " link CadOS_FAQ.guide/main} CadOS FAQ

 @{"  " link CadOS_history.guide/main} CadOS history

 @{"  " link copy} Disclaimer / Distribution / Copyright

 @{"  " link credits} Credits

(c) 1996-1997 @{" Kyzer/CSG " link author}
@endnode

@node intro "Introduction to CadOS"
Most new (and experienced) coders like to test their ideas in AMOS, or some
other form of BASIC before they code it in assembler. They do this because
of François Lionet's great realisation:


"When you program a game, you spend more than three quarters of the time
 writing low-level routines to display sprites, move screens and so on...
 This job is difficult on any computer,  but it's a nightmare on the Amiga
 because of its power. In the BA years (before AMOS!), making a game meant
 spending a lot of time on the utilities."
                                           - François Lionet


AMOS and it's friends all provide entirely crash-free and simple, but very
slow programming.

As you will know, assembler coding is always full of long, boring bits that
aren't actually doing any of the effect you want to achieve.

It is also FULL of hidey little bugs and enormous crashes.

Why? It's because most asm coders don't have respect for the Amiga's OS.
They fight against it because it is slow, compared to baremetal coding, and
they have a need for every processor cycle they can get their hands on.

And when coding, they try and do the MINIMUM initialisation as possible,
because it is so long and boring.

Then came the AGA chipset, which made it a lot more difficult to use the
Amiga, because of all the little compatibility fixes the engineers made
to let OLD demos have a hope in hell of working, as well as new ones.


                  This state of affairs needs a solution...

                        That solution is @{" CadOS " link cados}!
@endnode

@node CadOS "Sing with me, 'I am the one and only...'"
(before I continue, CadOS stands for CSG AGA demo operating system.
And remember, these are idle boasts! But it's very close to the reality,
better than most promises you hear.)


CadOS is the culmination of ALL the articles you have ever read on
compatibility. It attempts to be the PERFECT solution to both compatibility
and speed.

CadOS tries it's best to ensure *ALL models of A1200 and A4000 and other
Amiga AGA compatible machines will run your demo, no matter what processor
it has, or how much memory there is, of whatever type. It is compatible
with all disk drives and hard drives, and most **file compression methods.

(*  Except ones with expensive GFX cards and no native output)
(** Requires external libraries for this.)

CadOS also realises you are bound to have 1000s of bugs while coding, and
are very likely to crash the computer. So it tries to catch as many crashes
and not let bugs cause problems, and it also has an escape route if your
machine locks up: Press the RMB to quit instantly, provided CadOS's
interrupt handler is switched on.

What CadOS is, is a moderate-sized (~3000 lines) piece of assembly code
that you include at the start of your demo programs, adding ~2 seconds to
assembling time, allowing you to forget totally on writing startup code.

But CadOS is more than that, it is an entire operating system!

CadOS has over 50 documented @{" functions " link autodocs} and @{" macros " link CadOS_macros.guide/main} for:

 - Making entire screens

 - Loading and displaying IFFs

 - Loading packed and unpacked files

 - Allocating and deallocating memory

 - Fading and setting AGA colours

 - Setting vectors and traps

 - VBL timing

 - Reading the keyboard and mouse

It makes your demo coding so much cushier, you may easily be able to remove
~1/4 the code in your demos, and just use CadOS's functions instead!

You can't just insert CadOS at the top of your existing sources, you WILL
have to cut out all the startup crap, but it is very easy to do.


So what are the real drawbacks? Well, CadOS is only currently for coding
AGA demos, with a 68020 or better and a PAL, 15Khz screen. But most demos
nowadays use exactly that specification. I aim to make an OCS/ECS version
later, probably ;-)
@endnode

@node usage "Using CadOS"
Using CadOS is very simple. First, you must have an assembler that allows
68020 instructions and has a Sin() and Cos() function. PhxAss by Frank
Wille will do nicely. This is available as FREEWARE on Aminet as
dev/asm/PhxAss*.lha, where the * is the version.

All you do is add this line at the top of your source:

	include	cados.asm

If you use seperate hunks, or for some reason you don't want to start
program execution straight after the cados include, simply set the
switch USEMAIN (see explanation of 'switches' below!) before the cados
include, and make a label "_main" your program begins, and CadOS will
perform a "jmp _main" when it lets your program begin to run.

You must NOT have any startup code in your source (suits most coders fine!)
You only need to switch on the DMA and interrupts you need, all DMA and
interrupts (except VERTB if CadOS is installing a vbl-handler) are turned
OFF to begin. CadOS will take care of the rest of the entrance and exiting.

There are 'assembler' variables and switches that you can include at the
top of your source, before the 'include cados.asm' line.

a variable would be set like this:

VARIABLE=10934118
	include	cados.asm

of course, you could define the variable using any of your assembler's
maths and arithmetic and symbols and precedence, eg

VARIABLE=uu_SIZEOF*4+(42*100/2)/4+64

a 'switch' is simply set like this:

SWITCH=1

this is all that is needed by a modern assembler to consider a symbol with
the switch's name to be 'defined', ie turn up true with an IFD directive.
With an old assembler like Devpac2 you could get away with simply writing
the switch's name alone, but many optimising assemblers may throw a symbol
away if it is not defined to a number, and has no code between it and the
next label.

It doesn't matter what the number you set it to is - only the existance or
lack of existance is counted.

Read the list of @{" variables and switches " link switches}.

There are also system variables, set at runtime by CadOS. @{" Click here " link sysvars} for
a list.

Also, you may want to know there are two special functions that YOU can
write and CadOS will execute them if they are there. If you make a routine
called _PreDemo and/or _PostDemo, and amongst your variables before the
CadOS include write "PREDEMO=1" if you want CadOS to execute the _PreDemo
routine, and "POSTDEMO=1" if you want _PostDemo executed.

PreDemo will be executed by CadOS before taking over the screen or system,
and before going to supervisor mode. It is meant for SYSTEM FRIENDLY code
ONLY! It is safe to call CadOS memory functions, file functions, but not
CadOS system functions (except SystemRequest). You must NOT touch the
display or audio hardware in any way, but calling MakeScreen or DisplayIFF
is OK, provided you do not display the copperlist until inside the demo. If
you return a non-zero value (in D0) from _PreDemo, CadOS will abort running
the demo, _PostDemo will not be called. The things I suggest to do here is
load the big (and most likely to fail from lack of memory) files and
perhaps put a message to say hi while loading. That way the user does not
see the screen flash if a required file fails to load. Another nice touch
would be to fade out the Workbench. You can get the variables sysbase,
gfxbase, intbase (intuition), dosbase and keybase (keymap.library) if you
want.

_PostDemo is called after the screen and system are restored and CadOS is
out of supervisor mode. It is meant for messages of leaving, eg a final
requester :) Again you MUST be system friendly here.

example:
PREDEMO=1
POSTDEMO=1
USEMAIN=1
	section	CadOS,code
	include	cados.asm

	section	MyDemo,code
_PreDemo
	load_ch	"mod.titles"
	move.l	a0,loaded
	moveq	#0,d0
	rts
_PostDemo
	move.l	loaded,d0
	jmp	_FreeMem

_main	move.l	loaded,d0		; you don't have to use _PostDemo,
	beq.s	.nomus			; _PreDemo or _main at all, I'm
	jsr	mt_init			; just using them for sake of an
.nomus	jsr	demo			; example!
	jsr	mt_end
	rts

	section	MyData,bss
loaded	ds.l	1

@endnode

@node switches "Variables and switches"
DEBUGGING
If you set this switch, all macros and functions of CadOS that do work that
is dangerous to debuggers, eg switch off the system, take the screen,
change interrupts, etc - are NOT DONE, so you can follow your program in
MonAm or whatever. You should also adopt this switch's status, and wrap
sections of your code that hit the hardware with a 'IFND DEBUGGING' and
'ENDC'.

NO_MESSAGES
If you set this flag, no messages will be given to the user, the demo
will simply run or not.

NO_VBLSERVER
As default, CadOS installs a vertical blank server on autovector level 3.
This does not stop you from writing your own level 3 server, and does not
intefere with vertical blank alignment, provided you use the @{" vsync macro " link CadOS_macros.guide/vsync},
which automatically is defined to work with a vertical blank server or
without. The CadOS vbl-server provides the function of allowing exit of the
demo via the right mouse button, and facilitates the timing macros.

NO_RMBQUIT
If you set this switch, the ability to quit the demo by pressing the right
mouse button (useful for safer debugging) will be turned off, saving
processor cycles and some bytes

NO_REQUESTERS
This is a flag to suppress the possibility of disk requesters being shown.
What it means is this: Normally, if you are loading an external file and
an error occurs, eg disk removed :), corrupt disk, etc, then AmigaDOS will
show a requester. However, most of the time CadOS has the screen covered.
So, how do you let the user know this? CadOS, by default, installs two
patches to EasyRequest and AutoRequest at runtime, so if a requester is
called up, CadOS restores the Workbench screen, then shows the requester
and after it goes, CadOS takes over the screen again, restoring whatever
copper is stored in _defcop (the main reason to use the "setcop" macro!
it installs a copper AND copies it to _defcop) and continues to run like
normal. However, to cut out ~400 bytes of code this needs, if you don't
want this feature, or don't need it (ie if you don't load any files :)

NO_FILESYSTEM
If you don't use any of the file functions CadOS provides, then set this
flag and they will be removed. This automatically sets NO_REQUESTERS as
well.

PREDEMO
See above for a discussion of this! If you set this switch, CadOS will
call a routine called _PreDemo at Predemo stage, just before CadOS starts
to take anything. If the routine returns a number that is not 0 in D0, the
demo will be aborted, and the PostDemo routine (if any) will not be called.
At Predemo stage, all CadOS's internal lists are set up, it is OK to call
CadOS memory and file functions, and display functions that do not touch
the display. Also CadOS.system/SystemRequest is safe to call. The routine
is NOT in supervisor mode, the system and screen are intact, so it is safe
to do something like open a window, Wait() is also safe.

POSTDEMO
See above for a discussion of this! If you set this switch, CadOS will
call a routine called _PostDemo at Postdemo stage. See the PREDEMO
discussion, the same rules apply. You can have a POSTDEMO without PREDEMO,
but you cannot guarantee that the PostDemo routine will be called if it
is possible for a PreDemo routine to return a number other than 0 in D0.

USEMAIN
If you set this switch, CadOS will assume your demo starts at a label
called "_main", rather than directly after it's including.

STACKSIZE	set	size
This will create a seperate stack, free from the standard 4k supervisor
stack. The user stack is not important - the demo executes in supervisor
mode. Anyway, simply specify a size and that is the size of stack you
will get for the main running of code. The interrupt stack stays at the
normal 4k - so you don't get any ideas about running more code during an
interrupt than during the main code :)

FETCHMODE	set	(1, 2 or 4)
This variable must be 1, 2 or 4. If it is any other value, or doesn't
exist, it will be assumed to be 4. It is the AGA fetchmode CadOS will use
throughout. CadOS defines the variables __fetch and __fmode, which are
how many bits wide the fetch is, and the correct number to write to the
bottom 4 bits of fmode, respectively. See the code of _MakeCopper for more
info about it.

SCRNCOLOUR	set	$xRGB
This is the colour that the default copperlist (when you start the program)
displays. Leave this flag out and it's plain old black.
@endnode

@node sysvars "CadOS system variables"
You can access these as a structure from the address __sysvars, eg
	lea	__sysvars(pc),a0
	move.l	#20,16(a0)	; retcode

or you can reference them by their name

	move.l	#20,retcode

which I prefer, but this will be less future compatible when CadOS becomes
a library. Anyway, be rest assured the old->new converter for later
versions of CadOS will ensure your code still works.

Here is a list in a sort of C style, but ofcourse there is no object
typing! (object typing would look @{" like this " link objtyp}.)

struct _sysvars {
   APTR	sysbase;
// base of exec.library (although it's not advisable to call it's
// functions due to the state of the Amiga system :-)

   APTR	intbase;
// base of intuition.library (same principles as exec.library)

   APTR	gfxbase;
// base of graphics.library (many gfx functions are OK to call, try them
// out to see if they work ;-)

   APTR	dosbase;
// base of dos.library (use CadOS.file !!! :-)

   APTR	keybase;
// base of keymap.library (used by CadOS.input)

   APTR keymap;
// system-wide keymap used for key translation.

   APTR memlst;
// a pointer to the memory-list kept by CadOS of all it's memory
// allocations, and their size. DON'T TOUCH unless you like spectacular
// crashes.

   APTR vbr;
// a pointer to CadOS's Vector Base Register, in use when CadOS has
// disabled the OS. DON'T TOUCH, use the CadOS.system functions instead,
// so CadOS can keep track of interrupts and ensure that errors are caught.

   LONG	retcode;
// code to return on the exit of the program

   APTR	arg_ptr;
// a0 from the start of the program (CLI arg pointer)

   WORD	arg_len;
// d0 from the start of the program (length of args)

   WORD	DIS_LEFTEDGE;
// user setting: left screen edge of centred 320x256 screen (default 128)

   WORD	DIS_TOPEDGE;
// user setting: top screen edge of centred 320x256 screen (default 44)

   WORD	SYS_WAIT;
// user setting: time to wait after fileaccess before disabling interrupts
}
@endnode

@node objtyp "Object typed list"
struct _sysvars {
   struct ExecBase *sysbase;
   struct IntuitionBase *intbase;
   struct GfxBase *gfxbase;
   struct DosBase *dosbase;
   struct KeymapBase *keybase;
   struct Keymap *keymap;
   ULONG  *memlst;
   APTR   *vbr;
   ULONG  retcode;
   char   *arg_ptr;
   UWORD  arg_len;
   UWORD  DIS_LEFTEDGE;
   UWORD  DIS_TOPEDGE;
   UWORD  SYS_WAIT;
};
@endnode

@node autodocs "CadOS autodocs"
These are the instructions on how to call every support routine CadOS
provides. They are in the standard AmigaGuide Autodoc format, based on the
format of the ntroff(1)ed Unix "man" manual pages.

The synopsis works like this:

  SYNOPSIS
    *colours,length=GenerateColourFade(colour1,colour2)
       A0      D0                        D0      D1

That goes like this in assembler:

	MOVE.L	#colour1,D0
	MOVE.L	#colour2,D1
	JSR	_GenerateColourFade
	MOVE.L	D0,length
	MOVE.L	A0,colours

colours has a * in front of it, because colours is a POINTER, that is that
the number returned in A0 is the address of where the actual data is.
Another thing to note about pointers in CadOS is that unless it is
mentioned in the documentation that it is a MODIFIED pointer (eg
MakeCprBpl takes a copperlist pointer, writes some values at that address
into the copperlist, and returns a pointer slightly further down the
copperlist, after the new instructions) or otherwise, then you can give the
pointer to CadOS's FreeMem to free the memory that the pointer refers to.

Another thing about CadOS's functions is that they preserve all registers
that they don't use to give a result. So a function that is input-only
preserves all it's registers, even the inputs:

    void SetColourRGB(colour,red,green,blue)
                        D0    D1   D2   D3

You can do this:

	MOVEQ	#0,D0	; set colour 0, background 0
	MOVE.B	#255,D1
	MOVE.B	#255,D2
	MOVE.B	#255,D3	; start with white
loop	vsync
	JSR	_SetColourRGB
	SUBQ	#1,D1
	SUBQ	#1,D2
	BNE.S	loop	; fade to blue

OK? Now, here are the seperate areas of CadOS functions.

 @{" CadOS.system " link CadOS_system.guide/main}  - system control
 @{" CadOS.memory " link CadOS_memory.guide/main}  - memory allocation
 @{" CadOS.display " link CadOS_display.guide/main} - display management
 @{" CadOS.file " link CadOS_file.guide/main}    - file management
 @{" CadOS.input " link CadOS_input.guide/main}   - input handling

There is also a large collection of @{" macros " link CadOS_macros.guide/main} for you to use with CadOS.

@endnode

@node copy "Copyright and distribution of CadOS"
DISCLAINER: I, KYZER/CSG, THE AUTHOR, DO NOT GUARANTEE THAT CADOS, OR ANY
PROGRAMS THAT USE CADOS, WILL FUNCTION CORRECTLY ON EVERY POSSIBLE COMPUTER
CONFIGURATION OF SOFTWARE AND HARDWARE. I DO, HOWEVER, ASSURE ANY USERS
THAT EVERY POSSIBLE MEASURE TO INCREASE COMPATIBILITY WITH THE AMIGA
ENVIRONMENT HAS BEEN OR WILL BE IMPLEMENTED. THE ULTIMATE RESPONSIBILITY OF
COMPATIBILITY LIES WITH THE PROGRAMMER USING CADOS, NOT CADOS ITSELF.
NEITHER THE PROGRAMMERS OF CADOS OR APPLICATIONS USING CADOS CAN BE
EXPECTED OR REQUIRED TO COMPENSATE ANY PERSON OR ANY ORGANIZATION FOR LOSS
OF DATA OR MONEY, WHETHER THEIR PROBLEM IS CAUSED BY A CADOS APPLICATION OR
NOT. CADOS IS NOT GUARANTEED TO WORK ALONGSIDE POTENTIALLY FLAWED THIRD
PARTY SOFTWARE.

CadOS 1.3, the unmodified files CadOS.asm and CadOS.i and associated
documentation, are (c) 1996-1997 Kyzer/CSG.

The sourcecode files in CADOS:src/ are not copyrighted, they are PD.
Any program you write using CadOS is (c) to you, the author.

CadOS is FREEWARE, but has these rules also:

You may distribute CadOS in any way you like, but all the files included
in the original release must be available.

You may only distribute the original version of CadOS.asm and its related
files under the name "CadOS". If you want to distribute a modified version,
you may not call it "CadOS", or imply that it connected to CadOS.

If you find a bug in CadOS, you are obliged to report it to the author, me.

You may use CadOS the way I have given it to you,
OR you may modify it, or take bits of code from it and put them in your own
OS/demo/game. But you must understand I take no responsibility for this!

If you are a commercial software company using CadOS or particular routines
from CadOS, you must send me a copy/copies of the finished product(s) using
CadOS, that is all. You do not have to mention to the public that it uses
CadOS.

If you use CadOS or any source included with it regularly, you are asked to
provide a demoeffect to add to the CADOS:src/ directory, whether it is
coded for CadOS or not, it will be set-up for CadOS if it is not already,
and included in the next release of CadOS. You will recieve full credit for
the effect.

    ________________________________


The OFFICIAL CadOS revisions are always available from the CadOS Homepage,
http://www.abdn.ac.uk/~u13sac/kyzer/cados.html and official uploads to
Aminet will be made by me, with this .readme:

Short: CadOS **insert something useful here**
Author: Kyzer (Stuart Caie)
Uploader: Kyzer (kyzer@hotmail.com)
Type: dev/misc

If anyone tries to make a trojan or anything, I'll kick up a big stink! :-)
@endnode

@node credits "CadOS credits"
CadOS was realised, designed and coded by @{" Kyzer/CSG " link author}, with a little
help from these people:

The AmigaOS v36+ development team!

Vodka/Saturne who did some great fixing stuff AND editing CadOS for asmone!

Frank Wille who wrote PhxAss, the top FREEWARE assembler for the Amiga!

Thanks to a guy on Digital Candy whose name/email I forgot (sorry!!!!) but
gave me some good ideas, and some interesting chat on the state of the
Amiga's hardware! Hope ya make pots'o'cash with yer game! And if you want
to send me that info on the CIA saving, sure, do it! Perhaps we could write
HowToCode8 together? :)

Jan Vibe, Jan Vlietnick, David Lawrence, Allister Turnbull, Ian Hall and
all other Acorn coders who were more willing to share their demo effect's
source code than any Internet person or scene coder.

Comrade J and Randy/Comax who both wrote AGA programming docs.
Even if there was a @{" big lie " link the_utter_lie} in HowToCode7 :)

Epsilon USA for providing some entertaining old source codes.


GREETINGS:
Kyzer sends his thanks and blessings to all these people

Sarah Falconer (cheers m'dear!), Kevin Taylor (Owlz/CSG), Apollo/Royal,
Eagle/Royal and Converse/Amiga Frontier.

All those musicians I heard music of (far too many to list!)

I-GO/TBL for installing my hiddenparts list.

Respect to these groups for making demos that made me want to write demos
myself in the first place, in the order that I can remember them:

         Sanity are STILL the best! Ever! Even though they are dead :-(
     Spaceballs
   Melon Dezign are hip, funky and g-rooooooooovy! (get down & groove!)
  Delon Desayyn for ripping the piss from the above mentioned demoteam!
       Freezers are the greatest at girl pix and techno mus!
      Andromeda
 Virtual Dreams (esp. Dr Skull for his sourcesales ;-)
         Rebels
            LSD - trippin'
   Dreamdealers ("Woodstock" intro is riteous!)
    Dimension X
  Cryptoburners
        X-Trade
       Movement
      Absolute! are hip and trendy
           Bomb
        Essence
         Infect
        Complex
         Impact
           Nova
           AXIS
        Delight
   Static Bytes
         Nuance
        Silents (when did you last make a demo?-)
 Polka Brothers
        Anarchy
         Oxygen
    Muffbusters
        Kefrens
          Abyss
    Masque/TRSI
       Mad Elks
        Scoopex
        Balance
     EMT Design
            PMC (ooh, old one here!)
         Talent
          Sonik clique, happy 6th lads!
       Defiance
         C!Lous
        Mankind
          Royal
     Razor 1911
     Stone Arts
        Shining
      Dual Crew
       Team Hoi are a bunch of stinky perverts!
        Digital
          Agile
          Arise
         Mystic
        Stellar
           Lego
          Depth
            TBL win far too many democompetitions for their own good ;-P

This list is not very long, but it is only demogroups whose work I have
actually SEEN. To the rest of the you: keep at it, and I'm sure I will see
your great stuff some day soon!

Special old farts awards (in uppercase to commemorate the "good old days")
go out to DEFJAM, ENDLESS PIRACY, SUPERVISORS, PHENOMENA, FAIRLIGHT,
CRYSTAL, BAMIGA SECTOR ONE, METALWAR, THE ARCADIA TEAM, TRISTAR, TRIANGLE,
THE MALTESE HACKER and QUARTEX.
@endnode

@node author "Contacting the author"
Write to: Kyzer/CSG, 49 Fairview Road, AB22 8ZG, Scotland.
Phone me: Errm, I used to let people phone me, but now I'm never in :)

I spend a lot of time on the LPmud @{" Adamant " link ada}, where you can mail me. Telnet
to @{" Adamant " link ada}, log in as a new character or a *guest, and leave
some mail for me, Kyzer. I might even be there in person! I 
also have e-mail at @{i}kyzer@hotmail.com@{ui}  or @{i}kyzer@4u.net@{ui}.

MY WWW HOMEPAGE: http://www.abdn.ac.uk/~u13sac/

CSG's memberlist is Kyzer <kyzer@4u.net>, Owlz <owlz@geocities.com>,
Infinity <infinite_horizons@bigfoot.com> and Slugger <no email>. To be
honest, CSG's days as an entire group are pretty gone. Infinity is now
in Edinburgh doing BSc Chemistry and he's away from any decent computer!

Slugger lives a long way away, in the highland, where no roads run and
there are only sheep, kilts, haggises and bagpipes. There he writes lots
and lots of very subversive things. :-)

Owlz is still damn active, but he's not bothered to become independant.

Me, well I'm just waiting until I think I've 'done' enough demos to prove
to myself and the rest of the world that I am a good enough coder to join
a more famous group :)

* Actually, you can't log in as a guest and leave mail anymore, as Luzi
  changed the mailclient, won't allow guests to send mail, that suxx.
@endnode

@node ada "Adamant"
Adamant is a very good LPMUD in Germany.
Come and see my restrant in Galltus!

You can telnet Adamant at 130.83.9.19 port 4711
If you don't trust IP numbers, you can also telnet

telnet://rm600.rbg.informatik.th-darmstadt.de:4711
(Yes! The same machine of Mattias Meixner! ;-P )
@endnode

@node the_utter_lie "The utter and abysmal lie!"
You are about to read total falsehood, present in ALL editions of
HowToCode. If you cannot abide extreme untruth, click 'Retrace' NOW.
Else, click 'Continue'...

 @{" Continue " link lie2}
@endnode

@node lie2 "Lies, lies, lies, lies!"
Alignment Restrictions
----------------------

Bitplanes, sprites and copperlists must be, under
certain circumstances, 64-bit aligned under AGA. Again to benefit from
maximum bandwitdh bitplanes should also only be multiples of 64-bits wide,
so if you want an extra area on the side of your screen for smooth blitter
scrolling it must be *8 bytes* wide, not two as normal.

This also raises another problem. You can no longer use
AllocMem() to allocate bitplane/sprite memory directly.

Either use AllocMem(sizeofplanes+8) and calculate how many
bytes you have to skip at the front to give 64-bit alignment
(remember this assumes either you allocate each bitplane
individually or make sure the bitplane size is also an
exact multiple of 64-bits), or you can use the new V39
function AllocBitMap().
@endnode
