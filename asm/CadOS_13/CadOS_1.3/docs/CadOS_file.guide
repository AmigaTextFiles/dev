@database CadOS file system
@node main "CadOS.file functions"
TABLE OF CONTENTS

@{" CadOS.file/SizeFile " link SizeFile}
@{" CadOS.file/LoadFile " link LoadFile}
@{" CadOS.file/SaveFile " link SaveFile}
@{" CadOS.file/DumpFile " link DumpFile}

@endnode

@node SizeFile
CadOS.file/SizeFile                                     CadOS.file/SizeFile

  NAME
    SizeFile()

  SYNOPSIS
    size=SizeFile(*name)
     D0             A0

  DESCRIPTION
    This function finds out the length of a file for you. If the file
    doesn't exist, or there isn't enough memory to make a FIBlock, then the
    function returns 0. Can be used in association with AllocMem and
    DumpFile, to load a file without decrunching it.

  INPUTS
    name       - A pointer to a null-ended string, with the filename

  RESULT
    size       - The size of the specified file in bytes, or 0 if it failed

  SEE ALSO
    @{" DumpFile " link DumpFile}, @{" LoadFile " link LoadFile}, @{" CadOS.memory/AllocMem " link CadOS_memory.guide/AllocMem}

@endnode

@node LoadFile
CadOS.file/LoadFile                                     CadOS.file/LoadFile

  NAME
    LoadFile()

  SYNOPSIS
    *loaded,size=LoadFile(*name,memtype)
       A0    D0             A0    D0

  DESCRIPTION
    This function loads the specified file into memory. If the file is
    compressed or packed, it will be unpacked. CadOS uses the xfdmaster
    library to achieve this, but PowerPacked files are a special case,
    because they can be decrunched without seperate buffers, so a lot less
    memory is needed. This needs the powerpacker library. Anyway, if xfd
    doesn't open or doesn't recognize the file as a compressed one, the
    file is simply loaded raw into memory. The type of memory can be
    specified.

  INPUTS
    name       - A pointer to a null-ended string, with the filename
    memtype    - The type of memory that the file should be loaded into,
                 either 0 to ask for Fast memory (which may be Chip memory,
                 if Fast memory is unavailable or 1 to specify Chip memory.

  RESULT
    loaded     - A pointer to where the file was loaded, or 0 if loading
                 failed. The pointer can be passed to FreeMem to free the
                 memory involved.
    size       - The size of the loaded file in bytes, or 0 if it failed

  SEE ALSO
    @{" DumpFile " link DumpFile}, @{" CadOS.memory/FreeMem " link CadOS_memory.guide/FreeMem}

@endnode

@node SaveFile
CadOS.file/SaveFile                                     CadOS.file/SaveFile

  NAME
    SaveFile()

  SYNOPSIS
    completed=SaveFile(*name,*memory,size)
       D0                A0     A1    D0

  DESCRIPTION
    This function saves the specified area of memory to disk. The address
    and size of the file should be specified, but if size is 0, SaveFile
    will work out the size to save using SizeMem on the pointer you supply.
    If that fails too (ie it's not CadOS allocated memory) then SaveFile
    save from the memory pointer to the next NULL character. If saving the
    file failed (the user will probably see a requester) then the function
    returns 0, otherwise any other number means the save was successful.

  INPUTS
    name       - A pointer to a null-ended string, with the filename
    memory     - A pointer to the memory area to save.
    size       - The size of memory to save, in bytes.

  RESULT
    completed  - A boolean value, any number if the save was successful,
                 but 0 if it failed.

  SEE ALSO
    @{" CadOS.memory/SizeMem " link CadOS_memory.guide/SizeMem}

@endnode

@node DumpFile
CadOS.file/DumpFile                                     CadOS.file/DumpFile

  NAME
    DumpFile()

  SYNOPSIS
    completed=DumpFile(*name,*memory,size)
       D0                A0     A1    D0

  DESCRIPTION
    This function loads into the specified area of memory from disk. The
    address and size of where the file is to be loaded should be specified,
    If but if size if 0, DumpFile will size the file for you. The length
    of the load is not allowed to go past the end of a memory block if it
    was CadOS allocated. If loading the file failed (the user will probably
    see a requester) then the function returns 0, otherwise any other number
    means the load was successful. If you want to load a whole file, you
    should consider using the function LoadFile, which also supports
    invisible decrunching.

  INPUTS
    name       - A pointer to a null-ended string, with the filename
    memory     - A pointer to the memory area to load into.
    size       - The size of file to load, in bytes.

  RESULT
    completed  - A boolean value, any number if the load was successful,
                 but 0 if it failed.

  SEE ALSO
    @{" LoadFile " link LoadFile}, @{" CadOS.memory/AllocMem " link CadOS_memory.guide/AllocMem}

@endnode
