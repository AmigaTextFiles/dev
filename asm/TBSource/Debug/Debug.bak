*************************************************
*						*
*		 (C)opyright 1992		*
*						*
*		by  Tomi Blinnikka		*
*						*
*	Don´t try to understand the code	*
*						*
* Version 0.01	27/05/1992			*
*						*
* BUGS:	What ?					*
*						*
*************************************************

	INCLUDE	"JMPLibs.i"
	INCLUDE	"exec/types.i"
	INCLUDE	"intuition/intuition.i"
	INCLUDE	"libraries/dos.i"

	INCLUDE	"XREF:intuition.xref"
	INCLUDE	"XREF:exec.xref"
	INCLUDE	"XREF:dos.xref"

		section	Debug,CODE

		move.l	a0,a4
		openlib	Dos,ShutDown_Out

		lea.l	AuthorText1,a0
		bsr	Printer

		cmp.b	#"?",(a4)
		beq	CmdLineHelp
		cmp.w	#'-?',(a4)
		beq	CmdLineHelp
		cmp.w	#'-h',(a4)
		beq	CmdLineHelp

		lea.l	EnterText1,a0
		bsr	Printer

		lib	Exec,Debug

		lea.l	ReturnText1,a0
		bsr	Printer
		
ShutDown:	closlib	Dos
ShutDown_Out:	move.l	#RETURN_OK,d0
		rts

CmdLineHelp:	lea.l	UsageText1,a0
		bsr	Printer	
		bra	ShutDown

Printer:	printa	a0
		rts

;Structures and reservations

		dc.b	"$VER: "
AuthorText1:	dc.b	"Debug 0.01 by Tomi Blinnikka",10,10
;		dc.b	10,"!!! BETA TESTER VERSION !!!",10,10,10
		dc.b	0

UsageText1:	dc.b	"USAGE: Debug [?]",10,10
		dc.b	"       Where: [?] gives this text.",10,10
		dc.b	"This program makes the computer enter the debug "
		dc.b	"state (ROM-wack).",10
		dc.b	"See docs for more information.",10,0

EnterText1:	dc.b	"==> Entered debug state <==",10
		dc.b	10,"Use 'resume' to return",10,0
ReturnText1:	dc.b	10,"<== Returned from debug ==>",10,0

		ds.l	0

;library stuff

		libnames

		END

