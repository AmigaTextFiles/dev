@database yactop.guide
@master yactop.guide
@$VER: RrR's Yet Another Chunky To Planar v1.0 (07-Jul-96)
@author "Ruskean Reian Ritarit"
@(c) "R.R.R."

@node "main" "Tong Fong Sam Hop! Another RRR-Production! (Jul 07, 1996)"
@toc "main"

                              @{" " link "intro" 0} Introduction
                              @{" " link "req" 0} Requirements
                              @{" " link "usage" 0} Usage
                              @{" " link "hist" 0} History
                              @{" " link "credz" 0} Credits

      Yet another day followed and Teuvo Tursas was unable to get the neat
      looking pllbc2p-chunky to planar converter to work. He was bewildered.
      He had contacted the author many a times, yet without any help. So he
      drank some magic potion and started to make a converter of his very own...

                         From a barrel of wine emerges
                 @{b}Yet Another Chunky To Planar Converter v1.0@{ub}

                     E-Mail the crew:  rrr@klinja.fipnet.fi
@endnode

@node "credz" "Cheung Mui!"
@toc "main"

    All in three days..........................................Teuvo Tursas ;)
                                                               vihelin@netlife.fi

@endnode

@node "intro" "Ching Siu Tung!"
@toc "main"

     What's this all about? The reason why I made this yet another chunky
     to planar converter is that all those I had from various sources
     (um.... AmiNet..) were too slow or did not work at all or were too
     devious in design. These sources are based on Kevin Picone's nice
     pllbc2p, but with the exeption that these are cpu-only solutions and
     they work (at least on my machine). Sorry Kevin ;) Your's are faster
     (on my 030/28MHz), but they don't support 2x2 modes and are quite
     cumbersome to get to work ;D And they use blitter ;(

     If anyone finds a way (and will find a way ;) then e-mail me the
     fixed code and I'll do a new release with full credits to you.
     And if anyone has a better algorithm then also e-mail me ;)
     I'm in the search for the ultimate chunky to planar converter code =B

     Message to all you demo coders: Don't keep that rapid c2p of yours just
     by yourselves. Make it public domain and we all can concentrate on doing
     nice effects without the fuss of doing some very interesting and amusing
     like a chunky to planar converter. I could have used these three days of
     developement for doing something useful. ;)

     I challenge you people to enhance these sources.

     Included here are converters for 1x1 and 2x1 modes, but I also put in
     a code that shows how to make a 2x2 mode from 2x1 sources (a copper hack,
     that's all ;). Colours supported are 16, 32, 64, 128 and 256.
@endnode

@node "req" "Chan Pui Wah!"
@toc "main"

     These source codes require an AGA Amiga with at least 020 in it.
     With a little modifications converters with 32 colours output or less
     can be made to work with an ECS or OCS Amiga, but I'm not going to
     do that ;) And with a little more work all can be made to work on
     a 000 machine, but come on! ;)
@endnode

@node "hist" "Yip Cheng To!"
@toc "main"

     version 1.0 ....... The first (and hopefully not the last;) release.
                         Went straight into the AmiNet.
@endnode

@node "usage" "Yeung Kwok Fai!"
@toc "main"

     All the work is done in a few steps. Here they follow.

     1.......... Allocate memory for the precalc table (1 MB for 2x1 and
                 2x2 modes, 2 MB for 1x1 mode).
     1½......... Create the horizontal doubling copper list (for 2x2 and
                 why not for 1x2 mode).

                 [    move.l  c_list,a0        ]
                 [    bsr.w   create_copper    ]

     2.......... Precalculate the chunky to planar lookup table.

                 [    move.l  chunky_area,a0    ]
                 [    bsr.w   prec_chk_table    ]

     3.......... Start converting ;)

                 [    lea     chunky_input,a0    ]
                 [    move.l  output_view,a1     ]
                 [    move.l  chunky_area,a2     ]
                 [    move.w  #160*128/8-1,d0    ]
                 [    bsr.w   chunky_planar      ]

     Here come the explanations.

     c_list.............. Pointer to a 4KB area (for the copper list).
                          Enlarge the space if you wish to add something
                          to the list. In CHIP RAM.

     create_copper....... chunky_to_planar/chunky_to_planar_2x2_cc
                          For 2x2 and 1x2 modes. Creates a horizontal doubling
                          copper list (and pointer to that is in a0).

     prec_chk_table...... Creates the precalc table (Pointer to that is in a0).

     chunky_area......... Pointer to the 1/2 MB precalc-table. In FAST RAM.

     chunky_input........ Chunky buffer (where all the data waits for the
                          conversion to take place). In FAST RAM.

     output_view......... Pointer to the view (set up in a normal fashion,
                          no modulo [fmode,%11 uses -8]). In CHIP RAM.

     #160*128/8-1........ The converter needs the amount of pixels, but
                          they will have to be divided by eight and number
                          one must also be taken away from the register d0 ;)
                          (That's for the 2x1 - converter. 1x1 needs the
                          amount to be divided by 32 and also the substraction
                          is required.).

     chunky_planar....... The converter. There are various sources included.
                          chunky_to_planar/chunky_to_planar_1x1_256.S
                          chunky_to_planar/chunky_to_planar_2x1_256.S
                          chunky_to_planar/chunky_to_planar_2x1_128.S
                          chunky_to_planar/chunky_to_planar_2x1_64.S
                          chunky_to_planar/chunky_to_planar_2x1_32.S
                          chunky_to_planar/chunky_to_planar_2x1_16.S
                          And all the 2x1 sources are used in creating a
                          2x2 view. Just check out the included source for
                          more exact information.

@endnode
