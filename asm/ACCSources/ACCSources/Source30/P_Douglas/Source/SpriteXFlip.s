*****************************************************************************
*****************************************************************************
*			Sprite X-flip Subroutine
*				by
*			   Paul Douglas 1992
*		flips Bitmap Image about vertical mid point
*****************************************************************************
*****************************************************************************

;Entry	a0.l	address of sprite/bob/screen to flip
;	a1.l	destination addr for flipped image
;	d0.w	width of sprite in words
;	d1.w	height of sprite (ie pixels high * number bitplanes inc mask)
;
;Exit	none needed
;
;Trashs	a0-a1/d0-d4	


SpriteXflip
	moveq	#0,d4				clear all bits d4
	subq.w	#1,d1				get lines-1 for dbf
	move.w	d0,d3				copy width to d3
	subq.w	#1,d3				sub #1 for dbf
	add.w	d0,d0				get bytes wide ie words*2
	add.w	d0,a1				get end 1st line of dest
	add.w	d0,d0				get bytes wide * 2

.lineloop
	move.w	d3,d2				renew the width counter
.wordloop
	move.b	(a0)+,d4			get byte to flip
	move.b	.FlipTable(pc,d4.w),-(a1)	get flipped byte into dest
	move.b	(a0)+,d4			do it again so weve flipped
	move.b	.FlipTable(pc,d4.w),-(a1)	a word

	dbf	d2,.wordloop			do all words on scan line

	add.w	d0,a1				get to end next scan line in dest
	dbf	d1,.lineloop			loop *scanlines

	rts

*****************************************************************************

.FlipTable
.0.1f	dc.b	%00000000,%10000000,%01000000,%11000000		look-up
	dc.b	%00100000,%10100000,%01100000,%11100000		table for
	dc.b	%00010000,%10010000,%01010000,%11010000		flipped bytes
	dc.b	%00110000,%10110000,%01110000,%11110000		all entries
	dc.b	%00001000,%10001000,%01001000,%11001000		checked OK
	dc.b	%00101000,%10101000,%01101000,%11101000
	dc.b	%00011000,%10011000,%01011000,%11011000
	dc.b	%00111000,%10111000,%01111000,%11111000

.20.3f	dc.b	%00000100,%10000100,%01000100,%11000100
	dc.b	%00100100,%10100100,%01100100,%11100100
	dc.b	%00010100,%10010100,%01010100,%11010100
	dc.b	%00110100,%10110100,%01110100,%11110100
	dc.b	%00001100,%10001100,%01001100,%11001100
	dc.b	%00101100,%10101100,%01101100,%11101100
	dc.b	%00011100,%10011100,%01011100,%11011100
	dc.b	%00111100,%10111100,%01111100,%11111100

.40.5f	dc.b	%00000010,%10000010,%01000010,%11000010
	dc.b	%00100010,%10100010,%01100010,%11100010
	dc.b	%00010010,%10010010,%01010010,%11010010
	dc.b	%00110010,%10110010,%01110010,%11110010
	dc.b	%00001010,%10001010,%01001010,%11001010
	dc.b	%00101010,%10101010,%01101010,%11101010
	dc.b	%00011010,%10011010,%01011010,%11011010
	dc.b	%00111010,%10111010,%01111010,%11111010

.60.7f	dc.b	%00000110,%10000110,%01000110,%11000110
	dc.b	%00100110,%10100110,%01100110,%11100110
	dc.b	%00010110,%10010110,%01010110,%11010110
	dc.b	%00110110,%10110110,%01110110,%11110110
	dc.b	%00001110,%10001110,%01001110,%11001110
	dc.b	%00101110,%10101110,%01101110,%11101110
	dc.b	%00011110,%10011110,%01011110,%11011110
	dc.b	%00111110,%10111110,%01111110,%11111110

.80.9f	dc.b	%00000001,%10000001,%01000001,%11000001
	dc.b	%00100001,%10100001,%01100001,%11100001
	dc.b	%00010001,%10010001,%01010001,%11010001
	dc.b	%00110001,%10110001,%01110001,%11110001
	dc.b	%00001001,%10001001,%01001001,%11001001
	dc.b	%00101001,%10101001,%01101001,%11101001
	dc.b	%00011001,%10011001,%01011001,%11011001
	dc.b	%00111001,%10111001,%01111001,%11111001

.a0.bf	dc.b	%00000101,%10000101,%01000101,%11000101
	dc.b	%00100101,%10100101,%01100101,%11100101
	dc.b	%00010101,%10010101,%01010101,%11010101
	dc.b	%00110101,%10110101,%01110101,%11110101
	dc.b	%00001101,%10001101,%01001101,%11001101
	dc.b	%00101101,%10101101,%01101101,%11101101
	dc.b	%00011101,%10011101,%01011101,%11011101
	dc.b	%00111101,%10111101,%01111101,%11111101

.c0.df	dc.b	%00000011,%10000011,%01000011,%11000011
	dc.b	%00100011,%10100011,%01100011,%11100011
	dc.b	%00010011,%10010011,%01010011,%11010011
	dc.b	%00110011,%10110011,%01110011,%11110011
	dc.b	%00001011,%10001011,%01001011,%11001011
	dc.b	%00101011,%10101011,%01101011,%11101011
	dc.b	%00011011,%10011011,%01011011,%11011011
	dc.b	%00111011,%10111011,%01111011,%11111011

.e0.ff	dc.b	%00000111,%10000111,%01000111,%11000111
	dc.b	%00100111,%10100111,%01100111,%11100111
	dc.b	%00010111,%10010111,%01010111,%11010111
	dc.b	%00110111,%10110111,%01110111,%11110111
	dc.b	%00001111,%10001111,%01001111,%11001111
	dc.b	%00101111,%10101111,%01101111,%11101111
	dc.b	%00011111,%10011111,%01011111,%11011111
	dc.b	%00111111,%10111111,%01111111,%11111111

**************************************************************************

