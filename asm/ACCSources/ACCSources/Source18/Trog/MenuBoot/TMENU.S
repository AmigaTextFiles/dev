*******************************************************************************
*THIS ROUTINE TESTS TO SEE IF A MENU WAS ACCESSED AND WHICH ONE WAS IF ANY
*******************************************************************************
*VALUES FOR MENU RETURN CODES
ABOUT:	DC.L	$F8008000	*VALUE FOR MENU 1 ITEM 1
WRITEL:	DC.L	$F8208000	*VALUE FOR MENU 1 ITEM 2
QUIT:	DC.L	$F8408000	*VALUE FOR MENU 1 ITEM 3
EDIT:	DC.L	$F8018000	*VALUE FOR MENU 2 ITEM 1
SHOWPRG:DC.L	$F8218000	*VALUE FOR MENU 2 ITEM 2
DRIVE0:	DC.L	$00418000	*VALUE FOR MENU 2 ITEM 3 SUB MENU 1
DRIVE1	DC.L	$08418000	*VALUE FOR MENU 2 ITEM 3 SUB MENU 2
*******************************************************************************
MENUTEST:
	MOVE.L	$4,A6		*EXEC BASE STRUCTURE IN A6
	MOVE.L	WINDOWADRESS,A0	*WINDOW STRUCTURE IN A0
	MOVE.L	$56(A0),A0	*POINTER TO WHAT MESSAGE TOOK PLACE
	JSR	GETMSG(A6)	*DID ANYTHING HAPPEN
	TST.L	D0		*0 = N0 ANY OTHER VALUE YES
	BEQ	MENUTEST	*NONE ZERO THEN BRA BACK TO MENUTEST
	MOVE.L	D0,A0		*YES SOMETHING DID HAPPEN
	MOVE.L  $14(A0),D6	*IF A MENU WAS CHOSEN 
	MOVE.L	$18(A0),D7	*WHAT MENU MENU1, MENU2, SUBMENU, ECT,
	CMP.L	#MENUPICK,D6    *WAS IT A MENU $100 = YES OTHER VALUE NO
	BNE	MENUTEST	*BRANCH AND TEST AGAIN IF NOT A MENU
	JSR	FINDMENU	*IT MUST HAVE BEEN A MENU SO FIND WHICH ONE
	MOVE.W	QFLAG,D0    	*MOVE VALUE QUIT PRG INTO D0
	CMP.W	#1,D0		*COMPARE IF THE SAME THEN END PRG
	BEQ	CLI		*IF NONE ZERO THEN END PRG
	BRA	MENUTEST	*END OF MENU TESTING SO BRANCH AND DO AGAIN
CLI:	RTS			*RETURN TO MAIN PRG AND TIDY UP
				*CLOSE	WINDOW SCREEN EXCT
*******************************************************************************
FINDMENU:
	MOVE.L	ABOUT,D6	* MENU 1 ITEM 1
	CMP.L	D6,D7		* COMPARE THE VALUE FOR ITEM 1
	BEQ	SHOWABOUT	* WAS MENU 1 WAS CHOSEN THEN BRANCH

	MOVE.L	WRITEL,D6	* MENU 1 ITEM 2
	CMP.L	D6,D7		* SAME AS ABOVE BUT COMPARE ITEM 2
	BEQ	WRITEDL 	* WAS MENU 2 CHOSEN

	MOVE.L	QUIT,D6		* MENU 1 ITEM 3
	CMP.L	D6,D7		* SAME AS ABOVE
	BEQ	ENDPRG

	MOVE.L	EDIT,D6		* MENU 2 ITEM 1
	CMP.L	D6,D7		* SAME AS ABOVE
	BEQ	EDITEXT

	MOVE.L	SHOWPRG,D6	* MENU 2 ITEM 2
	CMP.L	D6,D7
	BEQ	RUNPRG

	MOVE.L	DRIVE0,D6      	* MENU 2 ITEM 3 SUB MENU 1
	CMP.L	D6,D7		* SAME AS ABOVE
	BEQ	WRITEDF0

	MOVE.L	DRIVE1,D6	* MENU 2 ITEM 3 SUB MENU 2
	CMP.L	D6,D7
	BEQ	WRITEDF1
	JMP     MENUTEST	*UKNOWN PROBLEM SO BRANCH BACK AND CLOSE
*******************************************************************************
JMPTABLE:
SHOWABOUT:	JSR	ABOUTTEXT	* OPEN WINDOW WITH ABOUT TEXT
		RTS
WRITEDL:	JSR	SDLOADER	* OPEN WINDOW WITH USER DOCS
		RTS
ENDPRG:		JSR	REQUEST		* OPEN REQUESTER TO QUIT OR NOT
		RTS
EDITEXT:	JSR	MENUTEXT	* EDIT BOOT MENU TEXT
		RTS
RUNPRG:		MOVE.L	$4,A6 		* EXECBASE ADRESS
		JSR	BOOTPRG		* RUN BOOT PRG
		RTS
WRITEDF0:	JSR	WRITE0		* WRITE BOOT TO DF0:
		RTS
WRITEDF1:	;JSR	WRITE1		* WRITE BOOT TO DF1:
		RTS
*******************************************************************************
