<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
        <title>Nano vm - manual compiling</title>
    </head>
    <body bgcolor="white" text="black" link="#1025C3" vlink="red" alink="green">
        <center>
            <table border="0" width="640">
                <tr>
                    <td align="center">
                        <h1>Compiling</h1>
                    </td>
                </tr>
                <tr>
                    <td align="left">
<h2>Compiling Guide</h2>

<pre>
Note: you need the gcc c compiler.
The reason is I use the "labels as values" feature for the execution engine.
And gcc is the only compiler which can do that. But this isn't really a problem
as gcc exists on nearly every platform.


1. Edit "shared/host.h": set the machine and OS type.
2. Edit the "Makefile": set MACHINE.
3. "make shrd" creates the shared objects needed by the assembler and the VM.
4. "make" to compile.

   "make dist" creates a source distribution archive.
</pre>

<h2>Porting nano</h2>

<pre>

Makefile
    COP              set the needed compiler options
    CFLAGS
    LDFLAGS


shared/
    host.h
        Define a new machine and OS type.
        Set endianess.
        Set CLOCKS_PER_SEC if needed.
        PATH_SLASH_CONV set TRUE, if OS uses backslash in paths.

vm/
    arch.h
        wait_sec    Use the delay functions of your OS.
        wait_tick

    exe_socket.c    If your OS doesn't support BSD sockets, you have to change
                    some stuff there.
</pre>



<a href="installation.html" target="page">Prev: Installation</a>
					</td>
                </tr>
            </table>
        </center>
    </body>
</html>
