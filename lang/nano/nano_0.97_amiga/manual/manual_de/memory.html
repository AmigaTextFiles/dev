<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
        <title>Nano vm - manual memory</title>
    </head>
    <body bgcolor="white" text="black" link="#1025C3" vlink="red" alink="green">
        <center>
            <table border="0" width="640">
                <tr>
                    <td align="center">
                        <h1>Speicher</h1>
                    </td>
                </tr>
                <tr>
                    <td align="left">
Variablen werden in Speicherlöcken angelegt. Die Standardgrösse ist "4096" Bytes <br>
pro Block. Bis zu 64 Blöcke können verwendet werden. Nano reserviert die benötigten <br>
Blöcke automatisch. Wenn du mehr Speicher benötigst, dann kannst du die Blockgrösse <br>
mit dem "membsize" Register erhöhen. <br><br>

Felder werden als eigener Block reserviert. Deshalb hat "membsize" bei ihnen keine <br>
Auswirkung. <br><br><br>


<h2>Virtueller Speicher</h2>

Bei Rechnern ohne MMU kann der eingebaute Treiber für Virtuellen Speicher <br>
verwendet werden. <br>
Beachte: nur Felder können VM verwenden! <br><br>

Du musst einen Pfad setzen, wo die Swapdatei angelegt werden soll: <br><br>

Setzte eine "NANOTEMP" Umgebungsvariable zu dem Verzeichnis. <br><br>

PC: set nanotemp=%TEMP%\vm_ <br><br>

Amiga: setenv nanotemp "T:vm_" <br><br>

Nano hängt die aktuelle Zeit an den Dateinamen: "vm_hhmmss". <br><br>

Die folgenden Register sind wichtig: <br><br>

Um VM zu aktivieren muss "vmuse" auf "1" gesetzt sein. <br><br>

"vmbsize" ist die Grösse der Swapdatei in Bytes. Der Standardwert ist "1048576" Bytes <br>
(1 MB). Zum Erhöhen einfach mit einem Faktor multiplizieren. <br><br>

"vmcachesize" ist die Cachegrösse für Feldelemente. Der Standardwert ist "1024". <br><br>

Beachte: die long Register L32 - L35 speichern diese Werte. <br>
Du solltest deshalb nur den Bereich von L0 - L31 für deine Daten nutzen! <br><br>

Limits: Die Grösse der Swapdatei ist auf 2048 MB begrenzt. Das sollte aber kein <br>
Problem sein ;-). <br><br>

Beispiel: <br>

     <pre>
     #include &lt;vm.nah&gt;                      Setzt die Registernamen

     push_i      1, vmuse;                  vm einschalten

     push_i      256, L0;
     mul_l       vmbsize, L0, vmbsize;      setze 256 MB für Swapdatei

     push_i      10000, vmcachesize;        Cache für 10000 Elemente
     </pre>



<a href="files_error.html" target="page">Prev: Dateien Fehlercodes</a> | <a href="memory_error.html" target="page">Next: Speicher Fehlercodes</a>
                    </td>
                </tr>
            </table>
        </center>
    </body>
</html>
