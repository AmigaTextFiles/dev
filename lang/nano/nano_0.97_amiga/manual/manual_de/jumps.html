<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
		<title>Nano vm - manual jumps</title>
    </head>
	<body bgcolor="white" text="black" link="#1025C3" vlink="red" alink="green">
        <center>
            <table border="0" width="640">
				<tr>
					<td align="center">
						<h1>Sprünge</h1>
					</td>
				</tr>
				<tr>
                    <td align="left">
Sprünge kontrollieren den Programmablauf. Ohne sie könnte ein Programm nur von oben <br>
nach unten laufen. Das wäre nutzlos. <br><br>

Nano hat drei grundsätzliche Sprungbefehle. Du kennst schon einen: "jmp_l". <br><br>

    <pre>
    jmp         label;                 springt zur Sprungmarke

    jsr         label;                 springt zum Unterprogramm
    rts;                               kehrt vom Unterprogramm zurück

    jmp_l       L, label;              springt zur Sprungmarke, wenn "L" wahr (1) ist
    jsr_l       L, label;              springt zum Unterprogramm, wenn "L" wahr (1) ist
    </pre>

Um Schleifen zu beschleunigen, habe ich zwei Befehle in einen kombiniert:

    <pre>
    eq_jmp_l    L1, L2, label;         springt zur Sprungmarke, wenn "L1" gleich "L2" ist
    neq_jmp_l   L1, L2, label;                                  ungleich
    gr_jmp_l    L1, L2, label;                                  grösser
    ls_jmp_l    L1, L2, label;                                  kleiner
    greq_jmp_l  L1, L2, label;                                  grösser oder gleich
    lseq_jmp_l  L1, L2, label;                                  kleiner oder gleich

    eq_jsr_l    L1, L2, label;         springt zum Unterprogramm, wenn "L1" gleich "L2" ist
    neq_jsr_l   L1, L2, label;                                    siehe oben!
    gr_jsr_l    L1, L2, label;
    ls_jsr_l    L1, L2, label;
    greq_jsr_l  L1, L2, label;
    lseq_jsr_l  L1, L2, label;
    </pre>

Siehe auch: <a href="loops.html" target="page">Schleifen</a> <br><br>

Das folgende Beispiel zeigt wie man den "jsr" Befehl verwendet: <br><br>

	<pre>
        mul.na

     1| push_i     33, L0;
     2| push_i     17, L1;
     3|
     4| jsr        multiply;           springe zu Zeile "11"
     5| print_l    L2;
     6| push_i	   1, L3;
     7| print_n    L3;
     8| push_i     0, L3;
     9| exit       L3;
    10|
    11| lab multiply;
    12|     mul_l      L0, L1, L2;
    13|     rts;                       springe zurück zu Zeile "5"
   </pre>






<a href="loops.html" target="page">Prev: Schleifen</a> | <a href="arrays.html" target="page">Next: Felder</a>
                    </td>
                </tr>
			</table>
		</center>
    </body>
</html>

