@database Contents
@master PCQ:Hyper/utils/crc16.guide
@$VER: 1.0
@author "Nils Sjoholm"
@(c) "@ Nils Sjoholm"

@node "Main" "Utils/CRC16"




                         Utils/CRC16


                        @{" CRCCheck " link "crccheck" 0}
                        @{" UpdCRC   " link "updcrc" 0}








@endnode

@node "crccheck" "Utils/CRC16/CRCCheck"

    Utils/CRC16/CRCCheck

    NAME
        CRCCheck - calculate the CRC of a buffer

    SYNOPSIS
        Function CRCCheck(Buffer : Address; Length : Integer) : Word;

    DESCRIPTION
        CRCCheck uses UpdCRC to calculate the CRC value for an
        entire buffer at once.  If you are processing data one byte
        at a time, you can use UpdCRC to calculate the CRC, but if
        you have the entire buffer at hand you can use this routine.

    EXAMPLE

        PROGRAM CRCStr;
        {$I "Include:Utils/CRC16.i"}
        {$I "Include:Utils/StringLib.i"}
        VAR
            Str : String;
        BEGIN
            Str := AllocString(256);
            Write('Enter a String: ');
            Readln(Str);
            Writeln('The CRC OF "', Str, '" is ',
                        CRCCheck(Str, StrLen(Str)));
        end.

    INPUTS
        Buffer : A pointer to the data buffer
        Length : The number of bytes to calculate

    RESULTS
        The CRC value of the entire buffer

    SEE ALSO

        @{" UpdCRC " link "updcrc" 0}

@endnode

@node "updcrc" "Utils/CRC16/UpdCRC"

    Utils/CRC16/UpdCRC

    NAME
        UpdCRC - Update a CRC code for the next byte of data

    SYNOPSIS
        Function UpdCRC(cp : Byte; crc : Word) : Word;

    DESCRIPTION
        UpdCRC takes a previous 16-bit CRC value and updates
        it according to the next character.  The CRC is
        calculated by the fast table-driven method
        compatible with ZMODEM, but incompatible with Kermit
        and XMODEM.

        This routine was written by Stephen Satchell and Chuck
        Forsberg.

    EXAMPLE

        PROGRAM CRC;
        {$I "Include:Utils/CRC16.p"}
        VAR
            InFile : Text;
            Code   : Word;
        BEGIN
            IF ReOpen(CommandLine, InFile) THEN BEGIN
                Code := 0;
                WHILE NOT EOF(InFile) DO BEGIN
                    Code := UpdCRC(InFile^, Code);
                    Get(InFile);
                END;
                Close(InFile);
                Writeln('The CRC is ', Code);
            END ELSE
                Writeln('Could NOT open ', CommandLine);
        END.

    INPUTS
        cp      : The character to add to the CRC value
        crc     : The previous crc value

    RESULTS
        The updated CRC value

    SEE ALSO

        @{" CRCCheck " link "crccheck" 0}

@endnode



