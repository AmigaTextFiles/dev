@database Contents
@master PCQ:Hyper/utils/pcqmemory.guide
@$VER: 1.0
@author "Nils Sjoholm"
@(c) "@ Nils Sjoholm"

@node "Main" "Utils/PCQMemory"




                         Utils/PCQMemory


                          @{" FreePCQMem " link "freepcqmem" 0}
                          @{" GetMem     " link "getmem" 0}













@endnode

@node "freepcqmem" "Utils/PCQMemory/FreePCQMem"

    Utils/PCQMemory/FreePCQMem

    NAME
        FreePCQMem - return PCQ memory to the system

    SYNOPSIS
        PROCEDURE FreePCQMem(VAR Ptr : Address; Size : Integer);

    DESCRIPTION
        FreePCQMem returns memory allocated by GetMem to the system
        memory pool.  This memory would normally be freed at the
        end of the program, but using this routine allows you to
        adjust your memory requirements within the program.

    EXAMPLE

        PROCEDURE Behave;
        {$I "Include:Utils/PCQMemory.i"}
        VAR
            p : Address;
        BEGIN
            GetMem(p, 100000);
            FreePCQMem(p, 100000);
        END.

    INPUTS

        Ptr   : Any pointer variable
        Size  : The amount of memory to be freed.  This number must
                match the amount that was initially allocated.

    RESULTS
        None

    BUGS

    SEE ALSO

        @{" GetMem      " link "getmem" 0}
        @{" AllocString " link "PCQ:Hyper/utils/stringlib.guide/allocstring" 0}
        @{" FreeString  " link "PCQ:Hyper/utils/stringlib.guide/freestring" 0}

@endnode

@node "getmem" "Utils/PCQMemory/GetMem"

    Utils/PCQMemory/GetMem

    NAME
        GetMem - allocate PCQ memory

    SYNOPSIS
        PROCEDURE GetMem(VAR Ptr : Address; Size : Integer);

    DESCRIPTION
        GetMem allocates PCQ memory from the system pool.  PCQ
        memory is automatically returned to the system at the
        end of the program's run.  It also makes use of the
        HeapError routine to help recover from low memory
        situations.

        PCQ memory, which is also returned by AllocString and
        New, is always allocated with the flags MEMF_PUBLIC and
        MEMF_CLEAR.  If you have different requirements, you'll
        need to call Exec's AllocMem or Intuition's AllocRemember
        explicitly.

        Since the PCQ memory allocation scheme uses calls to
        AllocRemember, each memory allocation will actually try
        to allocate between 12 and 20 extra bytes.  If the memory
        not available, the HeapError function takes over.  By
        default, the program aborts with run-time error 54.

    EXAMPLE

        PROGRAM HogMemory;
        {$I "Include:Utils/PCQMemory.i"}
        VAR
            p : Address;
        BEGIN
            GetMem(p,100000);
        END. { The memory is automatically returned }

    INPUTS

        Ptr   : Any pointer type
        Size  : The amount of memory, in bytes, to allocate

    RESULTS
        None

    BUGS

    SEE ALSO

        @{" FreePCQMem  " link "freepcqmem" 0}
        @{" AllocString " link "PCQ:Hyper/utils/stringlib.guide/allocstring" 0}
        @{" FreeString  " link "PCQ:Hyper/utils/stringlib.guide/freestring" 0}

@endnode


