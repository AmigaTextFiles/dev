@database Contents
@master PCQ:Hyper/utils/datetools.guide
@$VER: 1.0
@author "Nils Sjoholm"
@(c) "@ Nils Sjoholm"

@node "Main" "Utils/DateTools"




                          Utils/DateTools

                         @{" GetDescription " link "getdescription" 0}
                         @{" TimeDesc       " link "timedesc" 0}
                         @{" StampDesc      " link "stampdesc" 0}
                        











@endnode

@node "getdescription" "Utils/DateTools/GetDescription"

    Utils/DateTools/GetDescription

    NAME
        GetDescription - convert seconds to a date description

    SYNOPSIS
        PROCEDURE GetDescription(Total  : Integer;
                                 VAR DD : DateDesription);

    DESCRIPTION
        This routine converts the time format of the timer.device
        into a more easily used form.  The timer.device returns
        a time that is the number of seconds and microseconds after
        midnight on January 1, 1978, the same numbers Intuition
        returns in the CurrentTime function.  This routine takes
        that number of seconds and converts it into a year, month,
        day, etc.

        If you have the time in a DateStamp format (from AmigaDOS),
        you can use the StampDesc routine to do the same thing.

        The DateDescription record is defined as follows:

            DaysOfTheWeek = (Sunday, Monday, Tuesday, Wednesday,
                                Thursday, Friday, Saturday);

            DateDescription = RECORD
                Day     : Byte;          { Day OF month, 1..31 }
                Month   : Byte;          { Month, 1..12 }
                Year    : Short;         { Year, 1978... }
                DOW     : DaysOfTheWeek; { Sunday .. Saturday }
                Hour    : Byte;          { 0..23.  0 = 12 AM, 12 = Noon }
                Minute  : Byte;          { 0..59 }
                Second  : Byte;          { 0..59 }
            END;

    EXAMPLE

        PROGRAM ShowDate;
        {$I "Include:Utils/DateTools.i"}
        {$I "Include:Intuition/Intuition.i"}
        VAR
            MySecs, MyMicros : Integer;
            MyDate  : DateDescription;
        BEGIN
            CurrentTime(MySecs, MyMicros);
            GetDescription(MySecs, MyDate);
            WITH MyDate DO
                Writeln(MonthNames[Month], ' ', Day, ', ', Year);
        END.

    INPUTS

        Total : The total number of seconds after midnight on
                January 1, 1978, e.g. from a TimeVal.
        DD    : A DateDescription record

    RESULTS
        None

    BUGS

    SEE ALSO

        @{" CreateTimer " link "PCQ:Hyper/utils/timerutils.guide/createtimer" 0} @{" GetSysTime  " link "PCQ:Hyper/utils/timerutils.guide/getsystime" 0} @{" TimeDesc    " link "timedesc" 0}
        @{" StampDesc   " link "stampdesc" 0} @{" CurrentTime " alink "Include:Intuition/Intuition.i/main" 1771}

@endnode

@node "stampdesc" "Utils/DateTools/StampDesc"

    Utils/DateTools/StampDesc

    NAME
        StampDesc - convert a DateStampRec into a DateDescription

    SYNOPSIS
        PROCEDURE StampDesc(DS : DateStampRec;
                            VAR DD : DateDescription);

    DESCRIPTION
        This routine converts a date and time from the DateStampRec
        format into a DateDescription, which is easier to use but
        much larger.  The DateDescription is layed out as follows:

            DaysOfTheWeek = (Sunday, Monday, Tuesday, Wednesday,
                                Thursday, Friday, Saturday);

            DateDescription = RECORD
                Day     : Byte;          { Day of month, 1..31 }
                Month   : Byte;          { Month, 1..12 }
                Year    : Short;         { Year, 1978... }
                DOW     : DaysOfTheWeek; { Sunday .. Saturday }
                Hour    : Byte;          { 0..23.  0 = 12 AM, 12 = Noon }
                Minute  : Byte;          { 0..59 }
                Second  : Byte;          { 0..59 }
            END;

        If you have the time in a TimeVal rather than a DateStampRec,
        you can use the GetDescription routine to convert it.

    EXAMPLE

        PROGRAM ShowTime;
        {$I "Include:Utils/DateTools.i"}
        {$I "Include:Libraries/DOS.i"}
        VAR
            MyStamp : DateStampRec;
            MyDate  : DateDescription;
        BEGIN
            DateStamp(MyStamp);
            StampDesc(MyStamp,MyDate);
            WITH MyDate DO
                Writeln('It is ', Minutes, ' after ', Hour);
        END.

    INPUTS

        DS    : An AmigaDOS DateStampRec, initialized with a date
                and time
        DD    : A DateDescription record

    RESULTS
        None

    BUGS

    SEE ALSO

        @{" DateStamp      " alink "Include:DOS/DOS.i/main" 251} @{" GetDescription " link "getdescription" 0} @{" TimeDesc       " link "timedesc" 0}

@endnode

@node "timedesc" "Utils/DateTools/TimeDesc"


    Utils/DateTools/TimeDesc

    NAME
        TimeDesc - fill a DateDescription with the current date/time

    SYNOPSIS
        PROCEDURE TimeDesc(VAR DD : DateDescription);

    DESCRIPTION
        TimeDesc fills in a DateDescription record with the current
        system date and time.  A DateDescription record is defined
        as follows:

            DaysOfTheWeek = (Sunday, Monday, Tuesday, Wednesday,
                                Thursday, Friday, Saturday);

            DateDescription = RECORD
                Day     : Byte;          { Day of month, 1..31 }
                Month   : Byte;          { Month, 1..12 }
                Year    : Short;         { Year, 1978... }
                DOW     : DaysOfTheWeek; { Sunday .. Saturday }
                Hour    : Byte;          { 0..23.  0 = 12 AM, 12 = Noon }
                Minute  : Byte;          { 0..59 }
                Second  : Byte;          { 0..59 }
            END;

    EXAMPLE

        PROGRAM DayOfWeek;
        {$I "Include:Utils/DateTools.i"}
        VAR
            MyDate : DateDescription;
        BEGIN
            TimeDesc(MyDate);
            Writeln('It is ', DayNames[MyDate.DOW]);
        END.

    INPUTS

        DD    : A DateDescription record

    RESULTS
        None

    BUGS

    SEE ALSO

        @{" GetDescription " link "getdescription" 0} @{" StampDesc      " link "stampdesc" 0}

@endnode




