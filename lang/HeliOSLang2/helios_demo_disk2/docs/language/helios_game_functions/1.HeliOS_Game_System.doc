
****************************************
The HeliOS game control operating system
****************************************

For games which require optimum speed and sophisticated graphic animation
functions it is often necessary to close down the Amiga operating system
and replace it with custom machine coded hardware control routines.

Unfortunately very few games which close down the Amiga operating system do
so thoroughly, legally, and in a way which enables the operating system to
be restarted later in full operational order.

HeliOS can close down the Amiga operating system very "legally" and easily
by using one command: "HeliOS_On".  This command saves the current state
of the Amiga OS and then switches on the HeliOS game operating system.

HeliOS can also restart the Amiga operating system very easily using the
command "HeliOS_Off".

These two simple commands can be used as required to comprehensively put to
sleep the Amiga operating system and bring it back whenever required.

While the Amiga operating system is "sleeping", HeliOS runs its own game-
oriented operating system which uses sophisticated interrupt driven graphics
and sound controller software to implement a variety of game functions.

The HeliOS operating system has many interesting features, among which are:

The use of standard Amiga BitMap/RastPort etc. data structures and a similar
multi-slice display system to the Amiga OS, allowing the easy transfer of 
display-related information between Amiga and HeliOS operating systems.

Automatic software sprite creation and handling under interrupt, using 
a simple control method via easy-to-use data structures.

Automatic software sprite animation creation and handling under interrupt
using a simple control method via easy-to-use data structures.

Automatic hardware sprite creation (single or attached) and multiplexing
with shadow mask collision detection and easy control via data structures.

Automatic hardware sprite animation creation and handling under interrupt
via easy to use data structures for control.

Keyboard, joystick and mouse event handling.

Interrupt driven "motor" routines may be installed to carry out synchronous
processing with great efficiency: these act like ultra fast small "robot"
routines which can be set running in the backgound to handle all kinds of
processing tasks including dynamic interactions between graphic objects.

Single, double and triple display buffering.

Multi slice displays with smooth scrolling facility, imagery mapping,
auto-wrapping etc.

Custom copperlist creation and handling.

Sophisticated pixel-perfect full frame rate collision detection.


******************************************************************
Special considerations when using the HeliOS game operating system
******************************************************************

Because the HeliOS operating system totally closes down the Amiga operating
system, and because it uses many Amiga hardware resources within its own
interrupt driven asynchronous code, you must be careful which functions
you try to use in your programs which are to run under HeliOS.

Programs running under HeliOS are somewhat different in style from most
other programs, since most of the dynamic work is carried out by the HeliOS
operating system under interrupt, controlled by "interface" data structures.

The main program running in the foreground first initialises the HeliOS
background routines, then controls what is happening by setting fields in
control data structures.  This process is carried out asynchronously with
the dynamic code which is being run by HeliOS in the background.

The foreground program does little work once it has initialised the HeliOS
system, and mainly functions in a controlling and supervisory role.

Because the HeliOS system runs under interrupt simultaneously with your
foreground program you need to be careful in your foreground code not to
interfere with hardware resources, such as the blitter, which HeliOS might
be using in its background routines.

Ideally most of your game program's "work" will be done automatically by
the HeliOS background routines, which means that you need to use far less
"active" code in your foreground program than in any other language.  Your
foreground code should be mainly concerned with program logic and general
management of the processes running under the HeliOS interrupt code.

If you are running a game under HeliOS you should let the HeliOS operating
system do as much of the work as possible: the HeliOS routines are very fast
(unlike the Amiga OS) and efficient as well as being relatively trouble free
because they are already thoroughly tested and debugged.


-----------------------------------------------------------------
Here are the main constraints when running programs under HeliOS:
-----------------------------------------------------------------

1.

The main consideration is that you must not use any function which makes
use of the Amiga operating system and AmigaDOS - because they aren't there!

This may seem obvious, but it does take a little care and experience to
realise that many text output routines, for example, use the console device,
and many graphics routines use OS library functions.  These facilities are
not available under HeliOS: if they were HeliOS would probably run nearly as
slowly as the Amiga OS!

Take care and check your code carefully in this respect, especially if you
get some unfathomable crashes when running under HeliOS.  Once you gain a
little experience with HeliOS you will know which functions use the Amiga
OS and which do not: it is quite easy to avoid Amiga OS functions in code
which runs under the HeliOS operating system.

2.

Do not use the blitter unless you have to do so, and then only use it via
a HeliOS motor function.

This is simply because the HeliOS operating system is using the blitter in
the background under interrupt while your code is running.

This may sound like a very serious restriction, but it is not so bad as
you may think, because:

a. The HeliOS system can do all the operations which require the blitter
   for you in the background, probably more efficiently than you could by
   implementing them in your high level code.

b. Using the blitter (if you must) via the HeliOS motor functions allows
   accurate and automatic synchronous code to be run efficiently under
   interrupt.

   See HeliOS motor documentation.

c. HeliOS provides useful precalculated blitter functions which can be
   used via motor functions for fast performance of "fixed" blits, scrolls
   etc.

   See "GraphicsLib.doc".

d. HeliOS includes several useful CPU blitter emulations which allow you to
   use the CPU interchangeably with standard blitter functions.

   See "GraphicsLib.doc".

3.

When you want to access disks you must reopen AmigaDOS and use the operating
system for all the usual file operations, then you can return to your game
environment.  You can even set up a cloned display which appears identical
under the Amiga and HeliOS operating systems, so that the user has no idea
that you are moving between the two systems.

4.

Do not use Amiga OS fonts or text output under the HeliOS game operating
system.

5.

Do not use the HeliOS multi-stream text system when running programs under
the HeliOS game operating system.


****************************************************
An overview of starting programs to run under HeliOS
****************************************************

When you want to enter a section of your program which is to run under the
HeliOS game operating system here are the steps you should take:

1. Initialise a display and graphical object data structures ready to run
   them under HeliOS.

2. Install your new objects into the HeliOS system.

3. Switch off the Amiga OS and activate the HeliOS operating system using
   the "HeliOS_On" command.

4. Control all your game dynamics by storing parameters into the fields of
   the various data structures which control the HeliOS system.

When you are finished......

5. Switch off the HeliOS OS and activate the Amiga operating system using
   the "HeliOS_Off" command.

6. Remove everything you installed from the HeliOS system.

7. De-allocate all your HeliOS objects etc.

See the example programs provided for a simple introduction on how to do
this: it is better to examine actual functional code than simply to read
theoretical explanations.


*************************************************************************
End
*************************************************************************
