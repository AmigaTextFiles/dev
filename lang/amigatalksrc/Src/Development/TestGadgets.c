/*
 *  Source machine generated by GadToolsBox V2.0b
 *  which is (c) Copyright 1991-1993 Jaba Development
 *
 *  GUI Designed by : Jim Steichen
 */

#include <exec/types.h>
#include <intuition/intuition.h>
#include <intuition/classes.h>
#include <intuition/classusr.h>
#include <intuition/imageclass.h>
#include <intuition/gadgetclass.h>
#include <libraries/gadtools.h>
#include <graphics/displayinfo.h>
#include <graphics/gfxbase.h>
#include <clib/exec_protos.h>
#include <clib/intuition_protos.h>
#include <clib/gadtools_protos.h>
#include <clib/graphics_protos.h>
#include <clib/utility_protos.h>
#include <string.h>
#include <clib/diskfont_protos.h>

#define GetString( g )      ((( struct StringInfo * )g->SpecialInfo )->Buffer  )
#define GetNumber( g )      ((( struct StringInfo * )g->SpecialInfo )->LongInt )

#define FileName                            0
#define Button                              1
#define Chk                                 2
#define Int                                 3
#define LV                                  4
#define Radio                               5
#define Number                              6
#define Cycle                               7
#define Pal                                 8
#define VScroller                           9
#define HSlider                             10
#define string                              11
#define Text                                12

#define TW_CNT 13

struct IntuitionBase *IntuitionBase;
struct Library       *GadToolsBase;

struct Screen         *Scr = NULL;
UBYTE                 *PubScreenName = NULL;
APTR                   VisualInfo = NULL;

struct Window         *TWWnd = NULL;
struct Gadget         *TWGList = NULL;
struct Menu           *TWMenus = NULL;
struct IntuiMessage    TWMsg;
struct Gadget         *TWGadgets[ TW_CNT ];

extern Class          *initGet( void );
struct IClass         *getClass = NULL;
struct _Object        *getImage = NULL;

UWORD                  TWLeft = 10;
UWORD                  TWTop = 15;
UWORD                  TWWidth = 622;
UWORD                  TWHeight = 408;
UBYTE                 *TWWdt = (UBYTE *)"Test Gadgets Window";

struct TextAttr       *Font, Attr;

UWORD                  FontX, FontY;
UWORD                  OffX, OffY;

struct TextFont       *TWFont = NULL;

UBYTE *Radio0Labels[] = {
	(UBYTE *)"_Yes",
	(UBYTE *)"_No",
	(UBYTE *)"_Maybe",
	NULL };

UBYTE *Cycle0Labels[] = {
	(UBYTE *)"Yes",
	(UBYTE *)"No",
	(UBYTE *)"Maybe",
	NULL };

int TWItem0( void );
int TWChecked1MI( void );
int TWSubItem1( void );
int TWSubMI2( void );

struct NewMenu TWNewMenu[] = {

   NM_TITLE, (STRPTR) "PROJECT", NULL, 0, NULL, NULL,
   
    NM_ITEM, (STRPTR) "Item1",       (STRPTR)"1", 0, 0L, (APTR) TWItem0,
    NM_ITEM, (STRPTR) NM_BARLABEL,          NULL, 0, 0L, NULL,

    NM_ITEM, (STRPTR) "CheckedItem",        NULL,
    CHECKIT | CHECKED | MENUTOGGLE, 0L, (APTR) TWChecked1MI,
   
    NM_ITEM, (STRPTR) "SubSelections »", NULL, 0, NULL, NULL,

     NM_SUB, (STRPTR) "SubItem1", (STRPTR)"S", NM_ITEMDISABLED, 0L, 
     (APTR) TWSubItem1,

     NM_SUB, (STRPTR) "SubItem2",        NULL, 0,               0L, 
     (APTR) TWSubMI2,
   
   NM_END, NULL, NULL, 0, 0L, NULL 
};

UWORD TWGTypes[] = {

   GENERIC_KIND,   BUTTON_KIND,   CHECKBOX_KIND,
   INTEGER_KIND,   LISTVIEW_KIND, MX_KIND,
   NUMBER_KIND,    CYCLE_KIND,    PALETTE_KIND,
   SCROLLER_KIND,  SLIDER_KIND,   STRING_KIND,
   TEXT_KIND
};

int FileNameClicked( void );
int ButtonClicked( void );
int ChkClicked( void );
int IntClicked( void );
int LVClicked( void );
int RadioClicked( void );
int CycleClicked( void );
int PalClicked( void );
int VScrollerClicked( void );
int HSliderClicked( void );
int stringClicked( void );

struct NewGadget TWNGad[] = {

    53,  10,  20,  14,                  NULL, NULL, FileName, 
   0, NULL, (APTR) FileNameClicked,
    
    37,  33,  73,  16, (UBYTE *)"_Button",    NULL, Button, 
   PLACETEXT_IN, NULL, (APTR) ButtonClicked,
    
    81,  61,  26,  11, (UBYTE *)"_CheckBox:", NULL, Chk, 
   PLACETEXT_LEFT | NG_HIGHLABEL, NULL, (APTR) ChkClicked,
  
   181,  11,  89,  17, (UBYTE *)"_Integer",   NULL, Int, 
   PLACETEXT_LEFT | NG_HIGHLABEL, NULL, (APTR) IntClicked,

   290,  25, 141, 169, (UBYTE *)"List_View",  NULL, LV, 
   PLACETEXT_ABOVE | NG_HIGHLABEL, NULL, (APTR) LVClicked,

   213,  51,  17,   9,                  NULL, NULL, Radio, 
   PLACETEXT_LEFT, NULL, (APTR) RadioClicked,
 
   490,  33,  57,  16, (UBYTE *)"Number",     NULL, Number, 
   PLACETEXT_ABOVE, NULL, NULL,
   
   478,  92,  89,  21, (UBYTE *)"C_ycle",     NULL, Cycle, 
   PLACETEXT_ABOVE | NG_HIGHLABEL, NULL, (APTR) CycleClicked,

    49, 119, 163, 127, (UBYTE *)"_Palette",   NULL, Pal, 
    PLACETEXT_ABOVE | NG_HIGHLABEL, NULL, (APTR) PalClicked,

   240, 134,  17, 130, (UBYTE *)"_VScr",      NULL, VScroller, 
   PLACETEXT_ABOVE | NG_HIGHLABEL, NULL, (APTR) VScrollerClicked,
  
   323, 220, 188,  13, (UBYTE *)"_HSlider",   NULL, HSlider, 
   PLACETEXT_BELOW | NG_HIGHLABEL, NULL, (APTR) HSliderClicked,

    65, 274, 190,  18, (UBYTE *)"_String:",   NULL, string, 
    PLACETEXT_LEFT | NG_HIGHLABEL, NULL, (APTR) stringClicked,

   380, 278, 133,  16, (UBYTE *)"Text:",      NULL, Text, 
   PLACETEXT_ABOVE, NULL, NULL
};

ULONG TWGTags[] = {

   TAG_DONE, // ASL Button

   GT_Underscore, '_', TAG_DONE, // Button Gadget

   GTCB_Checked, TRUE, GT_Underscore, '_', TAG_DONE, //CheckBox

   STRINGA_ExitHelp, TRUE, GTIN_Number, 101, 
   GTIN_MaxChars, 10, STRINGA_Justification, GACT_STRINGCENTER, 
   GT_Underscore, '_', TAG_DONE,
   
   GTLV_ShowSelected, NULL, LAYOUTA_Spacing, 2, 
   GTLV_Selected, 0,
   GT_Underscore, '_', TAG_DONE,
   
   GTMX_Labels, (ULONG) &Radio0Labels[ 0 ], GTMX_Spacing, 3, 
   GT_Underscore, '_', TAG_DONE,
   
   GTNM_Number, 666, GTNM_Border, TRUE, TAG_DONE,
   
   GTCY_Labels, (ULONG) &Cycle0Labels[ 0 ], GT_Underscore, '_', 
   TAG_DONE,
   
   GTPA_Depth, 8, GTPA_IndicatorHeight, 10, GTPA_Color, 0, 
   GTPA_ColorOffset, 0, GT_Underscore, '_', TAG_DONE,
   
   GTSC_Total, 100, GTSC_Visible, 10, GTSC_Arrows, 10, 
   PGA_Freedom, LORIENT_VERT, GA_RelVerify, TRUE, 
   GT_Underscore, '_', TAG_DONE,
   
   GTSL_Max, 100, GTSL_Level, 50, GTSL_MaxLevelLen, 10, 
   GTSL_LevelFormat, (ULONG) "%ld units", 
   GTSL_LevelPlace,  PLACETEXT_ABOVE, PGA_Freedom, LORIENT_HORIZ, 
   GA_RelVerify, TRUE, GT_Underscore, '_', TAG_DONE,
   
   GTST_String, (ULONG) "Junk", GTST_MaxChars, 256, 
   STRINGA_Justification, GACT_STRINGCENTER, 
   GT_Underscore, '_', TAG_DONE,
   
   GTTX_Text, (ULONG) "Garbage", GTTX_Border, TRUE, 
   GTTX_CopyText, TRUE, TAG_DONE
};

int SetupScreen( void )
{
   if (!(Scr = LockPubScreen( PubScreenName )))
      return( 1L );

   ComputeFont( 0, 0 );

   if (!(VisualInfo = GetVisualInfo( Scr, TAG_DONE )))
      return( 2L );

   if (!(getClass = initGet()))
      return( 3L );

   if (!(getImage = NewObject( getClass, NULL, 
                               GT_VisualInfo, VisualInfo, TAG_DONE )))
      return( 4L );

   return( 0L );
}

void CloseDownScreen( void )
{
   if (getImage) 
      {
      DisposeObject( getImage );
      getImage = NULL;
      }

   if (getClass) 
      {
      FreeClass( getClass );
      getClass = NULL;
      }

   if (VisualInfo) 
      {
      FreeVisualInfo( VisualInfo );
      VisualInfo = NULL;
      }

   if (Scr) 
      {
      UnlockPubScreen( NULL, Scr );
      Scr = NULL;
      }
}

int FileNameClicked( int dummy )
{
	/* routine when gadget "" is clicked. */
}

int ButtonClicked( int dummy )
{
	/* routine when gadget "_Button" is clicked. */
}

int ChkClicked( int whichOne )
{
	/* routine when gadget "_CheckBox:" is clicked. */
}

int IntClicked( int dummy )
{
	/* routine when gadget "_Integer" is clicked. */
}

int LVClicked( int whichItem )
{
	/* routine when gadget "List_View" is clicked. */
}

int RadioClicked( int whichOne )
{
	/* routine when gadget "" is clicked. */
}

int CycleClicked( int whichOne )
{
	/* routine when gadget "C_ycle" is clicked. */
}

int PalClicked( int whichOne )
{
	/* routine when gadget "_Palette" is clicked. */
}

int VScrollerClicked( int dummy )
{
	/* routine when gadget "_VScr" is clicked. */
}

int HSliderClicked( int dummy )
{
	/* routine when gadget "_HSlider" is clicked. */
}

int stringClicked( int dummy )
{
	/* routine when gadget "_String:" is clicked. */
}

// ------------------------------------------------------------

int TWItem0( void )
{
	/* routine when (sub)item "Item1" is selected. */
}

int TWChecked1MI( void )
{
	/* routine when (sub)item "CheckedItem" is selected. */
}

int TWSubItem1( void )
{
	/* routine when (sub)item "SubItem1" is selected. */
}

int TWSubMI2( void )
{
	/* routine when (sub)item "SubItem2" is selected. */
}

int OpenTWWindow( void )
{
   struct NewGadget  ng;
   struct Gadget    *g;
   UWORD             lc, tc;
   UWORD             wleft = TWLeft, wtop = TWTop, ww, wh;

   ComputeFont( TWWidth, TWHeight );

   ww = ComputeX( TWWidth );
   wh = ComputeY( TWHeight );

   if ((wleft + ww + OffX + Scr->WBorRight) > Scr->Width) 
      wleft = Scr->Width - ww;
   
   if ((wtop + wh + OffY + Scr->WBorBottom) > Scr->Height) 
      wtop = Scr->Height - wh;

   if ( ! ( TWFont = OpenDiskFont( Font )))
      return( 5L );

   if ( ! ( g = CreateContext( &TWGList )))
      return( 1L );

   for (lc = 0, tc = 0; lc < TW_CNT; lc++) 
      {
      CopyMem( (char *) &TWNGad[ lc ], (char *) &ng, 
               (long) sizeof( struct NewGadget )
             );

      ng.ng_VisualInfo = VisualInfo;
      ng.ng_TextAttr   = Font;
      ng.ng_LeftEdge   = OffX + ComputeX( ng.ng_LeftEdge );
      ng.ng_TopEdge    = OffY + ComputeY( ng.ng_TopEdge );

      if (TWGTypes[ lc ] != GENERIC_KIND ) 
         {
         ng.ng_Width      = ComputeX( ng.ng_Width );
         ng.ng_Height     = ComputeY( ng.ng_Height);
         }

      TWGadgets[ lc ] = g = CreateGadgetA( (ULONG) TWGTypes[ lc ], 
                              g, 
                              &ng, 
                              (struct TagItem *) &TWGTags[ tc ] );

      if (TWGTypes[ lc ] == GENERIC_KIND) 
         {
         g->Flags             |= GFLG_GADGIMAGE | GFLG_GADGHIMAGE;
         g->Activation        |= GACT_RELVERIFY;
         g->GadgetRender       = (APTR) getImage;
         g->SelectRender       = (APTR) getImage;
         }

      while (TWGTags[ tc ] != NULL) 
         tc += 2;

      tc++;

      if (g == NULL)
         return( 2L );
      }

   if (!(TWMenus = CreateMenus( TWNewMenu, GTMN_FrontPen, 0L, TAG_DONE )))
      return( 3L );

   LayoutMenus( TWMenus, VisualInfo, TAG_DONE );

   if (!(TWWnd = OpenWindowTags( NULL,

           WA_Left,   wleft,
           WA_Top,    wtop,
           WA_Width,  ww + OffX + Scr->WBorRight,
           WA_Height, wh + OffY + Scr->WBorBottom,

           WA_IDCMP,  IDCMP_GADGETUP | BUTTONIDCMP | CHECKBOXIDCMP
             | INTEGERIDCMP | LISTVIEWIDCMP | MXIDCMP | NUMBERIDCMP
             | CYCLEIDCMP | PALETTEIDCMP | SCROLLERIDCMP | ARROWIDCMP
             | SLIDERIDCMP | STRINGIDCMP | TEXTIDCMP 
             | IDCMP_MENUPICK | IDCMP_CLOSEWINDOW | IDCMP_VANILLAKEY
             | IDCMP_REFRESHWINDOW,

          WA_Flags,     WFLG_SIZEGADGET | WFLG_DRAGBAR | WFLG_DEPTHGADGET
            | WFLG_CLOSEGADGET | WFLG_SMART_REFRESH | WFLG_ACTIVATE,

          WA_Gadgets,	   TWGList,
          WA_Title,	   TWWdt,
          WA_ScreenTitle,  "TestGadgets",
          WA_PubScreen,	   Scr,
          WA_MinWidth,	   300,
          WA_MinHeight,	   20,
          WA_MaxWidth,	   640,
          WA_MaxHeight,	   480,
          TAG_DONE )))
      return( 4L );

   SetMenuStrip( TWWnd, TWMenus );
   GT_RefreshWindow( TWWnd, NULL );

   return( 0L );
}

void CloseTWWindow( void )
{
   if (TWMenus)
      {
      ClearMenuStrip( TWWnd );
      FreeMenus( TWMenus );
      TWMenus = NULL;	
      }

   if (TWWnd) 
      {
      CloseWindow( TWWnd );
      TWWnd = NULL;
      }

   if (TWGList) 
      {
      FreeGadgets( TWGList );
      TWGList = NULL;
      }

   if (TWFont) 
      {
      CloseFont( TWFont );
      TWFont = NULL;
      }
}

int TWCloseWindow( void )
{
   CloseTWWindow();
   return( FALSE );
}

int TWVanillaKey( int whichkey )
{
	/* routine for "IDCMP_VANILLAKEY". */
}


int HandleTWIDCMP( void )
{
   struct IntuiMessage *m;
   struct MenuItem     *n;
   int                (*func)(  int  );
   int                (*mfunc)( void );
   BOOL                 running = TRUE;

   while (m = GT_GetIMsg( TWWnd->UserPort )) 
      {
      CopyMem( (char *) m, (char *) &TWMsg, 
               (long) sizeof( struct IntuiMessage )
             );

      GT_ReplyIMsg( m );

      switch (TWMsg.Class) 
         {
         case IDCMP_REFRESHWINDOW:
            GT_BeginRefresh( TWWnd );
            GT_EndRefresh( TWWnd, TRUE );
            break;

         case IDCMP_CLOSEWINDOW:
            running = TWCloseWindow();
            break;

         case IDCMP_VANILLAKEY:
            running = TWVanillaKey( TWMsg.Code );
            break;

         case IDCMP_GADGETUP:
         case IDCMP_GADGETDOWN:
            func = (void *) ((struct Gadget *)TWMsg.IAddress)->UserData;
            
            running = func( TWMsg.Code );
            break;

         case IDCMP_MENUPICK:
            while (TWMsg.Code != MENUNULL) 
               {
               n          = ItemAddress( TWMenus, TWMsg.Code );
               mfunc      = (void *) (GTMENUITEM_USERDATA( n ));
               running    = mfunc();
               TWMsg.Code = n->NextSelect;
               }
            
            break;
         }
      }

   return( running );
}

PUBLIC int main( void )
{
   return( RETURN_OK );
}
