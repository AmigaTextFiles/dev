scr <- Screen new

scr setScreenModeID: 16r40D20042
scr            open: 'TestScreen'

win <- Window new: 'TestImage2 Window'

win setFlags:        16r100F
win setIDCMPFlags:   16r140
win setWindowOrigin:   0 @   0
win setWindowSize:   640 @ 480
win openOnScreen:    scr

crs <- Colors new: win

crs  makeColorMap: 16

crs setColorReg: 0  red: 0  green: 0  blue: 0   "BLACK"
crs setColorReg: 1  red: 15 green: 15 blue: 15  "WHITE"
crs setColorReg: 2  red: 15 green: 15 blue: 0   "YELLOW"
crs setColorReg: 3  red: 15 green: 0  blue: 15  "MAGENTA"
crs setColorReg: 4  red: 15 green: 0  blue: 0   "RED"
crs setColorReg: 5  red: 0  green: 15 blue: 15  "CYAN"
crs setColorReg: 6  red: 0  green: 15 blue: 0   "GREEN"
crs setColorReg: 7  red: 0  green: 0  blue: 15  "BLUE"
crs setColorReg: 8  red: 0  green: 0  blue: 0   "BLACK"
crs setColorReg: 9  red: 5  green: 11 blue: 12  "DARK CYAN"
crs setColorReg: 10 red: 3  green: 6  blue: 7
crs setColorReg: 11 red: 0  green: 0  blue: 15  "DARK BLUE"
crs setColorReg: 12 red: 0  green: 4  blue: 8
crs setColorReg: 13 red: 14 green: 8  blue: 8   "BROWN?"
crs setColorReg: 14 red: 11 green: 5  blue: 5
crs setColorReg: 15 red: 12 green: 12 blue: 12  "LIGHT GRAY"

scr screenToFront

im2 <- Image new

im2 registerTo: win
 
im2 addImage: 64 height: 27 depth: 4

im2 setImageDataFrom: 'AmigaTalk:Images/EarthImage.asc'

im2 drawImageAt: 400 @ 150

im <- Image new

im registerTo: win

im addImage: 64 height: 27 depth: 4

im grabImageFrom: win startPoint: 400 @ 150 endPoint: 464 @ 177

im setImagePlanePick:  16r0F
im setImagePlaneOnOff: 0

im saveImageIn: 'AmigaTalk:Images/SavedImage.asc'

im drawImageAt: 20 @ 30

itxt <-IText new: 'Do NOT forget to close the window & screen!'

itxt setPens:         1   @ 7
itxt setITextOrigin:  100 @ 0

win printIText: itxt at: 30 @ 20

im  disposeImage
im2 disposeImage

itxt dispose

crs  dispose

('Done with TestImage!') print

('Do NOT forget to close the window & screen!') print

