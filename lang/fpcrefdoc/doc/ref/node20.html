<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 3.0//EN">
<!--Converted with LaTeX2HTML 96.1-h (September 30, 1996) by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds -->
<HTML>
<HEAD>
<TITLE>Pointers</TITLE>
<META NAME="description" CONTENT="Pointers">
<META NAME="keywords" CONTENT="ref">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<LINK REL=STYLESHEET HREF="ref.css">
</HEAD>
<BODY LANG="EN" >
 <A NAME="tex2html586" HREF="node21.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="file:/usr/lib/latex2html/icons/next_motif.gif"></A> <A NAME="tex2html584" HREF="node16.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="file:/usr/lib/latex2html/icons/up_motif.gif"></A> <A NAME="tex2html578" HREF="node19.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="file:/usr/lib/latex2html/icons/previous_motif.gif"></A> <A NAME="tex2html588" HREF="node1.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="file:/usr/lib/latex2html/icons/contents_motif.gif"></A> <A NAME="tex2html589" HREF="node72.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="file:/usr/lib/latex2html/icons/index_motif.gif"></A> <BR>
<B> Next:</B> <A NAME="tex2html587" HREF="node21.html">Procedural types</A>
<B>Up:</B> <A NAME="tex2html585" HREF="node16.html">Types</A>
<B> Previous:</B> <A NAME="tex2html579" HREF="node19.html">Structured Types</A>
<BR> <P>
<H1><A NAME="SECTION03340000000000000000">Pointers</A></H1>
<P>
Free Pascal supports the use of pointers. A variable of the pointer type
contains an address in memory, where the data of another variable may be 
stored.
<P>
<BLOCKQUOTE> <BR><b>  Pointer types</b><BR><BR><IMG WIDTH=59 HEIGHT=16 ALIGN=BOTTOM ALT="syntdiag1804" SRC="img82.gif"><BR></BLOCKQUOTE>
<P>
As can be seen from this diagram, pointers are typed, which means that 
they point to a particular kind of data. The type of this data must be 
known at compile time.
<P>
Dereferencing the pointer (denoted by adding <tt>^</tt> after the variable
name) behaves then like a variable. This variable has the type declared in
the pointer declaration, and the variable is stored in the address that is 
pointed to by the pointer variable.
<P>
Consider the following example:
<BR><IMG WIDTH=76 HEIGHT=44 ALIGN=BOTTOM ALT="listing1745" SRC="img83.gif"><BR>
In this example, <tt>BP</tt> <EM>is a pointer to</EM> a <tt>Buffer</tt> type; while <tt>B</tt>
<EM>is</EM> a variable of type <tt>Buffer</tt>. <tt>B</tt> takes 256 bytes memory,
and <tt>BP</tt> only takes 4 bytes of memory (enough to keep an adress in
memory).
<P>
<EM>Remark:</EM> Free Pascal treats pointers much the same way as C does. This means
that you can treat a pointer to some type as being an array of this type.  
The pointer then points to the zeroeth element of this array. Thus the
following pointer declaration 
<BR><IMG WIDTH=157 HEIGHT=164 ALIGN=BOTTOM ALT="listing1756" SRC="img84.gif"><BR>
Can be considered equivalent to the following array declaration:
<BR><IMG WIDTH=576 HEIGHT=66 ALIGN=BOTTOM ALT="listing1758" SRC="img85.gif"><BR>
The difference is that the former declaration allocates memory for the
pointer only (not for the array), and the second declaration allocates
memory for the entire array. If you use the former, you must allocate memory
yourself, using the <A HREF="node71.html#proGetmem">Getmem</A> function.
<P>
The reference <tt>P^</tt> is then the same as <tt>p[0]</tt>. The following program
illustrates this maybe more clear:
<BR><IMG WIDTH=586 HEIGHT=13 ALIGN=BOTTOM ALT="listing1763" SRC="img86.gif"><BR>
<P>
Free Pascal supports pointer arithmetic as C does. This means that, if <tt>P</tt> is a
typed pointer, the instructions
<BR><IMG WIDTH=576 HEIGHT=13 ALIGN=BOTTOM ALT="listing1768" SRC="img87.gif"><BR>
Will increase, respectively descrease the address the pointer points to
with the size of the type <tt>P</tt> is a pointer to. For example
<BR><IMG WIDTH=576 HEIGHT=83 ALIGN=BOTTOM ALT="listing1771" SRC="img88.gif"><BR>
will increase <tt>P</tt> with 4.
You can also use normal arithmetic operators on pointers, that is, the
following are valid pointer arithmetic operations:
<BR><IMG WIDTH=280 HEIGHT=73 ALIGN=BOTTOM ALT="listing1774" SRC="img89.gif"><BR>
Here, the value that is added or substracted is <EM>not</EM> multiplied by the 
size of the type the pointer points to.
<P>
<HR><A NAME="tex2html586" HREF="node21.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="file:/usr/lib/latex2html/icons/next_motif.gif"></A> <A NAME="tex2html584" HREF="node16.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="file:/usr/lib/latex2html/icons/up_motif.gif"></A> <A NAME="tex2html578" HREF="node19.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="file:/usr/lib/latex2html/icons/previous_motif.gif"></A> <A NAME="tex2html588" HREF="node1.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="file:/usr/lib/latex2html/icons/contents_motif.gif"></A> <A NAME="tex2html589" HREF="node72.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="file:/usr/lib/latex2html/icons/index_motif.gif"></A> <BR>
<B> Next:</B> <A NAME="tex2html587" HREF="node21.html">Procedural types</A>
<B>Up:</B> <A NAME="tex2html585" HREF="node16.html">Types</A>
<B> Previous:</B> <A NAME="tex2html579" HREF="node19.html">Structured Types</A>
<P><ADDRESS>
<I>Michael Van Canneyt <BR>
Fri Sep 25 09:15:40 MEST 1998</I>
</ADDRESS>
</BODY>
</HTML>
