<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 3.0//EN">
<!--Converted with LaTeX2HTML 96.1-h (September 30, 1996) by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds -->
<HTML>
<HEAD>
<TITLE>Modifiers</TITLE>
<META NAME="description" CONTENT="Modifiers">
<META NAME="keywords" CONTENT="ref">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<LINK REL=STYLESHEET HREF="ref.css">
</HEAD>
<BODY LANG="EN" >
 <A NAME="tex2html1000" HREF="node54.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="file:/usr/lib/latex2html/icons/next_motif.gif"></A> <A NAME="tex2html998" HREF="node45.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="file:/usr/lib/latex2html/icons/up_motif.gif"></A> <A NAME="tex2html992" HREF="node52.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="file:/usr/lib/latex2html/icons/previous_motif.gif"></A> <A NAME="tex2html1002" HREF="node1.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="file:/usr/lib/latex2html/icons/contents_motif.gif"></A> <A NAME="tex2html1003" HREF="node72.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="file:/usr/lib/latex2html/icons/index_motif.gif"></A> <BR>
<B> Next:</B> <A NAME="tex2html1001" HREF="node54.html">Unsupported Turbo Pascal modifiers</A>
<B>Up:</B> <A NAME="tex2html999" HREF="node45.html">Using functions and procedures</A>
<B> Previous:</B> <A NAME="tex2html993" HREF="node52.html">Assembler functions</A>
<BR> <P>
<H1><A NAME="SECTION03880000000000000000">Modifiers</A></H1>
<P>
A function or procedure declaration can contain modifiers. Here we list the
various possibilities:
<P>
<BLOCKQUOTE> <BR><b> Modifiers</b><BR>
<BR><IMG WIDTH=576 HEIGHT=112 ALIGN=BOTTOM ALT="syntdiag4433" SRC="img248.gif"><BR>
<BR><IMG WIDTH=576 HEIGHT=29 ALIGN=BOTTOM ALT="syntdiag4437" SRC="img249.gif"><BR>
</BLOCKQUOTE>
<P>
Free Pascal doesn't support all Turbo Pascal modifiers, but
does support a number of additional modifiers. They are used mainly for assembler and
reference to C object files. More on the use of modifiers can be found in
<A NAME="tex2html24" HREF="../prog/prog.html">Programmer's guide</A>.
<P>
<H2><A NAME="SECTION03881000000000000000">Public</A></H2>
<P>
The <tt>Public</tt> keyword is used to declare a function globally in a unit.
This is useful if you don't want a function to be accessible from the unit
file, but you do want the function to be accessible from the object file.
<P>
as an example:
<BR><IMG WIDTH=576 HEIGHT=59 ALIGN=BOTTOM ALT="listing4337" SRC="img250.gif"><BR>
If another program or unit uses this unit, it will not be able to use the
function <tt>Second</tt>, since it isn't declared in the interface part.
However, it will be possible to access the function <tt>Second</tt> at the
assembly-language level, by using it's mangled name (<A NAME="tex2html25" HREF="../prog/prog.html">Programmer's guide</A>\).
<P>
<H2><A NAME="SECTION03882000000000000000">cdecl</A></H2>
<P>
<A NAME="secdecl">&#160;</A>
The <tt>cdecl</tt> modifier can be used to declare a function that uses a C
type calling convention. This must be used if you wish to acces functions in
an object file generated by a C compiler. It allows you to use the function in
your code, and at linking time, you must link the object file containing the
<tt>C</tt> implementation of the function or procedure.
<P>
As an example:
<BR><IMG WIDTH=576 HEIGHT=24 ALIGN=BOTTOM ALT="listing4345" SRC="img251.gif"><BR>
When compiling this, and linking to the C-library, you will be able to call
the <tt>strlen</tt> function throughout your program. The <tt>external</tt>
directive tells the compiler that the function resides in an external
object filebrary (see <A HREF="node51.html#seexternal"><IMG  ALIGN=BOTTOM ALT="gif" SRC="file:/usr/lib/latex2html/icons/cross_ref_motif.gif"></A>).
<P>
<EM>Remark</EM> The parameters in our declaration of the <tt>C</tt> function should 
match exactly the ones in the declaration in <tt>C</tt>. Since <tt>C</tt> is case 
sensitive, this means also that the name of the
function must be exactly the same. the Free Pascal compiler will use the name <EM>
exactly</EM> as it is typed in the declaration.
<P>
<H2><A NAME="SECTION03883000000000000000">popstack</A></H2>
<P>
<A NAME="sepopstack">&#160;</A>
Popstack does the same as <tt>cdecl</tt>, namely it tells the Free Pascal compiler
that a function uses the C calling convention. In difference with the
<tt>cdecl</tt> modifier, it still mangles the name of the function as it would 
for a normal pascal function.
<P>
With <tt>popstack</tt> you could access functions by their pascal names in a
library.
<P>
<H2><A NAME="SECTION03884000000000000000">Export</A></H2>
<P>
Sometimes you must provide a callback function for a C library, or you want
your routines to be callable from a C program. Since Free Pascal and C use
different calling schemes for functions and procedures<A NAME="tex2html26" HREF="footnode.html#4362"><IMG  ALIGN=BOTTOM ALT="gif" SRC="file:/usr/lib/latex2html/icons/foot_motif.gif"></A>, the compiler must be told to generate code
that can be called from a C routine. This is where the <tt>Export</tt> modifier
comes in. Contrary to the other modifiers, it must be specified separately,
as follows:
<BR><IMG WIDTH=576 HEIGHT=24 ALIGN=BOTTOM ALT="listing4364" SRC="img252.gif"><BR>
The square brackets around the modifier are not allowed in this case.
<P>
<EM>Remark:</EM>
as of version 0.9.8, Free Pascal supports the Delphi <tt>cdecl</tt> modifier. 
This modifier works in the same way as the <tt>export</tt> modifier.
<P>
More information about these modifiers can be found in the <A NAME="tex2html27" HREF="../prog/prog.html">Programmer's guide</A> in the
section on the calling mechanism and the chapter on linking.
<P>
<H2><A NAME="SECTION03885000000000000000">StdCall</A></H2>
<P>
As of version 0.9.8, Free Pascal supports the Delphi <tt>stdcall</tt> modifier.
This modifier does actually nothing, since the Free Pascal compiler by default 
pushes parameters from right to left on the stack, which is what the 
modifier does under Delphi (which pushes parameters on the stack from left to 
right).
<P>
More information about this modifier can be found in the <A NAME="tex2html28" HREF="../prog/prog.html">Programmer's guide</A> in the
section on the calling mechanism and the chapter on linking.
<P>
<H2><A NAME="SECTION03886000000000000000">Alias</A></H2>
<P>
The <tt>Alias</tt> modifier allows you to specify a different name for a
procedure or function. This is mostly useful for referring to this procedure
from assembly language constructs. As an example, consider the following
program:
<P>
<BR><IMG WIDTH=576 HEIGHT=113 ALIGN=BOTTOM ALT="listing4373" SRC="img253.gif"><BR>
Remark: the specified alias is inserted straight into the assembly
code, thus it is case sensitive.
<P>
The <tt>Alias</tt> modifier, combined with the <tt>Public</tt> modifier, make a
powerful tool for making externally accessible object files.
<P>
<HR><A NAME="tex2html1000" HREF="node54.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="file:/usr/lib/latex2html/icons/next_motif.gif"></A> <A NAME="tex2html998" HREF="node45.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="file:/usr/lib/latex2html/icons/up_motif.gif"></A> <A NAME="tex2html992" HREF="node52.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="file:/usr/lib/latex2html/icons/previous_motif.gif"></A> <A NAME="tex2html1002" HREF="node1.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="file:/usr/lib/latex2html/icons/contents_motif.gif"></A> <A NAME="tex2html1003" HREF="node72.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="file:/usr/lib/latex2html/icons/index_motif.gif"></A> <BR>
<B> Next:</B> <A NAME="tex2html1001" HREF="node54.html">Unsupported Turbo Pascal modifiers</A>
<B>Up:</B> <A NAME="tex2html999" HREF="node45.html">Using functions and procedures</A>
<B> Previous:</B> <A NAME="tex2html993" HREF="node52.html">Assembler functions</A>
<P><ADDRESS>
<I>Michael Van Canneyt <BR>
Fri Sep 25 09:15:40 MEST 1998</I>
</ADDRESS>
</BODY>
</HTML>
