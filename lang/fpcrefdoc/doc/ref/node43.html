<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 3.0//EN">
<!--Converted with LaTeX2HTML 96.1-h (September 30, 1996) by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds -->
<HTML>
<HEAD>
<TITLE>Structured statements</TITLE>
<META NAME="description" CONTENT="Structured statements">
<META NAME="keywords" CONTENT="ref">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<LINK REL=STYLESHEET HREF="ref.css">
</HEAD>
<BODY LANG="EN" >
 <A NAME="tex2html873" HREF="node44.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="file:/usr/lib/latex2html/icons/next_motif.gif"></A> <A NAME="tex2html871" HREF="node41.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="file:/usr/lib/latex2html/icons/up_motif.gif"></A> <A NAME="tex2html865" HREF="node42.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="file:/usr/lib/latex2html/icons/previous_motif.gif"></A> <A NAME="tex2html875" HREF="node1.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="file:/usr/lib/latex2html/icons/contents_motif.gif"></A> <A NAME="tex2html876" HREF="node72.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="file:/usr/lib/latex2html/icons/index_motif.gif"></A> <BR>
<B> Next:</B> <A NAME="tex2html874" HREF="node44.html">Assembler statements</A>
<B>Up:</B> <A NAME="tex2html872" HREF="node41.html">Statements</A>
<B> Previous:</B> <A NAME="tex2html866" HREF="node42.html">Simple statements</A>
<BR> <P>
<H1><A NAME="SECTION03720000000000000000">Structured statements</A></H1>
<P>
Structured statements can be broken into smaller simple statements, which
should be executed repeatedly, conditionally  or sequentially:
<P>
<BLOCKQUOTE> <BR><b>  Structured statements</b><BR><BR><IMG WIDTH=139 HEIGHT=126 ALIGN=BOTTOM ALT="syntdiag3360" SRC="img189.gif"><BR></BLOCKQUOTE>
<P>
Conditional statements come in 2 flavours :
<P>
<BLOCKQUOTE> <BR><b>  Conditional statements</b><BR><BR><IMG WIDTH=281 HEIGHT=54 ALIGN=BOTTOM ALT="syntdiag3386" SRC="img190.gif"><BR></BLOCKQUOTE>
<P>
Repetitive statements come in 3 flavours:
<P>
<BLOCKQUOTE> <BR><b>  Repetitive statements</b><BR><BR><IMG WIDTH=576 HEIGHT=45 ALIGN=BOTTOM ALT="syntdiag3420" SRC="img191.gif"><BR></BLOCKQUOTE>
<P>
The following sections deal with each of these statements.
<P>
<H2><A NAME="SECTION03721000000000000000">Compound statements</A></H2>
<P>
Compound statements are a group of statements, separated by semicolons,
that are surrounded by the keywords <tt>Begin</tt> and <tt>End</tt>. The
Last statement doesn't need to be followed by a semicolon, although it is
allowed. A compound statement is a way of grouping statements together, 
executing the statements sequentially. They are treated as one statement 
in cases where Pascal syntax expects 1 statement, such as in 
<tt>if ... then</tt> statements.
<P>
<BLOCKQUOTE> <BR><b>  Compound statements</b><BR><BR><IMG WIDTH=576 HEIGHT=13 ALIGN=BOTTOM ALT="syntdiag3452" SRC="img192.gif"><BR></BLOCKQUOTE><H2><A NAME="SECTION03722000000000000000">The <tt>Case</tt> statement</A></H2>
<P>
Free Pascal supports the <tt>case</tt> statement. Its syntax diagram is
<P>
<BLOCKQUOTE> <BR><b> Case statement</b><BR>
<BR><IMG WIDTH=576 HEIGHT=13 ALIGN=BOTTOM ALT="syntdiag3528" SRC="img193.gif"><BR>
<BR><IMG WIDTH=576 HEIGHT=13 ALIGN=BOTTOM ALT="syntdiag3532" SRC="img194.gif"><BR>
<BR><IMG WIDTH=365 HEIGHT=53 ALIGN=BOTTOM ALT="syntdiag3536" SRC="img195.gif"><BR>
</BLOCKQUOTE>
<P>
The constants appearing in the various case parts must be known at 
compile-time, and can be of the following types : enumeration types, 
Ordinal types (except boolean), and chars. The expression must be also of
this type, or an compiler error will occur. All case constants must 
have the same type.
<P>
The compiler will evaluate the expression. If one of the case constants
values matches the value of the expression, the statement that containing
this constant is executed. After that, the program continues after the final
<tt>end</tt>.
<P>
If none of the case constants match the expression value, the statement
after the <tt>else</tt> keyword is executed. This can be an empty statement.
If no else part is present, and no case constant matches the expression
value, program flow continues after the final <tt>end</tt>.
<P>
The case statements can be compound statements 
(i.e. a <tt>begin..End</tt> block).
<P>
<EM>Remark:</EM> Contrary to Turbo Pascal, duplicate case labels are not
allowed in Free Pascal, so the following code will generate an error when
compiling:
<P>
<BR><IMG WIDTH=576 HEIGHT=29 ALIGN=BOTTOM ALT="listing3492" SRC="img196.gif"><BR>
The compiler will generate a <tt>Duplicate case label</tt> error when compiling
this, because the 3 also appears (implicitly) in the range <tt>1..5</tt>. This
is similar to Delhpi syntax.
<P>
The following are valid case statements:
 'b' : WriteLn ('B pressed');
<BR><IMG WIDTH=183 HEIGHT=127 ALIGN=BOTTOM ALT="listing3496" SRC="img197.gif"><BR>
Or 
 'b' : WriteLn ('B pressed');
<BR><IMG WIDTH=576 HEIGHT=13 ALIGN=BOTTOM ALT="listing3498" SRC="img198.gif"><BR>
<BR><IMG WIDTH=186 HEIGHT=169 ALIGN=BOTTOM ALT="listing3500" SRC="img199.gif"><BR><H2><A NAME="SECTION03723000000000000000">The <tt>If..then..else</tt> statement</A></H2>
<P>
The <tt>If .. then .. else..</tt> protottype syntax is
<P>
<BLOCKQUOTE> <BR><b>  If then statements</b><BR><BR><IMG WIDTH=576 HEIGHT=29 ALIGN=BOTTOM ALT="syntdiag3604" SRC="img200.gif"><BR></BLOCKQUOTE>
<P>
The expression between the <tt>if</tt> and <tt>then</tt> keywords must have a
boolean return type. If the expression evaluates to <tt>True</tt> then the 
statement followingthen is executed. If the expression evaluates to 
<tt>False</tt>, then the statement following <tt>else</tt> is executed, if it is
present.
<P>
Be aware of the fact that the boolean expression will be short-cut evaluated. 
(Meaning that the evaluation will be stopped at the point where the
 outcome is known with certainty)
<P>
Also, before the <tt>else</tt> keyword,  no semicolon (<tt>;</tt>) is allowed,
but all statements can be compound statements.
<P>
In nested <tt>If.. then .. else</tt> constructs, some ambiguity may araise as
to which  <tt>else</tt> statement paits with which <tt>if</tt> statement. The rule
is that the <tt>else </tt> keyword matches the first <tt>if</tt> keyword not
already matched by an <tt>else</tt> keyword.
<P>
For example:
<BR><IMG WIDTH=262 HEIGHT=92 ALIGN=BOTTOM ALT="listing3565" SRC="img201.gif"><BR>
Despite it's appreance, the statement is syntactically equivalent to
<BR><IMG WIDTH=281 HEIGHT=16 ALIGN=BOTTOM ALT="listing3567" SRC="img202.gif"><BR>
and not to 
<BR><IMG WIDTH=166 HEIGHT=71 ALIGN=BOTTOM ALT="listing3569" SRC="img203.gif"><BR>
If it is this latter construct you want, you must explicitly put the
<tt>begin</tt> and <tt>end</tt> keywords. When in doubt, add them, they don't
hurt.
<P>
The following is a valid statement:
<BR><IMG WIDTH=205 HEIGHT=52 ALIGN=BOTTOM ALT="listing3574" SRC="img204.gif"><BR><H2><A NAME="SECTION03724000000000000000">The <tt>For..to/downto..do</tt> statement</A></H2>
<P>
Free Pascal supports the <tt>For</tt> loop construction. A for loop is used in case
one wants to calculated something a fixed number of times. 
The prototype syntax is as follows:
<P>
<BLOCKQUOTE> <BR><b> For statement</b><BR>
<BR><IMG WIDTH=204 HEIGHT=221 ALIGN=BOTTOM ALT="syntdiag3690" SRC="img205.gif"><BR>
<BR><IMG WIDTH=576 HEIGHT=31 ALIGN=BOTTOM ALT="syntdiag3694" SRC="img206.gif"><BR>
<BR><IMG WIDTH=576 HEIGHT=30 ALIGN=BOTTOM ALT="syntdiag3698" SRC="img207.gif"><BR>
<BR><IMG WIDTH=374 HEIGHT=16 ALIGN=BOTTOM ALT="syntdiag3702" SRC="img208.gif"><BR>
</BLOCKQUOTE>
<P>
<tt>Statement</tt> can be a compound statement. 
When this statement is encountered, the control variable is initialized with
the initial value, and is compared with the final value.
What happens next depends on whether <tt>to</tt> or <tt>downto</tt> is used:
<OL>
<LI> In the case <tt>To</tt> is used, if the initial value larger than the final 
value then <tt>Statement</tt> will never be executed.
<LI> In the case <tt>DownTo</tt> is used, if the initial value larger than the final 
value then <tt>Statement</tt> will never be executed. 
</OL>
After this check, the statement after <tt>Do</tt> is executed. After the
execution of the statement, the control variable is increased or decreased
with 1, depending on whether <tt>To</tt> or <tt>Downto</tt> is used.
<P>
The control variable must be an ordinal type, no other 
types can be used as counters in a loop.
<P>
<EM>Remark:</EM> Contrary to ANSI pascal specifications, Free Pascal first initializes
the counter variable, and only then calculates the upper bound.
<P>
The following are valid loops:
<BR><IMG WIDTH=586 HEIGHT=13 ALIGN=BOTTOM ALT="listing3656" SRC="img209.gif"><BR><H2><A NAME="SECTION03725000000000000000">The <tt>Repeat..until</tt> statement</A></H2>
<P>
The <tt>repeat</tt> statement is used to execute a statement until a certain
condition is reached. The statement will be executed at least once.
The prototype syntax of the <tt>Repeat..until</tt> statement is
<P>
<BLOCKQUOTE> <BR><b>  Repeat statement</b><BR><BR><IMG WIDTH=576 HEIGHT=64 ALIGN=BOTTOM ALT="syntdiag3746" SRC="img210.gif"><BR></BLOCKQUOTE>
<P>
This will execute the statements between <tt>repeat</tt> and until up to
the moment when <tt>Expression</tt> evaluates to <tt>True</tt>. 
Since the <tt>expression</tt> is evaluated <EM>after</EM> the execution of the
statements, they are executed at least once.
<P>
Be aware of the fact that the boolean expression <tt>Expression</tt> will be 
short-cut evaluated. (Meaning that the evaluation will be stopped at the 
point where the outcome is known with certainty)
<P>
The following are valid <tt>repeat</tt> statements
<BR><IMG WIDTH=576 HEIGHT=62 ALIGN=BOTTOM ALT="listing3723" SRC="img211.gif"><BR><H2><A NAME="SECTION03726000000000000000">The <tt>While..do</tt> statement</A></H2>
<P>
A <tt>while</tt> statement is used to execute a statement as long as a certain
condition holds. This may imply that the statement is never executed.  
The prototype syntax of the <tt>While..do</tt> statement is
<P>
<BLOCKQUOTE> <BR><b>  While statements</b><BR><BR><IMG WIDTH=499 HEIGHT=71 ALIGN=BOTTOM ALT="syntdiag3808" SRC="img212.gif"><BR></BLOCKQUOTE>
<P>
This will execute <tt>Statement</tt> as long as <tt>Expression</tt> evaluates to
<tt>True</tt>. Since <tt>Expression</tt> is evaluated <EM>before</EM> the execution
of <tt>Statement</tt>, it is possible that <tt>Statement</tt> isn't executed at
all. <tt>Statement</tt> can be a compound statement.
<P>
Be aware of the fact that the boolean expression <tt>Expression</tt> will be 
short-cut evaluated. (Meaning that the evaluation will be stopped at the 
point where the outcome is known with certainty)
<P>
The following are valid <tt>while</tt> statements:
<BR><IMG WIDTH=576 HEIGHT=13 ALIGN=BOTTOM ALT="listing3776" SRC="img213.gif"><BR>
They correspond to the example loops for the <tt>repeat</tt> statements.
<P>
<H2><A NAME="SECTION03727000000000000000">The <tt>With</tt> statement</A></H2>
<P>
<A NAME="seWith">&#160;</A>
<P>
The <tt>with</tt> statement serves to access the elements of a record<A NAME="tex2html21" HREF="footnode.html#3785"><IMG  ALIGN=BOTTOM ALT="gif" SRC="file:/usr/lib/latex2html/icons/foot_motif.gif"></A>
or object or class, without having to specify the name of the each time.
<P>
The syntax for a <tt>with</tt> statement is
<P>
<BLOCKQUOTE> <BR><b>  With statement</b><BR><BR><IMG WIDTH=576 HEIGHT=68 ALIGN=BOTTOM ALT="syntdiag3860" SRC="img214.gif"><BR></BLOCKQUOTE>
<P>
The variable reference must be a variable of a record, object or class type.
In the <tt>with</tt> statement, any variable reference, or method reference is
checked to see if it is a field or method of the record or object or class.
If so, then that field is accessed, or that method is called.
<P>
Given the declaration:
<BR><IMG WIDTH=576 HEIGHT=62 ALIGN=BOTTOM ALT="listing3828" SRC="img215.gif"><BR>
The following statements are completely equivalent:
<BR><IMG WIDTH=576 HEIGHT=30 ALIGN=BOTTOM ALT="listing3830" SRC="img216.gif"><BR>
and
<BR><IMG WIDTH=576 HEIGHT=48 ALIGN=BOTTOM ALT="listing3832" SRC="img217.gif"><BR>
<P>
The statement
<BR><IMG WIDTH=576 HEIGHT=45 ALIGN=BOTTOM ALT="listing3834" SRC="img218.gif"><BR>
is equivalent to
<BR><IMG WIDTH=576 HEIGHT=65 ALIGN=BOTTOM ALT="listing3836" SRC="img219.gif"><BR>
This also is a clear example of the fact that the variables are tried <EM>last
to first</EM>, i.e., when the compiler encounters a variable reference, it will
first check if it is a field or method of the last variable. If not, then it
will check the last-but-one, and so on.
<P>
The following example shows this;
<BR><IMG WIDTH=576 HEIGHT=65 ALIGN=BOTTOM ALT="listing3839" SRC="img220.gif"><BR>
The output of this program is
<PRE>2 2</PRE>
Showing thus that the <tt>X,Y</tt> in the <tt>WriteLn</tt> statement match the 
<tt>T</tt> record variable.
<P>
<H2><A NAME="SECTION03728000000000000000">Exception Statements</A></H2>
<P>
As of version 0.99.7, Free Pascal supports exceptions. Exceptions provide a
convenient way to program error and error-recovery mechanisms, and are
closely related to classes.
<P>
Exception support is explained in chapter (<A HREF="node60.html#chExceptions"><IMG  ALIGN=BOTTOM ALT="gif" SRC="file:/usr/lib/latex2html/icons/cross_ref_motif.gif"></A>)
<P>
<HR><A NAME="tex2html873" HREF="node44.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="file:/usr/lib/latex2html/icons/next_motif.gif"></A> <A NAME="tex2html871" HREF="node41.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="file:/usr/lib/latex2html/icons/up_motif.gif"></A> <A NAME="tex2html865" HREF="node42.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="file:/usr/lib/latex2html/icons/previous_motif.gif"></A> <A NAME="tex2html875" HREF="node1.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="file:/usr/lib/latex2html/icons/contents_motif.gif"></A> <A NAME="tex2html876" HREF="node72.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="file:/usr/lib/latex2html/icons/index_motif.gif"></A> <BR>
<B> Next:</B> <A NAME="tex2html874" HREF="node44.html">Assembler statements</A>
<B>Up:</B> <A NAME="tex2html872" HREF="node41.html">Statements</A>
<B> Previous:</B> <A NAME="tex2html866" HREF="node42.html">Simple statements</A>
<P><ADDRESS>
<I>Michael Van Canneyt <BR>
Fri Sep 25 09:15:40 MEST 1998</I>
</ADDRESS>
</BODY>
</HTML>
