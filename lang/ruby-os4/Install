(welcome)
(set parent_dir (askdir
  (prompt "Where do you want to have Ruby installed?\n"
          "A directory called \"Ruby\" will be created there.")
  (help "A new directory will be created to hold all files "
        "belonging to Ruby.\n"
        "An assign that points to the directory will also be "
        "added to your User-Startup.")
  (default "SYS:System")
  (disk)
))
(set ruby_dir (tackon parent_dir "Ruby"))
(makedir ruby_dir)
(set @default-dest (expandpath ruby_dir))
(copyfiles
  (prompt "Copying Ruby files.")
  (help @copyfiles-help)
  (source "Ruby")
  (all)
  (dest ruby_dir)
)
(delete "C:ruby")
(run "makelink C:ruby Ruby:bin/ruby soft")
(run "copy noreplace SObjs/lib#?.so#? SOBJS:")
(startup @app-name
  (prompt "Performing changes to User-Startup.")
  (help "The command to assign RUBY: will now be added to your "
        "SYS:S/User-Startup file.")
  (command (cat "assign >NIL: RUBY: " @default-dest "\n"))
)
(if (<> ruby_dir "RUBY:")
  (
    (makeassign "RUBY" ruby_dir)
  )
)
(exit)
