// Bouncing Ball demo for SDL_clown
// Originally written September 26, 2010

// Updated January 19, 2011 - added FPS limiting

#define BALL_SIZE 25
#define COLOR_CYCLE_SPEED 5
#define BALL_SPEED 8

ball.size = BALL_SIZE;
ball.x = ball.size+1;
ball.y = ball.size+1;
ball.r = 0;
ball.g = 255;
ball.b = 0;

cycling.vel = COLOR_CYCLE_SPEED;
ball.xvel = BALL_SPEED;
ball.yvel = BALL_SPEED;

while(1)
{
    // Movement
    ball.x+=ball.xvel;
    ball.y+=ball.yvel;

    // Collisions
    if(ball.x>=(640-ball.size))
    {
        ball.xvel*=(0-1);
    }
    if(ball.x<=0)
    {
        ball.xvel*=(0-1);
    }
    if(ball.y>=(480-ball.size))
    {
        ball.yvel*=(0-1);
    }
    if(ball.y<=0)
    {
        ball.yvel*=(0-1);
    }

    // Color cycling !
    ball.r+=cycling.vel;
    ball.g-=cycling.vel;
    ball.b+=cycling.vel;
    if(ball.r<=0)
    {
        cycling.vel*=(0-1);
    }
    if(ball.r>=255)
    {
        cycling.vel*=(0-1);
    }

    // Graphics
    @DrawRect (0) (0) (640) (480) (0) (0) (0);
    @DrawRect ball.x ball.y ball.size ball.size ball.r ball.g ball.b;
    @FlipVideo;

    // Limit FPS to 30
    @LimitFPS (30);
}


