# --------- IMPORTANT NOTE ---------
# Different occurences of the same filename in this file MUST be in the same case if DMake is to recognise
# that they are the same file.

STDLIBS = LIB:amiga.lib
# DO NOT RE-ORDER THE LIBS BELOW!  IF SC.LIB IS NOT FIRST THEN __XCEXIT CAN BECOME UNDEFINED!
NEWLIBS = LIB:sc.lib+LIB:scmieee.lib

COMPILE_FLAGS = nover UNSCHAR STRMERGE StructureEquivalence errorrexx LIBCODE NOSTACKCHECK math=ieee code=far objname=Objects/

# Images.o must be compiled without the UNSCHAR option (convert all chars to unsigned chars) to work.
COMPILE_FLAGS_IM = nover STRMERGE LIBCODE StructureEquivalence errorrexx NOSTACKCHECK math=ieee code=far objname=Objects/

# FoxGui.o must be compiled without the STRMERGE option because the code section is too large to put strings in.
COMPILE_FLAGS_FG = nover UNSCHAR StructureEquivalence errorrexx LIBCODE NOSTACKCHECK math=ieee code=far objname=Objects/

#BLINK_FLAGS = ADDSYM
BLINK_FLAGS = QUIET


all				:	FoxLib/FoxGui.library

# modules

Objects/FoxString.o	:	FoxLibSource/FoxString.c FoxInclude/FoxGui.h
	sc $(COMPILE_FLAGS) FoxLibSource/FoxString.c

Objects/FoxConsole.o	:	FoxLibSource/FoxConsole.c FoxInclude/FoxGui.h
	sc $(COMPILE_FLAGS) FoxLibSource/FoxConsole.c

Objects/FoxGui.o	:	FoxLibSource/FoxGui.c FoxInclude/FoxGui.h FoxLibSource/FoxGuiTools.h FoxLibSource/GuiSys.h
	sc $(COMPILE_FLAGS_FG) FoxLibSource/FoxGui.c

Objects/FoxGuiTools.o	:	FoxLibSource/FoxGuiTools.c FoxLibSource/FoxGuiTools.h FoxLibSource/GuiSys.h FoxInclude/FoxGui.h
	sc $(COMPILE_FLAGS) FoxLibSource/FoxGuiTools.c

Objects/Buttons.o	:	FoxLibSource/Buttons.c FoxLibSource/FoxGuiTools.h FoxLibSource/GuiSys.h FoxInclude/FoxGui.h
	sc $(COMPILE_FLAGS) FoxLibSource/Buttons.c

Objects/BoolGads.o	:	FoxLibSource/BoolGads.c FoxLibSource/FoxGuiTools.h FoxLibSource/GuiSys.h FoxInclude/FoxGui.h
	sc $(COMPILE_FLAGS) FoxLibSource/BoolGads.c

Objects/EditBox.o	:	FoxLibSource/EditBox.c FoxLibSource/FoxGuiTools.h FoxLibSource/GuiSys.h FoxInclude/FoxGui.h
	sc $(COMPILE_FLAGS) IGNORE=154+225 FoxLibSource/EditBox.c

Objects/OutputBox.o	:	FoxLibSource/OutputBox.c FoxLibSource/FoxGuiTools.h FoxLibSource/GuiSys.h FoxInclude/FoxGui.h
	sc $(COMPILE_FLAGS) FoxLibSource/OutputBox.c

Objects/ListBox.o	:	FoxLibSource/ListBox.c FoxLibSource/FoxGuiTools.h FoxLibSource/GuiSys.h FoxInclude/FoxGui.h
	sc $(COMPILE_FLAGS) FoxLibSource/ListBox.c

Objects/TreeControl.o	:	FoxLibSource/TreeControl.c FoxLibSource/FoxGuiTools.h FoxLibSource/GuiSys.h FoxInclude/FoxGui.h
	sc $(COMPILE_FLAGS) FoxLibSource/TreeControl.c

Objects/Images.o	:	FoxLibSource/Images.c FoxLibSource/FoxGuiTools.h FoxLibSource/GuiSys.h FoxInclude/FoxGui.h
	sc $(COMPILE_FLAGS_IM) FoxLibSource/Images.c

Objects/Menus.o	:	FoxLibSource/Menus.c FoxLibSource/FoxGuiTools.h FoxLibSource/GuiSys.h FoxInclude/FoxGui.h
	sc $(COMPILE_FLAGS) FoxLibSource/Menus.c

Objects/Windows.o	:	FoxLibSource/Windows.c FoxLibSource/FoxGuiTools.h FoxLibSource/GuiSys.h FoxInclude/FoxGui.h
	sc $(COMPILE_FLAGS) FoxLibSource/Windows.c

Objects/Display.o	:	FoxLibSource/Display.c FoxLibSource/FoxGuiTools.h FoxLibSource/GuiSys.h FoxInclude/FoxGui.h
	sc $(COMPILE_FLAGS) FoxLibSource/Display.c

# libraries

FoxLib/FoxGui.library	:	Objects/FoxGuiTools.o Objects/FoxString.o Objects/FoxConsole.o Objects/FoxGui.o Objects/Buttons.o Objects/BoolGads.o Objects/EditBox.o Objects/ListBox.o Objects/TreeControl.o Objects/Images.o Objects/Menus.o Objects/Windows.o Objects/Display.o FoxInclude/FoxGui.fd Objects/OutputBox.o
	slink from LIB:libent.o+LIB:libinitr.o+Objects/FoxString.o+Objects/FoxConsole.o+Objects/FoxGuiTools.o+Objects/Images.o+Objects/Buttons.o+Objects/Menus.o+Objects/BoolGads.o+Objects/ListBox.o+Objects/Windows.o+Objects/Display.o+Objects/FoxGui.o+Objects/TreeControl.o+Objects/EditBox.o+Objects/OutputBox.o to FoxLib/FoxGui.library libfd FoxInclude/FoxGui.fd libid foxgui libversion 51 lib $(NEWLIBS)+$(STDLIBS)
