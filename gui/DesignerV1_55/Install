; This is the installer script for The Designer V1.54

(transcript "Designer installation...")

(set lh 0)
(set vers "V1_54")
(set srcdir "")
(set archiver ("Designer%s_Disk:c/lx" vers) )

(
if (exists ("Designer%s_Disk:" vers) (noreq))
    (
    if (exists ("Designer%s_Disk:Designer%s.lha" vers vers) (noreq))
        (
        (set srcdir "T:Designer")
        (set lh 1)
        )
    )
)

(set destdir
	(askdir
		(prompt "Where do you wish to put The Designer ?")
		(help "Choose location for The Designer and Producers.")
		(default @default-dest)
		(disk)
	)
)

(set @default-dest destdir)

(if (= lh 1) ((working "De-Archiving Main Program" ) (run archiver ("x Designer%s_Disk:Designer%s.lha Designer/Read#? Designer/Designer Designer/Designer.info T:" vers vers))))

(copyfiles
	(prompt "Copying Designer to destination.")
	(help @copyfiles-help)
	(source srcdir)
	(dest destdir)
	(choices "ReadMe" "Designer")
	(infos)
	(confirm)
)

(if (= lh 1) (run "delete" "T:Designer/#?"))
(if (= lh 1) ((working "De-Archiving Demos" )(run archiver ("x Designer%s_Disk:Designer%s.lha Designer/#?Demo#? T:" vers vers))))

(copyfiles
	(prompt "Copying demos to destination.")
	(help @copyfiles-help)
	(source srcdir)
	(dest destdir)
	(pattern "#?Demo#?")
	(infos)
	(confirm)
)

(if (= lh 1) (run "delete" "T:Designer/#? all"))
(if (= lh 1) ((working "De-Archiving Guide" )(run archiver ("x Designer%s_Disk:Designer%s.lha Designer/#?Gui#? T:" vers vers))))

(copyfiles
	(prompt "Copying Designer.Guide to destination.")
	(help @copyfiles-help)
	(source srcdir)
	(dest destdir)
	(pattern "Designer.Guide")
	(infos)
	(confirm)
)

(if (= lh 1) (run "delete" "T:Designer/#?"))
(if (= lh 1) ((working "De-Archiving AsmProducer" )(run archiver ("x Designer%s_Disk:Designer%s.lha Designer/AsmPro#? T:" vers vers))))

(copyfiles
	(prompt "Copying Producers to destination.")
	(help @copyfiles-help)
	(source srcdir)
	(dest destdir)
	(pattern "AsmProducer")
	(infos)
	(confirm)
)

(if (= lh 1) (run "delete" "T:Designer/#?"))
(if (= lh 1) ((working "De-Archiving CProducer" )(run archiver ("x Designer%s_Disk:Designer%s.lha Designer/CPro#? T:" vers vers))))

(copyfiles
	(prompt "Copying Producers to destination.")
	(help @copyfiles-help)
	(source srcdir)
	(dest destdir)
	(pattern "CProducer")
	(infos)
	(confirm)
)

(if (= lh 1) (run "delete" "T:Designer/#?"))
(if (= lh 1) ((working "De-Archiving PasProducer" )(run archiver ("x Designer%s_Disk:Designer%s.lha Designer/PasPro#? T:" vers vers))))

(copyfiles
	(prompt "Copying Producers to destination.")
	(help @copyfiles-help)
	(source srcdir)
	(dest destdir)
	(pattern "PasProducer")
	(infos)
	(confirm)
)

(if (= lh 1) (run "delete" "T:Designer/#?"))
(if (= lh 1) ((working "De-Archiving Developer Files" )(run archiver ("x Designer%s_Disk:Designer%s.lha Designer/Develop#? T:" vers vers))))

(copyfiles
	(prompt "Copying Developer files to destination.")
	(help @copyfiles-help)
	(source srcdir)
	(dest destdir)
	(pattern "Developer")
	(infos)
	(confirm)
)

(if (= lh 1) (run "delete" "T:Designer/#? all"))
(if (= lh 1) ((working "De-Archiving producer.library" )(run archiver ("x Designer%s_Disk:Designer%s.lha Designer/#?.library T:" vers vers))))

(copylib
	(prompt "Copying Producer Library to Libs:.")
	(help @copylib-help)
	(source ( tackon srcdir "producer.library"))
	(dest "Libs:")
	(confirm)
)

(if (= lh 1) (run "delete" "T:Designer all"))

(startup "Designer"
	(prompt
		"Do you wish to add the directory to your path in \"S:user-startup\" so that your system will be properly configured to use The Designer ?")
	(help "This will make using The Designer far easier from the CLI.")
	(command ("path \"%s\" add" destdir))
)
