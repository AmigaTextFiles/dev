;------------------------------------------------------------------------
;
; Install-GadToolsBox
;
; $VER: Install-GadToolsBox 3.0 (1.6.98)
;
;------------------------------------------------------------------------

;
; initialize variables
;

(set #FlagENGLISH 0)
(set #FlagPOLSKI  1)
(set #FlagOTHER   2)

(set #FlagGTB     0)
(set #FlagGENS    1)
(set #FlagLIBS    2)
(set #FlagHELP    3)
(set #FlagDEVKIT  4)

(set #FlagC       0)

(set #welcome (cat "Welcome to the GadToolsBox Installation."))
(set #gtbdestdir-prompt (cat "Please select the drawer, where GadToolsBox v3 should be installed. Directory GadToolsBox3 will be created here.\n"))
(set #gtbdestdir-help (cat "Please select the drawer, where GadToolsBox v3 should be installed. Directory GadToolsBox3 will be created here.\n"))
(set #language-prompt (cat "Select what language versions you prefer to install."))
(set #language-help (cat "GadToolsBox can work in many languages. Default language is english - built in.\nIf you select other, you will be able to translate GadToolsBox yourself, with this option select also other language."))
(set #additional-prompt (cat "Select which elements to install."))
(set #additional-help (cat "GadToolsBox3 - main file\nGenerators - source generators\nLibs - libraries, gadgets and images\nHelp - help file and catalogs\nDevKit - autodocs and includes for additional objects"))
(set #additional-choice-mainfile (cat "GadToolsBox3"))
(set #additional-choice-gens (cat "Generators"))
(set #additional-choice-libs (cat "Libs"))
(set #additional-choice-help (cat "Help"))
(set #additional-choice-devkit (cat "DevKit"))
(set #generator-prompt (cat "Select which source generators to install."))
(set #generator-help (cat "C - SAS/C"))
(set #generator-choice-c (cat "C"))
(set #gadprogress-prompt (cat "Do you want to copy progress.gadget?"))
(set #gadprogress-help (cat "Progress.gadget is required to run GadToolsBox.\nIt's used to show \"working in progress\"."))
(set #gadtextfield-prompt (cat "Do you want to copy textfield.gadget?"))
(set #gadtextfield-help (cat "Textfield.gadget is required to run GadToolsBox.\nIt's used as a text editor."))
(set #gadlistview-prompt (cat "Do you want to copy listview.gadget?"))
(set #gadlistview-help (cat "Listview.gadget is required to run GadToolsBox.\nIt's a standard gadtools listview replacement. You can show tree lists, make collumns, etc."))
(set #gadpage-prompt (cat "Do you want to copy page.gadget?"))
(set #gadpage-help (cat "Page.gadget is required to run GadToolsBox.\nIt's used to make many pages of gadgets on one window."))
(set #imgsmartbitmap-prompt (cat "Do you want to copy smartbitmap.image?"))
(set #imgsmartbitmap-help (cat "Smartbitmap.image is required to run GadToolsBox.\nIt's used for image conversion and rendering."))
(set #libpopupmenu-prompt (cat "Do you want to copy popupmenu.library?"))
(set #libpopupmenu-help (cat "Popupmenu.library is required to run GadToolsBox.\nIt's used to show popup menus."))
(set #libpopupmenuprefs-prompt (cat "Do you want to copy PopupMenu_MUI preferences?"))
(set #libpopupmenuprefs-help (cat "PopupMenu_MUI is part of popupmenu package.\nIt's used to configure popup menus."))
(set #translation (cat "other - translation files"))

(if (= @language "polski")
(
	(set #welcome (cat "Witam w instalacji nowej wersji GadToolsBoxa."))
	(set #gtbdestdir-prompt (cat "Proszë wybraê katalog, w którym GadToolsBox v3 powinien byê zainstalowany. Katalog o nazwie GadToolsBox3 bëdzie automatycznie utworzony.\n"))
	(set #gtbdestdir-help (cat "Proszë wybraê katalog, w którym GadToolsBox v3 powinien byê zainstalowany. Katalog o nazwie GadToolsBox3 bëdzie automatycznie utworzony.\n"))
	(set #language-prompt (cat "Wybierz, jakie chcesz zainstalowaê wersje jëzykowe."))
	(set #language-help (cat "GadToolsBox pozwala na pracë w róûnych jëzykach. Domyôlnie wbudowany jest jëzyk angielski.\nJeôli wybierzesz 'inny', to bëdziesz mógî sam przetîumaczyê Trashman'a na dowolny jëzyk. Zaznacz wtedy jeszcze jakiô inny jëzyk (np. angielski) aby skopiowaê pliki pomocy."))
	(set #additional-prompt (cat "Zaznacz skîadniki które chcesz zainstalowaê."))
	(set #additional-help (cat "GadToolsBox3 - plik gîówny\nGeneratory - generatory kodów úródîowych\nBiblioteki - wymagane biblioteki, gadûety i rysunki\nPomoc - plik pomocy i pliki tîumaczeï\nDevKit - opisy funkcji i inkludy dla zewnëtrznych obiektów"))
	(set #additional-choice-mainfile (cat "GadToolsBox3"))
	(set #additional-choice-gens (cat "Generatory"))
	(set #additional-choice-Libs (cat "Biblioteki"))
	(set #additional-choice-help (cat "Pomoc"))
	(set #additional-choice-devkit (cat "DevKit"))
	(set #generator-prompt (cat "Wybierz generatory kodu úródîowego, które majâ byê zainstalowane."))
	(set #generator-help (cat "C - SAS/C"))
	(set #generator-choice-c (cat "C"))
	(set #gadprogress-prompt (cat "Czy chcesz skopiowaê progress.gadget?"))
	(set #gadprogress-help (cat "Progress.gadget jest potrzebny do uruchomienia GadToolsBoxa.\nGadûet ten jest uûyty do wyôwietlenia wykonywanej jakiejô czynnoôci."))
	(set #gadtextfield-prompt (cat "Czy chcesz skopiowaê textfield.gadget?"))
	(set #gadtextfield-help (cat "Textfield.gadget jest potrzebny do uruchomienia GadToolsBoxa.\nTo jest prosty edytor tekstu."))
	(set #gadlistview-prompt (cat "Czy chcesz skopiowaê listview.gadget?"))
	(set #gadlistview-help (cat "Listview.gadget jest potrzebny do uruchomienia GadToolsBoxa.\nGadget ten zastëpuje standardowy gadûet listview z gadtools.library. Dziëki niemu moûesz tworzyê \"drzewa\", kolumny, itp."))
	(set #gadpage-prompt (cat "Czy chcesz skopiowaê page.gadget?"))
	(set #gadpage-help (cat "Page.gadget jest potrzebny do uruchomienia GadToolsBoxa.\nGadûet ten jest uûywany do zrobienia paru stron gadûetów na jednym oknie."))
	(set #imgsmartbitmap-prompt (cat "Czy chcesz skopiowaê smartbitmap.image?"))
	(set #imgsmartbitmap-help (cat "Smartbitmap.image jest potrzebny do uruchomienia GadToolsBoxa.\nTa klasa sîuûy do konwersji i wyôwietlania map bitowych."))
	(set #libpopupmenu-prompt (cat "Czy chcesz skopiowaê popupmenu.library?"))
	(set #libpopupmenu-help (cat "Popupmenu.library jest potrzebny do uruchomienia GadToolsBoxa.\nBiblioteka ta sîuûy do wyôwietlania podrëcznych menu."))
	(set #libpopupmenuprefs-prompt (cat "Czy chcesz skopiowaê PopupMenu_MUI?"))
	(set #libpopupmenuprefs-help (cat "Popupmenu_MUI jest czëôciâ pakietu popupmenu.\nProgram ten sîuûy do konfigurowania podrëcznych menu."))
	(set #translation (cat "inny - pliki tîumaczeï"))
))

;
; begin installation
;

(welcome #welcome)
(complete 0)

(set @default-dest (cat "Work:"))
(set #DestDir
	(askdir	(prompt #gtbdestdir-prompt)
		(help	#gtbdestdir-help)
		(default	@default-dest)
		(newpath)
	)
)

;(set #ParentDir #DestDir)
(set #DestDir (tackon #DestDir "GadToolsBox"))
(if (<> (exists	#DestDir) 2)
(
	(makedir #DestDir)
;	(copyfiles	(source	"GadToolsBox.info")
;			(dest	#parentDir)
;			(nogauge)
;	)
))

(set #Additional (askoptions	(prompt	#additional-prompt)
				(help	#additional-help)
				(choices	#additional-choice-mainfile #additional-choice-gens #additional-choice-libs #additional-choice-help #additional-choice-devkit)
		)
)

(set #Generators (askoptions	(prompt	#generator-prompt)
				(help	#generaotr-help)
				(choices	#generator-choice-c)
		)
)

(if (IN #Additional #FlagHELP)
(
	(set #Languages	(askoptions	(prompt	#language-prompt)
					(help	#language-help)
					(choices	"English" #translation)
			)
	)
))

(complete 0)

;
; copy libraries and gadgets
;

(if (IN #Additional #FlagLIBS)
(
	(copylib	(prompt	#gadprogress-prompt)
			(help	#gadprogress-help)
			(source	"classes/gadgets/progress.gadget")
			(dest	"SYS:Classes/gadgets")
			(confirm)
	)

	(complete 10)

	(copylib	(prompt	#gadtextfield-prompt)
			(help	#gadtextfield-help)
			(source	"classes/gadgets/textfield.gadget")
			(dest	"SYS:Classes/gadgets")
			(confirm)
	)

	(complete 15)

	(copylib	(prompt	#gadlistview-prompt)
			(help	#gadlistview-help)
			(source	"classes/gadgets/listview.gadget")
			(dest	"SYS:Classes/gadgets")
			(confirm)
	)

	(complete 20)

	(copylib	(prompt	#gadpage-prompt)
			(help	#gadpage-help)
			(source	"classes/gadgets/page.gadget")
			(dest	"SYS:Classes/gadgets")
			(confirm)
	)

	(complete 25)

	(copylib	(prompt	#imgsmartbitmap-prompt)
			(help	#imgsmartbitmap-help)
			(source	"classes/images/smartbitmap.image")
			(dest	"SYS:Classes/images")
			(confirm)
	)

	(complete 30)

	(copylib	(prompt	#libpopupmenu-prompt)
			(help	#libpopupmenu-help)
			(source	"libs/popupmenu.library")
			(dest	"LIBS:")
			(confirm)
	)
	(complete 35)
	(copylib	(prompt	#libpopupmenuprefs-prompt)
			(help	#libpopupmenuprefs-help)
			(source	"Prefs/PopupMenu_MUI")
			(dest	"Sys:Prefs:")
			(infos)
			(confirm)
	)

	(complete 40)
))

(if (IN #Additional #FlagGTB)
(
	(copyfiles	(source	"GadToolsBox")
			(dest	#DestDir)
			(infos)
	)
))

(complete 50)

;
; copy help files and catalogs version
;

(if (IN #Additional #FlagHELP)
(
;	(if (IN #Languages #FlagPOLSKI)
;	(
;		(if (<> (exists	"LOCALE:catalogs/polski") 2)
;			(makedir "LOCALE:catalogs/polski")
;		)
;		(copyfiles	(source	"catalogs/polski")
;				(dest	"LOCALE:catalogs/polski")
;				(all)
;		)
;
;		(set #HELPdest (tackon #DestDir "Help"))
;		(if (<> (exists	#HELPdest) 2)
;			(makedir #HELPdest)
;		)
;
;		(set #HELPdest (tackon #DestDir "Help/Polski"))
;		(if (<> (exists	#HELPdest) 2)
;			(makedir #HELPdest)
;		)
;		(copyfiles	(source	"Help/Polski")
;				(dest	#HELPdest)
;				(infos)
;				(all)
;		)
;		(set #HELPdest (tackon #DestDir "Help"))
;		(copyfiles	(source	"Help/Polski.info")
;				(dest	#HELPdest)
;				(nogauge)
;		)
;		(copyfiles	(source	"Help.info")
;				(dest	#DestDir)
;				(nogauge)
;		)
;	))

	(if (IN #Languages #FlagENGLISH)
	(
		(set #HELPdest (tackon #DestDir "Help/English"))
		(if (<> (exists	#HELPdest) 2)
			(makedir #HELPdest)
		)
		(set #HELPdest (tackon #DestDir "Help"))
		(if (<> (exists	#HELPdest) 2)
			(makedir #HELPdest)
		)
		(copyfiles	(source	"Help/English")
				(dest	#HELPdest)
				(infos)
				(all)
		)
		(set #HELPdest (tackon #DestDir "Help"))
		(copyfiles	(source	"Help/English.info")
				(dest	#HELPdest)
				(nogauge)
		)
		(copyfiles	(source	"Help.info")
				(dest	#DestDir)
				(nogauge)
		)
	))

	(if (IN #Languages #FlagOTHER)
	(
		(set #CATAdest (tackon #DestDir "catalogs"))
		(if (<> (exists	#CATAdest) 2)
			(makedir #CATAdest)
		)
	
		(copyfiles	(source	"catalogs.info")
				(dest	#DestDir)
				(nogauge)
		)
		(copyfiles	(source	"catalogs/GadToolsBox.cd")
				(dest	#CATAdest)
		)
		(copyfiles	(source	"catalogs/GadToolsBox.ct")
				(dest	#CATAdest)
		)
	))
))

;
; copy developers kit
;

(if (IN #Additional #FlagDEVKIT)
(
	(set #DEVKITdest (tackon #DestDir "Developers"))
	(if (<> (exists	#DEVKITdest) 2)
		(makedir #DEVKITdest)
	)
	(copyfiles	(source	"Developers")
			(dest	#DEVKITdest)
			(infos)
			(all)
	)
))

(complete 80)

(if (IN #Additional #FlagGENS)
(
	(set #GENdest (tackon #DestDir "generators"))
	(if (<> (exists	#GENdest) 2)
		(makedir #GENdest)
	)

	(if (IN #Generators #FlagC)
	(
		(copyfiles	(source	"generators/c.generator")
				(dest	#GENdest)
		)
	))
))

;
; say goodbye
;

(complete 100)
(exit)
