@database CLI2WB.guide

/// "Main"
@Node "Main" "documentation"

 Documentation CLI2WB 1.5
 19 may, 2004
 Tom Duin alias amigaharry


 E-mail: amigaharry@hotmail.com


 @{" Introduction      " link "intro"} short description of CLI2WB
 @{" Distribution      " link "distribution"}
 @{" Disclaimer        " link "disclaimer"}
 @{" How to use        " link "use"} configure CLI2WB
 @{" Requirements      " link "require"}
 @{" Known bugs        " link "bugs"}
 @{" Compilation       " link "Compilation"}
 @{" Changes           " link "Change"} history of CLI2WB

@EndNode
///
/// "Introduction"
@Node "intro" "Introduction"
@{b}Introduction@{ub}

In the early BlizzardPPC years, i needed a little utility to launch all
these new PowerUp Shell (CLI) programs from the Workbench, such as
animation players, encoders, MP3 players, unarchivers and so on. CLI2WB
comes in to satisfy my needs.
CLI2WB takes a Shell (CLI) commandline where you can define Load, Save or
Drawers only ASL requesters. You can give the Load filerequester an own
titlename and buttonname. One file or Multiselect mode. And much more !
All configured by the tooltypes in the CLI2WB icon. With CLI2WB, i can fast
give a Shell (CLI) command an icon and start it from the Workbench. Easily
change the settings in the icons tooltypes. If your're familiar with the
populair directory utility Directory Opus, (can also found at Aminet) then
you can easy learn to use CLI2WB, because CLI2WB uses simular syntax.
CLI2WB can only started from the Workbench.

@{" How to use        " link "use"}

@EndNode
///
/// "Distribution"
@Node "Distribution" 
@{b}Distribution and copyright@{ub}

CLI2WB is freeware.

@EndNode
///
/// "Disclaimer"
@Node "Disclaimer"
@{b}Disclaimer@{ub}

The program is provided as-is, so the author takes no responsibility
for any damage done to your computer, 

@EndNode
///
/// "How to use"
@Node "use" "How to use CLI2WB"

CLI2WB need the stack in it's own icon, 4096 is more then enough.
CLI2WB uses tooltypes in it's icon to launch the Shell (CLI) command.
A tooltype is also disabled if it's put between brackets ()

@{u}Remember: the tooltypes are case sensitive@{uu}

@{i}Tooltypes:@{ui}

@{fg shine}AmigaDOS@{fg text}

  Here you can specify the Shell (CLI) commandline that's is normally
  typed into a Shell (CLI) window. Put a {Rf} where a Load filerequester
  is needed in the commandline. A {RF} for a Save filerequester and a
  {Rd} where a Drawers only requester must appears. All case sensitive.
  You can use as plenty requesters you need. (only memory is the limit)

 Example:

 @{fg fill}AmigaDOS=Music/MrMIDI/GMPlay {Rf} V=400 F=20038 M DF B=2@{fg text}


@{fg shine}Rf_title@{fg text}

  Type here the title of the Load filerequester, this title appears in
  the Asl requester's windowbar that's opened by {Rf} in the command-
  line in the AmigaDOS tooltype. If disabled, no title at all

 Example:

 @{fg fill}Rf_title=Select MIDI music to play@{fg text}


@{fg shine}Rf_button@{fg text}

  Type in here the name what's normally the left OK button in an Asl
  Load filerequester that's opened by {Rf} in the commandline in the
  AmigaDOS tooltype. Default is OK button.

 Example:

 @{fg fill}Rf_button=GMPlay@{fg text}


@{fg shine}Rf_pattern@{fg text}

  Type here the pattern that's filtered out all files, on behalve of
  the filetypes specified in the pattern. It's only for where {Rf} is
  found in the AmigaDOS tooltype. If disabled, shows all files.

 Example:

 @{fg fill}Rf_pattern=#?.(mid|midi|kar)@{fg text}

 Shows only the files in the requester with name ended with .mid .midi .kar


@{fg shine}Homedir@{fg text}

  Type in here the directory which is shown in the first Asl requester
  found in the commandline in the AmigaDOS tooltype. Whatever it's the
  {Rf} {RF} or {Rd} requester. Default is SYS:

 Example:

 @{fg fill}Homedir=MIDIs:@{fg text}


@{fg shine}Rf_MULTISELECT@{fg text}

  Type here YES (case insensitive) if the {Rf} Load filerequester must
  be able to select multiple files. If disabled, no multiselection.

 Example:

 @{fg fill}Rf_MULTISELECT = YES@{fg text}


@{fg shine}RF_OverwriteWarning@{fg text}

  Type here YES (case insensitive) if the {RF} Save filerequester must
  shown an Overwrite requester if an existing file was choosen. In the
  Overwrite requester you can pres an OK or Cancel button. If pressed
  the Cancel button, the {RF} Save filerequester appears again to let
  you specify a new filename. Default not.

 Example:

 @{fg fill}RF_OverwriteWarning=No@{fg text}


@{fg shine}WINDOW@{fg text}

  The window properties where the output of the Shell (CLI) command goes
  to. Not all Shell (CLI) commands needs such a window. If disabled, no
  window comes up.

 Example:

 @{fg fill}WINDOW=CON:10/20/450/100/Playing MIDI music/AUTO/CLOSE@{fg text}


@{fg shine}STACK@{fg text}

  Put here a value for the stacksize needed by the Shell (CLI) command.
  If not specified, then 4096 is used. (standard)

 Example:

 @{fg fill}STACK=150000@{fg text}


@{fg shine}Priority@{fg text}

  A number between -128 and 127 is valid here. It's set the Task Priority
  of the Shell (CLI) command. If not specified, 0 is used, what's alright.

 Example:

 @{fg fill}Priority= 21@{fg text}


@{fg shine}CloseOnExit@{fg text}

  Type here Yes (case insensitive) if the window that was opened must be
  closed when the Shell (CLI) command is finished. It's terminates the
  proces. Default not.

 Example:

 @{fg fill}CloseOnExit=yes@{fg text}


@{fg shine}TakeCareSpaces@{fg text}

  Type here YES (case insensitive) if CLI2WB must put " around the paths.
  Mostly only needed if the Shell (CLI) command can handle multiple files
  and/or more options are provided at the commandline.
  A Shell (CLI) command that only takes one file as input, don't need this 
  feature set. (but set it on, it's probaly saver)
  Also recommended if a directory is required by the Shell (CLI) command,
  Thus where {Rd} is found (drawers only requester). Ram Disk: becomes
  "Ram Disk:" with TakeCareSpaces set. Default not.

 Example:

 @{fg fill}TakeCareSpaces =YES@{fg text}


@EndNode
///

/// "Requirements"
@Node "Require" "Requirements"

Minimal Requirements:
    
Amiga computer with 68020+ microprocessor and AmigaDos 3.1

@EndNode
///
/// "Bugs"
@Node "bugs" "Known bugs"

Honesty, there are little bugs, but don't blame CLI2WB !

1 bug: with a couple of Shell (CLI) programs, you can not close the window
that's opened with the WINDOW tooltype in the CLI2WB icon. Thus when clicking
on the Close gadget of the window, it don't go away. This is not realy a bug
of CLI2WB, in my commercial directory utility program called
Directory Opus 5.82 Magellan II happens the same. In that program you must
set the "Run asynchronously" feature, which closes the window when the Shell
(CLI) program is finished. In CLI2WB you must enable the tooltype
CloseOnExit=YES which does the same. This is a good workaround for it.

2 bug: LhA 2.2 (01/02/00) crashes. Directory Opus 5.82 Magellan II, it behaves
also (very) bad in this program. Difficult Shell (CLI) command, seems strange
programmed. Anyways, an archive i packed with this LhA gives empty drawers.

I did my best to solve these problems, but more knowledge of the AmigaDOS
Kernel is needed;

There is a workaround needed for the output window, the console.
In Directory Opus you can choose "reader" as output, the problem of the AmigaOS
console that it don't go away by clicking on close-gadget is solved then.
I inquired the RKM2_ASM.lha at Aminet, holds lots of modern AmigaOS 3.1
functions in 68K assembler; locale, boopsi, notify, gadtools and so on.
A bugfix is also provided for the AmigaOS console. But i don't know how to
implement the output-handle of the Shell (CLI) to the own designed window
(console) Anybody who can help, i appriciate it. Thanks in advance.

If you use CLI2WB with multi selection file requester, be aware that you can not
choose an large amount of files ! I discovers this very late. The commandline
is not so big. maybe that is in MorphOS and/or AmigaOS 4 better.

@EndNode
///
/// "Compilation"
@Node "Compilation" "Compilation of CLI2WB"
    
CLI2WB is assembled with BarFly 2.21 (18:43:29 05-Mai-03)

Aminet software used:

ASM-One_V1.49 -the only assembler i've found that can bug-tracing at a 68060.
MCalc -programmers suitable calculator.
SnoopDOS 3.8 -shows much system calls, good for anylizing programs.
RKM2_ASM.lha - holds lots of example assembler sources for modern AmigaOS 3.1

My Amiga configuration:

 Amiga1200T 68060 59Mhz, 603e 200Mhz, ROM 3.1, OS3.9 BB2, RAM 128Mb, SCSI HD 8Gb,
 IDE DVD 16x40x, SCSI CD-R 6x4x, PARALLELZIP 100Mb, FlickerFixer/Scandoubler,
 Mediator Voodoo5 Picasso96 graphics

 Processor board is BlizzardPPC with SCSI2 (Overclocked the 68060 to 59Mhz)

@EndNode
///
/// "Changes"
@Node "Change" "Changes of CLI2WB"
    
1.0
 initial public release.
 All memory dynamically allocated, only public memory limits the amount of
 several requesters used or the amount of files choosen in a multiselection {Rf}
 load requester or path/file lenght.

1.1
 bugfix: if started from Shell (CLI), wrong returncode was given.
 found a couple of little code cleanups, faster now.
 filesize 40 bytes shorter
 small CLI2WB.guide change.

1.2
 Made program more compact; filesize 172 bytes shorter. Improved archive.

1.3
 Replaces AmigaDOS's "FindToolType" function with own, faster one. (No library calls)
 Disadvantage: The Tooltypes in the icon must match exactly
 as in the Tooltype table. Means, case sensitive !!!
 Filesize 60+84=144 bytes shorter compared with previous version 1.2
 Also, SnoopDOS 3.8 and other system monitoring software don't list the Tooltypes anymore.

1.4
 No source changes, only reassembled with BarFly, filesize becomes 12 bytes shorter.
 Also 68000 -> 68020 optimizations are made.

1.5
 100% error proof number input routine, by previous version, certain international
 character(s) was treated as (wrong) number. No extra code or speed los.

@EndNode
///
