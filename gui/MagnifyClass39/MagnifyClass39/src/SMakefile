#  SMakefile for MagnifyClass
#  (C) 1995/96 by Reinhard Katzmann. All rights reserved.
#
#	SAS make file for the demonstration programs and linkable code.
#	Simply type SMake to generate the following files:
#
#	sc:c/magnifyclass.lib  - The linkable version of the class.
#  magnify_bgui.gadget - the shared library version of the class
#	TestMagnify	      - A demostration of the linked version of the class.
#	TestMagnifyLib	      - A demostration of the shared library version of the class.
#

# CC = Compiler
# LN = Linker
# COPTS = Compiler Options
# DEBUG = Debug options (Turn on if needed)
# Remove Debug Symbols with STRIPDEBUG if needed

CC = SC
LN = SC link
COPTS = STRINGMERGE NOICONS NOSTACKCHECK VERBOSE IGNORE=85+73+308+306
LNOPTS = $(COPTS) lib=lib:bgui.lib LIB:restrack.lib lib:debug.lib 
LIBOPTS = libprefix _LIBF_  startup=libinitr sdata libVersion 39 libRevision 2 LIB:restrack.lib lib:debug.lib 

#DEBUG = DEBUG full
DEBUG =
#RESTRACK = define=RES_TRACK
RESTRACK =

all: sc:lib/magnifyclass.lib testmagnify testmagnifylib magnify_bgui.gadget

sc:lib/magnifyclass.lib: magnifyclass.o
	-delete sc:lib/magnifyclass.lib
	oml sc:lib/magnifyclass.lib a magnifyclass.o
	-delete magnifyclass.o

testmagnify: testmagnify.o sc:lib/magnifyclass.lib
	$(LN) $(RESTRACK) $(LNOPTS) $(DEBUG) PARAMETERS=BOTH  testmagnify.o lib lib:magnifyclass.lib lib:debug.lib
	-delete testmagnify.o
	-delete testmagnify.lnk

testmagnifylib: testmagnifylib.o
	$(LN) $(RESTRACK) $(LNOPTS) $(DEBUG) PARAMETERS=BOTH testmagnifylib.o
	-delete testmagnifylib.o
	-delete testmagnifylib.lnk

magnify_bgui.gadget: magnifyclassslib.o
   $(LN) $(RESTRACK) $(LIBOPTS) $(COPTS) $(DEBUG) libcode PARAMETERS=REGISTER libfd magnifyclass_lib.fd magnifyclassslib.o to magnify_bgui.gadget
   -delete magnifyclassslib.o

magnifyclass.o: magnifyclass.c include:gadgets/magnifyclass.h
   $(CC) $(RESTRACK) $(COPTS) $(DEBUG) PARAMETERS=BOTH magnifyclass.c

magnifyclassslib.o: magnifyclass.c include:gadgets/magnifyclass.h
   $(CC) $(RESTRACK) $(COPTS) libcode $(DEBUG) PARAMETERS=BOTH magnifyclass.c objectname=magnifyclassslib.o define __SLIB

testmagnify.o: testmagnify.c
   $(CC) $(RESTRACK) $(COPTS) $(DEBUG) PARAMETERS=BOTH testmagnify.c

testmagnifylib.o: testmagnify.c
	$(CC) $(RESTRACK) $(COPTS) $(DEBUG) PARAMETERS=BOTH testmagnify.c objectname=testmagnifylib.o define __SLIB

#End of SMakefile
