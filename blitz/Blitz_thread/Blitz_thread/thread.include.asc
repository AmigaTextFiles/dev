
; thread.include.bb2 generated by pragma2inc.


*_threadBase.Library=0

Macro thread_TLCreate ; {ret,codeptr,regmask}
   GetReg a0,`2 : GetReg d0,`3
   GetReg a6,*_threadBase : JSR -30(a6) : PutReg d0,`1
End Macro

Macro thread_TLExit ; {value}
   GetReg d0,`1
   GetReg a6,*_threadBase : JSR -36(a6)
End Macro

Macro thread_TLJoin ; {ret,thread}
   GetReg a0,`2
   GetReg a6,*_threadBase : JSR -42(a6) : PutReg d0,`1
End Macro

Macro thread_TLDetach ; {value}
   GetReg d0,`1
   GetReg a6,*_threadBase : JSR -48(a6)
End Macro

Macro thread_TLCancel ; {ret,thread}
   GetReg a0,`2
   GetReg a6,*_threadBase : JSR -54(a6) : PutReg d0,`1
End Macro

Macro thread_TLSetCancel ; {boolean}
   GetReg d0,`1
   GetReg a6,*_threadBase : JSR -60(a6)
End Macro

Macro thread_TLSetPrio ; {newprio}
   GetReg d0,`1
   GetReg a6,*_threadBase : JSR -66(a6)
End Macro

Macro thread_TLGetPrio ; {ret,thread}
   GetReg a0,`2
   GetReg a6,*_threadBase : JSR -72(a6) : PutReg d0,`1
End Macro

Macro thread_TLMutexInit ; {ret}
   GetReg a6,*_threadBase : JSR -78(a6) : PutReg d0,`1
End Macro

Macro thread_TLMutexDestroy ; {mutex}
   GetReg a0,`1
   GetReg a6,*_threadBase : JSR -84(a6)
End Macro

Macro thread_TLMutexLock ; {mutex}
   GetReg a0,`1
   GetReg a6,*_threadBase : JSR -90(a6)
End Macro

Macro thread_TLMutexTryLock ; {ret,mutex}
   GetReg a0,`2
   GetReg a6,*_threadBase : JSR -96(a6) : PutReg d0,`1
End Macro

Macro thread_TLMutexUnlock ; {mutex}
   GetReg a0,`1
   GetReg a6,*_threadBase : JSR -102(a6)
End Macro

Macro thread_TLAllocMem ; {ret,arg1}
   GetReg d0,`2
   GetReg a6,*_threadBase : JSR -108(a6) : PutReg d0,`1
End Macro

Macro thread_TLFreeMem ; {ret,arg1}
   GetReg a0,`2
   GetReg a6,*_threadBase : JSR -114(a6) : PutReg d0,`1
End Macro


Function.l thread_InitLib {minVersion.l}
   SHARED *_threadBase
   If *_threadBase Then Function Return *_threadBase
   If minVersion<0 Then minVersion = 0
   *_threadBase = OpenLibrary_ ("thread.library",minVersion)
   Function Return *_threadBase
End Function


Statement thread_FreeLib {}
   SHARED *_threadBase
   If *_threadBase Then CloseLibrary_ *_threadBase : *_threadBase = 0
End Statement



;-------------------------------------------------------------------------



; C to Blitz conversion done by c2b.


#TL_TRUE                       = -1
#TL_FALSE                      = 0

#TL_D2                         = 1
#TL_D3                         = 2
#TL_D4                         = 4
#TL_D5                         = 8
#TL_D6                         = 16
#TL_D7                         = 32
#TL_A2                         = 64
#TL_A3                         = 128
#TL_A4                         = 256
#TL_A5                         = 512
#TL_A6                         = 1024

#TL_AMIGAE                     = #TL_A4



