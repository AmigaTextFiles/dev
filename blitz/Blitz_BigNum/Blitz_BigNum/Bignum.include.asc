
; Bignum.include.bb2 generated by FD2inc.


DEFTYPE .Library *_BigNumBase

Macro BigNumInit ; {ret}
   GetReg a6,*_BigNumBase : JSR -30(a6) : PutReg d0,`1
End Macro

Macro BigNumAdd ; {x,y,z}
   GetReg A0,`1 : GetReg A1,`2 : GetReg A2,`3
   GetReg a6,*_BigNumBase : JSR -36(a6)
End Macro

Macro BigNumDigitAdd ; {x,y}
   GetReg A0,`1 : GetReg D0,`2
   GetReg a6,*_BigNumBase : JSR -42(a6)
End Macro

Macro BigNumDisplay ; {z}
   GetReg A0,`1
   GetReg a6,*_BigNumBase : JSR -48(a6)
End Macro

Macro BigNumPrint ; {x}
   GetReg A0,`1
   GetReg a6,*_BigNumBase : JSR -54(a6)
End Macro

Macro BigNumAssign ; {x,y}
   GetReg A0,`1 : GetReg A1,`2
   GetReg a6,*_BigNumBase : JSR -60(a6)
End Macro

Macro BigNumStrToBigNum ; {x,S}
   GetReg A0,`1 : GetReg A1,`2
   GetReg a6,*_BigNumBase : JSR -66(a6)
End Macro

Macro BigNumCompare ; {ret,x,y}
   GetReg A0,`2 : GetReg A1,`3
   GetReg a6,*_BigNumBase : JSR -72(a6) : PutReg d0,`1
End Macro

Macro BigNumDiv ; {x,y,z}
   GetReg A0,`1 : GetReg A1,`2 : GetReg A2,`3
   GetReg a6,*_BigNumBase : JSR -78(a6)
End Macro

Macro BigNumDigitDiv ; {x,y,z}
   GetReg A0,`1 : GetReg D0,`2 : GetReg A1,`3
   GetReg a6,*_BigNumBase : JSR -84(a6)
End Macro

Macro BigNumRightShift ; {x,Nb}
   GetReg A0,`1 : GetReg D0,`2
   GetReg a6,*_BigNumBase : JSR -90(a6)
End Macro

Macro BigNumMul ; {x,y,z}
   GetReg A0,`1 : GetReg A1,`2 : GetReg A2,`3
   GetReg a6,*_BigNumBase : JSR -96(a6)
End Macro

Macro BigNumDigitMul ; {x,y}
   GetReg A0,`1 : GetReg D0,`2
   GetReg a6,*_BigNumBase : JSR -102(a6)
End Macro

Macro BigNumLeftShift ; {x,Nb}
   GetReg A0,`1 : GetReg D0,`2
   GetReg a6,*_BigNumBase : JSR -108(a6)
End Macro

Macro BigNumModulo ; {x,y,z}
   GetReg A0,`1 : GetReg A1,`2 : GetReg A2,`3
   GetReg a6,*_BigNumBase : JSR -114(a6)
End Macro

Macro BigNumPgcd ; {x,y,z}
   GetReg A0,`1 : GetReg A1,`2 : GetReg A2,`3
   GetReg a6,*_BigNumBase : JSR -120(a6)
End Macro

Macro BigNumPuiModulo ; {x,y,z,t}
   GetReg A0,`1 : GetReg A1,`2 : GetReg A2,`3 : GetReg A3,`4
   GetReg a6,*_BigNumBase : JSR -126(a6)
End Macro

Macro BigNumRho ; {ret,n,res,lim}
   GetReg A0,`2 : GetReg A1,`3 : GetReg D0,`4
   GetReg a6,*_BigNumBase : JSR -132(a6) : PutReg d0,`1
End Macro

Macro BigNumRnd ; {n,z}
   GetReg D0,`1 : GetReg A0,`2
   GetReg a6,*_BigNumBase : JSR -138(a6)
End Macro

Macro BigNumSub ; {x,y,z}
   GetReg A0,`1 : GetReg A1,`2 : GetReg A2,`3
   GetReg a6,*_BigNumBase : JSR -144(a6)
End Macro

Macro BigNumDigitSub ; {x,y}
   GetReg A0,`1 : GetReg D0,`2
   GetReg a6,*_BigNumBase : JSR -150(a6)
End Macro

Macro BigNumSwap ; {x,y}
   GetReg A0,`1 : GetReg A1,`2
   GetReg a6,*_BigNumBase : JSR -156(a6)
End Macro

Macro BigNumIntToBigNum ; {z,x}
   GetReg A0,`1 : GetReg D0,`2
   GetReg a6,*_BigNumBase : JSR -162(a6)
End Macro

Macro BigNumFree ; {i}
   GetReg D0,`1
   GetReg a6,*_BigNumBase : JSR -168(a6)
End Macro

Macro BigNumFastCompare ; {ret,x,y}
   GetReg A0,`2 : GetReg A1,`3
   GetReg a6,*_BigNumBase : JSR -174(a6) : PutReg d0,`1
End Macro

Macro BigNumToInt ; {ret,z}
   GetReg A0,`2
   GetReg a6,*_BigNumBase : JSR -180(a6) : PutReg d0,`1
End Macro

Macro BigNumSqrt ; {ret,x,y}
   GetReg A0,`2 : GetReg A1,`3
   GetReg a6,*_BigNumBase : JSR -186(a6) : PutReg d0,`1
End Macro

Macro BigNumDiffCarre ; {ret,n,res,lim}
   GetReg a0,`2 : GetReg a1,`3 : GetReg d0,`4
   GetReg a6,*_BigNumBase : JSR -192(a6) : PutReg d0,`1
End Macro

Macro BigNumBrutePrime ; {ret,i,aff}
   GetReg A0,`2 : GetReg D0,`3
   GetReg a6,*_BigNumBase : JSR -198(a6) : PutReg d0,`1
End Macro

Macro BigNumEDiv ; {x,y,z,Rest}
   GetReg A0,`1 : GetReg A1,`2 : GetReg A2,`3 : GetReg A3,`4
   GetReg a6,*_BigNumBase : JSR -204(a6)
End Macro

Macro BigNumToStr ; {z,y}
   GetReg A0,`1 : GetReg A1,`2
   GetReg a6,*_BigNumBase : JSR -210(a6)
End Macro

Macro BigNumPower2 ; {x,Nb}
   GetReg A0,`1 : GetReg D0,`2
   GetReg a6,*_BigNumBase : JSR -216(a6)
End Macro

Macro BigNumLucasLehmer ; {ret,x}
   GetReg D0,`2
   GetReg a6,*_BigNumBase : JSR -222(a6) : PutReg d0,`1
End Macro

Macro BigNumSetNul ; {x}
   GetReg A0,`1
   GetReg a6,*_BigNumBase : JSR -228(a6)
End Macro

Macro BigNumSize ; {ret,x}
   GetReg A0,`2
   GetReg a6,*_BigNumBase : JSR -234(a6) : PutReg d0,`1
End Macro

Macro BigNumIsEven ; {ret,x}
   GetReg A0,`2
   GetReg a6,*_BigNumBase : JSR -240(a6) : PutReg d0,`1
End Macro

Macro BigNumIsNul ; {ret,x}
   GetReg A0,`2
   GetReg a6,*_BigNumBase : JSR -246(a6) : PutReg d0,`1
End Macro

Macro BigNumIsPositive ; {ret,x}
   GetReg A0,`2
   GetReg a6,*_BigNumBase : JSR -252(a6) : PutReg d0,`1
End Macro

Macro BigNumIsNegative ; {ret,x}
   GetReg A0,`2
   GetReg a6,*_BigNumBase : JSR -258(a6) : PutReg d0,`1
End Macro

Macro BigNumAbsBigNum ; {x}
   GetReg A0,`1
   GetReg a6,*_BigNumBase : JSR -264(a6)
End Macro

Macro BigNumSquare ; {x,z}
   GetReg A0,`1 : GetReg A1,`2
   GetReg a6,*_BigNumBase : JSR -270(a6)
End Macro

Macro BigNumErrorStatus ; {ret}
   GetReg a6,*_BigNumBase : JSR -276(a6) : PutReg d0,`1
End Macro

Macro BigNumInfo ; {}
   GetReg a6,*_BigNumBase : JSR -282(a6)
End Macro


Function.l Bignum_InitLib {minVersion.l}
   SHARED *_BigNumBase
   If *_BigNumBase Then Function Return *_BigNumBase
   If minVersion<0 Then minVersion = 0
   *_BigNumBase = OpenLibrary_ ("BigNum.library",minVersion)
   Function Return *_BigNumBase
End Function


Statement Bignum_FreeLib {}
   SHARED *_BigNumBase
   If *_BigNumBase Then CloseLibrary_ *_BigNumBase : *_BigNumBase = 0
End Statement



;--------------------------------------------------------------------


; C to Blitz conversion done by c2b.


NEWTYPE .BigNum
   signe.l                               ; INT
   nc.l                                  ; INT
   *chiffres.w                           ; USHORT
End NEWTYPE


#DIVIDE_ZERO                   = 1
#NO_MEMORY                     = 2
#TOO_MUCH_BIGNUM               = 4
#TOO_MUCH_FREE_BIGNUM          = 8
#INVALID_DOS                   = 16
#INVALID_GRAPHICS              = 32
#INVALID_CPU                   = 64
#BIGNUM_SIZE_TOO_HIGH          = 128
#NEGATIVE_SQRT                 = 256
#PARTIAL_BIGNUM_TO_INT         = 512
#NEGATIVE_PGCD                 = 1024
#ZERO_POWER_ZERO               = 2048
#MODULO_ZERO                   = 4096

