
; maestix.include.bb2 generated by FD2inc.


DEFTYPE .Library *_MaestixBase

Macro maestix_AllocMaestro ; {ret,taglist}
   GetReg a0,`2
   GetReg a6,*_MaestixBase : JSR -30(a6) : PutReg d0,`1
End Macro

Macro maestix_FreeMaestro ; {maestrobase}
   GetReg a0,`1
   GetReg a6,*_MaestixBase : JSR -36(a6)
End Macro

Macro maestix_SetMaestro ; {maestrobase,taglist}
   GetReg a0,`1 : GetReg a1,`2
   GetReg a6,*_MaestixBase : JSR -42(a6)
End Macro

Macro maestix_GetStatus ; {ret,maestrobase,mstat}
   GetReg a0,`2 : GetReg d0,`3
   GetReg a6,*_MaestixBase : JSR -48(a6) : PutReg d0,`1
End Macro

Macro maestix_TransmitData ; {maestrobase,datamessage}
   GetReg a0,`1 : GetReg a1,`2
   GetReg a6,*_MaestixBase : JSR -54(a6)
End Macro

Macro maestix_ReceiveData ; {maestrobase,datamessage}
   GetReg a0,`1 : GetReg a1,`2
   GetReg a6,*_MaestixBase : JSR -60(a6)
End Macro

Macro maestix_FlushTransmit ; {maestrobase}
   GetReg a0,`1
   GetReg a6,*_MaestixBase : JSR -66(a6)
End Macro

Macro maestix_FlushReceive ; {maestrobase}
   GetReg a0,`1
   GetReg a6,*_MaestixBase : JSR -72(a6)
End Macro

Macro maestix_StartRealtime ; {maestrobase,taglist}
   GetReg a0,`1 : GetReg a1,`2
   GetReg a6,*_MaestixBase : JSR -78(a6)
End Macro

Macro maestix_StopRealtime ; {maestrobase}
   GetReg a0,`1
   GetReg a6,*_MaestixBase : JSR -84(a6)
End Macro

Macro maestix_UpdateRealtime ; {maestrobase,taglist}
   GetReg a0,`1 : GetReg a1,`2
   GetReg a6,*_MaestixBase : JSR -90(a6)
End Macro

Macro maestix_ReadPostLevel ; {maestrobase,taglist}
   GetReg a0,`1 : GetReg a1,`2
   GetReg a6,*_MaestixBase : JSR -96(a6)
End Macro


Function.l maestix_InitLib {minVersion.l}
   SHARED *_MaestixBase
   If *_MaestixBase Then Function Return *_MaestixBase
   If minVersion<0 Then minVersion = 0
   *_MaestixBase = OpenLibrary_ ("maestix.library",minVersion)
   Function Return *_MaestixBase
End Function


Statement maestix_FreeLib {}
   SHARED *_MaestixBase
   If *_MaestixBase Then CloseLibrary_ *_MaestixBase : *_MaestixBase = 0
End Statement


;---------------------------------------------------------------------------------------


; C to Blitz conversion done by c2b.

;
; **      Maestix Library References  -  V41
; **
; **      (c) 1995-98 Richard Koerber
;


; ------------------------------------------------------------------------
;  Generic library informations


#MAESTIXVERSION                = (41)

NEWTYPE .MaestixBase
   mxb_LibNode.Library                   ; STRUCT
End NEWTYPE


; ------------------------------------------------------------------------
;  MaestroBase structure

NEWTYPE .MaestroBase
   maba_Dummy.w                          ; WORD    ; PRIVATE
End NEWTYPE


; ------------------------------------------------------------------------
;  DataMessage

NEWTYPE .DataMessage
   dmn_Message.Message                   ; STRUCT  ; struct Message
   *dmn_BufPtr.l                         ; APTR    ; pointer to public buffer memory
   dmn_BufLen.l                          ; ULONG   ; length of buffer memory (bytes)
End NEWTYPE

NEWTYPE .ExtDataMessage
   edmn_Message.Message                  ; STRUCT  ; struct Message
   *edmn_BufPtr.l                        ; APTR    ; pointer to public buffer memory
   edmn_BufLen.l                         ; ULONG   ; length of buffer memory (bytes)
   edmn_Flags.w                          ; UWORD   ; EDMN flags, see below
   *edmn_BufPtrR.l                       ; APTR    ; pointer to right buffer (dual mode)
End NEWTYPE

; Flags for edmn_Flags
#EDMNB_MONO                    = (0) ; Buffer is Mono
#EDMNF_MONO                    = ($0001)
#EDMNB_DUAL                    = (1) ; Buffer is Dual
#EDMNF_DUAL                    = ($0002)


; ------------------------------------------------------------------------
;  Tag definitions

#_MSTXTAG                      = ($CD414553) ; Maestix tag base ("MAES")

;  SetMaestro() tags

#MTAG_Input                    = (#_MSTXTAG+$00) ; Input? Def. INPUT_STD
#MTAG_Output                   = (#_MSTXTAG+$01) ; Output? Def. OUTPUT_BYPASS
#MTAG_SetCSB                   = (#_MSTXTAG+$02) ; Direct CSB access
#MTAG_SetUDB                   = (#_MSTXTAG+$03) ; Direct UDB access
#MTAG_Studio                   = (#_MSTXTAG+$04) ; Studio mode? (TRUE/FALSE)
#MTAG_CopyProh                 = (#_MSTXTAG+$05) ; Copy protection?
#MTAG_Emphasis                 = (#_MSTXTAG+$06) ; Emphasis
#MTAG_Source                   = (#_MSTXTAG+$07) ; Source category code
#MTAG_Rate                     = (#_MSTXTAG+$08) ; Output rate
#MTAG_Validity                 = (#_MSTXTAG+$09) ; Validity flag (TRUE/FALSE)
#MTAG_ResetUDB                 = (#_MSTXTAG+$0A) ; Reset UDB
#MTAG_ResetLSA                 = (#_MSTXTAG+$0C) ; Reset Local Sample Address

;  StartRealtime() tags

#MTAG_Effect                   = (#_MSTXTAG+$0D) ; effect number (see below)
#MTAG_A0                       = (#_MSTXTAG+$0E) ; parameter -> A0
#MTAG_A1                       = (#_MSTXTAG+$0F) ; parameter -> A1
#MTAG_D2                       = (#_MSTXTAG+$10) ; parameter -> D2
#MTAG_D3                       = (#_MSTXTAG+$11) ; parameter -> D3
#MTAG_CustomCall               = (#_MSTXTAG+$12) ; pointer to custom call
#MTAG_PostLevel                = (#_MSTXTAG+$13) ; Post levelmeter ?


; ------------------------------------------------------------------------
;  Tag values for MTAG_Input

#INPUT_STD                     = (0) ; User selected input
#INPUT_OPTICAL                 = (1) ; optical input
#INPUT_COAXIAL                 = (2) ; coaxial input
#INPUT_SRC48K                  = (3) ; 48kHz internal source


; ------------------------------------------------------------------------
;  Tag values for MTAG_Output

#OUTPUT_BYPASS                 = (0) ; Bypass
#OUTPUT_INPUT                  = (1) ; from input
#OUTPUT_FIFO                   = (2) ; from FIFO


; ------------------------------------------------------------------------
;  Tag values for MTAG_CopyProh

#CPROH_OFF                     = (0) ; No protection requested
#CPROH_ON                      = (1) ; Copy protection requested
#CPROH_PROHIBIT                = (2) ; Copy prohibited
#CPROH_INPUT                   = (3) ; As input


; ------------------------------------------------------------------------
;  Tag values for MTAG_Emphasis

#EMPH_OFF                      = (0) ; no emphasis
#EMPH_50us                     = (1) ; 50/155s
#EMPH_CCITT                    = (2) ; CCITT J.17 (studio only)
#EMPH_MANUAL                   = (3) ; Manuell (studio only)
#EMPH_INPUT                    = (4) ; As input
#EMPH_ON                       = (#EMPH_50us)


; ------------------------------------------------------------------------
;  Tag values for MTAG_Source

#SRC_INPUT                     = (0) ; As input
#SRC_CD                        = ($01) ; CD
#SRC_DAT                       = ($03) ; DAT
#SRC_DSR                       = ($0C) ; DSR
#SRC_ADCONV                    = ($06) ; ADC
#SRC_INSTR                     = ($05) ; Instrument


; ------------------------------------------------------------------------
;  Tag values for MTAG_Rate

#RATE_32000                    = (0) ; Rate 32000 Hz
#RATE_44100                    = (1) ; Rate 44100 Hz
#RATE_48000                    = (2) ; Rate 48000 Hz
#RATE_48000MANU                = (3) ; Rate 48000 Hz Manual
#RATE_INPUT                    = (4) ; As input


; ------------------------------------------------------------------------
;  Realtime FX codes

#RFX_Muting                    = (0) ; mute incoming signal
#RFX_Bypass                    = (1) ; no manipulation (default)
#RFX_ChannelSwap               = (2) ; swap left and right
#RFX_LeftOnly                  = (3) ; mute right channel
#RFX_RightOnly                 = (4) ; mute left channel
#RFX_Mono                      = (5) ; mono
#RFX_Surround                  = (6) ; surround
#RFX_Volume                    = (7) ; volume
; MTAG_D2: left volume (0..256)
; MTAG_D3: right volume (0..256)
#RFX_Karaoke                   = (8) ; filters out the singer
#RFX_Foregnd                   = (9) ; filters out the surround info
#RFX_Spatial                   = (10) ; virtual shifting of the speakers
; MTAG_D2: shift factor (0..256)
;          optimum: about 64
#RFX_Echo                      = (11) ; echo effect
; MTAG_D2: entry volume (0..256)
; MTAG_D3: decay volume (0..256)
; MTAG_A0: pointer to MRTorus structure
#RFX_Mask                      = (12) ; mask/quantisize
; MTAG_D2: left mask word
; MTAG_D3: right mask word
#RFX_Offset                    = (13) ; adding dc offset
; MTAG_D2: left offset (32767..-32768)
; MTAG_D3: right offset (32767..-32768)
#RFX_Robot                     = (14) ; robot effect
; MTAG_D2: gate open (samples)
; MTAG_D3: gate closed (samples)
; MTAG_A0: pointer to mrrob structure
#RFX_ReSample                  = (15) ; resample effect
; MTAG_D2: new rate (left)
; MTAG_D3: new rate (right)
; MTAG_A0: pointer to mrres structure

; ------------------------------------------------------------------------
;  Torus structure for RFX_Echo

NEWTYPE .MRTorus
   *mrtor_PointerL.l                     ; APTR    ; Pointer to left data buffer
   *mrtor_PointerR.l                     ; APTR    ; Pointer to right data buffer
   mrtor_Size.l                          ; ULONG   ; Size of these buffers (bytes)
   mrtor_Offset.l                        ; ULONG   ; current offset (init with NULL)
End NEWTYPE

; ------------------------------------------------------------------------
; Robot structure for RFX_Robot

NEWTYPE .MRRobot
   mrrob_Counter.l                       ; LONG    ; Sample counter (init with 0)
End NEWTYPE

; ------------------------------------------------------------------------
; ReSample structure for RFX_ReSample

NEWTYPE .MRReSample
   mrres_LMax.w                          ; UWORD   ; incoming sampling rate, left
   mrres_RMax.w                          ; UWORD   ; incoming sampling rate, right
   mrres_LCounter.w                      ; UWORD   ; counter, init with 0
   mrres_RCounter.w                      ; UWORD   ; counter, init with 0
   mrres_LData.w                         ; WORD    ; left audio data, init with 0
   mrres_RData.w                         ; WORD    ; right audio data, init with 0
End NEWTYPE

; ------------------------------------------------------------------------
;  GetStatus() values

#MSTAT_TFIFO                   = (0) ; Transmit FIFO Status    (s.b.)
#MSTAT_RFIFO                   = (1) ; Receive FIFO Status     (s.b.)
#MSTAT_Signal                  = (2) ; Signal on input?        (BOOL)
#MSTAT_Emphasis                = (3) ; Signal uses emphasis?   (BOOL)
#MSTAT_DATsrc                  = (4) ; DAT-Source?             (BOOL)
#MSTAT_CopyProh                = (5) ; Copy protection?        (BOOL)
#MSTAT_Rate                    = (6) ; Rate                    (ULONG)
#MSTAT_UDB                     = (7) ; get current UDB         (UBYTE)

;  Values for TFIFO & RFIFO

#FIFO_Off                      = (0) ; FIFO ist aus
#FIFO_Running                  = (1) ; FIFO lduft
#FIFO_Error                    = (2) ; FIFO lief |ber


