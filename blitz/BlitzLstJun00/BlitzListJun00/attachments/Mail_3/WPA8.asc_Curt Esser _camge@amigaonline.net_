*tmprp.RastPort=AllocMem_(SizeOf.RastPort,#MEMF_PUBLIC|#MEMF_CLEAR)
InitRastPort_ *tmprp
*bm2.BitMap=AllocBitMap_(((inwid+15) LSL 4) LSR 1,1,disdep,#BMF_CLEAR,0)

If *bm2
  *tmprp\Layer=0
  *tmprp\BitMap=*bm2
  xstop.w=winleft+inwid-1
  ystop.w=wintop+inhit-1
  wpa8.l=WritePixelArray8_ (RastPort(0),winleft,wintop,xstop,ystop,*chunk,*tmprp)

  FreeBitMap_(*bm2)
Else
  dummy=RTreq{ohno$,"Unable to allocate temp rastport",ok$}
EndIf

FreeMem_ *tmprp,SizeOf.RastPort
