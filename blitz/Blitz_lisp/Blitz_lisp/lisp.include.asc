
; lisp.include.bb2 generated by FD2inc.


DEFTYPE .Library *_LISPBase

Macro lisp_run ; {ret,tags,error}
   GetReg A0,`2 : GetReg A1,`3
   GetReg a6,*_LISPBase : JSR -30(a6) : PutReg d0,`1
End Macro

Macro lisp_create ; {ret,tags,error}
   GetReg A0,`2 : GetReg A1,`3
   GetReg a6,*_LISPBase : JSR -36(a6) : PutReg d0,`1
End Macro

Macro lisp_dispose ; {ret,machine}
   GetReg A0,`2
   GetReg a6,*_LISPBase : JSR -42(a6) : PutReg d0,`1
End Macro

Macro lisp_load ; {ret,machine,tags,error}
   GetReg A0,`2 : GetReg A1,`3 : GetReg A2,`4
   GetReg a6,*_LISPBase : JSR -48(a6) : PutReg d0,`1
End Macro

Macro lisp_tokenize ; {ret,tags,error}
   GetReg A0,`2 : GetReg A1,`3
   GetReg a6,*_LISPBase : JSR -54(a6) : PutReg d0,`1
End Macro

Macro lisp_unload ; {bytecode}
   GetReg A0,`1
   GetReg a6,*_LISPBase : JSR -60(a6)
End Macro

Macro lisp_flush ; {}
   GetReg a6,*_LISPBase : JSR -66(a6)
End Macro

Macro lisp_iterate ; {ret,machine,error}
   GetReg A0,`2 : GetReg A1,`3
   GetReg a6,*_LISPBase : JSR -72(a6) : PutReg d0,`1
End Macro

Macro lisp_stop ; {machine}
   GetReg A0,`1
   GetReg a6,*_LISPBase : JSR -78(a6)
End Macro

Macro lisp_runagain ; {ret,machine}
   GetReg A0,`2
   GetReg a6,*_LISPBase : JSR -84(a6) : PutReg d0,`1
End Macro

Macro lisp_message ; {machine,message}
   GetReg A0,`1 : GetReg A1,`2
   GetReg a6,*_LISPBase : JSR -90(a6)
End Macro

Macro lisp_authentic ; {ret,msg}
   GetReg A0,`2
   GetReg a6,*_LISPBase : JSR -96(a6) : PutReg d0,`1
End Macro

Macro lisp_set ; {ret,machine,variable,value,error}
   GetReg A0,`2 : GetReg A1,`3 : GetReg A2,`4 : GetReg A3,`5
   GetReg a6,*_LISPBase : JSR -102(a6) : PutReg d0,`1
End Macro


Function.l lisp_InitLib {minVersion.l}
   SHARED *_LISPBase
   If *_LISPBase Then Function Return *_LISPBase
   If minVersion<0 Then minVersion = 0
   *_LISPBase = OpenLibrary_ ("lisp.library",minVersion)
   Function Return *_LISPBase
End Function


Statement lisp_FreeLib {}
   SHARED *_LISPBase
   If *_LISPBase Then CloseLibrary_ *_LISPBase : *_LISPBase = 0
End Statement


;----------------------------------------------------------------------------------


; C to Blitz conversion done by c2b.


;
; **  $Filename: lisp.h
; **
; **  Header file for lisp.library
;

; varargs tags (see autodoc/lisplib.doc)


#LISP_FILENAME                 = #TAG_USER   ; program to load (UBYTE *filename)
#LISP_BYTECODE                 = #TAG_USER+1 ; program to load (void  *bytecode)
#LISP_ARGUMENTS                = #TAG_USER+2 ; arguments (UBYTE *arguments)
#LISP_HOST                     = #TAG_USER+3 ; name of host's message port (UBYTE *)
#LISP_CONSOLE                  = #TAG_USER+4 ; console (UBYTE *specs)
#LISP_PRIORITY                 = #TAG_USER+5 ; interpreter priority (WORD priority)
#LISP_SIGNALS                  = #TAG_USER+6 ; signals to be raised when interpreter exits (ULONG signals)


; lisp error size limit

#LISP_MAXERRORSIZE             = 512


