
; C to Blitz conversion done by c2b.


NEWTYPE .CatharsisBase
   cts_LibNode.Node                      ; STRUCT
   cts_Flags.b                           ; UBYTE   ; LIB Flags
   cts_Pad0.b                            ; UBYTE   ; Dummy
   cts_NegSize.w                         ; UWORD   ; LIB Negative size (function table)
   cts_PosSize.w                         ; UWORD   ; LIB Positive size (it's this table)
   cts_Version.w                         ; UWORD   ; LIB Version
   cts_Revision.w                        ; UWORD   ; LIB Revision
   *cts_IdString.b                       ; CHAR    ; LIB Detail string
   cts_Sum.l                             ; ULONG   ; LIB Checksum
   cts_OpenCnt.w                         ; UWORD   ; LIB Open count
   cts_Reserved1.w                       ; UWORD   ; - Internally used (in the future...)
   *cts_SegList.b                        ; BPTR    ; LIB Segment pointer
   *cts_Reserved2.l                      ; VOID    ; As it tells
   *cts_SysBase.ExecBase                 ; STRUCT  ; Base pointers
   *cts_GfxBase.GfxBase                  ; STRUCT
   *cts_IntuitionBase.IntuitionBase      ; STRUCT
   *cts_TextFont.TextFont[256]           ; STRUCT  ; Remembered TextFont pointers
   *cts_CatharsisFont.TextFont[256]      ; STRUCT  ; Created TextFont pointers
   cts_FontListSem.SignalSemaphore       ; STRUCT
End NEWTYPE

*_CatharsisBase.CatharsisBase=0

;----------------------


; catharsis.include.bb2 generated by FD2inc.


Macro catharsis_ModifyCharacter ; {ret}
   GetReg a6,*_CatharsisBase : JSR -30(a6) : PutReg d0,`1
End Macro

Macro catharsis_ModifyCharacterA ; {fontdescription}
   GetReg a0,`1
   GetReg a6,*_CatharsisBase : JSR -36(a6)
End Macro

Macro catharsis_CreateCatharsisFont ; {ret}
   GetReg a6,*_CatharsisBase : JSR -42(a6) : PutReg d0,`1
End Macro

Macro catharsis_CreateCatharsisFontA ; {ret,font}
   GetReg a0,`2
   GetReg a6,*_CatharsisBase : JSR -48(a6) : PutReg d0,`1
End Macro

Macro catharsis_OpenCatharsisFont ; {ret}
   GetReg a6,*_CatharsisBase : JSR -54(a6) : PutReg d0,`1
End Macro

Macro catharsis_OpenCatharsisFontA ; {ret,font}
   GetReg a0,`2
   GetReg a6,*_CatharsisBase : JSR -60(a6) : PutReg d0,`1
End Macro

Macro catharsis_CloseCatharsisFont ; {ret}
   GetReg a6,*_CatharsisBase : JSR -66(a6) : PutReg d0,`1
End Macro

Macro catharsis_CloseCatharsisFontA ; {font}
   GetReg a0,`1
   GetReg a6,*_CatharsisBase : JSR -72(a6)
End Macro

Macro catharsis_ComputeCatharsisValue ; {ret}
   GetReg a6,*_CatharsisBase : JSR -78(a6) : PutReg d0,`1
End Macro

Macro catharsis_ComputeCatharsisValueA ; {ret,background, foreground, percent, status}
   GetReg d0,`2 : GetReg d1,`3 : GetReg d2,`4 : GetReg d3,`5
   GetReg a6,*_CatharsisBase : JSR -84(a6) : PutReg d0,`1
End Macro

Macro catharsis_CompressColorValue ; {ret}
   GetReg a6,*_CatharsisBase : JSR -90(a6) : PutReg d0,`1
End Macro

Macro catharsis_CompressColorValueA ; {ret,red, green, blue}
   GetReg d0,`2 : GetReg d1,`3 : GetReg d2,`4
   GetReg a6,*_CatharsisBase : JSR -96(a6) : PutReg d0,`1
End Macro

Macro catharsis_CompatibleColorValue ; {ret}
   GetReg a6,*_CatharsisBase : JSR -102(a6) : PutReg d0,`1
End Macro

Macro catharsis_CompatibleColorValueA ; {ret,value}
   GetReg d0,`2
   GetReg a6,*_CatharsisBase : JSR -108(a6) : PutReg d0,`1
End Macro

Macro CatharsisColorValue ; {ret}
   GetReg a6,*_CatharsisBase : JSR -114(a6) : PutReg d0,`1
End Macro

Macro CatharsisColorValueA ; {ret,background, foreground, var_red, var_green, var_blue}
   GetReg d0,`2 : GetReg d1,`3 : GetReg a0,`4 : GetReg a1,`5 : GetReg a2,`6
   GetReg a6,*_CatharsisBase : JSR -120(a6) : PutReg d0,`1
End Macro

Macro CatharsisText ; {ret}
   GetReg a6,*_CatharsisBase : JSR -126(a6) : PutReg d0,`1
End Macro

Macro CatharsisTextA ; {ret,rastport, string, stringlen, pennumber, catharsisfont}
   GetReg a1,`2 : GetReg a0,`3 : GetReg d0,`4 : GetReg d1,`5 : GetReg a2,`6
   GetReg a6,*_CatharsisBase : JSR -132(a6) : PutReg d0,`1
End Macro


Function.l catharsis_InitLib {minVersion.l}
   SHARED *_CatharsisBase
   If *_CatharsisBase Then Function Return *_CatharsisBase
   If minVersion<0 Then minVersion = 0
   *_CatharsisBase = OpenLibrary_ ("catharsis.library",minVersion)
   Function Return *_CatharsisBase
End Function


Statement catharsis_FreeLib {}
   SHARED *_CatharsisBase
   If *_CatharsisBase Then CloseLibrary_ *_CatharsisBase : *_CatharsisBase = 0
End Statement



;-----------------------------------------------------------------------------------------



; C to Blitz conversion done by c2b.


; Type definitions

NEWTYPE .CharInfo
   offset.w                              ; USHORT
   size.w                                ; USHORT
End NEWTYPE


NEWTYPE .CharArray
   CharIndex.CharInfo[256]               ; STRUCT  ; Points to each character's CharInfo (see above)
End NEWTYPE


; This table is internally used for decoding and only temporarily allocated!
NEWTYPE .FontDescription
   RPort.RastPort                        ; STRUCT  ; For existing, encoded data of font
   BMap.BitMap                           ; STRUCT
   DestRP.RastPort                       ; STRUCT  ; For the newly, slightly changed font data
   DestBM.BitMap                         ; STRUCT

   *dat.b                                ; UCHAR   ; Font data information pointer
   BytesPerRow.w                         ; USHORT  ; Complete line with information for all chars

   LowChar.w                             ; USHORT  ; e.g. 32
   HiChar.w                              ; USHORT  ; e.g. 255

   CharHeight.w                          ; USHORT  ; Height of this char
   CharOffset.w                          ; USHORT  ; The offset in pixels to reach the information for this char in "data"
   CharWidth.w                           ; USHORT  ; The amount of information stored per line for this char (e.g. 9)
End NEWTYPE


