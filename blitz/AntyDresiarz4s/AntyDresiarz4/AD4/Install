; $VER Install-AntyDresiarz Issue #2 by Paplo/Taski (13.08.1997)


; Odpalenie efektów specjalnych Installera
;
(run "RUN >NIL: InstallFX")

; Wyôwietlenie planszy o pytanie o tryb instalacji
;
(welcome)


; Wybór jëzyka instalacji
;
     (set #JEZYK
	(askchoice
       	(prompt "Wybierz jëzyk instalatora.\nSelect instalation language.")
	(choices "Polski (Polish)" "English (Angielski)")
	(help #askbool-help)
	(default 0)
     ))

; -------------------------------- POLSKIE KOMUNIKATY --------------------------

(if (= #JEZYK "0")

	(

	(set #com_welcome "\n\n Grupa Taski ma zaszczyt powitaê Cië\nw instalatorze do czwartego wydania magazynu\nAntyDresiarz.\n")
	(set #destdir_prompt "Wskaû katalog w którym chcesz zainstalowaê AntyDresiarza. Katalog 'AntyDresiarz4' zostanie automatycznie stworzony.")
	(set #destdir_help   "Wybierz w oknie miejsce w którym chcesz zainstalowaê katalog z AntyDresiarzem.\n\nNie musisz tworzyê nowego katalogu dla AntyDresiarza, poniewaû katalog o nazwie 'AntyDresiarz4' zostanie automatycznie utworzony.")
	(set #com_copyfiles "Kopiujë pliki...")

	(set #locale_prompt "\nCzy mam zainstalowaê katalogi locale oraz pliki akcentowe, które umoûliwiâ Ci wymowë artukuîów ?\n")
	(set #locale_yes "Tak, instaluj")
	(set #locale_no "Nie, nie instaluj")
	(set #locale_help "Instalator zainstaluje angielskâ i polskâ wersjë katalogów locale. Umoûliwi Ci to komunikowanie sië z magazynem w jëzyku polskim lub angielskim.\n\nInstalator zainstaluje równieû specjalne pliki akcentowe, które umoûliwiâ Ci sîuchanie artykuîów wymawianych poprawnâ polszczyznâ.\n\nOdpowiednie pliki zostanâ skopiowane do katalogu LOCALE: Twojego dysku startowego.")

	(set #dbplayer_prompt   "Instalacja biblioteki \"dbplayer.library\", dziëki której posîuchasz wielokanaîowej muzyki podczas lektury magazynu.")
	(set #dbplayer_exists   "UWAGA! UWAGA! UWAGA!\n\nNiepeîna wersja instalacyjna magazynu AntyDresiarz!\n\nBrak pliku \"Libs/dbplayer.library\"\n\nBez tej biblioteki magazyn nie bëdzie obsîugiwaî moduîów muzycznych w formacie DigiBooster Pro\n\nZdobâdú peînâ wersjë instalacyjnâ magazynu lub znajdú plik dbplayer.library i zainstaluj go rëcznie do katalogu LIBS:.")
	(set #player61_prompt   "Instalacja biblioteki \"player61.library\", która umoûliwi Ci odsîuch moduîów w formacie The Player 6.1")
	(set #player61_exists   "UWAGA! UWAGA! UWAGA!\n\nNiepeîna wersja instalacyjna magazynu AntyDresiarz!\n\nBrak pliku \"Libs/player61.library\"\n\nBez tej biblioteki magazyn nie bëdzie obsîugiwaî moduîów muzycznych w formacie The Player 6.x\n\nZdobâdú peînâ wersjë instalacyjnâ magazynu lub znajdú plik player61.library i zainstaluj go rëcznie do katalogu LIBS:.")
	(set #boards_prompt     "Instalacja biblioteki \"boards.library\", która umoûliwi AntyDresiarzowi poprawne rozpoznanie Twojego sprzëtu.")
	(set #boards_exists     "UWAGA! UWAGA! UWAGA!\n\nNiepeîna wersja instalacyjna magazynu AntyDresiarz!\n\nBrak pliku \"Libs/boards.library\"\n\nBez tej biblioteki magazyn nie bëdzie mógî dokonaê dokîadnego rozpoznania Twojego sprzëtu.\n\nZdobâdú peînâ wersjë instalacyjnâ magazynu lub znajdú plik player61.library i zainstaluj go rëcznie do katalogu LIBS:.\n\nBiblioteka ta nie jest wymagana do poprawnej pracy magazynu!")
	(set #localelib_prompt  "Instalacja biblioteki \"locale.library\", dziëki której komunikacja z magazynem odbywaê sië bëdzie w wybranym jëzyku.")
	(set #localelib_exists  "UWAGA! UWAGA! UWAGA!\n\nNiepeîna wersja instalacyjna magazynu AntyDresiarz!\n\nBrak pliku \"Libs/locale.library\"\n\nBez tej biblioteki magazyn nie bëdzie obsîugiwaî komunikatów w jëzyku angielskim\n\nZdobâdú peînâ wersjë instalacyjnâ magazynu lub znajdú plik locale.library na dysku z Workbenchem i zainstaluj go rëcznie do katalogu LIBS:.\n\nBiblioteka ta nie jest wymagana do poprawnej pracy magazynu!")
	(set #reqtools_prompt   "Instalacja biblioteki \"reqtools.library\", dziëki której magazyn bëdzie mógî wyôwietlaê komunikaty.")
	(set #reqtools_exists   "UWAGA! UWAGA! UWAGA!\n\nNiepeîna wersja instalacyjna magazynu AntyDresiarz!\n\nBrak pliku \"Libs/reqtools.library\"\n\nBez tej biblioteki magazyn nie bëdzie obsîugiwaî komunikatów ekranowych.\n\nZdobâdú peînâ wersjë instalacyjnâ magazynu lub znajdú plik reqtools.library i zainstaluj go rëcznie do katalogu LIBS:.\n\nBiblioteka ta jest WYMAGANA do uruchomienia magazynu!")
	(set #stc_prompt        "Instalacja biblioteki \"stc.library\", dziëki której AntyDresiarz bëdzie mógî rozpakowaê pliki w formacie StoneCracker.")
	(set #stc_exists        "UWAGA! UWAGA! UWAGA!\n\nNiepeîna wersja instalacyjna magazynu AntyDresiarz!\n\nBrak pliku \"Libs/stc.library\"\n\nBez tej biblioteki magazyn nie bëdzie potrafiî rozpakowaê danych spakowanych programem StoneCracker\n\nZdobâdú peînâ wersjë instalacyjnâ magazynu lub znajdú plik stc.library i zainstaluj go rëcznie do katalogu LIBS:.\n\nBiblioteka ta nie jest wymagana do poprawnej pracy magazynu.")
	(set #xpkmaster_prompt  "Instalacja biblioteki \"xpkmaster.library\", dziëki której AntyDresiarz bëdzie mógî rozpakowaê pliki w formacie XPK")
	(set #xpkmaster_exists  "UWAGA! UWAGA! UWAGA!\n\nNiepeîna wersja instalacyjna magazynu AntyDresiarz!\n\nBrak pliku \"Libs/xpkmaster.library\"\n\nBez tej biblioteki magazyn nie bëdzie obsîugiwaî danych spakowanych kompresorami XPK.\n\nZdobâdú peînâ wersjë instalacyjnâ magazynu lub znajdú plik xpkmaster.library i zainstaluj go rëcznie do katalogu LIBS:.\n\nBez tej biblioteki magazyn najprawdopodobniej odmówi posîuszeïstwa.")
	(set #xpkSQSH_prompt    "Instalacja biblioteki \"xpkSQSH.library\", dziëki której AntyDresiarz bëdzie mógî rozpakowaê pliki w formacie XPK SQSH")
	(set #xpkSQSH_exists    "UWAGA! UWAGA! UWAGA!\n\nNiepeîna wersja instalacyjna magazynu AntyDresiarz!\n\nBrak pliku \"Libs/Compressors/xpkSQSH.library\"\n\nBez tej biblioteki magazyn nie bëdzie obsîugiwaî danych spakowanych kompresorem XPK SQSH.\n\nZdobâdú peînâ wersjë instalacyjnâ magazynu lub znajdú plik xpkSQSH.library i zainstaluj go rëcznie do katalogu LIBS:Compressors.\n\nBez tej biblioteki magazyn najprawdopodobniej odmówi posîuszeïstwa.")
	(set #translator_prompt "Instalacja biblioteki \"translator.library\", dziëki ktorej AntyDresiarz bëdzie mógî recytowaê artykuîy.")
	(set #translator_exists "UWAGA! UWAGA! UWAGA!\n\nNiepeîna wersja instalacyjna magazynu AntyDresiarz!\n\nBrak pliku \"Libs/translator.library\"\n\nBez tej biblioteki magazyn nie bëdzie potrafiî wymówiê ani jednej litery.\n\nZdobâdú peînâ wersjë instalacyjnâ magazynu lub znajdú plik translator.library i zainstaluj go rëcznie do katalogu LIBS:.\n\nBiblioteka ta nie jest wymagana do odpalenia magazynu.")
	(set #iffparse_prompt   "Instalacja biblioteki \"iffparse.library\", dziëki której AntyDresiarz bëdzie dziaîaî poprawnie.")
	(set #iffparse_exists   "UWAGA! UWAGA! UWAGA!\n\nNiepeîna wersja instalacyjna magazynu AntyDresiarz!\n\nBrak pliku \"Libs/iffparse.library\"\n\nBez tej biblioteki magazyn nie uruchomi sië.\n\nZdobâdú peînâ wersjë instalacyjnâ magazynu lub znajdú plik iffparse.library i zainstaluj go rëcznie do katalogu LIBS:.\n\nBiblioteka ta jest WYMAGANA do odpalenia magazynu.")
	(set #diskfont_prompt   "Instalacja biblioteki \"diskfont.library\", dziëki której na AntyDresiarz bëdzie mógî wyôwietlaê tekst.")
	(set #diskfont_exists   "UWAGA! UWAGA! UWAGA!\n\nNiepeîna wersja instalacyjna magazynu AntyDresiarz!\n\nBrak pliku \"Libs/diskfont.library\"\n\nBez tej biblioteki magazyn nie uruchomi sië.\n\nZdobâdú peînâ wersjë instalacyjnâ magazynu lub znajdú plik diskfont.library na dysku z Workbenchem i zainstaluj go rëcznie do katalogu LIBS:.\n\nBiblioteka ta jest wymagana do odpalenia AntyDresiarza.")

	(set #end "\nWîaônie zakoïczono instalacjë.\n\nUruchom magazyn klikajâc na ikonce \"AntyDresiarz4\".\n\nW przypadku kîopotów z uruchomieniem magazynu zalecamy przeczytanie pliku readme, który znajduje sië w katalogu z wersjâ instalacyjnâ AntyDresiarza.\n\nGrupa Taski oraz AntyDresiarz Team ûyczy miîej lektury!")

	)
)

(set #var_destdirname "AntyDresiarz4")

;----------------------------------- Start!!!


; ============================= Wyôwietlenie strony powitalnej
;
	(message #com_welcome)

; ============================= Wyôwietlenie directory requestera
;
	(set #var_selecteddir
	  (askdir
	    (prompt  #destdir_prompt)
	    (help    #destdir_help)
	    (default "RAM:")
	  )
	)

	(set #var_destdir (tackon #var_selecteddir #var_destdirname))
	(set @default-dest #var_destdir)

; ============================= Tworzenie odpowiednich katalogów
;
	(MAKEDIR #var_destdir (infos))
	(MAKEDIR (tackon #var_destdir "FONTS"))

; ============================= Kopiowanie plików
;
;	(WORKING #com_copyfiles)
	(COPYFILES (SOURCE "FONTS") (DEST (tackon #var_destdir "FONTS")) (ALL) (NOGAUGE) )
	(COPYFILES (SOURCE "AntyDresiarz.exe") (DEST #var_destdir) (NOGAUGE) )
	(COPYFILES (SOURCE "AntydResiarz4.info") (DEST #var_destdir) (NOGAUGE) )
	(COPYFILES (SOURCE "PREFS.PRE") (DEST #var_destdir) (NOGAUGE) )
	(COPYFILES (SOURCE "DATA_FILE") (DEST #var_destdir) (NOGAUGE) )

; ============================= Generowanie skryptu uruchamiajâcego
;
	(textfile
		(dest (cat #var_destdir "/AntyDresiarz4"))
		(append "Assign FONTS: FONTS\n\nAntyDresiarz.exe\n\nAssign FONTS: Sys:FONTS")
		(safe)
	)

; ============================= Instalowanie katalogów locale

	(set #var_locale
		(askbool
		(prompt  #locale_prompt)
		(choices #locale_yes #locale_no)
		(help    #locale_help)
		(default 1)
		)
	)

	(if (= #var_locale 1)
	(
		(if (= (exists "LOCALE:Catalogs" (noreq)) 0)
			(
				(MAKEDIR (tackon "LOCALE:" "Catalogs"))
			)
		)
		(if (= (exists "LOCALE:Catalogs/polski" (noreq)) 0)
			(
				(MAKEDIR (tackon "LOCALE:Catalogs" "polski"))
			)
		)
		(if (= (exists "LOCALE:Catalogs/english" (noreq)) 0)
			(
				(MAKEDIR (tackon "LOCALE:Catalogs" "english"))
			)
		)
		(if (= (exists "LOCALE:Accents" (noreq)) 0)
			(
				(MAKEDIR (tackon "LOCALE:" "Accents"))
			)
		)

		(COPYFILES (SOURCE "Catalogs/polski/AntyDresiarz.catalog") (DEST "LOCALE:Catalogs/polski") (NOGAUGE) )
		(COPYFILES (SOURCE "Catalogs/english/AntyDresiarz.catalog") (DEST "LOCALE:Catalogs/english") (NOGAUGE) )
		(COPYFILES (SOURCE "Accents") (DEST "LOCALE:Accents") (ALL) (NOGAUGE) )

	)
	) 

; ============================= Instalacja biblioteki player61.library
;
	(if (exists "Libs/player61.library")
	(
		(COPYLIB
			(SOURCE "Libs/player61.library")
			(DEST "LIBS:")
			(PROMPT #player61_prompt)
			(HELP @copylib-help)
			(CONFIRM)
		)
	)
	;else
	(
		(message #player61_exists)
	)
	)

; ============================= Instalacja biblioteki dbplayer.library
;
;	(COPYLIB
;		(SOURCE "Libs/dbplayer.library")
;		(DEST "LIBS:")
;		(PROMPT #dbplayer_prompt)
;		(HELP @copylib-help)
;		(CONFIRM)
;	)

	(if (exists "Libs/dbplayer.library")
		(COPYFILES (SOURCE "Libs/dbplayer.library") (DEST "LIBS:") (NOGAUGE) )
	)
; ============================= Instalacja biblioteki boards.library
;
	(if (exists "Libs/boards.library")
	(
		(COPYLIB
			(SOURCE "Libs/boards.library")
			(DEST "LIBS:")
			(PROMPT #boards_prompt)
			(HELP @copylib-help)
			(CONFIRM)
		)
	)
	;else
	(
		(message #boards_exists)
	)
	)

; ============================= Instalacja biblioteki locale.library
;
	(if (exists "Libs/locale.library")
	(
		(COPYLIB
			(SOURCE "Libs/locale.library")
			(DEST "LIBS:")
			(PROMPT #localelib_prompt)
			(HELP @copylib-help)
			(CONFIRM)
		)
	)
	;else
	(
		(message #localelib_exists)
	)
	)
; ============================= Instalacja biblioteki stc.library
;
	(if (exists "Libs/stc.library")
	(
		(COPYLIB
			(SOURCE "Libs/stc.library")
			(DEST "LIBS:")
			(PROMPT #stc_prompt)
			(HELP @copylib-help)
			(CONFIRM)
		)
	)
	;else
	(
		(message #stc_exists)
	)
	)
; ============================= Instalacja biblioteki reqtools.library
;
	(if (exists "Libs/reqtools.library")
	(
		(COPYLIB
			(SOURCE "Libs/reqtools.library")
			(DEST "LIBS:")
			(PROMPT #reqtools_prompt)
			(HELP @copylib-help)
			(CONFIRM)
		)
	)
	;else
	(
		(message #reqtools_exists)
	)
	)
; ============================= Instalacja biblioteki translator.library
;
	(if (exists "Libs/translator.library")
	(
		(COPYLIB
			(SOURCE "Libs/translator.library")
			(DEST "LIBS:")
			(PROMPT #translator_prompt)
			(HELP @copylib-help)
			(CONFIRM)
		)
	)
	;else
	(
		(message #translator_exists)
	)
	)
; ============================= Instalacja biblioteki xpkmaster.library
;
	(if (exists "Libs/xpkmaster.library")
	(
		(COPYLIB
			(SOURCE "Libs/xpkmaster.library")
			(DEST "LIBS:")
			(PROMPT #xpkmaster_prompt)
			(HELP @copylib-help)
			(CONFIRM)
		)
	)
	;else
	(
		(message #xpkmaster_exists)
	)
	)

	(MAKEDIR "LIBS:Compressors")

; ============================= Instalacja biblioteki xpkSQSH.library
;
	(if (exists "Libs/compressors/xpkSQSH.library")
	(
		(COPYLIB
			(SOURCE "Libs/compressors/xpkSQSH.library")
			(DEST "LIBS:Compressors")
			(PROMPT #xpkSQSH_prompt)
			(HELP @copylib-help)
			(CONFIRM)
		)
	)
	;else
	(
		(message #xpkSQSH_exists)
	)
	)



; ============================= Instalacja biblioteki diskfont.library
;
	(if (exists "Libs/diskfont.library")
	(
		(COPYLIB
			(SOURCE "Libs/diskfont.library")
			(DEST "LIBS:")
			(PROMPT #diskfont_prompt)
			(HELP @copylib-help)
			(CONFIRM)
		)
	)
	;else
	(
		(message #diskfont_exists)
	)
	)
; ============================= Instalacja biblioteki iffparse.library
;
	(if (exists "Libs/iffparse.library")
	(
		(COPYLIB
			(SOURCE "Libs/iffparse.library")
			(DEST "LIBS:")
			(PROMPT #iffparse_prompt)
			(HELP @copylib-help)
			(CONFIRM)
		)
	)
	;else
	(
		(message #iffparse_exists)
	)
	)


; ------------- Koniec


(message #end)

(exit)
