
; "boards_test.ab2" an E to Blitz adaptation by Lorence Lombardo.

; Based on "boards.e" from here:-

; http://aminet.net/package/dev/e/aeboards


INCLUDE "boards.include.bb2"

If boards_InitLib{0}=0 Then NPrint "Could not initialize boards lib...!!!" : End

DEFTYPE .BoardInfo *bi, *cd : USEPATH *bi

*cd=\ConfigDev : bla.l=0 : c.w=0 : l$=Chr$(10)

!boards_AllocBoardInfo {*bi, #SB_EXPANSION_TYPE_DEC}
If *bi=0 Then boards_FreeLib{} : End

NPrint l$+"The following boards found installed on your computer..."+l$
NPrint "Nr. Manufacturer             Product               ID's"+l$

Repeat
   !boards_NextBoardInfo {*cd, *bi, *cd}
   If *cd<>0
      !boards_GetBoardName{bla, \bi_ManuName, \bi_ProdName, *cd, \bi_ManuID, \bi_ProdID}
      id1.l=Vallong(Peek$(\bi_ManuID)) : id2.l=Vallong(Peek$(\bi_ProdID))
      c+1 : Print RSet$(Str$(c),2)+"  "+LSet$(Peek$(\bi_ManuName),25)
      Print LSet$(Peek$(\bi_ProdName),22)
      NPrint "$"+StripLead$(Hex$(id1),48)+" $"+StripLead$(Hex$(id2),48)
   EndIf
Until *cd=0 OR CtrlC<>0

NPrint ""

!boards_FreeBoardInfo {bla, *bi} : boards_FreeLib{} : End
