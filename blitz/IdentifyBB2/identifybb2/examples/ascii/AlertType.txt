;
; Example of how to use IdAlert_ function from
; identify.library.
;
; Usage from CLI: AlertType <Alert ID>
;
; (c) Luca Ferraris 1997
;
;
WBStartup

;Get number of CLI params
If NumPars<>0

  ;Allocating space for strings
  DEADSTR.l=AllocMem_(50,#MEMF_CLEAR)
  SUBSYSSTR.l=AllocMem_(50,#MEMF_CLEAR)
  GENSTR.l=AllocMem_(50,#MEMF_CLEAR)
  SPECSTR.l=AllocMem_(50,#MEMF_CLEAR)


  ;Defines a TagList.
  Dim Tags.TagItem(5)
  Tags(0)\ti_Tag=#IDTAG_DeadStr,DEADSTR
  Tags(1)\ti_Tag=#IDTAG_SubsysStr,SUBSYSSTR
  Tags(2)\ti_Tag=#IDTAG_GeneralStr,GENSTR
  Tags(3)\ti_Tag=#IDTAG_SpecStr,SPECSTR
  Tags(4)\ti_Tag=#IDTAG_StrLength,50
  Tags(5)\ti_Tag=#TAG_DONE

  ;Now we check for Alert passed as parameter
  ALERTID.l=Val(Par$(1))

  If ALERTID<>0
    Error=IdAlert_(ALERTID,&Tags(0))
    If Error=0
      NPrint "AlertID:"+Par$(1)
      NPrint "Type:"+Peek$(DEADSTR)
      NPrint "Subsystem:"+Peek$(SUBSYSSTR)
      NPrint "General cause:"+Peek$(GENSTR)
      NPrint "Specified cause:"+Peek$(SPECSTR)
    End If
  End If

Else
    NPrint "AlertType - (c)Luca Ferraris"
    NPrint "Usage: AlertType <AlertID>"
End If
