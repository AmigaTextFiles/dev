
; This example should be compiled & run from CLI providing
; a name of a large file such as a CDDA file.

l$=Chr$(10): tmp$="pipe:temp.file"

exe$="run c:type "+Par$(1)+" >"+tmp$

Execute_ &exe$,0,0

exe$="c:break `c:STATUS Command c:type`"

If ReadFile(0,tmp$)

   FileInput 0: NPrint l$+l$: rc.l=0  ; rc = read counter

   Repeat

      in$=Inkey$(20000): br=CtrlC: rc+Len(in$)

      If br<>0 Then Execute_ &exe$,0,0
      ; pipe cant be closed because we must empty it first
      ; other wise we will crash but we can stop the program feeding it.
      ; Its in the OS manual some where.
      ; We must keep reading from pipe until its empty.

      NPrint Chr$(11)+" ",rc," bytes read from from pipe."

   Until in$="" ; Here i use an empty string because blitz "Eof(0)"
                ; is not working on pipe or CON.

   CloseFile 0

Else

   NPrint l$+" File not found."

EndIf
NPrint l$


