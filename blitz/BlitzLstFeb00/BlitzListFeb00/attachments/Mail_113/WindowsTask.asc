
NoCli

scr$="Workbench"

*scr.Screen=LockPubScreen_ (&scr$)

If *scr

  ScreenToFront_ *scr

  Repeat
    Delay_ 5
  Until Joyb(0)=1

  *win.Window=*scr\FirstWindow

  While *win

    If *win\Flags & #WFLG_WINDOWACTIVE

      *windowport.MsgPort=*win\UserPort           ; this is fine

        If *windowport

; -------------------------------------------------------------------------
.Problem

; ...no task structure found:

          *windowtask.Task=*windowport\mp_SigTask ; 00000000!

; -------------------------------------------------------------------------

          If *windowtask
            a$=Peek$(*windowtask\tc_Node\ln_Name)
            rq$="Task name:||"+a$+" ($"+Hex$(*windowtask)+")"
          Else rq$="WPort: $"+Hex$(*windowport)+"||Task: $"+Hex$(*windowtask)
          EndIf

        Else rq$="No window port!"
        EndIf

        Goto skiprest

    Else *win = *win\NextWindow
    EndIf

  Wend

UnlockPubScreen_ &scr$,*scr

EndIf

skiprest

Request "","Information:||"+rq$,"OK"

End
