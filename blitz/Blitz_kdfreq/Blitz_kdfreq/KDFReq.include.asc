

; KDFReq.include.bb2 generated by pragma2inc.


*_KDFReqBase.Library=0

Macro KDFReq_NewPath ; {UBYTE}
   GetReg a0,`1
   GetReg a6,*_KDFReqBase : JSR -66(a6)
End Macro

Macro KDFReq_NewPatMatch ; {ret,UBYTE,UBYTE}
   GetReg a0,`2 : GetReg a1,`3
   GetReg a6,*_KDFReqBase : JSR -72(a6) : PutReg d0,`1
End Macro

Macro KDFReq_NewFReq ; {ret,FRequest}
   GetReg a0,`2
   GetReg a6,*_KDFReqBase : JSR -48(a6) : PutReg d0,`1
End Macro

Macro KDFReq_CreateFRequest ; {ret}
   GetReg a6,*_KDFReqBase : JSR -54(a6) : PutReg d0,`1
End Macro

Macro KDFReq_DeleteFRequest ; {FRequest}
   GetReg a0,`1
   GetReg a6,*_KDFReqBase : JSR -60(a6)
End Macro

Macro KDFReq_NextSelectEntry ; {ret,FRequest}
   GetReg a0,`2
   GetReg a6,*_KDFReqBase : JSR -78(a6) : PutReg d0,`1
End Macro

Macro KDFReq_FlushFRBuffers ; {FRequest}
   GetReg a0,`1
   GetReg a6,*_KDFReqBase : JSR -84(a6)
End Macro


Function.l KDFReq_InitLib {minVersion.l}
   SHARED *_KDFReqBase
   If *_KDFReqBase Then Function Return *_KDFReqBase
   If minVersion<0 Then minVersion = 0
   *_KDFReqBase = OpenLibrary_ ("kd_freq.library",minVersion)
   Function Return *_KDFReqBase
End Function


Statement KDFReq_FreeLib {}
   SHARED *_KDFReqBase
   If *_KDFReqBase Then CloseLibrary_ *_KDFReqBase : *_KDFReqBase = 0
End Statement



;=====================================================================================



; C to Blitz conversion done by c2b.

; Filename: kdbase.h
; Release : 3.13
; Date    : 29 April 1992
;
; (C) 1990-1992 Khalid Aldoseri


KLIBNAME$                      = "kd_freq.library"
#KLIBVERSION                   = 3

#FRB_PRIVATE                   = 0 ; Private flag - do not use
#FRB_DUALWILD                  = 1 ; Dual wildcard facility
#FRB_NOINFO                    = 2 ; Don't show .info files
#FRB_NOTITLEBAR                = 3 ; No titlebar/dragbar/front/back/close gads
#FRB_AUTOPOSITION              = 4 ; Use autopositioning
#FRB_AUTOSIZE                  = 5 ; Use autosizing
#FRB_NORESIZE                  = 6 ; Forbid resizing
#FRB_OKTEXT                    = 7 ; New OK text defined
#FRB_FRONTSCREEN               = 8 ; Show up on front screen
#FRB_NOTEXTSHADOW              = 9 ; Do not use text shadows
#FRB_REPLACEIMAGES             = 10 ; Give user program images to FR
#FRB_CANCELTEXT                = 11 ; New Cancel text defined
#FRB_NEWFONT                   = 12 ; Use a special font
#FRB_SCREENFONT                = 13 ; Use the screen's font
#FRB_EXTENDEDSELECT            = 14 ; -- old flag -- use SELECTLIST instead --
#FRB_INVERTLOOK                = 15 ; Gives an inverted look.. use for Save
#FRB_HIDEWILD                  = 16 ; Hide Wildcard to be defined in extras->Hide
#FRB_NEWLOOK                   = 17 ; Make FR use that WB 2.0 look
#FRB_NONEWLOOK                 = 18 ; Disable auto-enable of FR_NEWLOOK
#FRB_SELECTLIST                = 19 ; Allow user to select multiple files
#FRB_SLSHOWNAMES               = 20 ; Show filenames only in Select List
#FRB_KEEPBUFFERS               = 21 ; Don't flush buffers at exit. i.e. next
; call of NewFReq() will not re-read the
; directories.
#FRB_EXTRABUTTONS              = 22 ; Activate the ExtraButtons feature
#FRB_SELECTLISTTIME            = 23 ; The select list is returned to the caller
; with the files in order of their selection
; and not sorted alphabetically
#FRB_DIRSONLY                  = 24 ; Only show/select directories
#FRB_USEPENS                   = 25 ; Makes FR uses pens defined in extras struct
; note that higher pen numbers cause slower
; rendering speed.

#FRB_DEFSIZES                  = 26 ; Makes FR uses the default sizes defined
; in the extras struct

#FRB_NOAUTOSORT                = 27 ; Disables auto sort when FR is done reading
; the directory

#FRB_DEVSLIST                  = 28 ; Show a list of devices instead of
; disk icons

#FRB_SPECIAL2                  = 29 ; Private flag - do not use
#FRB_SPECIAL1                  = 30 ; Private flag - do not use
#FRB_INUSE                     = 31 ; Private flag - do not use


#FR_PRIVATE                    = 1  LSL  #FRB_PRIVATE ; !!
#FR_DUALWILD                   = 1  LSL  #FRB_DUALWILD
#FR_NOINFO                     = 1  LSL  #FRB_NOINFO ; !!
#FR_NOTITLEBAR                 = 1  LSL  #FRB_NOTITLEBAR
#FR_AUTOPOSITION               = 1  LSL  #FRB_AUTOPOSITION
#FR_AUTOSIZE                   = 1  LSL  #FRB_AUTOSIZE
#FR_NORESIZE                   = 1  LSL  #FRB_NORESIZE
#FR_OKTEXT                     = 1  LSL  #FRB_OKTEXT
#FR_FRONTSCREEN                = 1  LSL  #FRB_FRONTSCREEN
#FR_NOTEXTSHADOW               = 1  LSL  #FRB_NOTEXTSHADOW
#FR_REPLACEIMAGES              = 1  LSL  #FRB_REPLACEIMAGES
#FR_CANCELTEXT                 = 1  LSL  #FRB_CANCELTEXT
#FR_NEWFONT                    = 1  LSL  #FRB_NEWFONT
#FR_SCREENFONT                 = 1  LSL  #FRB_SCREENFONT
#FR_EXTENDEDSELECT             = 1  LSL  #FRB_EXTENDEDSELECT
#FR_INVERTLOOK                 = 1  LSL  #FRB_INVERTLOOK
#FR_HIDEWILD                   = 1  LSL  #FRB_HIDEWILD
#FR_NEWLOOK                    = 1  LSL  #FRB_NEWLOOK ; !!
#FR_NONEWLOOK                  = 1  LSL  #FRB_NONEWLOOK
#FR_SELECTLIST                 = 1  LSL  #FRB_SELECTLIST
#FR_SLSHOWNAMES                = 1  LSL  #FRB_SLSHOWNAMES ; !!
#FR_KEEPBUFFERS                = 1  LSL  #FRB_KEEPBUFFERS
#FR_EXTRABUTTONS               = 1  LSL  #FRB_EXTRABUTTONS
#FR_SELECTLISTTIME             = 1  LSL  #FRB_SELECTLISTTIME
#FR_DIRSONLY                   = 1  LSL  #FRB_DIRSONLY
#FR_USEPENS                    = 1  LSL  #FRB_USEPENS
#FR_DEFSIZES                   = 1  LSL  #FRB_DEFSIZES
#FR_NOAUTOSORT                 = 1  LSL  #FRB_NOAUTOSORT
#FR_DEVSLIST                   = 1  LSL  #FRB_DEVSLIST

#FR_SPECIAL2                   = 1  LSL  #FRB_SPECIAL2
#FR_SPECIAL1                   = 1  LSL  #FRB_SPECIAL1
#FR_INUSE                      = 1  LSL  #FRB_INUSE

;  Flags marked with !! above can be changed by the FR

#FR_STDFLAGS                   = (#FR_AUTOPOSITION|#FR_AUTOSIZE|#FR_NOINFO|#FR_SCREENFONT|#FR_HIDEWILD)

NEWTYPE .FileList ; Structure for returned multiple select
   *Nxt.FileList                         ; STRUCT  ; Pointer to next FileList structure
   private.l                             ; LONG    ; private -- do not use
   FileSyz.l                             ; LONG    ; File size
   FileDate.l                            ; LONG    ; Date stamp (in days since 1978)
   FileTime.w                            ; USHORT  ; Time stamp (in minutes since midnight)
   FileProtection.b                      ; UBYTE   ; Protection flags
   FileFlags.b                           ; UBYTE   ; Special file flags
   FileName.b[32]                        ; UBYTE   ; The file name itself
End NEWTYPE

; return codes for ExtraButton callback function

#EB_CONTINUE                   = 0 ; FR just continues
#EB_OK                         = 1 ; FR is OK'd and exits immediately
#EB_CANCEL                     = 2 ; FR is cancelled and exits immediately

NEWTYPE .ExtraButton
   *Nxt.ExtraButton                      ; STRUCT  ; pointer to next button
   flags.l                               ; ULONG   ; flags to define button
   *button_function.ExtraButton          ; ULONG
   ; function to be called when button is hit
   *text.b                               ; UBYTE   ; actual text of button, up to 10 chars
   *help1.b                              ; UBYTE   ; pointers to help lines
   *help2.b                              ; UBYTE
   *help3.b                              ; UBYTE

   *UserData.l                           ; VOID    ; for your use...
   *Win.Window                           ; STRUCT  ; current FR window.. read only.
End NEWTYPE


NEWTYPE .ExtraData
   *UpArrow.Image                        ; STRUCT  ; replacement image for Up Arrow
   *DnArrow.Image                        ; STRUCT  ; replacement image for Down Arrow
   *DiskNormal.Image                     ; STRUCT  ; replacement image for Disks
   *DiskSelected.Image                   ; STRUCT  ; replacement select image for Disks

   ; NO LONGER VALID... DO NOT USE
   *SizeStrip.Image                      ; STRUCT  ; replacement image for Size gadgets

   *oktext.b                             ; UBYTE   ; text to be used as OK text
   *canceltext.b                         ; UBYTE   ; text to be used as CANCEL text
   LeftEdge.w                            ; USHORT
   TopEdge.w                             ; USHORT
   Width.w                               ; USHORT
   Height.w                              ; USHORT


   *NewFont.TextAttr                     ; STRUCT  ; New font to use instead of Topaz 8

   ; THIS IS NOW OBSOLETE.. USE NextSelect()
   *ExtendedList.FileList                ; STRUCT  ; Always set to NULL at first call.
   ; If FR_EXTENDEDSELECT is set, this will
   ; return a linked list of FileList structs.
   ; WARNING!  DO NOT USE THIS ANYMORE...
   ; I MIGHT REMOVE IT FOR RELEASE 4.

   *Hide.b                               ; UBYTE   ; Hide wildcard pattern

   *SelectList.b                         ; UBYTE   ; Pointer to the internal Select List
   *NextEntry.b                          ; UBYTE   ; Pointer to next entry, used by NextSelectEntry()
   SelectListSize.l                      ; ULONG   ; Size of SelectList.. in bytes

   *Buff.b                               ; UBYTE   ; private storage for temp stuff
   *button.ExtraButton                   ; STRUCT  ; pointer to additional button, if exists

   pen0.b                                ; UBYTE   ; shadow pen
   pen1.b                                ; UBYTE   ; text pen  - file names
   pen2.b                                ; UBYTE   ; text2 pen - titles and info
   pen3.b                                ; UBYTE   ; text3 pen - directories

   width1.w                              ; SHORT   ; default FR sizes, these are only used..
   height1.w                             ; SHORT

   width2.w                              ; SHORT   ; if the FR_DEFSIZES flag is used.
   height2.w                             ; SHORT

   width3.w                              ; SHORT
   height3.w                             ; SHORT

End NEWTYPE


; Use this structure for the NewFReq() call
; This allows you to call the FR with just
NEWTYPE .FRequest ; one argument, a struct FRequest
   *scr.Screen                           ; STRUCT  ; Pointer to a screen structure
   *reqtitle.b                           ; UBYTE   ; Pointer to title text
   *filename.b                           ; UBYTE   ; Pointer to the filename buffer
   *directory.b                          ; UBYTE   ; Pointer to the directory buffer
   *fullname.b                           ; UBYTE   ; Pointer to the full path to the file
   *pattern.b                            ; UBYTE   ; Pointer to the pattern buffer
   flags.l                               ; ULONG   ; FR flags
   *extras.ExtraData                     ; STRUCT  ; pointer to an ExtraData struct
End NEWTYPE

;                   Copyright 1990-1992  Khalid Aldoseri.


