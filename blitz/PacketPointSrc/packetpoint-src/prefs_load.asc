;
; Routine zum Lesen der Einstellungen
;

If ReadFile (0,prefs$)
  FileInput 0

  While NOT Eof(0)
    If Edit$(5)="Call="
      username$=Edit$(999)
    EndIf
  Wend
   FileSeek 0,0
   While NOT Eof(0)
    If Edit$(8)="HomeBBS="
      homebbs$=Edit$(999)
    EndIf
  Wend
  FileSeek 0,0
  While NOT Eof(0)
    If Edit$(7)="prompt="
      prompt$=Edit$(999)
    EndIf
  Wend
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(9)="realname="
      realname$=Edit$(999)
    EndIf
  Wend
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(9)="nickname="
      nickname$=Edit$(999)
    EndIf
  Wend
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(8)="betreff="
      betreff$=Edit$(999)
    EndIf
  Wend
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(6)="datei="
      datei$=Edit$(999)
    EndIf
  Wend
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(8)="user_id="
      user_id$=Edit$(999)
    EndIf
  Wend
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(8)="keyring="
      keyring$=Edit$(999)
    EndIf
  Wend
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(12)="mailboxcall="
      mailboxcall$=Edit$(999)
    EndIf
  Wend
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(12)="mbxpasswort="
      mbxpasswort$=Edit$(999)
      mbxpasswort$=Cipher$(mbxpasswort$)
    EndIf
  Wend
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(8)="mbxpfad="
      mbxpfad$=Edit$(999)
    EndIf
  Wend
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(9)="software="
      software$=Edit$(999)
      software=Val(software$)
    EndIf
  Wend
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(7)="device="
      device$=Edit$(999)
    EndIf
  Wend
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(5)="unit="
      unit$=Edit$(999)
    EndIf
  Wend
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(5)="baud="
      baud$=Edit$(999)
    EndIf
  Wend
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(15)="keymitschicken="
      key_mitschicken=Edit(1)
    EndIf
  Wend
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(17)="passworterfragen="
      passwort_erfragen=Edit(1)
    EndIf
  Wend
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(7)="editor="
      editor_prefs$=Edit$(999)
    EndIf
  Wend
 pgp_path$=getenv{"PGPPATH"}
 FileInput 0
 If pgp_path$=""
   FileSeek 0,0
   While NOT Eof(0)
     If Edit$(9)="pgp_pfad="
       pgp_path$=Edit$(999)
     EndIf
   Wend
 Else
   pgp_path$+"/PGP"
 EndIf
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(11)="7plus_pfad="
      plus_path$=Edit$(999)
    EndIf
  Wend
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(13)="puffer_laden="
      puffer_laden$=Edit$(999)
    EndIf
  Wend
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(17)="puffer_speichern="
      puffer_speichern$=Edit$(999)
    EndIf
  Wend
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(9)="lifetime="
      lifetime_prefs$=Edit$(999)
    EndIf
  Wend
  FileSeek 0,0
   While NOT Eof(0)
    If Edit$(9)="passwort="
      passwort$=Edit$(999)
      passwort$=Cipher$(passwort$)
      passwort_ok=1
    EndIf
  Wend
  FileSeek 0,0
   While NOT Eof(0)
    If Edit$(12)="passwort_an="
      passwort_an=-1
      passwort_an$=Edit$(999)
      passwort_an$=Cipher$(passwort_an$)
      If passwort_an$ = "1" OR passwort_an$="0"
        passwort_an=Val(passwort_an$)
      EndIf
      If passwort_an = -1
        Request locale$(252),locale$(253),locale$(233)
        CloseFile 0
        End
      Else
        passwort_ok+1
      EndIf
    EndIf
  Wend
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(16)="signaturtrenner="
      signaturtrenner$=Edit$(999)
    EndIf
  Wend
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(7)="sig_ab="
      signatur_ab=Edit(1)
    EndIf
  Wend
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(5)="font="
      font$=Edit$(999)
      If font$=""
        font$="topaz.font"
        topaz=True
      Else
        topaz=False
      EndIf
    EndIf
  Wend
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(10)="fontysize="
      fontysize=Edit(80)
      If topaz=True
        topaz=False
        fontysize=8
      EndIf
    EndIf
  Wend
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(8)="wbstart="
      wbstart=Edit(80)
    EndIf
  Wend
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(12)="screendata1="
      screendata1.l=Edit(80)
      screenprefs=True
    Else
      screenprefs=False
    EndIf
  Wend
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(12)="screendata2="
      screendata2.l=Edit(80)
      screenprefs=True
    Else
      screenprefs=False
    EndIf
  Wend
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(12)="screendata3="
      screendata3.l=Edit(80)
      screenprefs=True
    Else
      screenprefs=False
    EndIf
  Wend
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(12)="screendata4="
      screendata4.l=Edit(80)
      screenprefs=True
    Else
      screenprefs=False
    EndIf
  Wend
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(12)="screendata5="
      screendata5.l=Edit(80)
      screenprefs=True
    Else
      screenprefs=False
    EndIf
  Wend
 FileSeek 0,0
   While NOT Eof(0)
    If Edit$(12)="screendata6="
      screendata6.l=Edit(80)
      screenprefs=True
    Else
      screenprefs=False
    EndIf
  Wend
 CloseFile 0

  If passwort_ok <> 2
    Request locale$(252),locale$(253),locale$(233)
    End
  EndIf
EndIf

