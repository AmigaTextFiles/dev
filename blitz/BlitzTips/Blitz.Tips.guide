@database 00318ef0-5
@master Blitz.Tips.guide
@$VER: 1.0
@author "Curt Esser"
@(c) ""
@remark Created with Heddley v1.1 (c) Edd Dumbill 1994

@node "Main" "Blitz Tips"
   
                       BLITZ TIPS GUIDE  v1.0       8/97                  

                           @{"   About this Guide   " link "About" 0}


   @{" ASCII Key Codes      " link "ASCII codes" 0}  @{" Banks                " link "Banks" 0}  @{" Blitz-List           " link "Blitz-list" 0}
   @{" Center Window        " link "Cntr Window" 0}  @{" ChDir Command        " link "ChDir" 0}  @{" CON  Window          " link "Con" 0}
   @{" Control Tasks        " link "Control.Task" 0}  @{" Copper $tring        " link "Copper$" 0}  @{" Copper Mouse         " link "Copper Mouse" 0}
   @{" CGX DoubleBuffer     " link "CGX DoubleBuffer" 0}  @{" Decrease Bitplanes   " link "Decreasing Bitplanes" 0}  @{" Dos & Arexx Commands " link "Dos Commands" 0}
   @{" Empty Menu Bar       " link "Empty Menu Bar" 0}  @{" Fast Multiply        " link "Fast Multiply" 0}  @{" File Comments        " link "File Comments" 0}
   @{" Find Screen          " link "Find Screen" 0}  @{" Find Task            " link "Find Task" 0}  @{" Find Colours         " link "Find Colours" 0}
   @{" Font Questions       " link "Fonts" 0}  @{" Functions            " link "Functions" 0}  @{" GT Questions         " link "GT questions" 0}
   @{" HAM Screen           " link "Ham" 0}  @{" Headers              " link "Headers" 0}  @{" IFF's                " link "IFF's" 0}
   @{" INC BIN              " link "INC.bin" 0}  @{" Menu Problems        " link "Menus" 0}  @{" Modem Example        " link "Modem" 0}
   @{" Newtype Arrays       " link "Newtype Arrays" 0}  @{" Overscan Mouse       " link "OverScan Mouse" 0}  @{" Parsing Strings      " link "Parsing Strings" 0}
   @{" PC to Amiga          " link "PC to Amiga" 0}  @{" Pointers             " link "Pointer" 0}  @{" Progress Indicator   " link "Progress Indicator" 0}
   @{" Palette Fading       " link "Palette Fade" 0}  @{" Program Speedup      " link "Speed" 0}  @{" Qblit & Bblit        " link "Qblit & Bblit" 0}
   @{" ReqTools Requestors  " link "Req" 0}  @{" Requestor Taglist    " link "Requestor Tags" 0}  @{" Front Screen         " link "FrontScreen" 0}
   @{" ROL & ROR            " link "ROL" 0}  @{" Runtime Error        " link "RunErr" 0}  @{" Speedup Tips         " link "Speed" 0}
   @{" No Screen Title      " link "NoTitle" 0}  @{" Shape's Palette      " link "Shape Palette" 0}  @{" Screen Scrolling     " link "Scroll" 0}
   @{" Screen Tags          " link "ScreenTags" 0}  @{" Shapes & Sprites     " link "Shp.Sprt" 0}  @{" Superbitmap          " link "Superbitmap" 0}
   @{" Taglist for ASL      " link "Taglist for ASL" 0}  @{" Version $tring       " link "Ver$" 0}  @{" Variables            " link "Variables" 0}
@endnode

@node "About" "About this Guide"

  This Guide was put together by Curt Esser <camge@ix.netcom.com>

  It consists of useful bits of information I have collected from the 
  
  Blitz-List and saved for my own use.  While digging through the drawer
 
  full of tips, I thought - this would be much easier if it was all put

  together in a guide file! - so here it is.  I hope it will be of some 

  use to you.


  PLEASE NOTE:  USE THESE TIPS AT YOUR OWN RISK!  THESE TIPS ARE PRESENTED

  FREE OF CHARGE, AND NEITHER I NOR THE AUTHORS OF ANY OF THE TIPS ARE IN

  ANY WAY RESPONSIBLE FOR ANY PROBLEMS OR DAMAGES YOU MAY HAVE FROM USING

  OR ATTEMPTING TO USE THEM.

  These tips were gathered from the letters sent to the Blitz-List and I have

  presented them pretty much as-is, only removing the un-necessary parts

  (duplications, mailing headers, etc.)  I used Heddley to make up this guide


  file, and unfortunately Heddley sometimes does funny things with empty 

  spaces and carriage returns, especially on source code examples.  I think I

  have gotten everything straightened back out again, but be careful!  I may

  have missed something.  If you find something wrong, please let me know!

  Also, Heddley tends to scramble the signature blocks, so don't be offended

  if you see one of your tips here without your complete signature block -

  sometimes it was messed up so bad I had no choice but to leave it off.

  You may use and distribute this guide as you wish, everything in it was 

  sent to the mailing list which is accessable to all, so I don't see any

  copyright problem with this.


  I hope you find this of some use!



                                              Curt Esser         8/97
@endnode

@node "ASCII codes" "ASCII Key Codes"
Edward Farrow wrote:  

> I was wondering if anyone has a list of keys and their decimal character   
> number (a'la Chr$(n)).
                                                                             
The quickest way to idenfity the values of keys for use with CHR$ is to run a 
test program and write down the results yourself.  Use something like this:  


Repeat
 NPrint Asc(Inkey$)  
 Until Joyb(0)=1                                                             
 End

The above program will show you each key code that you press. Click the LMB to
quit the program.  (Also, this program is CLI-Only, in case you didn't know).

-- 

Regards, Paul.

E-Mail Address: cat@aic.net.au                                               
Amiga Web Site: http://www.aic.net.au/~cat/

Frank Otto wrote:

> how can I check if a key like Esc or Shift is pressed?

The following code will detect a keypress in any mode, any time, any place,
anywhere.  :)  You'll have to make a list of your own values though, by
trial-and-error.

key.w=Peek($bfec00) AND $ff

Actually, I can tell you now that ESC returns 117.  :)  I think the "KeyCode"
command returns the same values, but the code above is smaller in your final
executable.

-- 

Regards, Paul.
@endnode

@node "Blitz-list" "About the Blitz-List"
The Blitz-List:

                  AVAILABLE COMMANDS WITH THIS LIST                           
                  ---------------------------------                           
To use these commands, mail to: blitz-list-request@netsoc.ucd.ie

This mailing list is run by a script called SmartList. It basically splits 
each mailing list into two seperate list - the actual mailing list and another
list that commands are sent. In this case the mailing list address is
"blitz-list@netsoc.ucd.ie" and the commands list is 
"blitz-list-request@netsoc.ucd.ie".                                           
Commands have to be in the "Subject:" line of the message.                    
Anything in the normal body textis ignored.

 SmartList understands the following commands :-

     subscribe
          Subscribe yourself to the list.

     unsubscribe 
          Unsubscribe yourself from the list.

     help
         Get sent a helpfile.

     archive help
         Get sent the archive helpfile.

All mail sent to blitz-list is archived. If you would like to get any old mail
you can obtain it from the archive/latest/directory. The messages are numbered
(until I can find an easy way to thread the mails together!). To retrieve them
first read the archive helpfile.

By default, copies of your own submissions will be returned.

                       WELCOME TO THE BLITZ-LIST !                            
                       ---------------------------                            
This list is for any kind of conversation, news and questions concerning Blitz
Basic 2.

               --------------------------------------------
               List's address is: blitz-list@netsoc.ucd.ie               
               --------------------------------------------


                   HOW TO REPLY TO BLITZ-LIST'S MESSAGES                      
                   -------------------------------------                      
Since november 95 there is following header in all messages which are sent to
the list: "Reply-to: blitz-list@netsoc.ucd.ie".

This means that the easiest way of replying to the list is to just use your
mailsoftwares "reply" command. On the other hand, if you want to do a private
reply to the original sender, you'll have to  take the address from message's
header.

Some mail packages (e.g. Pine) ask you to which address you
want your reply to be posted to when you are sending the mail.


                                   RULES                                      




                                   -----                                      
There aren't any rules about what should be posted to the list, but some
messages are bounced by
listserver:                                           

- messages containing more than 7000 chars                                    
- messages with administrative contents (subcribtions etc.)


                      POLITENESS TO OTHERS ON THE LIST                        
                      --------------------------------                        
- As the list is unmoderated, the importance of politeness and good
  "netiquette" is not to be underestimated. As many people have to 
  pay for their email and even those, who have free email don't 
  usually want to receive lots of "junkmail", please note the following:

- Please don't take part to threads which aren't Blitz related. 
  While many may find the thread interesting, the other half may find it 
  very irriating having to read about the subject from this forum, which 
  should be dedicated to Blitz.

- When you reply to the list, please don't quote whole message to which 
  you are replying, as this is pure waste of bandwith & diskspace. 
  Instead find out how to cut text in your mail software's editor and 
  just quote the part which is important for understanding the reply. 
  In emacs, CTRL+k cuts one line and Esc, CTRL+w cuts one paragraph 
  (text section surrounded with empty lines).


                                    BUMS                                      
                                    ----                                      
If you have sent your registration card, you should receive a letter from Acid
telling you to whom to turn in your part of the world in order to subscribe
it. If you have sent your card a long time ago but there's no letter, I
suggest you ask about it from Acid via the list.


                                  FTP SITES                                   
                                  ---------                                   
There are couple of sites you can check for blitz stuff: 
  
  x2ftp.oulu.fi
  
  The login procedure is as follows:
  
  Username: anonymous
  Password: <your email address>
  
 ...and you're in. Then cd to pub/amiga/prog/blitz ,
change your datamode to "binary" and download all the stuff you want. It's
easy to automize the login procedure if you are using Unix (see manual
page for .netrc) or if you can use Arexx.

another one is:

   ftp.ee.port.ac.uk /pub/blitz (use the same login procedure)


                            USENET NEWSGROUPS                                 
                            -----------------                                 
Blitz newsgroup has been started. It's name is: 
 
                           -------------------
                           alt.sys.amiga.blitz                          
                           ___________________

This newsgroup is linked with blitz-list so that every message, which is
mailed to the list, will be mailed to the newsgroup as well.


                              WORLD WIDE WEB                                  
                              --------------                                  
Check the following www-pages:

http://sun1.bham.ac.uk/cca93057/ProgPage.html (Mark Tiffany) http://phymat.bha
 m.ac.uk/BaxterMA/me.html (Mark Baxter) http://www.helsinki.fi/~mmmakela/


let me know, if you want your own page mentioned here !




                          LIST OWNER'S EMAIL ADDRESS                          
                          --------------------------                          
If you have problems with list, you can send me email: daireb@netsoc.ucd.ie

That's it, keep on Blitzing !

Daire Byrne '97
@endnode

@node "ChDir" "ChDir Command"
On 13-May-97, AJD wrote:

  Please, I'd love to be able to scan directories like this,
but I can't get the example code to work (I have got the elmore dos
library). It seems that the ChDir command does not work for me.. any ideas?
I'm using an '030 with 3.0 & I think I'm using v 2.2 of the library (I have
the docs for 3.2). I have tried getting this to work on many occasions..

  And you never will ;-/  The library was changed from (I think
from Bum 8 to 9) but the old documentation was still in Bum9 :-<
Sounds like you're using the Bum 8 docs with the Bum 9 library. To make it
worse, the ChDir shows up as an command, but doesn't work. 

 Try this:

Examine( "ram:")             ; replaces ChDir in new lib

While MoreEntries            ; check if there's any more entries

    File_Name$=EntryName$    ; get its name
    If EntryDir              ; check if its a directory
        Print "Dir: "
        NPrint File_Name$
    Else
        NPrint File_Name$
    EndIf

Wend

MouseWait End

-- 
            Anton Reinauer <anton@ww.co.nz>
  Machine:  A500,DF1:,1MC,8MF,60HDD,WB3.1 &1.3/2.0
            - Now with gigantic new disk box!
  Project:  Pyromid - status [C***L! ]
  Webpage:  http://www.ww.co.nz/home/anton
@endnode

@node "Cntr Window" "Center Window and get Font Height"
On 05-Jun-97 09:22:45, Bruce Henderson wrote...

 BH> What I'm TRYING to do is get the System-font height from the WB-screen. 
 BH> I don't believe I've got the hang of this (*) pointer thing yet.

Well have a look atthis. It basically does what you what (I
think) - I'm a little rusty on all this Blitz stuff, not that I was very
cluded up to start with...

;--------------------------------------------------

.screen                             ; get our screen objects' structure

*scr.Screen=Peek.l(Addr Screen(0))

Let fsize=*scr\BarHeight-10                                                  
myfont$=Peek$(*scr\Font\ta_Name)                                             
fontsize.w=*scr\Font\ ta_YSize                                               
Let myfont=fontsize-8               ; determine title

bar height

If win_x>(*scr\Width-#GUI_WIDTH)     ; centre window if x/y positions
  win_x=(*scr\Width-#GUI_WIDTH)/2    ; exceed
  screen width/height EndIf If win_y>(*scr\Height-(#GUI_HEIGHT+myfont))
  win_y=(*scr\Height-(#GUI_HEIGHT+myfont))/2 EndIf

;--------------------------------------------------

Just a few pints though...

1. Don't ask me how this works /exactly/ it just does
and that's good enough for me. :)

2. The #GUI_WIDTH and #GUI_HEIGHT constants are my own
- not created by Blitz/os etc. They are of course self explainitory
as all constants and variables should be. ;)

3. This code also gives the variables win_x and win_y
the positions to center the program on-screen. I found the commands from
the manual were unreliable when used with non-standard screen sizes.

4. The bit u r interested in is 'myfont' which is the
fon'ts height less 8, which is used later when opening your window to ensure
the title bar is the correct height. I think.

5. If I'v made any mistakes here can someone let me know? ;-)

Bye now,

   __
  /__)     /              // E-mail:  paul@blitzer.demon.co.uk //
 /   AUL  /__ATHWELL     // http://www.blitzer.demon.co.uk    // _ _ _
_ _ _ _ _ _ _ _ _ // IRC: Blitzer_                     //
@endnode

@node "Banks" "Using Banks"
> Hello,


>I would like to load 1 mod, 1 module, 2shapes file, and 1 palette in to
banks, and save these banks into 1 file, like LEVEL1.DATA, and when I load the
bank I should have a way of seperating the data to diffrent banks. I already
use the ENCRYPT and DECRYPT commands to protect my files

Quite easy actually. Just use a FileHeader :

NEWTYPE.FileHeader
   Mod1Pos.l       ; Offset in file for module#1
   Mod2Pos.l       ; Offset in file for module#2
   Shp1Pos.l       ; Offset in file for Shape#1
   Shp1Len.l       ; Lenght of Shape#1 file
   Shp2Pos.l       ; Offset in file for Shape#2
   Shp2Len.l       ; Lenght of Shape#2 file
   Bmp1Pos.l       ; Offset in file for BitMap#1
   DataPos.l       ; Offset in file for LevelData
   DataLen.l       ; Lenght of DataFile End NEWTYPE

Mem.l = Start(0)                                                             
*Header.FileHeader = Mem DecodeModule 0,Mem + *Header\Mod1Pos   CludgeBitMap
0,320,256,8,Mem + *Header\Bmp1Pos       You can encrypt the whole file, and
decrypt it once you've loaded it.

For CludgeShapes you need to know the number of shapes. You can save this in
the header also, but there is also a way to find out with the data :

Shp_Count.w = 0                                                              
Offset.l    = 0                                                              
While Offset <= *Header\Shp1Len                                              
   Shp_Size = Peek.w(*Header\Shp1Pos+Offset+26)                              
   Offset + Shp_Size + 32                                                    
   If Offset <= *Header\Shp1Len Then Shp_Count + 1                           
Wend                                                                         
CludgeShapes 0,Shp_Count,*Header\Shp1Pos                                     
                                                                             
To create a file is just as easy :

First you need to know the size the file is going to be. To find this out,
just add up all filesizes of the files you're going to use, and store it in
Total_Size.l

HeadSize.w = SizeOf.FileHeader                                               
Total_Size + Head_Size                                                       
InitBank 0,Total_Size,65536                                                  
Mem.l = Start(0) *Header.FileHeader = Mem                                    
Offset.l = 0                                                                 
FILENAME$ = "module#1.mod"                                                   
FSiz.l = FileSize(FILENAME$)                                                 
If BLoad(FILENAME$,Mem+Head_Size+Offset)                                     
  *Header\Mod1Pos = Head_Size + Offset                                       
  Offset + FSiz                                                              
Else                                                                         
  Nprint "Error reading file"                                                
  End                                                                        
endif                                                                        
FILENAME$ = "module#2.mod"                                                   
FSiz.l = FileSize(FILENAME$)                                                 
If Bload(FILENAME$,Mem+Head_Size+Offset                                      
  *Header\Mod2Pos = Head_Size + Offset                                       
  Offset + FSiz                                                              
Else                                                                         
  Nprint "Error reading file"                                                
  End                                                                        
Endif                                                                        
FILENAME$ = "Shapefile#1.shp"                                                
FSiz.l = FileSize(FILENAME$)                                                 
If Bload(FILENAME$,Mem+Head_Size+Offset                                      
  *Header\Shp1Pos = Head_Size + Offset                                       
  *Header\Shp1Len = FSiz                                                     
  Offset + FSiz                                                              
Else                                                                         
  Nprint "Error reading file"                                                
  End                                                                        
Endif                                                                        
                                                                             
Well you get the idea... Just encrypt it before writing...

Good Luck,

Serge Veugelers



 - THE QUALITY TEAM -    (sergev@cistron.nl)
@endnode

@node "Con" "Output to Con: window"
On 13-Jun-97, Paul Lathwell wrote:                                           
>Hi,

>My current project requires to output data to a window and I thought it may
>be easier just to use the CON: device using a routine based upon the program
>below...


>WBStartup                                                                   
>Use Screen 0                                                                
>If WriteFile (2,"CON:0/230//320/Rictor Output/CLOSE")                       
> FileOutput 2                                                               >
Print "Hello World"      ; just some test data                             >
Delay_5                                                                     >
MouseWait                ; for the purpose of this test prog               >
CloseFile 2              ; close the file afterwards.                     
>Else                                                                        
> BeepScreen 0             ; if there is a problem opening the file         
>EndIf                                                                       
>End


>...Now the only problem I have with this is that that data is not displayed
>until you hit a mouse button, but this also closes the file and therefore the
>CON: window is closed. I've tried various additions to the Print "Hello
World" >including the fllowing which I thought may be the cause of my
problems...

blitz uses buffered file output, so the output isn't displayed until the
buffer is full.  Try setting the buffer size to 0 with DosBuffLen to make
output go directly to the file (and thus to your window).



Steve Mc. Red When Excited Ltd.


                        --------------------------
@endnode

@node "Control.Task" "Break a running task"
I watched as Dave Fisher entered 'Breaking a running task' into the terminal.

 DF> When run from a CLI  window, its simply a CTRL-C to stop it. Now I'm
 DF> running it from the GUI, I'm  not sure how I'd issue the CTRL-C to the 
 DF> task. I obviously must "RUN" the task rather than just execute it, IE 
 DF> Execute_ "RUN >NIL:c:mpega....."
 DF> rather than Execute_ "c:mpega...." as I won't be able to take anymore
 DF> user input, IE a click on the stop button. Any one got any ideas ?


Well lets try something like this:

*task.Process = FindTask_("mpega") ; or whatever the name of the executable is
If *task                           ; if the task is found...
  Signal_ *task,#SIGBREAKF_CTRL_C  ; ...send a break                          
Endif

That should do it.

  'Run' ing the application will then allow your gui to multitask. This way
the STOP gadget can have an effect.

---

  Blitz User No: 532      ~~~~~          sa@thenet.co.uk
                          -O-O-                or
                         [  O  ]    simon@darkside.demon.co.uk
       Team *AMIGA*         \ = /      Of   Creative Software In memory of
Rick Lembree  \_/
@endnode

@node "Copper$" "Custom Copper String"
At 15:03 5-06-97 -0100, you wrote:                                            
>I need some examples about using CustomCop$.                                 
>Blitz's manual reports  that "CustomCop$ string: string is a string         
>representing your copper instructions...". No examples about how made        
>is the string!!! 

 The string is simply a representation of the coplist, so instead of just
putting in characters, you need to put words in the string. This can be done
with Mki$() :

#COLOR00 = $180 #COLOR01 = $182 #COLOR02 = $184

Cop$ = Mki$(#COLOR00)+Mki$($0000)         ; Change Color#0 to $000 (black)   
Cop$ + Mki$(#COLOR01)+Mki$($0FFF)         ; Change Color#1 to $FFF (white)   
Cop$ + Mki$(#COLOR02)+Mki$($0F00)         ; Change Color#2 to $F00 (red)
etc...

If you use the display-library, you'd better use CustomString. You have to
reserve a few coplines for every scanline though. The number of coplines you
need to reserve is (2+(Len(Cop$)/4)) * -1 (i.e. make negative)

Bye now,

Serge Veugelers
 ########    - THE QUALITY TEAM -    (sergev@cistron.nl)
 | ~  ~ | oO|  Serge Veugelers       (Coding)                | C| 0  0 |D  |
Raymond Zachariasse   (Graphics)              |
 |  {}  |   |=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-|
 |  ~~  |   | Current projects : BrainTeaser : Puzzle   (10%)|
 ~~~~~~~~   |                    IRQBlit     : Blitzlib (20%)|
 ||||||||    ------------------------------------------------ Additional
Coding : Vittorio Ferrari -------------------------------------------- (A)bort
(R)etry (I)nfluence with large hammer
@endnode

@node "Copper Mouse" "Copper Mouse"
Andreas Håkansson wrote:                                                    
>I'm programming in blitz mode, and I want a pointer to be displayed. i have
>turned on  mouse readings  with  #Mouse  On#,  and  I have found the
>#Pointer > Sprite,Sprite Channel#  commands,  but  it  only works  with
>slices

You are right with Mouse On. This lets you read MouseX and  MouseY values.


So just use DisplaySprite CopList#,Sprite#,MouseX,MouseY,SpriteChannel#

See you,

Liz.
 
                  Member of *Desktop Corruption*
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 tucks@pavilion.co.uk         projects:  BlitzMAP  complete
 A1200T 10meg 850hdd                     Swarm     10%
@endnode

@node "CGX DoubleBuffer" "Double Buffered Window for CyberGraphics"
Hi Curt,

>I would be very interested how you were able to do double-buffered          
>drawing using just a window? And how do you change the "viewing area" from
>the top of the window to the bottom (and back)?

There are two main ways to double buffer with the AmigaOS. The best way is to
use the AmigaOS double buffering which is a method that I have not tried. The
reason I've not used that system is because the CyberGraphX system doesn't yet
support it. For me, I found the Blitz method of bitmap swapping to be enough.

The second mrthod which is the one I use and the one that works with CyberGFX
is to open a screen that is twice as high as the view. A common CyberGFX
screen is 640x480 so I would open a 640x960 screen. Then you can either open
one very tall window or two windows for each half. Render your graphics to the
hidden half and then switch the views using somthing like:-

;Our screen is 640x960 but the variables ScrW and ScrH are                    
;setup with 640x480 which is the actual view size.                           
Statement show_bitmap{}                                                      
  SHARED ScrH,ScrW                                                           
  *vp.ViewPort=ViewPort(0)              ;ViewPort of screen
  rast.w=*vp\RasInfo\RyOffset           ;Y Offset of Screen

  If rast=0 Then rast=ScrH else rast=0  ; toggle from top/bottom

  *vp\RasInfo\RyOffset=rast             ; Setup new offset pointer
  WaitBOVP_(*vp)                        ; Wait till bottom of ViewPort
  ScrollVPort_(*vp)                     ; Now Scroll to new possition!       
End Statement                                                                


What I have just explained is ALL you need to know in order to create a double
buffer CyberGraphX compatable game. Obviously you'll need to render graphics
using system calls that can be redirected to the GFX card. Something like
WBlit would work fine. If you're game doesn't need super fast update ie, 12fps
or less then you can easily cheat by rendering everything to normal bitmaps
using normal blitz commands like BBlit, ClipBlit etc.. Then the bitmap can be
copied with BitMapToWindow at the end of each frame. This is prety fast on
lowres screens. You could easy write a 12fps game using that system.

Cheers,

Paul

--  <----------------------------------------------------------------->
    Paul Burkey - Project: Foundation [###############-----] 79%
   paul@sneech.demon.co.uk -- Amiga Realtime Strategy Wargame --
  Foundation Home  http://www.sadeness.demon.co.uk/foundation.html
<----------------------------------------------------------------->
@endnode

@node "Decreasing Bitplanes" "Decreasing Bitplanes"


On Sun, 10 Aug 1997, Andreas Håkansson wrote:

> and  blit  my  object on a seperate bitmap and save it. The only  problem is
>that I only want  the  mask  bitmap  to  be  in  one  bitplane  (2 colors),
>but I can't do that because then I get an  error saying "Shape has got  too
>many  bitplanes".
                                                           

  I'm not sure if this will work Andreas, but you could play
  with the following idea:

     BitMap 4,320,256,6
     BitplanesBitmap 4,5,$01 ;From the above bitmap, establish a 1 
                             ;bitplane bitmap
     Use Bitmap 4 : Cls 0
     BlitMode SolidMode
     Blit your shapes .......
     Use BitMap 5           ;setup to get shapes from the 1 bitplane
     Do your GetaShape commands .... 
   
  Note: this example is for a 6 instead of 8 bitplane, but
        I think will could work with an 8 bitplane too.

I hope this is of some help

Tom
@endnode

@node "Dos Commands" "Dos Commands"


>I'm using Execute_ to run some executable programs but that doesn't work in >
the following:                                                                
> Execute_ "rx wibble.rx"0,0                                                 
                          ^
                         ","

Please try execute_ "rx wibble.rx",0,0

> I didn't really expect it to but it was worth a try.  Anybody have a method
> of running these scripts?

Your experiment was right - execute_ "RX xxx.xxx",0,0 should be  successfull,
perhaps you've forgotten "," after "....rx" - s. a.

Bye...Armin...
   _ __ _  /\___________________________________________________/\  _ __ _
       .:\/ http://insider.regio.net/ecs - Electronic Schmidhuber \/:.
.:_______|   08628/988998 (V.34) - 988997 (V.34) - 988988 (ISDN)   |_______:.
         |        Time Warp BBS - LoRay@timewarp.insider.org       |
          ---------------------------------------------------------


---- Blitz Basic mailing list -- Brought to you by daireb@netsoc.ucd.ie
@endnode

@node "Empty Menu Bar" "Empty Menu Bar"
 On 30-Jul-97, Paul Burkey wrote:

> I'm >drawing my graphics direct to the screen via a window and for some     
>reason my screen seems to have an empty menu that never used to be there.   
>To explain myself fully... When you hold the right button down the title bar
>becomes active.

>Is it the window that is causing this empty Menu to show up?

Yes!  You might try the Menus Off command.
                                          

                                            Yours electronically,
                                            Curt Esser
                                            camge@ix.netcom.com
@endnode

@node "Fast Multiply" "Fast Multiply"
> What about the maths commands? Stuff like multiplying/dividing/raising to >a
power/rooting. Could (has)  that be (been) made any faster?

Use shifts instead of multiplies/divides, if your multiplying/dividing by a
power of two (2,4,8,...)

To multiply by 9, try i LSL 3 + i,  to multiply by 12, i LSL 3 + i LSL 2,
etc.

I did a test earlier for z*45, seeing how fast this was...

ResetTimer                                                                    














 For i.l=1 To 200000
  MOVE.b  test,d0
  !EXTB{0}
  MOVE.l  d0,d1
  LSL.l   #5,d0
  SUB.l   d1,d0
  LSL.l   #4,d1
  ADD.l   d1,d0
  LSR.l   #3,d1
  SUB.l   d1,d0
  MOVE.l  d0,test2                           ; 35 ticks                      
; answer.l=z LSL 5 +z LSL 4 - z LSL 1 - z   ; 60 ticks                       ;
answer.l=z*45                             ; 100 ticks                      
 Next

As you can see, the assembly was fastest, but even just using LSL is about
twice as fast as a multiply. Though you can't use GetReg/PutReg, because
they're are very slow.

Cheers,

Julian Kinraid jkinraid@clear.net.nz


---- Blitz Basic mailing list -- Brought to you by daireb@netsoc.ucd.ie
@endnode

@node "File Comments" "File Comments"


 joj> what i really want to do thou is to read the file comment on a
 joj> particular
 joj> file and be able to display it to the user.
 joj> Is this possible in blitz

There may well be a Blitz'y way to do this, but in pseudo code:

mylock.l = Lock_("Sys:my_File",#ACCESS_READ) If mylock ; locked OK
  *myFIB.FileInfoBlock = AllocMem_(SIZEOF .FileInfoBlock, #MEMF_ANY)
  If *myFIB ; alloc'ed memory OK
    If Examine_(mylock,*myFIB) ; examined OK
      NPrint "Comment: ",peek$(*myFIB\fib_Comment) ; the comment!
    EndIf
    FreeMem_ *myFIB
  EndIf
  UnLock_ *mylock EndIf

That's not pseudo, hell it may even run! ;)

---

  Blitz User No: 532      ~~~~~          sa@thenet.co.uk
                          -O-O-                or
                         [  O  ]    simon@darkside.demon.co.uk
       Team *AMIGA*         \ = /      Of   Creative Software In memory of
Rick Lembree  \_/
@endnode

@node "Find Screen" "Find Screen"
On 26-Jun-97 15:36:56, Stephen McNamara wrote...

>>I have a simple program which has a configuration file. In this
>>configuration, I wish to have an option for the user to set what screen my
>>program's window will open on, so far so good. Right so I use the FindScreen
>>command specifying the screen's name... <snip>

 SM> If the screen you're finding is a public screen then you can do:

 SM>    if LockPubScreen_("Voyager")
 SM>          FindScreen 0,"Voyager"
 SM>          UnLockPubScreen "Voyager"   
 SM>    endif

Hmmm that may just be enough for what I want to do. This is not exactly a
wonderful application I've knocked up, just a simple and quick to use util.


   __
  /__)     /              // E-mail:  paul@blitzer.demon.co.uk //
 /   AUL  /__ATHWELL     // http://www.blitzer.demon.co.uk    // _ _ _ _ _ _ _
_ _ _ _ _ // IRC: Blitzer_                     //

---
@endnode

@node "Find Task" "Find Task"
On 21-Jun-97, Andreas Håkansson wrote:


>And do some1 know how I can from my Blitz program find out if another
>program is running? I have tried FindTask_() but it always returnes the >same
thing, even if the task isn't running.

Try it this way.  This works on my system:

WBStartup

y.w= FindTask_("Yam")                                                        
d.w= FindTask_("Dpaint")                                                      
NPrint "y=",y,"     d=",d                                                    
Ify>0
  NPrint "YAM Running"                                                       
Else
  NPrint "YAM not found" EndIf

If d>0
  NPrint "Dpaint Running"                                                    
Else
  NPrint "Dpaint not found"                                                  
EndIf

MouseWait End

It needs the quotes on the task name, and also seems to be case sensitive. For
example:

Findtask_("YAM") does not work for me  Always gives me 0 Findtask_(Yam) also
does not work but it doesn't give a syntax error.

It should give you 0 if the task is not running, and a positive number if it
is.

You may need to experiment to find the correct name of the task you are
looking for.

-- 
                                            Yours electronically,
                                            Curt Esser
                                            camge@ix.netcom.com
@endnode

@node "Find Colours" "Find Colours"
On 30-Jul-97, Xavier NUEL wrote: 

>   I'm working on an Image Processing program (wich is already on Aminet and
>on my Homepage) and I just want to know if anybody know how to find the most
>nearly color coded with R-G-B in a palette from a picture.

>   I'll try to explain better:

>   If I've want to find the best colour for $000000 (pure black) in a 4
>colour palette $FF0000 ,$00FF00 ,$0000FF, $112233 (for example), how can I do
>this?

One possible way is :

mycolour.l=$000000                                                           
myred.w=(mycolour AND $ff0000) ASR 16                                        
mygreen.w=(mycolourAND $00ff00) ASR 8                                        
myblue.w=(mycolour AND $ff)
myvalue.l=(myred*myred)+(mygreen*mygreen)+(myblue*myblue)                    
closest.l=$FFFFFF                                                            
closestcolour.b=0                                                            
For n.l=0 to numcolours
  r.w=AGAPalRed(n)
  g.w=AGAPalGreen(n)
  b.w=AGAPalBlue(n)
  thisvalue.l=(r*r)+(g*g)+(b*b)
  If Abs(thisvalue-myvalue)<closest
   closest=Abs(thisvalue-myvalue)
   closestcolour=n
  EndIf                                                                      
Next n


Steve. --
.-----------------------------------------------------------------------------
. |Red When Excited Ltd    | WWW            http://www.ldngedge.demon.co.uk |
|2 Slimmons Drive,       | My EMail Big.Will.Riker@ldngedge.demon.co.uk | |St.
Albans,             | A1200T/040@40/18Mb/1.6Gb/33.6k/8xCDROM/1.76MbFD    | |
|Herts. AL4 9AS. ENGLAND | Company EMail  redwhen@ldngedge.demon.co.uk |
`-----------------------------------------------------------------------------























   Steve, your code is more faster than my own code, and near its. I don't
know why I don't made it like yours...

   Mine is :

   m=255
   For cc=0 to NColour
     m1=Max(Abs(AGARed(cc)-R),Abs(AGAGreen(cc)-G))
     m1=Max(m1,Abs(AGABlue(cc)-B))
     If m1>Tolerance  ; <---Searching tolerance
       color=cc
       Pop For
       Goto out
      Endif
     if m1<m
       m=m1
       color=cc
     Endif
   Next
   out:

   For more speed, I use a table like this :
   
   Newtype.col
      b.w
      colour.w
   End Newtype

   Dim ColourFind(255,255).col

   And I can store the result from the research in it.
   I'm not sure this is the best method to do this,
   but it works...

   Simon, I will try what you was explain to me...
   I hope it will be more faster than my code...

Again , Big thanks to you !!!
  -- 

Xavier.

-----------------------------------------------------------------------------

I know from reading the autodocs that the internal FindColor_ command uses an
x^2 formula to calculate the nearest match.  If you are colour remapping an
entire picture then you should store them in a lookup table to greatly speed
things up.

Heres the code I wrote for my program.

Function.l MatchRGB{r.l, g.l, b.l}                                            
SHARED *scr.Screen                                                            
best.l = 1000000                                                              
d = 2^*scr\_BitMap\Depth                                                      
Repeat                                                                        












  diff.l =Abs(AGARed(a)-r)^2+Abs(AGAGreen(a)-g)^2+Abs(AGABlue(a)-b)^2        
  If diff <= best Then best = diff : bestcol.l = a
  a + 1                                                                       
Until a=d OR diff=0                                                           
Function Return bestcol.l                                                     
End Function

      PaletteInfo 2

      Use BitMap 1

      ncol = 2^ILBMDepth
      Dim stored2.l(ncol)
      For a = 0 To ncol-1
        stored2(a) = -1
      Next

      For y = 0 To ILBMHeight
        CheckButtons{}
        For x = 0 To ILBMWidth
          c = Point(x,y)
          If stored2(c) = -1
            stored2(c) = MatchRGB{AGAPalRed(c),AGAPalGreen(c),AGAPalBlue(c)}
          EndIf
          Plot x,y,stored2(c)
        Next
      Next

That should do it.

--  Cheers,
     ___   ___   ____________   _______
    /   \ /   \ /_  _/__  __/  /__  __/
   /  ' //  ' /  / /   / / ___  / /   _
  /  o  /  _  \_/ /_  / / /__/ / /  /_  /__
 /_____/__/ \_/____/ /_/      /_/  /_  / \

         WEB-Term -> 90% Complete
@endnode

@node "Fonts" "Fonts"
Jarmo Laakkonen wrote:

> How can I get the system font size?

Make sure that AMIGALIBS.RES is present in the RESIDENT list of your COMPILER
OPTIONS.  Then, have your code like so:

   WBenchToFront_:FindScreen 0; Use the Workbench screen
   *scr.Screen=Peek.l(Addr Screen(0)); Get screen info
   fy=*scr\Font\ta_YSize; Get height of system font

The variable "fy" will now hold the system font height. Everything above is
case-sensitive, so take care!  This tip only works if you use Workbench as the
screen, which is natural since private screens use their own font and not the
system one (usually).

-- 

Regards, Paul.

E-Mail Address: cat@aic.net.au Amiga Web Site: http://www.aic.net.au/~cat/

-----------------------------------------------------------------------------
I watched as Bruce Henderson entered 'Screen Pointing (Was GTLists &....)'
into the terminal. 


 BH> Here's my test-code.  Don't laugh. (well ok, if you have to)

 BH>         WbToScreen 0

 BH>         *Myscreen.Screen=Addr Screen(0)

 BH>         *Myfont.TextAttr = *Myscreen\Font

 BH>         Value.w = Peek.w(*Myfont\ta_YSize)

Oooops! GURU ;)

Try Value.w = *MyFont\ta_YSize. #;)

 BH>         Print Value

------------------------------------------------------------------------------














I watched as Paul Lathwell entered 'Screen Pointing 

 PL> .screen                             ; get our screen objects' structure

 PL> *scr.Screen=Peek.l(Addr Screen(0))

 PL> Let fsize=*scr\BarHeight-10
 PL> myfont$=Peek$(*scr\Font\ta_Name)
 PL> fontsize.w=*scr\Font\ta_YSize

So far so good, untill we get to the next line...

 PL> Let myfont=fontsize-8               ; determine title bar height

NOT GOOD, the '8' is not guaranteed. A better way? Oh yes...

Either use *BarHeight* (not very reliable), or                                
BHeight.b = *scr.Screen\BarHeight

This is the friendly way to get the barheight. Intuition will automatically
size this when loading the font, and doing a refresh. You never need to worry.
It is useful, however, for working out where eveything should be in font
sensing GUI's.

 PL> If win_x>(*scr\Width-#GUI_WIDTH)     ; centre window if x/y positions
 PL>   win_x=(*scr\Width-#GUI_WIDTH)/2    ; exceed screen width/height
 PL> EndIf
 PL> If win_y>(*scr\Height-(#GUI_HEIGHT+myfont))
 PL>   win_y=(*scr\Height-(#GUI_HEIGHT+myfont))/2
 PL> EndIf

Altho' the rest is scruffy, it's technically acceptable ;)

Toodle............



                        --------------------------
  Blitz Basic mailing list -- Brought to you by daireb@netsoc.ucd.ie To
un/subscribe, send a mail to blitz-list-request@netsoc.ucd.ie with the
                word un/subscribe as the subject.

@endnode

@node "FrontScreen" "Find Front Screen"
 > Why, when I have Screen 1 at the front of the display,  is ActiveScreen    
> not the same as Addr Screen(1)?

I'm using something similar to that in my game although I'm testing for
FrontScreen rather than active sceen. Try this....

Peek.l(Addr Screen(1)) = ActiveScreen

That should do what you want.

Cheers,

Paul

--  <----------------------------------------------------------------->
    Paul Burkey - Project: Foundation [###############-----] 80%
   paul@sneech.demon.co.uk -- Amiga Realtime Strategy Wargame --
  Foundation Home  http://www.sadeness.demon.co.uk/foundation.html
<----------------------------------------------------------------->
@endnode

@node "Functions" "Functions"
john owen-jones wrote:

> I do have a secondary problem with the screen with some programs > opening
windows on my screen and distroying my graphics 

Programs can only open on your screen if it is Public. If you create a screen
that isn`t public then this won`t happen.

> The next part of my problem is that i'm using lots of subroutines > this
works but i donn't like it since it means all of my data is > global and I
have to ensure that each routine doesn't distroy > data being used in other
routines.

If you just share variables with Statements that need them using the SHARED
command then the rest of your program can`t effect them.
  > I think functions will only return a single variable however some > of my
routines need to return two or three values. > I want to pass two values for
say mouse posistion and then return > say three values. perhaps more.

You could share the variables in a Statement or look at the  possibility of
using Macros instead as they can return more than 1 value.
  > I guess a newtype could be passed to a function and then > have the
function fill in the fields > how would i do this. > Can i pass an array with
two dimensions or more.

Arrays and List Arrays can be passed using the SHARED command in the same way
as any variable can including NewTypes.

See you,

Liz.
 
                  Member of *Desktop Corruption*
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 tucks@pavilion.co.uk         projects:  BlitzMAP  complete
 A1200T 10meg 850hdd                     Swarm     10% .
@endnode

@node "GT questions" "GT Questions"

 EH> I have used the GTCycle tool, but can't find out how to get the value
 EH> from it.

When you detect the gadgethit from it, use EventCode to return the active
face.

--------------------------------------------------------------------------

On 20-Jun-97, Curt Esser wrote:

>Does anyone know how to force a set of GT buttons to use a particular font? 

Gadgets should use the current intuifont when they are created.  Thus do a Use
IntuiFont # before creating the gadgets.  This should force them to use the
font.  When you load a font it becomes the currently Used font, so you have to
reselect your previous one.

>Also, how do I make GT gadget's position be relative to the bottom of the
>window rather than the top?  And relative to the right side of the window?

You cannot make GT gadgets relative to anything other than the top-left corner
of the window.

Steve Mc. Red When Excited Ltd.

----------------------------------------------------------------------------

I watched as Tyler Lund entered '[Blitz] GadTools problems...' into the
terminal. 

 TL> 1. The GTsetattrs commands that are supposed to set the checkboxes
 TL> don't. BUT if I move the MX gadget preceeding them to another
 TL> location... it suddenly works. Weird huh?

This is the age old problem of Gadget ID's. Set the ID's from 50 upwards,
works fine then.

----------------------------------------------------------------------------

 TM> Please excuse my ignorance, but can anyone describe how to set up a
 TM> GTLISTVIEW a bit better than how it does in the manual?  
 TM> Do the options have to be in one string, or can they be in an
 TM> array/list?
 TM> How can a string be second in a list after a .W?  Don't lists have to
 TM> be of
 TM> the same type?

Some code.....

WbToScreen 0 ; let's have a screen                                            
; lets define a list and fill it with crap for now                           
NEWTYPE .listview
    pad.w
    string.s                                                                  
End NEWTYPE                                                                   
Dim List MyList.listview(5)                                                   
If AddItem(MyList()) Then MyList()\string = "Item 1"                          
If AddItem(MyList()) Then MyList()\string = "Item 2"                          
If AddItem(MyList()) Then MyList()\string = "Item 3"                          
If AddItem(MyList()) Then MyList()\string = "Item 4"                          
If AddItem(MyList()) Then MyList()\string = "Item 5"                          
; some gadgets                                                                
GTString 0,50,8,39,100,13,"",0,256,""                                         
*strGad.Gadget=GTGadPtr(0,50) GTTags #GTLV_ShowSelected,*strGad               
; dont worry too much about this ;)                                           
GTListView 0,51,8,-5,100,50,"",0,MyList(),0,0                                 
; our wonderful window                                                        
Window 0,10,10,150,100,$140e,"Test",1,2

AttachGTList 0,0 ; lets see them ;                                            
Repeat ; our main loop
    ev = WaitEvent ; wait for intuition event                                 
Until ev = $200 ; quit when close gadget hit                                  
CloseWindow 0 : Free GTList 0                                                 
End

This should show you nicely about the ListView and how to use intuition to
attach a string gadget automatically to the listview.

---

  Blitz User No: 532      ~~~~~          sa@thenet.co.uk
                          -O-O-                or
                         [  O  ]    simon@darkside.demon.co.uk
       Team *AMIGA*         \ = /      Of   Creative Software In memory of
Rick Lembree  \_/

---------------------------------------------------------------------------

I watched as James entered '[Blitz] GTScroller' into the terminal. 

 J> According to the manual, when you create a GTScroller, it should have
 J> arrows attached to it for moving the bar.  When I create one, I don't
 J> get any arrows.

This is acheived using the flags. Try a flag value of $200. To set the size of
the arrows, use GTArrowSize xx.

 J> Also, how could I get my program to respond to the scroller, everytime
 J> the bar changes position.  At the moment it only responds when you let
 J> go of the bar, I want to be able to update the window constantly, not
 J> just when the bar has finished moving.

The gadgetflags value should include $80 (#GA_Immediate)



  Blitz User No: 532      ~~~~~          sa@thenet.co.uk
---------------------------------------------------- -----------------------

 The gtscroller can be made to scream while moving it by hitting this line in
the beginning of the prog : AddIDCMP $400000|$10 -Ariakas


----------------------------------------------------------------------------
On 26-Jul-97, Tom Miles wrote:

>Hello Curt Esser, on 22-May-97 04:19:13, you said,

>>>Thirdly - How come GTBevelBox appears to do nothing what-so-ever (i.e. I
>>>can't get it to draw a bevelbox at all!)

> CE> The bevelboxes must be drawn AFTER you attach the GT list (the manual >
CE> doesn't say, I found this out by accident)  Also, if you use 0 for the >
CE> flag, you get a normal bevelbox (looks like a button) and 1 gives a > CE>
recessed bevelbox.


Hi,
    Why don't you write a Statement at the top of your program such as 

         Statement bbox{x,y,width,height,state}
            if state=1
               col1=1         ; BLACK
               col2=2         ; WHITE
            else
               col1=2         ; WHITE
               col2=1         ; BLACK
   
            wline x,y,x+width,y,col1              
            wline x,y,x,y+height,col1
            wline x+width,y,x+width,y,col2
            wline x,y+height.x+width,y+height
         End Statement

That should work, I'm not sure if the coordinates are right cause I've just
done of the top of my head, you may need to mess around with the colours and
corrdinates to get it right.

Now everytime you want a box in your code just use the statement with your
parameters, i.e. :

   bbox{10,10,100,75,1}

Cheers,

Daniel

------------------------------------------------------------------------------














On 06-Jul-97, Dennis de Haan wrote:

>I have problems reading a GTString using the command GTGetString...

>The Blitz manual talks about a #GadgetUP message, but i have no idea >what
that is...

I had some problems with this one too, but I finally got it figured out.  You
need to do it like this:

a$ = GTGetString (GTlist#,id)

Note the parenthesis! They are missing in the manual.

The gadgetup message means to check the string gadget when you get Event $40
  -- 
                                            Yours electronically,
                                            Curt Esser
                                            camge@ix.netcom.com
------------------------------------------------------------------------------
-

Le 30-Jul-97, Curt Esser a écrit:

 > Hi All,

 > I am trying to read the selection from a GTMX gadget using Eventcode but
this
 > doesn't work.  If I change this gadget to a GTCycle gadget, it does work.
Is
 > there a different command I should use for a GTMX gadget?

   Hi,

   I think this will work... I'm sure your are using an Event of $40 for
detect the 'push' gadget. But, in case of GTMX, you must use $20. See my
source bellow ... 

 repeat
   ev.l=waitevent
   if ev=$20     <------ not $40 !!!
     if gadgethit=#GTMX
       ec.l=eventcode
       select ec
       case 1
        .
        .
       case 2
       endselect
     endif
   endif
 until Quit

Xavier.

http://www.a2points.com/homepage/3698138/ 

-----------------------------------------------------------------------------

John Mason wrote: >  > I'm trying to add gadgets (GadTools) to a GTList and a
window after the > window has been opened.  Is this possible?  My program
opens the window, > makes the gadgets, but when I try to AttachGTList to the
window, Blitz > says that the list is already attached to the window, but it
isn't, at > least not as far as I can tell!  It's not attached via the Window
statement, > and I only have one AttachGTList in the program!

I`ve had this sort of problem before. The trouble is that the error message
can be misleading. My problem turned out to be a typo in the window command so
that I was trying to open a window that was positioned such that it was partly
off screen. Therefore the window wasn`t opened, and the GTList couldn`t be
attached to an unopened window, so an error occured. Unfortunately it seems
that if a GTList can`t be attached it assumes it is because one has already
been attached.

This let me to hunt for errors with the GTList rather than with the window
itself.

I hope that this may be of help.        

See you,

Liz.
 
                  Member of *Desktop Corruption*
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 tucks@pavilion.co.uk         projects:  BlitzMAP  complete
 A1200T 10meg 850hdd                     Swarm     10%

------------------------------------------------------------------------------
-

Hallo.
    Haven't written many replies here for an age, so I thought I'd put my bit
it.  I've seen me asking about GT/windows things and got no reply, but
occasionally there is a helpful hint. (Thanks to all who helped me when I
asked for it)
    Also, by not getting answers to questions, it forces me to LEARN how to
use the OS.  I'm learning :)


On 05-Aug-97,  <ariakas@freenet.hut.fi>  said, -> I recall some earlier
discussion of a "zoomable"-flag -> when opening a window, but since I'm using
a telnet-connection to read my -> mail, I couldn't make the code out of that
mime-mess :) ->  Now, I'd appreciate if someone told me the flag and the
intuition event- -> code for the zooming (a huge GTButton with the text "HIDE"
isn't too -> attractive...:)

Window Zooming:

    There are actually 2 ways you can zoom a window.  One is by clicking on
the Zoom gadget, the other is by using an event (say..  RMB-click).

    The best way to set up your Zoom requires your window taglist and another
list for "Zoomed" positioning. (You'll need your amigalib.res thingy on too)

; This is required for the Zoomed-state of your window.
  Dim zoombits.w(3)
  zoombits(0)=  <x-coord>
  zoombits(1)=  <y-coord>
  zoombits(2)=  <width>
  zoombits(3)=  <height>      (if you just want a BAR.. use the Bar Height
here)

; This is your Window taglist
  Dim taglist.l(10)
  taglist(0) =#WA_Left
  taglist(1) =  <x-coord>
  taglist(2) =#WA_Top
  taglist(3) =  <y-coord>
  taglist(4) =#WA_Width
  taglist(5) =  <width>
  taglist(6) =#WA_Height
  taglist(7) =  <height>
  taglist(8) =#WA_Zoom       (The important part)
  taglist(9) =&zoombits(0)

; Your basic window with taglist
  WindowTags 0,$2|$4|$8,"My Window",&taglist(0)
 

That gets you your working Window with Zoom.

I also set $20000000 in my flags there. Don't know if it is necessary.  That
tells Intuition that the window is zoomable. (There is MORE code required, as
a ZOOM returns 3 individual events, and you need to trap at least ONE of these
events.)

There ARE problems associated with using the ZOOM gadget if you don't check
properly. As an example.  Someone startup HippoPlayer.  Now... click on the
"Zoom" gadget. It turns into a bar... now. click it back...  now click REALLY
fast so that it flicks on and off between the two..  What happens ?

The Problem.  Intuition is changing the Zoomed-state of the window faster than
poor Hippoplayer can keep up. (well, does with my version).  Probably does for
OTHER proggies too.

You CAN code around that.  I did.

anyway.. that's window zooming.



-> I'm also interested in the ListView thing-can it be made to inverse or ->
hilight the colors of the selected item?

The List View.

    This is fun, this one.

For a GTListView you MUST have your list set up like this:

; Sets up the List
    NEWTYPE .ltype              (anything else won't work)
        pad.w
        text.s
    END NEWTYPE

    DIM LIST mylist.ltype(<size>)


Setting up your GTListView Gadget :

; add a tag - for showing the item
  GTTags #GTLV_ShowSelected,GTGadPtr(0,1) ; your list
  GTListView 0,1,<x>,<y>,<width>,<height>,"",0,mylist(),0,0


When you add something to your list, and you want to update it use this:

; update the GTList
    GTChangeList 0,1
    GTChangeList 0,1,mylist()

To move the "selected" pointer manually use this :

; change current selected
    GTSetAttrs 0,1,#GTLV_Selected,0


If you want to get REALLY cool, you can dynamically attach a GTString gadget
to the list...

-- 
    OOOOOOOOOOOOOO······························OOOOOOOOOOOOOO
    O                                                 /|     O
    O   brucey@thenet.co.uk                          /_| ·   O
    O                                               /  |M|GA O
    ·    The PAGE >>>>>               ( BaH )                ·
    · www.thenet.co.uk/~brucey       O                       ·
    ·                               o         > BMG V1.401 < ·
    ·                        ____^_°           (Mpega GUI)   ·
    · Catch the Sheep on    (    )o\                         ·
    O Dalnet at #Kimva      (____)            on Aminet at   O
    O  BaH or Woolly        /\ /\           mus/play/BMG.lha O
    O                 The Sheep has Spoken                   O
    OOOOOOOOOOOOOO······························OOOOOOOOOOOOOO
@endnode

@node "Ham" "Ham Screens"
 Thanx everybody who answered to my question about HAM screens. Although
nobody could give me a clear solution I did solve the problem myself with the
help of all the suggestions.

To open a HAM screen in any screenmode (DblPAL, Euro72, Multiscan etc.) using
the ScreenTags command all you have to do is add $200 to the Viewmode ID. It's
a shame that ILBMViewMode doesn't recognise HAM screens automatically. Maybe
there is another way to check if an IFF picture/animation is in saved the HAM
format?

The only big question still unanswered is why the ASL screenrequester doesn't
give HAM screens as an option.

So long! ---/\/\-----\ \/ /-------
           / /\ \arco \  /igelius                                             
         -/ /--\ \-----\/---------


                        --------------------------
@endnode

@node "Headers" "Read File Headers"
 >Can someone tell me how I can read the header of a file, >and use it to
identify what format it is?

You just have to open the file with OpenFile for example and then look for the
identifications letters. (see the IFF example below)

>If I can read the header if an IFF file, can I then >read the header of, JPG,
GIF, TXT, DOC, PCX ect the >same way? (I know they have diffrent headers, but
do >you do it the same way?)

Yes, I do it on the same way, but with different chunks headers. To find them,
you have to watch the file in hexa and look for some ID letters (like JFIF or
things like that).

So here is an example to check if a file is in IFF format :

  If ReadFile(0,PathTemp$)=-1
    FileInput 0
    Fields 0,Value.b
    For k=0 To 3
      Get 0,k
      Found$=Found$+Chr$(Value)
    Next
    For k=8 To 11
      Get 0,k
      Found$=Found$+Chr$(Value)
    Next
    CloseFile 0
    NPrint Found$
    CloseFile 0
    If UCase$(Found$)="FORMILBM"
      NPrint "Your file is a real IFF file !!"
    EndIf
  EndIf

I hope this will help you.

Best Regards,

            Mathieu

      Mathieu Chènebit / LifeTeam
      EMail : matc999@spidernet.tm.fr
      LifeTeam Home Page : http://www.spidernet.tm.fr/~matc999/index.html
      Nickname "matc" on #artbas, #amigafr and sometimes #amiga

----------------------------------------------------------------------------- 

















This is the easiest way :

If ReadFile(0,"myfile.iff")
  FileInput 0
  A$ = Edit$(12)    ; Read 12 bytes or upto a chr$(10)
  CloseFile 0
  If Left$(A$,4)= "FORM" AND Right$(A$,4) = "ILBM"
    ;--- Do your stuff ---
  Else
    Nprint "Not an ILBM file !"
  Endif Else
  Nprint "Couldn't Open file !" Endif

Bye now,

Serge Veugelers
                     - THE QUALITY TEAM -    (sergev@cistron.nl)
@endnode

@node "IFF's" "Display IFF's"
>I'm trying to have my program display different IFFs with different joystick
>movements. It will display the first one but after that I get a bunch of    
>vertical lines. Heres my code:                                              


>bitmap 0,640,200,8                                                          
>LoadIFF "BlahBlah",0,0                                                      
>LoadIFF "BlahBlah",1,1                                                      
>Initcoplist 0,44,200,$13108,8,256,0                                         
>Blitz                                                                       
> CreateDisplay 0 ; <---Activates Copperlist and is only needed once         
> Old = -1                                                                    
>While Gameb(1)=0                                                             
>  If joy(1)=0 then r=0                                                       
>  if joy(1)=2 then r=1                                                       
   VWAIT                  ; <--- Wait until VBlank for smooth transition      
   If r <> Old            ; <--- Only update when changed                     
   Old = r                                                                 
>  DisplayPalette 0,r                                                        >
DisplayBitmap 0,r                                                          
   Endif                                                                      
>Wend
                                                                        



> Bye now,

Serge Veugelers
 ########    - THE QUALITY TEAM -    (sergev@cistron.nl)
 | ~  ~ |   |  Serge Veugelers       (Coding)                |               
 | 0  0 |   |  Raymond Zachariasse   (Graphics)              |
 |  {}  |   |=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-|
 |  ~~  |   | Current projects : BrainTeaser : Puzzle   (10%)|
 ~~~~~~~~   |                    IRQBlit     : Blitzlib (20%)|
 ||||||||    ------------------------------------------------
-------------------------------------------------------------                
Member of CineTech : Soon to release Sixth Sense Investigations
@endnode

@node "INC.bin" "INCBIN"
>If I load an ILBM-picture with the IncBin command, how to I take it back     
>with the DecodeILBM command? The DecodeILBM command needs to know the        
>address-locations of the picture, how do I find it?


mylabel: IncBin "file.iff"


The address of mylabel is :         ?mylabel

Steve. --
.-----------------------------------------------------------------------------
. |Red When Excited Ltd    | WWW            http://www.ldngedge.demon.co.uk |
|2 Slimmons Drive,       | My EMail Big.Will.Riker@ldngedge.demon.co.uk | |St.
Albans,             | A1200T/040@40/18Mb/1.6Gb/33.6k/8xCDROM/1.76MbFD    | |
|Herts. AL4 9AS. ENGLAND | Company EMail  redwhen@ldngedge.demon.co.uk |
`-----------------------------------------------------------------------------























Use the ILBMGrab command, then you can get the palette at the same time.

Short example:


Bitmap 0,320,256,8    ; Lores 256color bitmap                                
ILBMGrab ?Mypic,0,0   ; Grab the IncBin file to bitmap 0   
                      ; and palette 0 (ILBMGrab addr,bmp#,pal#)

Mypic:
 IncBin <filename$>





-- 

ReGaRDS : aNDReaS HåKaNSSoN aLiaS   : TJoMMe e-MaiL  :
andy@bjuv.mail.telia.com HoMe    :
www.geocities.com/SiliconValley/Height/4956/

-=>> ReMeMBeR THaT THe aMiGa WiLL oNLy Die iF We LeT iT To <<=-
@endnode

@node "Menus" "Menus"
AFAIK, the only way of telling Blitz to change the menu colour is via the
MenuColour command, but that only changes the colour of the foreground
writing. The shortcuts still appear as colour 0 and the menu background is an
icky black.

Sounds to me like you should be using the NewLookMenus flag for your window.
Add a $200000 to the flags for your window for instant improvement.

GY>Does anyone know how to get the menu width right, BTW?

I always add four spaces on to the end of each item. That seems to space it
about right.

Bye, Alex

--  +-- Alex Wingrove / awingrove@thenet.co.uk --+

[ Blitz Program Collection - www.thenet.co.uk/~awingrove/blitz.html ]
@endnode

@node "Modem" "Modem"
Hello everyone,
  a few people have been asking about serial and modem stuff... here's some
example code taken from my forthcoming game, which allows head to head play
over a standard phone line. Hope it is of some help,         James

modem_port=#modem_port modem_speed=#modem_speed modem_timeout=#modem_timeout
serial_port=#serial_port serial_speed=#serial_speed
serial_timeout=#serial_timeout modem_init$="ATZ" modem_dial$="ATD"
modem_pickup$="ATS0=2" ; Statement flush_serial_buffer{port.b}
  SHARED serial_buffer
  For l1=1 To serial_buffer
    t=ReadSerial(port)
  Next l1 End Statement ; Function.b
wait_for_response{port.b,response$,timeout.b}
  ;function to wait for modem response
  SHARED user_terminated
  time=timeout*50
  response.b=True
  e.l=0
  For l1=1 To Len(response$)
    Repeat
      e=Event
      If (e=$200 AND EventWindow=0) OR time=1
        response=False
        If e=$200 AND EventWindow=0
          user_terminated=True
        End If
      End If
      If time>0
        time-1
      End If
      VWait
    Until ReadSerial(port)=Asc(Mid$(response$,l1,1)) OR response=False
  Next l1
  Function Return response End Function ; Statement
send_command{port,command$}
  ;function to send modem command
  WriteSerialString port,command$,2
  WriteSerial port,13 End Statement ; Function.b dial{port.b,number$}
  ;function to dial other players computer
  SHARED modem_init$,modem_dial$,modem_timeout
  ret.b=True
  NPrint number$
  send_command{port,modem_init$}
  ret=wait_for_response{port,"OK",modem_timeout}
  dial$=modem_dial$+number$
  send_command{port,dial$}
  If ret=True
    ret=wait_for_response{port,"CONNECT",0}
  End If
  flush_serial_buffer{port}
  If ret=False
    NPrint "Modem not responding"
  End If
  Function Return ret End Function ; Function.b pickup{port}
  ;function to pick up call from other player's computer
  SHARED modem_init$,modem_pickup$,modem_timeout
  ret=True
  send_command{port,modem_init$}
  ret=wait_for_response{port,"OK",modem_timeout}
  If ret=True
    send_command{port,modem_pickup$}
    ret=wait_for_response{port,"OK",modem_timeout}
  End If
  If ret=True
    ret=wait_for_response{port,"CONNECT",0}
  End If
  flush_serial_buffer{port}
  If ret=False
    NPrint "Modem not responding"
  End If
  Function Return ret End Function
  ----------------------------------------------------------- | Homegrown
Software - Independent Amiga Games Developers | | | |         Web:-
http://www.eclipse.co.uk/homegrown        | | email:- homegrown@eclipse.co.uk
| -----------------------------------------------------------


                        --------------------------
  Blitz Basic mailing list -- Brought to you by daireb@netsoc.ucd.ie To
un/subscribe, send a mail to blitz-list-request@netsoc.ucd.ie with the word
un/subscribe as the subject.
@endnode

@node "Newtype Arrays" "Newtype Arrays"
> #num=5                                                                      
> NEWTYPE.mod                                                                 
> info$[#num]                                                                 
> End NEWTYPE                                                                 
> Dim QnA.mod(30) ; for a max of 30 sets of Questions And answers ?????       
> if readfile(0,NSW.module)                                                   
>   fileinput 0                                                              
> for i=1 to #num                                                            >
QnA.mod\info[i]=edit$9193)                                               >
next                                                                       >
end if                                                                       >
closefile 0                                                                  >
Now, the main problem I have is when I run Blitz without the Debugger it
compiles & runs fine (even exe's), but when I use the (damn) debugger I get
the following error:
                                                                       
QnA.mod\info[i]=edit$(193)                                                  
[Offset out of range]                                                       
What the hell does this mean ?  Why won't it work, when it seems to run quite
fine ?



  I have found that when I declare an array in a newtype (say a.b[x])
  valid array values are from 0 to x-1 (a.b[4] allows a[0]...a[3]).
  Try using #num-1 as your max array subscript value.

  Why this is different than a normal array not in a newtype (a.b[4]
  actually allows a[0]...a[4]), I don't know.

   Tom

----------------------------------------------------------------------------


    A newtype array works differently from a standard array.

   **  Where   Dim myarray$(5)   has  SIX (6)  cells.... 0-5  **

    but in a newtype array -

   **  Where   info$[5]    only has FIVE (5) cells.... 0-4    **

    so you need to use:

        For i=0 to 4
            ......
        Next

    Which is 5 times...


    You have to be careful also, when running the prog WITHOUT the debugger if
you are trying to access the array out of its range.  It may work well most of
the time, but you WILL get a guru...  I know, I've done it.



    Happy Programming...


    Brucey


-- 
    OOOOOOOOOOOOOO······························OOOOOOOOOOOOOO
    O                                                 /|     O
    O   brucey@thenet.co.uk                          /_| ·   O
    O                                               /  |M|GA O
    ·    The PAGE >>>>>               ( BaH )                ·
    · www.thenet.co.uk/~brucey       O                       ·
    ·                               o         > BMG V1.401 < ·
    ·                        ____^_°           (Mpega GUI)   ·
    · Catch the Sheep on    (    )o\                         ·
    O  -- Dalnet --         (____)            on Aminet at   O
    O  BaH or Woolly        /\ /\           mus/play/BMG.lha O
    O                 The Sheep has Spoken                   O
    OOOOOOOOOOOOOO······························OOOOOOOOOOOOOO
@endnode

@node "NoTitle" "No Screen Titlebar"
 > is it possible to open a screen in Amiga mode without the title bar so >
that it is impossible to drag the screen?

Are you familliar with using screentags, as this will enable you to acheive
what you want. You will need Blitzlibs:amigalibs.res resident.

  sc.l=ScreenTags(0,tit$,?ScreenTags)
  Mousewait
  Free Screen 0
  End

ScreenTags
    Dc.l    #SA_LikeWorkbench,1
    Dc.l    #SA_Quiet,1         ;removes the titlebar
    Dc.l    #SA_Draggable,1     ;makes the screen non dragable                
;    Dc.l    TAG_DONE,0

    Dc.l    #SA_Width,640
    Dc.l    #SA_Height,256
    Dc.l    #SA_Depth,4
    Dc.l    #SA_DisplayID,$8000
    Dc.l    #SA_SysFont,1
    Dc.l    TAG_DONE,0


Andrew

-- Andrew Guthrie andrewg@nectar.com.au
http://www.nectar.com.au/~andrewg/edht/
@endnode

@node "OverScan Mouse" "OverScan Mouse"
Hi,

The menu problems and my overscan problems are solved. The use of the simple
"Menus Off" command worked for the menus.

The overscan problem seems to be fixed by using the following code.

{amigalibs.res must be resident}

*reg.Region=NewRegion_()

*reg\bounds\MinX=0   ; Minimum x for mouse pointer *reg\bounds\MinY=0   ;    "
y  "    "      " *reg\bounds\MaxX=640 ; Maximum x for mouse pointer
*reg\bounds\MaxY=480 ;    "    y  "    "      "

ScreenTags 0,"",#SA_DisplayID,id,#SA_DClip,*reg

This would avoid my mouse pointer to from falling below the bottom of my
visable screen. Even if my Screen is 960 pixels hight.

This was so easy to do that I guess thre must be some sort of Limit Mouse
x,y,x2,y2 command? Maybe there is but it was fun working out the AmigaOS way
of doing it.

Cheers,

Paul


--  <----------------------------------------------------------------->
    Paul Burkey - Project: Foundation [###############-----] 78%
   paul@sneech.demon.co.uk -- Amiga Realtime Strategy Wargame --
  Foundation Home  http://www.sadeness.demon.co.uk/foundation.html
<----------------------------------------------------------------->
@endnode

@node "Parsing Strings" "Parsing Strings"
I am after a *quick* way to extract the words from a string, the complication
being that there can be as many as 30 spaces inbetween words.

Example String: "Lab      BcF       Status,2"

I am searching through the strings for commands such as "BcF".  As there are
over 100 possible commands, I am extracting words from the string and matching
them with the commands (as opposed to checking every command against the
string).

At the moment I have a loop that pathetically goes round using instr() to
search for the next space and checking to see if there is room for other text
inbetween them.

Surely there's a way of quickly extracting the words?

-----------------------------------------------------------------------------


What about :

StringPtr.l = &String$ StringLen.l = Len(String$) Word$ = "" For i.l =0 to
StringLen
  char.b = peek.b(StringPtr+i)
  if char <> 32
    Word$ + chr$(char)
  else
    If Word$ <> ""
      DoSomething{Word$}
      Word$ = ""
    Endif
  endif Next If Word$ <> ""
  DoSomething{Word$} Endif

Or do you mean something else ?

Buh-bye,

Serge Veugelers
@endnode

@node "PC to Amiga" "PC to Amiga"
On Sun, 18 May 1997, Dave wrote:

>     A little off subject but a day or two ago someone wrote about getting >
files from a PC to amiga using 720k dos formatted disks.Can someone > explain
this as I want to download files with my dads PC and transfer > them to my
Amiga and I don`t know much about PCs.

Okay, here's how:

  1.  Format a floppy on the pc by typing at a DOS prompt:  Format a: /f:720
      Use b: instead of a: if a: isn't a 3.5" floppy drive

  2.  On your Ami, look in devs/dosdrivers or storage/dosdrivers (on your 
      boot partition) for pc0, and double click that.  

  3.  Insert the formatted disk from the pc into df0: and you should get
      an icon on Workbench representing it (not Df0:????)  If you don't then
      try cd'ing to it in a shell by typing pc0: and you can access it 
      that way (or with DOpus or something).  Its icon might eventually 
      appear on WB after doing this.

  You should be able to use it as a normal disk now, just refer use PC0:
  instead of DF0:.  

  Hope this helps,  and wasn't too hard to understand,  

        |      ///       John Mason          |                               
        |     /// Amiga User Extraordinaire! |                               
        | \\\///    ah210@chebucto.ns.ca     |                               
        |  \XX/   A500 020+881 3.1 7MB RAM   |                               
        |www.ccn.cs.dal.ca~ah210/Profile.html|


  Make sure that you're using Double density disks, or cover up the extra hole
with cellotape (otherwise the PC will assume it's a high density disk). 
 
  Use a PC that runs Win95 ('85 :-) otherwise all the filenames will be
shortened to 8.3 format. Then use WinZip to archive the files you want onto
your disks. If you don't, Win95 will screw up any long filenames (because of
the kludge it uses for long filenames :-/ ). Then get an unzipper for your
Amiga like Unzip to, well, unzip them :-).
  -- 
            Anton Reinauer <anton@ww.co.nz>
  Machine:  A500,DF1:,1MC,8MF,60HDD,WB3.1 &1.3/2.0
            - Now with gigantic new disk box!
  Project:  Pyromid - status [C***L! ]
  Webpage:  http://www.ww.co.nz/home/anton
@endnode

@node "Pointer" "Pointer"
 >                                                                            
>  Which is the best command to recieve a pointer to a variable?             
>                                                                            

Try &<varname>, like                                                         
a.s="Hoi"                                                                    
&a now points to this string.                                                

Ralf                                                                         

#---------------#--------------------------------#     /|                    
| Ralf Berkvens | A1200w030+882@50mhz+18mb Ram   |    / |          _         
#---------------#--------------------------------#   /__| \  / |  / \ |\     
| Blitz Rulez!! | ralf@stack.nl         (E-mail) |  /   | |\/| | | __ |_\    
#---------------#--------------------------------# /    | |  | |  \_/ |  \   



>examples of using pointers in blitz :)

OK. This program shows how to do a bit of simple pointer arithmetic in Blitz.
Remember that a pointer holds the address of variable, and is a variable in
itself. I haven't really used pointers in Blitz much so this may be slightly
wrong.


(BTW how do you highlight text in YAM ;)

; Small Pointer Example. Matt Daniels - 20/8/97

text.s = "Viva Pavimento"

*pnt = &text    
                ; the * tells pnt to hold an address.
                ; the & returns the address of the variable
                ;  in this case the start of our string.

For count = 0 To 13
  NPrint "Value = ",Chr$(Peek.b(*pnt)) ," / Address =", Hex$(*pnt)

  *pnt + 1     ;This moves the pointer to the next address
                ; i.e. in this case 1 byte forward

  MouseWait
  VWait Next

End

(end program)

   You should be careful when using pointer arithmetic, as it is easy to point
to the wrong address and mess up memory.
   If you send a pointer to a statement you can change the info in a pointed
to array. You gain speed by passing a lot less data to your function, and I
think that it is a lot neater than the SHARED command.


   Later, 'Gators

--  Matt Daniels. mattd@underused.u-net.com http://www.underused.u-net.com




> hum i guess the next thing is how to create a res file. > so my functions
become more like blitz commands but written for > my specific purposes.

res files are for constants, newtypes and other compiler things. I think
macros can be used too. You'll not be able to use functions or statements in a
res file (I don't think so anyway). You can store your functions in a normal
blitz file and then INCLUDE it.

> so blitz does casting for us to an extent :)

Thats a feature that most forms of Basic do for you. The only places where som
sort of vasting is still needed is when you want to cast an int to work as a
float. Placing a .0 after constants is a good idea here.

> examples of using pointers in blitz :)

I've not used pointers much although I do use 100's of them in my current
project but they are all based on the same thing:

*ntpoint.mytype=type.mytype

then I use *ntpoint\ in place of type\

or

*list.mytype=mylist()

then I use *list insted of mylist()

A lot of the time you get a big speedup from using pointers instead of things
like lists and newtypes. It's usualy best to avoif pointers where speed is not
100% needed becasue errors will not show up in bugtesting!

> how to create res files.

If your code is made up of newtypes, constants, macros etc.. Just use compile
& run and then when it returns you choose the make resident option.

> how to include my homebrewed generic functions

Stick with INCLUDE for your modular functions

Cheers,

Paul

--  <----------------------------------------------------------------->
    Paul Burkey - Project: Foundation [###############-----] 80%
   paul@sneech.demon.co.uk -- Amiga Realtime Strategy Wargame --
  Foundation Home  http://www.sadeness.demon.co.uk/foundation.html
<----------------------------------------------------------------->
@endnode

@node "Progress Indicator" "Progress Indicator"
>>Does anyone know why the NeilsProgressLib can only be run once within a
program?  I can set one up and use it no problems, but when I try and do a
second indicator my program freezes! Any thoughts?
                                                                    

>Are you trying to run a second PI alongside the
first?                       

>>Nope, just the one, which i finish off with the 'PiEndRequest' call, but
then if I try to set up another request it just hangs the machine, the
debugger doesn't stop it or anything!

>Does the demonstration program work?  It uses two requesters, one after the
>other.  What _exactly_ happens?  Just a freeze?  Or, a freeze then a GURU?
>After you reboot, does the system come up instantly or does it guru first?

BTW /what/ demo program ?

Okay guys, try this.  I read this last night & figured, hell I can muck about
and add my 2 cents worth aswell.  I don't recall seeing any docs, but I just
read the .obj library and came up with this simple example:

WBStartup                                                                     
FindScreen 0                                                                  
Window 0,0,0,200,100,$2|$4|$8,"Test",1,2                                      
a=PICreateRequest("Hello",0,100)                                              
For x=1To100                                                                  
  b=PIUpdateRequest(x)                                                       
  VWait                                                                       
Next                                                                          
PIEndRequest                                                                  
a=PICreateRequest("Test",0,2000)                                              
PIEndRequest                                                                  
MouseWait

This simple little test confirms that you /can/ run 2 PI reqs (BTW loverly
work Neil, I love it !).  This will not crash, well it didn't on my machine
/if/ left to run it's course !  If you interrupt the program by hitting the
cancel button /then/ the Amiga will hang, but not until then.  I haven't
looked at it any further, but I would presume that if you add sime code in to
handle the stopping of the PIReq then you should be fine, I only "hacked" this
up in 5 minutes...

I hope it helps ?!



Catchya

RodderZ


+-------------------------------------------------+                           
| Rodney Norton,                   Sydney AUS.    |                           
| A1200/060/50.                                   |                           
| Email : rodneyn@aic.net.au                      |                           
| 4 Speed CD. Zip                                 |                           
| slade@suburbia.com.au                           |                           
| Team AMIGA                                      |                           
+------------------------+------------------------+                           
| AMIGA      :  IBM, MAC,ATARI, C64, MSX,         |                           
|            :  VIC20, SPECTRUM, GAMEBOY.    //   |                           
| All Rolled :                              //    |                           
| Into One   :                          \\ //     |                           
|                 29-Jul-97 19:23:40     \X/      |
+-------------------------------------------------+
@endnode

@node "Palette Fade" "Palette Fade"
; fade the current screen to a new palette object - for fades to & from black
; just set a palette to all black.  You can fade to and from any palette  for
; special effects (fade to blue, or red, or go from day to night, etc.)      
; works in Blitz mode and Amiga mode - for AGA using Display commands it will
; need to be modified with the AGA commands.   You will also need to send the
; modified palette to another palette object and then send that to the screen
; each "j" loop ; Curt Esser  <camge@ix.netcom.com>

Statement fadeto{palobj,delay} ;delay must be 1 or more
  ;Runerrsoff                  ;goes like molasses with errors on
  PaletteInfo palobj
  For i = 0 To 15              ;number of available colour steps
   For j=0 To #NUM.COLORS      ;number of currently used colours
    rd = Red(j)
    If rd < PalRed(j)  Then rd+1   ;check each for the difference
    If rd > PalRed(j) Then rd-1    ;between current colour and
    bl = Blue(j)                   ;the target colour
    If bl < PalBlue(j)  Then bl+1  ;and reset as needed
    If bl > PalBlue(j) Then bl-1
    gr = Green(j)
    If gr < PalGreen(j) Then gr+1
    If gr > PalGreen(j) Then gr-1
    RGB j,rd,gr,bl                 ;and reset current screen
   Next j
   VWait delay                    ;pause for a bit
  Next i                          ;increase if too fast
  ;Runerrson                   ;turn errs on if needed                        
End Statement
@endnode

@node "Program Speedup" "Program Speedup"
4. Keep loops as small as possible, put absolutely everything outside the
loop


Loops aren't any worse in blitz than in any other language, but the more you
put within a loop, the slower the loop becomes (as in any language).  Take the
following loop

for x = 1 to 5
  t=17
  p(x) = x+t next

This loop will repeat 5 times, therefore each command inside repeats 5 times.
Moving "t=17" before the "for"

t=17 for x = 1 to 5
  p(x) = x+t next

Now only the "p(x)=" part is repeated 5 times, the "t=17" is only  executed
once, hence total execution time is reduced.

2. Avoid using divides and multiplies as much as
possible                     

One bit of my current development version of the engine that I know is BAD
news is the collision detection with scenery blocks. This looks up the type of
blocks where a shape wants to go to..  using arrays but the index is
[x+(y*20)]..  The game area is 20 blocks wide..  the map being a long single
dimension array. Now..  if I padded the map out adding 12 spaces after every
20 blocks I could use [x+(y*32)] or even better (?) [x+(y LSL
5)].            

In theory I'd say that would be faster, didn't someone do a speed  test
between * and ASL recently? You could always try both methods and see which is
faster.

>I thought about a 2d array [x,y] but thats going to have to do the same
calculation underneath isnt it?  Lookup...  [x+y20(y)], y20 being 20 times
table.                                                                        


I think the y20 lookup would be the same as 2d table 'cos blitz has to *y for
the y20 as well

>Is there an even better
way...                                               

Try an offset table like so 

[x+ peek.w(?y20 + y + y)  ;two "+ y"s so that you get a WORD offset
                          ;or just one if you want BYTE offset.
                          ;"?y20" returns the address of the y20 data         
y20:                                                                          
  data.w 0,20,40,60,80,100,120,140,160,180,200

-----------------------------------------                                     
You'll need to check the syntax, but basically I think thats right and it
avoids multiplies altogether.


If you don't have any issues of BUM, try and get a hold of them.   Most of
this stuff is(was) covered in there anyway.


Stevie W. ---------  A1200/030/50, 18MB, 1.2G HD, 4X CDROM
http://www.geocities.com/TimesSquare/Alley/2688/ stevie_woj@hotmail.com



------------------------------------------------------------------------------
---

On 13-May-97, Paul Burkey wrote:

 -- Here's a old post that might help.--
  
 From    : Crossbones (xbones@xbones.cet.com) Subject : Tricks on how to speed
up the code

 There's been a lot of talk on tips 'n' trix for beginners, well here's
something for the people out there who want more speed that's a little more
advanced. I  don't think I've ever seen it used (except by me) but it's quite
useful.

 If you don't have one, go out and look for a book that covers assembly on the
680x0 machines. It doesnt have to be overly complicated, or even get in to the
hardware of the machine. That's what Blitz can do for you.

 With basic understanding of comparing and moving information around the
registers, you'll have good reason to use this command:

 TOKEJSR

 The why's:

 Some of the speed loss in Blitz2 is caused by variable handling. Especially
if you use lots of them. Each time you call a command in a library, blitz has
to do some shuffling around, to get parameters set. The more variables you use
the more it has to shuffle when it proccesses them.

 How's: 

 Calling ANY of blitz's library commands via assembly & tokejsr is fairly
easy. (Unless you're dealing with strings.. I haven't quite gotten the hang of
how blitz stores the length of strings on the stack.)

 As an example, if you want to call QBLIT via assembly, it would be like
this:

 TokeJSR Qblit

 Of course, Qblit wants paramenters. Most all commands do. You preload
registers before calling the command, and do so as follows. The beginning
arguement is D0. Qblit wants these:

   D0     D1  D2 D3
 Queue, Shape, X, Y

   To use plot, it would use:

   D0 D1    D2
    X, Y, Colour

 If you need to move a variable to or from a register, use PutReg or GetReg.

 Remember: If your program starts to require more horsepower to run, it
doesn't mean that you'll have to require faster machines to run it. There are
always options available to speed up your code. This is one option no one
should overlook.
  -- 
            Anton Reinauer <anton@ww.co.nz>
  Machine:  A500,DF1:,1MC,8MF,60HDD,WB3.1 &1.3/2.0
            - Now with gigantic new disk box!
  Project:  Pyromid - status [C***L! ]
  Webpage:  http://www.ww.co.nz/home/anton



---- Blitz Basic mailing list -- Brought to you by daireb@netsoc.ucd.ie
@endnode

@node "Qblit & Bblit" "Qblit & Bblit"
 Last night I was running this simple speed test program I've written to see
how many 24x24x5 shapes I can handle in 1/50th second:

        BBlit        17         QBlit        25

The game play needs about 24..  but QBlit isn't useable because of scenery
etc.. 

However, I thought there was a blitting command that stored the positions like
QBlit, but then rather than just erasing the shapes, leaving a whole, it
repaired the scenery from a copy of the scenery bitmap. I reckon this should
be capable of nearly QBlit performance.. which is GREAT news for us.


Thanks,

Colin.
                        --------------------------


That's: UnQueue Queue#,[BitMap#]

You may want to consier the method I use in Foundation. It's a damn simple
idea and it's a bit crazy but it works.

1. Keep a copy of your background on a spare bitmap. You could even
   render your background direct to this bitmap.....

2. Do lots of Blitting using any method you like "Blit" or even Block!!!

3. Then instead of using Unbuffer or UnQueue you simply do a BlockScroll
   from your copied background (part 1).

Advantages:

Block is way faster than anythig else Even Blit is much faster than any
buffered or Queue commnds. No need to reserve large buffers. You can use fast
Asm code to do the Blitting.

Disadvantages:

You need a copy of your background (same as queue..) It's only faster if you
have 30 or more shapes or your shapes will cover a lot of the bitmap.


In my game there could be 30+ people, 25+ trees, 15+ buildings and lots of
shadows and other effects. The method I explained above was the only option.
Maybe it'll help some people but if you have a known limit of blitter shapes
or you only ever cover a small percentage of your bitmap then the buffer or
Queue method would be better.

I hope this is of some help,


Paul

--  <----------------------------------------------------------------->
    Paul Burkey - Project: Foundation [###############-----] 78%
   paul@sneech.demon.co.uk -- Amiga Realtime Strategy Wargame --
  Foundation Home  http://www.sadeness.demon.co.uk/foundation.html
<----------------------------------------------------------------->
@endnode

@node "Req" "Reqtools Requestors"
 There's just weird thing - I can't set the default path/file >to
RTFileRequest although I can set it to RTLoadFile and SaveFile,

Try this instead.  ASL is in someways much better than ReqTools...

a$=ASLFilerequest("Title Bar info",path$,file$,pattern$,x,y,w,h)

path$, file$, and pattern$ all need to be previously defined...  I gave up on
reqtools simply coz it was easier to use ASL for what I needed, I didn't need
to add several other lines to set a default pattern etc.

eg.

path$="dh1:temp/" file$ ; DO NOT SET THIS ONE ! pattern$="#?.whatever"


>but what I need is to set the Y size to the requester - and that I >can't set
to RTLoadFile/RTSaveFile but can set to RTFileRequest...

HHhmmm... If you /really/ need it.  I take it you mean:

name$=RTEZLoadFile("Pick a file",file$)

when you say RTFileRequest....

Use this:

pat$="" While pat$=""
    pat$=RTEZGetString(Pattern Request","please enter a pattern",10,"#?") ; 10
is the max length, "#?" is the default pattern Wend

RTEZSetPattern 0,pat$

name$=RTEZLoadFile("Pick a file",fi$)


This will set the pattern for this requester !  BTW this was "lifted" from the
demo that came with the library.  Thanks Neil.


>Ehh, so  in other words I want to have a File requester to what I >can set
both: default path/file AND ysize...anyone have any ideas >how? Thnx! Oh, and
it would be also nice if I could set default font >to RTFontRequester...


As for defining the Verticle height ?!  I'm beat there !  And the other font
requester question, again I'm beat.  I don't think it can be done....  Sorry.

Thats why I use ASL !

>*** Ott (ott@lbi.ee)


RodderZ  Rodney Norton,Sydney AUS.  Email : rodneyn@aic.net.au
@endnode

@node "Requestor Tags" "Font Requestor Taglist"
> Here's the code:                                                            
> Bye..                                                                       
> Jarmo Laakkonen jami@dlc.fi                                               


InitTagList 1,4                                                               
Use TagList 1                                                                 
AddTags #ASL_FontHeight,13                                                    
AddTags #ASL_FuncFlags,#FONF_FIXEDWIDTH                                       
AddTags
#TAG_DONE,0                                                           


deftype .FontRequester *FontRequester
   *FontRequester=AllocAslRequest_(#ASL_FontRequest,TagList)                  









If AslRequest_(*FontRequester,0)

  Usepath *FontRequester
  NPrint "Name = ", \fo_Attr.ta_Name.
  NPrint "Size = ", \fo_Attr.ta_Ysize
  NPrint "Style = ", \fo_Attr.ta_Style 

EndIf                                                                         
FreeAslRequest_ *FontRequester                                                
End                                                                           








  I assume thats the sort of information you want?

Any probs, mail me.

Slimez

--
O------------------------------------O---------------------------------------O
| Simon N. Westerby BSc (Hons)       | AMIGA 1200/GVP 1230-II 50/50 20 Meg   |
| email: slimez@simywimy.demon.co.uk | WD 850 Meg HD / Coldstar 4x CD Drive  |
| phone: +44 (0) 1494 440841         | http://www.simywimy.demon.co.uk       |
O------------------------------------O---------------------------------------O


@endnode

@node "Taglist for ASL" "Taglist for ASL"
On Sun, 18 May 1997, John Mason wrote:

> Does anyone know how to set up a taglist for an ASL fontrequester?  I'm  >
trying to set the intial values for font, size, and colours, etc, but the  >
most I've been able to do it cause a crash :(
                                


Try to use system calls instead blitz ASL commands.

Example of ASL file requester

DEFTYPE.FileRequester *ASLFile                                                
Dim Tags.TagItem(4)   ;tag list

;Now define your taglist...                                                   
Tags(0)=#ASLFR_InitialDrawer,&YOURINITIALDRAWER$
.....                                                                         
.....                                                                         
Tags(4)=#TAG_DONE,0

;Now alloc ASL font or file requester... (for font requester use ;
;#ASL_FontRequest)

*ASLFile=AllocASLRequest_(#ASL_FileRequest,&Tags(0))

;Open your ASL requester                                                      
if ASLRequest_(*ASLFile,0)  
   ;Peek datas...
   f$=peek$(*ASLFile\fr_File)
   d$=peek$(*ASLFile\fr_Drawer)
   ;use datas...                                                              
end if

FreeASLRequest_ *ASLFile

To use TagItem, FileRequester and ASL Tags, use resident file amigalibs.res.

If you want an ASL font requester, change #ASL_FileRequest with
#ASL_FontRequest and use Font requester tags. 

Regards,

******************************************************************************
* Luca Ferraris - mail to: ferraris.luca@educ.di.unito.it                    *
* URL: http://www.di.unito.it/pub/WWW/www_student/amiga/LucaFerraris         *
* A1200 Blizzard 1230IV/882/10Mb/HD 80Mb/2 external floppy drives            *
* -------------------------------------------------------------------------- *
* Now working on APHASIA and DARK AGES - THE FIFTH TALISMAN for all Amigas   *
* -------------------------------------------------------------------------- *
******************************************************************************
@endnode

@node "ROL" "ROL ROR Commands"
 > Does anybody know how to use the ROL,ROR,ROXL and ROXR commands work? >
These commands are used to rotate bits in a word or longword, but > the manual
is not very clear (not clear at all!) about these commands..

The commands on page 252 are Assembly instructions. If you know anything about
assembly then they're self explanatory and they form some of th basics of Asm
language.

On the other hand you could use the commands in normal Blitz code and they
work in the same way as the other maths oporators which you can see on page 13
- in my manual ;)

For example

a=3 * 16 a=3 LSL 4

Z=H / 2 Z=H LSR 1

You will also find that the two groups of code will give th exact same results
since shifting bits to the left by 4 is the same as multiply by 16. Experiment
with it and you'll soon work it out. You'll also find some extra speed in the
Shift instructions. Sometimes a lot of extra speed.

Cheers,

Paul 

--  <----------------------------------------------------------------->
    Paul Burkey - Project: Foundation [###############-----] 77%
   paul@sneech.demon.co.uk -- Amiga Realtime Strategy Wargame --
  Foundation Home  http://www.sadeness.demon.co.uk/foundation.html
<----------------------------------------------------------------->
@endnode

@node "RunErr" "Runtime Error?"
On 09-Aug-97, Hans Olsen wrote:

>I have encountered a strange bug... 

>The problem now is that when one of the statements is called I get a >runtime
error, "Command only available in AMIGA mode" (I'm in BLITZ >mode) the command
it stops at is 'VWait'.

Hi,

I believe I know the problem....

The commands BLITZ and AMIGA serve two purposes :


i) Command (that is, they actually execute some code) ii) Compiler directive
(that is, they tell the compiler which mode the
                        following commands should be executed in)


To solve your problem, I suggest you put the line

BLITZ

immediately before the definition of your statement.


Sometimes it is possible for the compiler to compile a command in AMIGA mode,
but then try to execute it in BLITZ mode - hence your problem.

I don't think I've explained it well - if you want more explanation, e-mail me
personally and I'll try and think of a good example.

Regards,

Steve. --
.-----------------------------------------------------------------------------
. |Red When Excited Ltd    | WWW            http://www.ldngedge.demon.co.uk |
|2 Slimmons Drive,       | My EMail Big.Will.Riker@ldngedge.demon.co.uk | |St.
Albans,             | A1200T/040@40/18Mb/1.6Gb/33.6k/8xCDROM/1.76MbFD    | |
|Herts. AL4 9AS. ENGLAND | Company EMail  redwhen@ldngedge.demon.co.uk |
`-----------------------------------------------------------------------------
'
@endnode

@node "ScreenTags" "ScreenTags"


> is it possible to open a screen in Amiga mode without the title bar so
     > that it is impossible to drag the screen?

Are you familliar with using screentags, as this will enable you to acheive
what you want. You will need Blitzlibs:amigalibs.res resident.

  sc.l=ScreenTags(0,tit$,?ScreenTags)
  Mousewait
  Free Screen 0
  End

ScreenTags
    Dc.l    #SA_LikeWorkbench,1
    Dc.l    #SA_Quiet,1         ;removes the titlebar
    Dc.l    #SA_Draggable,1     ;makes the screen non dragable ;    Dc.l
TAG_DONE,0

    Dc.l    #SA_Width,640
    Dc.l    #SA_Height,256
    Dc.l    #SA_Depth,4
    Dc.l    #SA_DisplayID,$8000
    Dc.l    #SA_SysFont,1
    Dc.l    TAG_DONE,0


Andrew

-- Andrew Guthrie andrewg@nectar.com.au
http://www.nectar.com.au/~andrewg/edht/
@endnode

@node "Scroll" "Scrolling Screens"


gonzo@acadia.net wrote: >  >         Can someone check this code and tell me
what I'm doing wrong? I want > a simple scrolling program with a tank shape in
the middle.

Try this.

I have added variables which will alter the scrolling speed and added diagonal
movement. If you don`t want the diagonal movement then simply change the
joystick checking to Joyr(1) again.

I hope it is what you are looking for.

See you,

Liz.
 
                  Member of Desktop Corruptionn
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 tucks@pavilion.co.uk         projects:  BlitzMAP  complete
 A1200T 10meg 850hdd                     Swarm     10%

2:THING_d.txt (1351 bytes):                                                   
NEWTYPE.tank
  x.q
  y                                                                           
End NEWTYPE                                                                   
NEWTYPE.scrn
  x.q
  y                                                                           
End NEWTYPE
b.scrn\x=0                                                                    
b.scrn\y=0                                                                    
a.tank\x=100                                                                  
a.tank\y=100                                                                  
LoadPalette 0,"blitz2:programs/palette"                                       
LoadShapes 0,"blitz2:programs/tank"                                          
xspeed=2 ;these alter the scroll speed and can be different from each other  
yspeed=2                                                                      
BLITZ                                                                         
Buffer 0,16384                                                               
BitMap 0,1280,400,8                                                           
For k=1 To 100
  Box Rnd(1280),Rnd(400),Rnd(1280),Rnd(400),Rnd(7)+1                          
Next InitCopList 0,44,200,$10018,8,256,0                                      
DisplayPalette 0,0                                                           
CreateDisplay 0                                                              
DisplayBitMap 0,0                                                            
While Joyb(1)=0
  VWait
  UnBuffer 0
  If Joyx(1)=-1   ; joystick left
    If b\x>0      ; not a lefthand edge of bitmap
      b\x-xspeed  ; move bitmap
      a\x-xspeed  ; keep tank in centre of display
    EndIf
  EndIf

  If Joyx(1)=1    ; joystick right
    If b\x<960    ; not at righthand edge
      b\x+xspeed  ; move bitmap
      a\x+xspeed  ; keep tank in centre of display
    EndIf
  EndIf

  If Joyy(1)=-1   ; joystick up
    If b\y>0      ; not at top of bitmap
      b\y-yspeed  ; move bitmap
      a\y-yspeed  ; keep tank in centre of display
    EndIf
  EndIf

  If Joyy(1)=1    ; joystick down
    If b\y<200    ; not at bottom of bitmap
      b\y+yspeed  ; move bitmap
      a\y+yspeed  ; keep tank in centre of display
    EndIf
  EndIf

  BBlitMode CookieMode
  BBlit 0,0,a.tank\x,a.tank\y
  DisplayBitMap 0,0,b.scrn\x,b.scrn\y Wend End
@endnode

@node "Speed" "Speedup Programs"
I would appreciate any hints and tips on how to get time efficient code out of
Blitz for the game engine. 


Here's a few tips for you, (no order)

  1. Plan your code, making it as simple as possible
  2. Avoid using divides and @{"multiplies" link "Fast Multiply" 0} as much as possible, both are slow 
  3. Using @{"lookup tables" link "Program Speedup" 0} (arrays) for common formulas used within your code
     can increase speed at the expense of memory usage
  4. Keep @{"loops" link "Program Speedup" 0} as small as possible, put absolutely everything outside the
     loop if it can
  5. Constants are faster than variables, use them instead when possible  


When your engine is complete (or nearly) re-write some of the slower parts in
ASM if you can, particularily loops and formula (and lookups).  This will
shave vital time off your code. Also, longer code can sometimes be faster than
a single instruction

eg   MULU #9,d0  (it's been a while so syntax may be wrong!)

is slower than

     MOVE d0,d1
     ASL #3,d0       (syntax? anyway shift left3 to *8)
     ADD d1,d0

Stevie W. ---------  A1200/030/50, 18MB, 1.2G HD, 4X CDROM
http://www.geocities.com/TimesSquare/Alley/2688/ stevie_woj@hotmail.com

***************************************************************************** 










On similar note I'll let you into a few secrets I use in Founation.

The game can have up to 800 buildings and 1200 people so obviously it's not a
good idea to calculate them every frame. To make things much faster and to
avoid things getting slower as the game expands I use the following system.

Use a list of buildings from 1-800 and a list of people from 1-1200. Give each
person and building a number so some list entries will be empty and some will
contain information ie,

Building1 - Armoury Building2 - N/A Buildind3 - Farm Building4 - N/A Building5
- N/A and so on...

The people are aranged in a similar way. Then each frame I check 3 buildings
and 5 people. The checks involve health, energy, decisions etc.. if it's a
building then checks involve making things, removing things, and triggering
off events.

After the checks a counter is moved to the next set and the frame continues.
The checks will loop around forever but there is only a small portion of work
done in each frame. Knowing how best to distribute the calculations between
frames is an important part of making complex games work in fractions of a
second intervals.

The biggest problem with complex Amiga games these days is the graphic work
takes up 90% of the time and the gameplay is left to work in a very small time
scale. It's not a good situation but if you can work to these limits then you
can get some good results.

Cheers,

Paul

<----------------------------------------------------------------->
    Paul Burkey - Project: Foundation [###############-----] 78%
   paul@sneech.demon.co.uk -- Amiga Realtime Strategy Wargame --
  Foundation Home  http://www.sadeness.demon.co.uk/foundation.html
<----------------------------------------------------------------->
@endnode

@node "Shape Palette" "Shape Palette"
>How can I load a shape onto a screen with a different palette and            
>have the shape keep it's old palette?


I would do this by copying the colours from the shape into the main palette.
To keep things simple, say we have an 8 colour screen. The first 4 colours may
belong to the backgound, or things that are always on screen. If we had an 8
colour shape that only used the last 4 colours of it's palette then we could
merge the two palettes together like this.      


 InitPalette 0,8                                                              









 LoadPalette 0,"screen.pal" ;Load background Palette                      
 LoadShape 10,"shape.ilbm",1 ;Load Shape with Palette                      
 PaletteInfo 1                  ;All RI Palette Commands on this PAL         
 For c=4 To 7                   ;Copy Colours 4 to 7 fromPAL 1 to PAL 0      
   AGAPalRGB 0,c,AGAPalRed(c),AGAPalGreen(c),AGAPalBlue(c)
 Next                                                                         








Now the shape can be displayed on your screen using PAL 0 only.

***************************************************************************** 
















   Some time ago (before I need to get a job for a living), I was developing a
BIG lucas-style adventure game, and since all the program was going to push
A1200 to its video limits, it was designed to allow 256 color screens with at
least 64 color shapes with other thingies. The problem was, I couldn't use
sprites because the size/colors of the images, so I had to use tricky shapes
to speed up the thing. So, as that guy said, using the same shape over tons of
backgrounds screwed up the shape's colors, and remaping shape doesn't work
always. So, the backgrounds were examined to see how many colors were using
for sure (256 color bitmap usually uses around 64-128 colors for real), and I
create a 256 color bitmap, but leaving the unused colors to the end of the
palette (at least 64). Next, I create the shapes in a 256 color bitmap, but
ONLY using the last palette's 64 colors. After that, I could copy the right
shape colors always in the same positions in every backgroud palette, so I
hadn't to waste time remaping ever time a background changes.



I hope this can be useful for all people.



                        --------------------------
  Blitz Basic mailing list -- Brought to you by daireb@netsoc.ucd.ie To
@endnode

@node "Shp.Sprt" "Shapes & Sprites"
 On 02-Aug-97, Andreas Håkansson wrote:

> Now I'm wondering what would be best, to make them shapes or  to make them
sprites. I  have a faint memory that  sprites is  limited to  a seratin amount
of sprites, and  that  they can  only  use 16 colors. And I know that shapes
hasn't these restrictions.

You can have only 8 sprites (including the pointer) if you are using 3 colour
sprites, or 4 if you use 15 colour sprites.  Also, unless you are using AGA
only, each sprite may only be 16 pixels wide.

>It's important that  I can detect when the pointer (a sprite), has "collided"
or been placed over  an  person or object, I  know  there are many commands to
detecte collisions between  both  sprite/sprite and shape/sprit, but  only to
check if  the given sprite  has  collided  with the  given sprite  or shape. I
want to  to detecte if it  has  collided with  any sprite  or  any  shape, and
get   the sprite/shape     number.  Is     this possible?

I think the only way to do this is to make your own code for the detection, as
I know of no command to do this :(

>So what   I really  whould want  to  know, is  the advantages  and
disadvatages of using sprites, and the same  with shapes. I  think  shapes
whouled be the  best, if I'm  not to wrong. But  the  pointer whould still
have to  be a 1 colored sprite, using sprite channel 0 I think.

Sprites are faster and easier to use, if you can live with the size + colour
restrictions (and don't need more than 8).  If you can't, you will have to use
shapes.  Also note that although you can have only 3 colours, all sprites do
not have to use the SAME 3 colours.  You can also actually use more than 8,
only 8 can be displayed on screen at the same time but you can change their
images as you wish and since the sprite image is taken from a shape to start
with, you can  change back to using it as a shape when it stops moving and
then use that sprite channel for something else. 

The pointer can also have 3 colours (of course you need not use all 3)

-- 
                                            Yours electronically,
                                            Curt Esser
                                            camge@ix.netcom.com
@endnode

@node "Superbitmap" "SuperBitMap"
john owen-jones wrote:

> btw any idea what the superbitmap flag is it's mentioned in the  blitzdocs >
but no value is given for it ??

It is $0080

See you,

Liz.
 
                  Member of *Desktop Corruption*
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 tucks@pavilion.co.uk         projects:  BlitzMAP  complete
 A1200T 10meg 850hdd                     Swarm     10%
@endnode

@node "Variables" "Variables"
>hi I'm trying to localise my variables and generalise my functions a little
What i want to do is something like          

>function double{a,b,c,d}                                                     
 c=2*a

Functions just return a value. You can trick and really change variables by
using pointers to them :

Statement double{a.l,b.l,c.l,d.l}
   *Pa = a
   *Pb = b
   *Pc = c
   *Pd = d
   *Pc = 2 * *Pa End Function

double{&a,&b,&c,&d}

>ok thats roughly one form of what i want >  >second variant would be for the
first two vars to not be effected  >in the main program by any manipulation in
the local function double  >but the last two to hold the doubled values when
returning to main > Besides I think using a function for this will only slow
things down.  Fortunately for you Blitz2 is still BASIC, and thus it has the
gosub command.

a = 1 b = 2 c = 0 d = 0 Gosub Double End

Double: ;---
  c = 2 * a ;--- return > is it possible for arrays ? >2 dimentional arrays ?

Using pointers you can access any type of variable, and also gosub allows
everything to be accessed.

>btw newtypes can't be returned by functions so using newtypes >won't work > I
will when you predefine the structure in memory and let the function fill that
in. This is the way Examine_ works.

Newtype.AnyType
  x.w
  y.w
  z.w
  t.l
  r.l
  name.b[30]
  test.b[30] End Newtype

Deftype.AnyType MyType

Function DidConvert{TypePtr.l}
   status = true
   *ReadType.AnyType = TypePtr
   USEPATH *ReadType
   \x =  1
   \y =  2
   \z =  3
   \t =  0
   \r = 10
   poke$ \name,filename$            ; Don't know if this works,
   poke$ \test,"This is a test"     ; but you need the address + Offset of the
string.
   function return status End Function

if DidConvert{&MyType}
  NPrint MyType\x Endif

>anyone found answers to these problems. >(apart from coding in C or C++)

Well... it's the same technique ;)

Bye now,

Serge Veugelers
@endnode

@node "Ver$" "Version $tring"
 >   Can anyone explain how I can include a version string in a Blitz program
so the version number could be read by the cli Version command?

----------------------------------------------------------------------------

You only have to add one line to your program, that looks like this:

VER$="$VER: MyProgram 1.0 (25.7.97)"

You can name that string anything, but I usualy use VER$. The date should be
entered like that, since the version command will reformat it to your local
settings.

(You can add a comment or something after the date.)

Hans Olsen, 

 A1200/030-40/882/18/240,Surf Squirrel, ZIP, CDROM & 33k6 modem
 pt96hol@student.hk-r.se       http://www.student.hk-r.se/~pt96hol

----------------------------------------------------------------------------

As everyone was saying, use a string with "$VER: bla bla bla" in it. Don't use
any chr$(10)'s in it, as any info behind that won't work.

BUT Don't forget a space behind the string, because it is possible that the
immedeate character behind your string is text, and then your version will be
terrible. In the space, using a hex-editor, put a chr$(0).

Ralf
                                                                         


-----------------------------------------------------------------------------


Put this line somewhere in your program (probably at the end, but would be
better nearer the start)

versionstring: dc.b "$VER: myprogram 1.00",0 Even

Steve. --

  ----------------------------------------------------------------------------
---


Put this at the very top of your program, replacing the necessary details:

Goto SkipVer
  Even
  Dc.b "$VER: RefInsert 1.1 by Andy Macklin {13/02/97}"
  Even SkipVer:

I can't remember where this tip came from, but I'd attribute it if I could.

Andy -- *Refman Homepage:* http://www.toadhall.u-net.com    Team AMIGA


------------------------------------------------------------------------------
--

I always make a variable like this:

a$="$VER: MyGreatProgram 1.20 (16.08.97) (C)Marco Vigelius 1997"

The normal version command included with Workbench will only return the
version number and the program's name, but try VersionWB (available from
Aminet) and it will also return the other information included in the string.

So long!                                                                      
---/\/\-----\ \/ /-------                                                     
  / /\ \arco \  /igelius                                                      
-/ /  \ \-----\/---------


------------------------------------------------------------------------------
---


Use this:

ver$="$VER:  MyProggy v6.66"

near the top if your prog.


 #Richard Hodger# - /rick@rhodger.demon.co.uk/
#http://www.rhodger.demon.co.uk#
@endnode

