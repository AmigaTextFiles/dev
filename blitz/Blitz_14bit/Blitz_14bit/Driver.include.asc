
; Driver.include.bb2 generated by FD2inc.


DEFTYPE .Library *_DriverBase

Macro Driver_SetBuffers ; {ret,audiosize,queuesize}
   GetReg d0,`2 : GetReg d1,`3
   GetReg a6,*_DriverBase : JSR -30(a6) : PutReg d0,`1
End Macro

Macro Driver_StreamFormat ; {ret,format}
   GetReg d0,`2
   GetReg a6,*_DriverBase : JSR -36(a6) : PutReg d0,`1
End Macro

Macro Driver_AskFrequency ; {ret,frequency}
   GetReg d0,`2
   GetReg a6,*_DriverBase : JSR -42(a6) : PutReg d0,`1
End Macro

Macro Driver_ProvideStream ; {ret,left,right,samples,interleave,frequency,callback}
   GetReg a0,`2 : GetReg a1,`3 : GetReg d0,`4 : GetReg d1,`5 : GetReg d2,`6
   GetReg a2,`7
   GetReg a6,*_DriverBase : JSR -48(a6) : PutReg d0,`1
End Macro

Macro Driver_FlushStream ; {ret}
   GetReg a6,*_DriverBase : JSR -54(a6) : PutReg d0,`1
End Macro

Macro Driver_PauseStream ; {ret}
   GetReg a6,*_DriverBase : JSR -60(a6) : PutReg d0,`1
End Macro

Macro Driver_ResumeStream ; {ret}
   GetReg a6,*_DriverBase : JSR -66(a6) : PutReg d0,`1
End Macro

Macro Driver_SD_Lock ; {ret}
   GetReg a6,*_DriverBase : JSR -72(a6) : PutReg d0,`1
End Macro

Macro Driver_SD_Unlock ; {ret}
   GetReg a6,*_DriverBase : JSR -78(a6) : PutReg d0,`1
End Macro


Function.l Driver_InitLib {minVersion.l}
   SHARED *_DriverBase
   If *_DriverBase Then Function Return *_DriverBase
   If minVersion<0 Then minVersion = 0
   *_DriverBase = OpenLibrary_ ("DEVS:SoundDrivers/14bit.driver", minVersion)
   Function Return *_DriverBase
End Function


Statement Driver_FreeLib {}
   SHARED *_DriverBase
   If *_DriverBase Then CloseLibrary_ *_DriverBase : *_DriverBase = 0
End Statement



