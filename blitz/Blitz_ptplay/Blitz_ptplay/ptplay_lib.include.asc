
; ptplay_lib.include.bb2 generated by FD2inc.


DEFTYPE .Library *_PtPlayBase

Macro ptplay_PtInit ; {ret,buf,bufsize,frequency,modtype}
   GetReg a1,`2 : GetReg d0,`3 : GetReg d1,`4 : GetReg d2,`5
   GetReg a6,*_PtPlayBase : JSR -30(a6) : PutReg d0,`1
End Macro

Macro ptplay_PtRender ; {mod,destbuf1,destbuf2,bufmodulo,numsp,scale,depth,channels}
   GetReg a0,`1 : GetReg a1,`2 : GetReg a2,`3 : GetReg d0,`4 : GetReg d1,`5
   GetReg d2,`6 : GetReg d3,`7 : GetReg d4,`8
   GetReg a6,*_PtPlayBase : JSR -36(a6)
End Macro

Macro ptplay_PtTest ; {ret,filename,buf,bufsize}
   GetReg a0,`2 : GetReg a1,`3 : GetReg d0,`4
   GetReg a6,*_PtPlayBase : JSR -42(a6) : PutReg d0,`1
End Macro

Macro ptplay_PtCleanup ; {mod}
   GetReg a0,`1
   GetReg a6,*_PtPlayBase : JSR -48(a6)
End Macro

Macro ptplay_PtSetAttrs ; {mod,taglist}
   GetReg a0,`1 : GetReg a1,`2
   GetReg a6,*_PtPlayBase : JSR -54(a6)
End Macro

Macro ptplay_PtGetAttr ; {ret,mod,tagitem,storagePtr}
   GetReg a0,`2 : GetReg d0,`3 : GetReg a1,`4
   GetReg a6,*_PtPlayBase : JSR -60(a6) : PutReg d0,`1
End Macro

Macro ptplay_PtSeek ; {ret,mod,time}
   GetReg a0,`2 : GetReg d0,`3
   GetReg a6,*_PtPlayBase : JSR -66(a6) : PutReg d0,`1
End Macro


Function.l ptplay_InitLib {minVersion.l}
   SHARED *_PtPlayBase
   If *_PtPlayBase Then Function Return *_PtPlayBase
   If minVersion<0 Then minVersion = 0
   *_PtPlayBase = OpenLibrary_ ("ptplay.library",minVersion)
   Function Return *_PtPlayBase
End Function


Statement ptplay_FreeLib {}
   SHARED *_PtPlayBase
   If *_PtPlayBase Then CloseLibrary_ *_PtPlayBase : *_PtPlayBase = 0
End Statement


;-----------------------------------------------------------------------------------------


; C to Blitz conversion done by c2b.

;
; ** protracker 2.3a player
; ** (C) 2001, 2003, 2004 Ronald Hof, Timm S. Mueller and Per Johansson
; **
; ** Library modifications by Ilkka Lehtoranta
;

#PTPLAY_CIAspeed               = (#TAG_USER + $00) ; SG ULONG  Default: 125
#PTPLAY_Flags                  = (#TAG_USER + $01) ; SG ULONG  Default: MODF_ALLOWFILTER
#PTPLAY_MasterVolume           = (#TAG_USER + $02) ; SG ULONG  Default: 256
#PTPLAY_PatternPosition        = (#TAG_USER + $04) ; SG ULONG
#PTPLAY_Patterns               = (#TAG_USER + $05) ; .G ULONG  Number of patterns
#PTPLAY_SongLength             = (#TAG_USER + $07) ; .G ULONG  Song length in patterns
#PTPLAY_SongLoopCount          = (#TAG_USER + $08) ; .G ULONG  Number of loops done
#PTPLAY_SongPosition           = (#TAG_USER + $09) ; SG ULONG  Current position
#PTPLAY_SongTitle              = (#TAG_USER + $0A) ; .G STRPTR Song name
#PTPLAY_TotalTime              = (#TAG_USER + $0B) ; .G ULONG  Song length in seconds

#PT_MOD_UNKNOWN                = 0
#PT_MOD_PROTRACKER             = 1
#PT_MOD_SOUNDTRACKER           = 2
#PT_MOD_SOUNDFX                = 3

; Values for PTPLAY_Flags
;

#MODF_DOSONGEND                = $0001 ; perform song-end detection
#MODF_ALLOWPANNING             = $0002 ; allow mod to use command $8 for panning
#MODF_ALLOWFILTER              = $0004 ; allow mod to set lowpass filter
#MODF_SONGEND                  = $0008 ; songend occured


