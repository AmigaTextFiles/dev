; OS icon reading (adapted from someone else's source)

; icon$=icon you want to read
; tool$=tooltype you're looking for

Function.s ToolString {icon$,tool$}

If Right$(icon$,5)=".info" Then icon$=Left$(icon$,Len(icon$)-5)

*Icon.DiskObject=GetDiskObject_(&icon$)

; *Icon.DiskObject=GetDiskObjectNew_(&icon$)
; ^ this uses the default-type icon if there isn't one...

If *Icon
  a.l=FindToolType_(*Icon\do_ToolTypes,&tool$)
  If a
    a$=Peek$(a)
  Else a$=""
  EndIf
  FreeDiskObject_ *Icon
Else Function Return ""
EndIf

Function Return a$

End Function

; demo :

NPrint ToolString {"SYS:Tools/HDToolBox","SCSI_DEVICE_NAME"}

MouseWait
End
