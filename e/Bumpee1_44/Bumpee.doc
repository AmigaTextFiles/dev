
         Bumpee 1.44 © 1995 by Leon Woestenberg (leon@stack.urc.tue.nl)

       Smart revision bumper for your Amiga E v3.1+ compiled executables


Distributability
----------------

  Bumpee is freely distributable software. The archive must be copied as a
whole. The source code in the archive may be used to recompile the program,
however do not distribute altered or unaltered recompilations under the
name Bumpee. So, this is NOT public domain.

Introduction
------------

  Bumpee is a simple-to-use revision control program for your E sources.
The use of a standarized versionstring, introduced by Commodore-Amiga with
AmigaOS 2.04, offers a neat way to keep track of the executables generated
during program development. An example versionstring looks like this:

$VER: Bump 1.0 (6.1.94)

which contains the name, version, revision and compilation date of the
executable this string can be found in (the Bumpee tool itself here).
AmigaOS programs like the 'version' command and the 'Installer Utility'
reside on the versionstring inside your program executables.

The Concept
-----------

  Bumpee uses a standard E module that must be included in your compiled
program, that has a '_rev' suffix. For example, 'Bumpee_rev.m' for Bumpee.
This module offers you several constants that can be used throughout
your source (modules). If you include this module using:

MODULE '*<programname>_rev'

you have the following constants at your availability:

VERSION
REVISION
VERSION_DAY
VERSION_MONTH
VERSION_YEAR

in your E source. Apart from this, your executable will automagically
contain the versionstring in a Commodore-Amiga compliant way. You can
check the version of a program using the 'Version' command found in C:.

If you also switch on the macro preprocessor of EC, like this:

OPT PREPROCESSOR

you have an additional two macros at your disposal:

VERSION_STRING
VERSION_INFO

of which the first macro will be equivalent to the complete version string.
The second macro is the same, but has no '$VER:' header. This one is
particularly handy to use in 'About...' requesters or shell output.

  More specific: These macros are stringpointers and NOT typed strings. This
will keep your executables small, even if you use the macros multiple times.

Invoking Bumpee
---------------

  Bumpee has the following AmigaDOS template:

NAME/A,FORCE/S,BUMPVERSION/S,DONOTCOMPILE/S,ECFILEPATH/K

NAME/A

  The e source filename to be compiled (NOT the '_rev.e' file), either
with or without the '.e' suffix.

CREATE=FORCE/S

  This forces to bump always, even if Bumpee thinks a bump is not
appropriate (i.e. when the last program compilation failed, or when no
bumpfile exists for this e source).

You would usually set this switch one time to create the bumpfile, and
never use it again on the same source, to let Bumpee decide whether to
jump or not.

Also, if you don't have a battery back-upped clock, you would want to
FORCE bumps, as Bumpee otherwise would act on invalid creation dates.

BUMPVERSION/S

  Bump to a new version. Instead of bumping the revision number, the version
number is increased, and the revision number is reset to zero.

  You only need to set this switch on a major version bump, as revisions are
automagically bumped if necessary.

DONOTCOMPILE/S

  Keeps Bumpee from compiling the revision module.

  You only want to set this switch if you want the build utility (that
  compiles the dependancies, under which the revision module) to compile the
  revision module.

ECFILEPATH/K

  Path and filename of the E Compiler. The E Compiler is used to compile the
revision module. The default path is 'EC', that will work normally if the E
compiler is called 'EC', and resides in a search path directory.

Bumpee Usage
------------

  Bumpee must be called prior to compilation of your source. If you
want to create a bumpfile for a fresh e source, use the CREATE switch.

  If a compiled executable was already present, its date is checked against
that of the revision module. If the executable's date is later than the
module's date, the last compilation is succeeded and a bump is needed.
Otherwise, when the last compilation seems to have failed, the revision
module is not bumped, as the current revision has not been compiled yet.

  The example sources may clear things up a bit.

Requirements
------------

· Any Amiga running AmigaOS 2.04 or above.
· Amiga E (© by Wouter van Oortmerssen) would be nice.
· A battery back-upped clock is very handy, as Bumpee becomes smart by
  looking at file creation dates. However, the FORCE option can be used
  to switch off smartness, and therefore the need of a valid clock time.

Future
------

  For me, Bumpee is quite finished. However, if you come up with a
splendid idea for a new feature, let me know. If I think it's splendid too,
it may even be implemented :).

  If you, as a Bumpee user and E programmer, want to change or add things,
feel free to do so. However, do not spread your own alternations under the
name 'Bumpee', please. Instead, make up a pretty unique name.

About the author
----------------

  Die-hard Amiga E programmer (and sometimes inline coder :-), reachable
via email at leon@stack.urc.tue.nl.

  Have fun, Leon Woestenberg.



