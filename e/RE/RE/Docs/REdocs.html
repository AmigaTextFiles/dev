<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="cs" lang="cs">
<head>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2" />
<style type="text/css">
<!--
/* <![CDATA[ */

body { font-family: Verdana; font-size: small;}
pre {font-size: small;}

/* ]]> */
-->
</style>
<title>RE Amiga E compiler</title>
<base />
</head>
<body>
<hr />
<center><!-- Begin 3D Text -->
<div style="margin-left: 0px; margin-top: 0px; font-family: Arial; font-size: 24pt; fontsize: 24pt; font-weight: medium; font-style: normal; color: #909090;">
<h2>RE v0.91</h2>
</div>
<div style="margin-left: -2px; margin-top: -46px ; font-family: Arial; font-size: 24pt; fontsize: 24pt; font-weight: medium; font-style: normal; color: #0000C0;">
<h2>RE v0.91</h2>
</div>
<!-- End 3D Text --><br />Compiler for The E Language<br />By Marco Antoniazzi<br />Compiler and Language Reference
</center>
<hr />
<h3><a name="Contents">Contents:</a></h3>
<ul>
<li>0. <a href="#0">Before you start</a></li>
<li>1. <a href="#1">format</a></li>
<li>2. <a href="#2">immediate values</a></li>
<li>3. <a href="#3">expressions</a></li>
<li>4. <a href="#4">operators</a></li>
<li>5. <a href="#5">statements</a></li>
<li>6. <a href="#6">function definitions and declarations</a></li>
<li>7. <a href="#7">declaration of constants</a></li>
<li>8. <a href="#8">types</a></li>
<li>9. <a href="#9">builtin functions</a></li>
<li>10. <a href="#10">library functions and modules</a></li>
<li>11. <a href="#11">quoted expressions</a></li>
<li>12. <a href="#12">floating point support</a></li>
<li>13. <a href="#13">Exception handling</a></li>
<li>14. <a href="#14">OO programming</a></li>
<li>15. <a href="#15">inline assembly</a></li>
<li>16. <a href="#16">technical and implementation issues</a></li>
<li>17. <a href="#17">PreProcessor, debugging, Library mode and tools</a></li>
</ul>
<p><a name="0" href="#Contents">top</a> <a href="#0A" target="_top">next</a></p>
<h3><i>0. Before you start</i></h3>
<ul>
<li>A. <a href="#0A">Introduction</a></li>
<li>B. <a href="#0B">Requirements</a></li>
<li>C. <a href="#0C">Installation / Usage</a></li>
<li>D. <a href="#0D">Warranty</a></li>
<li>E. <a href="#0E">Thanks to</a></li>
<li>F. <a href="#0F">History / Todo</a></li>
</ul>
<p><a name="0A" href="#Contents" target="_top">top</a> <a href="#0" target="_top">up</a> <a href="#0B" target="_top">next</a></p>
<p><b>0A.Introduction</b></p>
<p>RE is an E language compiler (C) Marco Antoniazzi all rights reserved.<br />
This program is FREEWARE.<br />
The distribution should always be spreaded as a whole, with no additions or modifications.</p>
<p>This document highlights only the differences to the original E language. It is assumed that the reader is already familiar with it.</p>
<h4>THIS IS NOT A FULLY COMPATIBLE E COMPILER.</h4>
<p>Many of the modifications and extensions made to the language were done to ease the porting from C and from PowerD.</p>
<p>To be able to compile an "original" E source without many modifications you will have
to use an ascii version of the E-modules.
</p>
<p>It can compile to Amiga 68k or PPC WarpUP executables.
Unfortunatly recently my Amiga died :-( so testing of WUP is not possible
anymore. I am now developing it with WinUAE :-(.
</p>
<p>I am working on it during my little spare time, (it takes me about 3 years to
arrive to this stage...) so do not expect too much.
</p>
<p>English is NOT my native language so forgive me all the mistakes.
</p>
My e-mail is: luce80 AT libero . it

<p><a name="0B" href="#Contents" target="_top">top</a> <a href="#0" target="_top">up</a> <a href="#0C" target="_top">next</a></p>
<p><b>0B. Requirements</b></p>

<p>Compiler:<br />
68020+ 2MB+<br />
AmigaOS2 (v37+)<br />
PhxAss and PhxLnk to generate 68020 executables<br />
or Pasm and VLink to generate WarpUP executables.<br />
</p>
<p>Generated executables:</p>
<p>68020+ and AmigaOS2 (v37+)  or PPC and WarpOS</p>

<p><a name="0C" href="#Contents" target="_top">top</a> <a href="#0" target="_top">up</a> <a href="#0D" target="_top">next</a></p>
<p><b>0C. Installation / Usage</b></p>

<p>Just unpack the archive to somewhere and assign RE: to that directory.</p>
<p>The compiling process involves the use of 5 programs in this sequence:<br />
RE -&gt; generatoRe -&gt; OptiRe_68K -&gt; PhxAss -&gt; PhxLnk<br />
or<br />
RE -&gt; generatoRe -&gt; OptiRe_WUP -&gt; Pasm -&gt; VLink</p>
<p>Re is the main program that converts .e ascii text files to .re pseudo-assembly ascii text files.<br />
generatoRe is a DOS script that calls the other programs.<br />
Optire translates .re to .ass ascii text files containing assembly code.<br />
PhxAss/Pasm compile .ass to .o object files.<br />
PhxLnk/VLink link all objects to the final executable.</p>

<p>The command line syntax is:<br />
re SOURCE/A,DEST,NOWARN/S,ERRLINE/S,ERRBYTE/S,CPU/K,AC=ASMCOMMENT/S,NDF=NODELFILES/S, HOLD/S,SYM/S,LINEDEBUG/S,DEBUG/S,ONEERROR/S,NOEXE/S,MODDIR/K</p>
<p>where:</p>
<ul>
<li><b>SOURCE/A</b><br />
The source file name. It MUST end with .e or .d (this is different from EC)<br />
Compiling .d programs is not supported unless they do not use any particular PowerD feature.</li>
<li><b>DEST</b><br />
Optional name of the resulting executable. If not specified it will be put in the source directory without the extension (.e).</li>
<li><b>NOWARN/S</b><br />
Suppresses warnings. Defaults to FALSE.</li>
<li><b>ERRLINE/S</b><br />
Specifies that if an error occurs the program will return the line where it was located. Defaults to FALSE.</li>
<li><b>ERRBYTE/S</b><br />
Specifies that if an error occurs the program will return the byte where it was located. This switches off ERRLINE. Defaults to TRUE.</li>
<li><b>CPU/K</b><br />
If 'WUP' is specified the compiler outputs EHF WarpUP code,else outputs MC68020 code.</li>
<li><b>AC=ASMCOMMENT/S</b><br />
Prints the current source code line as a comment in the generated assembler output. Defaults to TRUE.</li>
<li><b>NDF=NODELFILES/S</b><br />
Do not delete all generated files (.re, .ass, .o). Defaults to FALSE.</li>
<li><b>HOLD/S</b><br />
Waits for a RETURN before exiting. Defaults to FALSE.</li>
<li><b>SYM/S</b><br />
Add some debug information to the executable.</li>
<li><b>LINEDEBUG/S</b><br />
Add source line information to the executable. Currently this information is useful only in combination with SYM/S for 68020 executables compiled with PhxAss and tracked with Barfly (BDebug does a very nice source level single step line debugging). Defauts to FALSE. The line number is not always right (unfortunatly).</li>
<li><b>DEBUG/S</b><br />
Switches on/off debug informations output. Defaults to FALSE.</li>
<li><b>ONEERROR/S</b><br />
When activated only the first error that occurs will be reported otherwise the program tries to continue the compilation until it finds a fatal error or the end of the source code. Defaults to FALSE.</li>
<li><b>NOEXE/S</b><br />
If specified it avoids the compilation step.</li>
<li><b>MODDIR/K</b><br />
Sets the directory where to search the MODULEs for. It must terminate with ":" or "/". Defaults to 're:modules/'</li>
</ul>
<p><a name="0D" href="#Contents" target="_top">top</a> <a href="#0" target="_top">up</a> <a href="#0E" target="_top">next</a></p>
<p><b>0D. Warranty</b></p>

<p>There are NO WARRANTIES.</p>
<p>It is impossible to guarantee that there are no bugs present. The author takes NO RESPONSIBILITY for any damage from the use of this software.</p>
<p>Usage is entirely <b>AT YOUR OWN RISK</b>.</p>

<p><a name="0E" href="#Contents" target="_top">top</a> <a href="#0" target="_top">up</a> <a href="#0F" target="_top">next</a></p>
<p><b>0E. Thanks to</b></p>
<ul>
<li>Amiga<br />
for being such a nice platform.</li>
<li>Wouter van Oortmerssen<br />
the author of E.</li>
<li>Jason Hulance<br />
for some nice docs and source codes.</li>
<li>Martin Kuchinka<br />
author of PowerD with which this program was done! and whose language 'inspired' me a lot. I have also ripped his libs and hope he can forgive me but I wouldn't have done it (and I wouldn't even have started programming RE) if he had not stop programming the PowerD.</li>
<li>Leif Salomonsson<br />
author of Yaec (AKA ECX) for the 'generate.script' and other sources and programs.</li>
</ul>
<p><a name="0F" href="#Contents" target="_top">top</a> <a href="#0" target="_top">up</a> <a href="#1" target="_top">next</a></p>
<p><b>0F. History / Todo</b></p>

<p>HISTORY:</p>
<ul>
<li>V0.91<br />
Incremented max macro level (now it is 50)<br />
Fixed FOR...IF...STEP node.Succ<br />
Fixed Optire_68k MVR-MVR, ADA-LDL-STL, ADA-LDL/W/B<br />
Fixed LOOP &lt;expr> when &lt;expr> &lt;=0<br />
Fixed LIST OF LONG with OPT MODULE and multi-lines macros<br />
Fixed negative numbers and expressions in global lists<br />
Partially fixed internal lists names</li>
<li>V0.9<br />
First public release.</li>
</ul>
<p>TODO:</p>
<ul>
<li>More optimizations especially in OptiRe.</li>
<li>Output to ELF format code, i486+ or other. The source code of the program that translates to 68k is available as an "inspiration", if anyone wants to develop versions for other CPUs. If this happens please let me know!</li>
<li>Better debugging facilities.</li>
</ul>
<p><a name="1" href="#Contents">top</a> <a href="#0" target="_top">up</a> <a href="#1A" target="_top">next</a></p>
<h3><i>1. format</i></h3>
<ul>
<li><a href="#1A">A. tabs,lf etc.</a></li>
<li><a href="#1B">B. comments</a></li>
<li><a href="#1C">C. identifiers and types</a></li>
</ul>
<p><a name="1A" href="#Contents" target="_top">top</a> <a href="#1" target="_top">up</a> <a href="#1B" target="_top">next</a></p>
<p><b>1A. tabs,lf etc.</b></p>
<p><a name="1B" href="#Contents" target="_top">top</a> <a href="#1" target="_top">up</a> <a href="#1C" target="_top">next</a></p>
<p><b>1B. comments</b></p>

<p>Added '//' to start a one-line comment.</p>
<pre>/* this is a comment */
-&gt; this one too.
// this also</pre>

<p><a name="1C" href="#Contents" target="_top">top</a> <a href="#1" target="_top">up</a> <a href="#2" target="_top">next</a></p>
<p><b>1C. identifiers and types</b></p>

<p>There are no restrictions on names characters case except for:</p>
<ul>
<li>language keywords are ALL uppercase (IF, WHILE etc.)</li>
<li>macro keywords are ALL lowercase (#ifdef, #define etc.)<br /></li>
</ul>
<p>Identifiers can not start with a number (eg. 8voices is not allowed)</p>
<p><a name="2" href="#Contents">top</a> <a href="#1" target="_top">up</a> <a href="#2A" target="_top">next</a></p>
<h3><i>2. immediate values</i></h3>
<ul>
<li><a href="#2A">A. decimal (1)</a></li>
<li><a href="#2B">B. hexadecimal ($1)</a></li>
<li><a href="#2C">C. binary (%1)</a></li>
<li><a href="#2D">D. float (1.0)</a></li>
<li><a href="#2E">E. character ("a")</a></li>
<li><a href="#2F">F. string ('bla')</a></li>
<li><a href="#2G">G. lists ([1,2,3]) and typed lists</a></li>
</ul>
<p><a name="2A" href="#Contents" target="_top">top</a> <a href="#2" target="_top">up</a> <a href="#2B" target="_top">next</a></p>
<p><b>2A. decimal (1)</b></p>
<p><a name="2B" href="#Contents" target="_top">top</a> <a href="#2" target="_top">up</a> <a href="#2C" target="_top">next</a></p>
<p><b>2B. hexadecimal ($1, 0x1)</b></p>

<p>A hexadecimal value can be preceded also by a "0x".</p>
<p>Examples: $FC, $DFF180, -$ABCD, 0xFC, 0xDff180, -0xaBcD</p>

<p><a name="2C" href="#Contents" target="_top">top</a> <a href="#2" target="_top">up</a> <a href="#2D" target="_top">next</a></p>
<p><b>2C. binary (%1, 0b1)</b></p>

<p>Binary numbers can start also with "0b".</p>
<p>Examples: %111, %1010100001, -%10101, 0b111, 0b1010100001, -0b10101</p>

<p><a name="2D" href="#Contents" target="_top">top</a> <a href="#2" target="_top">up</a> <a href="#2E" target="_top">next</a></p>
<p><b>2D. float (1.0)</b></p>
<p><a name="2E" href="#Contents" target="_top">top</a> <a href="#2" target="_top">up</a> <a href="#2F" target="_top">next</a></p>
<p><b>2E. character ("a")</b></p>

<p>It is possible to specify also some special character as in strings:</p>
\a, \b, \e, \n, \t, \\, \0 and<br />
\q a quote<br />

<p><a name="2F" href="#Contents" target="_top">top</a> <a href="#2" target="_top">up</a> <a href="#2G" target="_top">next</a></p>
<p><b>2F. string ('bla')</b></p>
<p>Strings may contain also these format signs:</p>
<ul>
<li>\j followed by the decimal number of a character ('A\j65'='AA' similar to \x in C)</li>
<li>\q a quote</li>
<li>\S a space (ascii 32, necessary with \xa see below)</li>
<li>\x extended format code for dates and macros followed by one of following characters:
<ul>
<li>Y compilation year (4 digits)</li>
<li>y compilation year (2 digits)</li>
<li>M compilation month (3 characters as defined by locale preferences)</li>
<li>m compilation month (2 digits)</li>
<li>w compilation weekday (string as defined by locale preferences)</li>
<li>d compilation date</li>
<li>h compilation hour (2 digits: 00-24)</li>
<li>p compilation minute</li>
<li>s compilation second</li>
</ul>
</li>
</ul>
<ul>
<li>a macro argument</li>
</ul>
Example:<br />
<pre>#define Version 12
#define Revision 55
#define Copyright(ver,rev) ' V. \xaver.\xarev\S(\xd-\xm-\xy) (C) Marco Antoniazzi'

CHAR '$VER: '+Copyright(Version,Revision)</pre>

<p>will output something like:</p>

<pre>'$VER: V. 12.55 (01-01-08) (C) Marco Antoniazzi'</pre>
<p>note the use of '\S' to add a space since otherwise it would have been 'eaten' by the macro's argument.</p>
<p>You can also concatenate strings with numbers that will be converted to ascii string:</p>
<p>Example:</p>
<pre>#define Revision 55

CHAR '$VER: V.'+12+'.'+Revision+' (C) Marco Antoniazzi'</pre>

<p>will result in:</p>

<pre>'$VER: V.12.55 (C) Marco Antoniazzi'</pre>

<p>To specify an apostrophe in strings you can also double it.</p>
Example: 'Amiga''s keybord' instead of 'Amiga\as keybord'

<p><a name="2G" href="#Contents" target="_top">top</a> <a href="#2" target="_top">up</a> <a href="#3" target="_top">next</a></p>
<p><b>2G. lists ([1,2,3]) and typed lists</b></p>

<p>Do not build too complex (and/or nested) structures with them.</p>
<p>If you use a list like this: [1+a,2,3] the first member will be calculated each time at runtime.
To make it clear, this is a static list:</p>

<pre>[1,2,3] /* equivalent to: LONG 1,2,3 */</pre>

<p>this is not fully static:</p>

<pre>[1,a,3] /* equivalent to: LONG 1,0,3 and the second member is calculated and put in (static) memory at runtime*/</pre>

<p>You can use "constant expressions" see <a href="#6B" target="_top">6B</a>.</p>
<p><a name="3" href="#Contents">top</a> <a href="#2" target="_top">up</a> <a href="#3A" target="_top">next</a></p>
<h3><i>3. expressions</i></h3>
<ul>
<li><a href="#3A">A. format</a></li>
<li><a href="#3B">B. precedence and grouping</a></li>
<li><a href="#3C">C. types of expressions</a></li>
<li><a href="#3D">D. function calls</a></li>
</ul>
<p><a name="3A" href="#Contents" target="_top">top</a> <a href="#3" target="_top">up</a> <a href="#3B" target="_top">next</a></p>
<p><b>3A. format</b></p>
<p><a name="3B" href="#Contents" target="_top">top</a> <a href="#3" target="_top">up</a> <a href="#3C" target="_top">next</a></p>
<p><b>3B. precedence and grouping</b></p>

<p>The RE language HAS precedences, but you can change them with OPT PREC (see <a href="#16A">16A</a>)</p>

Example:<br />
<pre>1+2*3 /* =7 (not 9 as in E)*/</pre>

<p>Precedence depends on priority. First are processed first, commas separate operators with same priority.</p>
<p>RE: - (negation) NOT ~ , &lt;&lt; &gt;&gt; * / , + - , AND OR XOR &amp; | , = &lt;&gt; &gt; &lt; &gt;= &lt;=<br />
E: - (negation) NOT ~ , &lt;&lt; &gt;&gt; * / + - , = &lt;&gt; &gt; &lt; &gt;= &lt;= , AND OR XOR &amp; |<br />
D: - (negation) NOT ~ , &lt;&lt; &gt;&gt; , * / , + - , = &lt;&gt; &gt; &lt; &gt;= &lt;= , AND OR XOR &amp; |<br />
C: - (negation) NOT ~ , * / , + - , &lt;&lt; &gt;&gt; , = &lt;&gt; &gt; &lt; &gt;= &lt;= , AND OR XOR &amp; |</p>

<p><a name="3C" href="#Contents" target="_top">top</a> <a href="#3" target="_top">up</a> <a href="#3D" target="_top">next</a></p>
<p><b>3C. types of expressions</b></p>
<p><a name="3D" href="#Contents" target="_top">top</a> <a href="#3" target="_top">up</a> <a href="#4" target="_top">next</a></p>
<p><b>3D. function calls ( test(a,) )</b></p>

<p>You can use also empty arguments and its default value will be used. See <a href="#6F">6F</a></p>
<p><a name="4" href="#Contents">top</a> <a href="#3" target="_top">up</a> <a href="#4A" target="_top">next</a></p>
<h3><i>4. operators</i></h3>
<ul>
<li><a href="#4A">A. math (+ - * /)</a></li>
<li><a href="#4B">B. comparison (= &lt;&gt; &gt; &lt; &gt;= &lt;=)</a></li>
<li><a href="#4C">C. logical and bitwise (AND OR XOR NOT)</a></li>
<li><a href="#4D">D. unary (SIZEOF ` ^ &amp; {} ++ -- -)</a></li>
<li><a href="#4E" target="_top">E. triple (IF THEN ELSE)</a></li>
<li><a href="#4F" target="_top">F. structure (.)</a></li>
<li><a href="#4G">G. array ([])</a></li>
<li><a href="#4H">H. float operator (!)</a></li>
<li><a href="#4I">I. assignments expressions (:=)</a></li>
<li><a href="#4J">J. sequencing (BUT)</a></li>
<li><a href="#4K">K. dynamic memory allocation (NEW)</a></li>
<li><a href="#4L">L. unification (&lt;=&gt;)</a></li>
<li><a href="#4M">M. pointer typing (::)</a></li>
</ul>
<p><a name="4A" href="#Contents" target="_top">top</a> <a href="#4" target="_top">up</a> <a href="#4B" target="_top">next</a></p>
<p><b>4A. math (+ - * /)</b></p>
<p><a name="4B" href="#Contents" target="_top">top</a> <a href="#4" target="_top">up</a> <a href="#4C" target="_top">next</a></p>
<p><b>4B. comparison (= &lt;&gt; &gt; &lt; &gt;= &lt;=)</b></p>

<p>Pay attention to grouping:</p>

<pre>IF a&lt;b AND c=1 THEN ...</pre>

<p>This probably will not behave correctly, change it to this:</p>

<pre>IF (a&lt;b) AND (c=1) THEN ...</pre>

<p><a name="4C" href="#Contents" target="_top">top</a> <a href="#4" target="_top">up</a> <a href="#4D" target="_top">next</a></p>
<p><b>4C. logical and bitwise (AND OR XOR NOT)</b></p>

<p>Added &amp; and | as synonyms for AND and OR (as in E there is no real difference between logical and bitwise use of them).</p>
<p>Added also NOT and XOR (eclusive OR) and ~ as synonym of NOT. See also note for <a href="#4B" target="_top">4B</a>.</p>

<p><a name="4D" href="#Contents" target="_top">top</a> <a href="#4" target="_top">up</a> <a href="#4E" target="_top">next</a></p>
<p><b>4D. unary (SIZEOF ^ {} &amp; ++ -- `)</b></p>
<ul>
<li>SIZEOF &lt;objectident&gt; | &lt;CHAR etc.&gt;
<p>simply returns the value of the size of a certain object or of a type</p>
<p>Example: SIZEOF INT /* =2 */</p>
</li>
<li>{&lt;var&gt;}
<p>Not well implemented. Present only for compatibility reasons. Use &amp; instead (see below)</p>
</li>
<li>&amp;&lt;var&gt; Same as {&lt;var&gt;}.
<p>Returns the address of a variable or label.</p>
</li>
<li>^&lt;var&gt;
<p>Not well implemented. Beware of it. See also <a href="#4M">4M</a>.</p>
</li>
<li>&lt;varexp&gt;++ and &lt;varexp&gt;--
<p>Not well implemented. It currently behaves like in E but it will soon change. It will behave more like in C and act on members.</p>
</li>
<li>`&lt;var&gt; Same as in E.
<p>See also <a href="#11A" target="_top">11A</a>.</p>
</li>
</ul>
<p><a name="4E" href="#Contents" target="_top">top</a> <a href="#4" target="_top">up</a> <a href="#4F" target="_top">next</a></p>
<p><b>4E. triple (IF THEN ELSE)</b></p>
<p><a name="4F" href="#Contents" target="_top">top</a> <a href="#4" target="_top">up</a> <a href="#4G" target="_top">next</a></p>
<p><b>4F. structure (.)</b></p>

<p><a name="4G" href="#Contents" target="_top">top</a> <a href="#4" target="_top">up</a> <a href="#4H" target="_top">next</a></p>
<p><b>4G. array ([])</b></p>

<p>Added 2-dimensional arrays (experimental, not well implemented).</p>
<p>&lt;var&gt;[&lt;indexexp1&gt;,&lt;indexexp2&gt;]</p>
<p>Examples:</p>
<pre>DEF a[5,6],b[8,7]:ARRAY OF LONG
x:=a[4,3] /* same as x:=a[4*5*1+3] */
y:=b[4,3] /* same as x:=b[4*8*4+3] */</pre>

<p>See also <a href="#6B" target="_top">6B</a> for the use of 'constant expressions'</p>
<p>This is very experimental, do not trust on it, and is subject to
change to a different syntax: DEF a[5][6]</p>
<p><a name="4H" href="#Contents" target="_top">top</a> <a href="#4" target="_top">up</a> <a href="#4I" target="_top">next</a></p>
<p><b>4H. float operator (!)</b></p>

<p>See <a href="#12A" target="_top">12A</a></p>

<p><a name="4I" href="#Contents" target="_top">top</a> <a href="#4" target="_top">up</a> <a href="#4J" target="_top">next</a></p>
<p><b>4I. assignments expressions (:=)</b></p>

<p>See <a href="#5C" target="_top">5C</a>.</p>

<p><a name="4J" href="#Contents" target="_top">top</a> <a href="#4" target="_top">up</a> <a href="#4K" target="_top">next</a></p>
<p><b>4J. sequencing (BUT)</b></p>

<p>Not well implemented.</p>

<p><a name="4K" href="#Contents" target="_top">top</a> <a href="#4" target="_top">up</a> <a href="#4L" target="_top">next</a></p>
<p><b>4K. dynamic memory allocation (NEW)</b></p>

<p>Not implemented. But see <a href="#14E" target="_top">14E</a></p>

<p><a name="4L" href="#Contents" target="_top">top</a> <a href="#4" target="_top">up</a> <a href="#4M" target="_top">next</a></p>
<p><b>4L. unification (&lt;=&gt;)</b></p>

<p>Not implemented. Probably will never be.</p>

<p><a name="4M" href="#Contents" target="_top">top</a> <a href="#4" target="_top">up</a> <a href="#5" target="_top">next</a></p>
<p><b>4M. pointer typing (::)</b></p>

<p>Added ::&lt;type> where type is CHAR, LONG etc.
This lets overloading (pointer typing) the type.</p>
Example:<br />
<pre>DEF a:PTR TO CHAR,b

a:='abcdefgh'
b:=a::LONG[1]  /* same as b:=Long(a+4) and results in b being "efgh" */
</pre>
<p>The line above can be read as:<br />
Take the contents of var a (the address of a string), then take the
LONG which is at offset SIZEOF LONG*1 (in this case) from this address and put
it in var b.</p>

<pre>b:=a[1]::LONG  /* same as b:=Long(a+1) and results in b being "bcde" */</pre>

<p>This is different because the calculations are done before "knowing" that we
want to access a LONG.</p>

<pre>a::LONG[]:=b  /* same as ^a:=b */</pre>

<p>Note: this is an experimental addition, not very tested.</p>

<p><a name="5" href="#Contents">top</a> <a href="#4" target="_top">up</a> <a href="#5A" target="_top">next</a></p>
<h3><i>5. statements</i></h3>
<ul>
<li><a href="#5A">A. format (;)</a></li>
<li><a href="#5B">B. statement labels and gotos (JUMP)</a></li>
<li><a href="#5C">C. assignment (:=)</a></li>
<li><a href="#5D">D. assembly mnemonics</a></li>
<li><a href="#5E">E. conditional statement (IF)</a></li>
<li><a href="#5F">F. for-statement (FOR)</a></li>
<li><a href="#5G">G. while-statement (WHILE)</a></li>
<li><a href="#5H">H. repeat-statement (REPEAT)</a></li>
<li><a href="#5I">I. loop-statement (LOOP)</a></li>
<li><a href="#5J">J. selectcase-statement (SELECT)</a></li>
<li><a href="#5K">K. increase statement (INC/DEC)</a></li>
<li><a href="#5L">L. void expressions (VOID)</a></li>
<li><a href="#5M">M. memory deallocation (END)</a></li>
<li><a href="#5N">N. early exit and skip (EXIT/NEXTIF)</a></li>
<li><a href="#5O">O. sub-programs (GOSUB)</a></li>
<li><a href="#5P">P. single-step debugging (TRACEON)</a></li>
</ul>
<p><a name="5A" href="#Contents" target="_top">top</a> <a href="#5" target="_top">up</a> <a href="#5B" target="_top">next</a></p>
<p><b>5A. format (;)</b></p>
<p><a name="5B" href="#Contents" target="_top">top</a> <a href="#5" target="_top">up</a> <a href="#5C" target="_top">next</a></p>
<p><b>5B. statement labels and gotos (JUMP)</b></p>
<p><a name="5C" href="#Contents" target="_top">top</a> <a href="#5" target="_top">up</a> <a href="#5D" target="_top">next</a></p>
<p><b>5C. assignment (:=)</b></p>

<p>Added multiple assignments +=, -=, *=, /=, &amp;=, |=, &lt;&lt;=, &gt;&gt;=</p>
<p>Example:</p>
<pre>a += b /* same as a := a + b */</pre>

<p>Added swap: &lt;var>:=:&lt;var> (idea taken from CreativE and PowerD)</p>
<p>Example:</p>
<pre>a :=: b /* same as tmp:=a ; a:=b ; b:=tmp */</pre>

<p><a name="5D" href="#Contents" target="_top">top</a> <a href="#5" target="_top">up</a> <a href="#5E" target="_top">next</a></p>
<p><b>5D. assembly mnemonics (ASM)</b></p>

<p>These are removed and will not be implemented.</p>
<p>Added ASM and ENDASM to mix E code and assembly.</p>
<p>Example:</p>
<pre>/* some code here */
ASM
  moveq #0,d0
  add.l d1,d0
  jmp (a0)
ENDASM
/* some code here */</pre>
<p>There is NO check on what is written between ASM and ENDASM. It is simply copied inside the output.</p>
<p>Obviously if you write a program for PPC it is expected that you put PPC assembly code between these keywords.</p>
<p>See also <a href="#6A" target="_top">6A</a> and <a href="#15A" target="_top">15A</a>.</p>

<p><a name="5E" href="#Contents" target="_top">top</a> <a href="#5" target="_top">up</a> <a href="#5F" target="_top">next</a></p>
<p><b>5E. conditional statement (IF)</b></p>

<p>Added IFN for compatibility with PowerD. It is same as IF NOT.</p>

<p><a name="5F" href="#Contents" target="_top">top</a> <a href="#5" target="_top">up</a> <a href="#5G" target="_top">next</a></p>
<p><b>5F. for-statement (FOR)</b></p>
<p>FOR, TO/IF, STEP, DO, ENDFOR</p>

<p>Added new form similar to C.</p>
syntax: FOR &lt;var&gt; := &lt;exp&gt; IF &lt;exp1&gt; STEP &lt;exp2&gt; DO &lt;statement&gt;<br />
or: FOR &lt;var&gt; := &lt;exp&gt; IF &lt;exp1&gt; STEP &lt;exp2&gt;<br />
&lt;statements&gt;<br />
ENDFOR<br />

<p>The assignment is evaluated first then if &lt;exp1&gt; is TRUE the
statement(s) are processed and at last &lt;exp2&gt; is evaluated and
the loop starts again.</p>

<p>Example:</p>
<pre>FOR node:=list.Head IF node.Succ STEP node:=node.Succ DO PrintF(node.Name)</pre>

<p><a name="5G" href="#Contents" target="_top">top</a> <a href="#5" target="_top">up</a> <a href="#5H" target="_top">next</a></p>
<p><b>5G. while-statement (WHILE)</b></p>
<p>WHILE, DO, ELSEWHILE, ALWAYS, ENDWHILE</p>

<p>Added ELSEWHILE, ALWAYS (idea taken from PowerD)</p>

syntax: WHILE &lt;exp1&gt;<br />
&lt;statements1&gt;<br />
[ ELSEWHILE &lt;exp2&gt;<br />
&lt;statements2&gt;<br />
ALWAYS<br />
&lt;statements&gt;]<br />
ENDWHILE<br />

<p>&lt;statements1&gt; are repeated as long as &lt;exp1&gt; is TRUE, &lt;statements2&gt;
are repeated as long as &lt;exp2&gt; is TRUE, if at leat one of &lt;exp&gt; is
TRUE &lt;statements&gt; are repeated. The loop ends when all &lt;exp&gt; give FALSE.<br />
Multiple ELSEWHILEs are allowed but only one ALWAYS.</p>
Example:
<pre>a:='02cEf'
WHILE (a[]&gt;="0") AND (a[]&lt;="9")
  num&lt;&lt;=4
  num|=a[]-"0"
ELSEWHILE (a[]&gt;="a") AND (a[]&lt;="f")
  num&lt;&lt;=4
  num|=a[]-"a"+10
ELSEWHILE (a[]&gt;="A") AND (a[]&lt;="F")
  num&lt;&lt;=4
  num|=a[]-"A"+10
ALWAYS
  a++
ENDWHILE</pre>

<p><a name="5H" href="#Contents" target="_top">top</a> <a href="#5" target="_top">up</a> <a href="#5I" target="_top">next</a></p>
<p><b>5H. repeat-statement (REPEAT)</b></p>
<p><a name="5I" href="#Contents" target="_top">top</a> <a href="#5" target="_top">up</a> <a href="#5J" target="_top">next</a></p>
<p><b>5I. loop-statement (LOOP)</b></p>

<p>Added optional &lt;exp&gt;</p>

syntax: LOOP [&lt;exp&gt;]<br />
&lt;statements&gt;<br />
ENDLOOP<br />
<br />
If &lt;exp&gt; is present the loop repeats as many times as the result of the &lt;exp&gt;. This is (should be) an optimized version for a counted loop. It behaves exactly like a FOR/TO but is (should be) faster.<br />
<br />
Example:
<pre>LOOP 4
 PrintF('Hi')
ENDLOOP

Prints 'HiHiHiHi'</pre>

<p><a name="5J" href="#Contents" target="_top">top</a> <a href="#5" target="_top">up</a> <a href="#5K" target="_top">next</a></p>
<p><b>5J. selectcase-statement (SELECT)</b></p>

<p>SELECT &lt;maxrange&gt; OF &lt;exp&gt; is not implemented, but ',' and 'TO' are.</p>
<p>You can use also an expression as argument of SELECT but you can use only a number or a constant expression as argument of a CASE. See <a href="#6Bce">6B</a></p>
<p><a name="5K" href="#Contents" target="_top">top</a> <a href="#5" target="_top">up</a> <a href="#5L" target="_top">next</a></p>
<p><b>5K. increase statement (INC/DEC)</b></p>

<p>Not implemented. Probably will never be.</p>

<p><a name="5L" href="#Contents" target="_top">top</a> <a href="#5" target="_top">up</a> <a href="#5M" target="_top">next</a></p>
<p><b>5L. void expressions (VOID)</b></p>
<p>Not implemented. Probably will never be.</p>

<p><a name="5M" href="#Contents" target="_top">top</a> <a href="#5" target="_top">up</a> <a href="#5N" target="_top">next</a></p>
<p><b>5M. memory deallocation (END)</b></p>
<p>Implemented ONLY for objects. See <a href="#14E" target="_top">14E</a></p>

<p><a name="5N" href="#Contents" target="_top">top</a> <a href="#5" target="_top">up</a> <a href="#5O" target="_top">next</a></p>
<p><b>5N. early exit and skip (EXIT/NEXTIF)</b></p>
<p>In every loop structure you can place a EXIT &lt;boolexp&gt; to exit the loop if &lt;boolexp&gt; is TRUE (as in E).</p>
<p>Added NEXTIF &lt;boolexp&gt;. You can place it in every loop structure.<br />
If &lt;boolexp&gt; is TRUE all following statements will be skipped and the loop will continue from the beginning.(idea taken from PowerD)</p>
<p>Example:</p>
<pre>FOR a:=1 IF a&lt;=5 STEP a++
  PrintF('\d',a)
  NEXTIF a=3
  PrintF('Hi')
ENDFOR

will print: '1Hi2Hi34Hi5Hi'</pre>

<p><a name="5O" href="#Contents" target="_top">top</a> <a href="#5" target="_top">up</a> <a href="#5P" target="_top">next</a></p>
<p><b>5O. sub-programs (GOSUB)</b></p>
<p>YYESSSS!!. GOSUB is back ;)</p>

<p>Added GOSUB, SUB, ENDSUB. These lets you jump to a piece of code inside the procedure.</p>
<p>caller's syntax: GOSUB &lt;name&gt;<br />
body's syntax: SUB &lt;name&gt;<br />
&lt;statements&gt;<br />
ENDSUB</p>

<p>When a GOSUB &lt;name&gt; is encountered the program flows jump to the SUB/ENDSUB block and then returns back to the statement following the GOSUB. There is no arguments passing. Many SUBs may appear but they cannot be nested. They can be placed anywhere inside a procedure but it is recommended to place them on the bottom of it.</p>

<p><a name="5P" href="#Contents" target="_top">top</a> <a href="#5" target="_top">up</a> <a href="#6" target="_top">next</a></p>
<p><b>5P. single-step debugging (TRACEON)</b></p>

<p>Not really a statement but MUST be placed inside a procedure. See <a href="#17B" target="_top">17B</a>.</p>

<p><a name="6" href="#Contents">top</a> <a href="#5" target="_top">up</a> <a href="#6A" target="_top">next</a></p>
<h3><i>6. function definitions and declarations</i></h3>
<ul>
<li><a href="#6A" target="_top">A. proc definition and arguments (PROC)</a></li>
<li><a href="#6B" target="_top">B. local and global definitions: scope (DEF)</a></li>
<li><a href="#6C" target="_top">C. endproc/return D. the "main" function</a></li>
<li><a href="#6E" target="_top">E. builtin system variables</a></li>
<li><a href="#6F" target="_top">F. default arguments to function</a></li>
<li><a href="#6G" target="_top">G. multiple return values</a></li>
<li><a href="#6H" target="_top">H. function values</a></li>
</ul>
<p><a name="6A" href="#Contents" target="_top">top</a> <a href="#6" target="_top">up</a> <a href="#6B" target="_top">next</a></p>
<p><b>6A. proc definition and arguments (PROC)</b></p>

<p>Added possibility to pass arguments in registers (idea taken from PowerD).</p>

<p>syntax: PROC &lt;label&gt;(&lt;arg&gt; REG &lt;register&gt;)</p>

<p>Added kind of inlined procedures (idea taken from PowerD).</p>

<p>syntax: PROC &lt;label&gt;(&lt;args&gt;)=&lt;string&gt;</p>

<p>Example:</p>
<pre>PROC Not(a REG d0)='not.l\td0'</pre>

It is not possible to pass arguments both on stack and in registers.<br />
It is not possible to pass arguments on stack for inlined procedures.<br />
Note that passing arguments in registers other than for library functions definitions, for inlined procedures or for procedures containing only an ASM/ENDASM block does not make sense.<br />
Note that the string of inline assembly must NOT start with a tab nor end with a line feed.<br />
The contents of the strings is placed in the .ass file without any
check as for ASM/ENDASM (see <a href="#5D">5D</a>).<br />
See also <a href="#10B">10B</a>.<br />
<p>Do not confuse this usage of REG with registerized local variables.</p>
<p>To be more compatible with PowerD the list of arguments can be followed by something inside round brackets but it is simply skipped.</p>
<p><a name="6B" href="#Contents" target="_top">top</a> <a href="#6" target="_top">up</a> <a href="#6C" target="_top">next</a></p>
<p><b>6B. local and global definitions: scope (DEF)</b></p>
<p>Added new feature:</p>
<p>syntax: DEF PTR TO &lt;type&gt; &lt;list of vars&gt;</p>

<p>sets &lt;type&gt; to be the default one (instead of CHAR)</p>
<p>Example:</p>
<pre>normal style:
DEF a:PTR TO LONG,b:PTR TO LONG,c:PTR TO LONG,d:PTR TO INT,e:PTR TO INT,f,g

new style:
DEF PTR TO LONG a,b,c,d:PTR TO INT,e:PTR TO INT,f:PTR TO CHAR,g:PTR TO CHAR

or

DEF PTR TO LONG a,b,c,d
DEF PTR TO INT e,f
DEF g,h</pre>

<p>Added the possibility to use a <a name="6Bce">'constant expression'</a> (an expression that evaluates to an integer number) as the default value but:</p>
<ul>
<li>Only integer numbers or constants allowed</li>
<li>Grouping with parenthesis is NOT allowed</li>
<li>Only + - * / &lt;&lt; &gt;&gt; &amp; | OR AND allowed as operators</li>
<li><b>THERE IS NO PRECEDENCE</b></li>
</ul>

Example:
<pre>DEF a=1+2*3 /* =9 as in E */</pre>
Added new keyword IMPORT.<br />
syntax: IMPORT DEF ecc.<br />
<br />
to be used inside .o files (OPT NOEXE) to access variables defined
inside another .o file.
Note that to 'import' a procedure you have to use LIBRARY LINK instead (see <a href="#10B">10B</a>).

<p>Added possibility to declare a variable not only at the beginning of the procedure.</p>

<p><a name="6C" href="#Contents" target="_top">top</a> <a href="#6" target="_top">up</a> <a href="#6D" target="_top">next</a></p>
<p><b>6C. endproc/return</b></p>
<p><a name="6D" href="#Contents" target="_top">top</a> <a href="#6" target="_top">up</a> <a href="#6E" target="_top">next</a></p>
<p><b>6D. the "main" function</b></p>
<p><a name="6E" href="#Contents" target="_top">top</a> <a href="#6" target="_top">up</a> <a href="#6F" target="_top">next</a></p>
<p><b>6E. builtin system variables</b></p>
<p><a name="6F" href="#Contents" target="_top">top</a> <a href="#6" target="_top">up</a> <a href="#6G" target="_top">next</a></p>
<p><b>6F. default arguments to function</b></p>

<p>Default arguments can be omitted also if not last one but must be separated by a comma. (idea taken from PowerD)</p>
<p>Example:</p>
<pre>bla(a,,2) or bla(,b,) etc.</pre>

<p><a name="6G" href="#Contents" target="_top">top</a> <a href="#6" target="_top">up</a> <a href="#6H" target="_top">next</a></p>
<p><b>6G. multiple return values</b></p>
<p><a name="6H" href="#Contents" target="_top">top</a> <a href="#6" target="_top">up</a> <a href="#7" target="_top">next</a></p>
<p><b>6H. function values</b></p>
<p>Function values can be stored also in an object member and called from there.</p>
<p>Example:</p>
<pre>myobj.Entry:={myproc}	->get proc ptr
...
myobj.Entry(a,b,c)	->call proc
</pre>
notes:<br />
<ul>
<li>Same as in E! (so pay attention)</li>
<li>even worse: pay double attention to OO methods.</li>
</ul>

<p><a name="7" href="#Contents">top</a> <a href="#6" target="_top">up</a> <a href="#7A" target="_top">next</a></p>
<h3><i>7. declaration of constants</i></h3>
<ul>
<li><a href="#7A" target="_top">A. const (CONST)</a></li>
<li><a href="#7B" target="_top">B. enumerations (ENUM)</a></li>
<li><a href="#7C" target="_top">C. sets (SET)</a></li>
<li><a href="#7D" target="_top">D. builtin constants</a></li>
</ul>
<p><a name="7A" href="#Contents" target="_top">top</a> <a href="#7" target="_top">up</a> <a href="#7B" target="_top">next</a></p>
<p><b>7A. const (CONST)</b></p>
<p>Constants must NOT be uppercase but it remains a good programming style to keep them uppercase or at least start with an uppercase.</p>

<p><a name="7B" href="#Contents" target="_top">top</a> <a href="#7" target="_top">up</a> <a href="#7C" target="_top">next</a></p>
<p><b>7B. enumerations (ENUM)</b></p>
<p><a name="7C" href="#Contents" target="_top">top</a> <a href="#7" target="_top">up</a> <a href="#7D" target="_top">next</a></p>
<p><b>7C. sets (SET)</b></p>
<p><a name="7D" href="#Contents" target="_top">top</a> <a href="#7" target="_top">up</a> <a href="#8" target="_top">next</a></p>
<p><b>7D. builtin constants</b></p>
<p><a name="8" href="#Contents">top</a> <a href="#7" target="_top">up</a> <a href="#8A" target="_top">next</a></p>
<h3><i>8. types</i></h3>
<ul>
<li><a href="#8A" target="_top">A. about the "type" system</a></li>
<li><a href="#8B" target="_top">B. the basic type (LONG/PTR)</a></li>
<li><a href="#8C" target="_top">C. the simple type (CHAR/INT/LONG)</a></li>
<li><a href="#8D" target="_top">D. the array type (ARRAY)</a></li>
<li><a href="#8E" target="_top">E. the complex type (STRING/LIST)</a></li>
<li><a href="#8F" target="_top">F. the compound type (OBJECT)</a></li>
<li><a href="#8G" target="_top">G. initialisation</a></li>
</ul>
<p><a name="8A" href="#Contents" target="_top">top</a> <a href="#8" target="_top">up</a> <a href="#8B" target="_top">next</a></p>
<p><b>8A. about the "type" system</b></p>
<p><a name="8B" href="#Contents" target="_top">top</a> <a href="#8" target="_top">up</a> <a href="#8C" target="_top">next</a></p>
<p><b>8B. the basic type (LONG/PTR)</b></p>
<p><a name="8C" href="#Contents" target="_top">top</a> <a href="#8" target="_top">up</a> <a href="#8D" target="_top">next</a></p>
<p><b>8C. the simple type (CHAR/INT/LONG)</b></p>

<p>Added BYTE, UBYTE, WORD, UWORD.<br />
UBYTE is same as CHAR and WORD is same as INT.</p>

<p><a name="8D" href="#Contents" target="_top">top</a> <a href="#8" target="_top">up</a> <a href="#8E" target="_top">next</a></p>
<p><b>8D. the array type (ARRAY)</b></p>

<p>See <a href="#4G" target="_top">4G</a>.</p>

<p><a name="8E" href="#Contents" target="_top">top</a> <a href="#8" target="_top">up</a> <a href="#8F" target="_top">next</a></p>
<p><b>8E. the complex type (STRING/LIST)</b></p>
<p><a name="8F" href="#Contents" target="_top">top</a> <a href="#8" target="_top">up</a> <a href="#8G" target="_top">next</a></p>
<p><b>8F. the compound type (OBJECT)</b></p>

<p>Added UNIONs like in C.</p>
<p>Example:</p>
<pre>OBJECT InputEvent
  NextEvent:PTR TO InputEvent
  Class:UBYTE
  SubClass:UBYTE
  Code:UWORD
  Qualifier:UWORD
  UNION position
    OBJECT xy
      x:WORD
      y:WORD
    ENDOBJECT
    addr:LONG
    OBJECT dead
      Prev1DownCode:CHAR
      Prev1DownQual:CHAR
      Prev2DownCode:CHAR
      Prev2DownQual:CHAR
    ENDOBJECT
  ENDUNION
  TimeStamp:TimeVal
ENDOBJECT
#define ieY position.xy.y</pre>

The UNION inside this OBJECT has 3 elements all of which must have the same size.<br />
<br />
Added OBJECTs inside OBJECTs like in C.<br />
Example:
<pre>OBJECT IEPointerPixel
  Screen:PTR TO Screen
  OBJECT Position
    X:WORD
    Y:WORD
  ENDOBJECT
ENDOBJECT</pre>

Is same as:
<pre>OBJECT Position
  X:WORD
  Y:WORD
ENDOBJECT
OBJECT IEPointerPixel
  Screen:PTR TO Screen
  Position:Position
ENDOBJECT</pre>

<p><a name="8G" href="#Contents" target="_top">top</a> <a href="#8" target="_top">up</a> <a href="#9" target="_top">next</a></p>
<p><b>8G. initialisation</b></p>

<p><a name="9" href="#Contents">top</a> <a href="#8" target="_top">up</a> <a href="#9A" target="_top">next</a></p>
<h3><i>9. builtin functions</i></h3>
<ul>
<li><a href="#9A" target="_top">A. io functions</a></li>
<li><a href="#9B" target="_top">B. strings and string functions</a></li>
<li><a href="#9C" target="_top">C. lists and list functions</a></li>
<li><a href="#9D" target="_top">D. intuition support functions</a></li>
<li><a href="#9E" target="_top">E. graphics support functions</a></li>
<li><a href="#9F" target="_top">F. system support functions</a></li>
<li><a href="#9G" target="_top">G. math and other functions</a></li>
<li><a href="#9H" target="_top">H. string and list linking functions</a></li>
<li><a href="#9I" target="_top">I. lisp-cells and cell functions</a></li>
</ul>
<p><a name="9A" href="#Contents" target="_top">top</a> <a href="#9" target="_top">up</a> <a href="#9B" target="_top">next</a></p>
<p><b>9A. io functions</b></p>

<p>Out is buffered.</p>

<p><a name="9B" href="#Contents" target="_top">top</a> <a href="#9" target="_top">up</a> <a href="#9C" target="_top">next</a></p>
<p><b>9B. strings and string functions</b></p>

<p>Functions that manipulate strings are separated from those that manipulate estrings.</p>

<p><a name="9C" href="#Contents" target="_top">top</a> <a href="#9" target="_top">up</a> <a href="#9D" target="_top">next</a></p>
<p><b>9C. lists and list functions</b></p>

<p>See also <a href="#11C" target="_top">11C</a> and <a href="#9H" target="_top">9H</a></p>

<p><a name="9D" href="#Contents" target="_top">top</a> <a href="#9" target="_top">up</a> <a href="#9E" target="_top">next</a></p>
<p><b>9D. intuition support functions</b></p>
<p><a name="9E" href="#Contents" target="_top">top</a> <a href="#9" target="_top">up</a> <a href="#9F" target="_top">next</a></p>
<p><b>9E. graphics support functions</b></p>
<p><a name="9F" href="#Contents" target="_top">top</a> <a href="#9" target="_top">up</a> <a href="#9G" target="_top">next</a></p>
<p><b>9F. system support functions</b></p>

mem:=ReNewR(n)<br />
<br />
Allocates n bytes of memory with flags $10005 (MEMF_PUBLIC + MEMF_CLEAR) but first creates a private global pool if it does not already exists, and raises the "MEM" exception if it fails.<br />
<br />
ReDispose(mem)<br />
<br />
Frees memory allocated by ReNewR().<br />
<br />
ReDisposeAll()<br />

<p>Frees ALL memory by destroing the global private pool. This is automatically called at the end of the program if NEW is used.</p>

<p><a name="9G" href="#Contents" target="_top">top</a> <a href="#9" target="_top">up</a> <a href="#9H" target="_top">next</a></p>
<p><b>9G. math and other functions</b></p>
<p><a name="9H" href="#Contents" target="_top">top</a> <a href="#9" target="_top">up</a> <a href="#9I" target="_top">next</a></p>
<p><b>9H. string and list linking functions</b></p>

<p>Not implemented.</p>

<p><a name="9I" href="#Contents" target="_top">top</a> <a href="#9" target="_top">up</a> <a href="#10" target="_top">next</a></p>
<p><b>9I. lisp-cells and cell functions</b></p>

<p>Not implemented. Probably will never be.</p>

<p><a name="10" href="#Contents">top</a> <a href="#9" target="_top">up</a> <a href="#10A" target="_top">next</a></p>
<h3><i>10. library functions and modules</i></h3>
<ul>
<li><a href="#10A" target="_top">A. builtin library calls</a></li>
<li><a href="#10B" target="_top">B. interfacing to the amiga system with the modules</a></li>
<li><a href="#10C" target="_top">C. compiling own modules</a></li>
<li><a href="#10D" target="_top">D. the modulecache</a></li>
</ul>
<p><a name="10A" href="#Contents" target="_top">top</a> <a href="#10" target="_top">up</a> <a href="#10B" target="_top">next</a></p>
<p><b>10A. builtin library calls</b></p>
<p><a name="10B" href="#Contents" target="_top">top</a> <a href="#10" target="_top">up</a> <a href="#10C" target="_top">next</a></p>
<p><b>10B. interfacing to a library</b></p>

By default MODULEs are searched in 're:modules/'.<br />
If the string begins with a '**' the specified path is searched.<br />
If the string begins with a '*' the source's path is searched.<br />
The modules for the system structures were translated using the program H2RE (see <a href="#17D" target="_top">17D</a>). This means also that the names are those used in the original C headers but without the pre-underscore part.<br />
<b>WARNING:</b> most of the modules are NOT fixed.<br />
<br />
To use the functions of a shared library (like those whose name ends with .library) you have to create a list of its functions with the LIBRARY keyword (or use Fd2Rem see <a href="#17D" target="_top">17D</a>). (idea taken from PowerD)<br />
<br />
syntax: LIBRARY &lt;basename&gt;<br />
&lt;funcname&gt;(&lt;register's list&gt;)=&lt;negative offset&gt;,<br />
...<br />
&lt;funcname&gt;(&lt;register's list&gt;)=&lt;negative offset&gt;<br />
<br />
Example:
<pre>LIBRARY AslBase
AllocFileRequest()=-30,
FreeFileRequest(a0)=-36,
RequestFile(a0)=-42,
AllocAslRequest(d0,a0)=-48,
FreeAslRequest(a0)=-54,
AslRequest(a0,a1)=-60</pre>

To use the functions of a linked library (normally ending with .lib) whose functions expect values on the stack do this:<br />
<br />
syntax: LIBRARY LINK<br />
&lt;funcname&gt;(&lt;parameter's list&gt;) [OF &lt;objname&gt;],
...<br />
&lt;funcname&gt;(&lt;parameter's list&gt;) [OF &lt;objname&gt;]<br />
<br />
Example:
<pre>LIBRARY LINK
FileLength(name),
Val(s,n=0),
node() OF tree</pre>

<p>As shown in the example you can use also OO methods.<br />
Pay attention to the order in which parameters are put on stack!</p>

<p>To use the functions of a linked library (normally ending with .lib) whose functions expect values in registers do this:</p>

<p>syntax: LIBRARY LINK REG<br />
&lt;funcname&gt;(&lt;parameter's list&gt;)[[=&lt;string>]|[ASM &lt;string>]],<br />
...<br />
&lt;funcname&gt;(&lt;parameter's list&gt;)</p>

<p>Example:</p>
<pre>LIBRARY LINK REG
 DupEStr(a0),
 DupEStrPooled(a0,a1),
 EStrAdd(a0,a1,d0=-1),
 EStrLen(a0)='moveq\t#0,d0 \n\tmove.w\t-2(a0),d0',
 Byte(a3) ASM ' LDB d0 a3\n EXB d0\n', -><b>MUST</b> add the newline
 StringF(a0,a1,a2=NIL:LIST OF LONG)</pre>

See also <a href="#6A">6A</a> for inlined procedures.<br />
Those followed by ASM are also inlined but they use the internal
assembly language.<br />
Note the use of 'LIST OF LONG' to denote a variable-length list of parameters.<br />
Note also the absence of the comma after the last line.<br />

<p>You can place this declaration inside the main program or in a different file and give it a name ending in .m and use MODULE to 'import' it.</p>
<p>Currently there is not the possibility to import procedures whose parameters
are passed on the stack in reverse order (like C ones) so you have to do
something like this:</p>

<pre>OPT LINK='68k/amiga.lib'
LIBRARY LINK
 DoMethodA(o,m),
 DoSuperMethodA(c,o,m)

#define doMethodA(a,b) DoMethodA(b,a)
#define doSuperMethodA(a,b,c) DoSuperMethodA(c,b,a)
</pre>
<p><a name="10C" href="#Contents" target="_top">top</a> <a href="#10" target="_top">up</a> <a href="#10D" target="_top">next</a></p>
<p><b>10C. compiling own modules</b></p>

<p>Implemented differently since there are not binary modules.</p>
<p>If you write OPT MODULE then TWO files will be generated: a compiled .o file containing the code and an ascii .m file containing all the rest and a LIBRARY LINK definition (see <a href="#10B" target="_top">10B</a>).You can EXPORT only procedures.</p>
<p>You can also compile directly to an .o file with OPT NOEXE(,NOHEAD) (see <a href="#16A" target="_top">16A</a>) and/or use linked libraries (see <a href="10B" target="_top">10B</a>).</p>
<p>When writing .o files preserve ALL registers except d0. You can use d6 and a6 as scratch registers.</p>

<p><a name="10D" href="#Contents" target="_top">top</a> <a href="#10" target="_top">up</a> <a href="#11" target="_top">next</a></p>
<p><b>10D. the modulecache</b></p>

<p>Not implemented.</p>

<p><a name="11" href="#Contents">top</a> <a href="#10" target="_top">up</a> <a href="#11A" target="_top">next</a></p>
<h3><i>11. quoted expressions</i></h3>
<ul>
<li><a href="#11A" target="_top">A. quoting and scope</a></li>
<li><a href="#11B" target="_top">B. Eval()</a></li>
<li><a href="#11C" target="_top">C. builtin functions</a></li>
</ul>
<p><a name="11A" href="#Contents" target="_top">top</a> <a href="#11" target="_top">up</a> <a href="#11B" target="_top">next</a></p>
<p><b>11A. quoting and scope</b></p>

<p>BUG: If you want to call a procedure inside a quoted expression you have to do it at the beginning.</p>

<p><a name="11B" href="#Contents" target="_top">top</a> <a href="#11" target="_top">up</a> <a href="#11C" target="_top">next</a></p>
<p><b>11B. Eval()</b></p>
<p><a name="11C" href="#Contents" target="_top">top</a> <a href="#11" target="_top">up</a> <a href="#12" target="_top">next</a></p>
<p><b>11C. builtin functions</b></p>
<p>Not implemented.</p>

<p><a name="12" href="#Contents">top</a> <a href="#11" target="_top">up</a> <a href="#12A" target="_top">next</a></p>
<h3><i>12. floating point support</i></h3>
<ul>
<li><a href="#12A" target="_top">A. float values</a></li>
<li><a href="#12B" target="_top">B. computing with floats</a></li>
<li><a href="#12C" target="_top">C. builtin float functions</a></li>
<li><a href="#12D" target="_top">D. float implementation issues</a></li>
</ul>
<p><a name="12A" href="#Contents" target="_top">top</a> <a href="#12" target="_top">up</a> <a href="#12B" target="_top">next</a></p>
<p><b>12A. float values</b></p>
<p><a name="12B" href="#Contents" target="_top">top</a> <a href="#12" target="_top">up</a> <a href="#12C" target="_top">next</a></p>
<p><b>12B. computing with floats</b></p>

<p>Pay particular attention with the PPC (which has FPU exceptions disabled).</p>
<p>Pay attention also to these kind of situations:</p>
<pre>a:=!Fsin(x) /*do not do: a:=Fsin(x) */
a:=!b*(!c-d) /*do not do: a:=!b*(c-d) since expressions inside brackets are integer by default*/
a:=(10-1)! /*do not do: a:=(10-1!) since (because of precedences) it is interpreted as a:=10-(1!)</pre>

<p><a name="12C" href="#Contents" target="_top">top</a> <a href="#12" target="_top">up</a> <a href="#12D" target="_top">next</a></p>
<p><b>12C. builtin float functions</b></p>
<p><a name="12D" href="#Contents" target="_top">top</a> <a href="#12" target="_top">up</a> <a href="#13" target="_top">next</a></p>
<p><b>12D. float implementation issues</b></p>

<p>Your computer MUST have a floating point unit</p>

<p><a name="13" href="#Contents">top</a> <a href="#12" target="_top">up</a> <a href="#13A" target="_top">next</a></p>
<h3><i>13. Exception handling</i></h3>
<ul>
<li><a href="#13A" target="_top">A. defining exception handlers (HANDLE/EXCEPT)</a></li>
<li><a href="#13B" target="_top">B. using the Raise() function</a></li>
<li><a href="#13C" target="_top">C. defining exceptions for builtin-functions (RAISE/IF)</a></li>
</ul>
<p><a name="13A" href="#Contents" target="_top">top</a> <a href="#13" target="_top">up</a> <a href="#13B" target="_top">next</a></p>
<p><b>13A. defining exception handlers (HANDLE/EXCEPT)</b></p>
<p><a name="13B" href="#Contents" target="_top">top</a> <a href="#13" target="_top">up</a> <a href="#13C" target="_top">next</a></p>
<p><b>13B. using the Raise() function</b></p>
<p><a name="13C" href="#Contents" target="_top">top</a> <a href="#13" target="_top">up</a> <a href="#14" target="_top">next</a></p>
<p><b>13C. defining exceptions for builtin-functions (RAISE/IF)</b></p>

<p><a name="14" href="#Contents">top</a> <a href="#13" target="_top">up</a> <a href="#14A" target="_top">next</a></p>
<h3><i>14. OO programming</i></h3>
<ul>
<li><a href="#14A" target="_top">A. OO features in E</a></li>
<li><a href="#14B" target="_top">B. object inheritance</a></li>
<li><a href="#14C" target="_top">C. data hiding</a></li>
<li><a href="#14D" target="_top">D. methods and virtual methods</a></li>
<li><a href="#14E" target="_top">E. Constructors, Destructors and Super-Methods (NEW,END,SUPER)</a></li>
</ul>
<p><a name="14A" href="#Contents" target="_top">top</a> <a href="#14" target="_top">up</a> <a href="#14B" target="_top">next</a></p>
<p><b>14A. OO features in E</b></p>
<p><a name="14B" href="#Contents" target="_top">top</a> <a href="#14" target="_top">up</a> <a href="#14C" target="_top">next</a></p>
<p><b>14B. object inheritance</b></p>
<p><a name="14C" href="#Contents" target="_top">top</a> <a href="#14" target="_top">up</a> <a href="#14D" target="_top">next</a></p>
<p><b>14C. data hiding</b></p>

<p>Not implemented. The keywords PUBLIC and PRIVATE are simply ignored.</p>

<p><a name="14D" href="#Contents" target="_top">top</a> <a href="#14" target="_top">up</a> <a href="#14E" target="_top">next</a></p>
<p><b>14D. methods and virtual methods</b></p>
<p><a name="14E" href="#Contents" target="_top">top</a> <a href="#14" target="_top">up</a> <a href="#15" target="_top">next</a></p>
<p><b>14E. Constructors, Destructors and Super-Methods (NEW,END,SUPER)</b></p>
<p>NEW does support ONLY object creation. And END ONLY object destruction.</p>

<p><a name="15" href="#Contents">top</a> <a href="#14" target="_top">up</a> <a href="#15A" target="_top">next</a></p>
<h3><i>15. inline assembly</i></h3>
<ul>
<li><a href="#15A" target="_top">A. identifier sharing</a></li>
<li><a href="#15B" target="_top">B. the inline assembler compared to a macro assembler</a></li>
<li><a href="#15C" target="_top">C. ways using binary data (INCBIN/CHAR..)</a></li>
<li><a href="#15D" target="_top">D. OPT ASM</a></li>
</ul>
<p><a name="15A" href="#Contents" target="_top">top</a> <a href="#15" target="_top">up</a> <a href="#15B" target="_top">next</a></p>
<p><b>15A. identifier sharing</b></p>
<p>Not implemented. Not CPU independent.</p>

<p><a name="15B" href="#Contents" target="_top">top</a> <a href="#15" target="_top">up</a> <a href="#15C" target="_top">next</a></p>
<p><b>15B. the inline assembler compared to a macro assembler</b></p>
<p>Not implemented. Not CPU independent.</p>

<p><a name="15C" href="#Contents" target="_top">top</a> <a href="#15" target="_top">up</a> <a href="#15D" target="_top">next</a></p>
<p><b>15C. ways using binary data (INCBIN/CHAR..)</b></p>
<p><a name="15D" href="#Contents" target="_top">top</a> <a href="#15" target="_top">up</a> <a href="#16" target="_top">next</a></p>
<p><b>15D. OPT ASM</b></p>

<p>Not implemented. Not CPU independent.</p>

<p><a name="16" href="#Contents">top</a> <a href="#15" target="_top">up</a> <a href="#16A" target="_top">next</a></p>
<h3><i>16. technical and implementation issues</i></h3>
<ul>
<li><a href="#16A" target="_top">A. the OPT keyword</a></li>
<li><a href="#16B" target="_top">B. small/large model</a></li>
<li><a href="#16C" target="_top">C. stack organisation</a></li>
<li><a href="#16D" target="_top">D. hardcoded limits</a></li>
<li><a href="#16E" target="_top">E. error messages, warnings and the unreferenced check</a></li>
<li><a href="#16F" target="_top">F. compiler buffer organisation and allocation</a></li>
<li><a href="#16G" target="_top">G. register allocation</a></li>
<li><a href="#16H" target="_top">H. reserved keywords</a></li>
</ul>
<p><a name="16A" href="#Contents" target="_top">top</a> <a href="#16" target="_top">up</a> <a href="#16B" target="_top">next</a></p>
<p><b>16A. the OPT keyword</b></p>
OPT NOWARN, DIR, NOHEAD, NOSTD, NOEXE, CPU, PREC, LINK, LIBRARY, OPTIMIZE, MODULE<br />

<p>syntax: OPT &lt;options&gt;,...</p>
<p>allows you to change some compiler settings:</p>
<ul>
<li><b>NOWARN</b><br />
Switches off printing of warnings such as 'Unreferenced variable...'</li>
<li><b>DIR='moduledir'</b><br />
Sets the directory where the compiler searches for modules. Must terminate with ":" or "/".default='re:modules/'</li>
<li><b>NOHEAD</b><br />
Disable linking with startup object. In case you don't need it or want to use your own. (idea taken from PowerD)<br />
Beware that doing so you have no library bases not even ExecBase!</li>
<li><b>NOSTD</b><br />
Disable reading of standard module containing useful functions and references to useful functions.<br />
(idea taken from PowerD)</li>
<li><b>NOEXE</b><br />
Disable the linker pass and only output a .o file.</li>
<li><b>CPU='&lt;cpu&gt;'</b><br />
Lets you choose to what CPU the generated code is for. Currently only '68K' and 'WUP' are allowed.</li>
<li><b>PREC='&lt;char&gt;'</b><br />
Sets the precedence of operators and can be one of:<br />
'E','D','C','R'.<br />
Defaults to 'R' which means RE.</li>
<li><b>LINK='file'</b><br />
Lets you link with the specified object file. This information is passed directly to the linker.<br />
(idea taken from PowerD).<br />
If the file name starts with a "*" see <a href="#10B" target="_top">10B</a>.
</li>
<li><b>LIBRARY</b><br />
See <a href="#17C" target="_top">17C</a>.</li>
<li><b>OPTIMIZE</b><br />
Enables optimizations. Currently there is only one. Remove repeated strings. Beware of this, because if you statically modify a string all the other same strings will be modified too. Other optimizations are (more or less) implemented in Optire and in the assembler.</li>
<li><b>MODULE</b><br />
See <a href="#10C" target="_top">10C</a>.</li>
<li><b>EXPORT</b><br />
As in E. Let access all procedures of a module.</li>
</ul>
<p><a name="16B" href="#Contents" target="_top">top</a> <a href="#16" target="_top">up</a> <a href="#16C" target="_top">next</a></p>
<p><b>16B. small/large model</b></p>
<p>Always large model.</p>

<p><a name="16C" href="#Contents" target="_top">top</a> <a href="#16" target="_top">up</a> <a href="#16D" target="_top">next</a></p>
<p><b>16C. stack organisation</b></p>

<p>Since the generated output tries to use the stack as little as possible, you could run out of registers if you build too complex (nested) program structures (and RE can not detect it).</p>

<p>PPC programs have a PRIVATE stack of 8K. They do NOT conform to PowerOpen or any other ABI.</p>

<p><a name="16D" href="#Contents" target="_top">top</a> <a href="#16" target="_top">up</a> <a href="#16E" target="_top">next</a></p>
<p><b>16D. hardcoded limits</b></p>

<p>Note these signs: (+-) just about, depends on situation,(n.l.) no clear limit, but this seems reasonable.</p>

<table cellspacing="0" cellpadding="5" rules="all" align="left" border="2" frame="box">
<tr><td><b>OBJECT/ITEM</b></td><td><b>SIZE/AMOUNT/MAX</b></td></tr>
<tr><td>value datatype CHAR</td> <td>0 .. 255</td></tr>
<tr><td>value datatype UBYTE</td> <td>0 .. 255</td></tr>
<tr><td>value datatype BYTE</td> <td>-128 .. 127</td></tr>
<tr><td>value datatype INT</td> <td>-32 k .. +32 k</td></tr>
<tr><td>value datatype WORD</td> <td>-32 k .. +32 k</td></tr>
<tr><td>value datatype UWORD</td> <td>0 .. 64 k</td></tr>
<tr><td>value datatype LONG/PTR</td> <td>-2 gig .. +2 gig</td></tr>

<tr><td>identifierlength</td> <td>100 bytes (n.l.)</td></tr>
<tr><td>length of one source line</td> <td>2000 lexical tokens (+-)</td></tr>
<tr><td>source length</td> <td>2 gig (theoretically)</td></tr>
<tr><td>constant lists</td> <td>few hundred elements (+-)</td></tr>
<tr><td>constant strings</td> <td>1000 chars (n.l.)</td></tr>
<tr><td>max. nesting depth of loops (IF, FOR etc.)</td> <td>100 deep</td></tr>
<tr><td>max. nesting depth of comments</td> <td>infinite</td></tr>

<tr><td>#of local variables per procedure</td> <td>the less the better</td></tr>
<tr><td>#of global variables</td> <td>8000</td></tr>
<tr><td>#of arguments to own functions</td> <td>the less the better</td></tr>
<tr><td>#of arguments to E-varargs functions (WriteF())</td> <td>64</td></tr>

<tr><td>one object (allocated local/global or dyn.)</td> <td>8 k</td></tr>
<tr><td>one array, list or string (local or global)</td> <td>?</td></tr>
<tr><td>one string (dynamically)</td> <td>?</td></tr>
<tr><td>one list (dynamically)</td> <td>?</td></tr>
<tr><td>one array (dynamically)</td> <td>2 gig</td></tr>

<tr><td>local data per procedure</td> <td>250 meg</td></tr>
<tr><td>global data</td> <td>250 meg&lt;</td></tr>

<tr><td>code size of one procedure</td> <td>?</td></tr>
<tr><td>code size of executable</td> <td>2 gig</td></tr>
<tr><td>current practical limit (may extend in future)</td> <td>2-5 meg</td></tr>

<tr><td>buffersize of generated code and identifiers</td> <td>relative to source</td></tr>
<tr><td>buffersize of labels/branches and intermediate</td> <td>independantly (re)allocated</td></tr>
</table>
<br clear="all" />

<p><a name="16E" href="#Contents" target="_top">top</a> <a href="#16" target="_top">up</a> <a href="#16F" target="_top">next</a></p>
<p><b>16E. error messages, warnings and the unreferenced check</b></p>
<p>They are completly different from E. Too many to mention.<br />
When an error occurs the program shows the exact spot where it is.<br />
Some time and/or for some type of errors this can not always be true.<br />
See also NOWARN and ONEERROR in <a href="#0C" target="_top">0C</a>.</p>

<p><a name="16F" href="#Contents" target="_top">top</a> <a href="#16" target="_top">up</a> <a href="#16G" target="_top">next</a></p>
<p><b>16F. compiler buffer organisation and allocation</b></p>
<p>When you get the error 'Out of memory' (very unlikely), you have to buy a memory expansion.</p>

<p><a name="16G" href="#Contents" target="_top">top</a> <a href="#16" target="_top">up</a> <a href="#16H" target="_top">next</a></p>
<p><b>16G. register allocation</b></p>

<p>Not implemented.</p>

<p><a name="16H" href="#Contents" target="_top">top</a> <a href="#16" target="_top">up</a> <a href="#17" target="_top">next</a></p>
<p><b>16H. reserved keywords</b></p>

<p>Reserved keywords:<br />
<br />
standard:<br />
<br />
AND, ARRAY, ASM, BUT, CASE, CHAR, CONST,<br />
DEF, DEFAULT, DIR, DO, ELSE, ELSEIF, ELSEWHILE,<br />
END, ENDFOR, ENDIF, ENDLOOP, ENDOBJECT, ENDPRO,<br />
ENDSELECT, ENDWHILE, ENUM, EXCEPT, EXIT, EXPORT,<br />
FOR, HANDLE, IF, INCBIN, INT, IS,<br />
JUMP, LIBRARY, LINK, LIST, LONG, LOOP, MODULE,<br />
NEW, NOWARN, NOP, OBJECT, OF, OPT, OR, PROC, PTR, RAISE,<br />
REG, REPEAT, RETURN, SELECT, SET, SIZEOF, STEP, STRING,<br />
SUPER, THEN, TO, UNTIL, WHILE<br />
<br />
new:<br />
<br />
ALWAYS, BYTE, CPU, ENDASM, ENDSUB, ENDUNION, GOSUB, IFN,<br />
IMPORT, NEXTIF, NOEXE, NOHEAD, NOSTD, NOT, OPTIMIZE, PREC, SUB,<br />
TRACEOFF, TRACEON, UBYTE, UNION, UWORD, WORD, XOR<br />
<br />
Also reserved but unused:<br />
<br />
DEC, INC, LARGE, OSVERSION, PPC, PRIVATE, PUBLIC, STACK, VOID</p>

<p><a name="17" href="#Contents">top</a> <a href="#16" target="_top">up</a> <a href="#17A" target="_top">next</a></p>
<h3><i>17. PreProcessor, debugging, Library mode and tools</i></h3>
<ul>
<li><a href="#17A" target="_top">A. PreProcessor</a></li>
<li><a href="#17B" target="_top">B. single-step debugging (TRACEON)</a></li>
<li><a href="#17C" target="_top">C. Library mode</a></li>
<li><a href="#17D" target="_top">D. H2RE</a></li>
<li><a href="#17E" target="_top">E. FD2REM</a></li>
</ul>
<p><a name="17A" href="#Contents" target="_top">top</a> <a href="#17" target="_top">up</a> <a href="#17B" target="_top">next</a></p>
<p><b>17A. PreProcessor</b></p>

<p>Added #else, #undefine.<br />
Macro definitions must be at the beginning of a line.<br />
Comments part of a macro definition ARE removed.<br />
Macro arguments in string constants are NOT replaced, see <a href="#2F" target="_top">2F</a>.</p>

<p>Example:</p>
<pre>#ifdef DEBUG
#define DBPrintF PrintF
#else
#define DBPrintF()
#endif

/* some code here */

DBPrintF('debug output')

/* some code here */
</pre>
if DEBUG is defined the line above is same as: PrintF('debug output') else is nothing.<br />
<br />
Note the use of round brackets:<br />
No brackets to define a synonym of a function name or<br />
empty brackets to avoid examining function arguments.

<p><a name="17B" href="#Contents" target="_top">top</a> <a href="#17" target="_top">up</a> <a href="#17C" target="_top">next</a></p>
<p><b>17B. single-step debugging (TRACEON/TRACEOFF)</b></p>

Added TRACEON/TRACEOFF for nice-simple-experimental-single-step debugging.<br />
<br />
syntax: TRACEON &lt;string&gt; &lt;null-terminated list of var addresses&gt;<br />
/* traced code here */<br />
TRACEOFF<br />
<br />
Example:
<pre>DEF bla,blerk
/* some code here */
TRACEON 'bla:\d blerk:\h\n' [&amp;bla,&amp;blerk,0]
/* some (traced) code here */
TRACEOFF
/* some code here */</pre>

If the TRACEON keyword is placed inside the source, a LOT of debugging code is placed inside the executable and it is linked with re:lib/CPU/trace.o that outputs the debugging informations to a console window.<br />
The string can be null and the list empty but must be present them both.<br />
No more than 8 variable addresses allowed.<br />
The DOSBase must be valid while traceing.<br />
While in trace mode the current line of the source code is printed and then it waits for a &lt;cr&gt; to print the next line or an &lt;esc&gt; to skip debugging output.<br />
<br />
WARNING:The tracing console window closes itself only if the last executed<br />
TRACEON/TRACEOFF is placed BEFORE the main()'s ENDPROc keyword.<br />

<p>Since the list is static, the output is not right for recursed procedures.</p>

<p><a name="17C" href="#Contents" target="_top">top</a> <a href="#17" target="_top">up</a> <a href="#17D" target="_top">next</a></p>
<p><b>17C. Library mode</b></p>

syntax: OPT LIBRARY &lt;name&gt;,&lt;version number&gt;,&lt;revision number&gt;,&lt;versionstring&gt;,&lt;base&gt; IS &lt;list of functions&gt;<br />
<br />
Example:

<pre>/* you MUST define an OBJECT like this and the global variable that points to it */

OBJECT MyToolsBase
/* these 4 members are mandatory */
  library :Library
  flags :BYTE
  pad :BYTE
  segment :LONG
/* optional members here */
ENDOBJECT

DEF MyToolsBase:PTR TO MyToolsBase

OPT LIBRARY 'mytools.library',3,1,'MyTools 3.1 (12.1.08)',MyToolsBase IS MyFunc1,MyFunc2,...
</pre>
This is different from E, it is much like in PowerD.<br />
By default OPT NOHEAD is defined.<br />
Pay attention to use the same right names and in the right order.<br />
<br />
You MUST also define the 4 procedures:<br />
customInitLib, customExpungeLib, customOpenLib, customCloseLib<br />
Inside these you can do your initializations.<br />
<br />
A file &lt;libraryname&gt;.m containing a LIBRARY definition is created automatically.<br />

<p>WARNING: there are problems with global variables with PPC, better avoid them.</p>

<p><a name="17D" href="#Contents" target="_top">top</a> <a href="#17" target="_top">up</a> <a href="#17E" target="_top">next</a></p>
<p><b>17D. H2RE</b></p>

Used to convert C headers (.h) to RE MODULEs.<br />
It does not a perfect job. You will have to fix its output.<br />
The template is:<br />
h2re FILE/A,DESTDIR/K,NSN=NOSHORTNAMES/S,TS=TABTOSPACE/S, SC=SKIPCOMMENT/S,NR=NORECURSION/S<br />

<p>where:</p>
<ul>
<li><b>FILE/A</b><br />
The name of the input file or directory.</li>
<li><b>DESTDIR/K</b><br />
The name of the directory where to place converted files.</li>
<li><b>NSN=NOSHORTNAMES/S</b><br />
Normally short-names are activated and a name like "abc_defg" will be truncated to "defg" , pay attention to this. Defaults to FALSE.</li>
<li><b>TS=TABTOSPACE/S</b><br />
Converts tabs to 2 spaces ('&nbsp;&nbsp;'). Defaults to FALSE.</li>
<li><b>SC=SKIPCOMMENT/S</b><br />
Strips out comments. Defaults to TRUE.</li>
<li><b>NR=NORECURSION/S</b><br />
Do not recursively enters sub directories. Defaults to TRUE.<br /></li>
</ul>

<p><a name="17E" href="#Contents" target="_top">top</a> <a href="#17" target="_top">up</a> <a href="#17E" target="_top">next</a></p>
<p><b>17E. FD2REM</b></p>

<p>Converts .fd files to RE .m files.</p>
</body>
</html>
