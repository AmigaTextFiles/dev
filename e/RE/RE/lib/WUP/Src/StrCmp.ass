
# StrCmp(a0:PTR TO CHAR,a1:PTR TO CHAR,d0=-1:LONG)

	.include	ppcmacros.pasm
	.text
	.global	_StrCmp

_StrCmp:
	mtctr	d0
	subi	a0,a0,1
	subi	a1,a1,1
.loop:	lbzu	r0,1(a0)
	lbzu	a6,1(a1)
	cmpw	a6,r0
	bne	.nosame		# strings are different
	mr.	r0,r0		# zero (eos) byte?
	beq	.same
	bdnz	.loop

.same:	li	d0,-1
	b	.finish
.nosame:	li	d0,0
.finish:	blr

	.type	_StrCmp,@function
	.size	_StrCmp,$-_StrCmp
