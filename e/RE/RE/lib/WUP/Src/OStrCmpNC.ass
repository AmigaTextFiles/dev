
# OStrCmpNC(a0:PTR TO CHAR,a1:PTR TO CHAR,d0=-1:LONG)

	.include	ppcmacros.pasm
	.text
	.global	_OStrCmpNC

_OStrCmpNC:
	mtctr	d0
	subi	a0,a0,1
	subi	a1,a1,1
.loop:	lbzu	r7,1(a0)

	cmplwi	r7,91
	bgt	.next1
	cmplwi	r7,65
	blt	.next1
	addi	r7,r7,32
.next1:
	lbzu	r8,1(a1)
	cmplwi	r8,91
	bgt	.next2
	cmplwi	r8,65
	blt	.next2
	addi	r8,r8,32
.next2:
	cmpw	r8,r7
	bne	.nosam		# strings are different
	mr.	r7,r7		# zero (eos) byte?
	beq	.same
	bdnz	.loop

.same:	li	d0,0
	blr
.nosam:	cmpw	r8,r7
	bgt	.great
	li	d0,-1
	blr
.great:	li	d0,1
	blr

	.type	_OStrCmpNC,@function
	.size	_OStrCmpNC,$-_OStrCmpNC
