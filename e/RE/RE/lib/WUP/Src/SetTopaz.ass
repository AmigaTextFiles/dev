#rE
	.include	ppcmacros.pasm
	.text
	.sdreg	r2
	.align	2
#MOD:re:modules/graphics.m
#MOD:re:modules/graphics/text.m
#MOD:re:modules/exec/ports.m
#MOD:re:modules/exec/nodes.m
#MOD:re:modules/exec/types.m
#MOD:re:modules/exec/lists.m
#MOD:re:modules/exec/tasks.m
#MOD:re:modules/graphics/gfx.m
#MOD:re:modules/utility/tagitem.m
#MOD:re:modules/lib/restd_PPC.m
	.global	_SetTopaz
_SetTopaz:
.set	SetTopaz_size,8
	link	a5,-4
	push	a0
#DEF font
.set	SetTopaz_font,-4
#IF font:=OpenFont(['topaz.font',size,0,0]:TextAttr) THEN SetFont(stdrast,font)
#SetTopaz_if1
	push	d0
	law	a0,_list1
	addi	a0,a0,4
	lwz	d1,SetTopaz_size(a5)
	sth	d1,0(a0)
	addi	a0,a0,2
	liw	d1,0
	stb	d1,0(a0)
	addi	a0,a0,1
	liw	d1,0
	stb	d1,0(a0)
	subi	a0,a0,7
	RUN_68K	_GfxBase,-72
	mr	d1,d0
	pop	d0
	stw	d1,SetTopaz_font(a5)
	tstw	d1
	beq	SetTopaz_else1_0
#SetFont(stdrast,font)
	push	d0
	law	a0,_stdrast
	lwz	d1,0(a0)
	push	d1
	lwz	a0,SetTopaz_font(a5)
	pop	a1
	RUN_68K	_GfxBase,-66
	mr	d1,d0
	pop	d0
SetTopaz_else1_0:
#ENDPROC
	.global	SetTopaz_end
SetTopaz_end:
SetTopaz_finish:
	pop	a0
	unlk	a5
	blr

	.type	_SetTopaz,2
	.size	_SetTopaz,$-_SetTopaz

	.align	2
	.tocd
	.extern	_laststackptr_
	.extern	_stdrast_
	.extern	_lastexceptptr_
	.extern	_lastframeptr_
	.extern	_exceptioninfo_
	.extern	_GfxBase_
	.extern	_exception_
_list1:	.ualong	_str1
	.uahalf	0
	.byte	0
	.byte	0
	.align	2
_str1:
	.byte	"topaz.font"
	.byte	0
	.align	2

	.tocd
	.extern	_PowerPCBase_
_SetTopaz_:	.long	_SetTopaz
SetTopaz_end_:	.long	SetTopaz_end
_list1_:	.long	_list1
_str1_:	.long	_str1
