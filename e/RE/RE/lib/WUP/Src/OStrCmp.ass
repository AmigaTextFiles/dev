
# OStrCmp(a0:PTR TO CHAR,a1:PTR TO CHAR,d0=-1:LONG)

	.include	ppcmacros.pasm
	.text
	.global	_OStrCmp

_OStrCmp:
	mtctr	d0
	subi	a0,a0,1
	subi	a1,a1,1
.loop:	lbzu	r0,1(a0)
	lbzu	r7,1(a1)
	cmpw	r7,r0
	bne	.nosam		# strings are different
	mr.	r0,r0		# zero (eos) byte?
	beq	.same
	bdnz	.loop

.same:	li	d0,0
	blr
.nosam:	cmpw	r7,r0
	bgt	.great
	li	d0,-1
	blr
.great:	li	d0,1
	blr

	.type	_OStrCmp,@function
	.size	_OStrCmp,$-_OStrCmp
