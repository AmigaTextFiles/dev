
# StrCopy(a0:PTR TO CHAR,a1:PTR TO CHAR,d0=-1:LONG)
#pasm -F 2 -mo -O -1 -I re:lib/ re:lib/elib_PPC/StrCopy.ass

	.include	ppcmacros.pasm
	.text
	.global	_StrCopy

_StrCopy:
	mr	a6,a0
	mtctr	d0
	subi	a0,a0,1
	subi	a1,a1,1
.loop:	lbzu	r0,1(a1)
	mr.	r0,r0
	beq	.fin
	stbu	r0,1(a0)
	bdnz	.loop
.fin:	
	li	r0,0		# finish with zero byte
	stb	r0,1(a0)
	mr	d0,a6
	blr			# d0 contains dest string pointer

	.type	_StrCopy,@function
	.size	_StrCopy,$-_StrCopy
