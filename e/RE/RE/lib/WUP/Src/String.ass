#rE
	.include	ppcmacros.pasm
	.text
	.sdreg	r2
	.align	2
	.global	_String
_String:
.set	String_maxlen,8
	link	a5,-4
	push	a0
#DEF mem:PTR TO LONG
.set	String_mem,-4
#IF mem:=ReNewR(maxlen+8)
	lwz	d0,String_maxlen(a5)
	addi	d0,d0,8
	bl	_ReNewR
	stw	d0,String_mem(a5)
	tstw	d0
	beq	String_else1_0
#mem[1]:=(maxlen<<16) AND $FFFF0000
	lwz	d0,String_maxlen(a5)
	slwi	d0,d0,16
	andiw	d0,d0,-65536
	lwz	a0,String_mem(a5)
	stw	d0,4(a0)
#mem += 8
	addi	a0,a5,String_mem
	lwz	d0,0(a0)
	addi	d0,d0,8
	stw	d0,0(a0)
String_else1_0:
#ENDPROC mem
	lwz	d0,String_mem(a5)
	pop	a0
	unlk	a5
	blr

	.type	_String,2
	.size	_String,$-_String

	.extern	_ReNewR
	.align	2
	.tocd
	.extern	_PowerPCBase_
_String_:	.long	_String
