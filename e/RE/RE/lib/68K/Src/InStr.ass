; a0 - string
; a1 - string to find
; d0 - startindex=0

	xdef	_InStr

_InStr	move.l	d2,-(a7)
	move.l	a0,d2
	add.l	d0,a0
	move.b	(a1)+,d0
.loop:	move.b	(a0)+,d1
	beq.s	.nof
	cmp.b	d0,d1
	bne.s	.loop
	move.l	a0,a2
	move.l	a1,a3
.next:	move.b	(a3)+,d1
	beq.s	.end
	cmp.b	(a2)+,d1
	bne.s	.loop
	beq.s	.next
.end:	move.l	a0,d0
	subq.l	#1,d0
	sub.l	d2,d0
	bra.s	.fin
.nof:	moveq	#-1,d0
.fin:	move.l	(a7)+,d2
	rts
