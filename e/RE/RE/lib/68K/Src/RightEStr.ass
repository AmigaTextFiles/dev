; (4,a7)  - estr1
; (8,a7)  - estr2
; (12,a7) - length

	xdef	_RightEStr

_RightEStr
	movem.l	d2/a2,-(a7)
	movea.l	(4,a7),a0
	movea.l	(8,a7),a1
	move.w	(-2,a1),d0
	ext.l	d0
	sub.l	(12,a7),d0
	tst.l	d0
	bpl.s	.skip
	moveq	#0,d0
.skip	add.l	d0,a1
	move.l	#$ffff,d0
	move.l	a0,a2
	move.w	(-4,a0),d1
	ext.l	d1
	cmp.l	d0,d1
	bpl.s	.skip2
	move.l	d1,d0
.skip2	move.l	d0,d2
	subq.l	#1,d0
.loop	move.b	(a1)+,(a0)+
	beq.s	.done
	dbra.s	d0,.loop
	move.b	#0,(a0)+
.done	addq.w	#1,d0
	sub.w	d0,d2
	move.w	d2,(-2,a2)
	move.l	a2,d0
	movem.l	(a7)+,d2/a2
	rts
