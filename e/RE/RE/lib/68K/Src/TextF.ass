;rE
	machine mc68020
	xdef	_TextF
_TextF:
TextF_x	equ	20
TextF_y	equ	16
TextF_fmtstring	equ	12
TextF_params	equ	8
	link	a5,#-516
	movem.l	a0,-(a7)
TextF_buffer	equ	-516
	lea	TextF_buffer(a5),a0
	move.l	a0,d0
	addi.l	#4,d0
	move.l	d0,(a0)
;IF stdrast
	move.l	_stdrast,d0
	beq	TextF_else1_0
;RawDoFmt(fmtstring,params,'\j22\j192\j78\j117',buffer)
	move.l	a0,-(a7)
	move.l	TextF_fmtstring(a5),-(a7)
	move.l	TextF_params(a5),-(a7)
	lea	_str1,a0
	move.l	a0,-(a7)
	move.l	TextF_buffer(a5),a3
	move.l	(a7)+,a2
	move.l	(a7)+,a1
	move.l	(a7)+,a0
	movea.l	_ExecBase,a6
	jsr	-522(a6)
	move.l	(a7)+,a0
	move.l	_stdrast,-(a7)
	move.l	TextF_x(a5),-(a7)
	move.l	TextF_y(a5),d1
	move.l	(a7)+,d0
	move.l	(a7)+,a1
	movea.l	_GfxBase,a6
	jsr	-240(a6)		;Move(stdrast,x,y)
	move.l	a0,-(a7)
	move.l	_stdrast,-(a7)
	move.l	TextF_buffer(a5),-(a7)
	move.l	d0,-(a7)
	move.l	a0,-(a7)
	move.l	TextF_buffer(a5),a0
	jsr	_StrLen
	move.l	(a7)+,a0
	move.l	d0,d1
	move.l	(a7)+,d0
	move.l	d1,d0
	move.l	(a7)+,a0
	move.l	(a7)+,a1
	movea.l	_GfxBase,a6
	jsr	-60(a6)			;Text(stdrast,buffer,StrLen(buffer))
	move.l	(a7)+,a0
TextF_else1_0:
	movem.l	(a7)+,a0
	unlk	a5
	rts

_str1:
	move.b	d0,(a3)+
	rts

	xref	_StrLen
	xref	_stdrast
	xref	_ExecBase
	xref	_GfxBase
