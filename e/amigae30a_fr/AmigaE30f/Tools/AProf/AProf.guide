@database "AProf.guide"

@remark Documentation pour le Profiler Version 3.2
@remark
@remark $VER: Aprof.guide 3.2 (26. May 1993)

@Node Main "AProf.guide"

                   Documentation pour l'Amiga Profiler V3.2
                          © 1993 Michael G. Binz

 @{" Qu'est-ce qu'un profiler? " link l-what}
 @{" Système requis " link l-sysrequ}
 @{" Compilateur requis " link l-comprequ}
 @{" Procédure d'installation " link l-install }
 @{" Utiliser le profiler " link l-usage}
 @{" Configurability " link l-config}
 @{" Interface utilisateur" link l-gui }
 @{" Systèmes testés " link l-systeme }
 @{" Caveats " link l-caveats }
 @{" Utilitaires " link l-utilities }
 @{" Contacts " link l-feedback }
 @{" Droits de copie " link l-copyright}
@endnode


@node l-feedback "Contacts"

 Contactez moi à :

 EMAIL: sun411@informatik.fh-augsburg.de

 Si les Emails ne sont pas possible, écrivez moi à:

        Michael Binz
        c/o Gisela Fahrner
        Schießgrabenstr. 8a
        8900 D-Augsburg

        (NDT : les codes postaux allemands ont changé depuis le 01/07/93.
               celui-ci est donc faux)

 Je suis très intéressé par tous les tests qui seront faits avec
 n'importe quel système de programmation ainsi qu'avec différentes
 configurations Amiga.

 Si vous faites un test avec un compilateur non listé dans 'systems',
 envoyez moi SVP un fichier démo, l'éxécutable compilé (avec les
 symboles hunk) et quelques informations sur la création de ces hunks
 avec votre compilateur. Si nécessaire, envoyez une description des
 problêmes et actions que vous avez résolues.
@endnode

@node l-copyright "Droits de copie"

 Ce programme est freeware. Vous pouvez le copier, distribuer et
 l'utiliser, tant que vous ne modifiez pas le programme et que vous ne
 distribuez que le fichier archivé (AProfilerX_XX.lzh).
 Vous ne pouvez pas demander plus de taxes que celle faites par Fred Fish
 pour la copie et la distribution.

        © 1993 Michael G. Binz
@endnode

@node l-what "Qu'est-ce qu'un profiler"

 Un Profiler est un outils de développement. Il lance un programme
 spécifique et collecte des informations pendant son éxécution.
 Ces informations peuvent être utilisées pour trouver des fonctions
 dans votre code, où l'optimisation aura le plus d'effet.
@endnode

@node l-install "Procédure d'installation"

 Copiez tous les fichiers de l'archive AProfilerX_XX.lzh dans un répertoire
 et ajoutez ce répertoire dans votre chemin (PATH).
@endnode

@node l-sysrequ "Système requit"

 Le profiler a besoin du WorkBench/KickStart 2.04 et un minimum de 500 Ko
 libre de mémoire.
@endnode

@node l-comprequ "Compilateur requit"

 Votre comilateur doit être capable de créer des 'symbol hunks' Amiga.
 Les 'symbols' inclus dans les hunks doivent seulement adresser les
 adresses de départ des fonctions dans votre code (le 'code symbols'
 ne sont pas pris en compte par le profiler).
 Si vous cimpilateur crée des 'symbols en plus, ils doivent être enlevés
 avec 'Misc/Mask Filter' (regardez dans 'Systems', peut-être que votre
 système y est listé).
@ENDNODE

@node l-usage "Utiliser le profiler"

 Si vous utilisez le compilateur à partir du CLI (ce qui est recommandé),
 lancé le avec

        1.DEV:c/app> AProf application

 Le profiler se lance, affiche son interface graphique charge les tables
 de 'symbols' du fichier 'application' et attend les actions que vous
 voulez faire. Si le nom de fichier manque, il sera demandé.

 @{ " Utilisation sous Workbench " link ca-wb }
@endnode

@node l-gui "Interface utilisateur"

 Menus:   @{ " Files " link m-files } @{ " Action " link m-action } @{ " Data " link m-data } @{ " Sort " link m-sort } @{ " Move " link m-move } @{ " Misc " link m-misc }
 Gadgets: @{ " In/Exclusive timevalues " link gad-inex } @{ " Percentual/Millisecond timevalues " link gad-percmil } @{ " XTime " link gad-xtime }
          @{ " Button row " link gad-buttons }

 Menus:   @{ " Fichier " link m-files } @{ " Action " link m-action } @{ " Données " link m-data } @{ " Tri " link m-sort } @{ " Dépl " link m-move } @{ " Autre " link m-misc }
 Boutons: @{ " Temps In/Exclus " link gad-inex } @{ " Temps pourcentage/Millisecondes " link gad-percmil } @{ " XTime " link gad-xtime }
          @{ " Ligne bouton " link gad-buttons }

 Description des entrèsde la table:

 Fonction: C'est le nom du 'symbol'

 HitCnt:   C'est le nombre de fois que la fonction a été appelée

 Average:  Temps moyen d'éxécution pris par la fonction

 Over:     Temps maximum d'éxécution pris par la fonction

 Min/Max:  Temps d'éxécution minimum/maximum.

 @{ " Bas de la fenêtre                                             " link gad-bottom }}
@endnode

@node m-files "Menu: Files/Fichiers"

 Open:    Ouvre:        lit un nouveau fichier
 Save:    Sauve:        Sauve le table de 'symbol' avec le même nom et un
                        suffix .pro
 Save as: Sauve sous:   Sauve la table de 'symbol' vers un fichier choisit
 Reset:   ReInit:       Remet à zéro toutes les valeurs
 Print:   Imprimer:     Pas encore implémenté
 Exit:    Sortir:       Quitte le programme
 About:   A Propos de:  Affiche la version, copyright
@endnode

@node m-action "Menu: Action"

 Start: Lancer: Lance le programme. Si vous le relancé, les temps sont
                ajoutés.
@endnode

@node m-data "Menu: Data/Données"

 Exec détails/Détails d'éxécution:
        Dans cette requête, vous pouvez entrer une ligne de commande (sans
        le nom de la commande) et la taille de la pile pour le programme à
        profiler

        Exemple de ligne de commande:
                Éxécutable chargé: 'list'
                ligne de commande: 'c:#? all'
@endnode

@node m-sort "Menu: Sort/Tri"

 Pas encore implémenté
@endnode

@node m-move "Menu: Move/Déplacement"

 Find:      Recherche:    Entrez une chaine à rechercher et commence la recherche
 Find next: Suivant:      Recherche la chaine suivante
 Top:       Haut:         Se met en haut de la table de 'symbols'
 Bottom:    Bas:          Se met en bas de la table de 'symbols'
 Page up/down: Page avant/suivante: une page plus haut ou plus basse.
@endnode

@node m-misc "Menu: Misc/Autre"

 Help:  Aide:
    Lance le système hypertext @{ "AmigaGuide" link l-amigaguide }(TM)
    (si il est accessible)

 Symbol filter: Filtre 'symbols'
   Entrez le modèle des 'symbols' à exclure

        Exemple:
                .#?    Exclue tous les 'symbols' commençant par '.'
                #?%#?  Exclue tous les 'symbols' ayant '%' dans leur nom

   (Pour une explication des modèles Amiga, reportez vous au manuel
   utilisateur)

 Refresh Window:    Rafraichir la fenêtre:

   Reaffiche la table des 'symbols'
@endnode

@node gad-inex "Cycle: sous routines inclues/exclues"

 o Sous routines inclues

  Ceci ajoute les temps des appels à des sous routines aux temps de
  ceux qui appelle.
  Dans les programmes C, le temps pour 'main()' est proche du temps
  d'éxécution général, parce que normalement toutes les fonctions
  sont appelées de main().

 o Sous routines exclues

  Ici, le temps d'un fonction exclue le temps nécessaire d'une sous routine
  appelée.
  Si vous ajoutez toutes les valeurs de la colonne 'Over' de la table de
  'symbols', la somme doit être proche du temps d'éxécution général du
  programme profilé.
@endnode

@node gad-percmil "Cycle: Temps en pourcentage/millisecondes"

 o Precentual timevalues:    Temps en pourcentage:

  Tous les temps sont en pourcentage (%) pour tous les programmes profilés.

 o Millisecond timevalues:  Temps en millsecondes

  Tous les temps sont en millisecondes.
@endnode

@node gad-xtime "XTime"

 Temps d'éxécution général d'un programme profilé en millisecondes
@endnode

@node gad-buttons "Ligne de bouton"

 Une façon rapide d'atteindre les entrées menus souvent utilisées.
@endnode

@node gad-bottom "Bas de la fenêtre"

 En bas de la fenêtre, le compilateur affichera les messages utilisateurs.
@endnode

@node l-config "Configurability"

 Toutes les options configurables d'AProf doivent être sauvés dans les
 ToolTypes de l'icone AProf.info
 Le fichier .info doit être dans le répertoire que le profiler.

 o WINDIM=gaucche/haut/largeur/hauteur
    Utilisez ça pour positionner la fenêtre du profiler.
    (Dans la version 3.2 'largeur' doit être donné, mais la valeur n'est
    pas utilisée).
@endnode

@remark CAVEATS *********************************************************
@node l-caveats "Caveats"

 Voici une liste de construction qui peuventdonnerdes problêmes, si vous
 essayez de profiler des programmes les contenant:

 @{ " Profil basé sur le Workbench " link ca-wb }
 @{ " Modules Startup non-standard " link ca-startup }
 @{ " setjmp()/longjmp() " link ca-sljmp }
 @{ " Utilisation des horloges CIA " link ca-timers }
 @{ " Overlays " link ca-overlays }
 @{ " Limitation du Runtime " link ca-runmax }
 @{ " Fonction statique " link ca-static }
 @{ " Traphandlers " link ca-traps }
 @{ " Utilisation de fonctions switch et de lancement " link ca-swila }
@endnode

@node ca-wb "Profile basé sur le Workbench"

 Si lancé à partir du workbench, le profiler utilise le message startup
 envoyé par le Workbench. Les programmes-workbench à profiler hérite de
 l'environnement du profiler, attendront indéfiniement ce message déja
 utilisé.

 Utilisez si possible le plus simple module startup possible. Dans la
 plupart des cas, vous éviterez votre programme d'attendre ce message.
 D'un autre coté, vous avez aussi à analyser la ligne de commande dans
 votre code.
@endnode

@node ca-startup "Module startup spéciaux"

 Les programmes à profiler doivent être capable de tourner dans le même
 environnement que le profiler. Donc il n'est pas possible d'utiliser des
 codes startup spéciaux pour détacher un programme ou pour le mettre
 résident.
@endnode

@node ca-sljmp "setjmp()/longjmp()"

 Si les combinaisons setjmp()/longjmp() sont utilisés dans le programme à
 profiler, essayez d'éxécuter un rts depuis la fonction cible de longjmp.
 La logique du profiler le demande pour connaitre quelle portion de
 programme il éxécute.
@endnode

@node ca-timers "Horloge CIA"

 Les horloges CIA ne sont pas disponible pour les programmes à profiler.
@endnode

@node ca-overlays "Overlays"

 Profiler un programme 'overlayed' n'est pas possible.
@endnode

@node ca-runmax "Limitation du Runtime"

 L'horloge du profiler peut mesurer des temps maximum de 99 mins.
@endnode

@node ca-static "Fonctions statique"

 Les fonctions à mesurer DOIVENT être dans la table de 'symbols'.
 Ce n'est pas le cas des fonctions statiques dans la plupart des
 environnement de programmation.
@endnode

@node ca-traps "Traphandlers"

 Si votre programme utilise des 'trap handlers' privés, les 'traps'
 n'étant pas dans un 'handler' privé doivent être propagé au 'handler'
 précédent.
 Profiler n'est pas possible si vous utilisez des 'trace traps' (#9).
@endnode

@node ca-swila "Fonctions switch et de lancement"

 Les programmes à profiler qui utilise des membres tc_Switch et tc_Launch
 dans une structure de tache Exec DOIVENT propager l'éxécution aux
 'handlers' précédent.
@endnode


@remark ******** UTILITIES ********

@node l-utilities "Utilitaires"

 Pendant le développement du profiler, j'ai écrit quelques utilitaires
 qui peuvent parfois être utiles:

@{ " StripB: " link util-stripb } Enlève les HUNK_SYMBOL et HUNK_DEBUG des éxécutables
@{ " Sym:    "    link util-sym } Affiche les HUNK_SYMBOL
@{ " Seg:    "    link util-seg } Affiche les listes de segments.
@endnode

@node util-stripb "Utility: StripB"
 StripB enlève tous HUNK_SYMBOL et HUNK_DEBUG d'un éxécutable Amiga.

 Ligne de commande:

        StripB fichierentree fichiersortie
@endnode

@node util-sym "Utilitaire: Sym"

 Utilisez Sym pour afficher le code 'symbols' (HUNK_SYMBOL) dans un
 éxécutable Amiga. --------

 Ligne de commande:

   Sym app ...

 Stucture de la sortie de Sym:

 Colonne:   1      2          3                4  5
 Donnée :  39   (  0 /      d90)             d3e  __Readfile__NoBuf

 Colonne 1: nombre de 'symbol'
         2: nombre de 'hunk'
         3: taille du 'hunk'
         4: Adresse du 'symbol' relatif au 'hunt' courant
         5: Nom du 'symbol'

 Message d'error:
  Symbol out of hunk bounds     'Symbol' hors limite
      La position des 'symbols' est hors des limites du 'hunk'
      (utilisez par quelques compilateurs)
@endnode

@node util-seg "Utilitaire: Seg"

 Seg affiche le list des segment d'un éxécutable Amiga

 Ligne de commande:
        Seg prog
@endnode


@remark ****************** SYSTEME *******************
@node l-systeme "Systèmes testés"

 Voici une liste de systèmes que j'ai testé avec le profiler. Si vous
 trouvez une erreur ou si vous avez testé un système non listé ici,
 envoyez moi un message.

 @{ " Aztec C V3.2 - 5.2 " link manx-c}
 @{ " DICE V2.06.21 " link dice-c }
 @{ " GNU C/C++ Vx.x " link gnu-cpp}
 @{ " PCQ Pascal V1.2a " link pcq-pascal}
 @{ " Maxon C++ V1.2.1 " link maxon-cpp}
@endnode

@node manx-c "Manx Aztec C V3.2 - V5.2"

 Problêmes:
  Aucun

 Création des 'symbol hunks':
  Utilisez l'option -w pour le linker

 Autre:
  Vous n'avez pas besoin d'enlever les 'symbols' appelés '_Hx_org'.
  N'utilisez pas 'detach.o' avec les programmes que vous voulez profiler.
@endnode

@node sas-c "SAS C Vx.x"

 Aucun
@endnode

@node maxon-cpp "Maxon C++ 1.2.1"

 Problêmes:
  Parfois, mélanger du code et des 'data symbols'. Vérifiez la table de
  'symbol' et enlevez les 'data symbols' via le menu Misc/Symbol Mask

  Le compilateur ajoute des labels appemés L999 à la table de symbole. Ceci
  doit être enlevé.

 Création des 'symbol hunks':
  Pour les lignes de commandes, le compilateur utilise l'option -bs.
  Dans l'environnement intégré, utilisez les options du compilateur.

 Autre:
  Si vous oubliez d'enlever les 'symbols' L999, un GURU va arriver.
  Pas de reconstruction des 'symbols' C++ ('No unmangling of c++ symbols').
@endnode

@node pcq-pascal "PCQ Pascal Compiler Version 1.2a + A68k V2.61 + BLink V6.7"

 Problêmes:

  Parfois, mélanger du code et des 'data symbols'. Vérifiez la table de
  'symbol' et enlevez les 'data symbols' via le menu Misc/Symbol Mask

  Le compilateur ajoute des labels appelés *%*. Ils doivent être enlevés.

 Creation of symbol hunks:
  Utiliser l'option -d pour l'Assembleur
@endnode

@node dice-c "DICE C V2.06.21 version non enregistrée"

 Problêmes:
  Aucun

 Création des 'symbol hunks':
  Utilisez l'option -s pour DCC.
@endnode

@node gnu-cpp "GNU C/C++ Vx.x"

 Problêmes:
  Il semble qu'il n'y ai aucun problêmes. Je n'ai pas testé ce compilateur,
  seulement testé quelques éxécutables créés avec GNU C

 Création des 'symbol hunks':
  ??
@endnode

@remark *** Ici le glossaire ***

@node l-amigaguide "AmigaGuide (TM)"
 AmigaGuide est un programme d'affichage avec des fonctions hypertextes.

 AmigaGuide est FreeWare pour des Freeware non commerciaux et est disponible
 via FTP.
@endnode

@remark symbollist hunks startup-code
