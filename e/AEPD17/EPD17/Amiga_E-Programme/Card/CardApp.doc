
                                 CardApp V1.0b

Description:

CardApp is an integrated application which provides similar functionality to
the CLI programs CardList, CardAdd and CardAll.  It uses the AppIcon and
AppMenuItem features of Workbench 2.0 (and above) to provide a simple,
easy-to-use interface.


Purpose:

CardApp, CardList, CardAdd and CardAll were written to enable PCMCIA cards
from the Amstrad Notepad series (NC100, NC150 and NC200) to be read and
written on a suitably equipped Amiga (i.e., one with a PCMCIA card slot,
currently just the A600 and A1200).

* Caution: Don't boot up your Amiga with a write-enabled PCMCIA card from a
* Notepad in the slot.  It will be cleared and configured as system RAM,
* destroying all information on it.  Also, like floppy disks, don't remove a
* PCMCIA card whilst it is being written to.


Usage:

CardList - Template: V=VERBOSE/S.
========
Lists the files stored on the Notepad PCMCIA card.  The default is a brief
listing (name and size), but by using the "VERBOSE" switch you can get a
more detailed listing (name, size and date).

  > cardlist
  ... Brief listing

  > cardlist verbose
  ... Detailed listing

You can run CardList from the Workbench by double-clicking on the icon.  The
tooltype "VERBOSE" controls whether you get a verbose listing or not.


CardAdd - Template: FORCE/S,FILE/M.
=======
You can specify any number of files to add to the Notepad PCMCIA card.
Patterns can be used in conjunction with the standard "Spat" script supplied
with Workbench.  If no card is present, it is not from a Notepad or it is
not writable then the program will terminate.  The "FORCE" switch allows you
to override the "Card in use" check, which is a simple device to try to stop
several people writing to the card at the same time.

  > cardadd fred
  ... File "fred" is added to card

  > cardadd fred sys:wilma df0:t/betty
  ... Files "fred", "sys:wilma" (as "wilma") and "df0:t/betty" (as "betty")
  are added to card

  > spat cardadd dh0:articles/#?
  ... All files in "dh0:articles" are added to card

You can run CardAdd from the Workbench by selecting its icon,
shift-selecting the files to add and double shift-clicking on the last file.
Note: the Notepad filesystem is flat so you can't add directories.


CardAll
=======
Extracts all files from the Notepad card to the current directory.

  > cardall
  ... All files extracted from card

  > cd dh0:articles
  > card all
  ... All files extracted to "dh0:articles"

You can run CardAll from the Workbench by double-clicking on the icon.


CardApp
=======
Just double click on the icon (or run it from the CLI).  To quit it, select
"Quit CardApp" from the Tools Workbench menu (the one with "Reset WB" in
it).

Files dropped onto the AppIcon which appears on the Workbench screen/window
will be added to the Notepad PCMCIA card.  A small output window will show
the status of the addition etc.  If no card is present, it is not from a
Notepad or it is not writable then the program will terminate.  There is no
"FORCE" option -- use CardAdd to override/correct the "Card in use" check.

Double-clicking on the AppIcon will give a listing of the files on the card.
The tooltype "VERBOSE" on the CardApp icon controls whether this listing is
detailed or not.  The listing will appear in the same output window as the
messages from adding/extracting files.

Selecting "Extract" from the Tools Workbench menu will extract all files
from the card to the RAM disk.  If you select a single directory or disk
icon and then select "Extract" then the files will be extracted to this
location instead.

Note: the same output window is used for all reports/listings.  You can zoom
and even close this window whenever you like.  If you close it then it will
reappear (cleared) if necessary.


Blatant plug:

Written in Amiga E v2.1b, the fastest and best Amiga language there is.  And
it's PD!  Much respect goes out to Wouter for such a wonderful compiler.


History:

The Notepad is a cheap, portable computer which is ideal for typing essays,
programs, etc. on the move or on a nice, comfy sofa in front of the TV
(which is how I use it!).  It fills the gap whilst there is no portable
Amiga on the market, and it runs a slightly cut-down version of Protext.
The only problem is that, until now, the only way of getting stuff from the
Notepad to the Amiga (and vice versa) was to use a slow serial link or buy
the expensive Lapcat software and have a slow parallel link.  However, to
make real use of the Notepad you need a PCMCIA card, and then transferring
several large files is an enormouse pain.  Wouldn't it be good if the Amiga
could read the card?

So, I set about trying to use the PCMCIA card slot on my A1200, armed with
absolutely no documentation.  Someone on the Internet answered my question
to comp.sys.amiga.programmer and told me that the card would probably be
mapped into a certain part of the Amiga's address space.  This, luckily, is
the case, even if the card is not in a format recognised by the Amiga.

The next step was to decode the filesystem and try to do a file listing.
The date stuff was a late addition since the date encoding was particularly
strange (e.g., the top 7 bits of one byte is the number of years, and the
remaining bit is the top bit of the number of months...).  After solving
this I set about designing the CLI programs, and then I put them together to
make CardApp.  What I would have liked to have done was make a device (and
filesystem?) like the other Amiga storage devices, but I don't know how to.
(There is no decent documentation on this that I can get hold of...)

This first version is untested on anything other than my A1200 with a 512KB
PCMCIA card for an NC100 Notepad.  Possible problems could arise with
A1200's which have Fast RAM (illegally) mapped into the PCMCIA address
space, or with cards of different sizes or from different model Notepads.
This latter problem is hopefully solved by the flexible manner in which I
attack the filesystem on the card.  The only drawback is that I don't feel I
can sensibly supply a format option (you need to format the card on the
Notepad).

Version 1.0b fixed a silly mistake in CardApp.e (whoops!).

You can contact me by Email (for feedback, bug reports, etc.) at the
following address: m88jrh@uk.ac.ox.ecs


Legal stuff:

The programs CardList, CardAdd, CardAll and CardApp are Copyright (c) 1994
Jason R. Hulance.  Apart from this the GNU General Public License holds.
