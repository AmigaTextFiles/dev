
			       INTRODUCTION
			       ~~~~~~~~~~~~

   The original files for Amiga-E programmer that came with the developer
archive of MUI until now are not very usefull.
   The muimaster.m file, that should define all the functions of the
muimaster.library, is not up-to-date, and the mui.e file is only a very bad
replacement for the mui.h file that C programmer could use!

   Thats why I created my own MUI-AmigaE-interface. This archive (as a
replacement for the original Amiga-E drawer of the MUI developer archive)
contains nearly all what's needed to write MUI-programs in E and some
additional informations in this file! The only "extra" you need (to use the
macrofile) is the program "Mac2E". (Mac2e can be found e.g. in the
AmigaE v3 distribution)


				 CHANGES
				 ~~~~~~~
				  
- New modules for MUI 2.2 (Only "modules/libraries/mui.m" is new)
- New filename-extensions to give a better indication of the filetype
- Some new files
- Sourcecodes etc. changed to use tabs instead of spaces were possible to
  decrease filesize. (Use an editor or textviewer with tabstops at every
  8th column to get correct textformating!)



		       THE NEW FILENAME-EXTENSIONS
		       ~~~~~~~~~~~~~~~~~~~~~~~~~~~

".e"   - An E-sourcecode that could be compiled directly.
".m"   - An E-module file.
".em"  - An E-Sourcecode with some macros. Mac2E is needed to create the
	 E-Sourcecode (".e") for the E-compiler EC.
".ma"  - This is a macrofile. Use PreMac2E to build the pre-analysed
	 macrofile (".pma").
".pma" - And this is a pre-analysed macrofile



				THE FILES
				~~~~~~~~~

"ReadMe" - This file. Please read the entire file before mailing me some-
   thing like: "This files are creating only errors, what make I wrong?"
   There are some special problems with MUI and Amiga-E which can cause
   big trouble :-(
   Go on reading and don't make this faults :-)

"Modules/muimaster.m" - This file defines the functions of the
   muimaster.library. Copy it to EMODULES: and write "MODULE 'muimaster'"
   in your source to use it.

"Modules/libraries/mui.m" - This file (and the next one) contain the most
   definitions of the mui.h file that came for C programmer with the
   developer archive of MUI 2.2. Use this C mui.h file with its comments to
   get more information about this definitions!
      In this mui.m module all CONSTs and the structs (OBJECTs) which are
   of interest for E programmer, are defined. To see which structs are in
   this module, use the ShowModule-tool that came with the E compiler.
   Therefore all OBJECTs are collected at the beginning of the module.
      The CONSTs are written exactly the same way as in the mui.h file
   (with lowercase letters - that is no problem as long as the two first
   are uppercase, even if the E-language-description says that CONSTs have
   to be totaly uppercase!) So it's no problem to use this files even if
   you had used the macrofile that came with "Mac2E" until now. 
      The identifiers of the OBJECTs are written totaly lowercase!!
      Copy this file to EMODULES:libraries/ and write
   "MODULE 'libraries/mui'" in your source to use it.

"MacroFiles/mui.ma" - This file contains the most macro definitions of the
   mui.h file which are, caused by the limitations of E, not in the file
   above. Only "the most", because some of them couldn't be translated to
   E, but they are not very important.
      To use this file and its macrodefinitions you need the program
   "Mac2E", and if you use a version >= 3 of "Mac2E" you need the pre-
   analysed macrofile (see below) which can allso be build with "PreMac2E"
   and this file.
      As a result of moving the CONSTs to the E-module-file mui.m above,
   instead of using only one macrofile like the one that came with "Mac2E",
   it's possible to write MUI programs *without* using this macrofile and
   "Mac2E", but I wouldn't do it!!! With this macrofile it's possible to
   write MUI programs in E nearly the same way as in C.
      The more interesting advantage of puting the CONSTs in a E-module is
   the much more readable source after using "Mac2E". Sometimes - not
   often, but sometimes - it's better to search an error in the source that
   was created by "Mac2E" and than it's better to read
   "MUIA_String_Contents" instead of "$80428FFD".
      The macronames are written the same way as the C originals in mui.h -
   with one exception: The macro "String()" is renamed to "StringMUI()" to
   avoid conflicts with the E-Function String()
      Copy this file to ... where you want it - for example in a
   MacroFiles-directory in your Amiga-E-directory.

"MacroFiles/mui.pma" - This is the pre-analysed version of the macrofile
   "MacroFiles/mui.ma" above.

"Sources/doMethod.e" - To write MUI programs, you need a DoMethod function.
   Because this function is part of the amiga.lib, which we don't have as E
   programmer, you have to use your own one, or better use this one written
   by Wouter van Oortmerssen.
      Copy it into your source to use it and look at the demo-source
   "Sources/MUI_Demo.em" to see, how to use it.

"Modules/tools/domethod.m" - This is the domethod-funktion as E-module for
   the new AmigaE v3. Copy it to EMODULES:tools/ and you can simply write
   "MODULE 'tools/domethod'" inside your source if you need it.

"Source/installhook.e" - Sometimes - for example if you use PopUps - you
   need hooks. This source gives you a PROC that makes it very easy to
   install the needed hook-structures. Look at this source (the comments)
   and the demo-source "Sources/PopUp.em" to see, how to use it.
      This source (without the comments) and an E-module of it can also be
   found in the AmigaE v3 distribution. It's only still included here for
   users of the old AmigaE v2.1b.

"Source/installhook2.e" - Special version of installhook. Use it, if you
   don't need a pointer to the hookstructure inside your hookfunktion.
   Because of the differend names you can use both versions in the same
   source.

"Modules/tools/installhook2.m" - This is the installhook2-funktion above
   as E-module for the new AmigaE v3. Copy it to EMODULES:tools/ and you
   can simply write "MODULE 'tools/installhook2'" inside your source if
   you need it.

"Source/MUI-Demo.em" - This is a translation of the C demo-source
   "MUI-Demo.c" that came with MUI. Use it to see, how to write MUI-
   programms in E and where are the differences between C and E.

Source/MUI-Demo.e" - This is the source above after running it through
   Mac2E. You can directly compile it.

"Source/PopUp.em" - This is a translation of the demo-source "PopUp.c" that
   came with MUI. Use it to see, how to use the installhook-PROC.

"Source/PopUp.e" - And again the source after the usage of Mac2E.



			 PROBLEMS WITH MUI AND E
			 ~~~~~~~~~~~~~~~~~~~~~~~

			    TRUE=1 or TRUE=-1
			    -----------------

   In C TRUE has the value 1 but in E TRUE has the value -1. That can cause
problems, therefore a CONST "MUI_TRUE" with value 1 is defined in
"Modules/libraries/mui.m". Use this one instead of TRUE whenever you want
to give TRUE to MUI. See "Sources/MUI_Demo.em" and "Sources/PopUp.em"


			Problem with SetAttrsA()
			------------------------

   Whenever you try to set an attribut to the value it allready has, MUI
overwrites this attribut in the taglist with TAG_IGNORE to make shure that
notify-class don't react on it. This is nessesary to prevent endless-
notification-loops. As long as you are a C programmer and use SetAttr()
that is no problem, because then MUI changes only a *copy* of the original
datas of the SetAttrs()-call. But if you use SetAttrsA(), as we must do
because SetAttrs() is a function of amiga.lib, it is a problem! You only
give a PTR to the original-datas with SetAttrsA() and now MUI changes this
*original* datas. If you than uses this datas again, they are still changed
and nothing (TAG_IGNORE) will happen. One possible way to avoid this
problem is, to make the attribut a non-constant data. Instead of

   SetAttrsA(obj, [ MUIA_..., value, ..., TAG_DONE])

write

   SetAttrsA(obj, [ var + MUIA_..., value, ..., TAG_DONE])
		   ~~~~~~~
with var=0. Now everytime this SetAttrsA()-call is executet, the attribute
is again "evaluated" and stored in the list.
   Because of that I have defined the macros set() and nnset() in
"MacroFiles/mui.ma" this way and if you want to use them you have to DEFine
a global(!) variable setAttrsA in your source and set it to 0 !!!
(E.g. with DEF setAttrsA=0)
   BUT: x:=[...]; SetAttrsA(obj,x); SetAttrsA(obj,x) has *NOT* the wished
result, because the non-constand datas of the LIST are only evaluated when
x is assigned to to the LIST but not everytime this PTR to the LIST in x is
used later!


			      TAG_IGNORE,0,
			      -------------

   Some of the macros in "MacroFiles/mui.ma" are ending with
"[ TAG_IGNORE,0,". That seems to be superfluous but it is needed, because
in E if you want to split a statement over several lines, you can't end a
line with "[" but with a comma. (See program "OptiMUI" that cames with
"Mac2E")



		       AUTHORS (AND COPYRIGHTS)
		       ~~~~~~~~~~~~~~~~~~~~~~~~

Jan Hendrik Schulz (that's me): - muimaster.m
 (schulzj@fmi.uni-passau.de)    - mui.m
				- mui.ma and mui.pma
				- translations of MUI-Demo and PopUp to E
				- installhook2.e and installhook2.m
				- this ReadMe-file

Stefan Stuntz: - MUI with mui.h and the original C versions of
		 MUI-Demo.e and PopUp.e

Lionel Vintenat: - Mac2E


Wouter van Oortmerssen: - Amiga-E
			- doMethod.e
			- installhook.e




			       FUTURE
			       ~~~~~~
- With future versions of MUI this files will be included. (If Stefan don't
  forget it again like now with MUI 2.2)


				BUGS
				~~~~
- The PupUp-example hangs if you try to close it but there are still some
  ASL-PopUps open. I don't know why! If anybody sees the bug, please send
  me a mail.

