-> TestMDArray.e
-> Program to test MDArray module

MODULE 'other/MDArray'

PROC main()
  DEF chessboard:PTR TO CHAR,piece,offset,maxindexes,length,i,
      biny:PTR TO INT,bin1,bin2,binoff,binlen,
      longarray,long1,long2,longdims:PTR TO INT

      longdims:=[2,3,4,5]:INT


  chessboard:=mda_Dim(MDA_CHAR,MDA_2D,[8,8]:INT)
  piece:=chessboard[mda_Index(chessboard,[2,4]:INT)]
  offset:=mda_Offset(chessboard,[2,4]:INT)
  maxindexes:=mda_MaxIndex(chessboard)
  length:=mda_Length(chessboard)

  printData('ChessBoard',chessboard)


  biny:=mda_Dim(MDA_INT,MDA_3D,[2,2,2]:INT)
  FOR i:=0 TO mda_MaxIndex(biny)
    biny[i]:=i
  ENDFOR

  bin1:=biny[mda_Index(biny,[1,0,1]:INT)]
  bin2:=biny[mda_Index(biny,[1,1,0]:INT)]
  biny[mda_Index(biny,[0,0,0]:INT)]:=0
  biny[mda_Index(biny,[1,1,1]:INT)]:=7
  binoff:=mda_Offset(biny,[1,1,0]:INT)
  binlen:=mda_Length(biny)

  printData('Binary',biny)


  longarray:=mda_Dim(MDA_LONG,MDA_4D,longdims)
  FOR i:=0 TO 5
    longarray[mda_Index(longarray,[Mod(i,2),Mod(i,3),Mod(i,4),i]:INT)]:=i
  ENDFOR
  long1:=longarray[mda_Index(longarray,[1,2,3,4]:INT)]
  long2:=longarray[mda_Index(longarray,[1,0,3,2]:INT)]

  printData('Long Word',longarray)

  mda_Free(longarray)
ENDPROC

PROC printData(name,array)

  WriteF('Data on \s Array:\n',name)
  WriteF('Indexes: \d\n',mda_Indexes(array))
  WriteF('MaxIndex: \d\n',mda_MaxIndex(array))
  WriteF('Size: \d\n',mda_Size(array))
  WriteF('Length: \d\n\n',mda_Length(array))
ENDPROC
