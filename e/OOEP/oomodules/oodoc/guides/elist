@database "elist"
@master "Ram Disk:T/docs/elist.doc"

@Node Main "elist.doc"
    @{" add() " Link "add()"}
    @{" elist() " Link "elist()"}
    @{" end() " Link "end()"}
    @{" get() " Link "get()"}
    @{" getFrom() " Link "getFrom()"}
    @{" grow() " Link "grow()"}
    @{" init() " Link "init()"}
    @{" kill() " Link "kill()"}
    @{" putAt() " Link "putAt()"}
    @{" select() " Link "select()"}
    @{" set() " Link "set()"}
    @{" strip() " Link "strip()"}
@EndNode

@Node "add()" "elist/add"

@{b}   NAME@{ub}
       add() of @{"elist" Link "elist/elist()"} -- Add an item to the list.

@{b}   SYNOPSIS@{ub}
       elist.add(LONG)

       elist.add(item)

@{b}   FUNCTION@{ub}
       Adds an item to the list and expands the list if necessary.

@{b}   INPUTS@{ub}
       item:LONG -- Item to add to the list.

@{b}   RESULT@{ub}
       LONG -- -1 if expansion of the list failed. The current list stays
           valid.

@{b}   SEE ALSO@{ub}
       @{"elist" Link "elist/elist()"}, @{"grow()" Link "grow()"}

@EndNode

@Node "elist()" "elist/elist"

@{b}   NAME@{ub}
       elist of object

@{b}   PURPOSE@{ub}
       Handles E's own lists in a more dynamic manner. When the limit of
       items is reached the list is simply expanded.

@{b}   ATTRIBUTES@{ub}
       list:PTR TO LONG -- Normal E list.

       itemCount:LONG -- How many items actually are in the list. Note that
           this is NOT the length of the list. This attribute points at the
           next free slot to put a value in.

       hunkSize:LONG -- The number of items the list is expanded by if
           necessary.

@{b}   SEE ALSO@{ub}
       object/object
@EndNode

@Node "end()" "elist/end"

@{b}   NAME@{ub}
       end() of @{"elist" Link "elist/elist()"} -- Global destructor.

@{b}   SYNOPSIS@{ub}
       elist.end()

@{b}   FUNCTION@{ub}
       Disposes the list.

@{b}   SEE ALSO@{ub}
       @{"elist" Link "elist/elist()"}

@EndNode

@Node "get()" "elist/get"

@{b}   NAME@{ub}
       get() of @{"elist" Link "elist/elist()"} -- Get the list and it's length.

@{b}   SYNOPSIS@{ub}
       elist.get()

@{b}   FUNCTION@{ub}
       Gets you the actual E list and it's length. The list may not have all
       it's items set if it was expanded.

@{b}   RESULT@{ub}
       PTR TO LONG -- The E list. NIL if no list is there.

       LONG -- The length of the E list. -1 if no list is there.

@{b}   SEE ALSO@{ub}
       @{"elist" Link "elist/elist()"}

@EndNode

@Node "getFrom()" "elist/getFrom"

@{b}   NAME@{ub}
       getFrom() of @{"elist" Link "elist/elist()"} -- Get item from a specific position.

@{b}   SYNOPSIS@{ub}
       elist.getFrom(LONG)

       elist.getFrom(position)

@{b}   FUNCTION@{ub}
       Gets the item that's at position in the list.

@{b}   INPUTS@{ub}
       position:LONG -- Position to get the item from.

@{b}   RESULT@{ub}
       LONG, LONG -- 0, "rnge" if the position was out of range, i.e. if it
           exceeded the list's length.

@{b}   SEE ALSO@{ub}
       @{"elist" Link "elist/elist()"}

@EndNode

@Node "grow()" "elist/grow"

@{b}   NAME@{ub}
       grow() of @{"elist" Link "elist/elist()"} -- Expand a list.

@{b}   SYNOPSIS@{ub}
       elist.grow()

@{b}   FUNCTION@{ub}
       Expands the list by the number of items that is put in the hunkSize
       attribute.

@{b}   RESULT@{ub}
       LONG -- -1 if the list could not be expanded. The current list stays
           valid.

@{b}   EXAMPLE@{ub}

       NEW list.new()

       WriteF('Actual lenght of the list is \d.\n', ListLen(list.list))
       list.grow()
       WriteF('Actual lenght of the list is \d.\n', ListLen(list.list))

@{b}   SEE ALSO@{ub}
       @{"elist" Link "elist/elist()"}, @{"add()" Link "add()"}

@EndNode

@Node "init()" "elist/init"

@{b}   NAME@{ub}
       init() of @{"elist" Link "elist/elist()"} -- Initialization of the object.

@{b}   SYNOPSIS@{ub}
       elist.init()

@{b}   FUNCTION@{ub}
       Sets the hunk size to the initial value (currently this is 16, that
       may change) and allocates a list that can holg that much items.

@{b}   SEE ALSO@{ub}
       @{"elist" Link "elist/elist()"}

@EndNode

@Node "kill()" "elist/kill"

@{b}   NAME@{ub}
       kill() of @{"elist" Link "elist/elist()"} -- END all items and the object.

@{b}   SYNOPSIS@{ub}
       elist.kill()

@{b}   FUNCTION@{ub}
       Goes through the list and does an END on each if the item is not NIL.
       After that the object itself is ENDed.

@{b}   NOTES@{ub}
       Only call this function when you really know what is in the list.

@{b}   SEE ALSO@{ub}
       @{"elist" Link "elist/elist()"}

@EndNode

@Node "putAt()" "elist/putAt"

@{b}   NAME@{ub}
       putAt() of @{"elist" Link "elist/elist()"} -- Puts an item at a specific position in the list.

@{b}   SYNOPSIS@{ub}
       elist.putAt(LONG, LONG)

       elist.putAt(item, position)

@{b}   FUNCTION@{ub}
       Puts an item in the list at a certain position. Any value that is at
       that position will be overwritten. The list is expanded if necessary.

@{b}   INPUTS@{ub}
       item:LONG -- Item to put in the list.

       position:LONG -- Position to put it at.

@{b}   RESULT@{ub}
       LONG -- -1 if the list could not be expanded. The current list stays
           valid.

@{b}   SEE ALSO@{ub}
       @{"elist" Link "elist/elist()"}, @{"grow()" Link "grow()"}

@EndNode

@Node "select()" "elist/select"

@{b}   NAME@{ub}
       select() of @{"elist" Link "elist/elist()"} -- Selection of action via tag list.

@{b}   SYNOPSIS@{ub}
       elist.select(LONG, LONG)

       elist.select(optionlist, index)

@{b}   FUNCTION@{ub}
       Recognized tags are:
           "list"  --  next item is a normal E list. The object is set to
               hold that list. See @{"elist/set()" Link "set()"}.

@{b}   INPUTS@{ub}
       optionlist:LONG -- list of options

       index:LONG -- @{"index" Link "definitions/index()"} of option list

@{b}   EXAMPLE@{ub}
       see object/select for an example of how select() works in general.

@{b}   SEE ALSO@{ub}
       @{"elist/set()" Link "set()"}

@EndNode

@Node "set()" "elist/set"

@{b}   NAME@{ub}
       set() of @{"elist" Link "elist/elist()"} -- Sets the contents of the list.

@{b}   SYNOPSIS@{ub}
       elist.set(LONG)

       elist.set(elist)

@{b}   FUNCTION@{ub}
       The object is set to point to the list that is given to the function.
       By calling this function you hand the list over to the object. That
       means that you may not free it unless you remove it from the object
       first. Note that the list is automatically freed when ENDing this
       object.

       If the object already holds a list that one is freed first. So if
       you want to remove a list from the object safely after you have passed
       it you may call this function with NIL.

@{b}   INPUTS@{ub}
       elist:LONG -- normal E list. May be NIL.

@{b}   EXAMPLE@{ub}

       -> First allocate it

       NEW elist.new()

       -> set it

       elist.set([1,2,3,42])

       -> now free it
       elist.set(NIL)

@{b}   NOTES@{ub}
       This function is called when you provide the tag "list" in the option
       list for method @{"new()" Link "resource/new()"}

@{b}   SEE ALSO@{ub}
       @{"elist" Link "elist/elist()"}, @{"new()" Link "resource/new()"}

@EndNode

@Node "strip()" "elist/strip"

@{b}   NAME@{ub}
       strip() of @{"elist" Link "elist/elist()"} -- Strip existing list from object.

@{b}   SYNOPSIS@{ub}
       elist.strip()

@{b}   FUNCTION@{ub}
       Gets you the existing list and initializes the object. The list you
       get can be used ater the object was ENDed. Useful in procs
       when you want to work with the @{"elist" Link "elist/elist()"} object but don't want to return
       this object.

@{b}   EXAMPLE@{ub}

@{b}     PROC passMeAList(passedList)@{ub}
@{b}     DEF elist:PTR TO @{"elist" Link "elist/elist()"},@{ub}
         list,
         anyVar

         NEW elist.new()

         ForAll({anyVar}, passedList, 'IF anyVar=42 THEN elist.add('blue-foot
ed boobie'))

        /*
         * We strip the list from the object for outside of this proc
         * nobody should know what object we'rr working with :)
         */

         list := elist.strip()
         END @{"elist" Link "elist/elist()"}

@{b}     ENDPROC list@{ub}

@{b}   SEE ALSO@{ub}
       @{"elist" Link "elist/elist()"}, @{"init()" Link "init()"}

@EndNode

