@database "programSource"
@master "Ram Disk:T/docs/programSource.doc"

@Node Main "programSource.doc"
    @{" --background-- " Link "--background--"}
    @{" --programSource--() " Link "--programSource--()"}
    @{" buildBlockList() " Link "buildBlockList()"}
    @{" compile() " Link "compile()"}
    @{" findBlock() " Link "findBlock()"}
    @{" interpret() " Link "interpret()"}
@EndNode

@Node "--background--" "programSource/--background--"

@{b}   PURPOSE@{ub}
       The basic object for dealing with program sources is programSource.
       You may @{"interpret" Link "programSource/interpret()"}, @{"compile" Link "programSource/compile()"} and edit the file as well as anylizing
       it.

@{b}   CREATION@{ub}
       September 24 1995 Gregor Goldbach

@{b}   HISTORY@{ub}
       October 2 1995 Gregor Goldbach
         Moved sourceBlock to the subdirectory of this object.

@EndNode

@Node "--programSource--()" "programSource/--programSource--"

@{b}   NAME@{ub}
       programSource

@{b}   ATTRIBUTES@{ub}
       None at this point. May change

@EndNode

@Node "buildBlockList()" "programSource/buildBlockList"

@{b}   NAME@{ub}
       buildBlockList() -- Build a list of blocks in the source.

@{b}   SYNOPSIS@{ub}
       programSource.buildBlockList(head:PTR TO CHAR, tail:PTR TO CHAR,
           fromLine=0, mode="FrFr",proc=NIL)

@{b}   FUNCTION@{ub}
       Builds an @{"elist" Link "elist/elist()"} with source blocks found by @{"findBlock()" Link "findBlock()"}. Before
       adding a found source block to the list it is passed to a function
       defined in the proc parameter.

@{b}   INPUTS@{ub}
       head:PTR TO CHAR -- Pointer to the text that marks the head of the
           block

       tail:PTR TO CHAR -- Pointer to the text that marks the tail of the
           block

       fromLine=0
         Number of the line where the search should start.

       mode -- One of the following:
         "FrFr" - head is at the beginning of the line, tail too
         "FrBa" - head is at the beginning of the line, tail is
          at the end
         "BaFr" - head is at the back, tail at the front
         "BaBa" - both strings are at the end

       proc=NIL -- Pointer to a procedure which has one parameter: the
           source block which was found. This way nheriting objects can
           modify source blocks immediately when they are found.

@{b}   RESULT@{ub}
       @{"elist" Link "elist/elist()"} with source blocks found.

@{b}   SEE ALSO@{ub}
       programSource/sourceBlock
@EndNode

@Node "compile()" "programSource/compile"

@{b}   NAME@{ub}
       compile() -- Compile this source.

@{b}   SYNOPSIS@{ub}
       programSource.compile()

@{b}   FUNCTION@{ub}
       Runs this source in compile mode. Has to be extended by
       inheriting objects, by now it does nothing.

@EndNode

@Node "findBlock()" "programSource/findBlock"

@{b}   NAME@{ub}
       findBlock() -- Find a source block in the file.

@{b}   SYNOPSIS@{ub}
       programSource.findBlock(head:PTR TO CHAR, tail:PTR TO CHAR,
           fromLine=0, mode="FrFr")

@{b}   FUNCTION@{ub}
       Looks for a block in the source. The block starts with the head line
       and ends with the tail line.

@{b}   INPUTS@{ub}
       head:PTR TO CHAR -- Pointer to the text that marks the head of the
           block

       tail:PTR TO CHAR -- Pointer to the text that marks the tail of the
           block

       fromLine=0
         Number of the line where the search should start.

       mode
         One of the following:
           "FrFr" - head is at the beginning of the line, tail too
           "FrBa" - head is at the beginning of the line, tail is
               at the end
           "BaFr" - head is at the back, tail at the front
           "BaBa" - both strings are at the end

@{b}   RESULTS@{ub}
       startLine, endLine -- Numbers of the lines where the according
           part starts. Note that startLine may be 0 if you started at 0,
           else both numbers should be greater than 0.

@{b}   EXAMPLES@{ub}

       source.findBlock('{','}', 0, "FrBa")

         should find this segment:

         {int n;
             n = i*3;
           return(n)}



       source.findBlock('PROC','ENDPROC', 0, "FrFr")

         should find this segment:

        PROC foo(bar=NIL)
        RETURN "did ","you ", "know"
        ENDPROC

@EndNode

@Node "interpret()" "programSource/interpret"

@{b}   NAME@{ub}
       interpret() -- Interpret this source.

@{b}   SYNOPSIS@{ub}
       programSource.interpret()

@{b}   FUNCTION@{ub}
       Runs this source in interpreter mode. Has to be extended by
       inheriting objects, by now it does nothing.

@EndNode

