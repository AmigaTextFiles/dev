@database "index"
@master "Ram Disk:T/docs/index.doc"

@Node Main "index.doc"
    @{" recordIndex() " Link "recordIndex()"}
    @{" recordIndex() " Link "recordIndex()"}
    @{" addIndexedField() " Link "addIndexedField()"}
    @{" addRecord() " Link "addRecord()"}
    @{" dumpIndex() " Link "dumpIndex()"}
    @{" init() " Link "init()"}
    @{" loadFromFile() " Link "loadFromFile()"}
    @{" removeIndexedField() " Link "removeIndexedField()"}
    @{" removeRecord() " Link "removeRecord()"}
    @{" select() " Link "select()"}
    @{" writeToFile() " Link "writeToFile()"}
@EndNode

@Node "recordIndex()" "associativeStringArray/recordIndex"

@{b}   NAME@{ub}
       recordIndex() of associativeStringArray

@{b}   PURPOSE@{ub}
       Index object for use with the database object(s).

       An @{"index" Link "definitions/index()"} is a table that is accessed by a key. Compared with an array,
       the array is the table and the key is the element number. The key
       has to be unique. When you insert things in the table they are sorted.

       This @{"index" Link "definitions/index()"} has no hard coded key. You can build your own keys and
       build a number of indeces to access one @{"datafile" Link "definitions/datafile()"}. When you insert a
       @{"record" Link "record/record()"} it is inserted alpha-numerically sorted by the contents of
       the key @{"field" Link "field/field()"} you build the @{"index" Link "definitions/index()"} from.

       For example, the @{"record" Link "record/record()"}

           name    30  @{"string" Link "reqtools/string()"}
           age     3   integer
           country 30  @{"string" Link "reqtools/string()"}

       is used to create a @{"datafile" Link "definitions/datafile()"}. You can now build an @{"index" Link "definitions/index()"} with the name
       @{"field" Link "field/field()"}, the age @{"field" Link "field/field()"} or the country @{"field" Link "field/field()"}. Future use may include the
       feature of building an @{"index" Link "definitions/index()"} from more than one @{"field" Link "field/field()"}.

       When working with an @{"index" Link "definitions/index()"} the records in the @{"datafile" Link "definitions/datafile()"} can be accessed
       by this @{"index" Link "definitions/index()"} or just by disk. By disk means that when you read one
       @{"record" Link "record/record()"} after another you'll get them like they are found on disk.

       Getting the files by @{"index" Link "definitions/index()"} means that you don't read them as found on
       disk but as found in the @{"index" Link "definitions/index()"}. Say, we have a @{"datafile" Link "definitions/datafile()"} of the above
       @{"record" Link "record/record()"} with the following entries:

           'Gregor Goldbach", 22, 'Germany'
           'Wouter van Oortmerssen', 24, 'Netherlands'
           'Barry Wills', 123, 'USA'

       We have built an @{"index" Link "definitions/index()"} of the name @{"field" Link "field/field()"}. This looks like this:

           3,1,2

       So, when working with the @{"index" Link "definitions/index()"}, you can say 'Go to the first record'
       and you are at the 'Barry' @{"record" Link "record/record()"}. The third @{"record" Link "record/record()"} is the 'Wouter'
       @{"record" Link "record/record()"}.

@{b}   ATTRIBUTES@{ub}
       datafile:PTR TO dataFile -- 

       indexedFields:PTR TO @{"associativeArray" Link "associativeArray/associativeArray()"} -- 

@{b}   SEE ALSO@{ub}
       associativeStringArray

@EndNode

@Node "recordIndex()" "recordIndex"

@{b}   NAME@{ub}
       findRecordByIndex() of recordIndex --

@{b}   SYNOPSIS@{ub}
       recordIndex.findRecordByIndex(PTR TO record)

       recordIndex.findRecordByIndex(record)

@{b}   FUNCTION@{ub}
       Finds the @{"record" Link "record/record()"} that was inserted to the @{"index" Link "definitions/index()"} list by this @{"index" Link "definitions/index()"}.
       Note that you have to pass a @{"record" Link "record/record()"} with valid @{"field" Link "field/field()"} entries.

@{b}   INPUTS@{ub}
       record:PTR TO @{"record" Link "record/record()"} -- The first @{"field" Link "field/field()"} of this @{"record" Link "record/record()"} will be used
           to find the @{"record" Link "record/record()"} on disk.

@{b}   SEE ALSO@{ub}
       recordIndex HANDLE

@EndNode

@Node "addIndexedField()" "recordIndex/addIndexedField"

@{b}   NAME@{ub}
       addIndexedField() of @{"recordIndex" Link "index/recordIndex()"} -- Add @{"field" Link "field/field()"} to @{"index" Link "definitions/index()"} by.

@{b}   SYNOPSIS@{ub}
       recordIndex.addIndexedField(PTR TO @{"field" Link "field/field()"}, LONG=0)

       recordIndex.addIndexedField(field, priority)

@{b}   FUNCTION@{ub}
       Adds a @{"field" Link "field/field()"} to the list of fields the @{"index" Link "definitions/index()"} is created of.

       Only for future use, the current @{"index" Link "definitions/index()"} is built from the first @{"field" Link "field/field()"}
       of the @{"record" Link "record/record()"}.

@{b}   INPUTS@{ub}
       field:PTR TO @{"field" Link "field/field()"} -- Field to add to the list.

       priority:LONG -- Priority to insert by. Has to be unique.

@{b}   SEE ALSO@{ub}
       @{"recordIndex" Link "index/recordIndex()"}

@EndNode

@Node "addRecord()" "recordIndex/addRecord"

@{b}   NAME@{ub}
       addRecord() of @{"recordIndex" Link "index/recordIndex()"} -- Add @{"record" Link "record/record()"} to @{"index" Link "definitions/index()"}.

@{b}   SYNOPSIS@{ub}
       recordIndex.addRecord(PTR TO record)

       recordIndex.addRecord(record)

@{b}   FUNCTION@{ub}
       Adds a @{"record" Link "record/record()"} to the @{"index" Link "definitions/index()"}. The @{"index" Link "definitions/index()"} of the @{"record" Link "record/record()"} will be built
       and the @{"record" Link "record/record()"} is inserted in the indexed list of records.

@{b}   INPUTS@{ub}
       record:PTR TO @{"record" Link "record/record()"} -- Record to add. It will be added by the first
           @{"field" Link "field/field()"}.

@{b}   SEE ALSO@{ub}
       @{"recordIndex" Link "index/recordIndex()"}

@EndNode

@Node "dumpIndex()" "recordIndex/dumpIndex"

@{b}   NAME@{ub}
       dumpIndex() of @{"recordIndex" Link "index/recordIndex()"} -- Dump @{"index" Link "definitions/index()"}.

@{b}   SYNOPSIS@{ub}
       recordIndex.dumpIndex()

@{b}   FUNCTION@{ub}
       Dumps some information about the @{"index" Link "definitions/index()"} to stdout.

@{b}   SEE ALSO@{ub}
       @{"recordIndex" Link "index/recordIndex()"}

@EndNode

@Node "init()" "recordIndex/init"

@{b}   NAME@{ub}
       init() of @{"recordIndex" Link "index/recordIndex()"} -- Initialisation of the object.

@{b}   SYNOPSIS@{ub}
       recordIndex.init()

@{b}   FUNCTION@{ub}
       News the indexed fields attribute and calls super init.

@{b}   SEE ALSO@{ub}
       @{"recordIndex" Link "index/recordIndex()"}

@EndNode

@Node "loadFromFile()" "recordIndex/loadFromFile"

@{b}   NAME@{ub}
       loadFromFile() of @{"recordIndex" Link "index/recordIndex()"} -- Load @{"index" Link "definitions/index()"} from file.

@{b}   SYNOPSIS@{ub}
       recordIndex.loadFromFile()

@{b}   FUNCTION@{ub}
       Reads the @{"index" Link "definitions/index()"} from a file. Handles a non-existent @{"index" Link "definitions/index()"}.

@{b}   SEE ALSO@{ub}
       @{"recordIndex" Link "index/recordIndex()"}

@EndNode

@Node "removeIndexedField()" "recordIndex/removeIndexedField"

@{b}   NAME@{ub}
       removeIndexedField() of @{"recordIndex" Link "index/recordIndex()"} -- Remove @{"field" Link "field/field()"} from @{"index" Link "definitions/index()"}
           list.

@{b}   SYNOPSIS@{ub}
       recordIndex.removeIndexedField(LONG)

       recordIndex.removeIndexedField(priority)

@{b}   FUNCTION@{ub}
       Remove @{"field" Link "field/field()"} from the list of fields that are used to build the @{"index" Link "definitions/index()"}

       Only for future use, the current @{"index" Link "definitions/index()"} is built from the first @{"field" Link "field/field()"}
       of the @{"record" Link "record/record()"}.

@{b}   INPUTS@{ub}
       priority:LONG -- Priority of the @{"field" Link "field/field()"} to remove.

@{b}   SEE ALSO@{ub}
       @{"recordIndex" Link "index/recordIndex()"}

@EndNode

@Node "removeRecord()" "recordIndex/removeRecord"

@{b}   NAME@{ub}
       removeRecord() of @{"recordIndex" Link "index/recordIndex()"} -- Remove @{"record" Link "record/record()"} from @{"index" Link "definitions/index()"} list.

@{b}   SYNOPSIS@{ub}
       recordIndex.removeRecord(PTR TO record)

       recordIndex.removeRecord(record)

@{b}   FUNCTION@{ub}
       Remove @{"record" Link "record/record()"} from @{"index" Link "definitions/index()"}. The @{"record" Link "record/record()"} is still in the @{"datafile" Link "definitions/datafile()"}.

@{b}   INPUTS@{ub}
       record:PTR TO @{"record" Link "record/record()"} -- 

@{b}   SEE ALSO@{ub}
       @{"recordIndex" Link "index/recordIndex()"}

@EndNode

@Node "select()" "recordIndex/select"

@{b}   NAME@{ub}
       select() of @{"recordIndex" Link "index/recordIndex()"} -- Selection of action.

@{b}   SYNOPSIS@{ub}
       recordIndex.select(LONG, LONG)

       recordIndex.select(optionlist, index)

@{b}   FUNCTION@{ub}
       Recognized tags are:
           "dfil" -- set the @{"datafile" Link "definitions/datafile()"} attribute.

@{b}   INPUTS@{ub}
       optionlist:LONG -- List of options.

       index:LONG -- Index of option list

@{b}   SEE ALSO@{ub}
       @{"recordIndex" Link "index/recordIndex()"}

@EndNode

@Node "writeToFile()" "recordIndex/writeToFile"

@{b}   NAME@{ub}
       writeToFile() of @{"recordIndex" Link "index/recordIndex()"} -- Write @{"index" Link "definitions/index()"} to file.

@{b}   SYNOPSIS@{ub}
       recordIndex.writeToFile()

@{b}   FUNCTION@{ub}
       Writes the complete @{"index" Link "definitions/index()"} to a file.

@{b}   SEE ALSO@{ub}
       @{"recordIndex" Link "index/recordIndex()"}

@EndNode

