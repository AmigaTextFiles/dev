@database dbplayer.guide

@Node Main "dbplayer.guide"

Digi Booster replayer library guide, v. 2.0

Written in 1998 by Sebastian Jedruszkiewicz


 @{" What's this?         " Link "What"} Introduction
 @{" Requirements         " Link "Req"} What do you need to use this library...
 @{" Developer info       " Link "Dev"} And how to use it.
 @{" Author               " Link "Aut"} That's me ;-)
 @{" Thanks               " Link "Thx"} Do I have to explain...
 @{" Bugs                 " Link "Bug"} Known and Unknown...
 @{" History              " Link "Hst"} The story so far...
 @{" Future               " Link "Fut"} To do...


@EndNode

@Node What "What's this?"

	In short, this is shared library that contains functions
for playing Digi Booster Modules.
	Digi Booster is copyrighted 1997 by Tomasz & Waldemar Piasta.

	This piece of software is free. You dont have topay, if you want
	to use it. Just credit me somewhere...

@EndNode

@Node Req "Requirements"
	
     - AHI device version at least 4
        AHI can be found on any aminet site:
	 (@{i}dev/misc/ahi.lha@{ui})
        And is copyrighted 1994-1997 by Martin Blom
     - libraries that are used by AHI (for sure it is asl.library and iffparse.library)
     - at least MC68020 Processor

@EndNode

@Node Aut "Author"
	
	This library was created by:

          Sebastian Jedruszkiewicz
          ul. Gdanska 10
          74-125 Chojna
          POLAND

        You can reach me also via e-mail at:
         bjsebo@delta.ii.tuniv.szczecin.pl

@EndNode

@Node Thx "Thans must go to..."
	
         - The autors of "example.library".On their sources i have based this
	   Library.The source for example.library can be found on Aminet:
		dev/c/CLib37X.lha
	 - Bartlomiej Pater for first testing and some sugestions...


@EndNode

@Node Fut "To do..."

       If you think that there is something missing in this library
feel free to contact me. Snail mail and email addresses can be found @{" here " Link "Aut"}

       Personally i think this library has everything it needs.

       If you can make includes for other compilers than SASC,you are welcome.
Mail @{" me " Link "Aut"} if you need some additional infos for creating such a stuff.

@EndNode

@Node Bug "Known and Unknown"

	If you find any bugs in this library,don't hestitate to contact
	@{"me" Link "Aut"}.

@EndNode

@Node Dev "How to use this library"

      This archive contains all includes needed to use dbplayer.library.
These includes are created for SASC compiler.
      In lib/ directory you will find source and linkable library for SASC
compiler, handling autoopening and autoclosing dbplayer.library.

      In bin/ directory you can find test program, which i am using during
 developing process. 

List of Available functions:

    @{" DBM_StartModule()   " Link "dbm_start()"}
    @{" DBM_StopModule()    " Link "dbm_stop()"}
    @{" DBM_SetPosition()   " Link "dbm_setpos()"}
    @{" DBM_SetVolume()     " Link "dbm_setvol()"}
    @{" DBM_CheckPosition()  " Link "dbm_Check()"}
    @{" DBM_Get7Command()   " Link "dbm_get7()"}
    @{" DBM_GetModuleAttrA()   " Link "dbm_getattr()"}

@EndNode

@Node "dbm_start()" "dbmplayer.library/DBM_StartModule"

@{b}   NAME@{ub}
       DBM_StartModule -- Play a DigiBooster module.

@{b}   SYNOPSIS@{ub}
       error = DBM_StartModule( module,size,AudioModeID,AudioFrequency,Flags)
       D0                        A0     D0     D1           d2          d3

       ULONG DBM_StartModule( APTR,ULONG,ULONG,ULONG,ULONG);

@{b}   FUNCTION@{ub}
       Initialize the replayer and start playing the given module.

@{b}   INPUTS@{ub}
       module         - pointer to a DigiBooster module.
			After player starts playing module
                        you can free memory allocated for module
       size	      - size of the module in bytes
       AudioModeID    - AHI Audio mode
			-1 can be also passed as this parametter.Then
                        AHI AslModeRequester will be prompt to select
                        AudioModeID and AudioFrequency.
			In oldest versions this feature was available when
			0 was given as AudioModeID. Now it is -1
			due to incompability with AHI_DEFAULT_ID (which
			is also defined as 0).
               Values that was selected from this asl requester are then
               stored in:
                 DBPlayerBase->dbpb_AudioModeID;
                 DBPlayerBase->dbpb_AudioFrequency;
               And are ready for you to use.
     
       These values are also stored there if there was specified valid
       an AudioModeID and AudioFrequency.

       AudioFrequency - Audio Frequency
                        This value is not important if 0 or -1 was passed as
                        AudioModeID.
       Flags	      - Only one flag is supported right now:

			DBF_AUTOBOOST - turns AutoBoost On.

@{b}   RESULT@{ub}
       error - if the replayer started successfully, this will be 0.
		Otherwise an error as described in <dbplayer/dbplayer.h>

@{b}   NOTES@{ub}
	OF course you cannot play two module at the same time.
	If you call DBM_StartModule(), and there is some already module
	played error DBM_ALREADY_PLAYING is returned.
	

@{b}   SEE ALSO@{ub}
       @{"DBM_StopModule()" Link "dbm_stop()"}

@EndNode

@Node "dbm_stop()" "dbmplayer.library/DBM_StopModule"

@{b}   NAME@{ub}
       DBM_StopModule -- stop the replayer.

@{b}   SYNOPSIS@{ub}
       DBM_StopModule( )

       void DBM_StopModule( void );

@{b}   FUNCTION@{ub}
       If the replayer was started successfully with @{"DBM_StartModule()" Link "dbm_Start()"}, this
       function turns the replayer off and deallocates all resources.

@{b}   NOTES@{ub}
	You can call this function even if there is no module played.
	Simply Nothing happens.

@{b}   SEE ALSO@{ub}
       @{"DBM_StartModule()" Link "dbm_start()"}

@EndNode

@Node "dbm_setpos()" "dbmplayer.library/DBM_SetPosition"

@{b}   NAME@{ub}
       DBM_SetPosition -- jump to given position in module

@{b}   SYNOPSIS@{ub}

       DBM_SetPosition( SongPos , PattPos)
			 D0         D1

       VOID DBM_SetPosition( UWORD ,UWORD );

@{b}   FUNCTION@{ub}
       After this functions has been called,replayer will jump to
       Song Pattern given by "SongPos" and to position in this pattern
       given by "PattPos"

@{b}   NOTES@{ub}
	You should call @{"DBM_StartModule()" Link "dbm_Start()"} before
       this function.

@{b}   SEE ALSO@{ub}
       @{"DBM_CheckPosition()" Link "dbm_Check()"}

@EndNode

@Node "dbm_setvol()" "dbmplayer.library/DBM_SetVolume"
 
@{b}   NAME@{ub}
       DBM_SetVolume -- Set new master volume.

@{b}   SYNOPSIS@{ub}

       DBM_SetVolume( Volume )
			 D0

       VOID DBM_SetVolume( WORD );

@{b}   FUNCTION@{ub}
       Set volume for all channels to given value.
	Valid values are from range 0 - 64. If given value is less then
       0 volume will be set to zero.If it is greater than 64 volume 
	will be set to 64.

@{b}   NOTES@{ub}
	This function can be called even if replayer is not running.

@{b}   SEE ALSO@{ub}

@EndNode

@Node "dbm_Check()" "dbmplayer.library/DBM_CheckPosition"

@{b}   NAME@{ub}
       DBM_CheckPosition -- check if replayer is at given position

@{b}   SYNOPSIS@{ub}

       DBM_CheckPosition( SongPos,PattPos)
			 D0     

       BOOL DBM_CheckPosition( WORD , WORD);
				d0    d1

@{b}   FUNCTION@{ub}
	Check if the replayer is at given position in song.

@{b}   RESULT@{ub}
       Function returns TRUE if replayer plays pattern (SongPos) that 
	is equal or greater than given value, and position in this 
	pattern is greater or equal than given value(PattPos).Otherwise 
	it returns FALSE.

@{b}   NOTES@{ub}
	You should be very carefull when calling this routine.
	You cannot for example do something like this:
	  while(!DBM_CheckPosition(10,3));
	if there are only 5 patterns in module, it can simply be an 
	infinity loop.

@{b}   SEE ALSO@{ub}
       @{"DBM_SetPosition()" Link "dbm_setpos()"}

@EndNode

@Node "dbm_get7()" "dbmplayer.library/DBM_Get7Command"

@{b}   NAME@{ub}
       DBM_Get7Command -- Get a byte that comes after last 7xx command.

@{b}   SYNOPSIS@{ub}
       value = DBM_Get7Command()
       D0      

       LONG DBM_Get7Command(VOID);

@{b}   FUNCTION@{ub}
	This functions returns value that was used in last 7xx command.
	You can use this function just like the old E8x command from
	protracker.
	if replayer has found 7xx command in module, xx is stored in
	DBPlayerBase->dbpb_Last7Command.
	This value is not changed until next 7xx command appears.

	7xx command is not used by DigiBooster (I hope so...).

@{b}   INPUTS@{ub}
		NONE

@{b}   RESULT@{ub}
       value - the xx after last 7xx command.

@{b}   NOTES@{ub}
       Function returns LONG, but xx can be a value from 0 - 255.

@{b}   SEE ALSO@{ub}
       @{"DBM_CheckPosition()" Link "dbm_Check()"}

@EndNode

@Node "dbm_getattr()" "dbmplayer.library/DBM_GetModuleAttrA"

@{b}   NAME@{ub}
       DBM_GetModuleAttrA -- Obtain some info about actually replayed 
			     module.

@{b}   SYNOPSIS@{ub}
       DBM_GetModuleAttrA(Tags)
             

       VOID DBM_GetModuleAttrA(struct TagItem *);
			       a0

@{b}   FUNCTION@{ub}
		This function will give you some info about currently
		played module.
		
		Currently, one or more of this tags can be used
		with this function:

		DBMATTR_InstNum
		 Number of instruments in module.ti_Data should
		contains pointer to ULONG,where this number will be stored.

		DBMATTR_PattNum
		 Number of patterns in module.ti_Data should
		contains pointer to ULONG,where this number will be stored.

		DBMATTR_ChanNum
		 Number of channels that module is using.ti_Data should
		contains pointer to ULONG,where this number will be stored.

		DBMATTR_ModName
		 Module name.ti_Data should contains pointer to 
		STRPTR ,where address of name string will be stored.

		DBMATTR_InstNames
		 Instruments names.ti_Data should be pointer STRPTR *.
		Function will return pointer to table,where are stored
		pointers to each instrument name.

@{b}   INPUTS@{ub}
		Pointer to filled TagItem structure

@{b}   RESULT@{ub}


@{b}   NOTES@{ub}
		It may not work,with some modules,dunno why.

@{b}   SEE ALSO@{ub}

@EndNode

@Node Hst "The story so far..."

History:
	v2.0    -       replayer was rewritten to gain some more
		        speed.
		-       DBM_StartModule() was rewritten (requester
			can be now opened with -1 given as
			audiomodeID. This enables possibility
			of using AHI_DEFAULT_ID.

	v1.3	-	new function DBM_GetModuleAttrA() was added
			See docs for more info.
		-	function DBM_WaitPosition was renamed to
			DBM_CheckPositon.
		-	assembler includes added

	v1.2 (not publicly released)
		-	some speedup made in player code
		-	added missing #if statement in
			includes for ppc
		-	Added includes for BlitzBasic.Those files
			was made by Scott Beardwood 
			(scott@online.u-net.com)
			Thanks a lot.
		- 	new function DBM_Get7Command() was added
			See docs for more details.
		- 	Addeed includes for assembler.
		
	v1.1    -	not publicly released

	v1.0	-	first public release

@EndNode
