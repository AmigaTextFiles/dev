@database Picture_Obj

@$VER: Picture_Obj V1.00 Docs - By Fabio Rotondo

@node "Main" "Amiga-E Module: Picture_Obj"



                  ** Picture_Obj - Written By Fabio Rotondo **

                           ** DOCUMENTATION GUIDE **

        @{" Introduction " link "Picture_Obj_introduction" 0}             @{" Author's Infos " link "author" 0}

   SUPERCLASS: bitmap_obj
        NEEDS: iffparser_oo

   NEW COMMANDS                          BRIEF DESCRIPTION
   -------------------------------------------------------------------------
   @{" Picture(pal=TRUE)                  " link "Picture_Obj_Picture" 0} Initailizes the object.
   @{" bmhd()                             " link "Picture_Obj_bmhd" 0} Returns Picture's bitmapheader.
   @{" check(fname)                       " link "Picture_Obj_check" 0} Checks if the file is IFF.
   @{" colors()                           " link "Picture_Obj_colors" 0} Return Picture's number of colors.
   @{" infos(fname, loadpal=TRUE)         " link "Picture_Obj_infos" 0} Get IFF picture infos.
   @{" loadbody(bmp=NIL)                  " link "Picture_Obj_loadbody" 0} Read IFF Picture body.
   @{" loadpic(fname)                     " link "Picture_Obj_loadpic" 0} Load a IFF Picture.
   @{" palette()                          " link "Picture_Obj_palette" 0} Return mem addr of Picture's pal.
   @{" paltoscr(scr:PTR TO screen)        " link "Picture_Obj_paltoscr" 0} Set Screen's palette.
   @{" savepal(fname)                     " link "Picture_Obj_savepal" 0} Saves palette into a file.
   @{" savepic(fname)                     " link "Picture_Obj_savepic" 0} Saves picture into a file.
   @{" viewmode()                         " link "Picture_Obj_viewmode" 0} Returns Picture's display ID.

   NOTE FOLLOWING FUNCTIONS ARE *NOT* DOCUMENTED

   @{" decodebody()                       " link "Picture_Obj_decodebody" 0} INTERNAL USE ONLY
   @{" doscan()                           " link "Picture_Obj_doscan" 0} INTERNAL USE ONLY
   @{" dumpanno()                         " link "Picture_Obj_dumpanno" 0} INTERNAL USE ONLY
   @{" dumppal()                          " link "Picture_Obj_dumppal " 0} INTERNAL USE ONLY
   @{" writebody()                        " link "Picture_Obj_writebody" 0} INTERNAL USE ONLY

   @{" Raise Table                        " link "Raise_Table"}

   @{" Notes                              " link "notes"} Read it carefully.
   @{" Greetings                          " link "greetings"} Thanks Mik!
@endnode

@node "Picture_Obj_Introduction" "Introduction"

    Picture object allows to import IFF ILBM pictures inside an application.

    It is OS2.0/OS3.0 compatible and optimized, and DOES NOT REQUIRE EXTERNAL
    LIBRARIES such as iff.library.

    It is extremely fast and easy to use. I have also implemented some
    low - level functions.

    I hope you'll like this object and all the others I have done.


    Thanks,

        Fabio Rotondo
@endnode

@node "author" "Author's Infos "
    My name is Fabio Rotondo. I am a free-lance Amiga programmer and I would
    like to get in touch with anyone who writes code for the Amiga.
    I write in AmigaE, BlitzII, C and a bunch of other languages.

    Please, feel free to contact me for any suggestions/questions.

    My address is:

    Fabio Rotondo
    C.so Vercelli 9
    28100 Novara
    ITALY
    Tel. (ITA) - (0)321 - 459676
    e-mail: fsoft@intercom.it

    Check out my WWWPage with many of my AmigaE Modules/Sources!

-------------------------------------------------------------------------
   //                      | Fabio Rotondo      e-mail: fsoft@intercom.it
\\X/ Amiga. Feel The Power.| URL: (Amiga!)  http://www.intercom.it/~fsoft
+-----------------------------------------------------------------------+
|GTBoxConv V4.50|SafeLocks V1.00|Locator.library V1.10|MIDIBridge V1.00 |
|MIDIFilter V1.3| FinalDT V1.00 |DOOPSI-GS (1.00 Beta)|FinalTyper V2.5  |
+-----------------------------------------------------------------------+
|Amiga Blast (Web Mag.!!!): http://www.intercom.it/~fsoft/ablast.html   |
+------------------ Amiga Group Italia (Novara) ------------------------+


    Check out Amiga Blast, the first Italian Amiga WEB Magazine:

                http://www.intercom.it/~fsoft/ablast.html
@endnode

@node "Picture_Obj_picture" "Amiga-E Modules: Picture_Obj/()"

           NAME: picture(pal=TRUE)

    DESCRIPTION: This method initialized the picture object.

          INPUT: pal        - If this flag is set to TRUE, during
                              initailization, will be allocated memory
                              for storing a palette (Max. 256 colors).

        RESULTS: NONE.

          RAISE:

       SEE ALSO:
@endnode

@node "Picture_Obj_check" "Amiga-E Modules: Picture_Obj/check()"

           NAME: check(fname:PTR TO CHAR)

    DESCRIPTION: Use this method to know if a given filename is a
                 valid IFF ILBM picture or not.

          INPUT: fname      - (PTR TO CHAR) name of the file to examine.

        RESULTS: TRUE       - The file is a valid IFF ILBM picture.
                 FALSE      - Otherwise.

          RAISE:

       SEE ALSO: @{" infos() " LINK "Picture_Obj_infos"}
@endnode

@node "Picture_Obj_infos" "Amiga-E Modules: Picture_Obj/infos()"

           NAME: infos(fname:PTR TO CHAR, loadpal=TRUE)

    DESCRIPTION: This function gets a lot of information from the given
                 IFF ILBM file, and (as a bonus ;) it can also load up
                 picture's palette.

          INPUT: fname      - (PTR TO CHAR) name of the picture file.
                 loadpal    - Set this to TRUE if you want to load the
                              palette (Default: TRUE)

        RESULTS: NONE.

           NOTE: This is quite a low level function. In almost all your
                 programs, you'll use @{" loadpic() " LINK "Picture_Obj_loadpic"} instead.

          RAISE: @{" bmhd " LINK "Raise_Table"}
                 @{" cmap " LINK "Raise_Table"}

       SEE ALSO: @{" loadpic()  " LINK "Picture_Obj_loadpic"}
                 @{" loadbody() " LINK "Picture_Obj_loadbody"}
@endnode

@node "Picture_Obj_loadbody" "Amiga-E Modules: Picture_Obj/loadbody()"

           NAME: loadbody(bmp=NIL:PTR TO bitmap)

    DESCRIPTION: This method can be used in two different ways:

                 1 - By passing a valid PTR TO bitmap, you can assign
                     that bitamp to the object. Note that in this way
                     will be *YOUR* task to free the bitmap once you
                     have used it.

                 2 - By passing NIL as PTR TO bitmap (DEFAULT) the object
                     will allocate a bitmap large enough to contain the
                     body of the just examined picture (via @{" infos() " LINK "Picture_Obj_infos"}).


          INPUT: bmp        - (PTR TO bitmap) bitmap to use inside the object.
                              (Default: NIL)

        RESULTS: The body will be decoded into the passed bitmap.

           NOTE: This is quite a low level function. In almost all your
                 programs, you'll use @{" loadpic() " LINK "Picture_Obj_loadpic"} instead.

          RAISE: @{" body " LINK "Raise_Table"}

       SEE ALSO: @{" loadpic() " LINK "Picture_Obj_loadpic"}
                 @{" infos()   " LINK "Picture_Obj_infos"}
@endnode

@node "Picture_Obj_loadpic" "Amiga-E Modules: Picture_Obj/loadpic()"

           NAME: loadpic(fname:PTR TO CHAR)

    DESCRIPTION: This method just load a picture into memory.

          INPUT: fname      - (PTR TO CHAR) name of the IFF ILBM picture 
                              to load.

        RESULTS: The picture is loaded into memory.

          RAISE:

       SEE ALSO: @{" viewmode() " LINK "Picture_Obj_viewmode"}
                 @{" bmhd()     " LINK "Picture_Obj_bmhd"}
@endnode

@node "Picture_Obj_viewmode" "Amiga-E Modules: Picture_Obj/viewmode()"

           NAME: viewmode()

    DESCRIPTION: This methods returns the picture's display ID (the display
                 mode that should be used when showing the picture).

          INPUT: NONE.

        RESULTS: a LONG value containing the display ID. It may be NIL.

          RAISE:

       SEE ALSO: @{" bmhd() " LINK "Picture_Obj_bmhd"}
@endnode

@node "Picture_Obj_bmhd" "Amiga-E Modules: Picture_Obj/bmhd()"

           NAME: bmhd()

    DESCRIPTION: This method returns a PTR TO current picture bitmap header.

          INPUT: NONE.

        RESULTS: a PTR TO a bitmap header structure.

          RAISE:

       SEE ALSO: @{" viewmode() " LINK "Picture_Obj_viewmode"}
@endnode

@node "Picture_Obj_colors" "Amiga-E Modules: Picture_Obj/colors()"

           NAME: colors()

    DESCRIPTION: This method return number of colors of the current picture.

          INPUT: NONE.

        RESULTS: a LONG containing picture's number of colors.

          RAISE:

       SEE ALSO: @{" palette() " LINK "Picture_Obj_palette"}
@endnode

@node "Picture_Obj_palette" "Amiga-E Modules: Picture_Obj/palette()"

           NAME: palette()

    DESCRIPTION: This method returns a PTR TO CHAR memory area where the
                 palette is stored.

          INPUT: NONE.

        RESULTS: a PTR TO CHAR memory area. It may be NIL.

          RAISE:

       SEE ALSO: @{" colors() " LINK "Picture_Obj_colors"}
@endnode

@node "Picture_Obj_savepic" "Amiga-E Modules: Picture_Obj/savepic()"

           NAME: savepic(fname:PTR TO CHAR)

    DESCRIPTION: This method saves current picture into a file.
                 It saves also the palette (if present).

          INPUT: fname      - (PTR TO CHAR) file name.

        RESULTS: The file is created and the picture is stored.

          RAISE:

       SEE ALSO: @{" savepal() " LINK "Picture_Obj_savepal"}
@endnode

@node "Picture_Obj_savepal" "Amiga-E Modules: Picture_Obj/savepal()"

           NAME: savepal(fname:PTR TO CHAR)

    DESCRIPTION: This method saves current pal into a file.

          INPUT: fname      - (PTR TO CHAR) file name.

        RESULTS: The palette is stored into a file.

          RAISE:

       SEE ALSO: @{" savepic() " LINK "Picture_Obj_savepic"}
@endnode

@node "Picture_Obj_paltoscr" "Amiga-E Modules: Picture_Obj/paltoscr()"

           NAME: paltoscr(scr:PTR TO screen)

    DESCRIPTION: This method is a shortcut, it allows you to set screen 
                 colors according with the picture's palette.

          INPUT: scr        - (PTR TO screen) screen where place the palette.

        RESULTS: Screen's palette is changing according to the picture's.

           NOTE: At the moment, this is not very fast. I'll try to work out
                 something better with LoadRGB32() e LoadRGB4().

          RAISE:

       SEE ALSO:
@endnode

@node "Raise_Table" "Raise Table"

  VALUE         | DESCRIPTION
----------------+---------------------------------------------------------
  "cmap"        | Color map has not been found.
  "bmhd"        | Bitmap header has not been found.
  "body"        | Picture's body has not been found.
@endnode

@node "Notes" "Notes"

To work correctly, this object needs these files:

    emodules:fabio/iffparser_oo.m
    emodules:fabio/bitmap_oo.m

The bitmap_oo.m is contained into this archive, so there should be no problems,
and the iffparser_oo.m should be found on Aminet under dev/e directory inside
the iffparser.lha archive.
@endnode

@node "Greetings" "Greetings"
    
I wish to thank two friends of mine who helped me in developing this object:

    Michele and Gio of ClassX Development.

Mik gave me the source code of decodebody, and I have just implemented it
in E.

Thank you, guys. These object would never appear without you.
@endnode
