SrcGen: GadToolBox source generator for E

   SrcGen v0.5 updated by Jason R. Hulance (jason@fsel.com) from the
   excellent work by Wouter van Oortmerssen (with some extensions by
   Martin Kuchinka).


Usage
-----

You'll be needing GadToolBox v2.0 or higher, and have the
gadtoolsbox.library that comes with it in your LIBS:.  now, with GTB,
make some simple example (just a window with a few gadgets/menus
etc.), save it as "bla" (filename will be "bla.gui"), and type:

1> SrcGen bla
1> EC bla
1> bla

"bla.e" contains the routines for opening your interface, as well as
some routines to handle idcmpmessages, errors etc., and a dummy "main"
that just waits for one selection. here you can put in your own code.
see the commandline template how to stop SrcGen from generating these
routines.

That's all there's to it. If you have problems, just check the source
that has been generated.

Command line template:

  GUIFILE/A,NOMAIN/S,NOERR/S,NOMES/S,NOLAYOUT/S,NOPROCESS/S,QUIET/S,
  NOTEMPLATE/S,NOMULTI/S,NOFONT/S

All (good) features enabled by default.

  GUIFILE     = .gui file from GadToolsBox
  NOMAIN      = don't generate a main()
  NOERR       = don't generate reporterr()
  NOMES       = don't generate [multi]wait4message()
  NOLAYOUT    = don't layout tag lists nicely
  NOPROCESS   = don't generate [multi]process()
  QUIET       = don't chatter
  NOTEMPLATE  = don't generate template functions for GUI actions
  NOMULTI     = don't handle multiple windows together
  NOFONT      = don't use specified font in the GUI (use default)


Templates
---------

A template function can be generated for when:

  o  The window is closed (IDCMP_CLOSEWINDOW)
  o  A gadget is clicked (IDCMP_GADGETUP)
  o  A menu item is selected (IDCMP_MENUPICK)
  o  A mouse button is pressed (IDCMP_MOUSEBUTTONS)
  o  A key is pressed (IDCMP_VANILLAKEY)
  o  A timer tick happens, approx 10 times a second (IDCMP_INTUITICKS)
  o  A Boopsi communication happens (IDCMP_IDCMPUPDATE)

To get these template functions for a window it needs to have the
corresponding IDCMP flag set (use the "Window|Edit IDCMP..." menu in
GadToolsBox).  If you get a template section but no template functions
for a window then you need to check these flags.

A template function should return FALSE to cause the GUI to quit.  The
produced template functions all default to returning TRUE, except for
the XXX_CloseWindow() functions (where XXX is the window name).

The key template function needs a little more description: you get a
CASE for each key that has been identified by a leading underscore in
the gadget text.  And if that is a letter, you get a CASE for the
shifted (uppercase) letter, too.  But you are responsible for
implementing the (Style Guide compliant) actions resulting from the
key press.  Remember to set the "Underscore" option in the gadget's
attributes (from the "Gadgets|Edit.." menu in GadToolsBox) if you want
the underscore to underline the character.

The global data you can use in the template function includes:

  XXXwnd:PTR TO window  for each window (where XXX is the window name)
                        (e.g., project0wnd, project1wnd)
  scr:PTR TO screen     the screen being used
                        (e.g., Workbench)

And the global data corresponding to the IDCMP message that was
received:

  type   the IDCMP message class (e.g., IDCMP_GADGETUP)
  key    the key that was pressed (i.e., the "code" part of an
         IDCMP_VANILLAKEY message)
  qual   the qualifier that was pressed (i.e., the "qualifier" part of
         an IDCMP_VANILLAKEY or IDCMP_MOUSEBUTTONS message)
  infos  the gadget that was clicked (i.e., the "iaddress" part of an
         IDCMP_GADGETUP message)
  item   the selected menu item (i.e., the ItemAddress() of the
         particular selection, from the many in a single
         IDCMP_MENUPICK message)

Note: the userdata of the window, gadgets and menus are used to store
the information about which template function to call, so you can't
make use of these userdata fields and the template functions...


Multiple Window Handling
------------------------
Multiple windows are handled very efficiently by sharing the IDCMP
port.  This allows the sample main() to open all windows at once, and
for the user to interact with all of them.  Note that a long,
synchronous calculation in, say, one of the template functions will
block all windows, not just the one that caused the operation.

If you specify the NOMULTI switch then you get the normal window
handling code, biased towards single windows.  In this case, the
sample main() will open each window in turn.


History
-------
Original version by Wouter van Oortmerssen, as part of the Amiga E
distribution.

v0.4 by Martin Kuchinka added some more constant decoding and some
other features.

Changes in v0.5:
   - Can now open custom and public screens, not just Workbench
   - Can now generate code to use selected font
   - Added template function generation for common actions
   - Added (very efficient) multi-window processing
   - Added (rudimentary) support for GetFile button
   - Added SA_DISPLAYID decoding into constants
   - Can now handle ' and \ in strings
   - Can now handle illegal characters in project names
   - Tidied constant production code
   - Fixed AUTO_ADJUST bug!
   - Fixed decoding of WA_XXX constants
   - Fixed disabled menus/menuitems
   - Fixed IDCMP flags to use correct bits
   - Fixed window flags to use correct bits
   - Fixed production of SMART refresh flag
   - Fixed menu selection handling
