# Compile the source and copy the program to E:Bin.
# The existing E:Bin/Build will be backed up.
build: build.e .build
	failat 21
	ec $dep
	if not warn
	delete e:bin/build_old
	rename e:bin/build e:bin/build_old
	if not warn
	echo "Renamed previous build in E:bin/"
	endif
	copy build e:bin/
	if warn
	echo "Copying new build to E:bin/ failed"
	else
	echo "Copied new build to E:bin/"
	endif
	endif

# Delete the program
clean:
	delete build

# Copy all files to T:Ebuild and create the archive.
# The documentation is generated from the AEE doc in E:Docs/AEE
dist:
	mkdir t:build >NIL:
	copy all to t:build >NIL:
	cd e:docs/aee/ebuild
	build doc NOHEAD
	copy *.guide to t:build >NIL:
	copy *.html to t:build >NIL:
	cd t:build
	protect build.e +d
	delete *! >NIL:
	cd /
	lha a -arx ram:ebuild.lha build >NIL:
	delete all build >NIL:
	echo "Build archive created in RAM:"
