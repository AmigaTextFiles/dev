<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from ebuild.texi on 14 December 1997 -->

<TITLE>EBuild Documentation - Build Files</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="ebuild_4.html">Next</A> or <A HREF="ebuild_2.html">Previous</A> section or the <A HREF="ebuild_toc.html">Detailed Contents</A>.
<P><HR><P>


<H1><A NAME="SEC3" HREF="ebuild_toc.html#TOC3">3</A>   Build Files</H1>

<UL>
<LI><A HREF="ebuild_4.html">Symbolic Constants</A>
<LI><A HREF="ebuild_8.html">Including Files    </A>
</UL>
<P>
 
Build files are normally named <CODE>.build</CODE>. This is the file EBuild looks 
for when it is run. 

</P>
<P>
The syntax of build files equals that of unix-make. In general, <CODE>#</CODE> precedes 
lines with comments, and: 

</P>

<BLOCKQUOTE>
<PRE>
target: dep1 dep2 ... 
  action1 
  action2 
  ... 
</PRE>
</BLOCKQUOTE>

<P>
 
<CODE>target</CODE> is the resulting file we're talking about, in most cases an 
exe or module, but may be anything. Following the <CODE>:</CODE> you write all 
files that it depends upon, most notably its source, and other modules. 

</P>
<P>
The actions on the following lines are normal AmigaDos commands, and 
need to be preceded by at least one space or tab to distinquish them 
from targets. 

</P>

<BLOCKQUOTE>
<PRE>
bla: bla.e defs.m 
     ec bla quiet 
</PRE>
</BLOCKQUOTE>

<P>
 
This simple example will only recompile <CODE>bla.e</CODE> if it was modified, 
or if the <CODE>defs.m</CODE> which it uses was modified. 

</P>
<P>
If you type <CODE>build</CODE> with no args, build will ensure the 
first target in the file to be up to date. 

</P>
<P>
A longer example: 

</P>

<BLOCKQUOTE>
<PRE>
# test build file 
 
all:    bla burp 
 
defs.m: defs.e 
        ec defs quiet 
 
bla:    bla.e defs.m 
        ec bla quiet 
 
burp:   burp.e 
        ec burp quiet 
 
clean: 
        delete  defs.m bla burp 
</PRE>
</BLOCKQUOTE>

<P>
This build file is about two programs, <CODE>bla</CODE> and <CODE>burp</CODE>, of which <CODE>bla</CODE> 
also depends on a module <CODE>defs.m</CODE>. An extra target <CODE>clean</CODE> has 
been added so you can type <CODE>build clean</CODE> to delete all results. The
<SAMP>`clean'</SAMP> target is called a <STRONG>phony target</STRONG> or <STRONG>fake target</STRONG>
since it's not a real file.

</P>
<P>
The <SAMP>`all'</SAMP> target is a fake target, too. It's okay to have multiple
fake targets, however, these cannot be used as dependancies. 

</P>
<P>
Other dependencies and actions are easily added. For example, 
if your project uses a parser generated by E-Yacc: 

</P>

<BLOCKQUOTE>
<PRE>
yyparse.m: parser.y 
           eyacc parser.y 
           ec yyparse quiet 
</PRE>
</BLOCKQUOTE>

<P>
 
Or incorporates macro-assembly code as often used tool module: 

</P>

<BLOCKQUOTE>
<PRE>
blerk.m: blerk.s 
         a68k blerk.s 
         o2m blerk 
         copy blerk.m emodules:tools 
         flushcache tools/blerk 
</PRE>
</BLOCKQUOTE>

<P>
 
<P><HR><P>
Go to the <A HREF="ebuild_4.html">Next</A> or <A HREF="ebuild_2.html">Previous</A> section or the <A HREF="ebuild_toc.html">Detailed Contents</A>.
</BODY>
</HTML>
