@database "dclistview.guide"
@author "Victor Ducedre"
@(C) "Copyright © 1998,1999 Victor Ducedre"
@$VER: dclistview.guide 1.3 (19-Jan-99)
@remark "Created with GoldED 4.7.3"

@node MAIN "DCListview Plugin"

    Documentation for @{b}dclistview.m@{ub}

    by @{b}Victor Ducedre@{ub} <victord@netrover.com>

    This plugin creates a GadTools Listview gadget, almost identical to the
    standard EasyGUI one, except that it will also report double-clicks on
    list items.

    @{"  " link DCLISTVIEW_USAGE}  Usage
    @{"  " link DCLISTVIEW_METHODS}  Methods
    @{"  " link DCLISTVIEW_ATTRIBUTES}  Attributes
    @{"  " link EXCEPTIONS}  Exceptions

    @{"  " link HISTORY}  History
    @{"  " link AUTHOR}  Author/Copyright/Thanks

@endnode
@node AUTHOR "Contacting the Author"

    @{u}Copyright information@{uu}

    Except where otherwise indicated, all files in this distibution are
    Copyright © 1997, 1998, 1999 Victor Ducedre, All Rights Reserved.

    The original myreq.e (upon which myreq2.e is based), sortlist.m, and
    fonts.m are Copyright © 1995 Jason Hulance.

    You are free to use these files in your own programs, and you may modify
    the supplied sources for your own purposes, but you may not redistribute
    without express permission from me; the sole exception is the EasyPLUGINs
    collection, which may include them immediately.

    @{u}Contacting the Author@{uu}

    Feedback is always welcome, especially where bugs are concerned.  I can be
    reached via Email at <victord@netrover.com>, although I'm not always proud
    of my response time.

    Alternately by post at: 168 Betty Ann Dr.
                            North York, ON  M2N 1X6, Canada

    @{u}Thanks to:@{uu}

    Wouter and Jason, for the wonderfulness that is EasyGUI;

    Sven Steiniger, for his quite handy SvensModules; and

    Ali Graham, for organizing and maintaining the EasyPLUGINs collection;

@endnode
@node HISTORY "History"

    @{b}v1.6@{ub}                                    (19-Jan-99)

    -   added new tag, DCLV_USEARROWS.  This will allow scrolling the selected
        list item with the up/down cursor keys, instead of an underlined label
        key.
    -   if the selected item was changed with DCLV_CURRENT, self.top didn't
        get updated properly, causing problems if you needed to get(DCLV_TOP).
        Fixed.
    -   MAJOR bug fixed.  Reporting a double-click worked fine, as long as you
        closed your GUI afterwards.  If your GUI stayed open, any subsequent
        clicks would cause trouble.

    @{b}v1.5@{ub}                                    (8-Jan-99)

    -   added new tag, DCLV_TEXTATTR, to allow specifying a different font for
        the listview, rather than the screen font;
    -   new method, setA(), added, which will eventually replace set().  Main
        difference is that setA() takes a taglist, so that multiple attributes
        can be changed at the same time;
    -   Enforcer hit removed from myreq2.

    @{b}v1.4@{ub}                                    (2-Jun-98)

    -   no longer requires that utility.library is open, while still using
        tag lists, and the module size is significantly smaller!  However, you
        will need dev/e/SvensModules.lha to recompile dclistview.e;
    -   small changes to set() method; there's no longer a return value when
        set()ing DCLV_CURRENT;
    -   bug, introduced in v1.2 node-counting "improvement", fixed;
    -   finally converted docs to AmigaGuide® format;
    -   example programs given proper $VER: strings.

    @{b}v1.3@{ub}                                    (7-Mar-98)

    -   fixed a bug that rendered keypresses useless when "_" was the first
        character of the label string;
    -   removed 'vers' from the object and replaced with direct calls to
        KickVersion(), saving a total of eight bytes. :-)

    @{b}v1.2@{ub}                                    (19-Jan-98)

    -   rewritten in a style similar to the EasyPLUGINs Style Guide;
    -   replaced long list of constructor arguments with a taglist;
    -   replaced specific set#?/get#? functions with multi-purpose ones,
        allowing many more attributes to be set/get with minimum effort, and
        allowing the entire dclistview object to be made private;
    -   now checks if window and gadget exist (i.e., not iconified) before
        updating attributes;
    -   simplified the node-counter function.

    @{b}v1.1@{ub}                                    (19-Aug-97)

    -   removed a v39-only function that pretty much squashed the plugin under
        v37.

    @{b}v1.0@{ub}                                    (13-Jul-97)

    First release

@endnode
@node DCLISTVIEW_USAGE "dclistview.m/Usage"

    @{u}Usage Notes@{uu}

    *   To install the module, copy dclistview.m to Emodules:Plugins/
    Optionally, copy sortlist.m to Emodules:tools/ if it's not already there.
        The EasyPLUGINs version will be copied to Emodules:easyplugins/ by
    the install script.  There is no need to manually install it.

    *   To create a new dclistview object, use, e.g.:

            DEF list:PTR TO dclistview
            NEW list.dclistview([..., TAG_DONE])

    *   The constant DCLIST (which =PLUGIN) is available to be used in your
    EasyGUI gadget list, as in:

            @{FG shine}[DCLIST, {actionfunction}, dc, TRUE]@{FG text}

    This can make plugins in gadget lists easier to identify, especially
    if you use a lot of different plugins.

    *   Be sure the @{FG shine}isgt@{FG text} field of the Plugin gadget is always TRUE, since
    this uses a GadTools gadget.

    *   Your action function will be called (or your action value returned
    by easyguiA()) when:
        - an item is selected with the mouse, and again on a double click.
        - the assigned key is pressed, alone or shifted.
        NOTE: if you use an action value instead of an action function,
        you won't hear about double clicks since your GUI will have closed :-)

    *   @{FG shine}END@{FG text} @{b}must@{ub} be called for each @{FG shine}NEW@{FG text}ed object.


    @{"<<      Start" link MAIN}
    @{"Methods    >>" link DCLISTVIEW_METHODS}

@endnode
@node DCLISTVIEW_METHODS "dclistview.m/Methods"

    @{u}Methods@{uu}

    @{b}dclistview(tags)@{ub}

        The constructor for this plugin, where @{FG shine}tags@{FG text} is a PTR TO a list of
    tagitems from those @{"attributes" link DCLISTVIEW_ATTRIBUTES} marked [I].  All values default to
    something reasonable, so you can use simply @{FG shine}[TAG_DONE]@{FG text} as your list.
        You no longer need to open utility.library as in earlier versions.
        This function has no return value.

    @{b}setA(tags)@{ub}

        Sets attributes to their corresponding values;  @{FG shine}tags@{FG text} is a standard
    NIL-terminated taglist of @{"attributes" link DCLISTVIEW_ATTRIBUTES} (from those marked [S]), paired
    with some reasonable value for that attribute.  Multiple attributes may be
    set at one time, e.g,

            @{FG shine}lvobject.setA([DCLV_CURRENT, -1, DCLV_LIST, -1, TAG_DONE])@{FG text}

        This function has no return value.

    @{b}set(attr, val)@{ub}

        Sets a single attribute to the value given.  This function is being
    replaced with setA(), above, and @{i}may not be supported @{ui}in future versions
    of this plugin.  Consider yourself warned.
        This function has no return value.

    @{b}value, check:=get(attr)@{ub}

        Gets the value for the specified attribute, where @{FG shine}attr@{FG text} is any
    @{"attribute" link DCLISTVIEW_ATTRIBUTES} marked [G].  The second returned value, @{FG shine}check@{FG text}, is TRUE if @{FG shine}attr@{FG text}
    is in fact "getable", otherwise FALSE.


    @{"<<      Usage" link DCLISTVIEW_USAGE}
    @{"Attributes >>" link DCLISTVIEW_ATTRIBUTES}

@endnode
@node DCLISTVIEW_ATTRIBUTES "dclistview.m/Attributes"

    @{u}Attributes@{uu}

        The dclistview Plugin supports:

    @{b}DCLV_LABEL@{ub}                              [I..]

        The label which appears above the gadget.  Including a "_" in this
    string will automatically assign the next character as the keyboard
    shortcut (unless DCLV_USEARROWS is also specified), and will indicate it
    as such in the label. (Default: No label text)

    @{b}DCLV_USEARROWS@{ub}                          [I..]

        Use the up/down cursor keys to scroll the selected list item, instead
    of the usual keyboard shortcut.  Use with Alt to move directly to the top
    or bottom of the list.
        Using this tag will override the auto-selection of the keyboard
    shortcut from the label text. (Default: FALSE)

    @{b}DCLV_RELX@{ub}                               [I..]

        The usual relative gadget width (Default: 5)

    @{b}DCLV_RELY@{ub}                               [I..]

        The usual relative gadget height (Default: 5)

    @{b}DCLV_TEXTATTR@{ub}                           [I..]

        This provides a PTR TO textattr, allowing you to use any font for the
    listview (of course, you must @{FG shine}first@{FG text} open said font yourself).
        One small caveat:  Gadtools will use this font for the label above the
    gadget as well... (Default: NIL; uses screen font)

    @{b}DCLV_LIST@{ub}                               [ISG]

        The exec list to be displayed in the gadget.  Usual Gadtools handling
    applies:  set to NIL to remove the list from the gadget, set to -1 to
    detach the list without clearing it. (Default: NIL)

    @{b}DCLV_CURRENT@{ub}                            [ISG]

        The list item to be highlighted and placed at the top of the listview.
    This item will be displayed beneath the listview under v37 or with a
    highlight bar under v39.  This value will always be updated when the user
    selects a list item. (Default: NIL=first list item is current; remember,
    the first list item is node 0!)
        @{FG shine}NOTE@{FG text}: If you don't want ANY list item highlighted initally, set this
    tag to -1.  @{FG shine}NOTE FURTHER@{FG text}, though, that the value of this attribute @{b}will
    NOT change@{ub} if the user does not manipulate the listview in any way.  If
    you set DCLV_CURRENT to -1 at any point, be prepared to properly handle -1
    as a returned value when you get(DCLV_CURRENT).

    @{b}DCLV_DISABLED@{ub}                           [ISG]

        Whether this gadget is disabled.  Works under v39+ only, and is
    minimal at best (the listview is disabled, but the attached prop gadget
    will still scroll the list.  This is a bug in Gadtools, not this module).
    (Default: FALSE)

    @{b}DCLV_TOP@{ub}                                [ISG]

        Sets which item in the list is to be diplayed at the top of the
    listview, without changing the item currently selected. (Default: NIL;
    first list item is on top)

    @{b}DCLV_CLICK@{ub}                              [..G]

        This will be set to TRUE when an item from the listview has been
    double-clicked.


    @{"<<    Methods" link DCLISTVIEW_METHODS}
    @{"Exceptions >>" link EXCEPTIONS}

@endnode
@node EXCEPTIONS "dclistview.m/Exceptions"

    @{u}Exceptions@{uu}

    "@{b}dclv@{ub}" will be raised by gtrender() if the gadget can't be created.













    @{"<<      Start" link MAIN}

@endnode

