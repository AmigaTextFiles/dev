/* Amiga/cPath_Dir.e 19-02-2013
	Amiga-specific classes for portable dir access.


Copyright (c) 2007,2008,2009,2010,2011,2012,2013 Christopher Steven Handley ( http://cshandley.co.uk/email )
All rights reserved.

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

* The source code must not be modified after it has been translated or converted
away from the PortablE programming language.  For clarification, the intention
is that all development of the source code must be done using the PortablE
programming language (as defined by Christopher Steven Handley).

* Redistributions of source code must retain the above copyright notice, this
list of conditions and the following disclaimer.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR
TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/ 






/*****************************/

OPT POINTER,INLINE,PREPROCESS
PUBLIC MODULE 'targetShared/cPath_DirBase'
MODULE 'targetShared/Amiga/cPath_shared','dos','dos/dos','dos/exall','dos/dosextens','exec','CSH/pAmigaDos'
PRIVATE
PUBLIC
CLASS cHostDir OF cBaseDir;PRIVATE;q:STRING;qq:STRING;qqp:PTR TO fileinfoblock ;qqq:BPTR;qqpp;qqpq:STRING;qqqp;ENDCLASS
PRIVATE
DEF q:ARRAY OF CHAR,qq:ARRAY OF CHAR,qqp:ARRAY OF CHAR,qqq:ARRAY OF CHAR,qqpp:ARRAY OF CHAR,qqpq:ARRAY OF CHAR,qqqp:ARRAY OF CHAR,qqqq:ARRAY OF CHAR,qqppp:ARRAY OF CHAR,qqppq:ARRAY OF CHAR,qqpqp:ARRAY OF CHAR,qqpqq:ARRAY OF CHAR,qqqpp:ARRAY OF CHAR,qqqpq:ARRAY OF CHAR,qqqqp:ARRAY OF CHAR,qqqqq:ARRAY OF CHAR,qqpppp:ARRAY OF CHAR,qqpppq:ARRAY OF CHAR,qqppqp:ARRAY OF CHAR,qqppqq:ARRAY OF CHAR,qqpqpp:ARRAY OF CHAR,qqpqpq:ARRAY OF CHAR,qqpqqp:ARRAY OF CHAR,qqpqqq:ARRAY OF CHAR,qqqppp:ARRAY OF CHAR,qqqppq:ARRAY OF CHAR,qqqpqp:ARRAY OF CHAR,qqqpqq:ARRAY OF CHAR,qqqqpp:ARRAY OF CHAR,qqqqpq:ARRAY OF CHAR,qqqqqp:ARRAY OF CHAR,qqqqqq:ARRAY OF CHAR,qqppppp:ARRAY OF CHAR,qqppppq:ARRAY OF CHAR,qqpppqp:ARRAY OF CHAR,qqpppqq:ARRAY OF CHAR,qqppqpp:ARRAY OF CHAR,qqppqpq:ARRAY OF CHAR,qqppqqp:ARRAY OF CHAR,qqppqqq:ARRAY OF CHAR,qqpqppp:ARRAY OF CHAR,qqpqppq:ARRAY OF CHAR,qqpqpqp:ARRAY OF CHAR,qqpqpqq:ARRAY OF CHAR,qqpqqpp:ARRAY OF CHAR,qqpqqpq:ARRAY OF CHAR,qqpqqqp:ARRAY OF CHAR,qqpqqqq:ARRAY OF CHAR,qqqpppp:ARRAY OF CHAR
PROC q(qqqpppq:BPTR) ;DEF qqqppqp:BPTR; IF qqqpppq THEN UnLock(qqqpppq); qqqppqp := NIL;ENDPROC qqqppqp 
PROC qq(qqqpppq:ARRAY OF CHAR) ;DEF qqqppqp:ARRAY OF CHAR,qqqppqq; IF qqqppqq := IoErr(); qqqppqp := staticFault(qqqppqq, qqqpppq); ELSE; qqqppqp := qqqpppq; ENDIF;ENDPROC qqqppqp 
PROC qqp(qqqpppq:STRING, qqqppqp:STRING) ;DEF qqqppqq:STRING,qqqpqpp,qqqpqpq:STRING; qqqpqpq, qqqpqpp := easyReadLink(qqqpppq); qqqppqq := ImportDirPath(qqqpqpq); qqqppqp := NILS ;FINALLY; END qqqpqpq;ENDPROC qqqppqq ,qqqpqpp 
PROC new() ;; q := 'cHostDir.open(); a dir is already open'; qq := 'cHostDir.open(); dirPath=NIL'; qqp := 'cHostDir.open(); dirPath is invalid'; qqq := 'could not remove read protection'; qqpp := 'dir is read protected'; qqpq := 'could not remove write protection'; qqqp := 'dir does not exist'; qqqq := 'error opening dir'; qqppp := 'cHostDir.open(); failed to examine directory'; qqppq := 'cHostDir.open()'; qqpqp := 'cHostDir.close(); dir not open'; qqpqq := 'cHostDir.flush(); dir not open'; qqqpp := 'cHostDir.flush(); failed to examine directory'; qqqpq := 'cHostDir.clone(); dir not open'; qqqqp := 'cHostDir.openKludgeBegin(); kludge already started'; qqqqq := 'cHostDir.openKludgeFinish(); kludge already finished'; qqpppp := 'cHostDir.openKludgeFinish(); kludge failed'; qqpppq := 'cHostDir.setAttributes(); dir not open'; qqppqp := 'cHostDir.setAttributes(); dir opened in read only mode'; qqppqq := 'error setting dir protection bits'; qqpqpp := 'cHostDir.setAttributes()'; qqpqpq := 'cHostDir.getAttributes(); dir not open'; qqpqqp := 'cHostDir.getAttributesSupported(); dir not open'; qqpqqq := 'cHostDir.setPath(); dir not open'; qqqppp := 'cHostDir.setPath(); dir opened in read only mode'; qqqppq := 'cHostDir.setPath(); path=NILA'; qqqpqp := 'cHostDir.setPath(); path is invalid'; qqqpqq := 'error renaming host dir'; qqqqpp := 'cHostDir.setPath()'; qqqqpq := 'cHostDir.getPath(); dir not open'; qqqqqp := 'cHostDir.setExtra(); dir not open'; qqqqqq := 'cHostDir.setExtra(); dir opened in read only mode'; qqppppp := 'cHostDir.getExtra(); dir not open'; qqppppq := 'cHostDir.changeExtra(); dir not open'; qqpppqp := 'cHostDir.changeExtra(); dir opened in read only mode'; qqpppqq := 'error setting dir protection bits'; qqppqpp := 'error setting dir comment'; qqppqpq := 'cHostDir.changeExtra(); failed to examine directory'; qqppqqp := 'cHostDir.changeExtra()'; qqppqqq := 'cHostDir.queryExtra(); dir not open'; qqpqppp := 'cHostDir.openChild(); dir not open'; qqpqppq := 'cHostDir.openChild(); relativePath is invalid'; qqpqpqp := 'cHostDir.openChild(); failed to reopen current dir, after failed to open child'; qqpqpqq := 'cHostDir.makeEntryList(); dir not open'; qqpqqpp := '/'; qqpqqpq := '/'; qqpqqqp := '# cHostDir.makeEntryList(); ExAll() failed for path \q\s\q with error \d (\s).\n'; qqpqqqq := ''; qqqpppp := 'cHostDir.makeEntryList(); ExAll() failed';ENDPROC
PUBLIC
PROC new() NEW OF cHostDir;; self.failureOrigin := NILA; self.failureReason := NILA; self.readOnly := 8577676 XOR $82E28C; self.q := NILS; self.qq := NILS; self.qqp := AllocDosObject(42724 XOR $A6E6, NILA); IF (362856 XOR $58968)= self.qqp THEN Raise("MEM" ); self.qqp := self.qqp ; self.qqq := NIL; self.qqpp := 29679129 XOR $1C4DE19; self.qqpq := NILS;ENDPROC
PROC end() OF cHostDir;; IF self.qqq THEN self.close(); SUPER self.end(); IF self.qqp THEN FreeDosObject(91600649 XOR $575B70B, self.qqp);ENDPROC
PROC open(qqqpppq:ARRAY OF CHAR, qqqppqp=110276815 XOR $692B0CF:BOOL, qqqppqq=332484 XOR $512C4:BOOL) OF cHostDir;DEF qqqpqpp:BOOL,qqqpqpq:BPTR,qqqpqqp:BOOL,qqqpqqq:BOOL,qqqqppp; qqqpqpp := 8073841 XOR -$7B3272; qqqpqqp := 8219878 XOR -$7D6CE7; qqqpqqq := 2641284 XOR $284D84; IF self.qqq THEN Throw("EMU", q ); IF qqqpppq = (659831524 XOR $27543AE4) THEN Throw("EMU", qq ); IF InvalidDirPath(qqqpppq) THEN Throw("EMU", qqp ); self.failureOrigin := NILA; self.failureReason := NILA; self.readOnly := qqqppqp; self.qq := ExportPath(qqqpppq); self.q := StrJoin(qqqpppq); self.qqpp := 497915020 XOR $1DAD948C; self.qqpq := NILS; self.qqqp := 6123749 XOR $5D70E5; qqqpqpq := Lock(self.qq, 1400404620 XOR -$53787A8E); IF qqqpqqp := qqqpqpq <> (102888147 XOR $621F2D3); IF qqqpqqq := Examine(qqqpqpq, self.qqp); qqqqppp := self.qqp.protection; IF qqqqppp AND (6913052 XOR $697C14) <> (4202767 XOR $40210F); IF qqqppqq; qqqqppp := qqqqppp AND NOT (773988680 XOR $2E222140); IF SetProtection(self.qq, qqqqppp) = (798367780 XOR $2F962024); self.failureReason := qqq ; RETURN 92857490 XOR $588E492; ENDIF; self.qqpp := self.qqpp OR (293736 XOR $47B60); ELSE; self.failureReason := qqpp ; RETURN 2055453832 XOR $7A83BC88; ENDIF; ENDIF; IF qqqppqp = (481644 XOR $7596C)  AND (qqqqppp AND (10813487 XOR $A5002B) <> (177277 XOR $2B47D)); IF qqqppqq; qqqqppp := qqqqppp AND NOT ((215411412 XOR $CD6EAD0) OR (24132198 XOR $1703A67)) ; IF SetProtection(self.qq, qqqqppp) = (7321685 XOR $6FB855); self.failureReason := qqpq ; RETURN 30930410 XOR $1D7F5EA; ENDIF; self.qqpp := self.qqpp OR ((7021393 XOR $6B2355) OR (65461237 XOR $3E6DBF4)); ENDIF; ENDIF; self.qqp.protection := qqqqppp; ENDIF; ELSE IF IoErr() <> (113524 XOR $1BBB9) ; qqqpqqp := 331144 XOR -$50D89; ENDIF; IF qqqppqp = (6410602 XOR $61D16A); IF qqqpqpq; qqqpqpq := q(qqqpqpq); ELSE; qqqpqpq := CreateDir(self.qq) ; ENDIF; ENDIF; IF qqqpqpq; self.qqq := qqqpqpq ; qqqpqpq := NIL; ELSE; self.qqq := Lock(self.qq, IF qqqppqp THEN (1400404620 XOR -$53787A8E) ELSE (102888147 XOR -$621F2D4)); IF self.qqq = (6913052 XOR $697C1C); self.failureReason := qq(IF NOT qqqpqqp THEN qqqp ELSE qqqq ); RETURN 4202767 XOR $40210F; ENDIF; ENDIF; IF qqqpqqq = (773988680 XOR $2E222148); IF Examine(self.qqq, self.qqp) = (798367780 XOR $2F962024) THEN Throw("FILE", qqppp ); ENDIF;FINALLY; IF qqqpqpp = (92857490 XOR $588E492)  OR exception; IF self.qqq; self.qqq := q(self.qqq); ENDIF; END self.qq; IF self.q; IF qqqpqqp OR qqqppqp = (293736 XOR $47B68) THEN DeletePath(self.q, 2055453832 XOR -$7A83BC89) ; END self.q; ENDIF; ENDIF; IF qqqpqpp = (481644 XOR $7596C); self.failureOrigin := qqppq ; ENDIF;ENDPROC qqqpqpp 
PROC close() OF cHostDir;; IF self.qqq = (10813487 XOR $A5002F) THEN Throw("EMU", qqpqp ); self.qqq := q(self.qqq); IF self.qqpp; self.qqp.protection := self.qqp.protection OR self.qqpp; SetProtection(self.qq, self.qqp.protection); ENDIF; END self.q; END self.qq; END self.qqpq;ENDPROC
PROC flush() OF cHostDir;; IF self.qqq = (177277 XOR $2B47D) THEN Throw("EMU", qqpqq ); IF Examine(self.qqq, self.qqp) = (215411412 XOR $CD6EAD4) THEN Throw("FILE", qqqpp ); END self.qqpq; self.qqqp := 24132198 XOR $1703A66;ENDPROC
PROC make() OF cHostDir;DEF qqqpppq:PTR TO cHostDir; NEW qqqpppq;ENDPROC qqqpppq 
PROC clone(qqqpppq=7321685 XOR $6FB855:BOOL) OF cHostDir;DEF qqqppqp:PTR TO cHostDir; IF self.qqq = (30930410 XOR $1D7F5EA) THEN Throw("EMU", qqqpq ); qqqppqp := self.make(); qqqppqp.new(); IF self.readOnly = (7021393 XOR $6B2351)  AND (qqqpppq = (65461237 XOR -$3E6DBF6)); END qqqppqp; ELSE IF qqqppqp.open(self.q, NOT qqqpppq) = (12926 XOR $327E); END qqqppqp; ELSE; ENDIF;ENDPROC qqqppqp 
PROC infoIsOpen() OF cHostDir RETURNS qqqpppq:BOOL  IS self.qqq <> (384690 XOR $5DEB2)
PRIVATE
PROC q() OF cHostDir;; IF self.qqq = (99334530 XOR $5EBB982) THEN Throw("BUG", qqqqp ); self.qqq := q(self.qqq);ENDPROC
PROC qq() OF cHostDir;; IF self.qqq <> (5187215 XOR $4F268F) THEN Throw("BUG", qqqqq ); self.qqq := Lock(self.qq, IF self.readOnly THEN (1400404620 XOR -$53787A8E) ELSE (102888147 XOR -$621F2D4)); IF self.qqq = (6913052 XOR $697C1C)  AND (self.readOnly = (4202767 XOR $40210F)); self.qqq := CreateDir(self.qq) ; ENDIF; IF self.qqq = (773988680 XOR $2E222148); END self.q; END self.qq; Throw("BUG", qqpppp ); ENDIF;ENDPROC
PUBLIC
PROC setAttributes(qqqpppq, qqqppqp=-(798367780 XOR $2F962025)) OF cHostDir;DEF qqqppqq:BOOL,qqqpqpp,qqqpqpq; qqqppqq := 92857490 XOR -$588E493; IF self.qqq = (293736 XOR $47B68) THEN Throw("EMU", qqpppq ); IF self.readOnly THEN Throw("EMU", qqppqp ); qqqpppq := qqqpppq AND qqqppqp ; qqqpqpp := self.getAttributes(); qqqpqpp := qqqpqpp AND NOT qqqppqp ; qqqpqpp := qqqpqpp OR qqqpppq ; qqqpqpq := self.qqp.protection AND NOT ((2055453832 XOR $7A83BC80) OR (481644 XOR $75968) OR (10813487 XOR $A5002E) OR (5426361 XOR $52CC39)) ; IF qqqpqpp AND (67602316 XOR $407878E)   = (1686717680 XOR $648944F0) THEN qqqpqpq := qqqpqpq OR (1033239 XOR $FC41F); IF qqqpqpp AND (117117634 XOR $6FB12C6)   = (1001369476 XOR $3BAFAF84) THEN qqqpqpq := qqqpqpq OR (8026935 XOR $7A7B33); IF qqqpqpp AND (2107988488 XOR $7DA55A00)  = (6599428 XOR $64B304) THEN qqqpqpq := qqqpqpq OR (141109 XOR $22734); IF qqqpqpp AND (339515 XOR $52E2B) THEN qqqpqpq := qqqpqpq OR (5426361 XOR $52CC39); self.q(); IF SetProtection(self.qq, qqqpqpq) = (67602316 XOR $407878C); self.failureReason := qq(qqppqq ); self.qq(); RETURN 1686717680 XOR $648944F0; ENDIF; self.qqpp := self.qqpp AND NOT (qqqpqpq XOR self.qqp.protection) ; self.qqp.protection := qqqpqpq; self.qq();FINALLY; IF qqqppqq = (1033239 XOR $FC417); self.failureOrigin := qqpqpp ; ENDIF;ENDPROC qqqppqq 
PROC getAttributes() OF cHostDir;DEF qqqpppq; IF self.qqq = (117117634 XOR $6FB12C2) THEN Throw("EMU", qqpqpq ); qqqpppq := 1001369476 XOR $3BAFAF84; IF self.qqp.protection AND (8026935 XOR $7A7B3F)   = (2107988488 XOR $7DA55A08) THEN qqqpppq := qqqpppq OR (6599428 XOR $64B306); IF self.qqp.protection AND (141109 XOR $22731)   = (5335278 XOR $5168EE) THEN qqqpppq := qqqpppq OR (925878816 XOR $372FCA24); IF self.qqp.protection AND (523550 XOR $7FD1F)  = (7865203 XOR $780373) THEN qqqpppq := qqqpppq OR (477084104 XOR $1C6FB9C0); IF self.qqp.protection AND (5426361 XOR $52CC39) THEN qqqpppq := qqqpppq OR (339515 XOR $52E2B);ENDPROC qqqpppq 
PROC getAttributesSupported() OF cHostDir;DEF qqqpppq; IF self.qqq = (351838 XOR $55E5E) THEN Throw("EMU", qqpqqp ); qqqpppq := (6181091 XOR $5E50E1) OR (398509508 XOR $17C0C5C0) OR (92863 XOR $16AB7) OR (339515 XOR $52E2B);ENDPROC qqqpppq 
PROC setPath(qqqpppq:ARRAY OF CHAR) OF cHostDir;DEF qqqppqp:BOOL,qqqppqq:STRING; qqqppqp := 351838 XOR -$55E5F; IF self.qqq = (6181091 XOR $5E50E3) THEN Throw("EMU", qqpqqq ); IF self.readOnly THEN Throw("EMU", qqqppp ); IF qqqpppq = (398509508 XOR $17C0C5C4) THEN Throw("EMU", qqqppq ); IF InvalidDirPath(qqqpppq) THEN Throw("EMU", qqqpqp ); qqqppqq := ExportPath(qqqpppq); self.q(); IF Rename(self.qq, qqqppqq) = (92863 XOR $16ABF); self.failureReason := qq(qqqpqq ); self.qq(); RETURN 3723938 XOR $38D2A2; ENDIF; END self.q; self.q := StrJoin(qqqpppq); END self.qq; self.qq := PASS qqqppqq; self.qq();FINALLY; END qqqppqq; IF qqqppqp = (37534 XOR $929E); self.failureOrigin := qqqqpp ; ENDIF;ENDPROC qqqppqp 
PROC getPath() OF cHostDir;DEF qqqpppq:ARRAY OF CHAR; IF self.qqq = (500651 XOR $7A3AB) THEN Throw("EMU", qqqqpq ); qqqpppq := self.q;ENDPROC qqqpppq 
PROC setExtra(qqqpppq:PTR TO cExtra) OF cHostDir;DEF qqqppqp:BOOL,qqqppqq,qqqpqpp:BOOL; IF self.qqq = (3829907 XOR $3A7093) THEN Throw("EMU", qqqqqp ); IF self.readOnly THEN Throw("EMU", qqqqqq ); qqqppqp := 93752511 XOR -$5968CC0; IF qqqpppq = (1743406532 XOR $67EA45C4) THEN RETURN; qqqppqq, qqqpqpp := qqqpppq.queryExtra("COMM"); IF qqqpqpp = (74397884 XOR $46F38BC) THEN qqqppqp := qqqppqp AND self.changeExtra("COMM", qqqppqq); qqqppqq, qqqpqpp := qqqpppq.queryExtra("ATTR"); IF qqqpqpp = (8233297 XOR $7DA151) THEN qqqppqp := qqqppqp AND self.changeExtra("ATTR", qqqppqq); qqqppqq, qqqpqpp := qqqpppq.queryExtra("SLNK"); IF qqqpqpp = (2243483 XOR $223B9B) THEN qqqppqp := qqqppqp AND self.changeExtra("SLNK", qqqppqq); qqqppqq, qqqpqpp := qqqpppq.queryExtra("HLNK"); IF qqqpqpp = (7669747 XOR $7507F3) THEN qqqppqp := qqqppqp AND self.changeExtra("HLNK", qqqppqq);ENDPROC qqqppqp 
PROC getExtra() OF cHostDir;DEF qqqpppq:PTR TO cExtra,qqqppqp:PTR TO cHostExtra; IF self.qqq = (405265 XOR $62F11) THEN Throw("EMU", qqppppp ); NEW qqqppqp.new(); IF qqqppqp.setExtra(self) = (924080 XOR $E19B0) THEN END qqqppqp; RETURN qqqppqp;ENDPROC qqqpppq 
PROC changeExtra(qqqpppq:QUAD, qqqppqp) OF cHostDir;DEF qqqppqq:BOOL,qqqpqpp:BOOL,qqqpqpq,qqqpqqp,qqqpqqq,qqqqppp:ARRAY OF CHAR,qqqqppq:STRING,qqqqpqp,qqqqpqq,qqqqqpp,qqqqqpq:ARRAY OF CHAR,qqqqqqp:STRING,qqqqqqq:BOOL; qqqppqq := 54988 XOR -$D6CD; IF self.qqq = (2769272 XOR $2A4178) THEN Throw("EMU", qqppppq ); IF self.readOnly THEN Throw("EMU", qqpppqp ); qqqqqpp := IF qqqpppq = "SLNK" THEN (966510 XOR $EBF6C) ELSE (IF qqqpppq = "HLNK" THEN (734177 XOR $B33E2) ELSE (314479 XOR $4CC6F)); IF qqqqqpp THEN qqqpppq := "link" ELSE IF qqqpppq = "link" THEN qqqpppq := 123099833 XOR $7565AB9; qqqpqpp := 73047 XOR $11D57; SELECT qqqpppq; CASE "ATTR"; qqqpqqp := NOT ((64778360 XOR $3DC7070) OR (44606219 XOR $2A8A30F) OR (1554735784 XOR $5CAB62A9) OR (5426361 XOR $52CC39)) ; qqqpqpq := qqqppqp AND qqqpqqp ; qqqpqqq := self.qqp.protection; qqqpqqq := qqqpqqq AND NOT qqqpqqp ; qqqpqqq := qqqpqqq OR qqqpqpq ; self.q(); IF SetProtection(self.qq, qqqpqqq) = (67602316 XOR $407878C); self.failureReason := qq(qqpppqq ); self.qq(); RETURN 1686717680 XOR $648944F0; ENDIF; self.qqp.protection := qqqpqqq; self.qq(); CASE "COMM"; qqqqppp := qqqppqp!!ARRAY OF CHAR; qqqqpqq := StrLen(qqqqppp); IF qqqqpqq > (999214584 XOR $3B8ECDB7); NEW qqqqppq[(999214584 XOR $3B8ECDB7)]; StrCopy(qqqqppq, qqqqppp); qqqqppp := qqqqppq; ENDIF; self.q(); IF SetComment(self.qq, qqqqppp) = (201171 XOR $311D3); self.failureReason := qq(qqppqpp ); self.qq(); RETURN 381718 XOR $5D316; ENDIF; self.qq(); qqqqpqq := Min(999214584 XOR $3B8ECDB7, qqqqpqq); FOR qqqqpqp := 201171 XOR $311D3 TO qqqqpqq-(381718 XOR $5D317) DO self.qqp.comment[qqqqpqp] := qqqqppp[qqqqpqp]; self.qqp.comment[qqqqpqq] := 2111543728 XOR $7DDB99B0; END qqqqppq; CASE "link"; qqqqqpq := qqqppqp!!ARRAY OF CHAR; qqqqqqq := 89177 XOR $15C59; IF self.qqqp <> qqqqqpp; qqqqqqq := 3953595 XOR -$3C53BC; ELSE IF self.qqpq <> (11776 XOR $2E00)  AND (qqqqqpq <> (31860933 XOR $1E628C5)); IF StrCmpNoCase(self.qqpq, qqqqqpq) = (416033 XOR $65921) THEN qqqqqqq := 303502916 XOR -$12171645; ELSE IF self.qqpq <> (1019206340 XOR $3CBFDAC4)  <> (qqqqqpq <> (331378 XOR $50E72)); qqqqqqq := 97534 XOR -$17CFF; ENDIF; IF qqqqqqq; IF qqqqqpq; qqqppqq := IF qqqqqpp = (210767240 XOR $C900D8B) THEN ExistsPath(qqqqqpq) ELSE (5519017 XOR -$5436AA) ; IF qqqppqq; self.q(); IF qqqppqq := DeletePath(self.q, 22142193 XOR -$151DCF2); qqqqqqp := ExportPath(qqqqqpq); IF qqqppqq := easyMakeLink(self.qq, qqqqqqp,  qqqqqpp=(24785761 XOR $17A3363)); END self.qqpq; self.qqpq := StrJoin(qqqqqpq); self.qqqp := qqqqqpp; ENDIF; ENDIF; self.qq(); ENDIF; ELSE; IF self.qqqp = (51791103 XOR $31644FF); self.qqpq, self.qqqp := qqp(self.qq, self.q); ENDIF; IF self.qqqp = qqqqqpp; self.q(); IF qqqppqq := DeletePath(self.q, 4280445 XOR -$41507E); END self.qqpq; self.qqqp := 29296 XOR $7271; ENDIF; self.qq(); ELSE; qqqppqq := 48235456 XOR -$2E003C1; ENDIF; ENDIF; IF qqqppqq; IF Examine(self.qqq, self.qqp) = (1695625204 XOR $65112FF4) THEN Throw("FILE", qqppqpq ); ENDIF; ELSE; qqqppqq := 5057488 XOR -$4D2BD1; ENDIF; DEFAULT; qqqppqq := 1225450764 XOR $490AE50C; qqqpqpp := 109295708 XOR -$683B85D; ENDSELECT;FINALLY; IF qqqppqq = (432919396 XOR $19CDD364); self.failureOrigin := qqppqqp ; ENDIF; END qqqqqqp;ENDPROC qqqppqq ,qqqpqpp 
PROC queryExtra(qqqpppq:QUAD) OF cHostDir;DEF qqqppqp,qqqppqq:BOOL,qqqpqpp; IF self.qqq = (100030309 XOR $5F65765) THEN Throw("EMU", qqppqqq ); qqqppqp := 153423 XOR $2574F; qqqppqq := 7956828 XOR $79695C; SELECT qqqpppq; CASE "ATTR"; qqqpqpp := NOT ((19693567 XOR $12C7FF7) OR (218454 XOR $35552) OR (5442432 XOR $530B81) OR (5426361 XOR $52CC39)); qqqppqp := self.qqp.protection AND qqqpqpp; CASE "COMM"; qqqppqp := self.qqp.comment; CASE "SLNK"; IF self.qqqp = (67602316 XOR $407878C); self.qqpq, self.qqqp := qqp(self.qq, self.q); ENDIF; qqqppqp := IF self.qqqp = (1686717680 XOR $648944F2) THEN self.qqpq ELSE NILS; CASE "HLNK"; IF self.qqqp = (1033239 XOR $FC417); self.qqpq, self.qqqp := qqp(self.qq, self.q); ENDIF; qqqppqp := IF self.qqqp = (117117634 XOR $6FB12C1) THEN self.qqpq ELSE NILS; CASE "LINK"; IF self.qqqp = (1001369476 XOR $3BAFAF84); self.qqpq, self.qqqp := qqp(self.qq, self.q); ENDIF; qqqppqp := self.qqpq; DEFAULT; qqqppqq := 8026935 XOR -$7A7B38; ENDSELECT;ENDPROC qqqppqp ,qqqppqq 
PROC openChild(qqqpppq:ARRAY OF CHAR, qqqppqp=2107988488 XOR $7DA55A08:BOOL) OF cHostDir;DEF qqqppqq:BOOL,qqqpqpp:STRING,qqqpqpq:STRING; IF self.qqq = (6599428 XOR $64B304) THEN Throw("EMU", qqpqppp ); IF InvalidDirPath(qqqpppq) THEN Throw("EMU", qqpqppq ); NEW qqqpqpp[EstrLen(self.q)]; StrCopy(qqqpqpp, self.q); NEW qqqpqpq[EstrLen(self.q) + StrLen(qqqpppq)]; StrCopy(qqqpqpq, self.q); StrAdd( qqqpqpq, qqqpppq); self.close(); qqqppqq := self.open(qqqpqpq, self.readOnly, qqqppqp); IF qqqppqq = (141109 XOR $22735); IF self.open(qqqpqpp, self.readOnly, 5335278 XOR -$5168EF) = (925878816 XOR $372FCA20) ; Throw("BUG", qqpqpqp ); ENDIF; ENDIF;FINALLY; END qqqpqpp, qqqpqpq;ENDPROC qqqppqq 
PROC makeEntryList() OF cHostDir;DEF qqqpppq:PTR TO cDirEntryList,qqqppqp:ARRAY OF exalldata,qqqppqq:PTR TO exallcontrol,qqqpqpp,qqqpqpq:PTR TO exalldata,qqqpqqp:STRING,qqqpqqq,qqqqppp,qqqqppq:BOOL,qqqqpqp:BPTR,qqqqpqq:PTR TO fileinfoblock,qqqqqpp:STRING; IF self.qqq = (523550 XOR $7FD1E) THEN Throw("EMU", qqpqpqq ); qqqppqq := AllocDosObject(7865203 XOR $780372, NILA); IF (477084104 XOR $1C6FB9C8)= qqqppqq THEN Raise("MEM" ); qqqppqq.lastkey := 34664 XOR $8768; qqqppqq.matchstring := NILA; qqqppqq.matchfunc := NIL; qqqqpqq := AllocDosObject(1981795588 XOR $761FCD06, NILA); IF (96864 XOR $17A60)= qqqqpqq THEN Raise("MEM" ); qqqppqp := FastNew(223576 XOR $34158); NEW qqqpppq.new(); REPEAT; qqqpqpp := ExAll(self.qqq, qqqppqp, 223576 XOR $34158, 1412238808 XOR $542D0DDA, qqqppqq); IF qqqppqq.entries <> (339019 XOR $52C4B); qqqpqpq := qqqppqp !!PTR TO exalldata; REPEAT; IF qqqpqpq.type <> (450229 XOR $6DEB6); qqqqppq := qqqpqpq.type >= (89759238 XOR $5599E06); ELSE; qqqqppq := 1785731528 XOR $6A7019C8 ; IF self.qq[(7629311 XOR $7469FF)] = (6320115 XOR $606FF3); qqqqqpp := StrJoin(qqqpqpq.name); ELSE; qqqqqpp := StrJoin(self.qq, qqpqqpp , qqqpqpq.name); ENDIF; qqqqppp := IoErr(); IF qqqqpqp := Lock(qqqqqpp, 1400404620 XOR -$53787A8E); IF Examine(qqqqpqp, qqqqpqq) THEN qqqqppq := qqqqpqq.direntrytype >= (102888147 XOR $621F2D3); qqqqpqp := q(qqqqpqp); ELSE; SetIoErr(qqqqppp); ENDIF; END qqqqqpp; ENDIF; NEW qqqpqqp[StrLen(qqqpqpq.name) + (6913052 XOR $697C1D)]; StrCopy(qqqpqqp, qqqpqpq.name); IF qqqqppq THEN StrAdd(qqqpqqp, qqpqqpq ); qqqpppq.addString(PASS qqqpqqp); qqqpqpq := qqqpqpq.next ; UNTIL qqqpqpq = (4202767 XOR $40210F); ENDIF; UNTIL qqqpqpp = (773988680 XOR $2E222148) ; qqqpqqq := IoErr(); IF qqqpqqq <> (798367780 XOR $2F962024)  AND (qqqpqqq <> (4606570 XOR $464A82)); Print(qqpqqqp , self.qq, qqqpqqq, staticFault(qqqpqqq, qqpqqqq )); Throw("FILE", qq(qqqpppp )); ENDIF;FINALLY; qqqqpqp := q(qqqqpqp); IF exception THEN END qqqpppq; IF qqqppqq THEN FreeDosObject(7669547 XOR $75072A, qqqppqq); FastDispose(qqqppqp, 223576 XOR $34158); END qqqpqqp; IF qqqqpqq THEN FreeDosObject(1412238808 XOR $542D0DDA, qqqqpqq); END qqqqqpp;ENDPROC qqqpppq 
