/* $Id: sana2.h 22713 2005-01-19 22:05:22Z neil $ */
OPT NATIVE
MODULE 'target/exec/types', 'target/exec/io', 'target/devices/timer'
MODULE 'target/utility/tagitem'
{#include <devices/sana2.h>}
NATIVE {DEVICES_SANA2_H} CONST

/* Constants */
/* ========= */

NATIVE {SANA2_MAX_ADDR_BITS}  CONST SANA2_MAX_ADDR_BITS  = 128
NATIVE {SANA2_MAX_ADDR_BYTES} CONST SANA2_MAX_ADDR_BYTES = (SANA2_MAX_ADDR_BITS / 8)

NATIVE {SANA2IOB_RAW}   CONST SANA2IOB_RAW   = 7
NATIVE {SANA2IOB_BCAST} CONST SANA2IOB_BCAST = 6
NATIVE {SANA2IOB_MCAST} CONST SANA2IOB_MCAST = 5

NATIVE {SANA2IOF_RAW}   CONST SANA2IOF_RAW   = $80
NATIVE {SANA2IOF_BCAST} CONST SANA2IOF_BCAST = $40
NATIVE {SANA2IOF_MCAST} CONST SANA2IOF_MCAST = $20

NATIVE {SANA2OPB_PROM} CONST SANA2OPB_PROM = 1
NATIVE {SANA2OPB_MINE} CONST SANA2OPB_MINE = 0

NATIVE {SANA2OPF_PROM} CONST SANA2OPF_PROM = $2
NATIVE {SANA2OPF_MINE} CONST SANA2OPF_MINE = $1

NATIVE {S2_Dummy}             CONST S2_DUMMY             = (TAG_USER + $b0000)
NATIVE {S2_CopyToBuff}        CONST S2_COPYTOBUFF        = (S2_DUMMY + 1)
NATIVE {S2_CopyFromBuff}      CONST S2_COPYFROMBUFF      = (S2_DUMMY + 2)
NATIVE {S2_PacketFilter}      CONST S2_PACKETFILTER      = (S2_DUMMY + 3)
NATIVE {S2_CopyToBuff16}      CONST S2_COPYTOBUFF16      = (S2_DUMMY + 4)
NATIVE {S2_CopyFromBuff16}    CONST S2_COPYFROMBUFF16    = (S2_DUMMY + 5)
NATIVE {S2_CopyToBuff32}      CONST S2_COPYTOBUFF32      = (S2_DUMMY + 6)
NATIVE {S2_CopyFromBuff32}    CONST S2_COPYFROMBUFF32    = (S2_DUMMY + 7)
NATIVE {S2_DMACopyToBuff32}   CONST S2_DMACOPYTOBUFF32   = (S2_DUMMY + 8)
NATIVE {S2_DMACopyFromBuff32} CONST S2_DMACOPYFROMBUFF32 = (S2_DUMMY + 9)

NATIVE {S2WireType_Ethernet}    CONST S2WIRETYPE_ETHERNET    = 1
NATIVE {S2WireType_Arcnet}      CONST S2WIRETYPE_ARCNET      = 7
NATIVE {S2WireType_LocalTalk}  CONST S2WIRETYPE_LOCALTALK  = 11
NATIVE {S2WireType_DyLAN}      CONST S2WIRETYPE_DYLAN      = 12
NATIVE {S2WireType_AmokNet}   CONST S2WIRETYPE_AMOKNET   = 200
NATIVE {S2WireType_Liana}     CONST S2WIRETYPE_LIANA     = 202
NATIVE {S2WireType_PPP}       CONST S2WIRETYPE_PPP       = 253
NATIVE {S2WireType_SLIP}      CONST S2WIRETYPE_SLIP      = 254
NATIVE {S2WireType_CSLIP}     CONST S2WIRETYPE_CSLIP     = 255
NATIVE {S2WireType_PLIP}      CONST S2WIRETYPE_PLIP      = 420

NATIVE {S2_DEVICEQUERY}           CONST S2_DEVICEQUERY           = (CMD_NONSTD + 0)
NATIVE {S2_GETSTATIONADDRESS}     CONST S2_GETSTATIONADDRESS     = (CMD_NONSTD + 1)
NATIVE {S2_CONFIGINTERFACE}       CONST S2_CONFIGINTERFACE       = (CMD_NONSTD + 2)
NATIVE {S2_ADDMULTICASTADDRESS}   CONST S2_ADDMULTICASTADDRESS   = (CMD_NONSTD + 5)
NATIVE {S2_DELMULTICASTADDRESS}   CONST S2_DELMULTICASTADDRESS   = (CMD_NONSTD + 6)
NATIVE {S2_MULTICAST}             CONST S2_MULTICAST             = (CMD_NONSTD + 7)
NATIVE {S2_BROADCAST}             CONST S2_BROADCAST             = (CMD_NONSTD + 8)
NATIVE {S2_TRACKTYPE}             CONST S2_TRACKTYPE             = (CMD_NONSTD + 9)
NATIVE {S2_UNTRACKTYPE}           CONST S2_UNTRACKTYPE           = (CMD_NONSTD + 10)
NATIVE {S2_GETTYPESTATS}          CONST S2_GETTYPESTATS          = (CMD_NONSTD + 11)
NATIVE {S2_GETSPECIALSTATS}       CONST S2_GETSPECIALSTATS       = (CMD_NONSTD + 12)
NATIVE {S2_GETGLOBALSTATS}        CONST S2_GETGLOBALSTATS        = (CMD_NONSTD + 13)
NATIVE {S2_ONEVENT}               CONST S2_ONEVENT               = (CMD_NONSTD + 14)
NATIVE {S2_READORPHAN}            CONST S2_READORPHAN            = (CMD_NONSTD + 15)
NATIVE {S2_ONLINE}                CONST S2_ONLINE                = (CMD_NONSTD + 16)
NATIVE {S2_OFFLINE}               CONST S2_OFFLINE               = (CMD_NONSTD + 17)
NATIVE {S2_ADDMULTICASTADDRESSES} CONST S2_ADDMULTICASTADDRESSES = (CMD_NONSTD + $c000)
NATIVE {S2_DELMULTICASTADDRESSES} CONST S2_DELMULTICASTADDRESSES = (CMD_NONSTD + $c001)

NATIVE {S2ERR_NO_ERROR}       CONST S2ERR_NO_ERROR       = 0
NATIVE {S2ERR_NO_RESOURCES}   CONST S2ERR_NO_RESOURCES   = 1
NATIVE {S2ERR_BAD_ARGUMENT}   CONST S2ERR_BAD_ARGUMENT   = 3
NATIVE {S2ERR_BAD_STATE}      CONST S2ERR_BAD_STATE      = 4
NATIVE {S2ERR_BAD_ADDRESS}    CONST S2ERR_BAD_ADDRESS    = 5
NATIVE {S2ERR_MTU_EXCEEDED}   CONST S2ERR_MTU_EXCEEDED   = 6
NATIVE {S2ERR_NOT_SUPPORTED}  CONST S2ERR_NOT_SUPPORTED  = 8
NATIVE {S2ERR_SOFTWARE}       CONST S2ERR_SOFTWARE       = 9
NATIVE {S2ERR_OUTOFSERVICE}  CONST S2ERR_OUTOFSERVICE  = 10
NATIVE {S2ERR_TX_FAILURE}    CONST S2ERR_TX_FAILURE    = 11

NATIVE {S2WERR_GENERIC_ERROR}     CONST S2WERR_GENERIC_ERROR     = 0
NATIVE {S2WERR_NOT_CONFIGURED}    CONST S2WERR_NOT_CONFIGURED    = 1
NATIVE {S2WERR_UNIT_ONLINE}       CONST S2WERR_UNIT_ONLINE       = 2
NATIVE {S2WERR_UNIT_OFFLINE}      CONST S2WERR_UNIT_OFFLINE      = 3
NATIVE {S2WERR_ALREADY_TRACKED}   CONST S2WERR_ALREADY_TRACKED   = 4
NATIVE {S2WERR_NOT_TRACKED}       CONST S2WERR_NOT_TRACKED       = 5
NATIVE {S2WERR_BUFF_ERROR}        CONST S2WERR_BUFF_ERROR        = 6
NATIVE {S2WERR_SRC_ADDRESS}       CONST S2WERR_SRC_ADDRESS       = 7
NATIVE {S2WERR_DST_ADDRESS}       CONST S2WERR_DST_ADDRESS       = 8
NATIVE {S2WERR_BAD_BROADCAST}     CONST S2WERR_BAD_BROADCAST     = 9
NATIVE {S2WERR_BAD_MULTICAST}    CONST S2WERR_BAD_MULTICAST    = 10
NATIVE {S2WERR_MULTICAST_FULL}   CONST S2WERR_MULTICAST_FULL   = 11
NATIVE {S2WERR_BAD_EVENT}        CONST S2WERR_BAD_EVENT        = 12
NATIVE {S2WERR_BAD_STATDATA}     CONST S2WERR_BAD_STATDATA     = 13
NATIVE {S2WERR_IS_CONFIGURED}    CONST S2WERR_IS_CONFIGURED    = 15
NATIVE {S2WERR_NULL_POINTER}     CONST S2WERR_NULL_POINTER     = 16
NATIVE {S2WERR_TOO_MANY_RETRIES} CONST S2WERR_TOO_MANY_RETRIES = 17
NATIVE {S2WERR_RCVRBLE_HDW_ERR}  CONST S2WERR_RCVRBLE_HDW_ERR  = 18

NATIVE {S2EVENT_ERROR}    CONST S2EVENT_ERROR    = $1
NATIVE {S2EVENT_TX}       CONST S2EVENT_TX       = $2
NATIVE {S2EVENT_RX}       CONST S2EVENT_RX       = $4
NATIVE {S2EVENT_ONLINE}   CONST S2EVENT_ONLINE   = $8
NATIVE {S2EVENT_OFFLINE}  CONST S2EVENT_OFFLINE  = $10
NATIVE {S2EVENT_BUFF}     CONST S2EVENT_BUFF     = $20
NATIVE {S2EVENT_HARDWARE} CONST S2EVENT_HARDWARE = $40
NATIVE {S2EVENT_SOFTWARE} CONST S2EVENT_SOFTWARE = $80


/* Structures */
/* ========== */

NATIVE {IOSana2Req} OBJECT iosana2req
   {ios2_Req}	req	:io
   {ios2_WireError}	wireerror	:ULONG
   {ios2_PacketType}	packettype	:ULONG
   {ios2_SrcAddr}	srcaddr[SANA2_MAX_ADDR_BYTES]	:ARRAY OF UBYTE
   {ios2_DstAddr}	dstaddr[SANA2_MAX_ADDR_BYTES]	:ARRAY OF UBYTE
   {ios2_DataLength}	datalength	:ULONG
   {ios2_Data}	data	:PTR
   {ios2_StatData}	statdata	:PTR
   {ios2_BufferManagement}	buffermanagement	:PTR
ENDOBJECT

NATIVE {Sana2DeviceQuery} OBJECT sana2devicequery
   {SizeAvailable}	sizeavailable	:ULONG
   {SizeSupplied}	sizesupplied	:ULONG
   {DevQueryFormat}	devqueryformat	:ULONG
   {DeviceLevel}	devicelevel	:ULONG
   {AddrFieldSize}	addrfieldsize	:UINT
   {MTU}	mtu	:ULONG
   {BPS}	bps	:ULONG
   {HardwareType}	hardwaretype	:ULONG
ENDOBJECT

NATIVE {Sana2PacketTypeStats} OBJECT sana2packettypestats
   {PacketsSent}	packetssent	:ULONG
   {PacketsReceived}	packetsreceived	:ULONG
   {BytesSent}	bytessent	:ULONG
   {BytesReceived}	bytesreceived	:ULONG
   {PacketsDropped}	packetsdropped	:ULONG
ENDOBJECT

NATIVE {Sana2SpecialStatRecord} OBJECT sana2specialstatrecord
   {Type}	type	:ULONG
   {Count}	count	:ULONG
   {String}	string	:NATIVE {const TEXT*} ARRAY OF /*TEXT*/ CHAR
ENDOBJECT

NATIVE {Sana2SpecialStatHeader} OBJECT sana2specialstatheader
   {RecordCountMax}	recordcountmax	:ULONG
   {RecordCountSupplied}	recordcountsupplied	:ULONG
ENDOBJECT

NATIVE {Sana2DeviceStats} OBJECT sana2devicestats
   {PacketsReceived}	packetsreceived	:ULONG
   {PacketsSent}	packetssent	:ULONG
   {BadData}	baddata	:ULONG
   {Overruns}	overruns	:ULONG
   {Unused}	unused	:ULONG
   {UnknownTypesReceived}	unknowntypesreceived	:ULONG
   {Reconfigurations}	reconfigurations	:ULONG
   {LastStart}	laststart	:timeval
ENDOBJECT


/* Obsolete definitions */
/* ==================== */

NATIVE {SANA2IOB_QUICK} CONST SANA2IOB_QUICK = IOB_QUICK

NATIVE {S2WERR_TOO_MANY_RETIRES} CONST S2WERR_TOO_MANY_RETIRES = S2WERR_TOO_MANY_RETRIES
NATIVE {S2WERR_RCVREL_HDW_ERR}   CONST S2WERR_RCVREL_HDW_ERR   = S2WERR_RCVRBLE_HDW_ERR

NATIVE {S2WireType_IEEE802} CONST S2WIRETYPE_IEEE802 = 6

NATIVE {S2_START} CONST S2_START = CMD_NONSTD
NATIVE {S2_END}   CONST S2_END   = (CMD_NONSTD + 18)
