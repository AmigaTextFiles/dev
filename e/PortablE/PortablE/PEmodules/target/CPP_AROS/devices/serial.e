/* $Id: serial.h 23386 2005-06-23 08:17:21Z neil $ */
OPT NATIVE, PREPROCESS
MODULE 'target/exec/io'
MODULE 'target/exec/types'
{
#define DEVICES_SERIAL_H_OBSOLETE
#include <devices/serial.h>
}
NATIVE {DEVICES_SERIAL_H} CONST
NATIVE {DEVICES_SERIAL_H_OBSOLETE} CONST
#define DEVICES_SERIAL_H_OBSOLETE

NATIVE {IOTArray} OBJECT termarray
  {TermArray0}	ta0	:ULONG
  {TermArray1}	ta1	:ULONG
ENDOBJECT

NATIVE {SER_DEFAULT_CTLCHAR} CONST SER_DEFAULT_CTLCHAR = $11130000

NATIVE {IOExtSer} OBJECT ioextser
  {IOSer}	iostd	:iostd
  {io_CtlChar}	ctlchar	:ULONG
  {io_RBufLen}	rbuflen	:ULONG
  {io_ExtFlags}	extflags	:ULONG
  {io_Baud}	baud	:ULONG
  {io_BrkTime}	brktime	:ULONG
  {io_TermArray}	termarray	:termarray
  {io_ReadLen}	readlen	:UBYTE
  {io_WriteLen}	writelen	:UBYTE
  {io_StopBits}	stopbits	:UBYTE
  {io_SerFlags}	serflags	:UBYTE
  {io_Status}	status	:UINT
ENDOBJECT

NATIVE {SDCMD_QUERY}		CONST SDCMD_QUERY		= CMD_NONSTD
NATIVE {SDCMD_BREAK}	       CONST SDCMD_BREAK	       = (CMD_NONSTD+1)
NATIVE {SDCMD_SETPARAMS}      CONST SDCMD_SETPARAMS      = (CMD_NONSTD+2)

/*
** The follwoing flags(bits) are to be set in IOExtSer->IOSer.io_Flags
*/

NATIVE {SERB_PARTY_ON}	CONST SERB_PARTY_ON	= 0
NATIVE {SERF_PARTY_ON}	CONST SERF_PARTY_ON	= $1
NATIVE {SERB_PARTY_ODD}	CONST SERB_PARTY_ODD	= 1
NATIVE {SERF_PARTY_ODD}	CONST SERF_PARTY_ODD	= $2
NATIVE {SERB_7WIRE}	CONST SERB_7WIRE	= 2
NATIVE {SERF_7WIRE}	CONST SERF_7WIRE	= $4
NATIVE {SERB_QUEUEDBRK}	CONST SERB_QUEUEDBRK	= 3
NATIVE {SERF_QUEUEDBRK}	CONST SERF_QUEUEDBRK	= $8
NATIVE {SERB_RAD_BOOGIE} CONST SERB_RAD_BOOGIE = 4
NATIVE {SERF_RAD_BOOGIE} CONST SERF_RAD_BOOGIE = $10
NATIVE {SERB_SHARED}	CONST SERB_SHARED	= 5
NATIVE {SERF_SHARED}	CONST SERF_SHARED	= $20
NATIVE {SERB_EOFMODE}	CONST SERB_EOFMODE	= 6
NATIVE {SERF_EOFMODE}	CONST SERF_EOFMODE	= $40
NATIVE {SERB_XDISABLED}	CONST SERB_XDISABLED	= 7
NATIVE {SERF_XDISABLED}	CONST SERF_XDISABLED	= $80

/*
** The following flags(bits) are to be found in IOExtSer->io_Status
*/

NATIVE {IO_STATB_OVERRUN}    CONST IO_STATB_OVERRUN    = 8
NATIVE {IO_STATF_OVERRUN}    CONST IO_STATF_OVERRUN    = $100
NATIVE {IO_STATB_WROTEBREAK} CONST IO_STATB_WROTEBREAK = 9
NATIVE {IO_STATF_WROTEBREAK} CONST IO_STATF_WROTEBREAK = $200
NATIVE {IO_STATB_READBREAK}  CONST IO_STATB_READBREAK  = 10
NATIVE {IO_STATF_READBREAK}  CONST IO_STATF_READBREAK  = $400
NATIVE {IO_STATB_XOFFWRITE}  CONST IO_STATB_XOFFWRITE  = 11
NATIVE {IO_STATF_XOFFWRITE}  CONST IO_STATF_XOFFWRITE  = $800
NATIVE {IO_STATB_XOFFREAD}   CONST IO_STATB_XOFFREAD   = 12
NATIVE {IO_STATF_XOFFREAD}   CONST IO_STATF_XOFFREAD   = $1000 




NATIVE {SEXTB_MARK}	CONST SEXTB_MARK	= 0
NATIVE {SEXTF_MARK}	CONST SEXTF_MARK	= $1
NATIVE {SEXTB_MSPON}	CONST SEXTB_MSPON	= 1
NATIVE {SEXTF_MSPON}	CONST SEXTF_MSPON	= $2


/*
** The follwoing error codes are to be found in IOExtSer->IOSer.io_Error
*/

NATIVE {SerErr_DevBusy}	       CONST SERERR_DEVBUSY	       = 1
NATIVE {SerErr_BaudMismatch}    CONST SERERR_BAUDMISMATCH    = 2
NATIVE {SerErr_BufErr}	       CONST SERERR_BUFERR	       = 4
NATIVE {SerErr_InvParam}        CONST SERERR_INVPARAM        = 5
NATIVE {SerErr_LineErr}	       CONST SERERR_LINEERR	       = 6
NATIVE {SerErr_ParityErr}       CONST SERERR_PARITYERR       = 9
NATIVE {SerErr_TimerErr}       CONST SERERR_TIMERERR       = 11
NATIVE {SerErr_BufOverflow}    CONST SERERR_BUFOVERFLOW    = 12
NATIVE {SerErr_NoDSR}	      CONST SERERR_NODSR	      = 13
NATIVE {SerErr_DetectedBreak}  CONST SERERR_DETECTEDBREAK  = 15

NATIVE {SERIALNAME}     CONST
#define SERIALNAME serialname
STATIC serialname     = 'serial.device'

/*
**  Anything below this point is obsolete.
*/

#ifdef DEVICES_SERIAL_H_OBSOLETE
NATIVE {SerErr_InvBaud}	       CONST SERERR_INVBAUD	       = 3
NATIVE {SerErr_NotOpen}	       CONST SERERR_NOTOPEN	       = 7
NATIVE {SerErr_PortReset}       CONST SERERR_PORTRESET       = 8
NATIVE {SerErr_InitErr}	      CONST SERERR_INITERR	      = 10
NATIVE {SerErr_NoCTS}	      CONST SERERR_NOCTS	      = 14


NATIVE {IOSTB_OVERRUN}	 CONST IOSTB_OVERRUN	 = 0
NATIVE {IOSTF_OVERRUN}	 CONST IOSTF_OVERRUN	 = $1
NATIVE {IOSTB_WROTEBREAK} CONST IOSTB_WROTEBREAK = 1
NATIVE {IOSTF_WROTEBREAK} CONST IOSTF_WROTEBREAK = $2
NATIVE {IOSTB_READBREAK}  CONST IOSTB_READBREAK  = 2
NATIVE {IOSTF_READBREAK}  CONST IOSTF_READBREAK  = $4
NATIVE {IOSTB_XOFFWRITE}  CONST IOSTB_XOFFWRITE  = 3
NATIVE {IOSTF_XOFFWRITE}  CONST IOSTF_XOFFWRITE  = $8
NATIVE {IOSTB_XOFFREAD}	 CONST IOSTB_XOFFREAD	 = 4
NATIVE {IOSTF_XOFFREAD}	 CONST IOSTF_XOFFREAD	 = $10

NATIVE {IOSERB_ACTIVE}	CONST IOSERB_ACTIVE	= 4
NATIVE {IOSERF_ACTIVE}	CONST IOSERF_ACTIVE	= $10
NATIVE {IOSERB_ABORT}	CONST IOSERB_ABORT	= 5
NATIVE {IOSERF_ABORT}	CONST IOSERF_ABORT	= $20
NATIVE {IOSERB_QUEUED}	CONST IOSERB_QUEUED	= 6
NATIVE {IOSERF_QUEUED}	CONST IOSERF_QUEUED	= $40
NATIVE {IOSERB_BUFRREAD} CONST IOSERB_BUFRREAD = 7
NATIVE {IOSERF_BUFRREAD} CONST IOSERF_BUFRREAD = $80
#undefine DEVICES_SERIAL_H_OBSOLETE
#endif
