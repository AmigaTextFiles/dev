@database "WhatView.Guide"
@master   "None"
@author   "Capus André"
@(c)      "Copyright © 1993/1994 NasGûl, Inc."
@font topaz.font 8
@node main 
@title "WhatView v 0.17 Documentation"


        WhatView v0.17X © 1993/1994 Capus André.
        ----------------------------------------


    @{"Copyright et Distribution" link COPY}

    @{"Description              " link DESC}

    @{"Equipements              " link EQUI}

    @{"Installation             " link INST}

    @{"Fonctionnement           " link FONC}

    @{"Sources E                " link WhatviewSources.guide/main}

    @{"Remerciements/Contact    " link REME}

@endnode
@node COPY
@title "Copyright et Distribution"

    Aux Associations:
    -----------------

        Whatview est un programme _*FREEWARE*_,c'est à dire qu'il peut être
    distribué librement par n'importe qui.La seule restriction est que le
    prix demandé ne dépasse pas le prix du support et de l'envoi,entre 10
    et 15 F.

    (les disquettes vendues 50 à 75 F sont radicalement exclus).


    >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
    @{b}Il est strictement @{fg highlight}INTERDIT@{fg text} de faire de 
    l'argent avec ce programme.@{ub}
    <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

        - Toute inclusion dans un packtage quelconque ne peut être fait
    qu'avec mon autorisation.Seuls les auteurs de la WhatIs.library et
    Wouter (Auteur de l'amigaE) sont libres de l'inclure ou bon leurs
    semblent (Packtage DP ou BBS..).


        - Toutes distributions doit être faite en totalité.TOUS les fichiers,
    archives,E sources,binaires,doivent être distribués.



        - Toute inclusion sur CD-ROM ne peut être fait qu'avec mon autori-
    sation (Ceci exclus Fred Fish).


    Aux particuliers:
    -----------------

    Le particulier se doit @{fg highlight}DONNER@{fg text} ce programme.

@endnode
@node DESC
@title "Description"

    @{"WhatView" link WHATVIEW} vous permet d'un simple clic de la souris de 
    lancer n'importe quel application en rapport avec le type de fichiers 
    lui étant passé en paramètre.Vous avez pour cela le choix entre le menu 
    Outils (Tools) du wb,l'App icon de WhatView ou la commodité.

    Le type de fichier est défini par la WhatIs.library.

    Le choix des commandes s'effectue a l'aide des préferences @{"WVPrefs" link WVPREFS}.
    Une commande cli et aussi jointe,elle permet d'avoir accès au même fonction que
    dans @{"WhatView" link WHATVIEW}  mais du cli (voir @{"WhatIs" link WHATIS}).

    Un autre programme @{"WhatIsPrefs" link WHATISPREFS} permet de gérer le fichier s:filetypes.

        D'autres programmes font la même chose (FileView ou Action) mais les commandes
    lancées le sont en run >nil: <nil: dans la ligne de commande ,et plus important,
    3  fichiers texte donneront 3 tâches de fonds différentes.WhatView trie les fichiers
    et ne lance la commande qu'une seule fois.

    @{"Voir Image" link "WhatViewWindow.IFF/main"}

@endnode
@node EQUI
@title "Equipements"

    @{"WhatView" link WHATVIEW} a été programmé en @{"Amiga_E" link AMIGAE} v2.1b (Fred Fish 810) et ce,
    sur un 4000/68E030+68882 en OS 3.0 (KS 39.106 WB 39.29).
    Il devrait tourner sans prôblème en OS 2.xx.
    Les libraries utilisées sont celle du système a part :

        @{"WhatIs.Library  " link WHATISLIB}.
        @{"ReqTools.library" link REQTOOLSLIB}.

    Un Handler est aussi utilisé: 

        @{"WBSart-Handler  " link WBSTART}


    Les executables ayant dans leurs noms _D sont des versions DEBUG.Si vous n'avez
    pas l'AmigaE attention de ne pas écraser les versions normales lors de tests.Le
    fonction debug est simple ,le programme ouvre une console de sortie est y ecrit
    dans quel procédure il se trouve.Utilisez ces versions seulement si le programme
    plante vôtre machine,les sources étant fournis il ne vous reste plus qu'a vous y mettre.


@endnode
@node INST
@title "Installation"

    Vous pouvez mettre @{"WhatView" link WHATVIEW} et @{"WVPrefs" link WVPREFS} ou vous voulez.
    Le programme @{"WhatIs" link WHATIS} est a mettre dans vôtre c: (ou utilisez la
    commande AmigaDos path).

    Si l'envie vous prend de mettre @{"WhatView" link WHATVIEW} dans le dossier WBstartup ne pas ou-
    blier le tooltype DONOTWAIT.

    copier les libraries @{"WhatIs.library" link WHATISLIB} et @{"reqtools.library" link REQTOOLSLIB} dans le dossier
    Libs:.

    Copiez le @{"WBStart-Handler" link WBSTART} dans le L:.

    Le fichier @{"s:FileTypes" link WHATISLIB} est a mettre dans vôtre dossier S:

    @{"WhatView" link WHATVIEW} crée un fichier WVICDEF dans l'ENV:, cette variable contient le chemin
    ou sont définies les icônes par défaut.Ce fichier sert a @{"WVprefs" link WVPREFS} pour le menu Edit Icons.


@endnode
@node FONC
@title "Fonctionnement"


        @{"Whatview          " Link WHATVIEW}
        @{"WVprefs           " Link WVPREFS}
        @{"WhatIs            " Link WHATIS}
        @{"WhatIsPrefs       " Link WHATISPREFS}
        @{"WhatConf          " link WHATCONF}

@endnode
@node "WHATCONF"
@title "WhatConf"

        WhatConf est une commande CLI qui permet le transfert en ASCII du fichier
        WhatView.prefs,et inversement.

        Exemple:

            >Whatconf Env:WhatView.prefs Ram:NewWhatView.txt

                Vous pouvez editer le fichier NewWhatView.txt avec vôtre éditeur de texte.

        Une ligne se presente sous la forme suivante:

            Type <id> Com <nom> Dir <dossier courant> Mode <val> Pri <pri> Stack <st> UseParent

            (Type/K,Com/K,Dir/K,Mode/K/N,Pri/K/N,Stack/K/N,UseParent/S)

        avec:
                <id>       - Type de fichier (apparaissant dans la liste Action de @{"WVprefs" link "WVPREFS"}.
                <nom>      - Nom de la commande associée.
                <dossier>  - le dossier ou se situe la commande.
                <mode>     - type de lanement (WB=0 ou CLI=1).
                <pri>      - Priorité de la commande.
                <st>       - Stack de la commande.
                <usep>     - Vrai ou faux.

        Pour reconvertir le nouveau fichier faites:

            >WhatConf ram:NewWhatView.txt Env:WhatView.Prefs SaveBin

@endnode
@node "WHATVIEW"
@title "Whatview"


    Au lancement Whatview cherche le fichier Env:Whatview.prefs,si ce
    fichier est absent WhatView ne se lance pas,vous pouvez créer ce
    fichier avec le programme @{"WVprefs" link WVPREFS}.

        Ce fichier contient toutes les descriptions des commandes associées
    aux types de fichier definis par la @{"WhatIs.Library" link WHATISLIB}.

    Whatview en WB
    --------------

    WhatView ToolTypes
    ------------------

    DONOTWAIT           - Si WhatView est dans le WBStartUp.
    DEFDIR=opt          - Défini le dossier par défault pour les icônes prédéfi-
                          nies @{"WhatIs.library" link WHATISLIB}.Ceci permet de soulager le
                          dossier env:sys.
    POSX=position x     - Détermine la position en x de l'Appicon.
    POSY=position y     - Détermine la position en y de l'Appicon.
    DEFPREFSDIR=opt     - Défini le dossier ou se trouve @{"WVPrefs" link WVPREFS} (Sys:Prefs par défaut).
    CX_POPKEY=opt       - Touche d'appel de Whatview ("ralt help" par défaut).
    CX_POPKEYPREFS=opt  - Touche d'appel de WVPrefs ("shift ralt help" par défaut).
    MAXARG=n            - Le nombre maximum d'arguments (maximum de 20).
    UNDERMOUSE          - WhatView ouvre sa fenêtre sous le pointeur de souris.

    Whatview en CLI
    ---------------

        1>Wahtview ? 

        CX_POPKEY/K,CX_PRIORITY/N,CX_POPKEYPREFS/K:

    CX_POPKEY       - Touche d'appel de Whatview ("ralt help" par défaut).
    CX_POPKEYPREFS  - Touche d'appel de WVPrefs ("shift ralt help" par défaut).
    CX_PRIORITY     - Priorité de Whatview (Commodité).

        ATTENTION l'icone de WhatView doit être présente dans le dossier ou se trouve 
    WhatView.

    Astuce : Le racourcci clavier de WhatView fait apparaitre sa fenêtre mais aussi
    -------  Disparaitre.


        Une fois lancé Whatview initialise:

        - une entrée menu dans le menu Outils du WB.
        - Une icone d'application sur le WB.
        - Une commodité.
        - Une fenêtre d'application si la fenêtre de WhatView est ouverte.

    Configuration de WhatView
    -------------------------

        Une fois lancé vous pouvez reconfigurez Whatview par l'intermediaire de @{"WVprefs" Link WVPREFS}.


    Gadget de la fenêtre de WhatView.
    ---------------------------------

        WhatView - lance les commandes associées aux types de fichiers.
        Info     - Ouvre la fenêtre d'informations.
        AddIcon  - Ajoute l'icone par défaut de la @{"WhatIs.Library" link WHATISLIB},
                   aux fichiers.
        Execute  - Ouvre un StringRequest pour chaque fichier.
        Prefs    - Lance @{"WVprefs" link WVPREFS}.
        Quit     - Quitte WhatView.


    Fonctionnement interne de Whatview
    ----------------------------------

        Tous les arguments sont triés par type de fichiers puis la commande associée n'est
    lancé qu'un seul fois.

        Mode WB:

            Whatview Utilise le WBStart-Handler de ToolManager,ce mode est le plus sur.
            (Si la commande associée supporte le WorkBench).

        Mode CLI:

            La commande est lancée avec la fonction SysTagList() de l'exec.library,les arguments
        sont mis a la suite de la commande.Il faut que la commande puisse avoir plusieurs
        arguments possible ( >Commande fichier1 fichier2 fichier3....).

        La sélection de l'action Execute fait intervenir la fonction Dos Execute(),Whatview
        effectue en plus un changement de dossier avant de lancer la commande.Si vôtre comm-
        ande bloque le CLI,pour ne pas bloquer WhatView il faudra lancer la commande avec
        Run ou Run >nil: <nil:.

@endnode
@node WVPREFS
@title "WVprefs"


    WVPrefs (programme de configuration).
    -------
        =======================================================================
        ATTENTION!! Le fichier de configuration de WhatView a changé de format
        depuis la version 0.15,l'ancien n'etant pas compatible avec le nouveau.
        La version 0.15 a été distribué sur CAM et CDROM,mise sur BBS par Wouter,
        de nombreux bugs sous présent.
        =======================================================================

        La liste de gauche (ID) affiche tous les types de fichier reconnus par vôtre
    système,la liste de droite (Action) affiche tous les types de fichier ayant une
    commande associée.

    Gadgets
    -------
        - Add       - Fait passer l'entrée selectionnée de la liste (ID) dans la liste
                      (Action).
        - Rem       - Efface l'entrée selectionnée de la liste (Action).
        - ?         - Ouvre un sélécteur de fichiers pour la séléction de la commande.
        - Wb/Cli    - Défini le mode de lancement de la commande.
        - Pile      - Défini la pile de la commande.
        - Priorité  - Défini la priorité de la commande.
        - Charger   - Charge un nouveau fichier de prefs.
        - Sauver    - Sauve les prefs courantes dens Env:Whatview.prefs et Envarc:Whatview.prefs,
                      cette fonction valide le fichier Env:Whatview.prefs,toutes les modifications
                      faites sont prise en compte par WhatView.
        - Sauver S. - Ouvre un sélécteur de fichiers pour la sauvegarde des prefs.
        - Use P.T   - la commande associée sera défini par le ParentType.

    Menus
    -----

        Default Action
        --------------

        OpenWin     - Whatview ouvre toujours sa fenêtre.
        Whatview    -|
        Info        -|
        AddIcon     -|-> la fenêtre de Whatview ne s'ouvre pas,mais Whatview
        Execute     -|   effectue l'action choisi.

        Utils
        -----
        Edit Icons  - Edite l'icône par défaut du type de la liste Action (OS 3.0).
                      (le chemin d'accès étant défini par la variable d'environement WVICDEF).


    Exemples:   (abrev. SQB=Shift-cliquez-bougez sur..)

        Si vous mettez l'action par défaut sur `Whatview`,vous pouvez SQB
        l'AppItem,l'AppWindow (si la fenêtre de whatview est ouverte) ou
        l'AppIcon ,WhatView tri les fichiers (vous pouvez passer des images avec du texte
        et des objets 3D) et lance les commandes associées.

            Si l'action par défaut est `OpenWin` vous devez obligatoirement valider vôtre
        choix par l'un des gadgets de la fenêtre.Donc si vous SQB sur la fenêtre vous devez
        encore cliquez sur un gadget (Whatview,Info,AddIcon,Execute),de même si vous SQB
        sur l'AppIcon avec la fenêtre de WhatView ouverte vous devez aussi valider.

        Tous changement des types de fichiers (Add ou Rem) doit etre valider en
        sauvant les prefs (Sauver).

        Le changement de l'action par défaut s'effectue automatiquement (inutile de sauver).

        A partir de la version 0.162 WhatView n'ouvre plus la serie de boite d'alerte
        lors de la sélection de l'options Info,a la place une fenêtre est ouverte contenant
        la liste des fichiers.Si vous ne fermez pas cette fenêtre,a chaque sélection de
        l'option info les nouveaux fichiers seront rajoutés a la liste en cours.La liste
        est éffacée lors de la fermeture de la fenêtre.


    Utilisation de l'option 'Use Parent Type'.
    ------------------------------------------


        prenons ces 4 fichiers:

        fichier1.c         Source C
        fichier2.e         Source E
        fichier3.a         Source A
        fichier3.h         IncludeC

        ils peuvent avoir la même commande assossiée et pourtant l'editeur de texte sera
        lancer 4 fois,pour eviter cela il suffit de séléctionner dans WVPrefs,et ce
        pour les 4 types de fichier, 'utilise parent type'.Le SubType de ces 4 fichiers étant
        le type 'Text' la commande sera donc celle associée a ce type.Ceci permet aussi de
        changer d'éditeur de texte sans avoir a refaire tous les changements pour tous les
        fichiers textes (quelque soit leurs types "Source C" ou "Doc").

        Quand la sélection n'est pas possible,c'est qu'il n'existe aucun SubType.Il suffit
        d'editer le fichier @{"s:filetypes" link WHATISLIB} et de rajouter ces lignes:

        TYPE "<nouveau type>"
            NAMEPATTERN "#?(pat1|pat2)"       - la whatis.library n'accepte pas des types de fichier vide.
        ENDTYPE

        TYPE "TYPE1"
            ........
            SUBTYPE "<nouveau type>"
            NAMEPATTERN "#?.pat1"
            .......
        ENDTYPE

        TYPE "TYPE2"
            ........
            SUBTYPE "<nouveau type>"
            NAMEPATTERN "#?.pat2"
            .......
        ENDTYPE

        faites un flush de la whatis.library avec la commande cli @{"WhatIs" link WHATIS},lancez les prefs.
        le type "<nouveau type>" est maintenant dans la liste (ID),faites Add.
        choisissez la commande associée,puis rajoutez pour les type TYPE1 et TYPE2 `Utilise Parent Type`.
        Maintenant les fichiers de type TYPE1/TYPE2 seront lancés avec la même commande.

        ATTENTION !! Lors de dernier test cette methode marche si le SubType des fichiers
        concernés est inexistant.Par exemple definir un type "Objet3D" est y renvoyer les
        objets 3D d'Imagine est impossible car la Whatis.library considère le SubType "IFF" et
        non "Objet3D" comme Subtype pour les objets ("FORM....").Un paramètre du style FORCESUBTYPE
        serait le bienvenue.

        Une commande CLI peut avoir des paramètres,par exemple pour lancer un script Arexx,
        entrez Rx <nom du prog> dans le sélécteur de fichier de la commande associée,votre
        script Arexx sera lancé pour le type de fichier lui étant associé.
        (voir @{"WhatDeli.rexx" link "WhatDeli.rexx/main"}).


@endnode
@node WHATIS
@title "WhatIs"

    Whatis est un commande CLI,elle permet de ce servir de Whatview en cli.

    1>WhatIs ?

      DOSSIER,ACT/K,FLUSH/S,PREFS/S

        DOSSIER     - Dossier fichier ou pattern (AmigaDos).
        ACT         - Action a éffectuer (WHATVIEW par défaut).
                      (WHATVIEW,INFO,ADDICON,EXECUTE,PREFS,QUIT).
        FLUSH       - Tente un Flush sur la WhatIs.library (pour l'ajout de
                      type de fichiers).
        PREFS       - Lance @{"WVprefs" link WVPREFS}.
        QUIT        - Quitte @{"WhatView" link WHATVIEW}.

        Attention quand même de ne pas mettre une pattern de séléction pas assez
        restrictive,n'oubliez pas que @{"WhatView" link WHATVIEW} est limité a
        20 arguments,Et ceci encore plus depuis l'arrivée du CDROM,un truc de style

        >Whatis mod.#?

        dans un dossier contenant plus de 100 modules risque de prendre beaucoup de
        temps pour pas grand chose,faites plutôt mod.a#? puis mod.b#? etc....

@endnode
@node WHATISPREFS
@title "WhatIsPrefs"

    Le programme WhatIsPrefs est fait pour les fanas du click,il permet simplement
    de gérer le fichier s:filetypes.

    A aucun moment WhatIsPrefs se sert de la whatis.library,les subtypes apparaissant
    dans le gadget SubType sont ceux définis dans le fichier s:filetypes.

    Un gadget sans texte est présent pour inclure des commentaires.


TYPE "Source E"
#> Source AmigaE
    ICONNAME def_E
    NAMEPATTERN "#?.e"
ENDTYPE

TYPE "Include E"
#> Include AmigaE
    ICONNAME "def_ince"
    NAMEPATTERN "#?.m"
    COMPAREBYTE 0 "EMOD"
ENDTYPE

    La ligne de commentaire est celle commençant par #>.

    La fonctions des autres gadgets est en rapport avec la @{"WhatIs.Library" link WHATISLIB}.

@endnode
@node WHATISLIB
@title "WhatIs.Library"

    WhatIs.library est un librarie qui permet reconnaitre les fichiers.
    L'immense avantage par rapport au DataTypes du 3.X est que l'ajout
    de fichier peut se faire a l'aide d'un texte Ascii (fichier s:filetypes)

    La Whatis.library a été ecrite par Sylvain Rougier et Pierre Carrette.
    (voir l'archive pour de plus d'informations).

@endnode
@node REQTOOLSLIB
@title "Reqtools.library"

    La reqtools.library permet de gérer facilement des requesters.

    La reqtools.library a été ecrite par Nico François.
@endnode
@node AMIGAE
@title "AmigaE"

    L'AmigaE est un language de programmation semblable au C.

    AmigaE a été ecrit par Wouter Van Oortmerssen.
@endnode
@node WBSTART
@title "WBStart-Handler"

    WBStart-Handler permet de simuler un lancement WB d'un programme.

    WBStart-Handler a été ecrit par Sefan Becker.
    (voir l'archive pour plus d'informations).

@endnode
@node REME
@title "Remerciements"

    Je tiens à remercié tout particulièrement @{b}Wouter Van Oortmerssen@{ub}
    pour l'Amiga_E,sans lequel ces programmes n'auraient pas vus le jour.

    Sylvain Rougier et Pierre Carrette pour la WhatIs.library .
    Nico François pour l'incontournable ReqTools.library (et tous le reste).
    Stefan Becker pour le WBStart-Handler (et ToolManager bien sûr !).
    Wouter Van Oortmerssen (alias $#%!) pour son Amiga_E .
    Commodore pour son Amiga.@{ub}

    @{b}NasGûl@{ub}

    Capus André.
    74 Rue jules Guesde.
    92240 MALAKOFF.
    FRANCE.
    Tél:46.44.35.28

@endnode























