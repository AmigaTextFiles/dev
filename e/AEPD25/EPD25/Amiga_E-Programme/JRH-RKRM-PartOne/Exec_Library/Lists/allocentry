-> strhooks.e - string gadget hooks demo
-> E-Note: this uses several of the 'tools' modules, notably 'installhook'

MODULE 'utility',
       'graphics/rastport',
       'intuition/intuition',
       'intuition/screens',
       'intuition/sghooks',
       'utility/hooks',
       'tools/ctype',
       'tools/installhook'

ENUM ERR_NONE, ERR_DRAW, ERR_KICK, ERR_LIB, ERR_PUB, ERR_WIN

RAISE ERR_DRAW IF GetScreenDrawInfo()=NIL,
      ERR_LIB  IF OpenLibrary()=NIL,
      ERR_PUB  IF LockPubScreen()=NIL,
      ERR_WIN  IF OpenWindowTagList()=NIL

CONST SG_STRLEN=44, MYSTRGADWIDTH=200

-> We'll dynamically allocate/clear most structures, buffers
OBJECT vars
  sgg_Window:PTR TO window
  sgg_Gadget:gadget
  sgg_StrInfo:stringinfo
  sgg_Extend:stringextend
  sgg_Hook:hook
  sgg_Buff[SG_STRLEN]:ARRAY
  sgg_WBuff[SG_STRLEN]:ARRAY
  sgg_UBuff[SG_STRLEN]:ARRAY
ENDOBJECT

-> Open all required libraries, set-up the string gadget.
-> Prepare the hook, open the sg