<html>
<head>
  <title>PowerD.html - volby (OPT)</title>
  <meta http-equiv="Content-Type" content="text/html">
</head>
<body bgcolor=#ffffff>
  volby v PowerD zacinaji klicovym slovem 'OPT' nebo 'GOPT', ktere muze byt
  definovano kdekoliv mimo procedury.<br>
  OPT nastavuje volby pro dany zdrojovy soubor. pokud OPT pouzivate v modulu.
  a pouzijete tento modul, pak volby nastavene v modulu budou pouzity pouze v
  danem modulu. nektere volby jsou vzdy brany jako globalni, protoze jako
  lokalni by nedavaly vyznam. vsechny tyto jsou oznaceny hvezdickou <font color=#0000ff>*</font>.
  pri pouziti GOPT budou dane volby platit vsude. pri pouziti volby HEAD, ci NOHEAD, pouze
  to posledni bude platit.<br><br>

<ul type=square>
<li><big>HEAD/K<font color=#0000ff>*</font></big> (default: 'startup.o')<br>
    nastavuje startovaci objektovy soubor #?.o. tento soubor by se mel nachazet v adresari
    'd:lib', jinak jeho jmeno musi zacinat hvezdickou '*' a nesledovano celou cestou. tato
    volba automaticky vypina volbu NOHEAD.
    (ukazka: OPT HEAD='*hd2:myheads/best.o')
<br><br>
<li><big>NOHEAD/S<font color=#0000ff>*</font></big> (default: hlavicka je povolena)<br>
    tato volba vypina pridani startovaciho souboru (hlavicky).
    pri pouziti teto volby si musite vsechny knihovny otevirat a nastavit promenne samostatne.
<br><br>
<li><big>LINK/K<font color=#0000ff>*</font></big> (default: no linkable file)<br>
    tato volba umoznuje definovat objektove soubory #?.o, ktere se po kompilaci prilinkuji
    se skustitelnemu souboru. touto cestou lze pridavat jak objektove soubory (#?.o) tak i
    linkovaci knihovny (#?.lib). toto klicove slovo muze byt pouzito vicenasobne pro prilinkovani
    vice objektu ci knihoven. zaroven automaticky nastavuje nazev vystupniho objektoveho souboru
    do defaultni podoby.
    (ukazka: OPT LINK='*hd1:lib/math040.lib',LINK='amiga.lib')
<br><br>
<li><big>OBJECT/K/S<font color=#0000ff>*</font></big> (default: '&lt;progname&gt;.o')<br>
    toto nastavuje nazev vystupniho objektoveho souboru. pokud definujete pouze 'nazev.o',
    bude objektovy soubor vytvoren v aktualnim adresari, pokud jej definujete s cestou, ulozi
    se do daneho adresare (napr: 'hd0:objects/prog.o').
<br><br>
<li><big>NOSTD/S<font color=#0000ff>*</font></big> (default: pouziva powerd.m modul)<br>
    tato volba zakazuje nacitani zakladniho modulu 'dmodules:lib/powerd.m'. to znamena,
    ze nebudou pristupny vsechny zakladni funkce linkovaci knihovny powerd.lib, ma to vyznam
    pouze v pripade, ze chcete tyto funkce nahradit, nebo skutecne zakazat.
<br><br>
<li><big>DEST/K<font color=#0000ff>*</font></big> (default: '&lt;progname&gt;' bez pripony '.d')<br>
    toto je to same jako volba OBJECT/S, pouze nastavuje nazev spustitelneho souboru po linkovani.
<br><br>
<li><big>PRIVATE/S</big> (default: pouze verejna data jsou pristupna)<br>
    toto aktivuje praci s privatnimy daty.
<br><br>
<li><big>DPRE/S, CPRE/S, APRE/S, EPRE/S</big> (default: DPRE aktivni)<br>
    tato klicova slova nastavuji priority mezi znaminky/operatory. 
    viz <a href="equa.html">rovnice</a>.
<br><br>
<li><big>NOSOURCES/S</big> (default: vypisuje zdrojovy kod s chybovymi hlasenimi)<br>
    tato volba vypina vypis zdrojoveho kodu u chybovych hlaseni.
<br><br>
<li><big>AMIGAE/S</big> (default: zakazano)<br>
    tato volba aktivuji AmigaE kompatibilni rezim:
<pre>      - vsechny nazvy objektu a polozek pouzivaji mala pismena
      - EPRE volba je zapnuta
      - klicove slovo HANDLE v PROCedurach je ignorovano
      - EXCEPT DO zmeneno na EXCEPTDO
      - EXIT zmeneno na EXITIF
</pre>
<br><br>
<li><big>OSVERSION/N</big> (default: 0)<br>
    nastavuje minimalni verzi OS vyzadovanou pro vysrupni program, momentalne je to zbytecna volba.
<br><br>
<li><big>CPU=MACHINE/K</big> (default: mc68020+mc68881)<br>
    tato volba nastavuje generator vystupniho kodu. zname procesory:
<pre>  MC68000, MC68010 - tyto jsou zname, avsak nepodporovane.
  MC68020, MC68030, MC68EC040, MC68LC040, MC68EC060, MC68LC060
                   - tyto budou generovat kod bez FPU instrukci, viz NOFPU
  MC68040, MC68060 - tyto budou generovat kod vcetne FPU instrukci

  MC68881, MC68882 - tyto mohou byt pouzity pouze v kombinaci s jednim z vyse uvedenych procesoru, a aktivuji FPU instrukce
</pre><br>
    PowerD rozeznava i zkratky jako napriklad: 68030 nebo 030 jako MC68030, lc060 jako MC68LC060 atd.
    lze take pouzit kombinace jano napriklad: 020+881 nebo mc68ec040+882 atd.
    dejte si pozor, abyste kombinovali cpu, ktere maji smysl 68000/68010 nejsou podorovany!
    momentalne neni rozdil mezi 020 a 030 a mezi 040 a 060 v generatoru kodu, to snad bude v budoucnu.
<br><br>
<li><big>NOFPU/S</big> (default: fpu je aktivni)<br>
    tato volba umoznuje vyuzivat desecinna cisla i bez matematickeho koprocesoru (FPU). momentalne
    to funguje tak, ze vsechny FPU instrukce jsou prekonvertovany na obycejne instrukce a funkce,
    a pouzivaji mathieeedoubbas.library a mathieeedoubtrans.library. tato volba je pridana jen proto,
    aby bylo mozne spoustet kod i na pocitacich bez FPU, nicmene vytvoreny kod je velice pomaly, takze
    tuto volbu pouzivejte jen, kdyz neni zbyti.
    vzdy je lepsi pouzit modul, nez primo volbu NOFPU ve zdrojovem kodu. viz <a href="nofpu.html">NOFPU</a>.

<font color=#0000ff>    PowerD prekladac fpu instrukci jeste neni uplne hotov, takze jej pouzivejte opatrne!!!!!</font>
<br><br>
<li><big>MODULE/K/S</big> (default: zadny binarni modul)<br>
    tato volba zajistuje ulozeni binarniho modulu. pokud je klicove slovo samostatne, pak PowerD
    vytvori soubor s nazvem '&lt;modname&gt;.b'. pokud jej nasleduje napr MODULE='xxx.b', pak
    PowerD vytvori binarni modul s timto nazvem. pokud pouzivate tuto volbu, pak ji vlozte na
    prvni radek zdrojoveho kodu modulu, nebo alespon pred vsechna klicova slova PowerD, jinak bude
    modul obsahovat vsechny konstanty atd ze vsech otevrenych modulu.

    pokud si chcete vytvorit vlastni binarni modul, pak kouknete <a href="bmodfmt.html">sem</a>.
<br><br>
<li><big>OPTIMIZE/N</big> (default: 0)<br>
    nastavuje bity pro optimalizace:
<pre>
      - bit 0 - odstranuje zbytecne
        movem+movem = nic (dva inverzni movem)
        move+tst = move
        bra x+bra y = bra x (bra y neni dosazitelne)

      - bit 1 - muls/divs optimalizace
        mul = lsl
        div = lsr

      - bit 2 - zmenseni delky instrukci
        movem = move
        move = moveq
        move = pea
        movea #0 = suba
        move #0 = clr
        add/sub = addq/subq
        add/sub = lea
        add/sub #0 = nothing
        cmp #0 = tst

      - bit 3 - odstranit vicenasobne retezce
        toto jednoduse odstrani vsechny stringy, ktere se opakuji.
</pre><br>
    pokud je pouzito klicove slovo OPTIMIZE samotne (bez cisla), jsou pouzity vsechny dostupne optimalizace.<br><br>

    vsechny optimalizace mohou byt take dostupne cislem -1 ($ffff.ffff).
<br><br>
<li><big>NOEXE/S</big> (default: spustitelny soubor se vytvori)<br>
    tato volba je uzitecna, pokud chcete kompilovat jednu nebo vice funkci do objektoveho souboru (#?.o).
    je samozrejme mozne pouzit vystupni objektovy soubor, ktery se vytvori pred finalnim linkovanim, ale
    pokud tento zdrojovy kod nebude obsahovat proceduru main(), dojde k chybovemu hlaseni, coz se s pouzitim
    teto volby nestane.
<br><br>

<li><big>EXEICON/S</big> (default: vyroba ikony je zakazana)<br>
    tato volba se pokousi zkopirovat detaultni ikonu pro spustitelny soubor z
    'd:icons/def_exe.info', a uloze se pod stejnym nazvem jako vystupni spustitelny program
    s priponou '.info'. pokud bude ikona nalezena, nebude prepsana. pokud nebude nalezen zdroj
    ikony, neuvidite zadne chybove hlaseni. toto klicove slovo je pouzito ve volbe <a href="setopt.html">WB</a>,
    takze radsi pouzijte tu na misto EXEICON, pokud nevite presne, co to bude delat.
<br><br>
</ul>
  a samozrejme lze vytvaret a pouzivat vlastni <a href="setopt.html">volby</a>.
<hr>
<big>ukazky:</big>
<font color=#ff0000><pre>
  OPT NOHEAD,LINK='algos.o',LINK='d:lib/amiga.lib',DEST='calc'
</pre></font><br>
    toto kompiluje zdrojovy kod bez hlavicky do objektoveho souboru a slinkuje tento soubor s
    objektovym souborem algos.o a amiga.lib do spustitelneho souboru 'calc'.
<font color=#ff0000><pre>
  OPT OBJECT='hd2:objects/proggy.o',DEST='hd2:proggy'
</pre></font><br>
    toto vytvori objektovy soubor s nazvem 'hd2:objects/proggy.o' a potom bude vse slinkovano
    do souboru 'hd2:proggy'
</ul>
</body>
</html>
