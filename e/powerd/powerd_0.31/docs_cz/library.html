<h`tml>
<head>
  <title>PowerD.html - definice modulu pro sdilene knihovny</title>
  <meta http-equiv="Content-Type" content="text/html">
</head>
<body bgcolor=#ffffff>
<ul  type=square>
<li><big>popis:</big><br>
  sdilene knihovny se v AmigaOS/MorphOS pouzivaji velice casto, obsahuji
  spousty uzitecnych funkci, a samozrejme je lze pouzit i v PowerD.
<br><br>

<li><big>syntaxe:</big>
<font color=#ff0000><pre>
  LIBRARY &lt;libbase&gt;
    &lt;nazev&gt;( [ &lt;argumenty&gt; ] ) [ (&lt;vysledek&gt;) ] [ =&lt;offset&gt; ] [,...]
</pre></font>

<li><big>argumenty funkci:</big><br>
  kazdy argument zacina registrem (napr.: d0,d1,a0,a1,fp0,fp1,...), pak by mel nasledovat
  <a href="types.html">typ</a>. je take mozne pouzit typ 'LIST OF', ktere se pouziva pro inline seznamy.
  To samozrejme musi byt posledni argument, protoze muze obsahovat libovolny pocet polozek.
  (napr.: <font color=#ff0000>PrintF('\d*\d=\d\n',a,b,a*b)</font> kde a, b, a*b jsou takovymi polozkami)
<br><br>

<li><big>presnastavene hodnoty argumentu:</big><br>
  jestlize chcete prednastavit nejake hodnoty, jako je tomu u procedur, staci vlozit '=hodnota' za registr, kde
  hodnota je <a href="values.html">cislo</a> nebo <a href="const.html">konstanta</a>.
<br><br>

<li><big>navratove hodnoty:</big><br>
  vsechny funkce v AmigaOS knihovnach momentalne vraceji maximalne jednu hodnotu v D0
  (nektere matematicke funkce vraceji jednu hodnotu ve dvou registrech D0/D1 - 64 bitove hodnoty).
  v PowerD si lze vytvaret knihovny, ktere toto omezeni mit nemusi, pokud nebude definovana
  navratova hodnota, a vysledek funkce se bude muset nekam ulozit, bude automaticky pouzito D0:VOID.
<br><br>

<li><big>identifikace funkci:</big><br>
  funkce v knihovnach se urcuji podle tzv. offsetu (posunuti). tyto offsety standardne zacinaji na
  adrese -30, a jsou to nasobky 6, takze dalsi je pak -36, -42 atd... a tim jsou presne definovany
  funkce knihovny.
<br><br>

<li><big>ukazka:</big>
<font color=#ff0000><pre>
  LIBRARY DrawBase
    DrawPixel(a0:PTR TO RastPort,d0:WORD,d1:WORD),
    DrawLine(a0:PTR TO RastPort,d0:WORD,d1:WORD,d2:WORD,d3:WORD),
    ReadPixel(a0:PTR TO RastPort,d0:WORD,d1:WORD)(d0:WORD)=-48,
    VTextF(a0:PTR TO RastPort,d0:WORD,d1:WORD,a1:PTR TO UBYTE,a2=NIL:PTR TO LONG),
    TextF(a0:PTR TO RastPort,d0:WORD,d1:WORD,a1:PTR TO UBYTE,a2:LIST OF LONG)=-54
</pre></font>
</ul>
</body>
</html>
