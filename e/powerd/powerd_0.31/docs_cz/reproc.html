<html>
<head>
  <title>PowerD.html - definice REPROC</title>
  <meta http-equiv="Content-Type" content="text/html">
</head>
<body bgcolor=#ffffff>
<ul type=square>
<li><big>popis:</big><br>
  klicove slovo REPROC je podobne klicovemu slovu <a href="except.html">EXCEPT</a>. uvadi
  jiny kod dane procedury. tady ale podobnost konci. klicove slovo REPROC je nasledovano
  cislem/konstantou, ktera nesmi byt nulam protoze kod cislo nula je zekladni kod PROCedury.
  toto cislo muze byt vynechano, pri kazde definici je zvyseno o 1. pro volani dane casto
  kodu je potreba pouzit 'RETURN &lt;hodnoty&gt; FROM &lt;id&gt;' kde hodnoty jsou normalni
  navratove hodnoty (lze je vynechat) a id je cislo kodu v procedure definovane cislem,
  konstantou, nebo promennou, ktera obsahuje cislo kodu dane procedury, ktera se ma pouzit.
<br><br>

  <font color=#0000ff>tato vlastnost je teprve v pocatcich, a nemusi byt zcela bezpecna.</font>
<br><br>

<li><big>syntaxe:</big>
<font color=#ff0000><pre>
  RETURN [ &lt;list&gt; ] FROM &lt;id&gt;
</pre></font><br>
  kde <font color=#ff0000>&lt;list&gt;</font> seznam navratovych hodnot, jako u RETURN, ktere se
  vrati po ukonceni procedury. pred tim se ale jeste provede kod s oznacenim <font color=#ff0000>&lt;id&gt;</font>.

  <font color=#ff0000>DREPROC</font> identifikator, ktery vybira <font color=#ff0000>DREPROC</font> kod, jenz ma byt spusten
  pred ukoncenim procedury.
<font color=#ff0000><pre>
  DREPROC [ &lt;id&gt; ]
</pre></font><br>
  kde <font color=#ff0000>&lt;id&gt;</font> je <font color=#ff0000>DREPROC</font> identifikator.
<br><br>

<li><big>ukazka:</big><br>
  predstavte si: vase procedura provadi nejake operace, a pouziva nejaka klicova slova RETURN
  pro predcasne ukonceni procedury. nekdy staci samotne RETURN pro vraceni hodnot, nekdy je ale
  treba vratit tyto hodnoty, a jeste neco udelat, nez bude procedura ukoncena>

<font color=#ff0000><pre>
  PROC AllocScene()
    DEF scene:PTR TO LONG,err,n
    IF (scene:=AllocMem(4*SIZEOF_LONG,MEMF_PUBLIC|MEMF_CLEAR))=NIL THEN RETURN NIL,ERR_Mem
    LOOP n:=3
      IF (scene[n],err:=AllocObject())=NIL THEN REPROC NIL,err
    ENDLOOP
  DREPROC
    LOOP n:=3
      IF scene[n] THEN FreeObject(scene[n])
    ENDLOOP
  ENDPROC scene,ERR_None
</pre></font><br>
  tato procedura alokuje blok pameti pro scenu a vyplni ji ctyrmi objekty.
  pokud alokace sceny neuspeje, procedura vrati dve hodnoty NIL a ERR_Mem.
  pokud alokace objektu neuspeje, pak prichazi na radu <font color=#ff0000>DREPROC</font> kod,
  ktery bude spusten, takze vsechny objekty mohou byt uvolneny, a NIL a err (vracena z AllocObject()) hodnoty budou
  vraceny. Vim, ze toto muze byt pouzito stejne jako EXCEPT (vyjimky), ale tento zpusob umoznuje
  vic, nez jeden blok kodu pro spusteni.
</ul>
</body>
</html>
