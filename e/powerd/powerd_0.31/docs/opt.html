<html>
<head>
  <title>PowerD.html - OPTions</title>
  <meta http-equiv="Content-Type" content="text/html">
</head>
<body bgcolor=#ffffff>
  Options are in PowerD introduced by keyword 'OPT' or 'GOPT', it can be
  defined everywhere outside PROCedures.<br>
  OPT defines local source options. If You define this in a module and use
  this module, all of the options will be used only in the module, not in
  source where do You use the module via <a href="module.html">MODULE</a>
  keyword. Some of option keywords are always global since as local
  they are nonsensefull, all of these are signed with
  <font color=#0000ff>*</font>. If GOPT used, all options
  will be known as global and will be used everywhere.<br>
  If You use keywords like HEAD or NOHEAD, always the last one will be used.<br><br>
<ul type=square>
<li><big>HEAD/K<font color=#0000ff>*</font></big> (default: 'startup.o')<br>
    Sets startup #?.o file, this file should be located in 'd:lib' directory or it's name
    must begin with '*' charecter and full path of custom startup object file.
    This automaticaly switches NOHEAD swtich off.
    (example: OPT HEAD='*hd2:myheads/best.o')
<br><br>
<li><big>NOHEAD/S<font color=#0000ff>*</font></big> (default: head is enabled)<br>
    This switch disables adding linkable startup head.
    If You use this You must open all libraries and set all variables.
<br><br>
<li><big>LINK/K<font color=#0000ff>*</font></big> (default: no linkable file)<br>
    This allows You to define linking files in source code. By this way Yu can define all
    object (#?.o) and link-library (#?.lib) files. This keyword can be used more times, so
    You can define more linkable files.
    This automaticaly sets OBJECT output name to default.
    (example: OPT LINK='*hd1:lib/math040.lib',LINK='amiga.lib')
<br><br>
<li><big>OBJECT/K/S<font color=#0000ff>*</font></big> (default: '&lt;progname&gt;.o')<br>
    This sets output object file name. If You define only 'name.o' it will be located in
    current directory, if You define it with path (eg: 'hd0:objects/prog.o') it will
    locate output file in directory given with path.
<br><br>
<li><big>NOSTD/S<font color=#0000ff>*</font></big> (default: reads powerd.m module)<br>
    This switch disables reading of 'dmodules:lib/powerd.m' module. It means: if You
    enable this switch, You won't be able to use functions located in this module. I think
    removing this is only needed if You have another set of default functions for PowerD.
<br><br>
<li><big>DEST/K<font color=#0000ff>*</font></big> (default: '&lt;progname&gt;' without extension '.d')<br>
    This is the same as OBJECT/K keyword, it only allows You to set executable name after
    linking pass.
<br><br>
<li><big>PRIVATE/S</big> (default: only public data allowed)<br>
    This enables using of private data in the source.
<br><br>
<li><big>DPRE/S, CPRE/S, APRE/S, EPRE/S</big> (default: DPRE enabled)<br>
    These keywords sets precedence of signs/operators, default is DPRE.
    See <a href="equa.html">Equations</a> for more information.
<br><br>
<li><big>NOSOURCES/S</big> (default: writing of source with errors enabled)<br>
    This switch allows You to switch off writing of source code with errors.
<br><br>
<li><big>AMIGAE/S</big> (default: disabled)<br>
    This switch raises compatibility with AmigaE programming language:
<pre>      - object names and object item names are changed to lower case
      - EPRE switch is switched on
      - HANDLE keyword in PROC definition for exceptions allowed (it will be skipped)
      - EXCEPT DO changed to EXCEPTDO
      - EXIT keyword changed TO EXITIF
</pre>
<br><br>
<li><big>OSVERSION/N</big> (default: 0)<br>
    This sets minimal os version required, it is currently quite useless.
<br><br>
<li><big>CPU=MACHINE/K</big> (default: mc68020+mc68881)<br>
    This setups the assembler code generator. Known processors:
<pre>  MC68000, MC68010 - these are known, but unsupported
  MC68020, MC68030, MC68EC040, MC68LC040, MC68EC060, MC68LC060
                   - these will generate code without fpu instructions, see NOFPU
  MC68040, MC68060 - these will generate code with fpu instructions

  MC68881, MC68882 - these have to be used only with one of the above ones.
</pre><br>
    PowerD will recognize also sth like: 68030 or 030 as MC68030, lc060 as MC68LC060 etc.
    You can also use combinations like 020+881, or mc68ec040+882 etc.
    Pay attention that You enter sensesfull combination and 68000/68010 aren't supported!
    Currently there are no differencies between 020 and 030, 040 and 060 in code generator,
    these will be added in future.
<br><br>
<li><big>NOFPU/S</big> (default: fpu is enabled)<br>
    This switch allows You to use floating point computations without a mathematical
    coprocessor (FPU). This converts fpu instructions to non-fpu instructions and use
    mathieeedoubbas.library and mathieeedoubtrans.library. I added this only to be able to
    compile and try sources also on Amigas without fpu, the generated code is very slow,
    so use it only if there is no another way.
    Always the better way to use NOFPU is to use a module instead of the NOFPU keyword in
    the source. See <a href="nofpu.html">NOFPU</a> to get more information about it.

<font color=#0000ff>    PowerD non-fpu instruction converter is not done, so use it with care!!!!!</font>
<br><br>
<li><big>MODULE/K/S</big> (default: no binary module)<br>
    This option causes binary module production. If MODULE keyword is alone, then PowerD
    will generate module called '&lt;modname&gt;.b'. If MODULE='xxx.b' is used, then PowerD will
    generate module called 'xxx.b'.
    If You want use this option, then insert it to the first line of your source, or
    before all PowerD keywords, else the generated module will contain all constants, etc.
    from all used MODULEs.
    If You want to create your own binary module, see: <a href="bmodfmt.html">binary module</a>
<br><br>
<li><big>OPTIMIZE/N</big> (default: 0)<br>
    This set bits needed for optimizations:
<pre>
      - bit 0 - remove useless
        movem+movem to nothing (two inverse movems)
        move+tst to move
        bra x+bra y to bra x (bra y is unreachable)

      - bit 1 - muls/divs optimizations
        mul to lsl
        div to lsr

      - bit 2 - reduce instruction sizes
        movem to move
        move to moveq
        move to pea
        movea #0 to suba
        move #0 to clr
        add/sub to addq/subq
        add/sub to lea
        add/sub #0 to nothing
        cmp #0 to tst

      - bit 3 - remove twiced strings
        this simply removes all the same strings.
</pre><br>
    If only OPTIMIZE (without number) used, optimizations will be set to -1.<br><br>

    All optimizations will be enabled by -1 ($ffff.ffff) value.
<br><br>
<li><big>NOEXE/S</big> (default: try to generate executable)<br>
    This is useful, if You want to compile one or more functions to #?.o (object) file,
    it is ofcourse possible without this, but an linker error appear. In this way no.
<br><br>

<li><big>EXEICON/S</big> (default: icon creation disabled)<br>
    This tries to copy default executable icon from 'd:icons/def_exe.info'
    to be icon of Your &lt;proggy&gt;.info, if an icon is found, it won't
    be replaced, if 'd:icons/def_exe.info' doesn't exist, no message will
    appear. This keyword is used in <a href="setopt.html">WB</a>, so please
    use it instead of the EXEICON option if You don't know exactly what will
    it do.
<br><br>
</ul>
  and You can use your own <a href="setopt.html">OPTions</a>.
<hr>
<big>Examples:</big>
<font color=#ff0000><pre>
  OPT NOHEAD,LINK='algos.o',LINK='d:lib/amiga.lib',DEST='calc'
</pre></font><br>
    This compiles source without a head to #?.o file and link this #?.o file with algos.o
  and amiga.lib files into the 'calc' executable.
<font color=#ff0000><pre>
  OPT OBJECT='hd2:objects/proggy.o',DEST='hd2:proggy'
</pre></font><br>
    This will generate the object file into 'hd2:objects/proggy.o' and then it will be
  everything linked into 'hd2:proggy'
</ul>
</body>
</html>
