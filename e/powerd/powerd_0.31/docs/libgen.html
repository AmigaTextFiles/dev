<html>
<head>
  <title>PowerD.html - shared LIBRARY compilation</title>
  <meta http-equiv="Content-Type" content="text/html">
</head>
<body bgcolor=#ffffff>
<ul type=square>
<li><big>Introduction:</big><br>
  From 0.19 it's possible to generate Your own libraries in a simple way. Here I have to
  give my thanks to Marco Antoniazzi for his (pre 0.19) library example, that gave me all
  I have needed to make it working.
  <br><br>
  Such a library (currently) doesn't have -ANY- initializations, so You aren't able to use
  inside the functions anything without Your own initializations!!! Neither dos functions!
  <br><br>
  During the compilation, there will be automaticaly generated the ascii module and the fd
  file for Your library.
  <br><br>
  As in the example below, You have to (currently) use the 'IN reg' feature to correctly
  assign the arguments to it's registers.
  <br><br>
  Sorry for that small information, more will come in next releases!
<br><br>

<li><big>Syntax:</big>
<font color=#ff0000><pre>
  OPT LIBRARY &lt;'name.library'&gt;,&lt;version&gt;,&lt;revision&gt;,&lt;'version string'&gt;,&lt;base&gt;[:PTR TO &lt;libobj&gt;] IS
    &lt;first function name&gt; [,...]
</pre></font>

<li><big>Initializations:</big><br>
  There are few functions, that can make Your initializations much simplier:
<font color=#ff0000><pre>
  PROC customOpenLib(base:PTR TO LibGenBase)(LONG) IS TRUE
  PROC customCloseLib(base:PTR TO LibGenBase)(LONG) IS TRUE
  PROC customExpungeLib(base:PTR TO LibGenBase)(LONG) IS TRUE
  PROC customInitLib(base:PTR TO LibGenBase)(LONG) IS TRUE
</pre></font><br>
  These functions are defined automaticaly and You can replace them simply by writing
  Your own. The library must return TRUE, else it will be taken as opening library failure.
<br><br>

<li><big>Example:</big>
<font color=#ff0000><pre>
  OPT LIBRARY 'test.library',1,0,'test.library v1.0 by MarK',TSTBase IS
    tst_Sub,tst_Add

  PROC tst_Sub(a IN d0,b IN d1)(L) IS a-b
  PROC tst_Add(a IN d0,b IN d1)(L) IS a+b
</pre></font>
</ul>
</body>
</html>
