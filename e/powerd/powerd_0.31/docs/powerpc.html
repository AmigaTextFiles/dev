<html>
<head>
  <title>PowerD.html - PowerPC support</title>
  <meta http-equiv="Content-Type" content="text/html">
</head>
<body bgcolor=#ffffff>
<ul type=square>
<li><big>Important note:</big>(Jun-2000)<br>
  I still haven't my PowerPC Blizzard (now for eight months!). But in last
  months I learnt a lot about the ppc assembler so I started to support it
  nevertheless I haven't the hardware here yet. Here I have to thank a lot
  to <font color=#0000ff>Robert Kihl</font> for his patiency when I wanted
  him to test all my PowerPC stuff.
<br><br>
<li><big>Important note:</big>(Oct-2000)<br>
  I finally got my ppc blizzard :))) Now it's for about month I got it and
  lots of work is already done. Nevertheless this release has some limitations
  and not everything may work. If You found sth (probably yes), please report.
<br><br>
<li><big>Limitations:</big><br>
  Not all functions from powerd.lib are rewritten to ppc native assembly.
  Some functions I converted, some rewrote as D (not assembly) source and
  some aren't rewritten at all. Be sure I'm working on it and I'll release
  v1.0 what should have most such disadvantages and limitations removed.
  <br><br>
  There are several ((very) important) things, that currently doesn't work.
  These will be fixed sooner or later. But be sure, that You can write
  as normally for 68k, because the only difference is OPT PPC added on Your
  source, so if it now does work with 68k and doesn't with ppc, be sure it
  will in (near) future.<br><br>
  <ul type=disc>
  <li>watch included example (rtg.d) and compile it with OPT PPC enabled
    and disabled
    <ul type=disc>
    <li>I know that those 'screen contents' routine is slow as hell in 68k,
      this is because of non-optimized 68k code, it can be made much faster,
      but when You compile the same under powerpc, it's fast enough, here
      You can see the speed difference between 68k and ppc :)
    <li> There is also rtgppc.d example, which use powerpc native rtg functions,
      which doesn't require any context switches and it's also quite faster
      than the rtg.d compiled for powerpc.
    </ul>
  </ul>
<br><br>
<li><big>Requirements:</big>
  <ul type=disc>
  <li>To compile ppc sources:
    <ul>
    <li>pasm - powerpc assembler by Frank Wille, it might be found on Frank
      Wille's <a href="http://sun.hasenbraten.de/~frank/">homepage</a>.
    <li>vlink - powerpc/m68k object file linker also by Frank Wille.
    <li>rest is the same as for non-ppc programms
    </ul>
  <li>To run ppc programms:
    <ul>
    <li>some PowerPC equipped Amiga :) and powerpc.library v14+ It might work
      also under v7 of this library, but I haven't tested it.
    </ul>
  </ul>
<br><br>
<li><big>Future:</big>
  <ul type=disc>
  <li>Better support for mixed binary executables
  <li>PPC and 68k in one source!!!
  </ul>
<br><br>
<li><big>Usage:</big><br>
  You can simply add to Your source <font colour=#ff0000>OPT PPC</font> or
  compile the source with parameter cpu=603 (eg.: <font colour=#0000ff>dc
  test.d cpu=ppc</font>).<br>
  Pay attention that the 'OPT PPC' is placed before the first procedure,
  because initial code generator is 68xxx and it will try to compile that
  procedure as 68k code and it currently doesn't work.<br>
  (btw: the PPC keyword after OPT keyword is defined in dmodules:powerd/options.m
  module, so it isn't anything hardcoded ;)
</ul>
</body>
</html>
