@database appit_database

@node main "AMIGA-E Modules: appit_oo/Main"

                   ** APPIT_OO - Written By Fabio Rotondo **

                            ** DOCUMENTATION GUIDE **


    @{"  Introduction  " LINK appit_intro}       @{" Author's Infos " LINK author}         @{" Example Program " LINK example}


    COMMANDS                          BRIEF DESCRIPTION
    -----------------------------------------------------------------------
    @{" appit(numitems)               " LINK appit_appit} Initializes the appit object
    @{" add(menutxt, usertxt, tags=0) " LINK appit_add} Adds A Tool Item
    @{" error()                       " LINK appit_error} Returns the LAST error occurred
    @{" get()                         " LINK appit_get} Gets an appitem message
    @{" getport()                     " LINK appit_getport} Returns the AppItem MsgPort
    @{" signal()                      " LINK appit_signal} Return the AppItem SigBit


    @{"    ERROR TABLE   " LINK appit_errortable}

@endnode

@node appit_appit "AMIGA-E Modules: appit/appit()"

        NAME: appit(numitems)

 DESCRIPTION: Initializes the AppItem Object.

      INPUTS: numitems      - Number of maximum Items you wish to add.

     RESULTS: TRUE          - Everything was fine.
              FALSE         - An error occurred.

              If you wish, instead of checking for TRUE/FALSE sentences,
              you could also check the command @{" error() " LINK appit_error}

    SEE ALSO: @{" error() " LINK appit_error}

@endnode

@node appit_add "AMIGA-E Modules: appit/add()"

        NAME: add(menutxt:PTR TO CHAR, usertxt:PTR TO CHAR, tags=0)

 DESCRIPTION: This command adds an Item to the Tools menu.

      INPUTS: menutxt   - Text of the item inside Tools menu.
              usertxt   - User Text. (Hidden description of the item)
              tags      - (optional) Standard TAGs of AppItem.

     RESULTS: TRUE      - Everything works fine.
              FALSE     - An error occurred.

    SEE ALSO: @{" error() " LINK appit_error}
              includes:workbench/workbench.h

@endnode

@node appit_get "AMIGA-E Modules: appit/get()"

        NAME: get()

 DESCRIPTION: Parses the last AppItem Message arrived to the MessagePort.

      INPUTS: NONE.

     RESULTS: 0 To n    -   The ORDINAL number of the item the user selected.
              -1        -   An error occurred

    SEE ALSO: @{" add() " LINK appit_add}
              @{" error() " LINK appit_error}

@endnode

@node appit_error "AMIGA-E Modules: appit/error()"

        NAME: error()

 DESCRIPTION: Returns the LAST error encountered.

      INPUTS: NONE.

     RESULTS: 0          - No errors.
              ~0         - Error number.

    SEE ALSO: @{" ERROR TABLE " LINK appit_errortable}

@endnode

@node appit_getport "AMIGA-E Modules: appit/getport()"

        NAME: getport()

 DESCRIPTION: Returns the AppItem port.

      INPUTS: NONE.

     RESULTS: a PTR TO LONG - to the AppItem Message Port.

    SEE ALSO:

@endnode

@node appit_signal "AMIGA-E Modules: appit/signal()"

        NAME: signal()

 DESCRIPTION: Returns the AppItem's SigBit.

      INPUTS: NONE.

     RESULTS: a LONG containing the SigBit.

    SEE ALSO:

@endnode

@node appit_errortable "AMIGA-E Modules: appit/ERROR TABLE "

VAL         NAME                DESCRIPTION
----------------------------------------------------------------
0           NO_ERROR            No error.
1           AI_PORT             AppItem MsgPort was already init.
2           MSGPORT_CREATE      Failed to create MsgPort.
3           AI_ALREADY_INIT     AppItem Object Already Init.
4           AI_LIST_ALLOC       Failed to alloc AppItem List.
5           AI_NOT_INIT         You tried to access an AppItem function
                                without initialize the obj before.
6           AI_ADDAPPMENU_ERROR An error occurred doing an AddAppMenuItem()
7           AI_WBLIB            Could not open WB Library.

@endnode

@node author "Author's Infos"

    My name is Fabio Rotondo. I am a free-lance Amiga programmer and I would
    like to get in touch with anyone who writes code for the Amiga.
    I write in AmigaE, BlitzII, C and a bunch of other languages.

    Please, feel free to contact me for any suggestions/questions.

    My address is:

    Fabio Rotondo
    C.so Vercelli 9
    28100 Novara
    ITALY
    Tel. (ITA) - (0)321 - 459676
    e-mail: fabio.rotondo@intercom.it

    Thanks!
@endnode

@node example "AMIGA-E Modules: appitem/Example Program"
MODULE 'Fabio/appit_oo'     -> The MAGIC module!

PROC main()
  /*
  ** Please note: this is just a demo... the error handling routines
  ** should be extended to ALL add() functions.
  */

  DEF aitem:PTR TO appit    -> Here there is our object!
  DEF wbit

  NEW aitem.appit(3)        -> We init it to handle max 3 AppMenuItems!

  IF aitem.error() = 0      -> If the object was allocated with no errors
    IF aitem.add('Ciao Mamma', '')     -> Add the first item
      IF aitem.add('Zio Pino','')      -> Add the second one
        IF aitem.add('Giovanna','')    -> Add the third
          wbit:=aitem.signal()         -> Here we get the AppItem SigBit
          WriteF('Check the Tools Menu!\n')
          Wait(wbit)                   -> Waiting for the user...
          WriteF('Item:\d\n', aitem.get()) -> The user selected item no...
        ENDIF
      ENDIF
    ELSE
      WriteF('Add Item Error:\d\n', aitem.error()) -> Error handling.
    ENDIF
  ENDIF

  END aitem   -> REMEBER to END ALWAYS the object!!!

  CleanUp(0)  -> Let's keep things clean.
ENDPROC


@endnode

@node appit_intro "AMIGA-E Modules: appit/Introduction"

    INTRODUCTION

    appit_oo is a module which allows you to easily add AppMenuItem to your
    programs.

    During the initialization process you have to pass the maximum number of
    AppItem you wish to create. This is necessary because of memory allocation.
    So, for example, you wish to create three AppItems, you have to pass 3.

    To add one AppItem simply call the @{" add() " LINK appit_add} function.
    This function will automatically assing a ORDINAL value to the item you 
    are creating. The first item you create is number 0, the second #1, the
    third is #2 and so on...

    When you call the @{" get() " LINK appit_get} function you will receive the
    ORDINAL number of AppItem the user selected.

    So keep in mind this: every Item has a number starting from 0 to n.

    Remeber also to END the object before exiting your program.

    I hope you will have a nice time using this module.

                                        Fabio Rotondo.
@endnode
