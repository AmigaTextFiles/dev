@database exec/messages
@author Gregor Goldbach

@node main "Exec - Messages"
The message is the basis for inter-task communication. It uses @{" signals " link signals.guide/main}
and @{" lists " link lists.guide/main}/@{" nodes " link nodes.guide/main}, read those if you aren't fimiliar with them.

Another way of communication between tasks is the usage of messages. A message
can consist of any data you want, not just a number of a signal.

  @{" Description of exec/ports: mn " link Description}
  @{" Sending                       " link Sending}
  @{" Getting                       " link Getting}
  @{" Replying                      " link Replying}

NOTE: for full understanding you should read this together with the
@{" message ports.guide " link "message ports.guide/main"}. There is an example, too.

Gregor Goldbach January 24th 1995
@endnode

@node Description "Exec - Messages -- Description"
Look at the structure as defined in @{" exec/ports " rx "AEE:ARexxScripts/ShowModulePart.rexx EMODULES:exec/ports.m 18 22"}:


  ln:ln

  An exec node (a real node, not just a pointer), used to build a list of
  messages. Its type is set to NT_MESSAGE.

  replyport:PTR TO mp

  The address of the [message port] to reply to.

  length

  The length of the message.


That's all. After length the actual message follows, that's why you have to
put its lenght in the according slot - how should the receiver know how long
the message is if you don't tell him? :-)

replyport is where the receiver shall send his reply to. Explanation: when you
send the message you give the receiver the permission to read it. He may just
read it. But how can you know when he has finished reading and reacting on it?
Have a guess - he has to send you a message :-)  With this entry you tell him
where he shall send his reply.

The node is used for building a list. You can send many many many message to
a certain mailbox. If the receiver hasn't the time to read it at once a list
is built in chronoligical order. He may then take a message, read and react on
it, take the next and so on.

Gregor Goldbach January 24th 1995
@endnode

@node Sending "Exec - Messages -- Sending a message"
A message can be sent by calling this function:

  PutMsg(port:PTR TO mp, message:PTR TO mn)

The message is sent to the port and put in the list of received messages.

Gregor Goldbach January 24th 1995
@endnode

@node Getting "Exec - Messages -- Getting a message"
To get a message from an exiting port call

  message:PTR TO mn := GetMsg(port:PTR TO mp)

You will get the address of a message or NIL, if no message was in the list of
the port.

Gregor Goldbach January 24th 1995
@endnode

@node Replying "Exec - Messages -- Replying to a message"
To send a message back to the one it sent it to you call

  ReplyMsg(message:PTR TO mn)

NOTE: If the replyport entry was empty, this function does nothing.

Gregor Goldbach January 24th 1995
@endnode
