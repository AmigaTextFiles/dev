@database StackSnoop
@$VER: StackSnoop.guide 1.5 (1.11.98) © 1998 by Nils Görs <N.Goers@Art-Line.de>

@node main "StackSnoop Manual"
@next main

			       StackSnoop 1.5

		       A system-conform stack monitor


I.	@{" Overview " link Overview}			What is StackSnoop?

II.	@{" Copyright and Warranty " link Copyright}	You should have a look here, too.

III.    @{" Register " link Register}			It's for FREE!!

IV.	@{" Requirements " link Requirements}			You need the following...         

V.	@{" Installation " link Installation}			It's very, very easy.

VI.	@{" Arguments/ToolTypes " link ToolTypes}		How to start StackSnoop.

VII.	@{" Usage " link Use}				How to use StackSnoop.

VIII.	@{" Thanks " link Thanks}			Whom I want to thank.

IX.	@{" History " link History 999}			What is new?

X.	@{" Bugs " link Bugs}				Bugs, what the hell?

XI.	@{" Future plans " link Future}			MUI?


        Nils Görs
        Kaiserstr.97a
        42329 Wuppertal

        Germany

EMail:  N.Goers\@Art-Line.de


StackSnoop is MAILWARE and copyrighted © 1998 by Nils Görs.
No commercial use without perimission of the author. Read the @{"copyright" link Copyright} !
@endnode

@node Overview
@prev Overview
@next Overview

@{FG Highlight}What is StackSnoop@{FG Text}
------------------

StackSnoop is a program to help programmers and other currious users.  Amiga
programs  store  temporary  informations like addresses, data etc.  in their
own  stack  area.   The  default stacksize is 4096 bytes but this may not be
enough, some programs requires over 100kb.

StackSnoop  watches the stack of a task/process that you select.  If you set
your  stack up to a huge number, you will probably be safe, but you are also
wasting  a  lot  of  memory.   What  is  needed,  is  a  good  way  to tell,
dynamically,  how  any  program  is  doing.   You may then tailor your stack
allocations to be more efficient.

The  stack  size  for  a  shell  is  set by the stack command.  All programs
started  from  this  shell are using this stack size, too.  Programs started
from  Workbench  the  stack  size  is  given in the icon.  Use the Workbench
Information option to examine this value.


I  made  StackSnoop  because  my  favorite stack monitor, StackMon, has some
disadvantages  like the topaz/8 GUI, unsizeable window, no keyboard handling
and StackMon even forces some enforcer hits on my A3000 too.
@endnode

@node Copyright
@next Copyright
@prev Copyright

@{FG Highlight}Copyright@{FG Text}
---------

This License applies to the computer programs known as "StackSnoop".
The "Program", below, refers to such program.


The programs and files in this distribution are freely distributable
under the restrictions stated below, but are also Copyright (c) Nils Görs.


Distribution of the Program by a commercial organization without written
permission from the author to any third party is prohibited if any payment
is made in connection with such distribution, whether directly
(as in payment for a copy of the Program) or indirectly (as in payment
for some service related to the Program, or payment for some product
or service that includes a copy of the Program "without charge";
these are only examples, and not an exhaustive enumeration of prohibited
activities). However, the following methods of distribution involving
payment shall not in and of themselves be a violation of this restriction:


(i) Posting the Program on a public access information storage and
retrieval service for which a fee is received for retrieving information
(such as an on-line service), provided that the fee is not
content-dependent (i.e., the fee would be the same for retrieving the same
volume of information consisting of random data).


(ii) Distributing the Program on a CD-ROM, provided that the files
containing the Program are reproduced entirely and verbatim on such
CD-ROM, and provided further that all information on such CD-ROM be
redistributable for non-commercial purposes without charge.


Everything in this distribution must be kept together, in original
and unmodified form.


THE PROGRAM IS PROVIDED TO YOU "AS IS," WITHOUT WARRANTY. THERE IS NO
WARRANTY FOR THE PROGRAM, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
PARTICULAR PURPOSE AND NONINFRINGEMENT OF THIRD PARTY RIGHTS. THE ENTIRE
RISK AS TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU. SHOULD
THE PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY
SERVICING, REPAIR OR CORRECTION.


IF YOU DO NOT ACCEPT THIS LICENCE, YOU MUST DELETE ALL FILES CONTAINED IN
THIS ARCHIVE.


I would be very happy if you send me a keyfile or a registered copy from your
Software you tested StackSnoop with.
@endnode

@node Register
@prev Register
@next Register

@{FG Highlight}Register@{FG Text}
--------

I got more feedback as i expected especially from non-german human
beings, thanks a lot. I'm also surprised from the Hardware you are
using, no 68000 Users left ;-)


                     The registration is totally FREE.


Please fill out the following questionnare:

  I received StackSnoop from : ______________________________________

  Name               : _______________________________________________

  City, Country      : _______________________________________________

  E-Mail             : _______________________________________________

  Computer  : __________ Kickstart : __________ Processor : __________

  Memory (Chip/Fast): _____/_____ Graphics Card : ____________________

  other equipment   : ________________________________________________

                      ________________________________________________

    Comment    _______________________________________________________
      and
  Suggestions: _______________________________________________________
   (please)
               _______________________________________________________

               _______________________________________________________

               _______________________________________________________


As  you  can  see  i don't want your full address nor your telephone-number.
I'm only interested in to see, how StackSnoop was spread ;-)

Thanks in advance.
@endnode

@node Requirements
@prev Requirements
@next Requirements

@{FG Highlight}Requirements@{FG Text}
------------

· StackSnoop needs OS2.04 (v37) and higher to run.
· StackSnoop uses the @{"triton.library" link triton/readme/MAIN} (C) by Stefan Zeiger <s.zeiger\@laren.rhein-main.de>


   Please don't send me mails asking to send triton.
   You'll find the complete triton archiv on Aminet: dev/gui/opentriton-usr.lha

Triton GUI creation system (C) by Stefan Zeiger <s.zeiger\@laren.rhein-main.de>
@endnode

@node Installation
@prev Installation
@next Installation

@{FG Highlight}Installation@{FG Text}
------------

No  special installation is required, simply copy StackSnoop and the icon to
any directory you like.

Please  notice  that  StackSnoop needs triton.library v6 or higher.  Use the
triton @{"installer" system "execute install"} script if you have an older triton version. (version will be checked)
@endnode

@node Tooltypes
@prev Tooltypes
@next Tooltypes

@{FG Highlight}Arguments/ToolTypes@{FG Text}
-------------------

TASK		= Task you would like to monitor.

PUBSCREEN	= publicscreen you would like to open StackSnoop on.

REFRESH		= refrash rate. Do not use a very large or a very small
		  number. Rates between 5-50 are recommendable. I won't
		  test your digits, so be careful.
		  Default: 15

SMALL		= Opens StackSnoop with the small window.

NOPATTERN	= the unused area of the stack will not be filled with a pattern.
		  ADVANTAGES (for stack filling!)
		   - The real maximum stack usage will be determines and not
		     the maximum value of multiple measurements. Therefore even
		     small peaks of stack usage will be noticed. (A "small peak"
		     means a stack usage with a duration of only a few CPU cycles)
		   - Stack usage will be noticed even when multitasking is turned
		     off by the program which is beeing checked.

If you like to start StackSnoop iconified you should use one of the
following tooltypes:

APPICON		= Adds the current StackSnoop icon to your Workbench.
		  This option is only available if you start StackSnoop
		  from Workbench.

APPMENU		= Adds a StackSnoop menuitem to workbench's list of
		  appmenuitems. This is available from shell/workbench.

You can run StackSnoop either from Workbench or Shell.
@endnode

@node Use
@prev Use
@next Use

@{FG Highlight}Usage@{FG Text}
-----

If  you  start  StackSnoop it presents a list of all the tasks and processes
currently installed.  Additional information displayed are:

The loaded command name is enclosed in @{FG Highlight}[]@{FG Text}.  This will be happend if the task
is a CLI/SHELL command.
The  process number (only DOS processes started from CLI/SHELL) are enclosed
in @{FG Highlight}<>@{FG Text}. Example:

		{...}
		Background CLI @{FG Highlight}[@{FG Text}C:rtpospatch@{FG Highlight}]@{FG Text} @{FG Highlight}<@{FG Text}3@{FG Highlight}>@{FG Text}
		Background CLI @{FG Highlight}[@{FG Text}DiskSafe@{FG Highlight}]@{FG Text} @{FG Highlight}<@{FG Text}5@{FG Highlight}>@{FG Text}
		{...}

This list is not updated automatically, as constructing this list requires
suspension of multitasking. If you run a program you want to monitor after
starting StackSnoop, click on the 'Update' gadget so that it appears in the
list.

Click  on  the  program  you  wish  to  monitor  and  StackSnoop  will begin
monitoring.   The  display  consists of numbers and a fuel gauge showing the
current stack use relative to the size of the stack.  The numbers are:

@{FG Highlight}Current@{FG Text}          : This is the amount of stack in use at present time.

@{FG Highlight}Largest@{FG Text}          : The largest recorded stack for the current task/process.

@{FG Highlight}Allocated@{FG Text}        : The stack allocated for this program.


If the program terminates while being monitored, monitoring ceases, the
message  'Task removed'  appears  in  the  window and the tasklist will be
updated automatically now. To change from monitoring one program to another,
simply click on the other program's name in the list.

The task state indicates what a task is currently doing. The state can be:

	INVALID		- ???
	ADDED		- a newly created task ;-)
	RUNNING		- a task that has the processor (only one possible!).
	READY		- a task that lost the processor and requests it again.
	WAITING		- a task waiting for an event (better: for signal(s)).
	EXCEPTION	- a task exception (not processor exception!) has happened.
	REMOVED		- a task that has ended.

	UNKNOWN		- none of the above state (this is not system state!).

Usually you will only see tasks that are in a running (always StackSnoop!), a ready
or a waiting state. If a task is permanent in a ready state, this indicates that
the task is either heavily working or it makes "busy waiting" (very bad programming
habit).

Impossible stack sizes (eg. negative) are replaced by '???'. Please notice,
the "Save stack..." option tries to save the stack anyway.

If the program exceeds its allowed stack, the message 'Stack Overflow'
will appear. Note that this behaviour by a program will make the system
very unstable and a crash is probably imminent. I recommend you to save all
necessary and important datas @{FG highlight}as soon as @{FG Text}possible.

When setting the stack for a program, always leave at least ~2Kb extra space,
since DOS can also use this stack and future versions of DOS may use more
stack.

For some situations it's better to 'Reset' the largest stack size. If you
start a program  from a shell process the stack size and stack usage from
the new started program could be higher than the "shell process" stack.
This  could  confuse  if  you  quit the program started from the shell.  The
largest  Stack  could  now higher than the shell stack size.  Then press the
'Reset' button and everything looks fine again. If you disabled the
@{"NOPATTERN" link ToolTypes} ToolType, the Stack will be filled with the
$BEBE pattern, too.

Since v1.5 it's possible to intercept a task by it's Taskname. You simply have
to type the Taskname in the StingGadget. Now StackSnoop is looking for the
given Taskname (30 Times x Refreshrate!), and if StackSnoop finds a program
with the given name, the program will be monitored immediately!

@endnode

@node Thanks
@prev Thanks
@next Thanks

@{FG Highlight}Thanks@{FG Text}
------

Jörg Strohmayer 	- for lots of hints, tips and beta-testing. Without your
			  help this tool wouldn't be so good.

Thomas Richter		- For your great idea with the "magic-cookie", bug reports,
			  beta-testings and for the hints.

Rudolph Riedel		- for the work you are doing with DiskMasterII, for
			  beta-testings and for new ideas.

Kenneth "Kenny" Nilsen	- beta-testings and for the qsort routines. But i wrote
			  my own bubble-sort routine, thanks anyway ;-)

Oliver Blumert		- for ideas and beta-testings.

to my beta-testers	- Sebastian Bauer, Raphael Pilarczyk, Jan Ritzerfeld

Patrick Peters		- for the Icons.

David Kinder    	- for StackMon and parts of the documentation.

Werner Günther
& Gunther Nikl		- for parts of the XOper documentation.

and to all people who sent me an email.
@endnode

@node Bugs
@next Bugs
@prev Bugs

@{FG Highlight}Bugs@{FG Text}
----

We,  the  beta-tester and myself, did not find any bugs in this product.  We
tested  StackSnoop  under  several  circumstances with Mungwall, Segtracker,
Enforcer  and  StackMon.   But anyway i can not @{"guarantee" link Copyright 9999} that StackSnoop is
really bug  free.   If  you  find  a  bug,  please  let  @{"me" link Address} know.


- Richard S. Wheeldon reported a bug that occurs while monitoring newicons v38.5.

* I downloaded newicons from aminet but my StackSnoops results are not faulty.
  If you have the same problems like Richard please leave @{"me" link Address} a mail with
  your configuration.

+ Eric Sauvageau told me the following about Richards report:
  This is a problem with any program being written in E: stack monitoring
  won't work for these because (I think, it's been some time since the E author
  told me the exact explanation) E allocates its own internal stack, and doesn't
  set the Task/Process struct pointers to point to that stack.
  E programmers who want to avoid this can use a small E module called 'fakestack',
  which allows them to change the Task struct's stack pointer to point to the real
  stack.  I used this module for SysInspector, but not for NewIcons as I wanted
  to avoid adding unnecessary code to the exe.

* fakestack.lha      dev/e        1K  90+Tells the system where AmigaE stack is.


Now you can fix a bug in @{"console.device" link ConsoleFix/ConsoleFix.readme/MAIN}.
@endnode

@node Address
@next Address
@prev Address

smail:
        Nils Görs
        Kaiserstr.97a
        42329 Wuppertal

        Germany

EMail:  N.Goers\@Art-Line.de (prefered!)
WWW  :  http://www.art-line.de/users/N.Goers/ (someday!)
@endnode

@node History
@next History
@prev History

@{FG Highlight}History@{FG Text}
-------

V1.0		- initial release.

V1.1		- save task information added.
		- save stack contents added.
		- Iconify added.
		- ToolTypes @{"APPICON" link ToolTypes} and @{"APPMENU" link ToolTypes} added.
		- Windows are fully (also horizontal!) sizeable now.
		- Percent display added.

V1.2		- illegal Stack sizes will be ignored from the progress indicator
		  and from the percent display (requested by Dale Frameli)
		- StackOverflow message will be displayed until you change the task/process.
		- ASL requester worked only if it was patch to reqtools. (reported by Jörg Strohmayer)
                - Error messages included (requested by Michael Ulbrich)

V1.3		- messed up the window-display to work correct with
		  an proportional-font (reported by Hans Ponsen)
		- task removed-recognizeation reworked (requested by Raphael Pilarczyk)
		- Change Window added (until now it was a secret function, but nobody missed it ;).
		- PUBSCREEN/K Template changed to P=PUBSCREEN/K
		- Enforcer-Hit removed.

V1.4		- The stack will be checked in a more convincing (correct!) manner, now.
		  @{"NOPATTERN/K" link ToolTypes} (Idea by Thomas Richter)
		- The selected listview entry will be shown after changing from
		  small to large window (reported by Thomas Richter)
		- Now all Shell-arguments have an one char equivilent.
		- Bug in saving routine removed.
		- serial number removed for good.

V1.5		- Refresh-Menu (Idea by Oliver Blumert)
		- @{"Interception-Mode" link use 9999} (Idea by Oliver Blumert)
		- @{"Console-Fix" link ConsoleFix/ConsoleFix.readme/MAIN} included to Archiv.
@endnode

@node Future
@next Future
@prev Future

@{FG Highlight}Future@{FG Text}
------

Any ideas???

During the  work  on StackSnoop, Jörg had a very good idea for a new program
that should snoop all existing stack memory to make the system more safe.

(*) most people who wrote me don't want an MUI version, why? ;-)
@endnode
