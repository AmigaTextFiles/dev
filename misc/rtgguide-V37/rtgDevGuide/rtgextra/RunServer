@database RunServer
@node main "RunServer"
@toc main

   NAME
        RunServer -- Handle all the messaging for a server and several clients

   SYNOPSIS
        New_Socket = RunServer(SBase,Socket,in_buffer,out_buffer,maxplayers)
         D0                     A0    A1     A2        A3         D0

        struct RTG_Socket *RunServer(struct Library *,struct RTG_Socket *,struct RTG_Buff *,struct RTG_Buff *,int)

   FUNCTION
        You will have to run this fine
        function in a loop. Every time it returns, it gives you the Socket of a new connected
        client or 0, if no new Client connected. Also, in  in_buffer, you will have all new
        messages sent from  already connected Clients to the server, and all messages you filled
        in in out_buffer before calling this function, will be sent to the Clients.
        If nothing happened, this function returns at once, with consuming nearly no CPU time.

        You SHOULD initialize the in_buffer.num values with -1 EACH TIME, before
        RunServer is run, and the out_buffer.num values once before the FIRST TIME
        RunServer is called !!!

        NOTE: If you (later...) use RunServer, the Server can't handle a Player. You need
        ONE CLIENT PER PLAYER AND AN ADDITIONAL SERVER WITHOUT A PLAYER. The Server can run
        on a system, where a Client is also running, though (should be the fastest system in
        the connection, probably, as it will have to do all that messaging to the Client ...)

        NOTE: It might appear strange to you, that you have to open bsdsocket.library
        yourselves and provide it as parameter. This is needed because of some internal
        problems of AmiTCP, that make it IMPOSSIBLE opening it inside a library. Look
        at the Docs for more information.

        You do NOT have to use rtgmaster.library's Graphics Board features to
        use rtgmaster.library's TCP/IP features, if you do not WANT to...

        NOTE: It is NOT possible to give Socket->s (the Socket Number) of a Client
        to the Server using RtgRecv or RunServer !!! You will have to examine
        inbuffer->num[x] to find out which Socket was the Sender !!! Also len
        should NEVER be bigger than the actual message, or you might get a lot
        of strange results !!!

        Actually this function is now inside rtgextra.library.


   INPUTS
        SBase      - Result of the call (C Syntax here...)
                     SBase = OpenLibrary("bsdsocket.library",0);
        Socket     - The Socket of THIS application (the Server...)
        in_buffer  - messages that arrived during the call of RunServer
        out_buffer - messages that Run_Server should deliver
        maxplayers - The Maximum of Clients allowed (CAN'T BE BIGGER THAN 12 !!!)

   RESULTS
        New_Socket - The Socket of a newly connected Client. Save it somewhere...

   SEE ALSO
        @{" OpenClient " link "rtgextra/OpenClient/Main"}
        @{" OpenServer " link "rtgextra/OpenServer/Main"}
        @{" CloseClient " link "rtgextra/CloseClient/Main"}
        @{" CloseServer " link "rtgextra/CloseServer/Main"}
        @{" RtgSend " link "rtgextra/RtgSend/Main"}
        @{" RtgRecv " link "rtgextra/RtgRecv/Main"}
        @{" RtgAccept " link "rtgextra/RtgAccept/Main"}
        @{" RtgIoctl " link "rtgextra/RtgIoctl/Main"}
        @{" GetUDPName " link "rtgextra/GetUDPName/Main"}
        @{" RtgInAdr " link "rtgextra/RtgInAdr/Main"}

@endnode
                                
