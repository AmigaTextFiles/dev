@database RtgRecv
@node main "RtgRecv"
@toc main

   NAME
        RtgRecv - The Socket of this application receives data from a connected socket

   SYNOPSIS
        length = RtgRecv(SBase,Socket,message,sender,len)
         D0               A0    A1     A2      A3     D0

        int RtgRecv(struct Library *,struct RTG_Socket *,struct char *,struct sockaddr_in *,int)

   FUNCTION
        This function is no longer compatible to rtgmaster.library V6 and below !!!

        This function gets data to the application that is sent to its socket by a socket
        that is connected to the socket of the Application (it is not that difficult to
        understand like it sounds... read the docs :) )

        If the "virtual connection" (or the "connectionless connection" or what this is called
        for UDP... :) ) is "blocking", it WAITS, if there is no message available
        on the socket, till one is available. If it is "non-blocking", it returns -1, if no
        message is available (see RtgIoctl for more details about "blocking" and "Non-Blocking".
        The default is "Blocking", BTW...)

        Sender is a special structure that you can use to find out from what IP Address
        the message was sent. You can convert it to an IP Address using RtgInAdr. This
        only works with UDP (with TCP, you differentiate Clients from each other with the
        socket number...). Appearently, you CAN'T differentiate Clients that run on the
        same machine !!! Sender is NOT allocated by the function, you have to provide
        the structure...

        For TCP you simple provide a 0 for Sender. It will be ignored.

        You can use this feature to do multiple connection without using RunServer (that
        does not support UDP up to now anyways...).

        NOTE: For *TCP* you provide the Socket of the Application which you want to
        contact. For *UDP* you provide your OWN'S Socket. Important difference !!!

        NOTE: It might appear strange to you, that you have to open bsdsocket.library
        yourselves and provide it as parameter. This is needed because of some internal
        problems of AmiTCP, that make it IMPOSSIBLE opening it inside a library. Look
        at the Docs for more information.

        You do NOT have to use rtgmaster.library's Graphics Board features to
        use rtgmaster.library's TCP/IP features, if you do not WANT to...

        NOTE: It is NOT possible to give Socket->s (the Socket Number) of a Client
        to the Server using RtgRecv or RunServer !!! You will have to examine
        inbuffer->num[x] to find out which Socket was the Sender !!! Also len
        should NEVER be bigger than the actual message, or you might get a lot
        of strange results !!!

        Actually this function is now inside rtgextra.library.

   INPUTS
        SBase    - Result of the call (C Syntax here...)
                   SBase = OpenLibrary("bsdsocket.library",0);
        Socket   - The Socket of THIS application
        message  - The buffer, to which supplied messages will be put
        Sender   - The Function will fill in data about the Sender to this structure.
        len      - The length of the message to wait for

   RESULTS
        length   - The length of the message received. If it is smaller
                   than the message, you waited for, do a RtgRecv once more...
                   NOTE: If a message was received that is too long to fit to
                   the buffer, some Bytes might be discarded. So you should
                   not send more Bytes than you want to receive... use a standard
                   Package Size at best...
    SEE ALSO
        @{" OpenClient " link "rtgextra/OpenClient/Main"}
        @{" OpenServer " link "rtgextra/OpenServer/Main"}
        @{" CloseClient " link "rtgextra/CloseClient/Main"}
        @{" CloseServer " link "rtgextra/CloseServer/Main"}
        @{" RunServer " link "rtgextra/RunServer/Main"}
        @{" RtgSend " link "rtgextra/RtgSend/Main"}
        @{" RtgAccept " link "rtgextra/RtgAccept/Main"}
        @{" RtgIoctl " link "rtgextra/RtgIoctl/Main"}
        @{" GetUDPName " link "rtgextra/GetUDPName/Main"}
        @{" RtgInAdr " link "rtgextra/RtgInAdr/Main"}

@endnode
                                       
