@database RtgSend
@node main "RtgSend"
@toc main

   NAME
        RtgSend - The Socket of this application sends data to a connected socket

   SYNOPSIS
        length = RtgSend(SBase,Socket,message,Receiver,len)
         D0               A0    A1     A2      A3       D0

        int RtgSend(struct Library *,struct RTG_Socket *,struct char *,struct sockaddr_in *,int)

   FUNCTION
        This function is no longer compatible to rtgmaster.library V6 and below !!!

        This function puts data from the application to the socket of an application
        that is connected to the socket of the Application (it is not that difficult to
        understand like it sounds... read the docs :) )

        If the "virtual connection" (well, this term does not fit for UDP, as it is
        connectionless, but i do not know how to call it else... :) ) is "blocking", it WAITS, if there is no message available
        on the socket, till one is available. If it is "non-blocking", it returns -1, if no
        message is available (see RtgIoctl for more details about "blocking" and "Non-Blocking".
        The default is "Blocking", BTW...)

        Receiver is a special structure that you can use to tell the receiver your IP Address.
        You get your IP Address with GetUDPName (works only for UDP... for TCP this returns
        0...). For TCP you provide simply 0 for Receiver, it will be ignored.
        You can convert it to an IP Address using RtgInAdr. This
        only works with UDP (with TCP, you differentiate Clients from each other with the
        socket number...). Appearently, you CAN'T differentiate Clients that run on the
        same machine !!!

        You can use this feature to do multiple connection without using RunServer (that
        does not support UDP up to now anyways...).

        NOTE: For *TCP* you provide the Socket of the Application which you want to
        contact. For *UDP* you provide your OWN'S Socket. Important difference !!!

        NOTE: It might appear strange to you, that you have to open bsdsocket.library
        yourselves and provide it as parameter. This is needed because of some internal
        problems of AmiTCP, that make it IMPOSSIBLE opening it inside a library. Look
        at the Docs for more information.

        You do NOT have to use rtgmaster.library's Graphics Board features to
        use rtgmaster.library's TCP/IP features, if you do not WANT to...

        NOTE: It is NOT possible to give Socket->s (the Socket Number) of a Client
        to the Server using RtgRecv or RunServer !!! You will have to examine
        inbuffer->num[x] to find out which Socket was the Sender !!! Also len
        should NEVER be bigger than the actual message, or you might get a lot
        of strange results !!!

        Actually this function is now inside rtgextra.library.

   INPUTS
        SBase    - Result of the call (C Syntax here...)
                   SBase = OpenLibrary("bsdsocket.library",0);
        Socket   - The Socket of THIS application
        message  - The message to be sent (an ASCII string, actually...)
        Receiver - The data you got from GetUDPName, tells the receiver your IP address...
        len      - The length of the string to send ...

   RESULTS
        length   - The length of the message sent. If it is smaller
                   than the message, you sent, do a RtgSend once more...
                   Probably the socket you sent to was quite busy with other
                   messages currently...

                   NOTE: If the send fails at all, maybe your message was too
                   long for TCP/IP ? (As to the allowed package sizes, 1 KB works
                   for sure... i do not know exactly how much more is possible...)

    SEE ALSO
        @{" OpenClient " link "rtgextra/OpenClient/Main"}
        @{" OpenServer " link "rtgextra/OpenServer/Main"}
        @{" CloseClient " link "rtgextra/CloseClient/Main"}
        @{" CloseServer " link "rtgextra/CloseServer/Main"}
        @{" RunServer " link "rtgextra/RunServer/Main"}
        @{" RtgRecv " link "rtgextra/RtgRecv/Main"}
        @{" RtgAccept " link "rtgextra/RtgAccept/Main"}
        @{" RtgIoctl " link "rtgextra/RtgIoctl/Main"}
        @{" GetUDPName " link "rtgextra/GetUDPName/Main"}
        @{" RtgInAdr " link "rtgextra/RtgInAdr/Main"}

@endnode
                                       
