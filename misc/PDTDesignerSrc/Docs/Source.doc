Source.doc                                                (C)1994 P.D.Turner.

If you havn't read the ReadMe.doc in this drawer do it NOW!


This file contains info about all the files and the routines they contain.

First, many things are refered to as Map Designer, this was the development
name for "The Designer".


Some things are called a different name to what you may be used to.  All the
definitions etc are in the file MapDesigner2.i.  But the ones used in this
file are described below...

CTile is the current tile.  MTile is maximaum allowable tile number.
FMG and MiniMap are the "Fast-Mover" gadget.


Assembling
----------
The code was written with HiSofts excellent Devpac2.  If you use some other
assembler you may have to fiddle around a bit to get it to work.

You will need the Commodore include files to assemble the source on this
disk.  You should have got these with your assembler, if not you should
contact Commodore.

You will also need a BLink.  This shouldn't be a problem.


The easiest way to assemble "The Designer", and the way I usally do it is as
follows...

From a CLI window type:   make MapDesignerV2.0:MapDesigner

You will need to copy the "make" command to your C: directory.


The Files
---------
The following is a list of all The Designer source files, along with a brief
description.

Control.asm             - Main control and setup functions.
Project.asm             - Project menu functions.
Tiles.asm               - Tile menu functions.
Map.asm                 - Map menu functions.
Blocks.asm              - Blocks menu functions.
Prefs.asm               - Prefs menu functions.
Dialogue.asm            - All text strings and dialogue box routines.
InputTables.asm         - Lookup tables for input handling routines.
MenuDefs.asm            - Menu structures.
LoadILBM.asm            - IFF ILBM load module.
SaveILBM.asm            - IFF ILBM save module.
FileRequester.asm       - File requester module.
PaletteRequester.asm    - Palette requester module.
apack.asm               - Creative focus' ILBM packer.
Startup.asm             - (C)1998 Commodore-Amiga, Inc.  Not included here.
			  (Get Rom Kernel Manuals for source code).
MakeIcon.asm            - Routine to make the WBench icon for "The Designer".


Routine Dictionary
------------------
The following is a dictionary of all the routines that make up The Designer.
Exceptions are the code not written by me, and the seperate IFF and Requester
modules.

You might want to print this out.


Routine                 File            Description
-----------------------------------------------------------------------------
About                   Project.asm     Handles input function.
AllocPlanes             Project.asm     Allocate planes for a BitMap.
AllocateTilesPort       Project.asm     Allocate a VPort for tiles in a map.
BeginInput              Control.asm     Puts The Designer into "Busy" state.
BlitCTile               Control.asm     Displays current tile in status area.
BlockCleanup            Control.asm     De-allocates any block memory.
BuildBlock              Blocks.asm      Build tile block.
BuildNewMap             Map.asm         Makes new map after size change.
ChangeIcon              Prefs.asm       Change state of "Icon" flag.
ChangeIncTiles          Prefs.asm       Change state of "IncTiles" flag.
ChangePaint             Prefs.asm       Change state of "Paint" flag.
ChangePalette           Prefs.asm       Ctrl routine for palette requester.
CheckBounds             Tiles.asm       Check table of numbers against MTile.
CheckDirect             Control.asm     Handles comands which exit quickly.
CheckInput              Control.asm     Activates window under mouse.
CheckPos                Tiles.asm       Is editing window at a valid pos?
CheckSaved              Tiles.asm       Ask user if they're sure.
CheckSavedReq           Tiles.asm       Handles requester for above.
CheckTileRefs           Tiles.asm       Check map & block tile numbers.
CleanupConsole          Control.asm     Close console device.
ClearMap                Map.asm         Clear map to CTile.
ClearPort               Control.asm     Reply to all messages at a port.
ClearText               Control.asm     Print spaces at pos in status area.
CloseMapScreen          Control.asm     Close editing window.
CloseWindowSafely       Control.asm     Based on CMB routine in RKM.
DialogueBox             Dialogue.asm    Handles nice dialogue window.
DiscardMap              Map.asm         Handles input function.
DisplayCursorPosition   Control.asm     Draws cursor & prints pos text.
DisplayStatus           Control.asm     Updates whole of status area.
DisplayMapStatus        Control.asm     Upadtes map status.
DisplayTilesStatus      Control.asm     Updates tiles status.
DivideRaster            Tiles.asm       Divides tiles screen into squares.
DrawCursor              Control.asm     Draw cursor in editing window.
DrawMapSection          Control.asm     Draw current map section.
DrawTleCursor           Blocks.asm      Draws cursor in tiles screen for blk.
EnableMenus             Control.asm     Enable inputs for data loaded.
EndInput                Control.asm     Take designer out of "Busy" state.
EndPaint                Prefs.asm       Take designer out of paint mode.
EraseBlock              Blocks.asm      Handles input function.
ExtendMap               Map.asm         Handles map extensions.
ExtractData             Control.asm     Makes a copy of a message structure.
FilledBox               Blocks.asm      Handles input function.
FreeData                Control.asm     Cleanup Tiles, map and block data.
FreePlanes              Control.asm     Free planes in a bitmap.
FreeTiles               Control.asm     Cleanup tiles data.
GetInitialSize          Map.asm         Gets initial map size from user.
GetMBlock               Blocks.asm      Handles input function.  (Map block).
GetTile                 Tiles.asm       Waits for user to select a tile.
GetTilesBlock           Blocks.asm      Handles input function.
GlobalCleanup           Control.asm     Cleanup everything.
GrabBlock               Blocks.asm      Makes selected area into block.
HandleInputs            Control.asm     Handles user input msg's.
HandleMiniMap           Control.asm     Handles "Fast-Mover" gadget.
HandleMove              Control.asm     Handles mouse movements.
HandleShortcut          Control.asm     Handles keybd shortcuts.
HideTiles               Tiles.asm       Hides tile page.
InitConsole             Control.asm     Setup console device.
InstallColours          Tiles.asm       Set editing window colours.
LoadInMap               Project.asm     Loads map data from a map.
LoadInTiles             Project.asm     Loads tile data from a map.
LoadInit                Project.asm     Sets everything up for map loading.
LoadMap                 Project.asm     Handles input function.
LoadTiles               Tiles.asm       Handles input function.
MainControl             Control.asm     Top level routine for control.
MainInitialisation      Control.asm     Set everything up.
MakeMap                 Map.asm         Copy old map into newly sized map.
MapBoxCorner            Blocks.asm      Gets co-ords of block corners.
MapBoxKeys              Blocks.asm      Handles keys when selecting blks.
MapBoxMove              Blocks.asm      Handles mouse when selecting blks.
MapCleanup              Control.asm     De-allocate map.
MapElasticBox           Blocks.asm      Handles elastic box for map blks.
MoveMap                 Control.asm     Recalculates FMG after map scrolled.
NewMap                  Project.asm     Handles input function.
NewTileSize             Tiles.asm       Sets up new tile size.
NextTile                Tiles.asm       Handles input function.
OpenMapScreen           Tiles.asm       Sets up editing window.
PickTile                Tiles.asm       Handles input function.
PlaceBlock              Project.asm     Places block at cursor pos.
PlaceTile               Project.asm     Places tile at cursor pos.
PreviousTile            Tiles.asm       Handles input function.
PrintInteger            Control.asm     Prints an integer in status area.
Quit                    Project.asm     Handles input function.
ReadColours             Project.asm     Read colours from a map file.
ReadPlanes              Project.asm     Read tiles planes from a map file.
RoutineCaller           Control.asm     Uses tables to call routines.
SaveIFFTiles            Tiles.asm       Handles input function.
SaveIcon                Prefs.asm       Saves an icon for a map.
SaveMap                 Project.asm     Handles input function.
SaveMapAs               Project.asm     Handles input function.
SaveRawMap              Map.asm         Handles input function.
SaveRawTiles            Tiles.asm       Handles input function.
SaveTiles               Project.asm     Saves tiles as part of map file.
ScrollDown              Blocks.asm      Scrolls map.
ScrollLeft              Blocks.asm      Scrolls map.
ScrollRight             Blocks.asm      Scrolls map.
ScrollUp                Blocks.asm      Scrolls map.
SetHiRes                Map.asm         Handles input function.
SetLoRes                Map.asm         Handles input function.
SetMapSize              Map.asm         Handles input function.
SetPens                 Control.asm     Sets up status rastport.
ShowTiles               Tiles.asm       Brings tiles page to front of scrn.
SortCorners             Blocks.asm      Sorts a blocks co-ords properly.
StartPaint              Prefs.asm       Put designer into paint mode.
StripInputs             Control.asm     Remove inputs from a port.
StuffChar               Control.asm     Used by exec RawDoFmt();
TScrollDown             Tiles.asm       Scroll tiles page.
TScrollLeft             Tiles.asm       Scroll tiles page.
TScrollRight            Tiles.asm       Scroll tiles page.
TScrollUp               Tiles.asm       Scroll tiles page.
TileBoxCorner           Blocks.asm      Gets co-ords of tile blk corner.
TileBoxKeys             Blocks.asm      Handles keys when selecting blk.
TileBoxMove             Blocks.asm      Handles mouse when delecting blk.
TileElasticBox          Blocks.asm      Handles elastic box for tile blks.
Tiles16x16              Tiles.asm       Handles input function.
Tiles16x32              Tiles.asm       Handles input function.
Tiles32x16              Tiles.asm       Handles input function.
Tiles32x32              Tiles.asm       Handles input function.
TilesCleanup            Control.asm     De-allocate tiles.
ToggleWBench            Prefs.asm       Handles input function.
UseOldBlock             Blocks.asm      Handles input function.
VersionControl          Control.asm     Selects PAL or NTSC.
WaitBlit                Control.asm     Custom WaitBlit();
WriteColours            Tiles.asm       Write raw colour data to a file.
WriteMap                Map.asm         Write raw map data to a file.
WritePlanes             Tiles.asm       Write raw tile data to a file.
-----------------------------------------------------------------------------
