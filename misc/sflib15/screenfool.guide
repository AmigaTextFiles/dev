@database "screenfool"
@master "Development:SC/help/screenfool.doc"

@Node Main "screenfool.doc"
    @{" AllocSFList() " Link "AllocSFList()"}
    @{" ClearDisplayList() " Link "ClearDisplayList()"}
    @{" ClearPubScreenList() " Link "ClearPubScreenList()"}
    @{" ClosePublicScreen() " Link "ClosePublicScreen()"}
    @{" DeallocSFList() " Link "DeallocSFList()"}
    @{" FindDisplayID() " Link "FindDisplayID()"}
    @{" FindDisplayMode() " Link "FindDisplayMode()"}
    @{" FindDMInList() " Link "FindDMInList()"}
    @{" FindScreenInList() " Link "FindScreenInList()"}
    @{" NewDisplayList() " Link "NewDisplayList()"}
    @{" NewPubScreenList() " Link "NewPubScreenList()"}
    @{" OpenPublicScreenA() " Link "OpenPublicScreenA()"}
    @{" StandardizeDisplayID() " Link "StandardizeDisplayID()"}
@EndNode

@Node "AllocSFList()" "screenfool.library/AllocSFList"

@{b}   NAME   @{ub}
        AllocSFList -- Allocate a SFList structure.

@{b}   SYNOPSIS@{ub}
        sflist=AllocSFList(type);
          D0                D0

        struct ScreenFoolList *AllocSFList(UBYTE);

@{b}   FUNCTION@{ub}
        Allocates a new SFList structure. These MUST be allocated by
        screenfool.library. You MAY NOT @{"AllocMem()" Link "exec/AllocMem()"} a ScreenFoolList.

@{b}   INPUTS@{ub}
        type - One of sfNT_DISPLAY or sfNT_SCREEN.

@{b}   RESULT@{ub}
        sflist - An initialized ScreenFoolList structure.
                 NULL indicates that not enough memory was available.

@{b}   EXAMPLE@{ub}

@{b}   NOTES@{ub}

@{b}   BUGS@{ub}

@{b}   SEE ALSO@{ub}
        @{"DeallocSFList()" Link "DeallocSFList()"}, <libraries/screenfool.h>

@EndNode

@Node "ClearDisplayList()" "screenfool.library/ClearDisplayList"

@{b}   NAME   @{ub}
        ClearDisplayList -- Clear the viewmode listing

@{b}   SYNOPSIS@{ub}
        ClearDisplayList(dmilist);
                           A0

        void ClearDisplayList(struct ScreenFoolList *);

@{b}   FUNCTION@{ub}
        Initialize the display viewmode list, by clearing any existing
        entries, and preparing for a call to @{"NewDisplayList()" Link "NewDisplayList()"}.

        This does not deallocate the ScreenFoolList structure. See the
        function @{"DeallocSFList()" Link "DeallocSFList()"}.

@{b}   INPUTS@{ub}
        dmlist - A pointer to a ScreenFoolList structure.

@{b}   RESULT@{ub}
        None

@{b}   EXAMPLE@{ub}

@{b}   NOTES@{ub}

@{b}   BUGS@{ub}

@{b}   SEE ALSO@{ub}
        @{"NewDisplayList()" Link "NewDisplayList()"}, @{"AllocSFList()" Link "AllocSFList()"}, @{"DeallocSFList()" Link "DeallocSFList()"}

@EndNode

@Node "ClearPubScreenList()" "screenfool.library/ClearPubScreenList"

@{b}   NAME   @{ub}
        ClearPubScreenList -- Clear the public screen list.

@{b}   SYNOPSIS@{ub}
        ClearPublicScreenList(pslist);
                                A0

        void ClearPubScreenList(struct ScreenFoolList *);

@{b}   FUNCTION@{ub}
        Clears the public screen list, releasing the allocated memory back
        to the operating system.

        This does *not* deallocate the ScreenFoolList structure. See the
        function @{"DeallocSFList()" Link "DeallocSFList()"}

@{b}   INPUTS@{ub}
        pslist - The screen list you want to empty

@{b}   RESULT@{ub}
        None

@{b}   EXAMPLE@{ub}

@{b}   NOTES@{ub}

@{b}   BUGS@{ub}

@{b}   SEE ALSO@{ub}
        @{"NewPubScreenList()" Link "NewPubScreenList()"}, @{"AllocSFList()" Link "AllocSFList()"}, @{"DeallocSFList()" Link "DeallocSFList()"}

@EndNode

@Node "ClosePublicScreen()" "screenfool.library/ClosePublicScreen"

@{b}   NAME   @{ub}
        ClosePublicScreen -- Close a public screen

@{b}   SYNOPSIS@{ub}
        ok = ClosePublicScreen(Name)
        D0                      A0

        BOOL ClosePublicScreen(STRPTR);

@{b}   FUNCTION@{ub}
        Close the public screen specified by Name.

@{b}   INPUTS@{ub}
        Name - Pointer to a vaild Public @{"Screen" Link "TEXT_INCLUDE:intuition/screens.h/Main" 97} name

@{b}   RESULT@{ub}
        ok - As @{"intuition.library/CloseScreen()" Link "intuition/CloseScreen()"}
             TRUE - Closed OK
             FALSE - Couldn't close screen -- a visitor window is
                     probably still open on the screen.

@{b}   EXAMPLE@{ub}

@{b}   NOTES@{ub}
        This screen does not have to have been opened by screenfool.library

@{b}   BUGS@{ub}

@{b}   SEE ALSO@{ub}
        <intuituion/screens.h>, @{"intuition.library/OpenScreen()" Link "intuition/OpenScreen()"},
        OpenPublicScreen(), @{"intuition.library/CloseScreen()" Link "intuition/CloseScreen()"}

@EndNode

@Node "DeallocSFList()" "screenfool.library/DeallocSFList"

@{b}   NAME   @{ub}
        DeallocSFList -- Deallocate a SFList structure.

@{b}   SYNOPSIS@{ub}
        ok=DeallocSFList(sflist);
        D0                 A0

        BOOL DeallocSFList(struct ScreenFoolList *);

@{b}   FUNCTION@{ub}
        Deallocates a SFList structure. This MUST have been allocated by
        screenfool.library. Don't just @{"FreeMem" Link "exec/FreeMem()"} this structure!

@{b}   INPUTS@{ub}
        sflist - A ScreenFoolList that has been cleared by the appropriate
                 Clear#?List function.

@{b}   RESULT@{ub}
        ok - TRUE if the list could be deallocated.
             FALSE if not.

@{b}   EXAMPLE@{ub}

@{b}   NOTES@{ub}

@{b}   BUGS@{ub}

@{b}   SEE ALSO@{ub}
        @{"AllocSFList()" Link "AllocSFList()"}, @{"ClearDisplayList()" Link "ClearDisplayList()"}, @{"ClearPubScreenList()" Link "ClearPubScreenList()"}

@EndNode

@Node "FindDisplayID()" "screenfool.library/FindDisplayID"

@{b}   NAME   @{ub}
        FindDisplayID -- Find the DisplayModeInfo for a DisplayID

@{b}   SYNOPSIS@{ub}
        dmi = FindDisplayID(dmilist, DisplayID)
        D0                    A0        D0

        struct DisplayModeInfo *FindDisplayID(struct ScreenFoolList *,
                                              ULONG);

@{b}   FUNCTION@{ub}
        Find and return the DisplayModeInfo structure associated with
        a DisplayID. This can be a generic or absolute (monitor-specific)
        identifier.

@{b}   INPUTS@{ub}
        dmilist - A previously initialized list from @{"NewDisplayList()" Link "NewDisplayList()"}
        DisplayID - A 32-bit display identifier

@{b}   RESULT@{ub}
        dmi - A pointer to the appropriate DisplayModeInfo record, or NULL
          if the DisplayID was invalid for this system, or was not in the
          list (due to property exclusion).

@{b}   EXAMPLE@{ub}

@{b}   NOTES@{ub}
        Only available display identifiers are valid.

@{b}   BUGS@{ub}

@{b}   SEE ALSO@{ub}
        @{"NewDisplayList()" Link "NewDisplayList()"}, @{"FindDMInList()" Link "FindDMInList()"}, @{"FindDisplayMode()" Link "FindDisplayMode()"},
        <graphics/displaymode.h>, @{"graphics.library/ModeNotAvailable()" Link "graphics/ModeNotAvailable()"}

@EndNode

@Node "FindDisplayMode()" "screenfool.library/FindDisplayMode"

@{b}   NAME   @{ub}
        FindDisplayMode -- Find the position of a DisplayModeInfo

@{b}   SYNOPSIS@{ub}
        position = FindDisplayMode(dmilist, dmi);
           D0                        A0     A1

        ULONG FindDisplayMode(struct ScreenFoolList *, 
                              struct DisplayModeInfo *);

@{b}   FUNCTION@{ub}
        Find and return the position of the display mode record in
        the display mode listing.

@{b}   INPUTS@{ub}
        dmilist - A previously initialized list from @{"NewDisplayList()" Link "NewDisplayList()"}
        dmi - A display mode record (must be from dmilist - you can't
            create your own!)

@{b}   RESULT@{ub}
        position - The position of the display mode record in the list.

@{b}   EXAMPLE@{ub}

@{b}   NOTES@{ub}

@{b}   BUGS@{ub}

@{b}   SEE ALSO@{ub}
        @{"NewDisplayList()" Link "NewDisplayList()"}, @{"FindDMInList()" Link "FindDMInList()"}, @{"FindDisplayID()" Link "FindDisplayID()"}

@EndNode

@Node "FindDMInList()" "screenfool.library/FindDMInList"

@{b}   NAME   @{ub}
        FindDMInList -- Find the display mode from a listview pos.

@{b}   SYNOPSIS@{ub}
        dmi = FindDMInList(dmilist, position);
        D0                   A0        D0

        struct DisplayModeInfo *FindDMInList(struct ScreenFoolList *,
                                             ULONG);

@{b}   FUNCTION@{ub}
        Find the DisplayModeInfo structure of the ordinal'th item in
        the list.

@{b}   INPUTS@{ub}
        dmilist - A previously initialized list from @{"NewDisplayList()" Link "NewDisplayList()"}
        position - The list position

@{b}   RESULT@{ub}
        dmi - A pointer to the DisplayModeInfo record.

@{b}   EXAMPLE@{ub}

@{b}   NOTES@{ub}

@{b}   BUGS@{ub}

@{b}   SEE ALSO@{ub}
        @{"NewDisplayList()" Link "NewDisplayList()"}, @{"FindDisplayID()" Link "FindDisplayID()"}, @{"FindDisplayMode()" Link "FindDisplayMode()"}

@EndNode

@Node "FindScreenInList()" "screenfool.library/FindScreenInList"

@{b}   NAME   @{ub}
        FindScreenInList -- Find screen node in a list, given its pos.

@{b}   SYNOPSIS@{ub}
        psinfo = FindScreenInList(pslist, position);
          D0                        A0       D0

        struct PublicScreenInfo *FindScreenInList(struct ScreenFoolList *,
                                 ULONG);

@{b}   FUNCTION@{ub}
        Find a screen in the given public screen list, and then return
        its address. This is used for things like ListViews.

@{b}   INPUTS@{ub}
        pslist - An initialized ScreenFoolList header.
        position - The ordinal position of

@{b}   RESULT@{ub}
        A pointer to the PublicScreenInfo structure that is associated
        with this position. A too-large position will return NULL.

@{b}   EXAMPLE@{ub}

@{b}   NOTES@{ub}

@{b}   BUGS@{ub}

@{b}   SEE ALSO@{ub}
        @{"NewPubScreenList()" Link "NewPubScreenList()"}

@EndNode

@Node "NewDisplayList()" "screenfool.library/NewDisplayList"

@{b}   NAME   @{ub}
        NewDisplayList -- Find available display modes

@{b}   SYNOPSIS@{ub}
        ok = NewDisplayList(dmilist, excludeProperties);
        D0                    A0            D0

        BOOL NewDisplayList(struct ScreenFoolList *, ULONG);

@{b}   FUNCTION@{ub}
        Find all available screen display options, and load them into
        the list. These must eventually be deallocated by calling the
        @{"ClearDisplayList()" Link "ClearDisplayList()"} function. Will mask out duplicate displays
        and will exclude viewmodes that posess properties masked by
        the excludeProperties flag longword.

        If there are records already in the list, they will be auto-
        magically removed.

@{b}   INPUTS@{ub}
        dmilist - Pointer to a ScreenFoolList

        excludeProperties - OR in flags of properties you DON'T want
                            to see in the list.

@{b}   RESULT@{ub}
        ok - TRUE if list allocated correctly; FALSE otherwise

@{b}   EXAMPLE@{ub}

@{b}   NOTES@{ub}
        This list is READ-ONLY. No messing.

        Behavior of nameless screen modes changed for V1.5. Now output as:
        MONTIOR:xres x yres; looks vaguely consistent with V39 Screenmode
        requester.

@{b}   BUGS@{ub}

@{b}   SEE ALSO@{ub}
        @{"ClearDisplayList()" Link "ClearDisplayList()"}, @{"<graphics/displayinfo.h>" Link "TEXT_INCLUDE:graphics/displayinfo.h/Main" 0}

@EndNode

@Node "NewPubScreenList()" "screenfool.library/NewPubScreenList"

@{b}   NAME   @{ub}
        NewPubScreenList -- Obtain a list of all available pub. screens

@{b}   SYNOPSIS@{ub}
        ok = NewPubScreenList(pslist);
        D0                      A0

        BOOL NewPubScreenList(struct ScreenFoolList *);

@{b}   FUNCTION@{ub}
        Find every available public screen on the system public screen
        list, get some info on it, and put it in our private list.

        If the list is not empty, it will be cleared.

@{b}   INPUTS@{ub}
        pslist - A full ScreenFoolList header.

@{b}   RESULT@{ub}
        ok - TRUE if list allocated correctly; FALSE otherwise.

@{b}   EXAMPLE@{ub}

@{b}   NOTES@{ub}
        Must be cleared after use by @{"ClearPubScreenList()" Link "ClearPubScreenList()"}

        The only permissible uses for this list are read-only. DO NOT
        WRITE TO THIS LIST, ADD OR REMOVE NODES, OR OTHERWISE ALTER ITS
        CONTENTS. Screenfool's list protection is not that sophisticated,
        so don't mess with it.

        DON'T mix up a display mode list with a screen list. There is some
        error checking, but don't risk it.

@{b}   BUGS@{ub}

@{b}   SEE ALSO@{ub}
        <intuituion/screens.h>, @{"intuition.library/LockPubScreenList()" Link "intuition/LockPubScreenList()"},
        @{"intuition.library/GetScreenDrawInfo()" Link "intuition/GetScreenDrawInfo()"}, @{"OpenPublicScreenA()" Link "OpenPublicScreenA()"},
        @{"intuition.library/CloseScreen()" Link "intuition/CloseScreen()"}, @{"intuition.library/OpenScreen()" Link "intuition/OpenScreen()"},
        @{"ClearPubScreenList()" Link "ClearPubScreenList()"}, <libraries/screenfool.h>

@EndNode

@Node "OpenPublicScreenA()" "screenfool.library/OpenPublicScreenA"

@{b}   NAME   @{ub}
        OpenPublicScreenA -- Open a public screen & make it non-private

@{b}   SYNOPSIS@{ub}
        screen = OpenPublicScreenA(Name, TagList);
          D0                        A0      A1

        struct @{"Screen" Link "TEXT_INCLUDE:intuition/screens.h/Main" 97} *OpenPublicScreenA(STRPTR, struct @{"TagItem" Link "TEXT_INCLUDE:utility/tagitem.h/Main" 31} *);

        VarArgs version (SAS/C 6.0 #pragma tagcall):

        struct @{"Screen" Link "TEXT_INCLUDE:intuition/screens.h/Main" 97} *OpenPublicScreen(STRPTR,
                         tag, data, tag, data, ..., TAG_DONE);

@{b}   FUNCTION@{ub}
        Open a public screen in the specified display mode, and set it to
        be accessable from other tasks.

@{b}   INPUTS@{ub}
        Name - A string that contains a valid, unused public screen name.
        TagList - Additional tags for this screen.

@{b}   RESULT@{ub}
        screen - Pointer to a struct @{"Screen" Link "TEXT_INCLUDE:intuition/screens.h/Main" 97}. DO NOT CLOSE THIS USING
                 intuition.library/CloseScreen()!!! Use:
                       ok=ClosePublicScreen(screen);

@{b}   EXAMPLE@{ub}

@{b}   NOTES@{ub}
        The screen title will be set to the public screen name. You can
        override this behavior by using an SA_Title tag in your taglist.
        Note that an overriden title is not protected by the library in
        this release.

        @{"Screen" Link "TEXT_INCLUDE:intuition/screens.h/Main" 97} options MUST be supplied via Tags. There is no support
        (present OR future) for @{"NewScreen" Link "TEXT_INCLUDE:intuition/screens.h/Main" 309} or @{"ExtNewScreen" Link "TEXT_INCLUDE:intuition/screens.h/Main" 345} structures.

        You may NOT use screen->UserData! This is the only pointer to
        the screenfool.library tracking, which is necessary to recover
        the memory used by OpenPublicScreen().

@{b}   BUGS@{ub}

@{b}   SEE ALSO@{ub}
        @{"NewDisplayList()" Link "NewDisplayList()"}, @{"<graphics/displayinfo.h>" Link "TEXT_INCLUDE:graphics/displayinfo.h/Main" 0}, <intuituion/screens.h>,
        @{"ClosePublicScreen()" Link "ClosePublicScreen()"}, @{"intuition.library/OpenScreen()" Link "intuition/OpenScreen()"}

@EndNode

@Node "StandardizeDisplayID()" "screenfool.library/StandardizeDisplayIDcreenfool.library/StandardizeDisplayID"

@{b}   NAME   @{ub}
        StandardizeDisplayID -- Convert a generic display identifier
           to a monitor-specific one.

@{b}   SYNOPSIS@{ub}
        AbsDisplayID = StandardizeDisplayID(DisplayID);
             D0                                D0

        ULONG StandardizeDisplayID(ULONG);

@{b}   FUNCTION@{ub}
        Converts generic display identifiers to their monitor-specific
        equivalents. This function uses Mode Promotion (under 3.0) and
        the PAL/NTSC setting to find the best available mode to display
        this type of display.

@{b}   INPUTS@{ub}
        DisplayID - A 32-bit display identifier

@{b}   RESULT@{ub}
        AbsDisplayID - A 32-bit display identifier

@{b}   EXAMPLE@{ub}

@{b}   NOTES@{ub}
        You may supply an absolute identifier, in which case it returns
        the same identifier (if internal) or a system-defined result.

        You may supply a display ID that is in the internal database but
        unavailable.

@{b}   BUGS@{ub}

@{b}   SEE ALSO@{ub}
        @{"graphics.library/GetDisplayInfoData()" Link "graphics/GetDisplayInfoData()"}, <graphics/displaymodes.h>

@EndNode

