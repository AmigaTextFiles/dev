<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
   <meta name="GENERATOR" content="tg 0.11 [temgen]">
   <meta name="Author" content="Marek £êtowski">    
   <meta name="Description" content="temgen - uniwersalny generator kodu - dokumentacja">    
   <meta name="Keywords" content="temgen,szablon,generator kodu">    
   <title> temgen - dokumentacja u¿ytkownika </title>
</head>
<body text="#000000" bgcolor="#FFFFFF">
<small>
<a href="intro_pl.html"> Polish version </a> -
<a href="intro.html"> English version </a> -
<a href="temgen_pl.html"> Dokumentacja </a> -
Download: <a href="http://download.berlios.de/temgen/tg-0.11.tgz"> tg-0.11.tgz </a>
</small>
<hr>
<h1> temgen - dokumentacja u¿ytkownika </h1>
<ul>
   <li> <a href="#section1"> 1. Wprowadzenie </a>
   <li> <a href="#section2"> 2. Wywo³anie programu </a>
   <li> <a href="#section3"> 3. Jêzyk szablonów </a>
   <li> <a href="#section4"> 4. Przyk³ady </a>
   <li> <a href="#section5"> 5. Kontakt z autorem, licencja </a>
</ul>
   <a name=section1>
   <h2> 1. Wprowadzenie </h2>
Temgen jest uniwersalnym generatorem kodu, opartym na 
<a href=#lang>jêzyku szablonów.</a>
Szablony temgena s± plikami tekstowymi sk³adaj±cymi siê z 
<a href=#ctl_lin>linii steruj±cych</a> i
<a href=#data_lin>linii danych.</a>
Dzia³anie temgena polega w zasadzie na przepisywaniu linii danych
do plików wyj¶ciowych, zgodnie z kolejno¶ci± okre¶lon± przez
linie steruj±ce. Przed zapisaniem symbole <a href=#var>zmiennych</a> 
wystêpuj±cych w liniach danych zastêpowane s± przez ich warto¶ci,
a symbole <a href=#_function>funkcji</a> zastêpowane s± wynikiem ich wywo³ania.
<p>
Temgen mo¿e s³u¿yæ do generowania dowolnych tekstów, w których wystêpuj±
powtarzalne wzorce. Poniewa¿ ca³a logika generacji zawarta jest w szablonach,
temgen mo¿e byæ u¿ywany do generowania kodu w dowolnym jêzyku, np. w C,
Perlu, HTML, czy angielskim.
<p>
Mechanizm <a href=#_embed><b><samp>@embed</samp></b></a> i 
<a href=#_emit><b><samp>@emit</samp></b></a> pozwala na elastyczne
tworzenie szablonów generuj±cych synchronicznie fragmenty kodu
w wielu plikach i w ró¿nych punktach.
   <a name=section2>
   <h2> 2. Wywo³anie programu </h2>
<p>
<table border=1 bgcolor="#ffe0c0" width="98%"><tr><th colspan=2 align='left'> 
Temgen wywo³uje siê w nastêpuj±cy sposób: 
</th></tr>
<tr><td><pre>
    temgen [opcje] file ...    
</pre></tr></table><p>
Obs³ugiwane s± nastêpuj±ce opcje:
<ul>
<li> <b><samp>-d</samp></b> - uruchomienie wbudowanego debuggera
<li> <b><samp>-h</samp></b> - wy¶wietlenie tekstu pomocy
</ul>
  <a name='lang'>  
   <a name=section3>
   <h2> 3. Jêzyk szablonów </h2>
<table> 
<tr><th> Podstawy </th><th> S³owa kluczowe </th><th> Funkcje wbudowane </th></tr>
<tr><td valign="top">
<ul>
<li> <a href=#parsing>Dzia³anie generatora</a>
<li> <a href=#ctl_lin>Linie steruj±ce</a>
<li> <a href=#data_lin>Linie danych</a>
<li> <a href=#var>Typy danych i wyra¿eñ</a>    
</ul>
</td>
<td valign="top">
<a name='commands'>
<ul>
<li> <a href=#_>@</a>
<li> <a href=#_break>@ break</a>     
<li> <a href=#_embed>@ embed</a> 
<li> <a href=#_emit>@ emit</a> 
<li> <a href=#_for>@ for</a>
<li> <a href=#_function>@ function</a>
<li> <a href=#_if>@ if</a>   
<li> <a href=#_local>@ local</a>
<li> <a href=#_output>@ output</a>
<li> <a href=#_pop>@ pop</a>    
<li> <a href=#_push>@ push</a>   
<li> <a href=#_return>@ return</a>
<li> <a href=#_switch>@ switch</a>
<li> <a href=#_use>@ use</a>
</ul>
</td>
<td valign="top">
<ul>
<li> <a href=#_printf>$printf()</a>
<li> <a href=#_size>$size()</a> 
<li> <a href=#_strlen>$strlen()</a>
<li> <a href=#_substr>$substr()</a>
<li> <a href=#_system>$system()</a>
<li> <a href=#_tplfile>$tplfile()</a> 
<li> <a href=#_tplline>$tplline()</a>
</ul>
</td>
</table>   
<p>
 <a name='parsing'>
  <p><b> Dzia³anie generatora </b><p>
Przebieg wykonania generacji jest nastêpuj±cy: pliki ¼ród³owe wyszczególnione
w linii komend s± parsowane w ca³o¶ci, a nastêpnie s± po kolei interpretowane.
Interpretacja odbywa siê linia po linii, przy czym kolejno¶æ ta mo¿e zostaæ
zmieniona w wyniku interpretacji <a href=#ctl_lin>linii steruj±cych.</a>
Plik ¼ród³owy (szablon) sk³ada siê z dwóch rodzajów linii: 
<a href=#ctl_lin>linii steruj±cych</a> i <a href=#data_lin>linii danych.</a>
 <a name='ctl_lin'> 
  <p><b>      Linie steruj±ce  </b><p>
Linie steruj±ce rozpoczynaj± siê od znaku <b><samp>@</samp></b>  i identyfikatora komendy.
Komendy wyszczególnione s± <a href=#commands>w tabelce powy¿ej</a>
i omówione ni¿ej. S³u¿± do zmiany przebiegu interpretacji (np. 
        <a href=#_if><b><samp>@if</samp></b></a>,
        <a href=#_switch><b><samp>@switch</samp></b></a>), do deklarowania funkcji ( 
        <a href=#_function><b><samp>@function</samp></b></a> ),
wykonywania fragmentów kodu, np. w celu nadania pewnych warto¶ci zmiennym
( <a href=#_><b><samp>@</samp></b></a> ),
a tak¿e okre¶lenia pliku wyj¶ciowego i punktu, w którym ma byæ umieszczony
generowany kod ( 
        <a href=#_output><b><samp>@output</samp></b></a>, 
        <a href=#_embed><b><samp>@embed</samp></b></a>, 
        <a href=#_emit><b><samp>@emit</samp></b></a> ).
Linie steruj±ce mog± byæ kontynuowane w kolejnym wierszu. Linia kontynuowana
musi koñczyæ siê znakiem backslashem, a w
kolejnym wierszu rozpoczynaæ siê znakiem <b><samp>@</samp></b>.
<p>
<table border=1 bgcolor="#ffe0c0" width="98%"><tr><th colspan=2 align='left'> 
Kontynuacja linii steruj±cej: 
</th></tr>
<tr><td><pre>
    @if ( $bardzo_dlugie_wyrazenie == \
    @     $dalszy_ciag_dlugiego_wyrazenia )       
</pre></tr></table><p>
 <a name='data_lin'> 
  <p><b>      Linie danych  </b><p>
Linie danych zawieraj± tekst generowanego kodu. Tekst ten ulega rozwiniêciu
polegaj±cemu na zast±pieniu wystêpuj±cych w nim <a href=#var>wyra¿eñ</a>
odpowiednimi warto¶ciami. Po rozwiniêciu tekst wstawiany jest w punkcie
emisji. Punkt ten standardowo znajduje siê na koñcu aktualnego pliku
wyj¶ciowego, mo¿e byæ jednak zmieniony przy u¿yciu komend
<a href=#_emit><b><samp>@emit</samp></b></a> i <a href=#_embed><b><samp>@embed.</samp></b></a> 
Plik wyj¶ciowy mo¿e zostaæ ustalony za pomoc± komendy <a href=#_output><b><samp>@output.</samp></b></a>    
<p>
<table border=1 bgcolor="#ffe0c0" width="98%"><tr><th colspan=2 align='left'> 
Linie danych (szablon i wynik) 
</th></tr>
<tr><td><pre>
    @  $name = "Alaska"      
    $name is the best !    
</pre></td><td><pre>
    Alaska is the best !    
</pre></tr></table><p>
W celu ochrony napisów przed ich interpretacj± jako wyra¿eñ nale¿y
u¿ywaæ backslasha, który wymusza dos³owne traktowanie tekstu.
<p>
<table border=1 bgcolor="#ffe0c0" width="98%"><tr><th colspan=2 align='left'> 
Escaping (szablon i wynik) 
</th></tr>
<tr><td><pre>
    @  $name = "Alaska"      
    (zmienna \$name)     
</pre></td><td><pre>
    (zmienna $name)      
</pre></tr></table><p>
 <a name='var'>       
  <p><b>      Typy danych i wyra¿eñ </b><p>
W jêzyku szablonów wystêpuj± trzy typy danych: skalary, tablice i struktury.
Skalary mog± byæ liczbami lub napisami, tablice indeksowane s± liczbami ca³kowitymi nieujemnymi.
<p>
<table border=1 bgcolor="#ffe0c0" width="98%"><tr><th colspan=2 align='left'> 
Skalary, tablice i struktury 
</th></tr>
<tr><td><pre>
    @  $s = "BAR"
    @  $n = 2
    @  $tab[1] = "foo" 
    @  $tab[2] = "bar" 
    @  $str = [ name: "FOO", count: 4 ]
      $s   $tab[ 1 ]    $tab[ $n ]
      $str.name, $str.count
</pre></td><td><pre>
      BAR   foo    bar      
      FOO, 4             
</pre></tr></table><p>
Zarówno tablice, jak struktury mog± byæ rozszerzane dynamicznie. W jêzyku
istniej± mechanizmy iteracji:
<p>
<table border=1 bgcolor="#ffe0c0" width="98%"><tr><th colspan=2 align='left'> 
Tablice i struktury - iterowanie 
</th></tr>
<tr><td><pre>
    @  $tab = ["a","b","c",1000]
    @  $str = [ name: "FOO", count: 4, val: 1.20 ]
    @for ($i=0; $i<$size($tab); $i++)
       item $i: $tab[ $i ]
    @endfor
    STRUCTURE:
    @for ($i in $str)
       $i: $str.$i 
    @endfor    
</pre></td><td><pre>
    item 0: a
    item 1: b
    item 2: c
    item 3: 1000
    STRUCTURE:
    name: FOO 
    count: 4 
    val: 1.200000 
</pre></tr></table><p>
Tablice i struktury mog± byæ dowolnie zagnie¿d¿ane:
<p>
<table border=1 bgcolor="#ffe0c0" width="98%"><tr><th colspan=2 align='left'> 
Zagnie¿d¿one struktury danych: 
</th></tr>
<tr><td><pre>
   @ $data = [ "scalar", [a:"Alaska", b:"Bar"], \     
   @           [1,2,3,4],                       \     
   @           10 ]
</pre></tr></table><p>
  <p><b>      Wyra¿enia </b><p>
Zarówno w komendach kontrolnych, jak w liniach danych mog± wystêpowaæ
wyra¿enia. Do dyspozycji s± <b>wyra¿enia sta³e</b> (liczby i napisy),
<b>selektory</b> (udostêpniaj±ce elementy tablic lub struktur),
<b>konstruktory</b> (pozwalaj±ce tworzyæ struktury i tablice), 
<b>wyra¿enia arytmetyczne</b> i <b>wywo³ania funkcji</b>.
Wyra¿enie mo¿e byæ ujête w symbole <b><samp>$(  )</samp></b>; w liniach danych czasem
wrêcz <b>musi</b>, poniewa¿ w liniach danych tylko napisy rozpoczynaj±ce siê
od znaku <b><samp>$</samp></b>  interpretowane s± jako wyra¿enia.
Operator '+' ma dodatkowe znaczenie: oznacza ³±czenie napisów.
<p>
<table border=1 bgcolor="#ffe0c0" width="98%"><tr><th colspan=2 align='left'> 
Dostêpne operatory (semantyka jak w jêzyku C): 
</th></tr>
<tr><td><pre>
    -          ==        ++ (postfiksowy i prefiksowy)  
    +          !=        -- (postfiksowy i prefiksowy)   
    *           =        &&
    /           <        ||
    -=          >
    +=         <=
    *=         >=
    /=          !
</pre></tr></table><p>
<p>
<table border=1 bgcolor="#ffe0c0" width="98%"><tr><th colspan=2 align='left'> 
Przyk³ady wyra¿eñ: 
</th></tr>
<tr><td><pre>
    1    1.01   "foo"   'bar'    
    $x -= 10
    [ 1, 2, "FOO" ]
    [ name: "foo", val: 0 ]
    $fun( 10, $x )
    $var.x
    $var.$field
    $tab[ 10 ]
    $( 'Foo bar bazoola' )
</pre></td><td><pre>
    liczby i napisy
    wyra¿enie arytmetyczne
    konstruktor tablicy
    konstruktor struktury
    wywo³anie funkcji
    selektor (dostêp do pola)
    selektor (dostêp do pola przez nazwê)  
    selektor (dostêp do elementu)  
    wyra¿enie w nawiasach
</pre></tr></table><p>
<a name='_fun_call'>
Interpretacja linii danych polega na zast±pieniu wystêpuj±cych w niej
wyra¿eñ przez ich obliczone warto¶ci. Je¿eli wyra¿enie jest wywo³aniem
funkcji, warto¶ci± jest dana zwrócona z wewn±trz funkcji za pomoc±
instrukcji <a href=#_return><b><samp>@return</samp></b></a>. Interpretacja linii danych zawartych 
wewn±trz takiej funkcji nie powoduje emitowania tekstu.
Odwrotnie jest w przypadku wywo³ania funkcji z linii kontrolnej.
Warto¶æ zwracana za pomoc± instrukcji <a href=#_return><b><samp>@return</samp></b></a> jest wtedy ignorowana,
a linie danych z wnêtrza funkcji emitowane s± na wyj¶ciu. Brzmi to zawile,
ale staje siê jasne po zapoznaniu siê z przyk³adem:
<p>
<table border=1 bgcolor="#ffe0c0" width="98%"><tr><th colspan=2 align='left'> 
Wywo³anie funkcji: 
</th></tr>
<tr><td><pre>
    @function fun()
        inline text
    @   return "RESULT TEXT"    
    @endfunction
    called from data line: $fun()  
    @ $fun()    
</pre></td><td><pre>
    called from data line: RESULT TEXT   
        inline text
</pre></tr></table><p>
  <p><b>      Komendy steruj±ce </b><p>
 <a name='_'>
  <p><b>      @  </b><p>
Interpretacja linii rozpoczynaj±cej siê od znaku <b><samp>@</samp></b>, po którym nastêpuje
wyra¿enie polega na obliczeniu tego wyra¿enia. Warto¶æ tego wyra¿enia jest 
ignorowana - chodzi, podobnie jak w jêzyku C, o skutki uboczne interpretacji.
<p>
<table border=1 bgcolor="#ffe0c0" width="98%"><tr><th colspan=2 align='left'> 
Komendy - wyra¿enia 
</th></tr>
<tr><td><pre>
    @ $fun()    
    @ $x = 1
</pre></tr></table><p>
 <a name='_break'>
  <p><b>      @ break  </b><p>
Komenda <b><samp>@break</samp></b> dzia³a podobnie jak instrukcja <b><samp>break</samp></b>
w jêzyku C.  Przerywa pêtle <a href=#_for><b><samp>@for</samp></b></a> i instrukcjê
<a href=#_switch><b><samp>@switch</samp></b></a>.
<p>
<table border=1 bgcolor="#ffe0c0" width="98%"><tr><th colspan=2 align='left'> 
Komenda @break: 
</th></tr>
<tr><td><pre>
    @for ( $i=0; $i<10; $i++ )  
       iteration  $i
    @  break
    @endfor
      
    @switch ( 1 )
    @  case 1:
       branch 1
    @  break   
    @  case 2:
       branch 2
    @endswitch    
</pre></td><td><pre>
   iteration  0     
   branch 1
</pre></tr></table><p>
 <a name='_embed'>
  <p><b>      @ embed </b><br>
 <a name='_emit'> 
     <b>      @ emit </b><p>
Para komend <b><samp>@embed</samp></b> i <b><samp>@emit</samp></b> umo¿liwia zmianê kolejno¶ci
generowanych linii. <b><samp>@embed</samp></b> pozwala zdefiniowaæ punkt, w którym
emitowany bêdzie tekst, <b><samp>@emit</samp></b> skierowuje strumieñ wyj¶cia do
zdefiniowanego gdziekolwiek punktu. Wa¿ne jest to, ¿e punkt ten (definiowany
przez <b><samp>@embed</samp></b>) mo¿e byæ zadeklarowany w innym pliku ¼ród³owym,
po - lub przed u¿yciem <b><samp>@emit</samp></b> i mo¿e le¿eæ w innym pliku wyj¶ciowym.
Komendy te wraz z <a href=#_pop><b><samp>@pop</samp></b></a>, 
<a href=#_push><b><samp>@push</samp></b></a> i <a href=#_output><b><samp>@output</samp></b></a>
stanowi± jeden z najsilniejszych mechanizmów temgena.    
<p>
Argumentem komend <b><samp>@embed</samp></b> i <b><samp>@emit</samp></b> mo¿e byæ dowolne
wyra¿enie, nie koniecznie sta³y napis.
<p>
<b><samp>@embed 'Nazwa'</samp></b> oznacza: tu emituj tekst po napotkaniu <b><samp>@emit 'Nazwa'</samp></b>. <br>
<b><samp>@emit 'Nazwa'</samp></b> oznacza: emituj tekst w punkcie oznaczonym <b><samp>@embed 'Nazwa'</samp></b>. <br>
<p>
<table border=1 bgcolor="#ffe0c0" width="98%"><tr><th colspan=2 align='left'> 
Punkty emisji: 
</th></tr>
<tr><td><pre>
    @embed "header"
    @embed "body"
    @embed "footer"   
    @emit  "body"
      BODY TEXT
    @emit  "footer"
      FOOTER TEXT
    @emit  "header"    
      HEADER TEXT
</pre></td><td><pre>
    HEADER TEXT   
    BODY TEXT
    FOOTER TEXT
</pre></tr></table><p>
 <a name='_for'>
  <p><b>      @ for </b><p>
Podstawowa forma pêtli <b><samp>@for</samp></b> dzia³a podobnie jak w jêzyku C .
Pêtla mo¿e zostaæ przerwana komend± <a href=#_break><b><samp>@break</samp></b></a>.
Druga forma umo¿liwia iteracjê pól struktury o nieznanych apriori nazwach.
<p>
<table border=1 bgcolor="#ffe0c0" width="98%"><tr><th colspan=2 align='left'> 
Pêtle: 
</th></tr>
<tr><td><pre>
    @for ( $i=0; $i<3; $i++ )
       item  $i
    @endfor

    @  $str = [ a: "FOO", b: "BAR" ]    
    @for ( $fld in $str )
       $fld: $str.$fld 
    @endfor    
</pre></td><td><pre>
       item  0     
       item  1
       item  2
       a: FOO 
       b: BAR 
</pre></tr></table><p>
 <a name='_function'>
  <p><b>      @ function  </b><p>
Komenda <b><samp>@function</samp></b> s³u¿y do definiowania funkcji.
W nag³ówku funkcji podaje siê nazwy parametrów.
Komenda <a href=#_return><b><samp>@return</samp></b></a> s³u¿y do zwracania
rezultatu funkcji. Efekt wywo³ania funkcji zale¿y od tego, czy wywo³ano
j± z linii danych, czy z linii kontrolnej. Zosta³o to omówione
<a href=#_fun_call> powy¿ej. </a>
Funkcje mog± byæ wywo³ywane w dowolnym pliku ¼ród³owym, przed, lub po deklaracji.
Do deklarowania zmiennych lokalnych s³u¿y komenda 
<a href=#_local><b><samp>@local.</samp></b></a>
<p>
<table border=1 bgcolor="#ffe0c0" width="98%"><tr><th colspan=2 align='left'> 
Funkcja: 
</th></tr>
<tr><td><pre>
    @function factor( n )
    @  if ( $n == 1 )
    @     return 1
    @  else
    @     return $n * $factor( $n - 1 )   
    @  endif    
    @endfunction
   
    @for ( $i=1; $i<8; $i++ )
       $i ! = $factor($i)
    @endfor
</pre></td><td><pre>
     1 ! = 1
     2 ! = 2
     3 ! = 6
     4 ! = 24
     5 ! = 120
     6 ! = 720
     7 ! = 5040    
</pre></tr></table><p>
 <a name='_if'>
  <p><b>      @ if  </b><p>
Konstrukcja <b><samp>@if</samp></b> jest klasyczna. Nie wymaga komentarza. 
Jest zaprezentowana w wielu przyk³adach.  
 <a name='_local'>
  <p><b>      @ local  </b><p>
Instrukcja <b><samp>@local</samp></b> s³u¿y do deklarowania lokalnych zmiennych
wewn±trz funkcji.
<p>
<table border=1 bgcolor="#ffe0c0" width="98%"><tr><th colspan=2 align='left'> 
Zmienna lokalna: 
</th></tr>
<tr><td><pre>
   @function abc(a,b)   
   @local c    
      $a $b $c
   @   $a='anew'
   @   $b='bnew'
   @   $c='cnew'
      $a $b $c
   @endfunction
   
   @ $a='a'
   @ $b='b'
   @ $c='c'

   $a $b $c
   @ $abc( $a, $b )
   $a $b $c
</pre></td><td><pre>
    a b c
        a b 
        anew bnew cnew   
    a b c
</pre></tr></table><p>
 <a name='_output'> 
  <p><b>      @ output </b><p>
Interpretacja komendy <b><samp>@output</samp></b> powoduje prze³±czenie wyj¶cia
do pliku o nazwie podanej jako argument. Razem z komendami 
<a href=#_embed><b><samp>@embed</samp></b></a>,
<a href=#_emit><b><samp>@emit</samp></b></a>,
<a href=#_pop><b><samp>@pop</samp></b></a> i
<a href=#_push><b><samp>@push</samp></b></a>
tworzy zestaw umo¿liwiaj±cy sterowanie wyj¶ciem.
Specjalna nazwa pliku <b><samp>"stdout"</samp></b> s³u¿y do przekierowania
wyniku na standardowe wyj¶cie programu.
<p>
<table border=1 bgcolor="#ffe0c0" width="98%"><tr><th colspan=2 align='left'> 
Sterowanie wyj¶ciem: 
</th></tr>
<tr><td><pre>
    @output "foo" 
      FOO
    @output "stdout"  
      STDOUT
</pre></tr></table><p>
 <a name='_pop'> 
  <p><b>      @ pop </b><br>
 <a name='_push'> 
     <b>      @ push </b><p>
Komendy <b><samp>@pop</samp></b> i <b><samp>push</samp></b> s³u¿± do zachowania i odtworzenia
punktu emisji. Punkt emisji ustalany jest przez wykonanie komend
<a href=#_output><b><samp>@output</samp></b></a> (plik) i <a href=#_emit><b><samp>@emit</samp></b></a>
(linia). <b><samp>@pop</samp></b> i <b><samp>@push</samp></b> przydatne s± wewn±trz funkcji, 
pozwalaj±c odtworzyæ stan punktu emisji sprzed jej wywo³ania.
<p>
<table border=1 bgcolor="#ffe0c0" width="98%"><tr><th colspan=2 align='left'> 
@Push i @pop: 
</th></tr>
<tr><td><pre>
    @function decl( d )
    @  push
    @  output "example.h"
         $d
    @  pop
    @endfunction    
            
    @output "example.c"
        
    #include "example.h"
        
    @ $decl( "int i;" )
        
    int main()
    {
    @ $decl( "int result;" )   
          return result;    
    }
</pre></td><td><pre>
example.h:

   int i;
   int result;

example.c:

#include "example.h"   
int main()
{
      return result;    
}
</pre></tr></table><p>
 <a name='_return'>
  <p><b>      @ return </b><p>
Instrukcja <b><samp>@return</samp></b> umo¿liwia zakoñczenie 
<a href=#_fun_call>wykonania funkcji</a>
i zwrócenie rezultatu. 
 <a name='_switch'>
  <p><b>      @ switch </b><p>
Komenda <b><samp>@switch</samp></b> ma sk³adniê podobn± do analogicznej instrukcji
jêzyka C. Ró¿nica polega na tym, ¿e etykietami mog± byæ dowolne wyra¿enia,
co ilustruje poni¿szy przyk³ad.
Instrukcja <a href=#_break>@break</a> ma tu zastosowanie analogiczne
jak w jêzyku C.
<p>
<table border=1 bgcolor="#ffe0c0" width="98%"><tr><th colspan=2 align='left'> 
Komenda @switch: 
</th></tr>
<tr><td><pre>
    @function string( len )
    @  if ( $len == 1 )
    @     return "z"
    @  else
    @     return "z" + $string( $len-1 )   
    @  endif 
    @endfunction    
      
    @switch "zz"
    @  case $string(1) :
          1
    @     break  
    @  case $string(2) :
          2
    @     break  
    @  case $string(3) :
          3
    @     break  
    @endswitch
</pre></td><td><pre>
     2      
</pre></tr></table><p>
 <a name='_use'> 
  <p><b>      @ use </b><p>
Komenda <b><samp>@use</samp></b> (znana z jêzyka Perl) pozwala za³adowaæ 
kod szablonu z innego pliku. 
Nazwa pliku musi byæ podana w postaci sta³ego stringu.
Kod za³adowanego szablonu nie jest
interpretowany, s± natomiast dostêpne zdefiniowane w nim funkcje.
<b><samp>Temgen</samp></b> dba o to, aby modu³y nie by³y ³adowane wielokrotnie.
<p>
<table border=1 bgcolor="#ffe0c0" width="98%"><tr><th colspan=2 align='left'> 
Komenda @use: 
</th></tr>
<tr><td><pre>
   @use "foo.tg"    
   @  $foo()
</pre></td><td><pre>
   FOO     
</pre></tr></table><p>
 <a name='_printf'> 
  <p><b>      $printf() </b><p>
Funkcja <b><samp>$printf</samp></b> s³u¿y do formatowania wyra¿eñ i dzia³a
podobnie do funkcji z rodziny printf (3).
<p>
<table border=1 bgcolor="#ffe0c0" width="98%"><tr><th colspan=2 align='left'> 
$printf() 
</th></tr>
<tr><td><pre>
    $printf( "%-10s %d 0x%02X", "foo", 10, 10 ) 
</pre></td><td><pre>
 foo        10 0x0A  
</pre></tr></table><p>
 <a name='_size'>   
  <p><b>      $size()  </b><p>
Funkcja <b><samp>$size</samp></b> zwraca rozmiar (liczbê pól) obiektu z³o¿onego.
<p>
<table border=1 bgcolor="#ffe0c0" width="98%"><tr><th colspan=2 align='left'> 
$size() 
</th></tr>
<tr><td><pre>
    @ $x = 1
    @ $y = [ 1, 2, 3 ]
    @ $z = [ a:"foo", b:10 ]
    
    $size($x)  $size($y)  $size($z)  $size($undef)  
</pre></td><td><pre>
  0  3  2  0   
</pre></tr></table><p>
 <a name='_strlen'>
  <p><b>      $strlen() </b><p>
Funkcja <b><samp>$strlen</samp></b> zwraca d³ugo¶æ napisu.
<p>
<table border=1 bgcolor="#ffe0c0" width="98%"><tr><th colspan=2 align='left'> 
$strlen() 
</th></tr>
<tr><td><pre>
    @ $x = 1
    @ $y = "Foo Bar"
   
    $strlen($x)  $strlen($y)  $strlen($undef)
</pre></td><td><pre>
    0  7  0   
</pre></tr></table><p>
 <a name='_substr'>
  <p><b>      $substr() </b><p>
Funkcja <b><samp>$substr</samp></b> zwraca fragment stringu pocz±wszy od zadanego
znaku, o podanej d³ugo¶ci (lub do koñca, je¶li podano tylko dwa argumenty).
<p>
<table border=1 bgcolor="#ffe0c0" width="98%"><tr><th colspan=2 align='left'> 
$substr() 
</th></tr>
<tr><td><pre>
    $substr( "ABCDEFGHIJK", 2, 5 )
    $substr( "ABCDEFGHIJK", 2 )
    $substr( "ABCDEFGHIJK", 2, 50 )
</pre></td><td><pre>
  CDEFG
  CDEFGHIJK   
  CDEFGHIJK
</pre></tr></table><p>
 <a name='_system'>
  <p><b>      $system() </b><p>
Funkcja <b><samp>$system</samp></b> wykonuje polecenie systemowe, czyta jego 
wyj¶cie standardowe i zwraca jego zawarto¶æ jako rezultat.
<p>
<table border=1 bgcolor="#ffe0c0" width="98%"><tr><th colspan=2 align='left'> 
$system() 
</th></tr>
<tr><td><pre>
    $system("ps")   
</pre></td><td><pre>
      PID TTY          TIME CMD
      348 pts/0    00:00:00 bash   
      713 pts/0    00:00:00 tg
      714 pts/0    00:00:00 ps
</pre></tr></table><p>
 <a name='_tplfile'>
  <p><b>      $tplfile() </b><br>
 <a name='_tplline'>
     <b>      $tplline() </b><p>
Funkcje <b><samp>$tplfile</samp></b> i <b><samp>$tplline</samp></b> zwracaj± odpowiednio 
nawê pliku i numer linii szablonu, w miejscu, z którego zosta³y 
wywo³ane.
<p>
<table border=1 bgcolor="#ffe0c0" width="98%"><tr><th colspan=2 align='left'> 
$tplfile(), $tplline() 
</th></tr>
<tr><td><pre>
    \#line  $tplline()  \"$tplfile()\"     
</pre></td><td><pre>
#line  2  "sample.tg"      
</pre></tr></table><p>
   <a name=section4>
   <h2> 4. Przyk³ady </h2>
W katalogu <b><samp>sample/</samp></b> znajduje siê kilka przyk³adowych szablonów.
<ol>
<li> <b><samp>sample/class/</samp></b> - przyk³ad u¿ycia temgena do generowania kodu w C++
<li> <b><samp>sample/docex/</samp></b> - przyk³ady z dokumentacji (któr± czytasz)
<li> <b><samp>sample/getopt/</samp></b> - klasyczny przyk³ad, dotycz±cy obs³ugi opcji programu
</ol>
   <a name=section5>
   <h2> 5. Kontakt z autorem, licencja </h2>
Autorem <b><samp>temgena</samp></b> jest Marek £êtowski
(mletowski@firma.interia.pl).
Wszelkie uwagi i rady s± mile widziane.
Program udostêpniony jest publicznie wraz z pe³nym kodem ¼ród³owym, 
w oparciu o licencjê GNU.
<p>
<hr>
<small>
<a href="intro_pl.html"> Polish version </a> -
<a href="intro.html"> English version </a> -
<a href="temgen_pl.html"> Dokumentacja </a> -
Download: <a href="http://download.berlios.de/temgen/tg-0.11.tgz"> tg-0.11.tgz </a>
</small>
</body></html>
