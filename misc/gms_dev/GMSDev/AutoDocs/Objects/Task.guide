@DATABASE "Task"
@AUTHOR   "Paul Manias"
@NODE     "Main" "Object: Task"

@{b}@{u}OBJECT DOCUMENTATION@{uu}@{ub}
Name:      @{"TASK" LINK "Description"}
Date:      June 1998
Author:    Paul Manias
Copyright: DreamWorld Productions, 1996-1998.  All rights reserved.

@EndNode
---------------------------------------------------------------------------
@NODE  "Description" "Object: Task"

@{b}@{u}OBJECT@{uu}@{ub}
Name:    Task
Version: 2
ID:      ID_TASK
Module:  @{"Kernel" LINK "GMSDev:AutoDocs/Kernel.guide/Functions"}
Include: @{"system/tasks.h" LINK "GMSDev:Includes/system/tasks.h/Main"}
Type:    Complex

@{b}@{u}DESCRIPTION@{uu}@{ub}
The  Task object is automaticaly created for every program that is launched
by  the  system.   You can also create new tasks through the correct use of
Get() and Init().

The  most  that  the average program will do with this structure is pass it
around  to  functions  that ask for it.  If you want to get the Task object
for your program, you can make a call to FindDPKTask().

@{b}@{u}ACTIONS@{uu}@{ub}
The Task object supports the following actions:

     @{"Free()" LINK "GMSDev:AutoDocs/Kernel.guide/Free()"} - Free a Task from the system.
     @{"Get()" LINK "GMSDev:AutoDocs/Kernel.guide/Get()"}  - Get a new Task structure.
     @{"Init()" LINK "GMSDev:AutoDocs/Kernel.guide/Init()"} - Initialise a Task.

@{b}@{u}STRUCTURE@{uu}@{ub}
The Task object consists of the following public fields:

     @{"Args" LINK "TSK_Args"}           - User's command line arguments.
     @{"Author" LINK "TSK_Author"}         - Who wrote the program.
     @{"Code" LINK "TSK_Code"}           - Pointer to launch code.
     @{"Copyright" LINK "TSK_Copyright"}      - Copyright details.
     @{"Date" LINK "TSK_Date"}           - Date of compilation.
     @{"DPKBase" LINK "TSK_DPKBase"}        - Kernel function base.
     @{"DPKTable" LINK "TSK_DPKTable"}       - DPK jump table to be generated.
     @{"GVBase" LINK "TSK_GVBase"}         - Global variable base pointer.
     @{"MinDPKRevision" LINK "TSK_MinDPKRevision"} - Minimum required revision of kernel.
     @{"MinDPKVersion" LINK "TSK_MinDPKVersion"}  - Minimum required version of kernel.
     @{"Name" LINK "TSK_Name"}           - Name of the task.
     @{"Short" LINK "TSK_Short"}          - Short description of the program/task.
     @{"Source" LINK "TSK_Source"}         - Where to load the executable from.
     @{"UserData" LINK "TSK_UserData"}       - Open storage space.

@EndNode
---------------------------------------------------------------------------
@NODE "TSK_Args" "Object: Task"

@{b}@{u}FIELD@{uu}@{ub}
Name:        Args
Type:        BYTE *
Inheritance: User
Status:      Read/Init

@{b}@{u}DESCRIPTION@{uu}@{ub}
If  a  program  is written to accept user arguments, then this field is the
place  to  obtain  them.   If  the  user  did  not  supply any command line
arguments, this field will be set to NULL.

The  arguments will not be altered in any way by the system, so if the user
enters:

  1> YourProgram OPT=1 PREFS MyPrefs

Then you will get:

  "OPT=1 PREFS MyPrefs"

If there are no arguments then this field will be set to NULL.

@EndNode
---------------------------------------------------------------------------
@NODE "TSK_Author" "Object: Task"

@{b}@{u}FIELD@{uu}@{ub}
Name:        Author
Type:        BYTE *
Inheritance: Source
Status:      Read/Init

@{b}@{u}DESCRIPTION@{uu}@{ub}
This  field gives information about the author of the program/task.  If the
author is not determinable from the Source, then this field will usually be
set to NULL.

If you are creating a child Task from within your own program, there is not
a lot of point in setting this field.

@EndNode
---------------------------------------------------------------------------
@NODE "TSK_Code" "Object: Task"

@{b}@{u}FIELD@{uu}@{ub}
Name:        Code
Type:        LONG (*Code)(mreg(__a0) *Task)
Inheritance: Source
Status:      Read/Init

@{b}@{u}DESCRIPTION@{uu}@{ub}
This  field  will point to the beginning of the task's entry point.  When a
Task  is executed for the first time it will receive its own Task structure
so that it may start up correctly.

Do  not  call the Code routine yourself - use the Activate() function to do
this correctly.

@{b}@{u}SEE ALSO@{uu}@{ub}
Kernel: @{"Activate()" LINK "GMSDev:AutoDocs/Kernel.guide/Activate()"}

@EndNode
---------------------------------------------------------------------------
@NODE "TSK_Copyright" "Object: Task"

@{b}@{u}FIELD@{uu}@{ub}
Name:        Copyright
Type:        BYTE *
Inheritance: Source
Status:      Read/Init

@{b}@{u}DESCRIPTION@{uu}@{ub}
The developer of the program can set copyright details which will appear in
this  string.   The  copyright  should  include  the  company name, year of
copyright  and  any  extra  details.   The  string  should be kept under 80
characters.

@EndNode
---------------------------------------------------------------------------
@NODE "TSK_Date" "Object: Task"

@{b}@{u}FIELD@{uu}@{ub}
Name:        Date
Type:        BYTE *
Inheritance: Source
Status:      Read/Init

@{b}@{u}DESCRIPTION@{uu}@{ub}
The  Date  usually specifies the date on which the program was compiled for
public  release.   It  is  up  to  the developer of the program to set this
string correctly and keep it up to date.

The correct specification for this string is "Day Month Year" as in the
following examples:

  "14 February 1998"
  "6 May 1997"

Do not use shorthand dates such as "14/2/98".

@EndNode
---------------------------------------------------------------------------
@NODE "TSK_DPKBase" "Object: Task"

@{b}@{u}FIELD@{uu}@{ub}
Name:        DPKBase
Type:        APTR
Inheritance: Source
Status:      Read Only.

@{b}@{u}DESCRIPTION@{uu}@{ub}
Upon  initialisation, a DPKBase function table will be generated and placed
in  this field so that the Task can communicate with the kernel.  This jump
table will be private to the Task, so do not try to read it even if you are
the parent.

@EndNode
---------------------------------------------------------------------------
@NODE "TSK_DPKTable" "Object: Task"

@{b}@{u}FIELD@{uu}@{ub}
Name:        DPKTable
Type:        WORD
Inheritance: Source
Status:      Init Only.

@{b}@{u}DESCRIPTION@{uu}@{ub}
A  program may request a jump table format that is suitable for its calling
process.  Possible table types are JMP_AMIGAE and JMP_DEFAULT for example.

You  should  only  set  this field if you are initialising an internal task
that will be making its own calls to the dpkernel.

@EndNode
---------------------------------------------------------------------------
@NODE "TSK_GVBase" "Object: Task"

@{b}@{u}FIELD@{uu}@{ub}
Name:        GVBase
Type:        struct GVBase *
Inheritance: Source
Status:      Read Only.

@{b}@{u}DESCRIPTION@{uu}@{ub}
The  dpkernel  has  a special structure referred to as the "Global Variable
Base"  which  holds  information  for the entire system.  Every program can
gain access to this structure, but generally it is only useful for modules.

@{b}@{u}SEE ALSO@{uu}@{ub}
Include: @{"system/globalbase.h" LINK "GMSDev:Includes/system/globalbase.h/Main"}

@EndNode
---------------------------------------------------------------------------
@NODE "TSK_MinDPKRevision" "Object: Task"

@{b}@{u}FIELD@{uu}@{ub}
Name:        MinDPKRevision
Type:        WORD
Inheritance: Source
Status:      Read Only.

@{b}@{u}DESCRIPTION@{uu}@{ub}
A program can set a minimum revision of the dpkernel, in conjunction with
the MinDPKVersion field.

If  the  dpkernel  version/revision  settings in the system do not equal or
better  the  programs  requirements,  the  Init()  process of the Task will
actually  cause  a failure.  So if your Init() succeeded, these fields will
tell you what the program's minimum requirements were.

@{b}@{u}SEE ALSO@{uu}@{ub}
Field: @{"MinDPKVersion" LINK "TSK_MinDPKVersion"}

@EndNode
---------------------------------------------------------------------------
@NODE "TSK_MinDPKVersion" "Object: Task"

@{b}@{u}FIELD@{uu}@{ub}
Name:        MinDPKVersion
Type:        WORD
Inheritance: Source
Status:      Read Only.

@{b}@{u}DESCRIPTION@{uu}@{ub}
A  program  can  ask  for a minimum version of the dpkernel, in conjunction
with the MinDPKRevision field.

If  the  dpkernel  version/revision  settings in the system do not equal or
better  the  programs  requirements,  the  Init()  process of the Task will
actually  cause  a failure.  So if your Init() succeeded, these fields will
tell you what the program's minimum requirements were.

@{b}@{u}SEE ALSO@{uu}@{ub}
Field: @{"MinDPKRevision" LINK "TSK_MinDPKRevision"}

@EndNode
---------------------------------------------------------------------------
@NODE "TSK_Name" "Object: Task"

@{b}@{u}FIELD@{uu}@{ub}
Name:        Name
Type:        BYTE *
Inheritance: Source
Status:      Read/Init

@{b}@{u}DESCRIPTION@{uu}@{ub}
This  field  specifies  the  name  of  the  Task  or  program that has been
initialised.   It  is  up  to  the developer of the program to set the Name
which will appear in this field.

If there is no name for the Task, this field may be set to NULL.

@EndNode
---------------------------------------------------------------------------
@NODE "TSK_Short" "Object: Task"

@{b}@{u}FIELD@{uu}@{ub}
Name:        Short
Type:        BYTE *
Inheritance: Source
Status:      Read/Init

@{b}@{u}DESCRIPTION@{uu}@{ub}
This  field  allows  for  the  specification of a short description for the
Task.  The description should be under 80 characters (one sentence).

@EndNode
---------------------------------------------------------------------------
@NODE "TSK_Source" "Object: Task"

@{b}@{u}FIELD@{uu}@{ub}
Name:   Source
Type:   APTR
Status: Read/Init

@{b}@{u}DESCRIPTION@{uu}@{ub}
When  a Task object is Init()ialised this field will be checked for a vaild
source  such  as  a  FileName,  MemPtr  or File object.  If found, then the
excutable  code  will  be loaded from this source.  The source must be in a
format recognised for loading by the Segment object.

If  a  Source  is not provided then you are expected to supply a pointer in
the Code field.

@EndNode
---------------------------------------------------------------------------
@NODE "TSK_UserData" "Object: Task"

@{b}@{u}FIELD@{uu}@{ub}
Name:   UserData
Type:   APTR
Status: Read/Write

@{b}@{u}DESCRIPTION@{uu}@{ub}
A  program  can  use this field to point to its own task-based data.  There
are no restrictions on the use of this field.

@EndNode
---------------------------------------------------------------------------
