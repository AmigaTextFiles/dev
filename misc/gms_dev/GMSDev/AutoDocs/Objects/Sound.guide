@DATABASE "Sound"
@AUTHOR   "Paul Manias"
@NODE     "Main" "Sound Object Documentation"

@{b}@{u}OBJECT DOCUMENTATION@{uu}@{ub}
Name:      @{"SOUND" LINK "Description"}
Version:   1.1
Date:      May 1998
Author:    Paul Manias
Copyright: DreamWorld Productions, 1996-1998.  All rights reserved.

@{b}@{u}CHANGES VERSION 1.1@{uu}@{ub}
Edited:  Sound->Priority

@{b}@{u}CHANGES VERSION 1.0@{uu}@{ub}
Added:   Sound->Attrib:SEMPTY
         Sound->Pair

Removed: Sound->LastChannel
         Sound->Header

Edited:  Sound->Priority
         Sound->Attrib:SMODPER
         Sound->Attrib:SMODVOL
         Activate()

@{b}@{u}CHANGES VERSION 0.9B@{uu}@{ub}
Added:   Sound->LastChannel
         Sound->Attrib:SSTOPLAST

Deleted: Sound->Attrib:SBIT8
         Sound->Attrib:SBIT16
         Sound->Channel

@EndNode
---------------------------------------------------------------------------
@NODE "Description" "Object: Sound"

@{b}@{u}OBJECT@{uu}@{ub}
Name:    Sound
Version: 1
ID:      ID_SOUND
Module:  @{"Sound" LINK "GMSDev:AutoDocs/Sound.guide/Functions"}
Include: @{"sound/sound.h" LINK "GMSDev:Includes/sound/sound.h"}
Type:    Simple

@{b}@{u}DESCRIPTION@{uu}@{ub}
The  purpose of the Sound object is to provide the means for any program to
load  and  play  a  sound file.  By default all loading and saving of sound
data  is  in  IFF  8SVX.   Formats  such  as WAVE can be supported in child
objects of the Sound class.

The object uses an abstract channeling system, so you will never have to be
concerned  with  channel  numbers  when  playing  sounds.   Left  and Right
speakers are fully supported, so you can easily achieve stereo effects.

@{b}@{u}ACTIONS@{uu}@{ub}
The Sound object supports the following actions:

   * @{"Activate()" LINK "SND_Activate()"}      - Plays a Sound.
     @{"CopyStructure()" LINK "GMSDev:AutoDocs/Kernel.guide/CopyStructure()"} - Copy sound fields.
     @{"Deactivate()" LINK "GMSDev:AutoDocs/Kernel.guide/Deactivate()"}    - Stop a sound from playing.
     @{"Free()" LINK "GMSDev:AutoDocs/Kernel.guide/Free()"}          - Free a Sound object.
     @{"Get()" LINK "GMSDev:AutoDocs/Kernel.guide/Get()"}           - Get a new Sound structure.
   * @{"Init()" LINK "SND_Init()"}          - Initialise a Sound.
     @{"Load()" LINK "GMSDev:AutoDocs/Kernel.guide/Load()"}          - Load a Sound file.

@{b}@{u}STRUCTURE@{uu}@{ub}
The Sound structure consists of the following public fields:

     @{"Attrib" LINK SND_Attrib}    - Sound attributes.
     @{"Data" LINK SND_Data}      - Address of sample data.
     @{"Frequency" LINK SND_Frequency} - Sampled frequency.
     @{"Length" LINK SND_Length}    - Length of sample data in bytes.
     @{"Octave" LINK SND_Octave}    - Octave/Note setting.
     @{"Pair" LINK SND_Pair}      - Pair with another Sound for modulation.
     @{"Priority" LINK SND_Priority}  - Priority.
     @{"Source" LINK SND_Source}    - Where the sound comes from.
     @{"Volume" LINK SND_Volume}    - Volume of sample (0 - 100).

@EndNode
---------------------------------------------------------------------------
@NODE "SND_Attrib" "Object: Sound"

@{b}@{u}FIELD@{uu}@{ub}
Name:      Attrib
Type:      LONG
On Change: Cannot change after initialisation.
Status:    Read/Init

@{b}@{u}DESCRIPTION@{uu}@{ub}
Specifies the attribute flags for a Sound.

  @{u}SDF_EMPTY@{uu}
  Only play if a sound channel is empty.

  @{u}SDF_FORCE@{uu}
  Force playing through the selected speaker (eg if SFORCE|SLEFT then the
  sound will only play through left speaker channels).

  @{u}SDF_LEFT@{uu}
  Preferably play the sound through the left speaker.  Note that setting in
  combination with SRIGHT will produce unreliable results.

  @{u}SDF_MODPER@{uu}
  Modulates a sound's period with a paired sound carrying modulation data
  (see the Pair field).

  @{u}SDF_MODVOL@{uu}
  Modulates the volume with the a paired sound carrying modulation data
  (see the Pair field).

  @{u}SDF_RIGHT@{uu}
  Preferably play the sound through the right speaker.  Note that setting
  in combination with SLEFT will produce unreliable results.

  @{u}SDF_REPEAT@{uu}
  Repeats the sample forever.

  @{u}SDF_STOPLAST@{uu}
  If the sound is still playing through its last channel, stop it before
  playing through a new channel.

@EndNode
---------------------------------------------------------------------------
@NODE "SND_Data" "Object: Sound"

@{b}@{u}FIELD@{uu}@{ub}
Name:        Data
Type:        APTR
Inheritance: Source
On Change:   Cannot change after initialisation.
Status:      Read/Init

@{b}@{u}DESCRIPTION@{uu}@{ub}
This  field  points  to  the actual sample data that is going to be played.
The length of the data is specified in the Sound->Length field.

@EndNode
---------------------------------------------------------------------------
@NODE "SND_Frequency" "Object: Sound"

@{b}@{u}FIELD@{uu}@{ub}
Name:        Frequency
Type:        LONG
Inheritance: Source
On Change:   Cannot change after initialisation.
Status:      Read/Init

@{b}@{u}DESCRIPTION@{uu}@{ub}
This  field  specifies  the  frequency  of  the sampled sound data.  If the
frequency  cannot  be  determined from the Source, this field may remain as
NULL.

@EndNode
---------------------------------------------------------------------------
@NODE "SND_Length" "Object: Sound"

@{b}@{u}FIELD@{uu}@{ub}
Name:        Length
Type:        LONG
Inheritance: Source
On Change:   Cannot change after initialisation.
Status:      Read/Init

@{b}@{u}DESCRIPTION@{uu}@{ub}
This field specifies the length of the sample data in bytes.

@EndNode
---------------------------------------------------------------------------
@NODE "SND_Octave" "Object: Sound"

@{b}@{u}FIELD@{uu}@{ub}
Name:        Octave
Type:        WORD
Inheritance: Source
On Change:   Dynamic
Status:      Read/Write

@{b}@{u}DESCRIPTION@{uu}@{ub}
The  octave  at  which  to  play this sample.  The highest pitched value is
OCT_G0S, the lowest is OCT_A7S.  There are about 94 available settings, see
"sound/sound.i" to look at the complete list.

If  you change the octave, you will not hear the difference until the Sound
is played again.

@{b}@{u}SEE ALSO@{uu}@{ub}
Include: @{"sound/sound.i" LINK "GMSDev:Includes/sound/sound.i/Main"}

@EndNode
---------------------------------------------------------------------------
@NODE "SND_Pair" "Object: Sound"

@{b}@{u}FIELD@{uu}@{ub}
Name:      Pair
Type:      struct Sound *
On Change: Cannot change after initialisation.
Status:    Read/Init

@{b}@{u}DESCRIPTION@{uu}@{ub}
If  you  want to modulate a Sound with a second set of sound data, you will
need  to  create  2 Sound objects and Pair them together.  You can then use
the SDF_MODVOL and SDF_MODPER flags to create modulation effects.

To  do this, initialise the Sound carrying the modulation data first.  Then
initialise  your main Sound, with the Pair field pointing to the modulation
Sound.  To play the sound effect, simply Activate() your main Sound.  Never
attempt to play the modulation Sound!

Note  that  sound  modulation  is  not  always  guaranteed to work, as some
hardware may not support it.  In cases such as this, the Sound carrying the
modulation  data  will  simply  be ignored, and the main Sound will play as
normal.

@EndNode
---------------------------------------------------------------------------
@NODE "SND_Priority" "Object: Sound"

@{b}@{u}FIELD@{uu}@{ub}
Name:      Priority
Type:      WORD
On Change: Dynamic
Default:   0
Range:     -100 to 100
Status:    Read/Write

@{b}@{u}DESCRIPTION@{uu}@{ub}
The  priority  of your Sound goes here.  This field is used to determine if
your  Sound  should  be  played  when  all  available  channels  are  busy.
Naturally, higher priorities are played over samples with low priorities.

@{b}@{u}EXAMPLE@{uu}@{ub}
Lets  say  that the user is running a typical AGA Amiga system with 4 sound
channels.  Currently, all channels are playing with these settings:

  1: 23
  2: 75
  3: 23
  4: 100

If  you  played  a  sound  with priority 23 or higher, the sound in the 1st
channel  would stop and your new sound would play over it.  If you tried to
play a Sound with a priority of 22 or less, the user would not hear it.

@EndNode
---------------------------------------------------------------------------
@NODE "SND_Source" "Object: Sound"

@{b}@{u}FIELD@{uu}@{ub}
Name:      Source
Type:      APTR
On Change: Cannot change after initialisation.
Status:    Read/Init

@{b}@{u}DESCRIPTION@{uu}@{ub}
This  field  is  for  specifying  the  origin of your Sound data.  You will
normally place a FileName source here, but MemPtr's and the File object are
also supported.

@EndNode
---------------------------------------------------------------------------
@NODE "SND_Volume" "Object: Sound"

@{b}@{u}FIELD@{uu}@{ub}
Name:        Volume
Type:        WORD
Inheritance: Source
To Change:   @{"SetVolume()" LINK "GMSDev:AutoDocs/Sound.guide/SetVolume()"}
Default:     User setting.
Range:       0 - 100
Status:      Read/Write

@{b}@{u}DESCRIPTION@{uu}@{ub}
The volume of the sound, which lies in the range 0 - 100.  A volume of zero
will not be heard, a volume of 100 is the loudest.

Use SetVolume() to alter a Sound's volume while it is playing.

If  you  write  to Sound->Volume directly, the new Sound volume will not be
heard until the next time you call Activate().

@EndNode
---------------------------------------------------------------------------
@NODE "SND_Activate()" "Object: Sound"

@{b}@{u}ACTION@{uu}@{ub}
Name:     @{"Activate()" LINK "GMSDev:AutoDocs/Kernel.guide/Activate()"}
Synopsis: Error = Activate(Sound)
Short:    Play a sound through an audio channel.

@{b}@{u}DESCRIPTION@{uu}@{ub}
Plays  a  sound according to the settings in the Sound object.  Prioritised
sounds  will  not  be  played  if  they  cannot  equal or better any of the
audio channels' priority settings.

@EndNode
---------------------------------------------------------------------------
@NODE "SND_Init()" "Action: Init(Sound,Container)"

@{b}@{u}ACTION@{uu}@{ub}
Name:     @{"Init()" LINK "GMSDev:AutoDocs/Kernel.guide/Activate()"}
Synopsis: Sound = Init(Sound, Container)
Short:    Initialise a sound structure for the play routines.

@{b}@{u}DESCRIPTION@{uu}@{ub}
This  function  will  initialise a Sound for use in the play routines.  Its
main  job  is  to  load  and  assess the sound header, and fill in any NULL
fields in your object.

@{b}@{u}NOTE@{uu}@{ub}
If  the  sound  is  in  RAW  format you will need to set most of the fields
yourself.   (Keep in mind that storing sounds as raw data is definitely not
recommended).

@EndNode
---------------------------------------------------------------------------
