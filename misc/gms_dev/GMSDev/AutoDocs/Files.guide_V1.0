@DATABASE "Files"
@AUTHOR   "Paul Manias"
@NODE     "Main" "Files"

@{b}@{u}MODULE DOCUMENTATION@{uu}@{ub}
Name:      @{"FILES" LINK "Functions"} AUTODOC
Version:   1.0
Number:    MOD_FILES
Date:      February 1998
Author:    Paul Manias
Copyright: DreamWorld Productions, 1996-1998.  All rights reserved.

@{b}@{u}CHANGES VERSION 1.0@{uu}@{ub}
This document was completely revised.

@{b}@{u}CHANGES VERSION 0.9B@{uu}@{ub}
Added:   WriteComment()
         WriteDate()

Deleted: ReadFile()
         WriteFile()

Edited:  OpenFile()

@EndNode
---------------------------------------------------------------------------
@NODE "Functions" "File Module"

 @{b}OBJECTS@{ub}
 @{"Directory" LINK "GMSDev:AutoDocs/Objects/Directory.guide/Description"}
 @{"File" LINK "GMSDev:AutoDocs/Objects/File.guide/Description"}

 @{b}ACTIONS@{ub}
 @{"GetFComment()" LINK "GetFComment()"}
 @{"GetFDate()" LINK "GetFDate()"}
 @{"GetFPermissions()" LINK "GetFPermissions()"}
 @{"GetFSize()" LINK "GetFSize()"}
 @{"OpenFile()" LINK "OpenFile()"}
 @{"SetFComment()" LINK "SetFComment()"}
 @{"SetFDate()" LINK "SetFDate()"}

@EndNode
-----------------------------------------------------------------------------
@NODE "GetFComment()" "Files: GetFComment()"

@{b}@{u}FUNCTION@{uu}@{ub}
Name:     GetFComment()
Short:    Get the comment from a File or Directory.
Synopsis: BYTE * GetFComment(*Object [a0])

@{b}@{u}DESCRIPTION@{uu}@{ub}
This  function  will return a string that specifies the user commment for a
File  or  Directory.   The  maximum  string  length that this function will
return is 255 bytes (including NULL terminator).

This function will return a NULL pointer if:

  A) An error occurs.
  B) The File/Directory has no comment.
  C) The file system has no support for comments.

Keep  in  mind  that  certain  file  types  (such as MemPtr) do not support
comments.

@{b}@{u}INPUT@{uu}@{ub}
Object
  Pointer to an initialised File or Directory object.

@{b}@{u}RESULT@{uu}@{ub}
Returns  a  string that points to the file comment, or NULL.  The string is
allocated as a normal memory block, and it will be freed by the system when
you  Free()  the  file,  or if you call SetFComment() or GetFComment() a
second time.

@EndNode
-----------------------------------------------------------------------------
@NODE "GetFDate()" "Files: GetFDate()"

@{b}@{u}FUNCTION@{uu}@{ub}
Name:     GetFDate()
Short:    Read the date stamp of a File or Directory object.
Synopsis: *Time GetFDate(*Object [a0])

@{b}@{u}DESCRIPTION@{uu}@{ub}
This  function  will return a pointer to a Time object, which specifies the
date  on  which  this  File or Directory was last stamped.  This is usually
considered  to  be  the  last date on which the file was modified, but this
does not always have to be the case.

Keep in mind that certain file types (such as MemPtr) do not support dates.

@{b}@{u}INPUT@{uu}@{ub}
Object
  Pointer to an initialised File or Directory object.

@{b}@{u}RESULT@{uu}@{ub}
Returns  a pointer to a Time object, or NULL on error.  This object will be
automatically freed by the system when you Free() the File/Directory, or if
you call SetFDate() or GetFDate() a second time.

@EndNode
-----------------------------------------------------------------------------
@NODE "GetFPermissions()" "Files: GetFPermissions()"

@{b}@{u}FUNCTION@{uu}@{ub}
Name:     GetFPermissions()
Short:    Read the permissions from a File or Directory.
Synopsis: LONG GetFPermissions(*Object [a0])

@{b}@{u}DESCRIPTION@{uu}@{ub}
This  function  returns  the  user  permissions  for  a  particular File or
Directory.  Permission flags currently available are:

  @{u}FPF_HIDDEN@{uu}
  If the file should be hidden from the user, this flag will be set.

  @{u}FPF_DELETE@{uu}
  If the user has delete rights then this flag will be set.

  @{u}FPF_READ@{uu}
  This  flag  allows  the user to read the file so that its contents may be
  viewed.  Note that read access does not give execute access.

  @{u}FPF_WRITE@{uu}
  This flag allows the user to write data to the file.  While this does not
  give  delete access, be warned that it is possible to clear a file of all
  data through the use of Write().

  @{u}FPF_EXECUTE@{uu}
  Execute rights apply to executable files and scripts.

  @{u}FPF_PASSWORD@{uu}
  This  is  a  special  flag that can lock a user out from a file until the
  correct  password  is  given.   Note  that support for this flag is still
  under-way  and  currently  most  file-systems  are not able to support it
  directly.

  @{u}FPF_SCRIPT@{uu}
  Standard  text  files  which  are  set  with this flag will be treated as
  scripts,  which are capable of executing multiple commands.  This is more
  of an informative flag rather than a user right.

@{b}@{u}INPUT@{uu}@{ub}
Object
  Pointer to an initialised File or Directory object.

@{b}@{u}RESULT@{uu}@{ub}
Returns a set of the above flags.  Will return NULL if an error occurs.

@EndNode
-----------------------------------------------------------------------------
@NODE "GetFSize()" "Files: GetFSize()"

@{b}@{u}FUNCTION@{uu}@{ub}
Name:     GetFSize()
Short:    Returns the current byte size of a File.
Synopsis: LONG GetFSize(*File [a0])

@{b}@{u}DESCRIPTION@{uu}@{ub}
Call this function to get the current byte size of an initialised File.  If
there is a failure, a value of -1 will be returned.

@{b}@{u}INPUT@{uu}@{ub}
File
  Pointer to an initialised File object.

@{b}@{u}RESULT@{uu}@{ub}
Returns  the  Size  of the File or -1 on error.  For really huge files of 2
gigabytes or greater, the maximum value of 2,147,483,647 will be returned.

@EndNode
-----------------------------------------------------------------------------
@NODE "OpenFile()" "Files: OpenFile()"

@{b}@{u}FUNCTION@{uu}@{ub}
Name:     OpenFile()
Short:    Opens a file for I/O operations.
Synopsis: struct File * OpenFile(APTR Source [a0], LONG Flags [d0])

@{b}@{u}DESCRIPTION@{uu}@{ub}
This function prepares a File so that it is ready for reading and writing.

If  you  Init()ialised  your  File  with FL_READ or FL_WRITE mode set, then
Init() will have already called this function and you will not need to call
it again.  Attempts to call OpenFile() more than once are simply ignored.

This function accepts standard Source structures, e.g.  FileName and MemPtr
types.  If you specify one of these, a new File object will be created from
the Source and returned back to you in an initialised/opened state.

@{b}@{u}NOTE@{uu}@{ub}
When you have finished with your File object make sure that you call Free()
on it.

@{b}@{u}INPUTS@{uu}@{ub}
Source
  Pointer to an initialised File object.  If you pass a FileName or MemPtr
  source, a File object will be automatically allocated/initialised for
  you, and then opened.

Flags
  One or more flags as outlined in File->@{"Flags" LINK "GMSDev:AutoDocs/Objects/File.guide/FILE_Flags"}.  You MUST specify FL_READ
  and/or FL_WRITE mode, otherwise there is no point in calling OpenFile().

@{b}@{u}RESULT@{uu}@{ub}
Pointer to the opened File object or NULL if failure.

@EndNode
-----------------------------------------------------------------------------
@NODE "SetFComment()" "Files: SetFComment()"

@{b}@{u}FUNCTION@{uu}@{ub}
Name:     SetFComment()
Short:    Write a new comment to a file or directory.
Synopsis: LONG SetFComment(APTR Object [a0], BYTE *Comment [a1])

@{b}@{u}DESCRIPTION@{uu}@{ub}
This  function  sets  a  new  comment  for  a  File or Directory.  Although
comments  of  an  unlimited length could be supported, each file-system has
have  a cut-off point on the comment length, usually around 80 bytes or so.
This  function  will  support  comment strings of up to 255 bytes in length
(including NULL terminator).  Anything longer than this will be cut short.

If  the file is opened by some other Task with FL_EXCLUSIVE mode, this call
will fail.

@{b}@{u}INPUTS@{uu}@{ub}
Object
  Pointer to a Directory or File object supporting the FileName source
  type.

Date
  Pointer to a null terminated string.

@{b}@{u}RESULT@{uu}@{ub}
Returns ERR_OK if successful.

@{b}@{u}SEE ALSO@{uu}@{ub}
Files: @{"SetFDate()" LINK "SetFDate()"}
Field: @{"Comment" LINK "GMSDev:AutoDocs/Objects/File.guide/FILE_Comment"}

@EndNode
-----------------------------------------------------------------------------
@NODE "SetFDate()" "Files: SetFDate()"

@{b}@{u}FUNCTION@{uu}@{ub}
Name:     SetFDate()
Short:    Write a new date to a file or directory.
Synopsis: LONG SetFDate(*Object [a0], *Time [a1])

@{b}@{u}DESCRIPTION@{uu}@{ub}
Not implemented yet.

@{b}@{u}INPUTS@{uu}@{ub}
Object
  Pointer to a Directory or File object supporting the FileName source
  type.

Time
  Pointer to an initialised Time object.

@{b}@{u}RESULT@{uu}@{ub}
Returns ERR_OK if successful.

@{b}@{u}SEE ALSO@{uu}@{ub}
Files: @{"SetFComment()" LINK "SetFComment()"}

@EndNode
-----------------------------------------------------------------------------
