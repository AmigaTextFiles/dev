(welcome "Welcome to the installation of IMake.")
(set @app-name "IMake")
(set language "")

(procedure copy
    ; Börja kopiera
    ; Program filen med ikon.
    (if (<> directory "")
        (copyfiles (prompt "Copying IMake")
                   (help "")
                   (source "imake")
                   (dest directory)
        )
    )
    (if (<> directory "")
        (copyfiles (prompt "Copying IMake's icon")
                   (help "")
                   (source "imake.info")
                   (dest directory)
        )
    )

    (if (exists "libs:locale.library")
    (
        ; Katalog filen.
        (if (> nuffra 0)
            (
                (set spath (cat "Locale/Catalogs/" language))
                (set spath (cat spath "/IMake.Catalog"))
                (set dpath (cat "Locale:Catalogs/" language))
                (copyfiles (prompt "Copying catalog file")
                           (help "")
                           (source spath)
                           (dest dpath)
                )
            )
        )

        ; Guide filen med ikon.
        (copyfiles (prompt "Copying IMake.guide")
                   (help "")
                   (source "IMake.Guide")
                   (dest guidedirectory)
        )
        (copyfiles (prompt "Copying IMake.guide.info")
                   (help "")
                   (source "IMake.Guide.info")
                   (dest guidedirectory)
        )
    )
    )

    ; Reqtools.library
    (if (exists "libs:reqtools.library")
        ; Then
        ((set rtmsg "Libs:reqtools.library already exists. Do you want to install version 38.1292 of reqtools.library?"))
        ; Else
        ((set rtmsg "Reqtools.library is not installed. Do you want to install version 38.1292 in your Libs: directory?"))
    )
    (if (askbool
            (prompt rtmsg)
            (default 1)
            (help "")
        )
        (copyfiles (prompt "")
                 (help "")
                 (source "Libs/Reqtools.library")
                 (dest "Libs:")
        )
    )

)


; Börja installationen.
; Välj språk.
(set inttype
    (askchoice
        (prompt "Which language would you like to install")
        (help "If you dont choose english, a catalog file will be installed with the language of your choice.")
        (choices    "English (no catalog)"
                    "Svenska")
        (default 0)
    )
)

(if (= inttype 0)
    (set language "English")
)

(if (= inttype 1)
    (set language "Svenska")
)
(set nuffra inttype)

; Välj vart IMake skall hamna
(set directory
    (askdir
        (prompt "Choose a directory where IMake should end up")
        (help "Specify a directory where the main program should end up. You cold put the program where you want.\n\n")
        (default "work:")
    )
)

; Välj vart IMake.guide skall hamna
(set guidedirectory
    (askdir
        (prompt "Choose a directory where IMakes documentation should end up")
        (help "Specify a directory where the documentation should end up. You cold put the program where you want, but if you want to read it from within IMake (when you press the HELP key), you should put it in the same directory as IMake.\n\n")
        (default "work:")
    )
)

(copy)

(message "\nIMake has now been installed in " directory)

(exit (quiet))






