@database "handlers"

@Node Main "handlers"
@{b}@{u}handlers@{uu}@{ub}:
@{"port_handler()" Link "port_handler()"}
@{"queue_handler()" Link "queue_handler()"}
@EndNode
@Node "port_handler()" "port_handler"
@{b}@{u}port_handler@{uu}@{ub} -- standard serial/parallel/printer port handler.
  Port-handler allows AmigaDOS to interface to a standard parallel
  device, a standard printer device, and a standard serial device.
  Accessing @{i}"PAR:"@{ui} connects AmigaDOS to the system's parallel port.
  Accessing @{i}"PRT:"@{ui} connects AmigaDOS to the system's printer.Data written to
  PRT: is processed by the Amiga's printer device, handling conversions of ANSI
  sequences, and sent to the printer.Accessing "PRT:RAW" instead causes carriage
  return translation to be turned off in the printer device while printing.
  Accessing @{i}"SER:"@{ui} connects AmigaDOS to the system's default serial port.
  Following SER:, the baud rate and some control information can be supplied.
  This is done in the form "SER:baud/control" where baud is a number indicating
  the baud rate, and where control is a 3 letter sequence denoting the number
  of read/write bits, the parity, and the number of stop bits.For example,
  "SER:9600/8N1" connects to the serial port, sets the baud rate to 9600,
  with 8 bit data, no parity, and 1 stop bit.
SYNOPSIS
  @{FG shine}Open@{FG text}("PRT:[RAW]",...);
  @{FG shine}Open@{FG text}("SER:[@{i}baud@{ui}/@{i}control@{ui}]",...);
  @{FG shine}Open@{FG text}("PAR:",...);
  The possible @{i}control@{ui} settings are:
    1st character: 7 or 8
    2nd character: N (No parity), O (Odd parity), E (Even parity),
      M (Mark parity), S (Space parity)
    3rd character: 1 or 2
  Specifying no @{i}baud@{ui} rate or control values when accessing SER: gives you
  the values set in Serial preferences.
PACKETS
  ACTION_IS_FILESYSTEM
  ACTION_FINDINPUT
  ACTION_FINDOUTPUT
  ACTION_READ
  ACTION_WRITE
  ACTION_FINDUPDATE
  ACTION_END
MOUNTLIST ENTRIES
  dos.library automatically mounts PAR:, PRT:, and SER: upon system boot up.
  The mount entries used by dos.library are equivalent to:
    SER:Handler   = L:Port-Handler
        Priority  = 5
        StackSize = 800
        GlobVec   = 1
        Startup   = 0
    PAR:Handler   = L:Port-Handler
        Priority  = 5
        StackSize = 800
        GlobVec   = 1
        Startup   = 1
    PRT:Handler   = L:Port-Handler
        Priority  = 5
        StackSize = 1000
        GlobVec   = 1
        Startup   = 2
  @{b}Starting with V40@{ub}, you can also provide disk-based mount entries which let
  you use port-handler as a serial handler on various devices and units.
  The form of these mount entries is:
    SER0:EHandler  = L:Port-Handler
         Priority  = 5
         StackSize = 800
         GlobVec   = 1
         @{"Device" Link "include:exec/devices.h/Main" 25}   = serial.device
         @{"Unit" Link "include:exec/devices.h/Main" 32}     = 0
         Flags     = 0
         Control   = "8N1"
         Baud      = 9600
  The "Device", "Unit" and "Flags" keywords define the parameters
  that the handler uses for @{"OpenDevice()" Link "serial.guide/OpenDevice()"}."Baud" and "Control"
  define the default values for baud rate and control information for
  whenever that serial handler is accessed by name only, without
  explicit baud rate and control information specified.
NOTE
  Prior to V40, the baud rate and control information for SER: were
  only recognized if an A2232 multi-serial card was installed in the
  system.Starting with V40, these values are always recognized.
@EndNode                                        
@Node "queue_handler()" "queue_handler"
@{b}@{u}queue_handler@{uu}@{ub} -- an 'infinite' pipe (FIFO) handler.(V37)
  Queue-handler takes data from the output channel, buffers it up,
  allocating more memory as needed, and sends it to the input channel,
  as requested by the applications.Queue-handler never locks the output
  channel unless max_buffers was specified.Buffer size can be
  specified only on the first reference to a particular channel.

  Queue-handler works by invoking a seperate process every time an open packet
  is received, and uses a FIFO buffer pool approach to track the actual data.
SYNOPSIS
  @{FG shine}Open@{FG text}("PIPE:[@{i}channel_name@{ui}][[/[@{i}buf_size@{ui}]][/@{i}max_buffers@{ui}]]]");
  @{i}channel_name@{ui} - unique channel name to specify.Must begin with a non-numeric
    character.The channel_name is optional.
  @{i}buf_size@{ui} - Size in bytes of the buffers to allocate (default is 4096).
    The buf_size is optional.
  @{i}max_buffers@{ui} - maximum number of buffers allowed.Will suspend the output
    channel if exceeded.A max_buffers value of 0 indicates there should be
    no fixed limit on the number of buffers allocated.
PACKETS
  ACTION_IS_FILESYSTEM
  ACTION_FINDINPUT
  ACTION_FINDOUTPUT
  ACTION_READ
  ACTION_WRITE
  ACTION_FINDUPDATE
  ACTION_END
MOUNTLIST ENTRIES
  This is the default mountlist entry used for Queue-Handler:
    PIPE:Handler   = L:Queue-Handler
         Priority  = 5
         StackSize = 3000
         GlobVec   = -1
  Below is an extended mountlist entry which lets you specify a default
  number of buffers, and their size.There are some extra fields added
  at the end of the mountlist entry which aren't used for anything, but
  the Mount command requires that these fields be present.In this
  mountlist, the "Buffers" field indicates the default maximum number
  of buffers, and "SectorSize" indicates the size of these buffers.
    PIPE:FileSystem = L:Queue-Handler
         Priority   = 5
         StackSize  = 3000
         GlobVec    = -1
         SectorSize = 1024
         Buffers    = 2
         /* these are unused, but required by Mount */
         Surfaces        = 1
         SectorsPerTrack = 1
         LowCyl          = 0
         HighCyl         = 1
         @{"Device" Link "include:exec/devices.h/Main" 25}         = ""
         @{"Unit" Link "include:exec/devices.h/Main" 32}           = 0
EXAMPLE
  From process 1:
    @{FG shine}list@{FG text} >pipe: work: all
  From process 2:
    @{FG shine}type@{FG text} pipe:
  To gather the results of several C compilations:
    lc >pipe:ll foo
    lc >pipe:ll bar
    lc >pipe:ll road
    lc >pipe:ll kill
    @{FG shine}type@{FG text} pipe:ll
  To use channel names:
    @{FG shine}list@{FG text} >pipe:crazy
    ;Specifies a channel 'all_c' and a buffer size of 32000 bytes
    @{FG shine}copy@{FG text} #?.c @{FG shine}to@{FG text} >pipe:all_c/32000  ;
  To set a limit on the number of buffers to 5:
    ;create a channel without a channel-name, and only allow 5 buffer entries
    @{FG shine}dir@{FG text} >pipe://5
BUGS
  Full checking is not done to ensure that the application can't read
  from a write channel or vice-versa.The results of this operation
  shall be undefined.Don't do it.
@EndNode

