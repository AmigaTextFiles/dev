<html>
<head>
<title>Ada 95 RM - 4.3.1 Record Aggregates</title>
<link rev="made" href="mailto:Magnus.Kempe@di.epfl.ch">
</head>

<body>
<h4><img src="noleft.gif" alt="____"> | <a href="04-03.htm"><img src="up.gif" alt="Up"></a> | <a href="04-03-02.htm"><img src="right.gif" alt="Next"></a> | <a href="04-03.htm"><img src="back.gif" alt="Back"></a> | <a href="04-03-02.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<hr>
<h3><a name="0">4.3.1 Record Aggregates</a></h3>
<dl><dt><a name="1">(1)</a><dd>In a record_aggregate, a value is specified for each component of the
record or record extension value, using either a named or a positional
association.
</dl><h5 align="center"><a name="syntax">Syntax</a></h5>
<pre><a name="2">(2)</a>
       record_aggregate ::= (record_component_association_list)
<a name="3">(3)</a>
       record_component_association_list ::=
           record_component_association {, record_component_association}
         | null record
<a name="4">(4)</a>
       record_component_association ::=
          [ component_choice_list =&gt; ] expression
<a name="5">(5)</a>
       component_choice_list ::=
            component_selector_name {| component_selector_name}
          | others
</pre><dl><dt><a name="6">(6)</a><dd><ul><li>A record_component_association is a named component association if it
has a component_choice_list; otherwise, it is a positional component
association.  Any positional component associations shall precede any
named component associations.  If there is a named association with a
component_choice_list of others, it shall come last.
</ul><dt><a name="7">(7)</a><dd><ul><li>In the record_component_association_list for a record_aggregate, if
there is only one association, it shall be a named association.
</ul></dl><h5 align="center">Name Resolution Rules</h5>
<dl><dt><a name="8">(8)</a><dd>The expected type for a record_aggregate shall be a single nonlimited
record type or record extension.
<dt><a name="9">(9)</a><dd>For the record_component_association_list of a record_aggregate, all
components of the composite value defined by the aggregate are needed; for
the association list of an extension_aggregate, only those components not
determined by the ancestor expression or subtype are needed <a href="04-03-02.htm">(see 4.3.2)</a>.
Each selector_name in a record_component_association shall denote a needed
component (including possibly a discriminant).
<dt><a name="10">(10)</a><dd>The expected type for the expression of a record_component_association
is the type of the associated component(s); the associated component(s) are
as follows:
<dt><a name="11">(11)</a><dd><ul><li>For a positional association, the component (including possibly a
discriminant) in the corresponding relative position (in the
declarative region of the type), counting only the needed
components;
</ul><dt><a name="12">(12)</a><dd><ul><li>For a named association with one or more component_selector_names, the named component(s);
</ul><dt><a name="13">(13)</a><dd><ul><li>For a named association with the reserved word others, all needed
components that are not associated with some previous
association.
</ul></dl><h5 align="center">Legality Rules</h5>
<dl><dt><a name="14">(14)</a><dd>If the type of a record_aggregate is a record extension, then it shall
be a descendant of a record type, through one or more record extensions (and
no private extensions).
<dt><a name="15">(15)</a><dd>If there are no components needed in a given record_component_association_list, then the reserved words null record shall appear rather
than a list of record_component_associations.
<dt><a name="16">(16)</a><dd>Each record_component_association shall have at least one associated
component, and each needed component shall be associated with exactly one
record_component_association.  If a record_component_association has two or
more associated components, all of them shall be of the same type.
<dt><a name="17">(17)</a><dd>If the components of a variant_part are needed, then the value of a
discriminant that governs the variant_part shall be given by a static
expression.
</dl><h5 align="center">Dynamic Semantics</h5>
<dl><dt><a name="18">(18)</a><dd>The evaluation of a record_aggregate consists of the evaluation of the
record_component_association_list.
<dt><a name="19">(19)</a><dd>For the evaluation of a record_component_association_list, any
per-object constraints <a href="03-08.htm">(see 3.8)</a> for components specified in the association
list are elaborated and any expressions are evaluated and converted to the
subtype of the associated component.    Any constraint elaborations and
expression evaluations (and conversions) occur in an arbitrary order, except
that the expression for a discriminant is evaluated (and converted) prior to
the elaboration of any per-object constraint that depends on it, which in
turn occurs prior to the evaluation and conversion of the expression for the
component with the per-object constraint.
<dt><a name="20">(20)</a><dd>The expression of a record_component_association is evaluated (and
converted) once for each associated component.
<p><dt><dd><ul>NOTES</ul>
<dt><a name="21">(21)</a><dd><ul>(7) For a record_aggregate with positional associations, expressions
specifying discriminant values appear first since the known_discriminant_part is given first in the declaration of the type; they
have to be in the same order as in the known_discriminant_part.
</ul></dl><h5 align="center">Examples</h5>
<dl><dt><a name="22">(22)</a><dd><em>Example of a record aggregate with positional associations:
</em>
</dl><pre><a name="23">(23)</a>
       (4, July, 1776)                                       <em>--  <a href="03-08.htm">see 3.8</a></em>
</pre><dl><dt><a name="24">(24)</a><dd><em>Examples of record aggregates with named associations:
</em>
</dl><pre><a name="25">(25)</a>
       (Day =&gt; 4, Month =&gt; July, Year =&gt; 1776)
       (Month =&gt; July, Day =&gt; 4, Year =&gt; 1776)
<a name="26">(26)</a>
       (Disk, Closed, Track =&gt; 5, Cylinder =&gt; 12)            <em>--  <a href="03-08-01.htm">see 3.8.1</a></em>
       (Unit =&gt; Disk, Status =&gt; Closed, Cylinder =&gt; 9, Track =&gt; 1)
</pre><dl><dt><a name="27">(27)</a><dd><em>Example of component association with several choices:
</em>
</dl><pre><a name="28">(28)</a>
       (Value =&gt; 0, Succ|Pred =&gt; new Cell'(0, null, null))   <em>--  <a href="03-10-01.htm">see 3.10.1</a></em>
<a name="29">(29)</a>
        <em>--  The allocator is evaluated twice:  Succ and Pred designate different cells</em>
</pre><dl><dt><a name="30">(30)</a><dd><em>Examples of record aggregates for tagged types <a href="03-09.htm">(see 3.9</a> and <a href="03-09-01.htm">3.9.1)</a>:
</em>
</dl><pre><a name="31">(31)</a>
       Expression'(null record)
       Literal'(Value =&gt; 0.0)
       Painted_Point'(0.0, Pi/2.0, Paint =&gt; Red)
</pre><hr>
<h4><img src="noleft.gif" alt="____"> | <a href="04-03.htm"><img src="up.gif" alt="Up"></a> | <a href="04-03-02.htm"><img src="right.gif" alt="Next"></a> | <a href="04-03.htm"><img src="back.gif" alt="Back"></a> | <a href="04-03-02.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<p>
<a href="http://lglwww.epfl.ch/Ada/"><img src="la-icon.gif" alt="Ada WWW Home"></a>
 -- Email comments, additions, corrections, gripes, kudos, etc. to:
<address>
<a href="author.htm">Magnus Kempe</a>
 -- <a href="mailto:Magnus.Kempe@di.epfl.ch">Magnus.Kempe@di.epfl.ch</a><br>
<a href="cright.htm">Copyright statement</a><br>
Page last generated: 95-03-12
</address>
</body>
</html>
