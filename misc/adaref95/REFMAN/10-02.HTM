<html>
<head>
<title>Ada 95 RM - 10.2 Program Execution</title>
<link rev="made" href="mailto:Magnus.Kempe@di.epfl.ch">
</head>

<body>
<h4><a href="10-01.htm"><img src="left.gif" alt="Prev"></a> | <a href="10.htm"><img src="up.gif" alt="Up"></a> | <img src="noright.gif" alt="____"> | <a href="10-01-06.htm"><img src="back.gif" alt="Back"></a> | <a href="10-02-01.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<hr>

<h2><a name="0">10.2 Program Execution</a>
 -- <a href="toc10-02.htm">TOC</a>
</h2>
<dl><dt><a name="1">(1)</a><dd>An Ada program consists of a set of partitions, which can execute in
parallel with one another, possibly in a separate address space, and possibly
on a separate computer.
</dl><h5 align="center">Post-Compilation Rules</h5>
<dl><dt><a name="2">(2)</a><dd>A partition is a program or part of a program that can be invoked from
outside the Ada implementation.  For example, on many systems, a partition
might be an executable file generated by the system linker.  The user can
explicitly assign library units to a partition.  The assignment is done in an
implementation-defined manner.  The compilation units included in a partition
are those of the explicitly assigned library units, as well as other
compilation units needed by those library units.  The compilation units
needed by a given compilation unit are determined as follows (unless
specified otherwise via an implementation-defined pragma, or by some other
implementation-defined means):
<dt><a name="3">(3)</a><dd><ul><li>A compilation unit needs itself;
</ul><dt><a name="4">(4)</a><dd><ul><li>If a compilation unit is needed, then so are any compilation
units upon which it depends semantically;
</ul><dt><a name="5">(5)</a><dd><ul><li>If a library_unit_declaration is needed, then so is any
corresponding library_unit_body;
</ul><dt><a name="6">(6)</a><dd><ul><li>If a compilation unit with stubs is needed, then so are any
corresponding subunits.
</ul><dt><a name="7">(7)</a><dd>The user can optionally designate (in an implementation-defined manner)
one subprogram as the main subprogram for the partition.  A main subprogram,
if specified, shall be a subprogram.
<dt><a name="8">(8)</a><dd>Each partition has an anonymous environment task, which is an implicit
outermost task whose execution elaborates the library_items of the
environment declarative_part, and then calls the main subprogram, if there is
one.  A partition's execution is that of its tasks.
<dt><a name="9">(9)</a><dd>The order of elaboration of library units is determined primarily by the
elaboration dependences.  There is an elaboration dependence of a given
library_item upon another if the given library_item or any of its subunits
depends semantically on the other library_item.  In addition, if a given
library_item or any of its subunits has a pragma Elaborate or Elaborate_All
that mentions another library unit, then there is an elaboration dependence
of the given library_item upon the body of the other library unit, and, for
Elaborate_All only, upon each library_item needed by the declaration of the
other library unit.
<dt><a name="10">(10)</a><dd>The environment task for a partition has the following structure:
</dl><pre><a name="11">(11)</a>
       task Environment_Task;
<a name="12">(12)</a>
       task body Environment_Task is
           ... (1) <em>-- The environment declarative_part</em>
                   <em>-- (that is, the sequence of library_items) goes here.</em>
       begin
           ... (2) <em>-- Call the main subprogram, if there is one.</em>
       end Environment_Task;
</pre><dl><dt><a name="13">(13)</a><dd>The environment declarative_part at (1) is a sequence of declarative_items consisting of copies of the library_items included in the partition.
The order of elaboration of library_items is the order in which they appear
in the environment declarative_part:
<dt><a name="14">(14)</a><dd><ul><li>The order of all included library_items is such that there are no
forward elaboration dependences.
</ul><dt><a name="15">(15)</a><dd><ul><li>Any included library_unit_declaration to which a pragma
Elaborate_Body applies is immediately followed by its library_unit_body, if included.
</ul><dt><a name="16">(16)</a><dd><ul><li>All library_items declared pure occur before any that are not
declared pure.
</ul><dt><a name="17">(17)</a><dd><ul><li>All preelaborated library_items occur before any that are not
preelaborated.
</ul><dt><a name="18">(18)</a><dd>There shall be a total order of the library_items that obeys the above
rules.  The order is otherwise implementation defined.
<dt><a name="19">(19)</a><dd>The full expanded names of the library units and subunits included in a
given partition shall be distinct.
<dt><a name="20">(20)</a><dd>The sequence_of_statements of the environment task (see (2) above)
consists of either:
<dt><a name="21">(21)</a><dd><ul><li>A call to the main subprogram, if the partition has one.  If the
main subprogram has parameters, they are passed; where the
actuals come from is implementation defined.  What happens to the
result of a main function is also implementation defined.
</ul><dt><a name="22">(22)</a><dd>or:
<dt><a name="23">(23)</a><dd><ul><li>A null_statement, if there is no main subprogram.
</ul><dt><a name="24">(24)</a><dd>The mechanisms for building and running partitions are implementation
defined.  These might be combined into one operation, as, for example, in
dynamic linking, or ``load-and-go'' systems.
</dl><h5 align="center">Dynamic Semantics</h5>
<dl><dt><a name="25">(25)</a><dd>The execution of a program consists of the execution of a set of
partitions.  Further details are implementation defined.  The execution of a
partition starts with the execution of its environment task, ends when the
environment task terminates, and includes the executions of all tasks of the
partition.  The execution of the (implicit) task_body of the environment task
acts as a master for all other tasks created as part of the execution of the
partition.  When the environment task completes (normally or abnormally), it
waits for the termination of all such tasks, and then finalizes any remaining
objects of the partition.
</dl><h5 align="center">Bounded (Run-Time) Errors</h5>
<dl><dt><a name="26">(26)</a><dd>Once the environment task has awaited the termination of all other tasks
of the partition, any further attempt to create a task (during finalization)
is a bounded error, and may result in the raising of Program_Error either
upon creation or activation of the task.  If such a task is activated, it is
not specified whether the task is awaited prior to termination of the
environment task.
</dl><h5 align="center">Implementation Requirements</h5>
<dl><dt><a name="27">(27)</a><dd>The implementation shall ensure that all compilation units included in a
partition are consistent with one another, and are legal according to the
rules of the language.
</dl><h5 align="center">Implementation Permissions</h5>
<dl><dt><a name="28">(28)</a><dd>The kind of partition described in this clause is known as an active
partition.  An implementation is allowed to support other kinds of
partitions, with implementation-defined semantics.
<dt><a name="29">(29)</a><dd>An implementation may restrict the kinds of subprograms it supports as
main subprograms.  However, an implementation is required to support all main
subprograms that are public parameterless library procedures.
<dt><a name="30">(30)</a><dd>If the environment task completes abnormally, the implementation may
abort any dependent tasks.
<p><dt><dd><ul>NOTES</ul>
<dt><a name="31">(31)</a><dd><ul>(8) An implementation may provide inter-partition communication
mechanism(s) via special packages and pragmas.  Standard pragmas for
distribution and methods for specifying inter-partition communication
are defined in <a href="E.htm">Annex E</a>, ``Distributed Systems''.  If no such mechanisms
are provided, then each partition is isolated from all others, and
behaves as a program in and of itself.
</ul><dt><a name="32">(32)</a><dd><ul>(9) Partitions are not required to run in separate address spaces.  For
example, an implementation might support dynamic linking via the
partition concept.
</ul><dt><a name="33">(33)</a><dd><ul>(10) An order of elaboration of library_items that is consistent with
the partial ordering defined above does not always ensure that each
library_unit_body is elaborated before any other compilation unit whose
elaboration necessitates that the library_unit_body be already
elaborated.  (In particular, there is no requirement that the body of a
library unit be elaborated as soon as possible after the library_unit_declaration is elaborated, unless the pragmas in subclause <a href="10-02-01.htm">10.2.1</a> are
used.)
</ul><dt><a name="34">(34)</a><dd><ul>(11) A partition (active or otherwise) need not have a main subprogram.
In such a case, all the work done by the partition would be done by
elaboration of various library_items, and by tasks created by that
elaboration.  Passive partitions, which cannot have main subprograms,
are defined in <a href="E.htm">Annex E</a>, ``Distributed Systems''.
</ul></dl><hr><h3>Subclauses</h3>
<ol>
<li><a href="10-02-01.htm">Elaboration Control</a>
</ol>
<p>
<hr>
<h4><a href="10-01.htm"><img src="left.gif" alt="Prev"></a> | <a href="10.htm"><img src="up.gif" alt="Up"></a> | <img src="noright.gif" alt="____"> | <a href="10-01-06.htm"><img src="back.gif" alt="Back"></a> | <a href="10-02-01.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<p>
<a href="http://lglwww.epfl.ch/Ada/"><img src="la-icon.gif" alt="Ada WWW Home"></a>
 -- Email comments, additions, corrections, gripes, kudos, etc. to:
<address>
<a href="author.htm">Magnus Kempe</a>
 -- <a href="mailto:Magnus.Kempe@di.epfl.ch">Magnus.Kempe@di.epfl.ch</a><br>
<a href="cright.htm">Copyright statement</a><br>
Page last generated: 95-03-12
</address>
</body>
</html>
