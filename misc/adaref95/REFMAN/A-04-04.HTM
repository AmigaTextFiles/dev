<html>
<head>
<title>Ada 95 RM - A.4.4 Bounded-Length String Handling</title>
<link rev="made" href="mailto:Magnus.Kempe@di.epfl.ch">
</head>

<body>
<h4><a href="A-04-03.htm"><img src="left.gif" alt="Prev"></a> | <a href="A-04.htm"><img src="up.gif" alt="Up"></a> | <a href="A-04-05.htm"><img src="right.gif" alt="Next"></a> | <a href="A-04-03.htm"><img src="back.gif" alt="Back"></a> | <a href="A-04-05.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<hr>
<h3><a name="0">A.4.4 Bounded-Length String Handling</a></h3>
<dl><dt><a name="1">(1)</a><dd>The language-defined package Strings.Bounded provides a generic package
each of whose instances yields a private type Bounded_String and a set of
operations.  An object of a particular Bounded_String type represents a
String whose low bound is 1 and whose length can vary conceptually between 0
and a maximum size established at the generic instantiation.  The subprograms
for fixed-length string handling are either overloaded directly for Bounded_String, or are modified as needed to reflect the variability in length.
Additionally, since the Bounded_String type is private, appropriate
constructor and selector operations are provided.
</dl><h5 align="center">Static Semantics</h5>
<dl><dt><a name="2">(2)</a><dd>The library package Strings.Bounded has the following declaration:
</dl><pre><a name="3">(3)</a>
       with Ada.Strings.Maps;
       package Ada.Strings.Bounded is
          pragma Preelaborate(Bounded);
<a name="4">(4)</a>
          generic
             Max   : Positive;    <em>-- Maximum length of a Bounded_String</em>
          package Generic_Bounded_Length is
<a name="5">(5)</a>
             Max_Length : constant Positive := Max;
<a name="6">(6)</a>
             type Bounded_String is private;
<a name="7">(7)</a>
             Null_Bounded_String : constant Bounded_String;
<a name="8">(8)</a>
             subtype Length_Range is Natural range 0 .. Max_Length;
<a name="9">(9)</a>
             function Length (Source : in Bounded_String) return Length_Range;
<a name="10">(10)</a>
          <em>-- Conversion, Concatenation, and Selection functions</em>
<a name="11">(11)</a>
             function To_Bounded_String (Source : in String;
                                         Drop   : in Truncation := Error)
                return Bounded_String;
<a name="12">(12)</a>
             function To_String (Source : in Bounded_String) return String;
<a name="13">(13)</a>
             function Append (Left, Right : in Bounded_String;
                              Drop        : in Truncation  := Error)
                return Bounded_String;
<a name="14">(14)</a>
             function Append (Left  : in Bounded_String;
                              Right : in String;
                              Drop  : in Truncation := Error)
                return Bounded_String;
<a name="15">(15)</a>
             function Append (Left  : in String;
                              Right : in Bounded_String;
                              Drop  : in Truncation := Error)
                return Bounded_String;
<a name="16">(16)</a>
             function Append (Left  : in Bounded_String;
                              Right : in Character;
                              Drop  : in Truncation := Error)
                return Bounded_String;
<a name="17">(17)</a>
             function Append (Left  : in Character;
                              Right : in Bounded_String;
                              Drop  : in Truncation := Error)
                return Bounded_String;
<a name="18">(18)</a>
             procedure Append (Source   : in out Bounded_String;
                               New_Item : in Bounded_String;
                               Drop     : in Truncation  := Error);
<a name="19">(19)</a>
             procedure Append (Source   : in out Bounded_String;
                               New_Item : in String;
                               Drop     : in Truncation  := Error);
<a name="20">(20)</a>
             procedure Append (Source   : in out Bounded_String;
                               New_Item : in Character;
                               Drop     : in Truncation  := Error);
<a name="21">(21)</a>
             function "&amp;" (Left, Right : in Bounded_String)
                return Bounded_String;
<a name="22">(22)</a>
             function "&amp;" (Left : in Bounded_String; Right : in String)
                return Bounded_String;
<a name="23">(23)</a>
             function "&amp;" (Left : in String; Right : in Bounded_String)
                return Bounded_String;
<a name="24">(24)</a>
             function "&amp;" (Left : in Bounded_String; Right : in Character)
                return Bounded_String;
<a name="25">(25)</a>
             function "&amp;" (Left : in Character; Right : in Bounded_String)
                return Bounded_String;
<a name="26">(26)</a>
             function Element (Source : in Bounded_String;
                               Index  : in Positive)
                return Character;
<a name="27">(27)</a>
             procedure Replace_Element (Source : in out Bounded_String;
                                        Index  : in Positive;
                                        By     : in Character);
<a name="28">(28)</a>
             function Slice (Source : in Bounded_String;
                             Low    : in Positive;
                             High   : in Natural)
                return String;
<a name="29">(29)</a>
             function "="  (Left, Right : in Bounded_String) return Boolean;
             function "="  (Left : in Bounded_String; Right : in String)
               return Boolean;
<a name="30">(30)</a>
             function "="  (Left : in String; Right : in Bounded_String)
               return Boolean;
<a name="31">(31)</a>
             function "&lt;"  (Left, Right : in Bounded_String) return Boolean;
<a name="32">(32)</a>
             function "&lt;"  (Left : in Bounded_String; Right : in String)
               return Boolean;
<a name="33">(33)</a>
             function "&lt;"  (Left : in String; Right : in Bounded_String)
               return Boolean;
<a name="34">(34)</a>
             function "&lt;=" (Left, Right : in Bounded_String) return Boolean;
<a name="35">(35)</a>
             function "&lt;="  (Left : in Bounded_String; Right : in String)
               return Boolean;
<a name="36">(36)</a>
             function "&lt;="  (Left : in String; Right : in Bounded_String)
               return Boolean;
<a name="37">(37)</a>
             function "&gt;"  (Left, Right : in Bounded_String) return Boolean;
<a name="38">(38)</a>
             function "&gt;"  (Left : in Bounded_String; Right : in String)
               return Boolean;
<a name="39">(39)</a>
             function "&gt;"  (Left : in String; Right : in Bounded_String)
               return Boolean;
<a name="40">(40)</a>
             function "&gt;=" (Left, Right : in Bounded_String) return Boolean;
<a name="41">(41)</a>
             function "&gt;="  (Left : in Bounded_String; Right : in String)
               return Boolean;
<a name="42">(42)</a>
             function "&gt;="  (Left : in String; Right : in Bounded_String)
               return Boolean;
<a name="43">(43)</a>
          <em>-- Search functions</em>
<a name="44">(44)</a>
             function Index (Source   : in Bounded_String;
                             Pattern  : in String;
                             Going    : in Direction := Forward;
                             Mapping  : in Maps.Character_Mapping
                                        := Maps.Identity)
                return Natural;
<a name="45">(45)</a>
             function Index (Source   : in Bounded_String;
                             Pattern  : in String;
                             Going    : in Direction := Forward;
                             Mapping  : in Maps.Character_Mapping_Function)
                return Natural;
<a name="46">(46)</a>
             function Index (Source : in Bounded_String;
                             Set    : in Maps.Character_Set;
                             Test   : in Membership := Inside;
                             Going  : in Direction  := Forward)
                return Natural;
<a name="47">(47)</a>
             function Index_Non_Blank (Source : in Bounded_String;
                                       Going  : in Direction := Forward)
                return Natural;
<a name="48">(48)</a>
             function Count (Source   : in Bounded_String;
                             Pattern  : in String;
                             Mapping  : in Maps.Character_Mapping
                                          := Maps.Identity)
                return Natural;
<a name="49">(49)</a>
             function Count (Source   : in Bounded_String;
                             Pattern  : in String;
                             Mapping  : in Maps.Character_Mapping_Function)
                return Natural;
<a name="50">(50)</a>
             function Count (Source   : in Bounded_String;
                             Set      : in Maps.Character_Set)
                return Natural;
<a name="51">(51)</a>
             procedure Find_Token (Source : in Bounded_String;
                                   Set    : in Maps.Character_Set;
                                   Test   : in Membership;
                                   First  : out Positive;
                                   Last   : out Natural);
<a name="52">(52)</a>
          <em>-- String translation subprograms</em>
<a name="53">(53)</a>
             function Translate (Source  : in Bounded_String;
                                 Mapping : in Maps.Character_Mapping)
                return Bounded_String;
<a name="54">(54)</a>
             procedure Translate (Source  : in out Bounded_String;
                                  Mapping : in Maps.Character_Mapping);
<a name="55">(55)</a>
             function Translate (Source  : in Bounded_String;
                                 Mapping : in Maps.Character_Mapping_Function)
                return Bounded_String;
<a name="56">(56)</a>
             procedure Translate (Source  : in out Bounded_String;
                                  Mapping : in Maps.Character_Mapping_Function);
<a name="57">(57)</a>
          <em>-- String transformation subprograms</em>
<a name="58">(58)</a>
             function Replace_Slice (Source   : in Bounded_String;
                                     Low      : in Positive;
                                     High     : in Natural;
                                     By       : in String;
                                     Drop     : in Truncation := Error)
                return Bounded_String;
<a name="59">(59)</a>
             procedure Replace_Slice (Source   : in out Bounded_String;
                                      Low      : in Positive;
                                      High     : in Natural;
                                      By       : in String;
                                      Drop     : in Truncation := Error);
<a name="60">(60)</a>
             function Insert (Source   : in Bounded_String;
                              Before   : in Positive;
                              New_Item : in String;
                              Drop     : in Truncation := Error)
                return Bounded_String;
<a name="61">(61)</a>
             procedure Insert (Source   : in out Bounded_String;
                               Before   : in Positive;
                               New_Item : in String;
                               Drop     : in Truncation := Error);
<a name="62">(62)</a>
             function Overwrite (Source    : in Bounded_String;
                                 Position  : in Positive;
                                 New_Item  : in String;
                                 Drop      : in Truncation := Error)
                return Bounded_String;
<a name="63">(63)</a>
             procedure Overwrite (Source    : in out Bounded_String;
                                  Position  : in Positive;
                                  New_Item  : in String;
                                  Drop      : in Truncation := Error);
<a name="64">(64)</a>
             function Delete (Source  : in Bounded_String;
                              From    : in Positive;
                              Through : in Natural)
                return Bounded_String;
<a name="65">(65)</a>
             procedure Delete (Source  : in out Bounded_String;
                               From    : in Positive;
                               Through : in Natural);
<a name="66">(66)</a>
       <em>--String selector subprograms</em>
<a name="67">(67)</a>
             function Trim (Source : in Bounded_String;
                            Side   : in Trim_End)
                return Bounded_String;
             procedure Trim (Source : in out Bounded_String;
                             Side   : in Trim_End);
<a name="68">(68)</a>
             function Trim (Source : in Bounded_String;
                            Left   : in Maps.Character_Set;
                            Right  : in Maps.Character_Set)
                return Bounded_String;
<a name="69">(69)</a>
             procedure Trim (Source : in out Bounded_String;
                             Left   : in Maps.Character_Set;
                             Right  : in Maps.Character_Set);
<a name="70">(70)</a>
             function Head (Source : in Bounded_String;
                            Count  : in Natural;
                            Pad    : in Character  := Space;
                            Drop   : in Truncation := Error)
                return Bounded_String;
<a name="71">(71)</a>
             procedure Head (Source : in out Bounded_String;
                             Count  : in Natural;
                             Pad    : in Character  := Space;
                             Drop   : in Truncation := Error);
<a name="72">(72)</a>
             function Tail (Source : in Bounded_String;
                            Count  : in Natural;
                            Pad    : in Character  := Space;
                            Drop   : in Truncation := Error)
                return Bounded_String;
<a name="73">(73)</a>
             procedure Tail (Source : in out Bounded_String;
                             Count  : in Natural;
                             Pad    : in Character  := Space;
                             Drop   : in Truncation := Error);
<a name="74">(74)</a>
       <em>--String constructor subprograms</em>
<a name="75">(75)</a>
             function "*" (Left  : in Natural;
                           Right : in Character)
                return Bounded_String;
<a name="76">(76)</a>
             function "*" (Left  : in Natural;
                           Right : in String)
                return Bounded_String;
<a name="77">(77)</a>
             function "*" (Left  : in Natural;
                           Right : in Bounded_String)
                return Bounded_String;
<a name="78">(78)</a>
             function Replicate (Count : in Natural;
                                 Item  : in Character;
                                 Drop  : in Truncation := Error)
                return Bounded_String;
<a name="79">(79)</a>
             function Replicate (Count : in Natural;
                                 Item  : in String;
                                 Drop  : in Truncation := Error)
                return Bounded_String;
<a name="80">(80)</a>
             function Replicate (Count : in Natural;
                                 Item  : in Bounded_String;
                                 Drop  : in Truncation := Error)
                return Bounded_String;
<a name="81">(81)</a>
          private
              ... <em>-- not specified by the language</em>
          end Generic_Bounded_Length;
<a name="82">(82)</a>
       end Ada.Strings.Bounded;
</pre><dl><dt><a name="83">(83)</a><dd>Null_Bounded_String represents the null string.  If an object of type
Bounded_String is not otherwise initialized, it will be initialized to the
same value as Null_Bounded_String.
</dl><pre><a name="84">(84)</a>
       function Length (Source : in Bounded_String) return Length_Range;
</pre><dl><dt><a name="85">(85)</a><dd><ul>The Length function returns the length of the string represented
by Source.
</ul></dl><pre><a name="86">(86)</a>
       function To_Bounded_String (Source : in String;
                                   Drop   : in Truncation := Error)
          return Bounded_String;
</pre><dl><dt><a name="87">(87)</a><dd><ul>If Source'Length &lt;= Max_Length then this function returns a
Bounded_String that represents Source.  Otherwise the effect depends
on the value of Drop:
</ul><dt><a name="88">(88)</a><dd><ul><ul><li>If Drop=Left, then the result is a Bounded_String that
represents the string comprising the rightmost Max_Length
characters of Source.
</ul></ul><dt><a name="89">(89)</a><dd><ul><ul><li>If Drop=Right, then the result is a Bounded_String that
represents the string comprising the leftmost Max_Length
characters of Source.
</ul></ul><dt><a name="90">(90)</a><dd><ul><ul><li>If Drop=Error, then Strings.Length_Error is propagated.
</ul></ul></dl><pre><a name="91">(91)</a>
       function To_String (Source : in Bounded_String) return String;
</pre><dl><dt><a name="92">(92)</a><dd><ul>To_String returns the String value with lower bound 1
represented by Source.  If B is a Bounded_String, then B = To_Bounded_String(To_String(B)).
</ul><dt><a name="93">(93)</a><dd>Each of the Append functions returns a Bounded_String obtained by
concatenating the string or character given or represented by one of the
parameters, with the string or character given or represented by the other
parameter, and applying To_Bounded_String to the concatenation result string,
with Drop as provided to the Append function.
<dt><a name="94">(94)</a><dd>Each of the procedures Append(Source, New_Item, Drop) has the same
effect as the corresponding assignment Source := Append(Source, New_Item,
Drop).
<dt><a name="95">(95)</a><dd>Each of the "&amp;" functions has the same effect as the corresponding
Append function, with Error as the Drop parameter.
</dl><pre><a name="96">(96)</a>
       function Element (Source : in Bounded_String;
                         Index  : in Positive)
          return Character;
</pre><dl><dt><a name="97">(97)</a><dd><ul>Returns the character at position Index in the string
represented by Source; propagates Index_Error if Index &gt;
Length(Source).
</ul></dl><pre><a name="98">(98)</a>
       procedure Replace_Element (Source : in out Bounded_String;
                                  Index  : in Positive;
                                  By     : in Character);
</pre><dl><dt><a name="99">(99)</a><dd><ul>Updates Source such that the character at position Index in the
string represented by Source is By; propagates Index_Error if Index &gt;
Length(Source).
</ul></dl><pre><a name="100">(100)</a>
       function Slice (Source : in Bounded_String;
                       Low    : in Positive;
                       High   : in Natural)
          return String;
</pre><dl><dt><a name="101">(101)</a><dd><ul>Returns the slice at positions Low through High in the string
represented by Source; propagates Index_Error if Low &gt;
Length(Source)+1.
</ul><dt><a name="102">(102)</a><dd>Each of the functions "=", "&lt;", "&gt;","&lt;=", and "&gt;=" returns the same
result as the corresponding String operation applied to the String values
given or represented by the two parameters.
<dt><a name="103">(103)</a><dd>Each of the search subprograms (Index, Index_Non_Blank, Count, Find_Token) has the same effect as the corresponding subprogram in Strings.Fixed
applied to the string represented by the Bounded_String parameter.
<dt><a name="104">(104)</a><dd>Each of the Translate subprograms, when applied to a Bounded_String,
has an analogous effect to the corresponding subprogram in Strings.Fixed.
For the Translate function, the translation is applied to the string
represented by the Bounded_String parameter, and the result is converted (via
To_Bounded_String) to a Bounded_String.  For the Translate procedure, the
string represented by the Bounded_String parameter after the translation is
given by the Translate function for fixed-length strings applied to the
string represented by the original value of the parameter.
<dt><a name="105">(105)</a><dd>Each of the transformation subprograms (Replace_Slice, Insert,
Overwrite, Delete), selector subprograms (Trim, Head, Tail), and constructor
functions ("*") has an effect based on its corresponding subprogram in
Strings.Fixed, and Replicate is based on Fixed."*".  For each of these
subprograms, the corresponding fixed-length string subprogram is applied to
the string represented by the Bounded_String parameter.  To_Bounded_String is
applied the result string, with Drop (or Error in the case of Generic_Bounded_Length."*") determining the effect when the string length exceeds
Max_Length.
</dl><h5 align="center">Implementation Advice</h5>
<dl><dt><a name="106">(106)</a><dd>Bounded string objects should not be implemented by implicit pointers
and dynamic allocation.
</dl><hr>
<h4><a href="A-04-03.htm"><img src="left.gif" alt="Prev"></a> | <a href="A-04.htm"><img src="up.gif" alt="Up"></a> | <a href="A-04-05.htm"><img src="right.gif" alt="Next"></a> | <a href="A-04-03.htm"><img src="back.gif" alt="Back"></a> | <a href="A-04-05.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<p>
<a href="http://lglwww.epfl.ch/Ada/"><img src="la-icon.gif" alt="Ada WWW Home"></a>
 -- Email comments, additions, corrections, gripes, kudos, etc. to:
<address>
<a href="author.htm">Magnus Kempe</a>
 -- <a href="mailto:Magnus.Kempe@di.epfl.ch">Magnus.Kempe@di.epfl.ch</a><br>
<a href="cright.htm">Copyright statement</a><br>
Page last generated: 95-03-12
</address>
</body>
</html>
