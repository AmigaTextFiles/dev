<html>
<head>
<title>Ada 95 RM - 7.5 Limited Types</title>
<link rev="made" href="mailto:Magnus.Kempe@di.epfl.ch">
</head>

<body>
<h4><a href="07-04.htm"><img src="left.gif" alt="Prev"></a> | <a href="07.htm"><img src="up.gif" alt="Up"></a> | <a href="07-06.htm"><img src="right.gif" alt="Next"></a> | <a href="07-04.htm"><img src="back.gif" alt="Back"></a> | <a href="07-06.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<hr>

<h2><a name="0">7.5 Limited Types</a></h2>
<dl><dt><a name="1">(1)</a><dd>A limited type is (a view of) a type for which the assignment operation
is not allowed.  A nonlimited type is a (view of a) type for which the
assignment operation is allowed.
</dl><h5 align="center">Legality Rules</h5>
<dl><dt><a name="2">(2)</a><dd>If a tagged record type has any limited components, then the reserved
word limited shall appear in its record_type_definition.
</dl><h5 align="center">Static Semantics</h5>
<dl><dt><a name="3">(3)</a><dd>A type is limited if it is a descendant of one of the following:
<dt><a name="4">(4)</a><dd><ul><li>a type with the reserved word limited in its definition;
</ul><dt><a name="5">(5)</a><dd><ul><li>a task or protected type;
</ul><dt><a name="6">(6)</a><dd><ul><li>a composite type with a limited component.
</ul><dt><a name="7">(7)</a><dd>Otherwise, the type is nonlimited.
<dt><a name="8">(8)</a><dd>There are no predefined equality operators for a limited type.
<p><dt><dd><ul>NOTES</ul>
<dt><a name="9">(9)</a><dd><ul>(13) The following are consequences of the rules for limited types:
</ul><dt><a name="10">(10)</a><dd><ul><ul><li>An initialization expression is not allowed in an object_declaration if the type of the object is limited.
</ul></ul><dt><a name="11">(11)</a><dd><ul><ul><li>A default expression is not allowed in a component_declaration if the type of the record component is limited.
</ul></ul><dt><a name="12">(12)</a><dd><ul><ul><li>An initialized allocator is not allowed if the designated
type is limited.
</ul></ul><dt><a name="13">(13)</a><dd><ul><ul><li>A generic formal parameter of mode in must not be of a
limited type.
</ul></ul><dt><a name="14">(14)</a><dd><ul>(14) Aggregates are not available for a limited composite type.
Concatenation is not available for a limited array type.
</ul><dt><a name="15">(15)</a><dd><ul>(15) The rules do not exclude a default_expression for a formal
parameter of a limited type; they do not exclude a deferred constant of
a limited type if the full declaration of the constant is of a
nonlimited type.
</ul><dt><a name="16">(16)</a><dd><ul>(16) As illustrated <a href="07-03-01.htm">in 7.3.1</a>, an untagged limited type can become
nonlimited under certain circumstances.
</ul></dl><h5 align="center">Examples</h5>
<dl><dt><a name="17">(17)</a><dd><em>Example of a package with a limited type:
</em>
</dl><pre><a name="18">(18)</a>
       package IO_Package is
          type File_Name is limited private;
<a name="19">(19)</a>
          procedure Open (F : in out File_Name);
          procedure Close(F : in out File_Name);
          procedure Read (F : in File_Name; Item : out Integer);
          procedure Write(F : in File_Name; Item : in  Integer);
       private
          type File_Name is
             limited record
                Internal_Name : Integer := 0;
             end record;
       end IO_Package;
<a name="20">(20)</a>
       package body IO_Package is
          Limit : constant := 200;
          type File_Descriptor is record  ...  end record;
          Directory : array (1 .. Limit) of File_Descriptor;
          ...
          procedure Open (F : in out File_Name) is  ...  end;
          procedure Close(F : in out File_Name) is  ...  end;
          procedure Read (F : in File_Name; Item : out Integer) is ... end;
          procedure Write(F : in File_Name; Item : in  Integer) is ... end;
       begin
          ...
       end IO_Package;
</pre><dl><p><dt><dd><ul>NOTES</ul>
<dt><a name="21">(21)</a><dd><ul>(17) Notes on the example:  In the example above, an outside subprogram
making use of IO_Package may obtain a file name by calling Open and
later use it in calls to Read and Write.  Thus, outside the package, a
file name obtained from Open acts as a kind of password; its internal
properties (such as containing a numeric value) are not known and no
other operations (such as addition or comparison of internal names) can
be performed on a file name.  Most importantly, clients of the package
cannot make copies of objects of type File_Name.
</ul><dt><a name="22">(22)</a><dd><ul>This example is characteristic of any case where complete control
over the operations of a type is desired.  Such packages serve a dual
purpose.  They prevent a user from making use of the internal structure
of the type.  They also implement the notion of an encapsulated data
type where the only operations on the type are those given in the
package specification.
</ul><dt><a name="23">(23)</a><dd><ul>The fact that the full view of File_Name is explicitly declared
limited means that parameter passing and function return will always be
by reference <a href="06-02.htm">(see 6.2</a> and <a href="06-05.htm">6.5)</a>.
</ul></dl><p>
<hr>
<h4><a href="07-04.htm"><img src="left.gif" alt="Prev"></a> | <a href="07.htm"><img src="up.gif" alt="Up"></a> | <a href="07-06.htm"><img src="right.gif" alt="Next"></a> | <a href="07-04.htm"><img src="back.gif" alt="Back"></a> | <a href="07-06.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<p>
<a href="http://lglwww.epfl.ch/Ada/"><img src="la-icon.gif" alt="Ada WWW Home"></a>
 -- Email comments, additions, corrections, gripes, kudos, etc. to:
<address>
<a href="author.htm">Magnus Kempe</a>
 -- <a href="mailto:Magnus.Kempe@di.epfl.ch">Magnus.Kempe@di.epfl.ch</a><br>
<a href="cright.htm">Copyright statement</a><br>
Page last generated: 95-03-12
</address>
</body>
</html>
