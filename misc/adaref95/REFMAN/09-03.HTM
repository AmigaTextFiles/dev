<html>
<head>
<title>Ada 95 RM - 9.3 Task Dependence - Termination of Tasks</title>
<link rev="made" href="mailto:Magnus.Kempe@di.epfl.ch">
</head>

<body>
<h4><a href="09-02.htm"><img src="left.gif" alt="Prev"></a> | <a href="09.htm"><img src="up.gif" alt="Up"></a> | <a href="09-04.htm"><img src="right.gif" alt="Next"></a> | <a href="09-02.htm"><img src="back.gif" alt="Back"></a> | <a href="09-04.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<hr>

<h2><a name="0">9.3 Task Dependence - Termination of Tasks</a></h2>
<h5 align="center">Dynamic Semantics</h5>
<dl><dt><a name="1">(1)</a><dd>Each task (other than an environment task -- <a href="10-02.htm">see 10.2)</a> depends on one or
more masters <a href="07-06-01.htm">(see 7.6.1)</a>, as follows:
<dt><a name="2">(2)</a><dd><ul><li>If the task is created by the evaluation of an allocator for a
given access type, it depends on each master that includes the
elaboration of the declaration of the ultimate ancestor of the
given access type.
</ul><dt><a name="3">(3)</a><dd><ul><li>If the task is created by the elaboration of an object_declaration, it depends on each master that includes this
elaboration.
</ul><dt><a name="4">(4)</a><dd>Furthermore, if a task depends on a given master, it is defined to depend
on the task that executes the master, and (recursively) on any master of that
task.
<dt><a name="5">(5)</a><dd>A task is said to be completed when the execution of its corresponding
task_body is completed.  A task is said to be terminated when any
finalization of the task_body has been performed <a href="07-06-01.htm">(see 7.6.1)</a>.  The first step
of finalizing a master (including a task_body) is to wait for the termination
of any tasks dependent on the master.  The task executing the master is
blocked until all the dependents have terminated.  Any remaining finalization
is then performed and the master is left.
<dt><a name="6">(6)</a><dd>Completion of a task (and the corresponding task_body) can occur when the
task is blocked at a select_statement with an an open terminate_alternative
<a href="09-07-01.htm">(see 9.7.1)</a>; the open terminate_alternative is selected if and only if the
following conditions are satisfied:
<dt><a name="7">(7)</a><dd><ul><li>The task depends on some completed master;
</ul><dt><a name="8">(8)</a><dd><ul><li>Each task that depends on the master considered is either already
terminated or similarly blocked at a select_statement with an
open terminate_alternative.
</ul><dt><a name="9">(9)</a><dd>When both conditions are satisfied, the task considered becomes
completed, together with all tasks that depend on the master considered that
are not yet completed.
<p><dt><dd><ul>NOTES</ul>
<dt><a name="10">(10)</a><dd><ul>(8) The full view of a limited private type can be a task type, or can
have subcomponents of a task type.  Creation of an object of such a type
creates dependences according to the full type.
</ul><dt><a name="11">(11)</a><dd><ul>(9) An object_renaming_declaration defines a new view of an existing
entity and hence creates no further dependence.
</ul><dt><a name="12">(12)</a><dd><ul>(10) The rules given for the collective completion of a group of tasks
all blocked on select_statements with open terminate_alternatives ensure
that the collective completion can occur only when there are no
remaining active tasks that could call one of the tasks being
collectively completed.
</ul><dt><a name="13">(13)</a><dd><ul>(11) If two or more tasks are blocked on select_statements with open
terminate_alternatives, and become completed collectively, their
finalization actions proceed concurrently.
</ul><dt><a name="14">(14)</a><dd><ul>(12) The completion of a task can occur due to any of the following:
</ul><dt><a name="15">(15)</a><dd><ul><ul><li>the raising of an exception during the elaboration of the
declarative_part of the corresponding task_body;
</ul></ul><dt><a name="16">(16)</a><dd><ul><ul><li>the completion of the handled_sequence_of_statements of the
corresponding task_body;
</ul></ul><dt><a name="17">(17)</a><dd><ul><ul><li>the selection of an open terminate_alternative of a select_statement in the corresponding task_body;
</ul></ul><dt><a name="18">(18)</a><dd><ul><ul><li>the abort of the task.
</ul></ul></dl><h5 align="center">Examples</h5>
<dl><dt><a name="19">(19)</a><dd><em>Example of task dependence:
</em>
</dl><pre><a name="20">(20)</a>
       declare
          type Global is access Server;        <em>--  <a href="09-01.htm">see 9.1</a></em>
          A, B : Server;
          G    : Global;
       begin
          <em>--  activation of A and B</em>
          declare
             type Local is access Server;
             X : Global := new Server;  <em>--  activation of X.all</em>
             L : Local  := new Server;  <em>--  activation of L.all</em>
             C : Server;
          begin
             <em>--  activation of C</em>
             G := X;  <em>--  both G and X designate the same task object</em>
             ...
          end;  <em>--  await termination of C and L.all (but not X.all)</em>
          ...
       end;  <em>--  await termination of A, B, and G.all</em>
</pre><p>
<hr>
<h4><a href="09-02.htm"><img src="left.gif" alt="Prev"></a> | <a href="09.htm"><img src="up.gif" alt="Up"></a> | <a href="09-04.htm"><img src="right.gif" alt="Next"></a> | <a href="09-02.htm"><img src="back.gif" alt="Back"></a> | <a href="09-04.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<p>
<a href="http://lglwww.epfl.ch/Ada/"><img src="la-icon.gif" alt="Ada WWW Home"></a>
 -- Email comments, additions, corrections, gripes, kudos, etc. to:
<address>
<a href="author.htm">Magnus Kempe</a>
 -- <a href="mailto:Magnus.Kempe@di.epfl.ch">Magnus.Kempe@di.epfl.ch</a><br>
<a href="cright.htm">Copyright statement</a><br>
Page last generated: 95-03-12
</address>
</body>
</html>
