<html>
<head>
<title>Ada 95 RM - 4.9 Static Expressions and Static Subtypes</title>
<link rev="made" href="mailto:Magnus.Kempe@di.epfl.ch">
</head>

<body>
<h4><a href="04-08.htm"><img src="left.gif" alt="Prev"></a> | <a href="04.htm"><img src="up.gif" alt="Up"></a> | <img src="noright.gif" alt="____"> | <a href="04-08.htm"><img src="back.gif" alt="Back"></a> | <a href="04-09-01.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<hr>

<h2><a name="0">4.9 Static Expressions and Static Subtypes</a>
 -- <a href="toc04-09.htm">TOC</a>
</h2>
<dl><dt><a name="1">(1)</a><dd>Certain expressions of a scalar or string type are defined to be static.
Similarly, certain discrete ranges are defined to be static, and certain
scalar and string subtypes are defined to be static subtypes.  Static means
determinable at compile time, using the declared properties or values of the
program entities.
<dt><a name="2">(2)</a><dd>A static expression is a scalar or string expression that is one of the
following:
<dt><a name="3">(3)</a><dd><ul><li>a numeric_literal;
</ul><dt><a name="4">(4)</a><dd><ul><li>a string_literal of a static string subtype;
</ul><dt><a name="5">(5)</a><dd><ul><li>a name that denotes the declaration of a named number or a static
constant;
</ul><dt><a name="6">(6)</a><dd><ul><li>a function_call whose function_name or function_prefix statically
denotes a static function, and whose actual parameters, if any
(whether given explicitly or by default), are all static
expressions;
</ul><dt><a name="7">(7)</a><dd><ul><li>an attribute_reference that denotes a scalar value, and whose
prefix denotes a static scalar subtype;
</ul><dt><a name="8">(8)</a><dd><ul><li>an attribute_reference whose prefix statically denotes a
statically constrained array object or array subtype, and whose
attribute_designator is First, Last, or Length, with an optional
dimension;
</ul><dt><a name="9">(9)</a><dd><ul><li>a type_conversion whose subtype_mark denotes a static scalar
subtype, and whose operand is a static expression;
</ul><dt><a name="10">(10)</a><dd><ul><li>a qualified_expression whose subtype_mark denotes a static
(scalar or string) subtype, and whose operand is a static
expression;
</ul><dt><a name="11">(11)</a><dd><ul><li>a membership test whose simple_expression is a static expression,
and whose range is a static range or whose subtype_mark denotes a
static (scalar or string) subtype;
</ul><dt><a name="12">(12)</a><dd><ul><li>a short-circuit control form both of whose relations are static
expressions;
</ul><dt><a name="13">(13)</a><dd><ul><li>a static expression enclosed in parentheses.
</ul><dt><a name="14">(14)</a><dd>A name statically denotes an entity if it denotes the entity and:
<dt><a name="15">(15)</a><dd><ul><li>It is a direct_name, expanded name, or character_literal, and it
denotes a declaration other than a renaming_declaration; or
</ul><dt><a name="16">(16)</a><dd><ul><li>It is an attribute_reference whose prefix statically denotes some
entity; or
</ul><dt><a name="17">(17)</a><dd><ul><li>It denotes a renaming_declaration with a name that statically
denotes the renamed entity.
</ul><dt><a name="18">(18)</a><dd>A static function is one of the following:
<dt><a name="19">(19)</a><dd><ul><li>a predefined operator whose parameter and result types are all
scalar types none of which are descendants of formal scalar
types;
</ul><dt><a name="20">(20)</a><dd><ul><li>a predefined concatenation operator whose result type is a string
type;
</ul><dt><a name="21">(21)</a><dd><ul><li>an enumeration literal;
</ul><dt><a name="22">(22)</a><dd><ul><li>a language-defined attribute that is a function, if the prefix
denotes a static scalar subtype, and if the parameter and result
types are scalar.
</ul><dt><a name="23">(23)</a><dd>In any case, a generic formal subprogram is not a static function.
<dt><a name="24">(24)</a><dd>A static constant is a constant view declared by a full constant
declaration or an object_renaming_declaration with a static nominal subtype,
having a value defined by a static scalar expression or by a static string
expression whose value has a length not exceeding the maximum length of a
string_literal in the implementation.
<dt><a name="25">(25)</a><dd>A static range is a range whose bounds are static expressions, or a
range_attribute_reference that is equivalent to such a range.  A static
discrete_range is one that is a static range or is a subtype_indication that
defines a static scalar subtype.  The base range of a scalar type is a static
range, unless the type is a descendant of a formal scalar type.
<dt><a name="26">(26)</a><dd>A static subtype is either a static scalar subtype or a static string
subtype.  A static scalar subtype is an unconstrained scalar subtype whose
type is not a descendant of a formal scalar type, or a constrained scalar
subtype formed by imposing a compatible static constraint on a static scalar
subtype.  A static string subtype is an unconstrained string subtype whose
index subtype and component subtype are static (and whose type is not a
descendant of a formal array type), or a constrained string subtype formed by
imposing a compatible static constraint on a static string subtype.  In any
case, the subtype of a generic formal object of mode in out, and the result
subtype of a generic formal function, are not static.
<dt><a name="27">(27)</a><dd>The different kinds of static constraint are defined as follows:
<dt><a name="28">(28)</a><dd><ul><li>A null constraint is always static;
</ul><dt><a name="29">(29)</a><dd><ul><li>A scalar constraint is static if it has no range_constraint, or
one with a static range;
</ul><dt><a name="30">(30)</a><dd><ul><li>An index constraint is static if each discrete_range is static,
and each index subtype of the corresponding array type is static;
</ul><dt><a name="31">(31)</a><dd><ul><li>A discriminant constraint is static if each expression of the
constraint is static, and the subtype of each discriminant is
static.
</ul><dt><a name="32">(32)</a><dd>A subtype is statically constrained if it is constrained, and its
constraint is static.  An object is statically constrained if its nominal
subtype is statically constrained, or if it is a static string constant.
</dl><h5 align="center">Legality Rules</h5>
<dl><dt><a name="33">(33)</a><dd>A static expression is evaluated at compile time except when it is part
of the right operand of a static short-circuit control form whose value is
determined by its left operand.  This evaluation is performed exactly,
without performing Overflow_Checks.  For a static expression that is
evaluated:
<dt><a name="34">(34)</a><dd><ul><li>The expression is illegal if its evaluation fails a
language-defined check other than Overflow_Check.
</ul><dt><a name="35">(35)</a><dd><ul><li>If the expression is not part of a larger static expression, then
its value shall be within the base range of its expected type.
Otherwise, the value may be arbitrarily large or small.
</ul><dt><a name="36">(36)</a><dd><ul><li>If the expression is of type universal_real and its expected type
is a decimal fixed point type, then its value shall be a multiple
of the small of the decimal type.
</ul><dt><a name="37">(37)</a><dd>The last two restrictions above do not apply if the expected type is a
descendant of a formal scalar type (or a corresponding actual type in an
instance).
</dl><h5 align="center">Implementation Requirements</h5>
<dl><dt><a name="38">(38)</a><dd>For a real static expression that is not part of a larger static
expression, and whose expected type is not a descendant of a formal scalar
type, the implementation shall round or truncate the value (according to the
Machine_Rounds attribute of the expected type) to the nearest machine number
of the expected type; if the value is exactly half-way between two machine
numbers, any rounding shall be performed away from zero.  If the expected
type is a descendant of a formal scalar type, no special rounding or
truncating is required -- normal accuracy rules apply (see <a href="G.htm">Annex G)</a>.
<p><dt><dd><ul>NOTES</ul>
<dt><a name="39">(39)</a><dd><ul>(28) An expression can be static even if it occurs in a context where
staticness is not required.
</ul><dt><a name="40">(40)</a><dd><ul>(29) A static (or run-time) type_conversion from a real type to an
integer type performs rounding.  If the operand value is exactly
half-way between two integers, the rounding is performed away from zero.
</ul></dl><h5 align="center">Examples</h5>
<dl><dt><a name="41">(41)</a><dd><em>Examples of static expressions:
</em>
</dl><pre><a name="42">(42)</a>
       1 + 1       <em>-- 2</em>
       abs(-10)*3  <em>-- 30</em>
<a name="43">(43)</a>
       Kilo : constant := 1000;
       Mega : constant := Kilo*Kilo;   <em>-- 1_000_000</em>
       Long : constant := Float'Digits*2;
<a name="44">(44)</a>
       Half_Pi    : constant := Pi/2;           <em>-- <a href="03-03-02.htm">see 3.3.2</a></em>
       Deg_To_Rad : constant := Half_Pi/90;
       Rad_To_Deg : constant := 1.0/Deg_To_Rad; <em>-- equivalent to 1.0/((3.14159_26536/2)/90)</em>
</pre><hr><h3>Subclauses</h3>
<ol>
<li><a href="04-09-01.htm">Statically Matching Constraints and Subtypes</a>
</ol>
<p>
<hr>
<h4><a href="04-08.htm"><img src="left.gif" alt="Prev"></a> | <a href="04.htm"><img src="up.gif" alt="Up"></a> | <img src="noright.gif" alt="____"> | <a href="04-08.htm"><img src="back.gif" alt="Back"></a> | <a href="04-09-01.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<p>
<a href="http://lglwww.epfl.ch/Ada/"><img src="la-icon.gif" alt="Ada WWW Home"></a>
 -- Email comments, additions, corrections, gripes, kudos, etc. to:
<address>
<a href="author.htm">Magnus Kempe</a>
 -- <a href="mailto:Magnus.Kempe@di.epfl.ch">Magnus.Kempe@di.epfl.ch</a><br>
<a href="cright.htm">Copyright statement</a><br>
Page last generated: 95-03-12
</address>
</body>
</html>
