<html>
<head>
<title>Ada 95 RM - C.6 Shared Variable Control</title>
<link rev="made" href="mailto:Magnus.Kempe@di.epfl.ch">
</head>

<body>
<h4><a href="C-05.htm"><img src="left.gif" alt="Prev"></a> | <a href="C.htm"><img src="up.gif" alt="Up"></a> | <a href="C-07.htm"><img src="right.gif" alt="Next"></a> | <a href="C-05.htm"><img src="back.gif" alt="Back"></a> | <a href="C-07.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<hr>

<h2><a name="0">C.6 Shared Variable Control</a></h2>
<dl><dt><a name="1">(1)</a><dd>This clause specifies representation pragmas that control the use of
shared variables.
</dl><h5 align="center"><a name="syntax">Syntax</a></h5>
<dl><dt><a name="2">(2)</a><dd><ul><li>The form for pragmas Atomic, Volatile, Atomic_Components, and
Volatile_Components is as follows:
</ul></dl><pre><a name="3">(3)</a>
         pragma Atomic(local_name);
<a name="4">(4)</a>
         pragma Volatile(local_name);
<a name="5">(5)</a>
         pragma Atomic_Components(array_local_name);
<a name="6">(6)</a>
         pragma Volatile_Components(array_local_name);
</pre><dl><dt><a name="7">(7)</a><dd>An atomic type is one to which a pragma Atomic applies.  An atomic object
(including a component) is one to which a pragma Atomic applies, or a
component of an array to which a pragma Atomic_Components applies, or any
object of an atomic type.
<dt><a name="8">(8)</a><dd>A volatile type is one to which a pragma Volatile applies.  A volatile
object (including a component) is one to which a pragma Volatile applies, or
a component of an array to which a pragma Volatile_Components applies, or any
object of a volatile type.  In addition, every atomic type or object is also
defined to be volatile.  Finally, if an object is volatile, then so are all
of its subcomponents (the same does not apply to atomic).
</dl><h5 align="center">Name Resolution Rules</h5>
<dl><dt><a name="9">(9)</a><dd>The local_name in an Atomic or Volatile pragma shall resolve to denote
either an object_declaration, a non-inherited component_declaration, or a
full_type_declaration.  The array_local_name in an Atomic_Components or
Volatile_Components pragma shall resolve to denote the declaration of an
array type or an array object of an anonymous type.
</dl><h5 align="center">Legality Rules</h5>
<dl><dt><a name="10">(10)</a><dd>It is illegal to apply either an Atomic or Atomic_Components pragma to
an object or type if the implementation cannot support the indivisible reads
and updates required by the pragma (see below).
<dt><a name="11">(11)</a><dd>It is illegal to specify the Size attribute of an atomic object, the
Component_Size attribute for an array type with atomic components, or the
layout attributes of an atomic component, in a way that prevents the
implementation from performing the required indivisible reads and updates.
<dt><a name="12">(12)</a><dd>If an atomic object is passed as a parameter, then the type of the
formal parameter shall either be atomic or allow pass by copy (that is, not
be a nonatomic by-reference type).  If an atomic object is used as an actual
for a generic formal object of mode in out, then the type of the generic
formal object shall be atomic.  If the prefix of an attribute_reference for
an Access attribute denotes an atomic object (including a component), then
the designated type of the resulting access type shall be atomic.  If an
atomic type is used as an actual for a generic formal derived type, then the
ancestor of the formal type shall be atomic or allow pass by copy.
Corresponding rules apply to volatile objects and types.
<dt><a name="13">(13)</a><dd>If a pragma Volatile, Volatile_Components, Atomic, or Atomic_Components
applies to a stand-alone constant object, then a pragma Import shall also
apply to it.
</dl><h5 align="center">Static Semantics</h5>
<dl><dt><a name="14">(14)</a><dd>These pragmas are representation pragmas <a href="13-01.htm">(see 13.1)</a>.
</dl><h5 align="center">Dynamic Semantics</h5>
<dl><dt><a name="15">(15)</a><dd>For an atomic object (including an atomic component) all reads and
updates of the object as a whole are indivisible.
<dt><a name="16">(16)</a><dd>For a volatile object all reads and updates of the object as a whole are
performed directly to memory.
<dt><a name="17">(17)</a><dd>Two actions are sequential <a href="09-10.htm">(see 9.10)</a> if each is the read or update of
the same atomic object.
<dt><a name="18">(18)</a><dd>If a type is atomic or volatile and it is not a by-copy type, then the
type is defined to be a by-reference type.  If any subcomponent of a type is
atomic or volatile, then the type is defined to be a by-reference type.
<dt><a name="19">(19)</a><dd>If an actual parameter is atomic or volatile, and the corresponding
formal parameter is not, then the parameter is passed by copy.
</dl><h5 align="center">Implementation Requirements</h5>
<dl><dt><a name="20">(20)</a><dd>The external effect of a program <a href="01-01-03.htm">(see 1.1.3)</a> is defined to include each
read and update of a volatile or atomic object.  The implementation shall not
generate any memory reads or updates of atomic or volatile objects other than
those specified by the program.
<dt><a name="21">(21)</a><dd>If a pragma Pack applies to a type any of whose subcomponents are
atomic, the implementation shall not pack the atomic subcomponents more
tightly than that for which it can support indivisible reads and updates.
<p><dt><dd><ul>NOTES</ul>
<dt><a name="22">(22)</a><dd><ul>(9) An imported volatile or atomic constant behaves as a constant (i.e.
read-only) with respect to other parts of the Ada program, but can still
be modified by an ``external source.''
</ul></dl><p>
<hr>
<h4><a href="C-05.htm"><img src="left.gif" alt="Prev"></a> | <a href="C.htm"><img src="up.gif" alt="Up"></a> | <a href="C-07.htm"><img src="right.gif" alt="Next"></a> | <a href="C-05.htm"><img src="back.gif" alt="Back"></a> | <a href="C-07.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<p>
<a href="http://lglwww.epfl.ch/Ada/"><img src="la-icon.gif" alt="Ada WWW Home"></a>
 -- Email comments, additions, corrections, gripes, kudos, etc. to:
<address>
<a href="author.htm">Magnus Kempe</a>
 -- <a href="mailto:Magnus.Kempe@di.epfl.ch">Magnus.Kempe@di.epfl.ch</a><br>
<a href="cright.htm">Copyright statement</a><br>
Page last generated: 95-03-12
</address>
</body>
</html>
