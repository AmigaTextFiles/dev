<html>
<head>
<title>Ada 95 RM - 9.1 Task Units and Task Objects</title>
<link rev="made" href="mailto:Magnus.Kempe@di.epfl.ch">
</head>

<body>
<h4><img src="noleft.gif" alt="____"> | <a href="09.htm"><img src="up.gif" alt="Up"></a> | <a href="09-02.htm"><img src="right.gif" alt="Next"></a> | <a href="09.htm"><img src="back.gif" alt="Back"></a> | <a href="09-02.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<hr>

<h2><a name="0">9.1 Task Units and Task Objects</a></h2>
<dl><dt><a name="1">(1)</a><dd>A task unit is declared by a task declaration, which has a corresponding
task_body.  A task declaration may be a task_type_declaration, in which case
it declares a named task type; alternatively, it may be a single_task_declaration, in which case it defines an anonymous task type, as well as
declaring a named task object of that type.
</dl><h5 align="center"><a name="syntax">Syntax</a></h5>
<pre><a name="2">(2)</a>
       task_type_declaration ::=
          task type defining_identifier [known_discriminant_part] [is task_definition];
<a name="3">(3)</a>
       single_task_declaration ::=
          task defining_identifier [is task_definition];
<a name="4">(4)</a>
       task_definition ::=
            {task_item}
         [ private
            {task_item}]
         end [task_identifier]
<a name="5">(5)</a>
       task_item ::= entry_declaration | representation_clause
<a name="6">(6)</a>
       task_body ::=
          task body defining_identifier is
            declarative_part
          begin
            handled_sequence_of_statements
          end [task_identifier];
</pre><dl><dt><a name="7">(7)</a><dd><ul><li>If a task_identifier appears at the end of a task_definition or task_body, it shall repeat the defining_identifier.
</ul></dl><h5 align="center">Legality Rules</h5>
<dl><dt><a name="8">(8)</a><dd>A task declaration requires a completion, which shall be a task_body, and
every task_body shall be the completion of some task declaration.
</dl><h5 align="center">Static Semantics</h5>
<dl><dt><a name="9">(9)</a><dd>A task_definition defines a task type and its first subtype.  The first
list of task_items of a task_definition, together with the known_discriminant_part, if any, is called the visible part of the task unit.  The
optional list of task_items after the reserved word private is called the
private part of the task unit.
</dl><h5 align="center">Dynamic Semantics</h5>
<dl><dt><a name="10">(10)</a><dd>The elaboration of a task declaration elaborates the task_definition.
The elaboration of a single_task_declaration also creates an object of an
(anonymous) task type.
<dt><a name="11">(11)</a><dd>The elaboration of a task_definition creates the task type and its first
subtype; it also includes the elaboration of the entry_declarations in the
given order.
<dt><a name="12">(12)</a><dd>As part of the initialization of a task object, any representation_clauses and any per-object constraints associated with entry_declarations of
the corresponding task_definition are elaborated in the given order.
<dt><a name="13">(13)</a><dd>The elaboration of a task_body has no effect other than to establish
that tasks of the type can from then on be activated without failing the
Elaboration_Check.
<dt><a name="14">(14)</a><dd>The execution of a task_body is invoked by the activation of a task of
the corresponding type <a href="09-02.htm">(see 9.2)</a>.
<dt><a name="15">(15)</a><dd>The content of a task object of a given task type includes:
<dt><a name="16">(16)</a><dd><ul><li>The values of the discriminants of the task object, if any;
</ul><dt><a name="17">(17)</a><dd><ul><li>An entry queue for each entry of the task object;
</ul><dt><a name="18">(18)</a><dd><ul><li>A representation of the state of the associated task.
</ul><p><dt><dd><ul>NOTES</ul>
<dt><a name="19">(19)</a><dd><ul>(2) Within the declaration or body of a task unit, the name of the task
unit denotes the current instance of the unit <a href="08-06.htm">(see 8.6)</a>, rather than the
first subtype of the corresponding task type (and thus the name cannot
be used as a subtype_mark).
</ul><dt><a name="20">(20)</a><dd><ul>(3) The notation of a selected_component can be used to denote a
discriminant of a task <a href="04-01-03.htm">(see 4.1.3)</a>.  Within a task unit, the name of a
discriminant of the task type denotes the corresponding discriminant of
the current instance of the unit.
</ul><dt><a name="21">(21)</a><dd><ul>(4) A task type is a limited type <a href="07-05.htm">(see 7.5)</a>, and hence has neither an
assignment operation nor predefined equality operators.  If an
application needs to store and exchange task identities, it can do so by
defining an access type designating the corresponding task objects and
by using access values for identification purposes.  Assignment is
available for such an access type as for any access type.
Alternatively, if the implementation supports the Systems Programming
Annex, the Identity attribute can be used for task identification <a href="C-07.htm">(see C.7)</a>.
</ul></dl><h5 align="center">Examples</h5>
<dl><dt><a name="22">(22)</a><dd><em>Examples of declarations of task types:
</em>
</dl><pre><a name="23">(23)</a>
       task type Server is
          entry Next_Work_Item(WI : in Work_Item);
          entry Shut_Down;
       end Server;
<a name="24">(24)</a>
       task type Keyboard_Driver(ID : Keyboard_ID := New_ID) is
          entry Read (C : out Character);
          entry Write(C : in  Character);
       end Keyboard_Driver;
</pre><dl><dt><a name="25">(25)</a><dd><em>Examples of declarations of single tasks:
</em>
</dl><pre><a name="26">(26)</a>
       task Controller is
          entry Request(Level)(D : Item);  <em>--  a family of entries</em>
       end Controller;
<a name="27">(27)</a>
       task Parser is
          entry Next_Lexeme(L : in  Lexical_Element);
          entry Next_Action(A : out Parser_Action);
       end;
<a name="28">(28)</a>
       task User;  <em>--  has no entries</em>
</pre><dl><dt><a name="29">(29)</a><dd><em>Examples of task objects:
</em>
</dl><pre><a name="30">(30)</a>
       Agent    : Server;
       Teletype : Keyboard_Driver(TTY_ID);
       Pool     : array(1 .. 10) of Keyboard_Driver;
</pre><dl><dt><a name="31">(31)</a><dd><em>Example of access type designating task objects:
</em>
</dl><pre><a name="32">(32)</a>
       type Keyboard is access Keyboard_Driver;
       Terminal : Keyboard := new Keyboard_Driver(Term_ID);
</pre><p>
<hr>
<h4><img src="noleft.gif" alt="____"> | <a href="09.htm"><img src="up.gif" alt="Up"></a> | <a href="09-02.htm"><img src="right.gif" alt="Next"></a> | <a href="09.htm"><img src="back.gif" alt="Back"></a> | <a href="09-02.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<p>
<a href="http://lglwww.epfl.ch/Ada/"><img src="la-icon.gif" alt="Ada WWW Home"></a>
 -- Email comments, additions, corrections, gripes, kudos, etc. to:
<address>
<a href="author.htm">Magnus Kempe</a>
 -- <a href="mailto:Magnus.Kempe@di.epfl.ch">Magnus.Kempe@di.epfl.ch</a><br>
<a href="cright.htm">Copyright statement</a><br>
Page last generated: 95-03-12
</address>
</body>
</html>
