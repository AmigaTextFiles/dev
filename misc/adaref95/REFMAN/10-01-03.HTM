<html>
<head>
<title>Ada 95 RM - 10.1.3 Subunits of Compilation Units</title>
<link rev="made" href="mailto:Magnus.Kempe@di.epfl.ch">
</head>

<body>
<h4><a href="10-01-02.htm"><img src="left.gif" alt="Prev"></a> | <a href="10-01.htm"><img src="up.gif" alt="Up"></a> | <a href="10-01-04.htm"><img src="right.gif" alt="Next"></a> | <a href="10-01-02.htm"><img src="back.gif" alt="Back"></a> | <a href="10-01-04.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<hr>
<h3><a name="0">10.1.3 Subunits of Compilation Units</a></h3>
<dl><dt><a name="1">(1)</a><dd>Subunits are like child units, with these (important) differences:
subunits support the separate compilation of bodies only (not declarations);
the parent contains a body_stub to indicate the existence and place of each
of its subunits; declarations appearing in the parent's body can be visible
within the subunits.
</dl><h5 align="center"><a name="syntax">Syntax</a></h5>
<pre><a name="2">(2)</a>
       body_stub ::= subprogram_body_stub | package_body_stub | task_body_stub | protected_body_stub
<a name="3">(3)</a>
       subprogram_body_stub ::= subprogram_specification is separate;
<a name="4">(4)</a>
       package_body_stub ::= package body defining_identifier is separate;
<a name="5">(5)</a>
       task_body_stub ::= task body defining_identifier is separate;
<a name="6">(6)</a>
       protected_body_stub ::= protected body defining_identifier is separate;
<a name="7">(7)</a>
       subunit ::= separate (parent_unit_name) proper_body
</pre><h5 align="center">Legality Rules</h5>
<dl><dt><a name="8">(8)</a><dd>The parent body of a subunit is the body of the program unit denoted by
its parent_unit_name.    The term subunit is used to refer to a subunit and
also to the proper_body of a subunit.
<dt><a name="9">(9)</a><dd>The parent body of a subunit shall be present in the current environment,
and shall contain a corresponding body_stub with the same defining_identifier
as the subunit.
<dt><a name="10">(10)</a><dd>A package_body_stub shall be the completion of a package_declaration or
generic_package_declaration; a task_body_stub shall be the completion of a
task_declaration; a protected_body_stub shall be the completion of a
protected_declaration.
<dt><a name="11">(11)</a><dd>In contrast, a subprogram_body_stub need not be the completion of a
previous declaration, in which case the _stub declares the subprogram.  If
the _stub is a completion, it shall be the completion of a subprogram_declaration or generic_subprogram_declaration.  The profile of a subprogram_body_stub that completes a declaration shall conform fully to that of the
declaration.
<dt><a name="12">(12)</a><dd>A subunit that corresponds to a body_stub shall be of the same kind
(package_, subprogram_, task_, or protected_) as the body_stub.  The profile
of a subprogram_body subunit shall be fully conformant to that of the
corresponding body_stub.
<dt><a name="13">(13)</a><dd>A body_stub shall appear immediately within the declarative_part of a
compilation unit body.  This rule does not apply within an instance of a
generic unit.
<dt><a name="14">(14)</a><dd>The defining_identifiers of all body_stubs that appear immediately
within a particular declarative_part shall be distinct.
</dl><h5 align="center">Post-Compilation Rules</h5>
<dl><dt><a name="15">(15)</a><dd>For each body_stub, there shall be a subunit containing the
corresponding proper_body.
<p><dt><dd><ul>NOTES</ul>
<dt><a name="16">(16)</a><dd><ul>(4) The rules <a href="10-01-04.htm">in 10.1.4</a>, ``The Compilation Process'' say that a body_stub is equivalent to the corresponding proper_body.  This implies:
</ul><dt><a name="17">(17)</a><dd><ul><ul><li>Visibility within a subunit is the visibility that would be
obtained at the place of the corresponding body_stub (within
the parent body) if the context_clause of the subunit were
appended to that of the parent body.
</ul></ul><dt><a name="18">(18)</a><dd><ul><ul><li>The effect of the elaboration of a body_stub is to elaborate
the subunit.
</ul></ul></dl><h5 align="center">Examples</h5>
<dl><dt><a name="19">(19)</a><dd>The package Parent is first written without subunits:
</dl><pre><a name="20">(20)</a>
       package Parent is
           procedure Inner;
       end Parent;
<a name="21">(21)</a>
       with Ada.Text_IO;
       package body Parent is
           Variable : String := "Hello, there.";
           procedure Inner is
           begin
               Ada.Text_IO.Put_Line(Variable);
           end Inner;
       end Parent;
</pre><dl><dt><a name="22">(22)</a><dd>The body of procedure Inner may be turned into a subunit by rewriting
the package body as follows (with the declaration of Parent remaining the
same):
</dl><pre><a name="23">(23)</a>
       package body Parent is
           Variable : String := "Hello, there.";
           procedure Inner is separate;
       end Parent;
<a name="24">(24)</a>
       with Ada.Text_IO;
       separate(Parent)
       procedure Inner is
       begin
           Ada.Text_IO.Put_Line(Variable);
       end Inner;
</pre><hr>
<h4><a href="10-01-02.htm"><img src="left.gif" alt="Prev"></a> | <a href="10-01.htm"><img src="up.gif" alt="Up"></a> | <a href="10-01-04.htm"><img src="right.gif" alt="Next"></a> | <a href="10-01-02.htm"><img src="back.gif" alt="Back"></a> | <a href="10-01-04.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<p>
<a href="http://lglwww.epfl.ch/Ada/"><img src="la-icon.gif" alt="Ada WWW Home"></a>
 -- Email comments, additions, corrections, gripes, kudos, etc. to:
<address>
<a href="author.htm">Magnus Kempe</a>
 -- <a href="mailto:Magnus.Kempe@di.epfl.ch">Magnus.Kempe@di.epfl.ch</a><br>
<a href="cright.htm">Copyright statement</a><br>
Page last generated: 95-03-12
</address>
</body>
</html>
