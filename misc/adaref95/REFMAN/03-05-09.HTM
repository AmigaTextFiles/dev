<html>
<head>
<title>Ada 95 RM - 3.5.9 Fixed Point Types</title>
<link rev="made" href="mailto:Magnus.Kempe@di.epfl.ch">
</head>

<body>
<h4><a href="03-05-08.htm"><img src="left.gif" alt="Prev"></a> | <a href="03-05.htm"><img src="up.gif" alt="Up"></a> | <a href="03-05-10.htm"><img src="right.gif" alt="Next"></a> | <a href="03-05-08.htm"><img src="back.gif" alt="Back"></a> | <a href="03-05-10.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<hr>
<h3><a name="0">3.5.9 Fixed Point Types</a></h3>
<dl><dt><a name="1">(1)</a><dd>A fixed point type is either an ordinary fixed point type, or a decimal
fixed point type.  The error bound of a fixed point type is specified as an
absolute value, called the delta of the fixed point type.
</dl><h5 align="center"><a name="syntax">Syntax</a></h5>
<pre><a name="2">(2)</a>
       fixed_point_definition ::= ordinary_fixed_point_definition | decimal_fixed_point_definition
<a name="3">(3)</a>
       ordinary_fixed_point_definition ::=
          delta static_expression  real_range_specification
<a name="4">(4)</a>
       decimal_fixed_point_definition ::=
          delta static_expression digits static_expression [real_range_specification]
<a name="5">(5)</a>
       digits_constraint ::=
          digits static_expression [range_constraint]
</pre><h5 align="center">Name Resolution Rules</h5>
<dl><dt><a name="6">(6)</a><dd>For a type defined by a fixed_point_definition, the delta of the type is
specified by the value of the expression given after the reserved word delta;
this expression is expected to be of any real type.  For a type defined by a
decimal_fixed_point_definition (a decimal fixed point type), the number of
significant decimal digits for its first subtype (the digits of the first
subtype) is specified by the expression given after the reserved word digits;
this expression is expected to be of any integer type.
</dl><h5 align="center">Legality Rules</h5>
<dl><dt><a name="7">(7)</a><dd>In a fixed_point_definition or digits_constraint, the expressions given
after the reserved words delta and digits shall be static; their values shall
be positive.
<dt><a name="8">(8)</a><dd>The set of values of a fixed point type comprise the integral multiples
of a number called the small of the type.  For a type defined by an ordinary_fixed_point_definition (an ordinary fixed point type), the small may be
specified by an attribute_definition_clause <a href="13-03.htm">(see 13.3)</a>; if so specified, it
shall be no greater than the delta of the type.  If not specified, the small
of an ordinary fixed point type is an implementation-defined power of two
less than or equal to the delta.
<dt><a name="9">(9)</a><dd>For a decimal fixed point type, the small equals the delta; the delta
shall be a power of 10.  If a real_range_specification is given, both bounds
of the range shall be in the range -(10**digits-1)*delta ..
+(10**digits-1)*delta.
<dt><a name="10">(10)</a><dd>A fixed_point_definition is illegal if the implementation does not
support a fixed point type with the given small and specified range or
digits.
<dt><a name="11">(11)</a><dd>For a subtype_indication with a digits_constraint, the subtype_mark
shall denote a decimal fixed point subtype.
</dl><h5 align="center">Static Semantics</h5>
<dl><dt><a name="12">(12)</a><dd>The base range <a href="03-05.htm">(see 3.5)</a> of a fixed point type is symmetric around zero,
except possibly for an extra negative value in some implementations.
<dt><a name="13">(13)</a><dd>An ordinary_fixed_point_definition defines an ordinary fixed point type
whose base range includes at least all multiples of small that are between
the bounds specified in the real_range_specification.  The base range of the
type does not necessarily include the specified bounds themselves.  An
ordinary_fixed_point_definition also defines a constrained first subtype of
the type, with each bound of its range given by the closer to zero of:
<dt><a name="14">(14)</a><dd><ul><li>the value of the conversion to the fixed point type of the
corresponding expression of the real_range_specification;
</ul><dt><a name="15">(15)</a><dd><ul><li>the corresponding bound of the base range.
</ul><dt><a name="16">(16)</a><dd>A decimal_fixed_point_definition defines a decimal fixed point type
whose base range includes at least the range -(10**digits-1)*delta ..
+(10**digits-1)*delta.  A decimal_fixed_point_definition also defines a
constrained first subtype of the type.  If a real_range_specification is
given, the bounds of the first subtype are given by a conversion of the
values of the expressions of the real_range_specification.  Otherwise, the
range of the first subtype is -(10**digits-1)*delta .. +(10**digits-1)*delta.
</dl><h5 align="center">Dynamic Semantics</h5>
<dl><dt><a name="17">(17)</a><dd>The elaboration of a fixed_point_definition creates the fixed point type
and its first subtype.
<dt><a name="18">(18)</a><dd>For a digits_constraint on a decimal fixed point subtype with a given
delta, if it does not have a range_constraint, then it specifies an implicit
range -(10**D-1)*delta .. +(10**D-1)*delta, where D is the value of the
expression.  A digits_constraint is compatible with a decimal fixed point
subtype if the value of the expression is no greater than the digits of the
subtype, and if it specifies (explicitly or implicitly) a range that is
compatible with the subtype.
<dt><a name="19">(19)</a><dd>The elaboration of a digits_constraint consists of the elaboration of
the range_constraint, if any.  If a range_constraint is given, a check is
made that the bounds of the range are both in the range -(10**D-1)*delta ..
+(10**D-1)*delta, where D is the value of the (static) expression given after
the reserved word digits.  If this check fails, Constraint_Error is raised.
</dl><h5 align="center">Implementation Requirements</h5>
<dl><dt><a name="20">(20)</a><dd>The implementation shall support at least 24 bits of precision
(including the sign bit) for fixed point types.
</dl><h5 align="center">Implementation Permissions</h5>
<dl><dt><a name="21">(21)</a><dd>Implementations are permitted to support only smalls that are a power of
two.  In particular, all decimal fixed point type declarations can be
disallowed.  Note however that conformance with the Information Systems Annex
requires support for decimal smalls, and decimal fixed point type
declarations with digits up to at least 18.
<p><dt><dd><ul>NOTES</ul>
<dt><a name="22">(22)</a><dd><ul>(36)  The base range of an ordinary fixed point type need not include
the specified bounds themselves so that the range specification can be
given in a natural way, such as:
</ul></dl><pre><a name="23">(23)</a>
          type Fraction is delta 2.0**(-15) range -1.0 .. 1.0;
</pre><dl><dt><a name="24">(24)</a><dd><ul>With 2's complement hardware, such a type could have a signed
16-bit representation, using 1 bit for the sign and 15 bits for
fraction, resulting in a base range of -1.0 .. 1.0-2.0**(-15).
</ul></dl><h5 align="center">Examples</h5>
<dl><dt><a name="25">(25)</a><dd><em>Examples of fixed point types and subtypes:
</em>
</dl><pre><a name="26">(26)</a>
       type Volt is delta 0.125 range 0.0 .. 255.0;
<a name="27">(27)</a>
         <em>--  A pure fraction which requires all the available</em>
         <em>--  space in a word can be declared as the type Fraction:</em>
       type Fraction is delta System.Fine_Delta range -1.0 .. 1.0;
         <em>--  Fraction'Last = 1.0 - System.Fine_Delta</em>
<a name="28">(28)</a>
       type Money is delta 0.01 digits 15;  <em>-- decimal fixed point</em>
       subtype Salary is Money digits 10;
         <em>-- Money'Last = 10.0**13 - 0.01, Salary'Last = 10.0**8 - 0.01</em>
</pre><hr>
<h4><a href="03-05-08.htm"><img src="left.gif" alt="Prev"></a> | <a href="03-05.htm"><img src="up.gif" alt="Up"></a> | <a href="03-05-10.htm"><img src="right.gif" alt="Next"></a> | <a href="03-05-08.htm"><img src="back.gif" alt="Back"></a> | <a href="03-05-10.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<p>
<a href="http://lglwww.epfl.ch/Ada/"><img src="la-icon.gif" alt="Ada WWW Home"></a>
 -- Email comments, additions, corrections, gripes, kudos, etc. to:
<address>
<a href="author.htm">Magnus Kempe</a>
 -- <a href="mailto:Magnus.Kempe@di.epfl.ch">Magnus.Kempe@di.epfl.ch</a><br>
<a href="cright.htm">Copyright statement</a><br>
Page last generated: 95-03-12
</address>
</body>
</html>
