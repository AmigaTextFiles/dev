<html>
<head>
<title>Ada 95 RM - 11.4.2 Example of Exception Handling</title>
<link rev="made" href="mailto:Magnus.Kempe@di.epfl.ch">
</head>

<body>
<h4><a href="11-04-01.htm"><img src="left.gif" alt="Prev"></a> | <a href="11-04.htm"><img src="up.gif" alt="Up"></a> | <img src="noright.gif" alt="____"> | <a href="11-04-01.htm"><img src="back.gif" alt="Back"></a> | <a href="11-05.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<hr>
<h3><a name="0">11.4.2 Example of Exception Handling</a></h3>
<h5 align="center">Examples</h5>
<dl><dt><a name="1">(1)</a><dd>Exception handling may be used to separate the detection of an error from
the response to that error:
</dl><pre><a name="2">(2)</a>
       with Ada.Exceptions;
       use Ada;
       package File_System is
           type File_Handle is limited private;
<a name="3">(3)</a>
           File_Not_Found : exception;
           procedure Open(F : in out File_Handle; Name : String);
               <em>-- raises File_Not_Found if named file does not exist</em>
<a name="4">(4)</a>
           End_Of_File : exception;
           procedure Read(F : in out File_Handle; Data : out Data_Type);
               <em>-- raises End_Of_File if the file is not open</em>
<a name="5">(5)</a>
           ...
       end File_System;
<a name="6">(6)</a>
       package body File_System is
           procedure Open(F : in out File_Handle; Name : String) is
           begin
               if File_Exists(Name) then
                   ...
               else
                   Exceptions.Raise_Exception(File_Not_Found'Identity,
                                             "File not found: " &amp; Name &amp; ".");
               end if;
           end Open;
<a name="7">(7)</a>
           procedure Read(F : in out File_Handle; Data : out Data_Type) is
           begin
               if F.Current_Position &lt;= F.Last_Position then
                   ...
               else
                   raise End_Of_File;
               end if;
           end Read;
<a name="8">(8)</a>
           ...
<a name="9">(9)</a>
       end File_System;
<a name="10">(10)</a>
       with Ada.Text_IO;
       with Ada.Exceptions;
       with File_System; use File_System;
       use Ada;
       procedure Main is
       begin
           ... <em>-- call operations in File_System</em>
       exception
           when End_Of_File =&gt;
               Close(Some_File);
           when Not_Found_Error : File_Not_Found =&gt;
               Text_IO.Put_Line(Exceptions.Exception_Message(Not_Found_Error));
           when The_Error : others =&gt;
               Text_IO.Put_Line("Unknown error:");
               if Verbosity_Desired then
                   Text_IO.Put_Line(Exceptions.Exception_Information(The_Error));
               else
                   Text_IO.Put_Line(Exceptions.Exception_Name(The_Error));
                   Text_IO.Put_Line(Exceptions.Exception_Message(The_Error));
               end if;
               raise;
       end Main;
</pre><dl><dt><a name="11">(11)</a><dd>In the above example, the File_System package contains information about
detecting certain exceptional situations, but it does not specify how to
handle those situations.  Procedure Main specifies how to handle them; other
clients of File_System might have different handlers, even though the
exceptional situations arise from the same basic causes.
</dl><hr>
<h4><a href="11-04-01.htm"><img src="left.gif" alt="Prev"></a> | <a href="11-04.htm"><img src="up.gif" alt="Up"></a> | <img src="noright.gif" alt="____"> | <a href="11-04-01.htm"><img src="back.gif" alt="Back"></a> | <a href="11-05.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<p>
<a href="http://lglwww.epfl.ch/Ada/"><img src="la-icon.gif" alt="Ada WWW Home"></a>
 -- Email comments, additions, corrections, gripes, kudos, etc. to:
<address>
<a href="author.htm">Magnus Kempe</a>
 -- <a href="mailto:Magnus.Kempe@di.epfl.ch">Magnus.Kempe@di.epfl.ch</a><br>
<a href="cright.htm">Copyright statement</a><br>
Page last generated: 95-03-12
</address>
</body>
</html>
