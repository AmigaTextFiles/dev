<html>
<head>
<title>Ada 95 RM - A.10.9 Input-Output for Real Types</title>
<link rev="made" href="mailto:Magnus.Kempe@di.epfl.ch">
</head>

<body>
<h4><a href="A-10-08.htm"><img src="left.gif" alt="Prev"></a> | <a href="A-10.htm"><img src="up.gif" alt="Up"></a> | <a href="A-10-10.htm"><img src="right.gif" alt="Next"></a> | <a href="A-10-08.htm"><img src="back.gif" alt="Back"></a> | <a href="A-10-10.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<hr>
<h3><a name="0">A.10.9 Input-Output for Real Types</a></h3>
<h5 align="center">Static Semantics</h5>
<dl><dt><a name="1">(1)</a><dd>The following procedures are defined in the generic packages Float_IO,
Fixed_IO, and Decimal_IO, which have to be instantiated for the appropriate
floating point, ordinary fixed point, or decimal fixed point type
respectively (indicated by Num in the specifications).
<dt><a name="2">(2)</a><dd>Values are output as decimal literals without low line characters.  The
format of each value output consists of a Fore field, a decimal point, an Aft
field, and (if a nonzero Exp parameter is supplied) the letter E and an Exp
field.  The two possible formats thus correspond to:
</dl><pre><a name="3">(3)</a>
       Fore  .  Aft
</pre><dl><dt><a name="4">(4)</a><dd>and to:
</dl><pre><a name="5">(5)</a>
       Fore  .  Aft  E  Exp
</pre><dl><dt><a name="6">(6)</a><dd>without any spaces between these fields.  The Fore field may include
leading spaces, and a minus sign for negative values.  The Aft field includes
only decimal digits (possibly with trailing zeros).  The Exp field includes
the sign (plus or minus) and the exponent (possibly with leading zeros).
<dt><a name="7">(7)</a><dd>For floating point types, the default lengths of these fields are defined
by the following variables that are declared in the generic package Float_IO:
</dl><pre><a name="8">(8)</a>
       Default_Fore : Field := 2;
       Default_Aft  : Field := Num'Digits-1;
       Default_Exp  : Field := 3;
</pre><dl><dt><a name="9">(9)</a><dd>For ordinary or decimal fixed point types, the default lengths of these
fields are defined by the following variables that are declared in the
generic packages Fixed_IO and Decimal_IO, respectively:
</dl><pre><a name="10">(10)</a>
       Default_Fore : Field := Num'Fore;
       Default_Aft  : Field := Num'Aft;
       Default_Exp  : Field := 0;
</pre><dl><dt><a name="11">(11)</a><dd>The following procedures are provided:
</dl><pre><a name="12">(12)</a>
       procedure Get(File : in File_Type; Item : out Num; Width : in Field := 0);
       procedure Get(Item : out Num; Width : in Field := 0);
</pre><dl><dt><a name="13">(13)</a><dd><ul>If the value of the parameter Width is zero, skips any leading
blanks, line terminators, or page terminators, then reads the longest
possible sequence of characters matching the syntax of any of the
following <a href="02-04.htm">(see 2.4)</a>:
</ul><dt><a name="14">(14)</a><dd><ul><ul><li>[+|-]numeric_literal
</ul></ul><dt><a name="15">(15)</a><dd><ul><ul><li>[+|-]numeral.[exponent]
</ul></ul><dt><a name="16">(16)</a><dd><ul><ul><li>[+|-].numeral[exponent]
</ul></ul><dt><a name="17">(17)</a><dd><ul><ul><li>[+|-]base#based_numeral.#[exponent]
</ul></ul><dt><a name="18">(18)</a><dd><ul><ul><li>[+|-]base#.based_numeral#[exponent]
</ul></ul><dt><a name="19">(19)</a><dd><ul>If a nonzero value of Width is supplied, then exactly Width
characters are input, or the characters (possibly none) up to a line
terminator, whichever comes first; any skipped leading blanks are
included in the count.
</ul><dt><a name="20">(20)</a><dd><ul>Returns in the parameter Item the value of type Num that
corresponds to the sequence input, preserving the sign (positive if
none has been specified) of a zero value if Num is a floating point
type and Num'Signed_Zeros is True.
</ul><dt><a name="21">(21)</a><dd><ul>The exception Data_Error is propagated if the sequence input
does not have the required syntax or if the value obtained is not of
the subtype Num.
</ul></dl><pre><a name="22">(22)</a>
       procedure Put(File : in File_Type;
                     Item : in Num;
                     Fore : in Field := Default_Fore;
                     Aft  : in Field := Default_Aft;
                     Exp  : in Field := Default_Exp);

       procedure Put(Item : in Num;
                     Fore : in Field := Default_Fore;
                     Aft  : in Field := Default_Aft;
                     Exp  : in Field := Default_Exp);
</pre><dl><dt><a name="23">(23)</a><dd><ul>Outputs the value of the parameter Item as a decimal literal
with the format defined by Fore, Aft and Exp.  If the value is
negative, or if Num is a floating point type where Num'Signed_Zeros
is True and the value is a negatively signed zero, then a minus sign
is included in the integer part.  If Exp has the value zero, then the
integer part to be output has as many digits as are needed to
represent the integer part of the value of Item, overriding Fore if
necessary, or consists of the digit zero if the value of Item has no
integer part.
</ul><dt><a name="24">(24)</a><dd><ul>If Exp has a value greater than zero, then the integer part to
be output has a single digit, which is nonzero except for the value
0.0 of Item.
</ul><dt><a name="25">(25)</a><dd><ul>In both cases, however, if the integer part to be output has
fewer than Fore characters, including any minus sign, then leading
spaces are first output to make up the difference.  The number of
digits of the fractional part is given by Aft, or is one if Aft
equals zero.  The value is rounded; a value of exactly one half in
the last place is rounded away from zero.
</ul><dt><a name="26">(26)</a><dd><ul>If Exp has the value zero, there is no exponent part.  If Exp
has a value greater than zero, then the exponent part to be output
has as many digits as are needed to represent the exponent part of
the value of Item (for which a single digit integer part is used),
and includes an initial sign (plus or minus).  If the exponent part
to be output has fewer than Exp characters, including the sign, then
leading zeros precede the digits, to make up the difference.  For the
value 0.0 of Item, the exponent has the value zero.
</ul></dl><pre><a name="27">(27)</a>
       procedure Get(From : in String; Item : out Num; Last : out Positive);
</pre><dl><dt><a name="28">(28)</a><dd><ul>Reads a real value from the beginning of the given string,
following the same rule as the Get procedure that reads a real value
from a file, but treating the end of the string as a file terminator.
Returns, in the parameter Item, the value of type Num that
corresponds to the sequence input.  Returns in Last the index value
such that From(Last) is the last character read.
</ul><dt><a name="29">(29)</a><dd><ul>The exception Data_Error is propagated if the sequence input
does not have the required syntax, or if the value obtained is not of
the subtype Num.
</ul></dl><pre><a name="30">(30)</a>
       procedure Put(To   : out String;
                     Item : in Num;
                     Aft  : in Field := Default_Aft;
                     Exp  : in Field := Default_Exp);
</pre><dl><dt><a name="31">(31)</a><dd><ul>Outputs the value of the parameter Item to the given string,
following the same rule as for output to a file, using a value for
Fore such that the sequence of characters output exactly fills the
string, including any leading spaces.
</ul><dt><a name="32">(32)</a><dd>Float_Text_IO is a library package that is a nongeneric equivalent to
Text_IO.Float_IO for the predefined type Float:
</dl><pre><a name="33">(33)</a>
       with Ada.Text_IO;
       package Ada.Float_Text_IO is new Ada.Text_IO.Float_IO(Float);
</pre><dl><dt><a name="34">(34)</a><dd>For each predefined floating point type, a nongeneric equivalent to
Text_IO.Float_IO is provided, with names such as Ada.Long_Float_Text_IO.
</dl><h5 align="center">Implementation Permissions</h5>
<dl><dt><a name="35">(35)</a><dd>An implementation may extend Get and Put for floating point types to
support special values such as infinities and NaNs.
<dt><a name="36">(36)</a><dd>The implementation of Put need not produce an output value with greater
accuracy than is supported for the base subtype.  The additional accuracy, if
any, of the value produced by Put when the number of requested digits in the
integer and fractional parts exceeds the required accuracy is implementation
defined.
<dt><a name="37">(37)</a><dd>The nongeneric equivalent packages may, but need not, be actual
instantiations of the generic package for the appropriate predefined type.
<p><dt><dd><ul>NOTES</ul>
<dt><a name="38">(38)</a><dd><ul>(30) For an item with a positive value, if output to a string exactly
fills the string without leading spaces, then output of the
corresponding negative value will propagate Layout_Error.
</ul><dt><a name="39">(39)</a><dd><ul>(31) The rules for the Value attribute <a href="03-05.htm">(see 3.5)</a> and the rules for Get
are based on the same set of formats.
</ul></dl><h5 align="center">Examples</h5>
<pre><a name="40">(40)</a>
       <em>-- (blank)</em>
<a name="41">(41)</a>
       package Real_IO is new Float_IO(Real); use Real_IO;
       <em>-- default format used at instantiation, Default_Exp = 3</em>
<a name="42">(42)</a>
       X : Real := -123.4567;  <em>--  digits 8      <a href="03-05-07.htm">(see 3.5.7)</a></em>
<a name="43">(43)</a>
       Put(X);  <em>-- default format                          "-1.2345670E+02"</em>
       Put(X, Fore =&gt; 5, Aft =&gt; 3, Exp =&gt; 2);              <em>-- "bbb-1.235E+2"</em>
       Put(X, 5, 3, 0);                                    <em>-- "b-123.457"</em>
</pre><hr>
<h4><a href="A-10-08.htm"><img src="left.gif" alt="Prev"></a> | <a href="A-10.htm"><img src="up.gif" alt="Up"></a> | <a href="A-10-10.htm"><img src="right.gif" alt="Next"></a> | <a href="A-10-08.htm"><img src="back.gif" alt="Back"></a> | <a href="A-10-10.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<p>
<a href="http://lglwww.epfl.ch/Ada/"><img src="la-icon.gif" alt="Ada WWW Home"></a>
 -- Email comments, additions, corrections, gripes, kudos, etc. to:
<address>
<a href="author.htm">Magnus Kempe</a>
 -- <a href="mailto:Magnus.Kempe@di.epfl.ch">Magnus.Kempe@di.epfl.ch</a><br>
<a href="cright.htm">Copyright statement</a><br>
Page last generated: 95-03-12
</address>
</body>
</html>
