<html>
<head>
<title>Ada 95 RM - 7.2 Package Bodies</title>
<link rev="made" href="mailto:Magnus.Kempe@di.epfl.ch">
</head>

<body>
<h4><a href="07-01.htm"><img src="left.gif" alt="Prev"></a> | <a href="07.htm"><img src="up.gif" alt="Up"></a> | <a href="07-03.htm"><img src="right.gif" alt="Next"></a> | <a href="07-01.htm"><img src="back.gif" alt="Back"></a> | <a href="07-03.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<hr>

<h2><a name="0">7.2 Package Bodies</a></h2>
<dl><dt><a name="1">(1)</a><dd>In contrast to the entities declared in the visible part of a package,
the entities declared in the package_body are visible only within the
package_body itself.  As a consequence, a package with a package_body can be
used for the construction of a group of related subprograms in which the
logical operations available to clients are clearly isolated from the
internal entities.
</dl><h5 align="center"><a name="syntax">Syntax</a></h5>
<pre><a name="2">(2)</a>
       package_body ::=
           package body defining_program_unit_name is
              declarative_part
          [begin
               handled_sequence_of_statements]
           end [[parent_unit_name.]identifier];
</pre><dl><dt><a name="3">(3)</a><dd><ul><li>If an identifier or parent_unit_name.identifier appears at the end of
a package_body, then this sequence of lexical elements shall repeat the
defining_program_unit_name.
</ul></dl><h5 align="center">Legality Rules</h5>
<dl><dt><a name="4">(4)</a><dd>A package_body shall be the completion of a previous package_declaration
or generic_package_declaration.  A library package_declaration or library
generic_package_declaration shall not have a body unless it requires a body;
pragma Elaborate_Body can be used to require a library_unit_declaration to
have a body <a href="10-02-01.htm">(see 10.2.1)</a> if it would not otherwise require one.
</dl><h5 align="center">Static Semantics</h5>
<dl><dt><a name="5">(5)</a><dd>In any package_body without statements there is an implicit null_statement.  For any package_declaration without an explicit completion, there
is an implicit package_body containing a single null_statement.  For a
noninstance, nonlibrary package, this body occurs at the end of the
declarative_part of the innermost enclosing program unit or block_statement;
if there are several such packages, the order of the implicit package_bodies
is unspecified.  (For an instance, the implicit package_body occurs at the
place of the instantiation <a href="12-03.htm">(see 12.3)</a>.  For a library package, the place is
partially determined by the elaboration dependences (see <a href="10.htm">Section 10)</a>.)
</dl><h5 align="center">Dynamic Semantics</h5>
<dl><dt><a name="6">(6)</a><dd>For the elaboration of a nongeneric package_body, its declarative_part is
first elaborated, and its handled_sequence_of_statements is then executed.
<p><dt><dd><ul>NOTES</ul>
<dt><a name="7">(7)</a><dd><ul>(3) A variable declared in the body of a package is only visible within
this body and, consequently, its value can only be changed within the
package_body.  In the absence of local tasks, the value of such a
variable remains unchanged between calls issued from outside the package
to subprograms declared in the visible part.  The properties of such a
variable are similar to those of a ``static'' variable of C.
</ul><dt><a name="8">(8)</a><dd><ul>(4) The elaboration of the body of a subprogram explicitly declared in
the visible part of a package is caused by the elaboration of the body
of the package.  Hence a call of such a subprogram by an outside program
unit raises the exception Program_Error if the call takes place before
the elaboration of the package_body <a href="03-11.htm">(see 3.11)</a>.
</ul></dl><h5 align="center">Examples</h5>
<dl><dt><a name="9">(9)</a><dd><em>Example of a package body <a href="07-01.htm">(see 7.1)</a>:
</em>
</dl><pre><a name="10">(10)</a>
       package body Rational_Numbers is
<a name="11">(11)</a>
          procedure Same_Denominator (X,Y : in out Rational) is
          begin
             <em>--  reduces X and Y to the same denominator:</em>
             ...
          end Same_Denominator;
<a name="12">(12)</a>
          function "="(X,Y : Rational) return Boolean is
             U : Rational := X;
             V : Rational := Y;
          begin
             Same_Denominator (U,V);
             return U.Numerator = V.Numerator;
          end "=";
<a name="13">(13)</a>
          function "/" (X,Y : Integer) return Rational is
          begin
             if Y &gt; 0 then
                return (Numerator =&gt; X,  Denominator =&gt; Y);
             else
                return (Numerator =&gt; -X, Denominator =&gt; -Y);
             end if;
          end "/";
<a name="14">(14)</a>
          function "+" (X,Y : Rational) return Rational is ...  end "+";
          function "-" (X,Y : Rational) return Rational is ...  end "-";
          function "*" (X,Y : Rational) return Rational is ...  end "*";
          function "/" (X,Y : Rational) return Rational is ...  end "/";
<a name="15">(15)</a>
       end Rational_Numbers;
</pre><p>
<hr>
<h4><a href="07-01.htm"><img src="left.gif" alt="Prev"></a> | <a href="07.htm"><img src="up.gif" alt="Up"></a> | <a href="07-03.htm"><img src="right.gif" alt="Next"></a> | <a href="07-01.htm"><img src="back.gif" alt="Back"></a> | <a href="07-03.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<p>
<a href="http://lglwww.epfl.ch/Ada/"><img src="la-icon.gif" alt="Ada WWW Home"></a>
 -- Email comments, additions, corrections, gripes, kudos, etc. to:
<address>
<a href="author.htm">Magnus Kempe</a>
 -- <a href="mailto:Magnus.Kempe@di.epfl.ch">Magnus.Kempe@di.epfl.ch</a><br>
<a href="cright.htm">Copyright statement</a><br>
Page last generated: 95-03-12
</address>
</body>
</html>
