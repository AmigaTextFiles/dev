<html>
<head>
<title>Ada 95 RM - 9.5.4 Requeue Statements</title>
<link rev="made" href="mailto:Magnus.Kempe@di.epfl.ch">
</head>

<body>
<h4><a href="09-05-03.htm"><img src="left.gif" alt="Prev"></a> | <a href="09-05.htm"><img src="up.gif" alt="Up"></a> | <img src="noright.gif" alt="____"> | <a href="09-05-03.htm"><img src="back.gif" alt="Back"></a> | <a href="09-06.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<hr>
<h3><a name="0">9.5.4 Requeue Statements</a></h3>
<dl><dt><a name="1">(1)</a><dd>A requeue_statement can be used to complete an accept_statement or entry_body, while redirecting the corresponding entry call to a new (or the same)
entry queue.  Such a requeue can be performed with or without allowing an
intermediate cancellation of the call, due to an abort or the expiration of a
delay.
</dl><h5 align="center"><a name="syntax">Syntax</a></h5>
<pre><a name="2">(2)</a>
       requeue_statement ::= requeue entry_name [with abort];
</pre><h5 align="center">Name Resolution Rules</h5>
<dl><dt><a name="3">(3)</a><dd>The entry_name of a requeue_statement shall resolve to denote an entry
(the target entry) that either has no parameters, or that has a profile that
is type conformant <a href="06-03-01.htm">(see 6.3.1)</a> with the profile of the innermost enclosing
entry_body or accept_statement.
</dl><h5 align="center">Legality Rules</h5>
<dl><dt><a name="4">(4)</a><dd>A requeue_statement shall be within a callable construct that is either
an entry_body or an accept_statement, and this construct shall be the
innermost enclosing body or callable construct.
<dt><a name="5">(5)</a><dd>If the target entry has parameters, then its profile shall be subtype
conformant with the profile of the innermost enclosing callable construct.
<dt><a name="6">(6)</a><dd>In a requeue_statement of an accept_statement of some task unit, either
the target object shall be a part of a formal parameter of the accept_statement, or the accessibility level of the target object shall not be equal
to or statically deeper than any enclosing accept_statement of the task unit.
In a requeue_statement of an entry_body of some protected unit, either the
target object shall be a part of a formal parameter of the entry_body, or the
accessibility level of the target object shall not be statically deeper than
that of the entry_declaration.
</dl><h5 align="center">Dynamic Semantics</h5>
<dl><dt><a name="7">(7)</a><dd>The execution of a requeue_statement proceeds by first evaluating the
entry_name, including the prefix identifying the target task or protected
object and the expression identifying the entry within an entry family, if
any.  The entry_body or accept_statement enclosing the requeue_statement is
then completed, finalized, and left <a href="07-06-01.htm">(see 7.6.1)</a>.
<dt><a name="8">(8)</a><dd>For the execution of a requeue on an entry of a target task, after
leaving the enclosing callable construct, the named entry is checked to see if it is open and the requeued call is either selected immediately or queued,
as for a normal entry call <a href="09-05-03.htm">(see 9.5.3)</a>.
<dt><a name="9">(9)</a><dd>For the execution of a requeue on an entry of a target protected object,
after leaving the enclosing callable construct:
<dt><a name="10">(10)</a><dd><ul><li>if the requeue is an internal requeue (that is, the requeue is
back on an entry of the same protected object -- <a href="09-05.htm">see 9.5)</a>, the
call is added to the queue of the named entry and the ongoing
protected action continues <a href="09-05-01.htm">(see 9.5.1)</a>;
</ul><dt><a name="11">(11)</a><dd><ul><li>if the requeue is an external requeue (that is, the target
protected object is not implicitly the same as the current object
-- <a href="09-05.htm">see 9.5)</a>, a protected action is started on the target object
and proceeds as for a normal entry call <a href="09-05-03.htm">(see 9.5.3)</a>.
</ul><dt><a name="12">(12)</a><dd>If the new entry named in the requeue_statement has formal parameters,
then during the execution of the accept_statement or entry_body corresponding
to the new entry, the formal parameters denote the same objects as did the
corresponding formal parameters of the callable construct completed by the
requeue.  In any case, no parameters are specified in a requeue_statement;
any parameter passing is implicit.
<dt><a name="13">(13)</a><dd>If the requeue_statement includes the reserved words with abort (it is a
requeue-with-abort), then:
<dt><a name="14">(14)</a><dd><ul><li>if the original entry call has been aborted <a href="09-08.htm">(see 9.8)</a>, then the
requeue acts as an abort completion point for the call, and the
call is cancelled and no requeue is performed;
</ul><dt><a name="15">(15)</a><dd><ul><li>if the original entry call was timed (or conditional), then the
original expiration time is the expiration time for the requeued
call.
</ul><dt><a name="16">(16)</a><dd>If the reserved words with abort do not appear, then the call remains
protected against cancellation while queued as the result of the requeue_statement.
<p><dt><dd><ul>NOTES</ul>
<dt><a name="17">(17)</a><dd><ul>(30) A requeue is permitted from a single entry to an entry of an entry
family, or vice-versa.  The entry index, if any, plays no part in the
subtype conformance check between the profiles of the two entries; an
entry index is part of the entry_name for an entry of a family.
</ul></dl><h5 align="center">Examples</h5>
<dl><dt><a name="18">(18)</a><dd><em>Examples of requeue statements:
</em>
</dl><pre><a name="19">(19)</a>
       requeue Request(Medium) with abort;
                           <em>-- requeue on a member of an entry family of the current task, <a href="09-01.htm">see 9.1</a></em>
<a name="20">(20)</a>
       requeue Flags(I).Seize;
                           <em>-- requeue on an entry of an array component, <a href="09-04.htm">see 9.4</a></em>
</pre><hr>
<h4><a href="09-05-03.htm"><img src="left.gif" alt="Prev"></a> | <a href="09-05.htm"><img src="up.gif" alt="Up"></a> | <img src="noright.gif" alt="____"> | <a href="09-05-03.htm"><img src="back.gif" alt="Back"></a> | <a href="09-06.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<p>
<a href="http://lglwww.epfl.ch/Ada/"><img src="la-icon.gif" alt="Ada WWW Home"></a>
 -- Email comments, additions, corrections, gripes, kudos, etc. to:
<address>
<a href="author.htm">Magnus Kempe</a>
 -- <a href="mailto:Magnus.Kempe@di.epfl.ch">Magnus.Kempe@di.epfl.ch</a><br>
<a href="cright.htm">Copyright statement</a><br>
Page last generated: 95-03-12
</address>
</body>
</html>
