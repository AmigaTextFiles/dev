<html>
<head>
<title>Ada 95 RM - 4.3.2 Extension Aggregates</title>
<link rev="made" href="mailto:Magnus.Kempe@di.epfl.ch">
</head>

<body>
<h4><a href="04-03-01.htm"><img src="left.gif" alt="Prev"></a> | <a href="04-03.htm"><img src="up.gif" alt="Up"></a> | <a href="04-03-03.htm"><img src="right.gif" alt="Next"></a> | <a href="04-03-01.htm"><img src="back.gif" alt="Back"></a> | <a href="04-03-03.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<hr>
<h3><a name="0">4.3.2 Extension Aggregates</a></h3>
<dl><dt><a name="1">(1)</a><dd>An extension_aggregate specifies a value for a type that is a record
extension by specifying a value or subtype for an ancestor of the type,
followed by associations for any components not determined by the ancestor_part.
</dl><h5 align="center"><a name="syntax">Syntax</a></h5>
<pre><a name="2">(2)</a>
       extension_aggregate ::=
           (ancestor_part with record_component_association_list)
<a name="3">(3)</a>
       ancestor_part ::= expression | subtype_mark
</pre><h5 align="center">Name Resolution Rules</h5>
<dl><dt><a name="4">(4)</a><dd>The expected type for an extension_aggregate shall be a single nonlimited
type that is a record extension.  If the ancestor_part is an expression, it
is expected to be of any nonlimited tagged type.
</dl><h5 align="center">Legality Rules</h5>
<dl><dt><a name="5">(5)</a><dd>If the ancestor_part is a subtype_mark, it shall denote a specific tagged
subtype.  The type of the extension_aggregate shall be derived from the type
of the ancestor_part, through one or more record extensions (and no private
extensions).
</dl><h5 align="center">Static Semantics</h5>
<dl><dt><a name="6">(6)</a><dd>For the record_component_association_list of an extension_aggregate, the
only components needed are those of the composite value defined by the
aggregate that are not inherited from the type of the ancestor_part, plus any
inherited discriminants if the ancestor_part is a subtype_mark that denotes
an unconstrained subtype.
</dl><h5 align="center">Dynamic Semantics</h5>
<dl><dt><a name="7">(7)</a><dd>For the evaluation of an extension_aggregate, the record_component_association_list is evaluated.  If the ancestor_part is an expression, it is
also evaluated; if the ancestor_part is a subtype_mark, the components of the
value of the aggregate not given by the record_component_association_list are
initialized by default as for an object of the ancestor type.  Any implicit
initializations or evaluations are performed in an arbitrary order, except
that the expression for a discriminant is evaluated prior to any other
evaluation or initialization that depends on it.
<dt><a name="8">(8)</a><dd>If the type of the ancestor_part has discriminants that are not inherited
by the type of the extension_aggregate, then, unless the ancestor_part is a
subtype_mark that denotes an unconstrained subtype, a check is made that each
discriminant of the ancestor has the value specified for a corresponding
discriminant, either in the record_component_association_list, or in the
derived_type_definition for some ancestor of the type of the extension_aggregate.  Constraint_Error is raised if this check fails.
<p><dt><dd><ul>NOTES</ul>
<dt><a name="9">(9)</a><dd><ul>(8) If all components of the value of the extension_aggregate are
determined by the ancestor_part, then the record_component_association_list is required to be simply null record.
</ul><dt><a name="10">(10)</a><dd><ul>(9) If the ancestor_part is a subtype_mark, then its type can be
abstract.  If its type is controlled, then as the last step of
evaluating the aggregate, the Initialize procedure of the ancestor type
is called, unless the Initialize procedure is abstract <a href="07-06.htm">(see 7.6)</a>.
</ul></dl><h5 align="center">Examples</h5>
<dl><dt><a name="11">(11)</a><dd><em>Examples of extension aggregates (for types defined <a href="03-09-01.htm">in 3.9.1)</a>:
</em>
</dl><pre><a name="12">(12)</a>
       Painted_Point'(Point with Red)
       (Point'(P) with Paint =&gt; Black)
<a name="13">(13)</a>
       (Expression with Left =&gt; 1.2, Right =&gt; 3.4)
       Addition'(Binop with null record)
                    <em>-- presuming Binop is of type Binary_Operation</em>
</pre><hr>
<h4><a href="04-03-01.htm"><img src="left.gif" alt="Prev"></a> | <a href="04-03.htm"><img src="up.gif" alt="Up"></a> | <a href="04-03-03.htm"><img src="right.gif" alt="Next"></a> | <a href="04-03-01.htm"><img src="back.gif" alt="Back"></a> | <a href="04-03-03.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<p>
<a href="http://lglwww.epfl.ch/Ada/"><img src="la-icon.gif" alt="Ada WWW Home"></a>
 -- Email comments, additions, corrections, gripes, kudos, etc. to:
<address>
<a href="author.htm">Magnus Kempe</a>
 -- <a href="mailto:Magnus.Kempe@di.epfl.ch">Magnus.Kempe@di.epfl.ch</a><br>
<a href="cright.htm">Copyright statement</a><br>
Page last generated: 95-03-12
</address>
</body>
</html>
