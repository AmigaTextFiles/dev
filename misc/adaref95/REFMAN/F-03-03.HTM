<html>
<head>
<title>Ada 95 RM - F.3.3 The Package Text_IO.Editing</title>
<link rev="made" href="mailto:Magnus.Kempe@di.epfl.ch">
</head>

<body>
<h4><a href="F-03-02.htm"><img src="left.gif" alt="Prev"></a> | <a href="F-03.htm"><img src="up.gif" alt="Up"></a> | <a href="F-03-04.htm"><img src="right.gif" alt="Next"></a> | <a href="F-03-02.htm"><img src="back.gif" alt="Back"></a> | <a href="F-03-04.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<hr>
<h3><a name="0">F.3.3 The Package Text_IO.Editing</a></h3>
<dl><dt><a name="1">(1)</a><dd>The package Text_IO.Editing provides a private type Picture with
associated operations, and a generic package Decimal_Output.  An object of
type Picture is composed from a well-formed picture String <a href="F-03-01.htm">(see F.3.1)</a> and a
Boolean item indicating whether a zero numeric value will result in an edited
output string of all space characters.  The package Decimal_Output contains
edited output subprograms implementing the effects defined <a href="F-03-02.htm">in F.3.2</a>.
</dl><h5 align="center">Static Semantics</h5>
<dl><dt><a name="2">(2)</a><dd>The library package Text_IO.Editing has the following declaration:
</dl><pre><a name="3">(3)</a>
       package Ada.Text_IO.Editing is
<a name="4">(4)</a>
          type Picture is private;

<a name="5">(5)</a>
          function Valid (Pic_String      : in String;
                          Blank_When_Zero : in Boolean := False) return Boolean;
<a name="6">(6)</a>
          function To_Picture (Pic_String      : in String;
                               Blank_When_Zero : in Boolean := False)
             return Picture;
<a name="7">(7)</a>
          function Pic_String      (Pic : in Picture) return String;
          function Blank_When_Zero (Pic : in Picture) return Boolean;
<a name="8">(8)</a>
          Max_Picture_Length  : constant := implementation_defined;
<a name="9">(9)</a>
          Picture_Error       : exception;
<a name="10">(10)</a>
          Default_Currency    : constant String    := "$";
          Default_Fill        : constant Character := '*';
          Default_Separator   : constant Character := ',';
          Default_Radix_Mark  : constant Character := '.';
<a name="11">(11)</a>
          generic
             type Num is delta &lt;&gt; digits &lt;&gt;;
             Default_Currency   : in String    :=  Text_IO.Editing.Default_Currency;
             Default_Fill       : in Character :=  Text_IO.Editing.Default_Fill;
             Default_Separator  : in Character :=  Text_IO.Editing.Default_Separator;
             Default_Radix_Mark : in Character :=  Text_IO.Editing.Default_Radix_Mark;
          package Decimal_Output is
             function Length (Pic      : in Picture;
                              Currency : in String := Default_Currency)
                return Natural;
<a name="12">(12)</a>
             function Valid (Item     : in Num;
                             Pic      : in Picture;
                             Currency : in String := Default_Currency)
                return Boolean;
<a name="13">(13)</a>
             function Image (Item       : in Num;
                             Pic        : in Picture;
                             Currency   : in String    := Default_Currency;
                             Fill       : in Character := Default_Fill;
                             Separator  : in Character := Default_Separator;
                             Radix_Mark : in Character := Default_Radix_Mark)
                return String;
<a name="14">(14)</a>
             procedure Put (File       : in File_Type;
                            Item       : in Num;
                            Pic        : in Picture;
                            Currency   : in String    := Default_Currency;
                            Fill       : in Character := Default_Fill;
                            Separator  : in Character := Default_Separator;
                            Radix_Mark : in Character := Default_Radix_Mark);
<a name="15">(15)</a>
             procedure Put (Item       : in Num;
                            Pic        : in Picture;
                            Currency   : in String    := Default_Currency;
                            Fill       : in Character := Default_Fill;
                            Separator  : in Character := Default_Separator;
                            Radix_Mark : in Character := Default_Radix_Mark);
<a name="16">(16)</a>
             procedure Put (To         : out String;
                            Item       : in Num;
                            Pic        : in Picture;
                            Currency   : in String    := Default_Currency;
                            Fill       : in Character := Default_Fill;
                            Separator  : in Character := Default_Separator;
                            Radix_Mark : in Character := Default_Radix_Mark);
          end Decimal_Output;
       private
          ... <em>-- not specified by the language</em>
       end Ada.Text_IO.Editing;
</pre><dl><dt><a name="17">(17)</a><dd>The exception Constraint_Error is raised if the Image function or any of
the Put procedures is invoked with a null string for Currency.
</dl><pre><a name="18">(18)</a>
       function Valid (Pic_String      : in String;
                       Blank_When_Zero : in Boolean := False) return Boolean;
</pre><dl><dt><a name="19">(19)</a><dd><ul>Valid returns True if Pic_String is a well-formed picture String
<a href="F-03-01.htm">(see F.3.1)</a> the length of whose expansion does not exceed Max_Picture_Length, and if either Blank_When_Zero is False or Pic_String
contains no '*'.
</ul></dl><pre><a name="20">(20)</a>
       function To_Picture (Pic_String      : in String;
                            Blank_When_Zero : in Boolean := False)
          return Picture;
</pre><dl><dt><a name="21">(21)</a><dd><ul>To_Picture returns a result Picture such that the application of
the function Pic_String to this result yields an expanded picture
String equivalent to Pic_String, and such that Blank_When_Zero
applied to the result Picture is the same value as the parameter
Blank_When_Zero.  Picture_Error is raised if not Valid(Pic_String,
Blank_When_Zero).
</ul></dl><pre><a name="22">(22)</a>
       function Pic_String      (Pic : in Picture) return String;

       function Blank_When_Zero (Pic : in Picture) return Boolean;
</pre><dl><dt><a name="23">(23)</a><dd><ul>If Pic is To_Picture(String_Item, Boolean_Item) for some String_Item and Boolean_Item, then:
</ul><dt><a name="24">(24)</a><dd><ul><ul><li>Pic_String(Pic) returns an expanded picture String
equivalent to String_Item and with any lower-case letter
replaced with its corresponding upper-case form, and
</ul></ul><dt><a name="25">(25)</a><dd><ul><ul><li>Blank_When_Zero(Pic) returns Boolean_Item.
</ul></ul><dt><a name="26">(26)</a><dd><ul>If Pic_1 and Pic_2 are objects of type Picture, then "="(Pic_1,
Pic_2) is True when
</ul><dt><a name="27">(27)</a><dd><ul><ul><li>Pic_String(Pic_1) = Pic_String(Pic_2), and
</ul></ul><dt><a name="28">(28)</a><dd><ul><ul><li>Blank_When_Zero(Pic_1) = Blank_When_Zero(Pic_2).
</ul></ul></dl><pre><a name="29">(29)</a>
       function Length (Pic      : in Picture;
                        Currency : in String := Default_Currency)
          return Natural;
</pre><dl><dt><a name="30">(30)</a><dd><ul>Length returns Pic_String(Pic)'Length + Currency_Length_Adjustment - Radix_Adjustment where
</ul><dt><a name="31">(31)</a><dd><ul><ul><li>Currency_Length_Adjustment =
</ul></ul><dt><a name="32">(32)</a><dd><ul><ul><ul><li>Currency'Length - 1 if there is some occurrence of
'$' in Pic_String(Pic), and
</ul></ul></ul><dt><a name="33">(33)</a><dd><ul><ul><ul><li>0 otherwise.
</ul></ul></ul><dt><a name="34">(34)</a><dd><ul><ul><li>Radix_Adjustment =
</ul></ul><dt><a name="35">(35)</a><dd><ul><ul><ul><li>1 if there is an occurrence of 'V' or 'v' in Pic_Str(Pic), and
</ul></ul></ul><dt><a name="36">(36)</a><dd><ul><ul><ul><li>0 otherwise.
</ul></ul></ul></dl><pre><a name="37">(37)</a>
       function Valid (Item     : in Num;
                       Pic      : in Picture;
                       Currency : in String := Default_Currency)
          return Boolean;
</pre><dl><dt><a name="38">(38)</a><dd><ul>Valid returns True if Image(Item, Pic, Currency) does not raise
Layout_Error, and returns False otherwise.
</ul></dl><pre><a name="39">(39)</a>
       function Image (Item       : in Num;
                       Pic        : in Picture;
                       Currency   : in String    := Default_Currency;
                       Fill       : in Character := Default_Fill;
                       Separator  : in Character := Default_Separator;
                       Radix_Mark : in Character := Default_Radix_Mark)
          return String;
</pre><dl><dt><a name="40">(40)</a><dd><ul>Image returns the edited output String as defined <a href="F-03-02.htm">in F.3.2</a> for
Item, Pic_String(Pic), Blank_When_Zero(Pic), Currency, Fill,
Separator, and Radix_Mark.  If these rules identify a layout error,
then Image raises the exception Layout_Error.
</ul></dl><pre><a name="41">(41)</a>
       procedure Put (File       : in File_Type;
                      Item       : in Num;
                      Pic        : in Picture;
                      Currency   : in String    := Default_Currency;
                      Fill       : in Character := Default_Fill;
                      Separator  : in Character := Default_Separator;
                      Radix_Mark : in Character := Default_Radix_Mark);

       procedure Put (Item       : in Num;
                      Pic        : in Picture;
                      Currency   : in String    := Default_Currency;
                      Fill       : in Character := Default_Fill;
                      Separator  : in Character := Default_Separator;
                      Radix_Mark : in Character := Default_Radix_Mark);
</pre><dl><dt><a name="42">(42)</a><dd><ul>Each of these Put procedures outputs Image(Item, Pic, Currency,
Fill, Separator, Radix_Mark) consistent with the conventions for Put
for other real types in case of bounded line length <a href="A-10-06.htm">(see A.10.6</a>,
``Get and Put Procedures'').
</ul></dl><pre><a name="43">(43)</a>
       procedure Put (To         : out String;
                      Item       : in Num;
                      Pic        : in Picture;
                      Currency   : in String    := Default_Currency;
                      Fill       : in Character := Default_Fill;
                      Separator  : in Character := Default_Separator;
                      Radix_Mark : in Character := Default_Radix_Mark);
</pre><dl><dt><a name="44">(44)</a><dd><ul>Put copies Image(Item, Pic, Currency, Fill, Separator, Radix_Mark) to the given string, right justified.  Otherwise unassigned
Character values in To are assigned the space character.  If
To'Length is less than the length of the string resulting from Image,
then Layout_Error is raised.
</ul></dl><h5 align="center">Implementation Requirements</h5>
<dl><dt><a name="45">(45)</a><dd>Max_Picture_Length shall be at least 30.  The implementation shall
support currency strings of length up to at least 10, both for Default_Currency in an instantiation of Decimal_Output, and for Currency in an
invocation of Image or any of the Put procedures.
<p><dt><dd><ul>NOTES</ul>
<dt><a name="46">(46)</a><dd><ul>(4) The rules for edited output are based on COBOL (ANSI X3.23:1985,
endorsed by ISO as ISO 1989-1985), with the following differences:
</ul><dt><a name="47">(47)</a><dd><ul><ul><li>The COBOL provisions for picture string localization and for
'P' format are absent from Ada.
</ul></ul><dt><a name="48">(48)</a><dd><ul><ul><li>The following Ada facilities are not in COBOL:
</ul></ul><dt><a name="49">(49)</a><dd><ul><ul><ul><li>currency symbol placement after the number,
</ul></ul></ul><dt><a name="50">(50)</a><dd><ul><ul><ul><li>localization of edited output string for multicharacter currency string values, including support
for both length-preserving and length-expanding
currency symbols in picture strings
</ul></ul></ul><dt><a name="51">(51)</a><dd><ul><ul><ul><li>localization of the radix mark, digits separator, and
fill character, and
</ul></ul></ul><dt><a name="52">(52)</a><dd><ul><ul><ul><li>parenthesization of negative values.
</ul></ul></ul><pre>        The value of 30 for Max_Picture_Length is the same limit as in COBOL.
</pre></dl><hr>
<h4><a href="F-03-02.htm"><img src="left.gif" alt="Prev"></a> | <a href="F-03.htm"><img src="up.gif" alt="Up"></a> | <a href="F-03-04.htm"><img src="right.gif" alt="Next"></a> | <a href="F-03-02.htm"><img src="back.gif" alt="Back"></a> | <a href="F-03-04.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<p>
<a href="http://lglwww.epfl.ch/Ada/"><img src="la-icon.gif" alt="Ada WWW Home"></a>
 -- Email comments, additions, corrections, gripes, kudos, etc. to:
<address>
<a href="author.htm">Magnus Kempe</a>
 -- <a href="mailto:Magnus.Kempe@di.epfl.ch">Magnus.Kempe@di.epfl.ch</a><br>
<a href="cright.htm">Copyright statement</a><br>
Page last generated: 95-03-12
</address>
</body>
</html>
