<html>
<head>
<title>Ada 95 RM - 3.7.1 Discriminant Constraints</title>
<link rev="made" href="mailto:Magnus.Kempe@di.epfl.ch">
</head>

<body>
<h4><img src="noleft.gif" alt="____"> | <a href="03-07.htm"><img src="up.gif" alt="Up"></a> | <a href="03-07-02.htm"><img src="right.gif" alt="Next"></a> | <a href="03-07.htm"><img src="back.gif" alt="Back"></a> | <a href="03-07-02.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<hr>
<h3><a name="0">3.7.1 Discriminant Constraints</a></h3>
<dl><dt><a name="1">(1)</a><dd>A discriminant_constraint specifies the values of the discriminants for a
given discriminated type.
</dl><h5 align="center"><a name="syntax">Syntax</a></h5>
<pre><a name="2">(2)</a>
       discriminant_constraint ::=
          (discriminant_association {, discriminant_association})
<a name="3">(3)</a>
       discriminant_association ::=
          [discriminant_selector_name {| discriminant_selector_name} =&gt;] expression
</pre><dl><dt><a name="4">(4)</a><dd><ul><li>A discriminant_association is said to be named if it has one or more
discriminant_selector_names; it is otherwise said to be positional.  In a
discriminant_constraint, any positional associations shall precede any
named associations.
</ul></dl><h5 align="center">Name Resolution Rules</h5>
<dl><dt><a name="5">(5)</a><dd>Each selector_name of a named discriminant_association shall resolve to
denote a discriminant of the subtype being constrained; the discriminants so
named are the associated discriminants of the named association.  For a
positional association, the associated discriminant is the one whose
discriminant_specification occurred in the corresponding position in the
known_discriminant_part that defined the discriminants of the subtype being
constrained.
<dt><a name="6">(6)</a><dd>The expected type for the expression in a discriminant_association is
that of the associated discriminant(s).
</dl><h5 align="center">Legality Rules</h5>
<dl><dt><a name="7">(7)</a><dd>A discriminant_constraint is only allowed in a subtype_indication whose
subtype_mark denotes either an unconstrained discriminated subtype, or an
unconstrained access subtype whose designated subtype is an unconstrained
discriminated subtype.
<dt><a name="8">(8)</a><dd>A named discriminant_association with more than one selector_name is
allowed only if the named discriminants are all of the same type.  A
discriminant_constraint shall provide exactly one value for each discriminant
of the subtype being constrained.
<dt><a name="9">(9)</a><dd>The expression associated with an access discriminant shall be of a type
convertible to the anonymous access type.
</dl><h5 align="center">Dynamic Semantics</h5>
<dl><dt><a name="10">(10)</a><dd>A discriminant_constraint is compatible with an unconstrained
discriminated subtype if each discriminant value belongs to the subtype of
the corresponding discriminant.
<dt><a name="11">(11)</a><dd>A composite value satisfies a discriminant constraint if and only if
each discriminant of the composite value has the value imposed by the
discriminant constraint.
<dt><a name="12">(12)</a><dd>For the elaboration of a discriminant_constraint, the expressions in the
discriminant_associations are evaluated in an arbitrary order and converted
to the type of the associated discriminant (which might raise Constraint_Error -- <a href="04-06.htm">see 4.6)</a>; the expression of a named association is evaluated (and
converted) once for each associated discriminant.  The result of each
evaluation and conversion is the value imposed by the constraint for the
associated discriminant.
<p><dt><dd><ul>NOTES</ul>
<dt><a name="13">(13)</a><dd><ul>(54) The rules of the language ensure that a discriminant of an object
always has a value, either from explicit or implicit initialization.
</ul></dl><h5 align="center">Examples</h5>
<dl><dt><a name="14">(14)</a><dd><em>Examples (using types declared above in <a href="03-07.htm">clause 3.7)</a>:
</em>
</dl><pre><a name="15">(15)</a>
       Large   : Buffer(200);  <em>--  constrained, always 200 characters</em>
                               <em>--   (explicit discriminant value)</em>
       Message : Buffer;       <em>--  unconstrained, initially 100 characters</em>
                               <em>--   (default discriminant value)</em>
       Basis   : Square(5);    <em>--  constrained, always 5 by 5</em>
       Illegal : Square;       <em>--  illegal, a Square has to be constrained</em>
</pre><hr>
<h4><img src="noleft.gif" alt="____"> | <a href="03-07.htm"><img src="up.gif" alt="Up"></a> | <a href="03-07-02.htm"><img src="right.gif" alt="Next"></a> | <a href="03-07.htm"><img src="back.gif" alt="Back"></a> | <a href="03-07-02.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<p>
<a href="http://lglwww.epfl.ch/Ada/"><img src="la-icon.gif" alt="Ada WWW Home"></a>
 -- Email comments, additions, corrections, gripes, kudos, etc. to:
<address>
<a href="author.htm">Magnus Kempe</a>
 -- <a href="mailto:Magnus.Kempe@di.epfl.ch">Magnus.Kempe@di.epfl.ch</a><br>
<a href="cright.htm">Copyright statement</a><br>
Page last generated: 95-03-12
</address>
</body>
</html>
