<html>
<head>
<title>Ada 95 RM - 10.1.1 Compilation Units - Library Units</title>
<link rev="made" href="mailto:Magnus.Kempe@di.epfl.ch">
</head>

<body>
<h4><img src="noleft.gif" alt="____"> | <a href="10-01.htm"><img src="up.gif" alt="Up"></a> | <a href="10-01-02.htm"><img src="right.gif" alt="Next"></a> | <a href="10-01.htm"><img src="back.gif" alt="Back"></a> | <a href="10-01-02.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<hr>
<h3><a name="0">10.1.1 Compilation Units - Library Units</a></h3>
<dl><dt><a name="1">(1)</a><dd>A library_item is a compilation unit that is the declaration, body, or
renaming of a library unit.  Each library unit (except Standard) has a parent
unit, which is a library package or generic library package.  A library unit
is a child of its parent unit.  The root library units are the children of
the predefined library package Standard.
</dl><h5 align="center"><a name="syntax">Syntax</a></h5>
<pre><a name="2">(2)</a>
       compilation ::= {compilation_unit}
<a name="3">(3)</a>
       compilation_unit ::=
           context_clause library_item
         | context_clause subunit
<a name="4">(4)</a>
       library_item ::= [private] library_unit_declaration
         | library_unit_body
         | [private] library_unit_renaming_declaration
<a name="5">(5)</a>
       library_unit_declaration ::=
            subprogram_declaration | package_declaration
          | generic_declaration    | generic_instantiation
<a name="6">(6)</a>
       library_unit_renaming_declaration ::=
          package_renaming_declaration
        | generic_renaming_declaration
        | subprogram_renaming_declaration
<a name="7">(7)</a>
       library_unit_body ::= subprogram_body | package_body
<a name="8">(8)</a>
       parent_unit_name ::= name
</pre><dl><dt><a name="9">(9)</a><dd>A library unit is a program unit that is declared by a library_item.
When a program unit is a library unit, the prefix ``library'' is used to
refer to it (or ``generic library'' if generic), as well as to its
declaration and body, as in ``library procedure'', ``library package_body'',
or ``generic library package''.  The term compilation unit is used to refer
to a compilation_unit.  When the meaning is clear from context, the term is
also used to refer to the library_item of a compilation_unit or to the
proper_body of a subunit (that is, the compilation_unit without the context_clause and the separate (parent_unit_name)).
<dt><a name="10">(10)</a><dd>The parent declaration of a library_item (and of the library unit) is
the declaration denoted by the parent_unit_name, if any, of the defining_program_unit_name of the library_item.  If there is no parent_unit_name, the
parent declaration is the declaration of Standard, the library_item is a root
library_item, and the library unit (renaming) is a root library unit
(renaming).  The declaration and body of Standard itself have no parent
declaration.  The parent unit of a library_item or library unit is the
library unit declared by its parent declaration.
<dt><a name="11">(11)</a><dd>The children of a library unit occur immediately within the declarative
region of the declaration of the library unit.  The ancestors of a library
unit are itself, its parent, its parent's parent, and so on.  (Standard is an
ancestor of every library unit.)  The descendant relation is the inverse of
the ancestor relation.
<dt><a name="12">(12)</a><dd>A library_unit_declaration or a library_unit_renaming_declaration is
private if the declaration is immediately preceded by the reserved word
private; it is otherwise public.  A library unit is private or public
according to its declaration.  The public descendants of a library unit are
the library unit itself, and the public descendants of its public children.
Its other descendants are private descendants.
</dl><h5 align="center">Legality Rules</h5>
<dl><dt><a name="13">(13)</a><dd>The parent unit of a library_item shall be a library package or generic
library package.
<dt><a name="14">(14)</a><dd>If a defining_program_unit_name of a given declaration or body has a
parent_unit_name, then the given declaration or body shall be a library_item.
The body of a program unit shall be a library_item if and only if the
declaration of the program unit is a library_item.  In a library_unit_renaming_declaration, the (old) name shall denote a library_item.
<dt><a name="15">(15)</a><dd>A parent_unit_name (which can be used within a defining_program_unit_name of a library_item and in the separate clause of a subunit), and each of
its prefixes, shall not denote a renaming_declaration.  On the other hand, a
name that denotes a library_unit_renaming_declaration is allowed in a with_clause and other places where the name of a library unit is allowed.
<dt><a name="16">(16)</a><dd>If a library package is an instance of a generic package, then every
child of the library package shall either be itself an instance or be a
renaming of a library unit.
<dt><a name="17">(17)</a><dd>A child of a generic library package shall either be itself a generic
unit or be a renaming of some other child of the same generic unit.  The
renaming of a child of a generic package shall occur only within the
declarative region of the generic package.
<dt><a name="18">(18)</a><dd>A child of a parent generic package shall be instantiated or renamed
only within the declarative region of the parent generic.
<dt><a name="19">(19)</a><dd>For each declaration or renaming of a generic unit as a child of some
parent generic package, there is a corresponding declaration nested
immediately within each instance of the parent.  This declaration is visible
only within the scope of a with_clause that mentions the child generic unit.
<dt><a name="20">(20)</a><dd>A library subprogram shall not override a primitive subprogram.
<dt><a name="21">(21)</a><dd>The defining name of a function that is a compilation unit shall not be
an operator_symbol.
</dl><h5 align="center">Static Semantics</h5>
<dl><dt><a name="22">(22)</a><dd>A subprogram_renaming_declaration that is a library_unit_renaming_declaration is a renaming-as-declaration, not a renaming-as-body.
<dt><a name="23">(23)</a><dd>There are two kinds of dependences among compilation units:
<dt><a name="24">(24)</a><dd><ul><li>The semantic dependences (see below) are the ones needed to check
the compile-time rules across compilation unit boundaries; a
compilation unit depends semantically on the other compilation
units needed to determine its legality.  The visibility rules are
based on the semantic dependences.
</ul><dt><a name="25">(25)</a><dd><ul><li>The elaboration dependences <a href="10-02.htm">(see 10.2)</a> determine the order of
elaboration of library_items.
</ul><dt><a name="26">(26)</a><dd>A library_item depends semantically upon its parent declaration.  A
subunit depends semantically upon its parent body.  A library_unit_body
depends semantically upon the corresponding library_unit_declaration, if any.
A compilation unit depends semantically upon each library_item mentioned in a
with_clause of the compilation unit.  In addition, if a given compilation
unit contains an attribute_reference of a type defined in another compilation
unit, then the given compilation unit depends semantically upon the other
compilation unit.  The semantic dependence relationship is transitive.
<p><dt><dd><ul>NOTES</ul>
<dt><a name="27">(27)</a><dd><ul>(1) A simple program may consist of a single compilation unit.  A
compilation need not have any compilation units; for example, its text
can consist of pragmas.
</ul><dt><a name="28">(28)</a><dd><ul>(2) The designator of a library function cannot be an operator_symbol,
but a nonlibrary renaming_declaration is allowed to rename a library
function as an operator.  Within a partition, two library subprograms
are required to have distinct names and hence cannot overload each
other.  However, renaming_declarations are allowed to define overloaded
names for such subprograms, and a locally declared subprogram is allowed
to overload a library subprogram.  The expanded name Standard.L can be
used to denote a root library unit L (unless the declaration of Standard
is hidden) since root library unit declarations occur immediately within
the declarative region of package Standard.
</ul></dl><h5 align="center">Examples</h5>
<dl><dt><a name="29">(29)</a><dd><em>Examples of library units:
</em>
</dl><pre><a name="30">(30)</a>
       package Rational_Numbers.IO is  <em>-- public child of Rational_Numbers, <a href="07-01.htm">see 7.1</a></em>
          procedure Put(R : in  Rational);
          procedure Get(R : out Rational);
       end Rational_Numbers.IO;
<a name="31">(31)</a>
       private procedure Rational_Numbers.Reduce(R : in out Rational);
                                       <em>-- private child of Rational_Numbers</em>
<a name="32">(32)</a>
       with Rational_Numbers.Reduce;   <em>-- refer to a private child</em>
       package body Rational_Numbers is
          ...
       end Rational_Numbers;
<a name="33">(33)</a>
       with Rational_Numbers.IO; use Rational_Numbers;
       with Ada.Text_io;               <em>-- <a href="A-10.htm">see A.10</a></em>
       procedure Main is               <em>-- a root library procedure</em>
          R : Rational;
       begin
          R := 5/3;                    <em>-- construct a rational number, <a href="07-01.htm">see 7.1</a></em>
          Ada.Text_IO.Put("The answer is: ");
          IO.Put(R);
          Ada.Text_IO.New_Line;
       end Main;
<a name="34">(34)</a>
       with Rational_Numbers.IO;
       package Rational_IO renames Rational_Numbers.IO;
                                       <em>-- a library unit renaming declaration</em>
</pre><dl><dt><a name="35">(35)</a><dd>Each of the above library_items can be submitted to the compiler
separately.
</dl><hr>
<h4><img src="noleft.gif" alt="____"> | <a href="10-01.htm"><img src="up.gif" alt="Up"></a> | <a href="10-01-02.htm"><img src="right.gif" alt="Next"></a> | <a href="10-01.htm"><img src="back.gif" alt="Back"></a> | <a href="10-01-02.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<p>
<a href="http://lglwww.epfl.ch/Ada/"><img src="la-icon.gif" alt="Ada WWW Home"></a>
 -- Email comments, additions, corrections, gripes, kudos, etc. to:
<address>
<a href="author.htm">Magnus Kempe</a>
 -- <a href="mailto:Magnus.Kempe@di.epfl.ch">Magnus.Kempe@di.epfl.ch</a><br>
<a href="cright.htm">Copyright statement</a><br>
Page last generated: 95-03-12
</address>
</body>
</html>
