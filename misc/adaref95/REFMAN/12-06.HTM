<html>
<head>
<title>Ada 95 RM - 12.6 Formal Subprograms</title>
<link rev="made" href="mailto:Magnus.Kempe@di.epfl.ch">
</head>

<body>
<h4><a href="12-05.htm"><img src="left.gif" alt="Prev"></a> | <a href="12.htm"><img src="up.gif" alt="Up"></a> | <a href="12-07.htm"><img src="right.gif" alt="Next"></a> | <a href="12-05-04.htm"><img src="back.gif" alt="Back"></a> | <a href="12-07.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<hr>

<h2><a name="0">12.6 Formal Subprograms</a></h2>
<dl><dt><a name="1">(1)</a><dd>Formal subprograms can be used to pass callable entities to a generic
unit.
</dl><h5 align="center"><a name="syntax">Syntax</a></h5>
<pre><a name="2">(2)</a>
       formal_subprogram_declaration ::= with subprogram_specification [is subprogram_default];
<a name="3">(3)</a>
       subprogram_default ::= default_name | &lt;&gt;
<a name="4">(4)</a>
       default_name ::= name
</pre><h5 align="center">Name Resolution Rules</h5>
<dl><dt><a name="5">(5)</a><dd>The expected profile for the default_name, if any, is that of the formal
subprogram.
<dt><a name="6">(6)</a><dd>For a generic formal subprogram, the expected profile for the actual is
that of the formal subprogram.
</dl><h5 align="center">Legality Rules</h5>
<dl><dt><a name="7">(7)</a><dd>The profiles of the formal and any named default shall be
mode-conformant.
<dt><a name="8">(8)</a><dd>The profiles of the formal and actual shall be mode-conformant.
</dl><h5 align="center">Static Semantics</h5>
<dl><dt><a name="9">(9)</a><dd>A formal_subprogram_declaration declares a generic formal subprogram.
The types of the formal parameters and result, if any, of the formal
subprogram are those determined by the subtype_marks given in the formal_subprogram_declaration; however, independent of the particular subtypes that
are denoted by the subtype_marks, the nominal subtypes of the formal
parameters and result, if any, are defined to be nonstatic, and unconstrained
if of an array type (no applicable index constraint is provided in a call on
a formal subprogram).  In an instance, a formal_subprogram_declaration
declares a view of the actual.  The profile of this view takes its subtypes
and calling convention from the original profile of the actual entity, while
taking the formal parameter names and default_expressions from the profile
given in the formal_subprogram_declaration.  The view is a function or
procedure, never an entry.
<dt><a name="10">(10)</a><dd>If a generic unit has a subprogram_default specified by a box, and the
corresponding actual parameter is omitted, then it is equivalent to an
explicit actual parameter that is a usage name identical to the defining name
of the formal.
<p><dt><dd><ul>NOTES</ul>
<dt><a name="11">(11)</a><dd><ul>(13) The matching rules for formal subprograms state requirements that
are similar to those applying to subprogram_renaming_declarations <a href="08-05-04.htm">(see 8.5.4)</a>.  In particular, the name of a parameter of the formal subprogram
need not be the same as that of the corresponding parameter of the
actual subprogram; similarly, for these parameters, default_expressions
need not correspond.
</ul><dt><a name="12">(12)</a><dd><ul>(14) The constraints that apply to a parameter of a formal subprogram
are those of the corresponding formal parameter of the matching actual
subprogram (not those implied by the corresponding subtype_mark in the
_specification of the formal subprogram).  A similar remark applies to
the result of a function.  Therefore, to avoid confusion, it is
recommended that the name of a first subtype be used in any declaration
of a formal subprogram.
</ul><dt><a name="13">(13)</a><dd><ul>(15) The subtype specified for a formal parameter of a generic formal
subprogram can be any visible subtype, including a generic formal
subtype of the same generic_formal_part.
</ul><dt><a name="14">(14)</a><dd><ul>(16) A formal subprogram is matched by an attribute of a type if the
attribute is a function with a matching specification.  An enumeration
literal of a given type matches a parameterless formal function whose
result type is the given type.
</ul><dt><a name="15">(15)</a><dd><ul>(17) A default_name denotes an entity that is visible or directly
visible at the place of the generic_declaration; a box used as a default
is equivalent to a name that denotes an entity that is directly visible
at the place of the _instantiation.
</ul><dt><a name="16">(16)</a><dd><ul>(18) The actual subprogram cannot be abstract <a href="03-09-03.htm">(see 3.9.3)</a>.
</ul></dl><h5 align="center">Examples</h5>
<dl><dt><a name="17">(17)</a><dd><em>Examples of generic formal subprograms:
</em>
</dl><pre><a name="18">(18)</a>
       with function "+"(X, Y : Item) return Item is &lt;&gt;;
       with function Image(X : Enum) return String is Enum'Image;
       with procedure Update is Default_Update;
<a name="19">(19)</a>
       <em>--  given the generic procedure declaration</em>
<a name="20">(20)</a>
       generic
          with procedure Action (X : in Item);
       procedure Iterate(Seq : in Item_Sequence);
<a name="21">(21)</a>
       <em>--  and the procedure</em>
<a name="22">(22)</a>
       procedure Put_Item(X : in Item);
<a name="23">(23)</a>
       <em>--  the following instantiation is possible</em>
<a name="24">(24)</a>
       procedure Put_List is new Iterate(Action =&gt; Put_Item);
</pre><p>
<hr>
<h4><a href="12-05.htm"><img src="left.gif" alt="Prev"></a> | <a href="12.htm"><img src="up.gif" alt="Up"></a> | <a href="12-07.htm"><img src="right.gif" alt="Next"></a> | <a href="12-05-04.htm"><img src="back.gif" alt="Back"></a> | <a href="12-07.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<p>
<a href="http://lglwww.epfl.ch/Ada/"><img src="la-icon.gif" alt="Ada WWW Home"></a>
 -- Email comments, additions, corrections, gripes, kudos, etc. to:
<address>
<a href="author.htm">Magnus Kempe</a>
 -- <a href="mailto:Magnus.Kempe@di.epfl.ch">Magnus.Kempe@di.epfl.ch</a><br>
<a href="cright.htm">Copyright statement</a><br>
Page last generated: 95-03-12
</address>
</body>
</html>
