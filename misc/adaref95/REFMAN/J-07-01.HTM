<html>
<head>
<title>Ada 95 RM - J.7.1 Interrupt Entries</title>
<link rev="made" href="mailto:Magnus.Kempe@di.epfl.ch">
</head>

<body>
<h4><img src="noleft.gif" alt="____"> | <a href="J-07.htm"><img src="up.gif" alt="Up"></a> | <img src="noright.gif" alt="____"> | <a href="J-07.htm"><img src="back.gif" alt="Back"></a> | <a href="J-08.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<hr>
<h3><a name="0">J.7.1 Interrupt Entries</a></h3>
<dl><dt><a name="1">(1)</a><dd>Implementations are permitted to allow the attachment of task entries to
interrupts via the address clause.  Such an entry is referred to as an
interrupt entry.
<dt><a name="2">(2)</a><dd>The address of the task entry corresponds to a hardware interrupt in an
implementation-defined manner.  (See Ada.Interrupts.Reference <a href="C-03-02.htm">in C.3.2</a>.)
</dl><h5 align="center">Static Semantics</h5>
<dl><dt><a name="3">(3)</a><dd>The following attribute is defined:
<dt><a name="4">(4)</a><dd>For any task entry X:
<dt><a name="5">(5)</a><dd>X'Address
<ul>For a task entry whose address is specified (an interrupt
entry), the value refers to the corresponding hardware
interrupt.  For such an entry, as for any other task entry,
the meaning of this value is implementation defined.  The
value of this attribute is of the type of the subtype
System.Address.
</ul><dt><a name="6">(6)</a><dd><ul>Address may be specified for single entries via an
attribute_definition_clause.
</ul></dl><h5 align="center">Dynamic Semantics</h5>
<dl><dt><a name="7">(7)</a><dd>As part of the initialization of a task object, the address clause for an
interrupt entry is elaborated, which evaluates the expression of the address
clause.  A check is made that the address specified is associated with some
interrupt to which a task entry may be attached.  If this check fails,
Program_Error is raised.  Otherwise, the interrupt entry is attached to the
interrupt associated with the specified address.
<dt><a name="8">(8)</a><dd>Upon finalization of the task object, the interrupt entry, if any, is
detached from the corresponding interrupt and the default treatment is
restored.
<dt><a name="9">(9)</a><dd>While an interrupt entry is attached to an interrupt, the interrupt is
reserved <a href="C-03.htm">(see C.3)</a>.
<dt><a name="10">(10)</a><dd>An interrupt delivered to a task entry acts as a call to the entry
issued by a hardware task whose priority is in the System.Interrupt_Priority
range.  It is implementation defined whether the call is performed as an
ordinary entry call, a timed entry call, or a conditional entry call; which
kind of call is performed can depend on the specific interrupt.
</dl><h5 align="center">Bounded (Run-Time) Errors</h5>
<dl><dt><a name="11">(11)</a><dd>It is a bounded error to evaluate E'Caller <a href="C-07-01.htm">(see C.7.1)</a> in an accept_statement for an interrupt entry.  The possible effects are the same as for
calling Current_Task from an entry body.
</dl><h5 align="center">Documentation Requirements</h5>
<dl><dt><a name="12">(12)</a><dd>The implementation shall document to which interrupts a task entry may
be attached.
<dt><a name="13">(13)</a><dd>The implementation shall document whether the invocation of an interrupt
entry has the effect of an ordinary entry call, conditional call, or a timed
call, and whether the effect varies in the presence of pending interrupts.
</dl><h5 align="center">Implementation Permissions</h5>
<dl><dt><a name="14">(14)</a><dd>The support for this subclause is optional.
<dt><a name="15">(15)</a><dd>Interrupts to which the implementation allows a task entry to be
attached may be designated as reserved for the entire duration of program
execution; that is, not just when they have an interrupt entry attached to
them.
<dt><a name="16">(16)</a><dd>Interrupt entry calls may be implemented by having the hardware execute
directly the appropriate accept body.  Alternatively, the implementation is
allowed to provide an internal interrupt handler to simulate the effect of a
normal task calling the entry.
<dt><a name="17">(17)</a><dd>The implementation is allowed to impose restrictions on the
specifications and bodies of tasks that have interrupt entries.
<dt><a name="18">(18)</a><dd>It is implementation defined whether direct calls (from the program) to
interrupt entries are allowed.
<dt><a name="19">(19)</a><dd>If a select_statement contains both a terminate_alternative and an
accept_alternative for an interrupt entry, then an implementation is allowed
to impose further requirements for the selection of the terminate_alternative
in addition to those given <a href="09-03.htm">in 9.3</a>.
<p><dt><dd><ul>NOTES</ul>
<dt><a name="20">(20)</a><dd><ul>(1) Queued interrupts correspond to ordinary entry calls.  Interrupts
that are lost if not immediately processed correspond to conditional
entry calls.  It is a consequence of the priority rules that an accept
body executed in response to an interrupt can be executed with the
active priority at which the hardware generates the interrupt, taking
precedence over lower priority tasks, without a scheduling action.
</ul><dt><a name="21">(21)</a><dd><ul>(2) Control information that is supplied upon an interrupt can be passed
to an associated interrupt entry as one or more parameters of mode in.
</ul></dl><h5 align="center">Examples</h5>
<dl><dt><a name="22">(22)</a><dd><em>Example of an interrupt entry:
</em>
</dl><pre><a name="23">(23)</a>
       task Interrupt_Handler is
         entry Done;
         for Done'Address use Ada.Interrupts.Reference(Ada.Interrupts.Names.Device_Done);
       end Interrupt_Handler;
</pre><hr>
<h4><img src="noleft.gif" alt="____"> | <a href="J-07.htm"><img src="up.gif" alt="Up"></a> | <img src="noright.gif" alt="____"> | <a href="J-07.htm"><img src="back.gif" alt="Back"></a> | <a href="J-08.htm"><img src="forward.gif" alt="Forward"></a><br>   <a href="toc.htm">TOC --</a> / <a href="toc-l1.htm">--.--</a> / <a href="toc-l2.htm">--.--.--</a> | <a href="index.htm">Index</a> | <a href="search.htm">Search</a> | <a href="syntax.htm">Syntax</a> | <a href="help.htm">Help</a></h4>

<p>
<a href="http://lglwww.epfl.ch/Ada/"><img src="la-icon.gif" alt="Ada WWW Home"></a>
 -- Email comments, additions, corrections, gripes, kudos, etc. to:
<address>
<a href="author.htm">Magnus Kempe</a>
 -- <a href="mailto:Magnus.Kempe@di.epfl.ch">Magnus.Kempe@di.epfl.ch</a><br>
<a href="cright.htm">Copyright statement</a><br>
Page last generated: 95-03-12
</address>
</body>
</html>
