Understanding the conversation is the key to building GUIs with AWNP. Here is a walk through the creation and use of a simple example.

  Open the file AWNPipe:myGUI/xc. myGUI can be any name you want.The /xc must be used as it tells AWNPipe this file is for GUi creation. From now on I will refer to this file as the 'pipe'

Write a Window definition line to the pipe.
'title "My First gui" defaultgadgets'
The line read from the pipe should be
'ok window'
Anything else is an error response.

Write a Gadget definition line to the pipe. 
'button gadgettext "testbutton"
The line read from the pipe should be
'ok 1'
The Gadget ID of the button is 1. If the response line does not start with 'ok' then an error has occurred.

Write a Gadget definition line to the pipe. 
'checkbox gadgettext "tryme"
The line read from the pipe should be
'ok 2'
The Gadget ID of the checkbox is 2. If the response line does not start with 'ok' then an error has occurred.


Write open command line to the pipe.
'open'
The line read from the pipe should be
'ok window'
Anything else is an error response.

Now you read an event from the pipe. It will come when the user selects a gadget. 

If the checkbox is selected you get the line
'gadget 2 1'
the first word 'gadget tells you the event was from a gadget being hit. 2 is the gadgets GID, the 1 at the end tells you the checkbox is now selected.

If the checkbox is selected a second time you get the line
'gadget 2 1'
the first word 'gadget tells you the event was from a gadget being hit. 2 is the gadgets GID, the 0 at the end tells you the checkbox is now unselected.

If the button is selected you get the line
'gadget 1 0'
the first word 'gadget tells you the event was from a gadget being nit. 1 is the gadgets GID, the 0 at the end tells you the button is not highlighted. In this example you can ignore the 0 (button state).

when the GUI window is closed you get the line
'close 0'
the first word 'close' tells you the event was from the window being closed. 0 (close source) tells you it closed when the close gadget was hit. If the user entered <CTRL\>' the close source would be -1. After the close event any further attempts to read the pipe will return EndOfFile.

You keep reading events until the end of file is received. You could also close the pipe after the close event is read. 


This is a second conversation in which the GUI is modified after it is opened. 

  Open the file AWNPipe:myGUI/xc. 
Write a Window definition line to the pipe.
'title "My First gui" defaultgadgets modify'
The modify keyword tells the pipe you want to be able to modify this GUI later.
The line read from the pipe should be
'ok window'

Write a Gadget definition line to the pipe. 
'button gadgettext "testbutton"
The line read from the pipe should be
'ok 1'

Write a Gadget definition line to the pipe. 
'checkbox gadgettext "tryme"
The line read from the pipe should be
'ok 2'

Write open command line to the pipe.
'open'
The line read from the pipe should be
'ok window'

After the window is opened you get your first chance to modify it. We want to disable the button so we send the following line.
'ID 1 disable 1 refresh'
The button is specified with 'ID 1' and 'disable 1' disables it. The refresh at the end tells the pipe to refresh the button so the changes show.
The line read from the pipe should be
'ok'
If the response does not start with 'ok' an error occurred.

We also want the check mark to show as selected so we write the line
'ID 2 selected 1'
The button is specified with 'ID 1' and 'selected 1' turns causes it to be checked (the checkmark showing in the box). The refresh at the end tells the pipe to refresh the button so the changes show.
The line read from the pipe should be
'ok'

WE have finished modifying the GUI for now so we send a line to tell the pipe we are finished sending modify instruction and want to read an event from the pipe.
'continue'
The line read from the pipe should be
'ok'

Now you read an events from the pipe.  

If the checkbox is selected you get the line
'gadget 2 0'
The user selected the checkbox gadget, it is now unchecked. We want enable the button gadget. AFTER SENDING AN EVENT THE PIPE STARTS READING MODIFY INSTRUCTIONS AGAIN. We send the following modify line to the pipe.
'ID 1 disable 0 refresh'
The button is specified with 'ID 1' and 'disable 0' enables it. The refresh at the end tells the pipe to refresh the button so the changes show.
The line read from the pipe should be
'ok'
WE have finished modifying the GUI for now so we send a line to tell the pipe we are finished sending modify instruction and want to read another event.
'continue'
The line read from the pipe should be
'ok'

If the checkbox is selected a second time you get the line
'gadget 2 1'
The 1 at the end tells you the checkbox is now selected. We want to disable the button gadget so we send the line
'ID 1 disable 1 refresh'
The line read from the pipe should be
'ok'
WE have finished modifying the GUI for now so we send a line to tell the pipe we are finished sending modify instruction and want to read another event.
'continue'
The line read from the pipe should be
'ok'

If the button is selected you get the line
'gadget 1 0'
WE do not want to modify anything at this time but we still need to send the continue line so the pipe will stop looking for modify lines and send us another event.
'continue'
The line read from the pipe should be
'ok'

when the GUI window is closed you get the line
'close 0'
The window is closed but we can still send modify commands. For example we could read the final state of the gadgets. In this case we will do nothing but send the continue line.
'continue'
The line read from the pipe should be
'ok'
Any further reads from the pipe return EOF.

You keep reading an event then sending modify commands until the end of file is received. You could also close the pipe after the close event is read. 

