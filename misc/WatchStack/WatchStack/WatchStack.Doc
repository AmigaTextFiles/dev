
     v2.01                   WatchStack Manual                        1




















                                 WatchStack
                          A Postcard-Ware Utility
                          written by Brian Ipsen,
                  © copyright 1993 by GizmoSoft Productions,
                            All rights reserved.
































     v2.01                 GizmoSoft Productions                      1

     v2.01                   WatchStack Manual                        2


     1. Disclaimer 
     ------------- 

      No guarantee  of  any kind is given that the program described in
     this  document  is  100%  reliable. You are using this material on
     your own risk.   
      The author  does  not  take any responsibility for the results of
     the  use  or  misuse  of this software.  The entire risk as to the
     results  and  performance of this software is assumed by the user.
     The  author  is  not  responsible for any damage including loss of
     any   data   or   information   which  may  be  lost  or  rendered
     inaccurate.   
      WatchStack is  a  Postcard-Ware  program  (concept  introduced by
     Klaus  Seistrup,  DK).  If  you  like  this  program  and  use  it
     regulary,  you  are  obliged to send a postcard to the author. The
     address is at the bottom of this text-file.  







































     v2.01                 GizmoSoft Productions                      2

     v2.01                   WatchStack Manual                        3


     2. Introduction 
     --------------- 

      This program  was  written, because StackWatch by James R. Locker
     had some 'minor' bugs, which I didn't like.  

     1: It (sort of) expected that the task to be watched already 
        was running.  
     2: When the task finished, it was impossible to see how much 
        stack the specified program/task used, because the window 
        was overwritten.  

       What WatchStack  does  is  really  quite  simple. It watches the
     stack  of  a  task  or process that you select. It will be updated
     every  time  the  vblank-interrupt  is  activated. The text in the
     window  will  only  be  updated for every 3rd interrupt, but still
     fast enough to catch the needed values.  

      If you  set  your stack up to a huge number, you will probably be
     safe,  but  you  are also wasting a lot of memory. What is needed,
     is  a good way to tell, dynamically, how any program is doing. You
     may then tailor your stack allocations to be more efficient.  

     WatchStack helps you with this by watching the stack-usage.  































     v2.01                 GizmoSoft Productions                      3

     v2.01                   WatchStack Manual                        4


     3. Using WatchStack 
     ------------------- 

      WatchStack requires  at  leat AmigaDOS Release 2.0 to run. If you
     don't   have  the  2.0-Kickstart,  forget  all  about  using  this
     program.  
      WatchStack starts  from  CLI  only.  It requires one command line
     argument,  which  is  the  name  of  the  task  or  process  to be
     monitored.  This  name must be entered EXACTLY as it is maintained
     in  the  system  task lists.  WatchStack is not case sensitive, so
     if  you  use  an upper case letter while the system knows the task
     by a lower case letter, it will still work.  

     The syntax is as follows: 

     1> Run WatchStack MyTaskName  <RETURN> 

     For instance,  

     1> Run WatchStack Scribble! 

      will monitor Scribble!.  

     WatchStack   will   find   Workbench   or   CLI  applications.  An
     application  started from Workbench will have the exact name shown
     on  the  icon.   An application started from CLI may be known by a
     number  of  different  names,  depending  upon how it hooks itself
     into  the  system.   For  instance,  if  you  start the Calculator
     utility  that  is  found  in the Utilities drawer of the Workbench
     disk   by   clicking    on   its  icon,  it  will  have  the  name
     "Calculator" and typing: 

     1> Run WatchStack Calculator 

      will now find the task/process in the task-list.  

      To exit   the   program,  simply  close  the  WatchStack  window.
     WatchStack  will  then  write  3  lines in the CLI, it was started
     from.  These  3 lines shows the taskname, allocated stack and max.
     usage. Usefull, if you need them in a text-file.  















     v2.01                 GizmoSoft Productions                      4

     v2.01                   WatchStack Manual                        5


     4. The WatchStack Window 
     ------------------------ 

      The WatchStack-window  has  four  lines. The first line tells you
     what  process  (or  task) WatchStack is monitoring. This is useful
     if  you are running multiple copies of WatchStack. The second line
     tells  you  what  the  stack  allocation  for that process is. The
     third  line tells you what the largest amount of stack used was at
     any  time  since WatchStack was invoked. The fourth line tells you
     what the stack usage is right now.  


     5. WatchStack limitations 
     ------------------------- 

      WatchStack takes  "snapshots" of your process - it is not looking
     continuously.  Therefore,  it  won't necessarily spot a quick peak
     in stack usage.  

      WatchStack hooks  itself  into  the  system  at  priority 10, and
     wants  to run at frequent intervals.  One of the  first  things it
     does  when  running  is  disable  multitasking  so it  can  safely
     wander   through   the  system  Task  lists.   As  a  consequence,
     under    certain    circumstances,    or  if  multiple  copies  of
     WatchStack are running, it can noticeably slow system response.  

      If multiple  tasks  of  the same name are running on your system,
     the  first  task found in the task-list will be used. I don't know
     yet  how  to  handle  this situation, but it might be handled in a
     future revision of the program.  

























     v2.01                 GizmoSoft Productions                      5

     v2.01                   WatchStack Manual                        6


     6. Acknowledgements and Thank You's  
     -----------------------------------  

      The following  names  are either trademarks or the efforts of the
     person and/or company listed:  
      - Amiga, AmigaDOS, CLI, WorkBench and Kickstart by 
        Commodore-Amiga, Inc.  
      - StackWatch by James R. Locker 
      - Postcard-Ware by Klaus Seistrup 

     Thank-you's:  
     ------------  

      Thanks goes  to  these  two  persons,  who  helped  me build this
     program.   I  don't  think  I  could  have  made  it without their
     assistance.  

        2:230/119, Klaus Seistrup, for the Process-find sourcecode 
        2:230/413, Jesper Kehlet, for help with finding the stack 
                   information.  

      And greetings to these beta-testers of this program: 

        2:230/119, Klaus Seistrup 
        2:230/413, Jesper Kehlet 
        2:231/84,  Per Hansen 





























     v2.01                 GizmoSoft Productions                      6

     v2.01                   WatchStack Manual                        7


     7. Author's notes on distribution  
     ---------------------------------  

      WatchStack may  only  be  re-distributed  in  it's original form.
     This program may be included in PD-series and uploaded on BBS'.  


     8. Words from the author  
     ------------------------ 

      The author  (Brian  Ipsen) may be reached in any of the following
     ways:  

     Postal service:  

      GizmoSoft Productions  
      c/o B. Ipsen  
      Lyngens Kvarter 117, st.tv.   
      DK-7400 Herning  
      Denmark  

     BBS:  
      For a  while  at  least,  I will be picking up mail on MicroAmiga
     BBS  in  Randers/DK,  (2:230/813@fidonet  & 2:230/814@fidonet), an
     official  StarNet/MEBBSNet  Support  Board  in  Europe.  (I'm also
     working as CoSysop there).   
      If you   haven't   logged   in there yet, you should. The numbers
     are +45 86437939 and +45 86401535.  



























     v2.01                 GizmoSoft Productions                      7




                             Table of Contents


     1. Disclaimer...............................................    2

     2. Introduction.............................................    3

     3. Using WatchStack.........................................    4

     4. The WatchStack Window....................................    5

     5. WatchStack limitations...................................    5

     6. Acknowledgements and Thank You's ........................    6

     7. Author's notes on distribution ..........................    7

     8. Words from the author ...................................    7







































