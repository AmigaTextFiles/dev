
                ·C·O·D·E·X· ·D·E·S·I·G·N· ·S·O·F·T·W·A·R·E·
                                 presents:

                              PatchTest V1.00


                               INTRODUCTION

 PatchTest is a little program that is been designed to work along with the
Installer from AT.
 It  is  able to check whether a patch manager like SaferPatches is running
on the current system.
 Therefore an installation script is able to decide whether a patch manager
should be installed on the target system or not.


                               REQUIREMENTS

 None.


                                REALIZATION

 PatchTest will do the following: It will SetFunction() a function twice
and will try to remove these "patches" in reverse order, afterwards. If
that fails, no patch manager is active.
 See source for more information.


                               HOW TO USE IT

                              General CLI-Use

 PatchTest expects the following parameters:

 LIBRARY/A  : Here you specify the library which will be patched for a test.
 OFFSET/N/A : This is the function offset where PatchTest will install its
              test patch.
 QUIET/S    : No output (for the final use in the Installer-script).

 Along with PatchTest, you find the "patchtest.library" in the archive.
This  library has only one function (offset -30) which does nothing.  Since
it  could  be  dangerous to patch _any_ library at _any_ offset, please use
this library for the test:

 "Patchtest LIB=PatchTest.library OFF=-30"

 Note  that  since  OS2  OpenLibrary()  is  able  to open a library even by
relative path-names:

 Let's  say,  PatchTest  &  patchtest.library  is  placed in a subdirectory
"adds" in your archive, you can even use

 "adds/PatchTest LIB=adds/patchtest.library OFF=-30".

=> You don't have to copy "PatchTest.library" to LIBS: or stuff !


                           Usage with Installer

 PatchTest will return errorcode 0 if a patch manager is been detected or 5
if none had been found (or 10/20 if a heavy error like "Can't open library"
occured).
 For Kick2.04+, the Installer allows to use it this way:

(if (= 5 (run "PatchTest PatchTest.library -30 QUIET"))
    (
    (if (askbool (prompt "No patch-manager found !\n"
                         "Do you want one ?")
                 (help   @askbool-help)
                 (default 1)
        )
        (  (copyfiles .... @{fg shine}copy patch manager here@{fg text}
        )
    )
)


                                  WARNING

 Since PatchTest patches a library it might be dangerous to use it.  Please
be careful and do not use it if you do not know enough about the AmigaOS.


                                DISCLAIMER

 The  author  cannot be held liable for the suitability or accuracy of this
manual  and/or  the  program(s)  it  describes.   Any  damage  directly  or
indirectly caused by the use or misuse of this manual and/or the program it
describes is the sole responsibility of the user her/him self.


                                  AUTHOR

 TestPatch  V1.00 and TestPatch.library had been written by Hans Bühler and
are Freeware (=> do what you want ;^).
 TestPatch  is  part of the aminet:dev/misc/Palis.lha archive where you may
find the source of it, too.

 Hans Bühler: codex@stern.mathematik.hu-berlin.de
              buehlhan@kadewe.artcom.de
              http://kadewe.artcom.de/~codex

