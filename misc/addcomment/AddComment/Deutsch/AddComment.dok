*********************************************************
*               deutsche Dokumentation zu               *
*-------------------------------------------------------*
*                AddComment Version 1.0D                *
*-------------------------------------------------------*
*         von Harald Sodemann 1.September 1996          *
*********************************************************

Inhalt dieser Dokumentation


     Kurzbeschreibung

     Systemvorraussetzungen

     Installation

     Bedienung

     Integrationsvorschläge

     Versionsübersicht

     zukünftige Erweiterungen

     Copyrightvermerke

                              Copyright Harald Sodemann 1.September 1996

Kurzbeschreibung

AddComment ist ein kleines Commodity, daß es auf einfache Weise ermöglicht,
Kommentarboxen in den in einem Editor geladenen Quellcode einzufügen.

Es ist dazu gedacht, in eine Entwicklungsumgebung integriert zu
werden, deshalb ist es als Commodity ausgelegt und besitzt eine
ARexx-Schnittstelle.

Es bietet drei Formulare, für Programmköpfe, Funktionsköpfe und allgemeine
Hinweistexte.Dabei können Standarttexte wie Autor, Version etc. genauso
wie längere Texte eingegeben werden, die dann rechtsbündig, linksbündig oder
zentriert werden können.

Die Kommunikation zwischen AddComment und dem jeweiligen Editor erfolgt
dabei mit ARexx, d.h. wenn AddComment einen Editor ansteuern soll, muß
dieser über einen ARexx-Host verfügen.

Siehe auch Integrationsempfehlungen!

Systemvorraussetzungen

AddComment benötigt außer OS2.0 nur eine passende Entwicklungsumgebung,
d.h. mit einem arexxfähigen Editor, am besten mit konfigurierbaren Menüs.
Außerdem muß ARexx installiert sein, ebenso wird die RexxSysLib benötigt.
Getestet wurde es zwar nur auf einem A500 mit 1MB ChipRAM und 4MB FastRAM,
aber es sollte eigentlich auf allen Amigas funktionieren :-).

Installation

AddComment einfach in eine Schublade ziehen, in der es Platz hat.
Es empfiehlt sich allerdings ganz besonders der Ordner WBStartup, wenn man
gleich loskommentieren will.
Zudem muß eine Konfigurationsdatei geschrieben werden.

Kompatibilität

AddComment wurde mit verschiedenen Editoren ausprobiert, und zwar
   Edward 1.0, OEd, TurboText, Ed.
Lediglich Ed stürzte manchmal nach dem Empfang einer Box aus bisher
ungeklärter Ursache ab, aber Hand aufs Herz: wer verwendet schon Ed
zum Programmieren?!:-)

Bedienung des Programms

Die Bedienoberfläche

Die Steuerungsgadgets

   Formular:   Blättert durch die drei Formularblätter.
   Neu:        Löscht alle Stringgadgets und Listen.
   Einfügen:   Sendet die gewählte Kommentarbox an den Editor.
   Einf.& Zu:  Sendet die Kommentarbox und schließt danach das Fenster.
   Abbruch:    Schließt das Fenster.

Das Formular Programm

   Programmname:  Titel der Kommentarbox
   Autor:         Autor des Programms
   Version:       Version des Programms
   Sprache:       Verwendete Sprache
   Beschreibung:  Liste für Erkärungen etc.
   Hinz.:         Neue Zeile zur Liste hinzufügen
   Lösch.:        Markierte Zeile löschen
   Cyclegadget:   Ausrichtung der gewählten Zeile einstellen,
                  L für linksbündig, Z für zentriert, R für rechtsbündig.

Das Formular Funktion

   Funktionsname: Name der Funktion
   Liste:         Umschalten zwischen Liste für Argumente und Beschreibungen
   Hinz.:         wie oben
   Lösch.:        wie oben
   Cyclegadget:   wie oben

Das Formular Beschreibung

   Hinz.:         wie oben
   Lösch.:        wie oben
   Hoch:          Markierte Zeile vor die vorhergehende Zeile bringen
   Runter:        Markierte Zeile nach die nachfolgende Zeile bringen
   Cyclegadget:   wie oben

Tastatursteuerung

Nahezu alle Gadgets sind per Tastendruck erreichbar, erkennbar an dem jeweils
unterstrichenen Buchstaben.
Die Cyclegadgets zur Ausrichtung der Listenzeilen sind über einen Druck der
Leertaste bedienbar.
Im Formular zur Programmbeschreibung kann man über TAB durch die Textgadgets
springen.

Die Textgadgets akzeptieren nur Eingaben bis zur maximalen Länge, die über
das ToolType BOXWIDTH eingestellt wurde, das verhindert, daß Text abge-
schnitten wird.

Die Menüs

Das Menü Projekt

   Über...     Zeigt einen kleinen Hinweistext und den aktuellen Hotkey an
   Verstecken  Schließt das Fenster von AddComment
   Beenden     Entfernt AddComment aus dem Speicher

Das Menü Sprache

   Beinhaltet bis zu 10 Sprachen, abhängig von der Konfigdatei, von
   denen eine ausgewählt werden kann.
   Die neuen Daten erscheinen dann in den Gadgets, z.B. beim Gadget
   Sprache im Formular zur Programmbeschreibung.

Das Menü Editor

   Beinhaltet bis zu 10 Editoren, abhängig von der Konfigdatei.
   Nach der Auswahl eines Editors wird das Fenster geschlossen und mit den
   neuen Daten geöffnet, besonders auch auf einem eventuell anderen Public-
   Screen. Kann der PubScreen nicht gefunden werden, öffnet das Fenster
   auf dem DefaultPublicScreen.

Die ToolTypes

Das Programm versteht folgende ToolTypes

   CX_PRIORITY:   Stellt die Priorität des Commodities im Inputstream ein,
                  voreingestellt ist 0.
   CX_POPUP:      YES wenn das Fenster beim Starten gleich geöffnet werden
                  soll, NO wenn nicht, voreingestellt ist YES.
   CX_POPKEY:     gültiger String für den Hotkey, voreingestellt ist
                  ralt rshift a.
   CONFIGFILE:    Der gültige DOS-Name mit Pfad zur Konfigurationsdatei,
                  voreingestellt ist S:AddComment.config.
   AUTHOR:        Der Name des Programmautors für das erste Formular, keine
                  Voreinstellung.
   BOXWIDTH:      Die Breite der Kommentarbox in Zeichen inklusive evtl.
                  Kommentarzeichen, voreingestellt ist 60, empfehlenswert
                  sind Breiten zwischen 45 und 70.
   FORM:          Das beim Öffnen des Fensters angezeigte Formular kann
                  hier eingestellt werden, Werte von 0,1,2 sind zulässig,
                  voreingestellt ist 0.
   EDITOR:        Der im Menü Editor gewählte Editor kann hier vorgewählt
                  werden, die Werte können von 0 bis zur in der Konfigdatei
                  definierten Anzahl von Editoren-1 gehen, voreingestellt
                  ist 0.
   LANGUAGE:      Hier kann die Sprache vorgewählt werden, (wie bei den
                  Editoren), voreingestellt ist 0.
   LEFTEDGE:      Die linke Ecke des Fensters beim Öffnen in Pixels
   TOPEDGE:       Die obere Ecke des Fensters beim Öffnen in Pixels

Die ARexx-Befehle

Das Programm kann in den wichtigsten Bereichen über ARexx gesteuert
werden, der Hostname ist "ADDCOMMENT", die Befehle sind:

  Befehl, Abkürzung    Funktion

   popup, pu            Öffnet das Fenster von AddComment oder bringt es in
                        den Vordergrund.
   popdown, pd          Schließt das Fenster von AddComment
   
   insert, in           Sendet die Daten des gewählten Formulars an den
                        Editor, funktioniert auch bei geschlossenem Fenster
   closeinsert, ci      Sendet die Daten des gewählten Formulars and den
                        Editor und schließt danach das Fenster.
   programform, pf      Wählt das Programmformular aus, auch bei
                        geschlossenem Fenster
   functionform, ff     Wählt das Funktionsformular aus
   
   descriptionform, df  Wählt das Beschreibungsformular aus

   die                  Beendet das Programm AddComment

   Es ist kein Problem für AddComment, auch bei geschlossenem Fenster das
   Formular zu wechseln oder Boxen zu erzeugen und zu senden.

Die Konfigurationsdatei

Um AddComment auf seine eigenen Editoren und Programmiersprachen einzu-
stellen, muß man ein Konfigurationsfile erstellen, das einen bestimmten
Aufbau hat und zu den jeweiligen Editoren/Sprachen bestimmte Daten liefert.

Die Daten zum Editor

Zu jedem Editor, der im Menü Editor aufgeführt werden soll, muß folgender
Eintrag ins Konfigfile:

<Editor>          Name des Editors im Menü, z.B. Eddie
<PublicScreen>    Name des PublicScreens des Editors, wenn keiner
                  vorhanden ist empfiehlt sich der Eintrag "Workbench"
<ARexxPort>       Name des ARexx-Hosts des Editors
<Return>          ARexxbefehl des Editors für "return"
<Einfügen>        Befehl zum Zeichen einfügen
<Zeilenanfang>    Zeilenanfang anspringen
<Zeilenende>      Zeilenende anspringen
<Textanfang>      Textanfang anspringen

Die Befehle werden folgendermaßen verwendet:
Beim Einfügen eines Programmkopfes wird zunächst die Folge
...<Textanfang><Return><Textanfang> gesendet.
Bei jeder Zeile weiteren Textes wird dann die Folge
   <Zeilenanfang><Einfügen><Zeilenende><Return> gesendet.

Die Befehle für Zeilenanfang und Zeilenende sind nur notwendig, wenn der
Editor den Cursor nach dem Einfügen von Text nicht am Ende des ein-
gefügten Texts plaziert, wie z.B. Maxons Edward.
Stattdessen muß dann eine Leerzeile bzw. Linefeed stehen.

Die Daten zur Sprache

Zu jeder Sprache, die im Menü aufgeführt werden soll, muß folgender Eintrag
ins Konfigfile:

<Sprache>            Name der Sprache im Menü
<Kommentarbeginn>    Zeichenfolge für Kommentarbeginn, z.B. "/*" für C
<Kommentarende>      Zeichenfolge für Kommentarende wenn vorhanden
<Rahmenzeichen>      Zeichen für den Rahmen der Box.
<Linienzeichen>      Zeichen, aus dem Trennlinien aufgebaut werden sollen.

Die Zeichenfolge für Kommentarende muß nicht unbedingt angegeben werden, es
hat ja auch nicht jede Sprache dafür ein Zeichen (wie z.B. Assembler).

Siehe dazu die Beispielkonfigurationsdatei

Eine Beispielkonfigurationsdatei

Hier ein typisches Konfigurationsfile mit je zwei Editoren und Sprachen.
Man kann in das Konfigfile auch Kommentare einfügen, dazu muß das erste
Zeichen einer Zeile '#' sein. Kommentare sind immer ganzzeilig.
Soll '#' als erstes Zeichen in einer Zeile stehen und kein Kommentar sein,
z.B. wenn man eine Box aus '#' aufgebaut haben will, so schreibt man '##'.
Die Reihenfolge der Daten ist festgelegt:
Zuerst kommt die Anzahl der Editoren als Zahl, dann die Datensätze zu den
Editoren, dann die Anzahl der Sprachen als Zahl, zuletzt die Datensätze
zu den Sprachen.
Wenn ein Argument nicht angegeben wird, wie z.B. das Kommentarende, so
muß stattdessen ein Linefeed stehen.

# Beispiel für ein Konfigfile für AddComment
# Copyright by Harald Sodemann 1996
#
# Anzahl der Editoren
2
# Beschreibung der Editoren
# Erster Editor: Edward
Edward 1.0
Workbench
EDWARD
return
InsertChars
Left -1
Right -1
Top
# Zweiter Editor: Ed
Ed
Workbench
Ed
N
I
CS

T
# Anzahl der Sprachen
2
# Beschreibung der Sprachen
# Erste Sprache: ANSI C
ANSI C
/*
*/
*
-
# Zweite Sprache: AmigaBASIC
AmigaBASIC
REM

##
=
# Ende des Konfigurationsfiles.

Grundsätzlich läßt sich AddComment auch ohne Konfigurationsdatei starten,
es sind dann die Sprache ANSI C und der Editor Ed fest eingestellt.

Integrationshinweise

AddComment wurde speziell auf die Integration in Entwicklungsumgebungen
hin programmiert. Für eine gelungene Integration gibt es viele Möglichkeiten,
hier nur ein paar Tips.

In Editoren mit konfigurierbaren Menüs sollte man folgende Befehle aufnehmen:

MenuItem-Text  ARexx-Befehle

"Programmbox "  "pf" , "pu".
"Funktionsbox"  "ff" , "pu".
"Beschreibung"  "df" , "pu".

Diese Befehle könnte man auch auf Funktionstasten legen, z.B. F8-F10.

Durch den in den ToolTypes anpassbaren Hotkey läßt sich AddComment auch
hier harmonisch in die Entwicklungsumgebung einfügen.

Versionsüberblick

************************************************************************
*               History of AddComment by Harald Sodemann               *
*----------------------------------------------------------------------*
* Version 0.1:    CLI-Output, just for alrorithm testing       (1.4.96)*
*----------------------------------------------------------------------*
* Version 1.0D/E: First working release, in German and English (1.9.96)*
************************************************************************

zukünftige Erweiterungen

Ich hab noch `ne ganze Menge Ideen, was noch ins Programm reinpassen würde,

*  ein interaktiver Modus, in dem das Programm den Quelltext nach
   Funktionen durchforsten würde und dann bereits mit vorbereitetem Formular
   nur noch nach den Beschreibungen zu den Argumenten und der Erläuterung
   zur Funktion fragt.
*  Zudem wäre es nicht schlecht, wenn man die Boxenbreite während der Laufzeit
   einstellen könnte.
*  Ein paar ARexxbefehle mehr wären auch nicht schlecht.
*  Lokalisierung des Programms unter OS2.1
*  Anzeige des aktuellen Datums im Datumfeld

Über zusätzliche Anregungen oder Anfragen, die den Sinn einer Weiter-
entwicklung bestätigen würden, würde ich mich freuen.

Copyrighthinweise

AddComment ist Freeware, d.h. macht damit was ihr wollt sooft ihr wollt.
Eigentlich ist AddComment ein Nebenprodukt einer C++-Klassenbibliothek, die
ich gerade für den Amiga entwickle, mit Windowhandling, Gadgethandling,
ARexxPorts und solchen tollen Sachen. Es ist sowas wie ein Versuchskaninchen,
an dem die ersten Klassen sich austoben dürfen. Trotzdem ist es doch recht
stabil und nützlich.
Wenn jemand einen Bug finden sollte oder Vorschläge für künftige Verbesser-
ungen hat, möge er sie bitte senden an:

   Harald Sodemann
   Maximilianstr. 64
   D-95444 Bayreuth
   E-Mail: a2930@freenet.uni-bayreuth.de


- Ende der Dokumentation -

Beispiele für einen Programmkopf, einen Funktionskopf und eine
Beschreibungsbox.


//************************************************
//*               TestProgramm.cpp               *
//*----------------------------------------------*
//* Autor:Harald Sodemann        Version 23.789  *
//* Datum:31.Februar 1998        Sprache:C++ 2.0 *
//*----------------------------------------------*
//* Hier könnte nun etwas einigermaßen wichtiges *
//* stehen, wenn man dazu die Muße aufbringt.    *
//************************************************

//************************************************
//*     int TestFunktion(int Testx, int Testy)   *
//*----------------------------------------------*
//* Testx:  Ist nicht besonders wichtig!         *
//* Testy:  Ist auch nicht von Bedeutung.        *
//*                                              *
//* Rückgabewert:  Kannste vergessen.            *
//*----------------------------------------------*
//*   Diese Funktion dient nur zu Testzwecken.   *
//************************************************

//************************************************
//*          Nun eine Demonstration der          *
//*          Formatierungsmöglichkeiten:         *
//*                                              *
//* Linksbündiger Text                           *
//*               Zentrierter Text               *
//*                          Rechtsbündiger Text *
//*                                              *
//*                Toll, stimmts?!               *
//************************************************

***************************************************************************
Copyright by Harald Sodemann 1.September 1996
