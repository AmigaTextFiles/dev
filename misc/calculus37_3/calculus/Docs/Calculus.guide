@database Calculus.guide
@master Calculus.guide
@$VER: 37.1
@author "David Göhler"
@(c) "© 1995 by David Göhler"
@index HeddleyAutoIndex
@remark Created with Heddley v1.1 (c) Edd Dumbill 1994

@node "Main" "No title"

 calculus.library 37.3 -- third release
 ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯

 @{" Preface         " link "Preface" 0}      some words the first time
 @{" How to install  " link "Install" 0}      where to put the supplied files
 @{" Sample programm " link "SampleProg" 0}      a replacement for eval from C=
 @{" Functions       " link "Functions" 0}      how it works

 @{" Future          " link "Future" 0}      what will come next?
 @{" Copyright       " link "Copyright" 0}      use it for free!
 @{" Author          " link "Autor" 0}      name and address
@endnode

@node "Preface" "Preface         "
@prev "Main"

 @{b}Preface@{ub}
 ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 Some days ago I needed a C-function, which can calculate.
 The input should be a string, the output an integer. If
 the string contains some unknown identifier, the function
 should look into the local environment variables to get
 a value.

 The first attempt was a programm I called »@{"IVal" link "SampleProg" 0}«, a simple
 replacement for Commodores »Eval«. For that I used a
 sceleton Infix-to-Postfix converter I found in the »Dragon
 Book« for compiler writers and made some changes and
 enhancements (prefix operators and more @{"functions" link "Functions" 0}).

 The result was a small (9 KByte) programm, which knowns
 basic arithmetic rules (e.g. to multiply first and add
 later), uses local variables (you can set using the shell
 command »set«) as normal placeholders and has a »power«
 function.

 Second, I thought it would be nice to have a library, which
 everybody can use in his oder her programs. I asked Uwe
 Röhm (a friend of mine) to implement the library function
 into »NewEdit«, so that everybody can calculate in every
 string gadget. He is working on it :-).

 To write a small calculator is an very easy job with this
 library. In the @{"future" link "Future" 0} the library will contain functions
 for floating point operations. For now it can only
 calculate integer results. But this will change quickly :-)
@endnode

@node "Install" "How to install  "
@prev "Preface"

 @{b}Install@{ub}
 ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 Installation is easy:

   @{" Copy the library  " system "c:Copy /libs/calculus.library sys:libs clone"}      to copy the library
   @{" Copy Ival to C:   " system "C:Copy /CLI/Ival to C: CLONE"}      to copy Ival to C:
   @{" Copy this guide   " system "C:Copy Calculus.guide#? to HELP: CLONE"}      to put it into Help:
   @{" Copy calculus.lib " system "C:Copy /DLIB/calculus.lib to dlib: CLONE"}      to dlib: for DICE users

 For more look into the dircetories @{i}Source@{ui} and @{i}Include@{ui}
@endnode

@node "SampleProg" "Sample programm "
@prev "Install"

 @{b}IVAL 1.3@{ub} -- a compatible replacement for »EVAL« from C=
 ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯

 @{i}What's that?@{ui}

 IVAL is a small calculator, most useful in scripts for the
 Commmodore shell. It accepts values in decimal, octal and
 sedecimal (hex), calculates infix expression correct and
 has some important features EVAL doesn't have.


 @{i}Advantages@{ui}

 Things IVAL has, EVAL doesn't have:

  · operator ^ for power like in  2 ^ 10 (is 1024)
  · operators <, >, = to compare
  · very easy local variable handling (no $ needed).
  · Easy output to local variables. This improves speed over
    eval
  · knows the higher priority of * / % over + and -
  · LFORMAT-String with C-like placeholders


 @{i}Compatibility@{ui}

 IVAL ist 95% compatible to EVAL:

  · IVAL knows all operators EVAL knows
  · parameters TO and LFORMAT are supported
  · IVAL accepts octal, decimal and sedecimal (hex) values

 Differences are:

  · The LFORMAT uses C-like »printf« placeholders only
  · The ' as character introducer is not supported
  · It cannot output octal numbers (any problem with that?)
  · abbreviations like R for RSH are not supported
  · The expression MUST be the last parameter!

 @{i}Operators@{ui}

  +       add
  -       substracte
  *       multiply
  /       divide
  div     divide
  ^       power
  mod     modulus operation
  &       bitwise and
  |       bitwise or
  xor     bitwise exclusive or
  ~       bitwise not
  -       negate
  lsh     shift left
  rsh     shift right
  eqv     equal?
  =       equal?
  <       less (does not work on normal shells)
  >       greater (does not work on normal shells)

 You can use ( and ) for grouping numbers. The power
 operator has not (!) a higher priority than *, /, div and
 mod!

 But *, /, div and mod have a higher priority than + and -


 @{i}Placeholders@{ui}

 You can use variables constructed via »set« or placed in
 ENV: without the dollar sign $. Try this:

 set a 34
 ival a + 4

 The result will be 38. You can set a variable also from
ival:

 ival VAR=a a + 4

 You will get nothing on screen, but the variable »a« will
 have the value 38. Because local variables are not set
 using the Amiga-OS filesystem, it is faster than using the
 redirection like

 eval $a + 4 >ENV:a


 @{i}Bugs@{ui}

 Bugs are not known for 1.3. If you find bugs or have
 suggestions for improvements, contact me.
@endnode

@node "Future" "Future          "
@prev "SampleProg"

 @{b}Future@{ub}
 ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 This is the third release. The library has only one usable
 function:

   @{i}CalcInteger(string,error)@{ui}

 The next version will have a equal function for floating
 point calculations.

 I also think about some special functions to split parsing
 and calculation. This will improve the speed dramaticaly,
 if you only change the values of environment variables and
 call the same preparsed function again. Then this library
 is very useful for math program writers, too.
@endnode

@node "Copyright" "Copyright       "
@prev "Future"

 @{b}Copyright@{ub}
 ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 The »calculus.library« and »ival« are © David Göhler 1995.

 But you can

   · use it for free
   · copy it for everyone
   · put it on CDs, into Aminet, on Fred Dish CDs or disks
   · sell it with commercial software (with all files)

 without a fee!

 But please send @{"me" link "Autor" 0} a message, if you use the library.
@endnode

@node "Autor" "Autor           "
@prev "Copyright"

 @{b}Author@{ub}
 ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 The author of this wonderful software is

   David Göhler
   Dorfstr. 51 a
   85591 Vaterstetten
   Germany

   email: david@mail.magna.de
@endnode

@node "Functions" "Functions       "

 @{b}Functions@{ub}
 ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯

 The library base name is @{b}CalculusBase@{ub}
 The library must have the name "@{i}calculus.library@{ui}"
 The actual version is @{b}37.3@{ub}.

 The only function for now is:

    @{i}long CalcInteger(char *string,unsigned long *error);@{ui}

 »string« is a pointer to char, containing the formula.
 »error« is a pointer to ULONG. If you want to hear about
         errors, you should supply this pointer. For error
         codes look into @{"calculus.h" alink "/include/calculus.h" 0}.

 The result is the calculated integer. For operators and
 functions see the description of @{"Ival" link "SampleProg" 0}. You can use
 environment variables as placeholders.
@endnode

@node HeddleyAutoIndex "Index"
@remark Index auto-generated by Heddley
Index of Calculus.guide

Documents

@{"Autor           " link "Autor"}
@{"Copyright       " link "Copyright"}
@{"Functions       " link "Functions"}
@{"Future          " link "Future"}
@{"How to install  " link "Install"}
@{"No title" link "Main"}
@{"Preface         " link "Preface"}
@{"Sample programm " link "SampleProg"}

Buttons

@{" Author          " link "Autor" 0}
@{" Copy calculus.lib " system "C:Copy /DLIB/calculus.lib to dlib: CLONE"}
@{" Copy Ival to C:   " system "C:Copy /CLI/Ival to C: CLONE"}
@{" Copy the library  " system "c:Copy /libs/calculus.library sys:libs clone"}
@{" Copy this guide   " system "C:Copy Calculus.guide#? to HELP: CLONE"}
@{" Copyright       " link "Copyright" 0}
@{" Functions       " link "Functions" 0}
@{" Future          " link "Future" 0}
@{" How to install  " link "Install" 0}
@{" Preface         " link "Preface" 0}
@{" Sample programm " link "SampleProg" 0}
@{"calculus.h" alink "/include/calculus.h" 0}
@{"functions" link "Functions" 0}
@{"future" link "Future" 0}
@{"IVal" link "SampleProg" 0}
@{"me" link "Autor" 0}
@endnode
