;
; Installer-Script for MEMake 2.0
; 
;	Autor	: Malte Eller
;	Version	: 1.1
;	Datum	: 16.01.1997
;
;	$VER: Install 1.0 (16.01.1997)
;
;**************************************************

(set @user-level 1)

(if (= @language "deutsch")
(
(set #bad-kick (cat "Leider wird OS2.0 oder höher benötigt"))
(set #askdir1 (cat "Wohin wollen Sie MEMake installieren?\n"
"Dort wird dann eine neue Schubalde angelegt"))
(set #fragetext (cat "Soll ich das Programm auch in die\n"
" WBStartup kopieren?"))
(set #ja (cat "Ja"))
(set #nein (cat "Nein"))
(set #confirmt (cat "Was soll ich instalieren?"))
(set #fragetextL (cat "Welche Sprachen sollen installiert werden?"))
(set #fragestext (cat "Soll ich das Prefsfile nach S: kopieren?"))
)

(
(set #bad-kick (cat "I need OS2.0 or higher"))
(set #askdir1 (cat "In which Drawer will you install MEMake?\n"
"A new Drawer will be create"))
(set #fragetext (cat "Should I copy the Program to WBStartup"))
(set #ja (cat "Yes"))
(set #nein (cat "No"))
(set #confirmt (cat "What should I install?"))
(set #fragetextL (cat "Which languages should I install?"))
(set #fragestext (cat "Sould I copy the Prefsfile to S:"))
))

;**************************************************

(if (< (/ (getversion) 65536) 37)
(
    (abort #bad-kick)
))

;**************************************************

(complete 0)

(set #name
	(askdir
		(prompt #askdir1)
		(help @askdir-help)
		(default "sys:")
	)
)

(set #Dname (tackon #name "MEMake"))

(makedir #Dname
 (infos)
)

(copyfiles
	(source "")
	(dest #Dname)
	(pattern "#?")
	(prompt #confirmt)
	(help @confirm-help)
	(confirm)
)

(complete 50)

;**************************************************

(set name
	(askoptions
		(prompt #fragetext)
		(help @askoptions-help)
		(choices #Ja)
		(default 1)
	)
)

(if (= 1 name)
(
 (copyfiles
	(source "MEMake")
	(dest "sys:WBStartup")
	(prompt #fragetext)
	(help @confirm-help)
	(confirm)
 )
 (copyfiles
	(source "MEMake.info")
	(dest "sys:WBStartup")
	(prompt #fragetext)
	(help @confirm-help)
	(confirm)
 )
)
)

(copyfiles
	(source "MEMake.prefs")
	(dest "s:")
	(prompt #fragestext)
	(help @confirm-help)
	(confirm)
)
(copyfiles
	(source "MEMake.ToolsListe")
	(dest "s:")
	(prompt #fragestext)
	(help @confirm-help)
	(confirm)
)

(complete 80)

;**************************************************

(if (exists "sys:locale/catalogs")

 (set #lang (askoptions
		(prompt #fragetextL)
		(help @askoptions-help)
		(choices "Deutsch" "English")
		(default 1))
 )
)

(set #n 0)

(while
	(set #sprache
 		(select #n
 			"Deutsch"
 			"English"
 			""
 		)
 	)
	(
	 (if (IN #lang #n)
		(
		 (set #catalog (tackon "Catalogs" (tackon #sprache "MEMake.catalog")))
		 (set #destination (tackon "Locale:Catalogs/" #sprache))
		 (copyfiles
			(source #catalog)
			(dest #destination)
			(prompt #confirmt)
			(help @confirm-help)
			(confirm))
		)
	 )
	 (set #n (+ #n 1))
	)
)

(complete 100)
