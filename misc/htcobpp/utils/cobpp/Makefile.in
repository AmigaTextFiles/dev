#
# Makefile.in for cobpp, the COBOL format (free/fixed) convert utility
#

SHELL=/bin/sh

@SET_MAKE@

prefix=@prefix@
exec_prefix=@exec_prefix@

INSTALL=@INSTALL@
INSTALL_DATA=@INSTALL_DATA@

LEX=@LEX@
CCX=@CC@

RM= rm -f

INSTBIN=@cobbin_default@

#
INCLUDES= 
CCXFLAGS=${INCLUDES} @CCXFLAGS@
LIBS=@LIBS@
LDFLAGS=@LDFLAGS@
MAKEDEPEND=@MAKEDEPEND@

#
# Rules for compiling .c .l sources
#
.SUFFIX: .c .o 
.c.o:
	$(CCX) $(CCXFLAGS) -c $<

#


PROG=htcobol

SRCS = main.c support.c lex.yy.c \
	get_util.c list_util.c opt_util.c \
	str_util.c vperror.c 

OBJS = $(SRCS:.c=.o)

PROG = htcobpp


all: $(PROG)


${PROG}: ${OBJS}
	$(CCX) -o $@ ${OBJS} $(LDFLAGS) $(LIBS) 
#	strip $@


lex.yy.c: scanner.l
	$(LEX) -o$@ $< 

clean:
	$(RM) $(PROG) $(OBJS) lex.yy.c

install: $(PROG)
	strip $(PROG)
	${INSTALL_DATA} $(PROG) $(INSTBIN)/$(PROG)
