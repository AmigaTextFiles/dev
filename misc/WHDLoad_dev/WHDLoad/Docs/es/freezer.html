<HTML>
<HEAD>
<TITLE>Monitores del Sistema / Congelador</TITLE>
<meta name="DC.Language" content="es">
<meta http-equiv="content-language" content="es">
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
<!-- $Id: freezer.html 1.2 2006/11/16 08:23:24 wepl Exp wepl $ -->
</head>
<BODY>
<h3>Monitores del Sistema / Congelador</h3>
Hay gran cantidad de congeladores puramente por software ahí afuera. El uso de estas herramientas puede ser
de gran ayuda durante el desarrollo y detección de errores en los Esclavos y el programa instalado.
WHDLoad soporta directamente HrtMon y ThrillKill. Otros tipos pueden ser usados con la
opción <a href="opt.html#NoTrapHandler">NoTrapHandler/S</a> (esto tiene algunas desventajas, por supuesto).
Si Ud. desea tener soporte directo para otro programa, contácteme y si puede ser hecho incluiré soporte
para el mismo. Durante el arranque de WHDLoad este intentara comprobar si alguno de los monitores soportados
esta activo. Si se encuentra alguno, WHDLoad hará algunas cosas especiales. Si la MMU esta siendo usada por WHDLoad
este declarará la memoria usada por el monitor como válida y cacheable WriteThrough. Durante la ejecución de
la demo/el juego se reenviarán todas las excepciones NMI al vector NMI salvado desde la tabla de vectores
del monitor. Adicionalmente, si el VBR es desplazado por WHDLoad (<a href="opt.html#NoVBRMove">NoVBRMove/S</a> no
esta configurada y la CPU es como mínimo un 68010) este comparará la <a href="opt.html#FreezeKey">FreezeKey</a> con
el valor actual del teclado en cada interrupción. Si los valores coinciden, WHDLoad hará lo necesario con el
teclado, transformando el marco de la pila a un marco de pila de NMI y entrando en el monitor a través
de su gestor de NMI.
<h4>HrtMon</h4>
La detección en memoria debe ser relativamente segura. Pienso que también funcionará con versiones futuras.
Tenga cuidado si la MMU esta siendo usada por WHDLoad: no acceda al área fuera de BaseMem desde HrtMon.
Esto ocasionará un cierre del programa debido a que HrtMon no puede manejar la Excepción de Falla de Acceso
(Access Fault Exception).
<p>En HRTmonPrefs Ud. debe seleccionar la casilla 'No VBR move', de lo contrario no podrá ingresar
al monitor mientras WHDLoad se esta ejecutando.
<p>Luego de retornar desde HRTmon al programa ejecutándose bajo WHDLoad Ud. puede notar una pantalla
gráfica incorrecta. Esto se debe a que HRTmon sobreescribe algunos registros. Se puede evitar esto
indicándole a HRTmon el valor correcto, por ej. use <tt>'e $100 $5200'</tt> para una pantalla de
32 colores antes de retornar.
<h4>ThrillKill</h4>
No hay ninguna firma utilizable en el congelador, por lo tanto se usan algunas comparaciones en el código.
Por lo tanto la detección no funcionará con otras versiones.
</BODY>
</HTML>
