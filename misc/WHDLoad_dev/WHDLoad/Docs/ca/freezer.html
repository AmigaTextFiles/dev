<HTML>
<HEAD>
<TITLE>Monitors del Sistema / Congeladors</TITLE>
<meta name="DC.Language" content="ca">
<meta http-equiv="content-language" content="ca">
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
<!-- $Id: freezer.html,v 1.1 2007/08/19 12:24:49 wepl Exp wepl $ -->
</head>
<BODY>
<h3>Monitors del Sistema / Congeladors (<i>freezers</i>)</h3>
Hi ha gran quantitat de congeladors que funcionen per programari al mercat. L'ús d'aquestes eines pot ser de gran ajuda 
durant el desenvolupament i detecció d'errors als Esclaus i el programa instal·lat. WHDLoad suporta directament HrtMon i 
ThrillKill. Es poden utilitzar d'altres amb l'opció <a href="opt.html#NoTrapHandler">NoTrapHandler/S</a> (però això té alguns
 desavantatges, per descomptat). Si desitja tenir suport directe per a un altre programa, contacti'm i si es pot fer inclouré
 suport per al mateix. Durant l'arrencada de WHDLoad, aquest intenta comprovar si algun dels monitors suportats es troba actiu.
 Si se'n troba algun, WHDLoad realitzarà algunes tasques especials: Si la MMU està éssent utilitzada per WHDLoad,  declararà la 
memòria utilitzada pel monitor com vàlida i "Cachable WriteThrough". Durant l'execució de la demo/joc es redirigiran totes 
les excepcions NMI al vector NMI desat des de la taula de vectors del monitor. Addicionalment, si el VBR és desplaçat per 
WHDLoad (<a href="opt.html#NoVBRMove">NoVBRMove/S</a> no està configurat i la CPU és com a mínim un 68010) aquest compararà la
 <a href="opt.html#FreezeKey">FreezeKey</a> amb el valor actual del teclat a cada interrupció. Si els valors coincideixen, 
WHDLoad farà el necessari amb el teclat, transformant el marc de la pila (<i>stackframe</i>) a un marc de pila NMI i entrant 
en el monitor a través del seu gestor de NMI. 
<h4>HrtMon</h4>
La detecció en memòria hauria d'ésser relativament segura. Penso que també funcionarà en versions futures. Tingui cura si
 la MMU està éssent utilitzada per WHDLoad: no accedeixi a l'àrea fora de BaseMem des de HrtMon. Això ocasionarà un tancament del
 programa degut al fet que HrtMon no pot tractar l'Excepció de Falla d'Accés (Access Fault Exception). 
<p>A les preferències d'HRTmon (HRTmonPrefs), s'ha de seleccionar la casella 'No VBR move', en cas contrari no podrà entrar al 
monitor mentre WHDLoad s'està executant.
<p>Després de retornar des de HRTmon al programa que s'està executant sota WHDLoad, pot notar-se una pantalla gràfica incorrecta.
Això es deu al fet que HRTmon sobreescriu alguns registres; això es pot evitar indicant-li a HRTmon el valor correcte, per ex. empri  
<tt>'e $100 $5200'</tt> per a una pantalla de 32 colors abans de retornar.
<h4>ThrillKill</h4>
No hi ha cap signatura utilitzable al congelador, per tant s'utilitza un sistema a base de comparacions al codi. Això implica que la 
detecció no funcionarà amb altres versions.
</BODY>
</HTML>
