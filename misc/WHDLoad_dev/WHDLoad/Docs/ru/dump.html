<html>

<head>
<title>Dumping</title>
<meta name="DC.Language" content="ru">
<meta http-equiv="content-language" content="ru">
<meta http-equiv="content-type" content="text/html; charset=windows-1251">
<!-- $Id: dump.html 1.5 2005/12/04 12:44:34 wepl Exp wepl $ -->
</head>

<body>

<h3>Дампы памяти и файлы журналов регистрации,
создаваемые WHDLOAD</h3>

<p>Главным образом это нужно для отладочных целей.
WHDLoad может создавать различные дампы и файлы
журналов регистрации (логи).</p>

<h4><a name="memory">Дамп памяти</a></h4>

<p>Дамп памяти - снимок всей памяти, которая
используется установленной программой. Размер
дампа зависит от установленной программы (оно
равно значению <strong>ws_BaseMemSize</strong> в структуре Slave).
Дамп памяти будет создан, если была нажата <a
href="opt.html#DebugKey">DebugKey</a> или если после ошибки будет
нажата кнопка CoreDump. Имя созданного файла дампа
памяти - &quot;.whdl_memory&quot;. Заданное по умолчанию
местоположение - &quot;PROGDIR: &quot;, но оно может быть
изменено опцией <a href="opt.html#CoreDumpPath">CoreDumpPath</a>.
Существующий файл с тем же самым именем будет
всегда перезаписываться. Если установленная
программа использует Fast память, дамп сохраняется
в файле под именем &quot;.whdl_expmem&quot;.</p>

<h4><a name="register">Дамп регистров</a></h4>

<p>Дамп регистров содержит последнее состояние
центрального процессора (включая MMU), Cia и Custom Chips.
Некоторое Cia и Custom регистры не могут быть
прочитаны и они включаются в файл дампа только
если был активизирован режим <a href="opt.html#Snoop">Snoop</a>.
Информация будет сохранена в файл формата ASCII с
подсветкой, используя ESC-последовательности
(используется CSI - Последовательность
Управляющих Команд, десятичное число 155). Для
просмотра такого файла, нужна программа,
поддерживающая ESC-последовательности, (например,
More, MuchMore, Multiview...). Имя файла дампа регистров -
&quot;.whdl_register&quot;, заданное по умолчанию
местоположение - &quot;PROGDIR: &quot; но оно может быть
изменено опцией <a href="opt.html#CoreDumppath">CoreDumpPath</a>. Если
файл с тем же самым названием уже существует, то
дамп будет добавлен в конец старого дампа - иначе
будет создан новый файл.</p>

<h4><a name="FileLog">Журнал регистрации доступа к файла</a>м</h4>

<p>Все дисковые операции будут записываться в
журнал регистрации (лог-файл), если была
активизирована опция <a href="opt.html#FileLog">FileLog</a>. Эта
функция будет очень полезна для анализа дисковых
операций, производимых установленной
программой, в целях отладки и оптимизации. Записи
в лог-файл заносят следующие функции:

<ul>
  <li>resload_DeleteFile </li>
  <li>resload_DiskLoad </li>
  <li>resload_Examine </li>
  <li>resload_ExNext </li>
  <li>resload_GetFileSize </li>
  <li>resload_GetFileSizeDec </li>
  <li>resload_ListFiles </li>
  <li>resload_LoadFile </li>
  <li>resload_LoadFileDecrunch </li>
  <li>resload_LoadFileOffset </li>
  <li>resload_SaveFile </li>
  <li>resload_SaveFileOffset </li>
</ul>

<p>Вышеупомянутые функции при каждом доступе к
файлу,&nbsp;создают одну запись в журнале, в строке
записывается имя вызванной функции, параметры и
результат. WHDLoad заносит все вхождения в лог во
внутренний буфер. Буфер сохраняется при выходе
из программы, либо если буфер полон - в момент
доступа. Информация будет записана в ASCII файл, имя
файла дампа - &quot;.whdl_filelog&quot;, заданное по
умолчанию местоположение - &quot;PROGDIR: &quot; но оно
может быть изменено опцией <a href="opt.html#CoreDumppath">CoreDumpPath</a>.</p>
</body>
</html>
