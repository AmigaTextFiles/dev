/* This simple macro solicits a test date from the user, then lists
 * all files in the current directory which have been modified since
 * that date. There is no error checking for invalid date format. 
 */

options results


portName = uniqueport()

Say "Unique port name =" portName

address value(portName)

'setformat' "DOS";
'setprompt' "Select the test date (DD-MMM-YY):"
'request';
'getdate'
testdate = result
'exit';
say "The test date is" testdate

address command
'list' "since="testdate

exit

/* Create a unique rexx port name. */
uniqueport:
portNumber = 0
do forever
    testName = "mrdatereq" || portNumber
    if show('ports', testName) = 0 then do
        address command
        'run' rxdatereq value(testName)
        if rc ~= 0 then exit
        do until show('ports', value(testName)) = 1
            /* call Delay(10); */
        end
        return value(testName);
    end
    portNumber = portNumber + 1
end

