XRef-Tools/XRefConvert                                   XRef-Tools/XRefConvert

$VER: xrefconvert.doc 1.14 (03.11.94)

NAME
    XRefConvert - converts autodoc or header files to AmigaGuide files

TEMPLATE
    FORM/M/A,TO/A,KEYWORDFILE/K,EXCEPTIONFILE/K,STDDELIMITERS/K,
    EXCLUDETYPES/K,INCLUDETYPES/K,INDENT/N/K,TOOLPRI/N/K,NOICON/S,
    NOAMIGAGUIDE/S,NOMAINPAGELINK/S,STATISTIC/S,V40/S,VERBOSE/S

FORMAT
    XRefConvert [FROM] file|dir [file2|dir2] [TO] dir [CATEGORY categories]
                [KEYWORDFILE keyworddef] [EXCEPTIONFILE exceptdef] 
                [STDDELIMITERS string] [EXCLUDETYPES types]
                [INCLUDETYPES types] [INDENT number] [TOOLPRI priority]
                [NOICON] [NOAMIGAGUIDE] [NOMAINPAGELINK] [STATISTIC] [V40]
                [VERBOSE]

FUNCTION
    Files:
    converts a C header file or a autodoc file in a AmigaGuide file.Which type
    a given file is, is determined by the suffix of the filename :
       - ".h" for a C header file
       - ".doc" or ".dok" for a doc file and
       - these suffix with the "TABLE OF CONTENTS" for an autodoc file
    If the switch NOAMIGAGUIDE is on, XRefConvert will generate the appropri-
    ate files with out the headers for an AmigaGuide file.If this is not
    turned on,it generates an AmigaGuide file. Thus you can use the keyword
    format feature also to convert to AmigaGuide or to convert in normal ASCII
    format.

    Delimiters:
    This tool separates words by using of a delimiter-string. The default
    string is " \t\n,<>=(){}\":.;*|!". Any of these charaters terminates a
    word. You can specify an other delimiter string by using of the
    STDDELIMITERS option for the command.

    Keyword file:
    To specify keywords you must pass a keyword file, which contains keyword
    definitions (see KEYWORDFILE option).XRefConvert loads first the
    "Sys:config/xref/keywords" file is it exists.After this it loads the
    specified keywordfile or it looks for a "keywords" file in the current
    directory.

    Icon:
    XRefConvert will use the ENV:sys/def_guide.info icon for each generated
    AmigaGuide database. If this icon doesn't exists it uses a internal icon.

INPUTS
    FROM (STRINGS) - specifies input files and/or directories

    TO (STRING) - specifies the output directory, in which the generated
        direcotries/files are placed.

    CATEGORY (STRING) - category pattern to use for convertion. Only
        xreffiles are parsed, which matches this category pattern.

    KEYWORDFILE (STRING) - file, which contains keyword definitions to substi-
        tute such keywords.
        The file must have the following format :
        - First the file format is ASCII-text, which is line orientated.
          Each line is parsed via ReadArgs() function of the dos.library with
          the following template :
          
          KEYWORD/K/A,SUBSTITUTE/K/A,DELIMITERS/K,NEXTWORD/S

          if a line matches these template it will be stored and used by the
          convertion.

          the format of line is (note in the file, it must be one line !!!) :

          KEYWORD keyword SUBSTITUTE substitute-string [DELIMITERS string] \
          [NEXTWORD]

          KEYWORD (STRING) - specifies the word to search for, if this is
              AUTODOC, the substitute string is used to substitute all words,
              which matches a AutoDoc description word (f.e. : "NAME",
              "SYNOPSIS",...). To detect such words it must match the
              following : first in the line there can be 
                          INDENT - 2 < n < INDENT + 2
              n spaces, then the word must follow in uppercase letters and 
              after this must be a newline !
          SUBSTITUTE (STRING) - specifies the string to replace the keyword
              in the generated file a "%s" in this string inserts the keyword
              itself (just one time for now).
          DELIMITERS (STRING) - specifies the delimiters for the next word.
              This string is only valid if the NEXTWORD switch is turned on.
          NEXTWORD (BOOLEAN) - indicates, that the next word should replaced,
              instead of the keyword. If you also specify the DELIMITERS, the
              end of the next word is defined by any character in this string.

          For the V40 option there exists a special keywordfile named
          keywords.v40 in the config directory. In this file you can specify,
          which text passages are wrapped and which not, using the new
          smartwrap function. If you want a text passage be wrapped define a
          KEYWORD with the description title like "FUNCTION" and use the
          "@{mtext %s}" macro as the SUBSTITUTE string. Thus this text passage
          should be smartwrapped (See also the default keywords.v40 file) !

    EXCEPTIONFILE (STRING) - file, which contain names that are only linked,
        if a "()" is at the end of the name, see AD2AG. Each line has only one
        name.The default is $XREFCONFIGDIR/exceptions .

    STDDELIMITERS (STRING) - string, which defines the delimiters characters
        the default is : " \t\n,<>=(){}\":.;*|!"

    EXCLUDETYPES (STRING) - string, which defines the entrytypes that aren't
        used during convertion. With this option you can subpress links to
        the specified types. Each type in this string is separated by an '|'
        character. For example you don't want links to typedef's and macro's.
        Then you have to specify this : EXCLUDETYPES "typedef|macro" !
        Types available for this option : "generic", "function", "command",
        "include", "macro", "struct", "field", "typedef", "define" !
        Default is "".

    INCLUDETYPES (STRING) - string , which defines the entrytypes that are
        only used during convertion. See EXCLUDETYPES for string format and
        available types.

    INDENT (NUMBER) - number of spaces, which are inserted before an AutoDoc
        description word (see KEYWORDFILE/KEYWORD above).

    PRI (NUMBER) - task priority to use during converting

    NOAMIGAGUIDE (BOOLEAN) - indicates, that shouldn't create AmigaGuide 
        headers for each file

    NOICON (BOOLEAN) - don't save an icon for the generated amigaguide file

    NOMAINPAGELINK (BOOLEAN) - don't generate a TABLE OF CONTENTS link to the
        xref.library dynamic node main page.

    STATISTIC (BOOLEAN) - outputs statistics about the generated links to each
        type of entries. Such as include's or functions.

    V40 (BOOLEAN) - generate amigaguide files for use with amigaguide.datatype
        V40 or higher. This generates databases, which uses the smartwrap
        option of the V40 version. This option works only with files in the
        autodoc format and perhaps not with all files of this fileformat. So
        convert and take a look at the generated files !
        If this option is specified XRefConvert tries to load also the file
        "Sys:config/xref/keywords.v40" , in which the keywords are defined to
        use smartwrap !

    VERBOSE (BOOLEAN) - output informations of the current convertion state

EXAMPLE
    XRefConvert include:amiga/ aguide:include/ KEYWORDFILE s:mykeywords \
                AMIGAGUIDE VERBOSE

SEE ALSO
    MakeXRef, LoadXRef, ParseXRef, AGuideXRefV37, AGuideXRefV39, StatXRef,
    XRefAttrs, MakeAGuideIndex

COPYRIGHT
    (C) by Stefan Ruppert 1994

HISTORY
    XRefConvert 1.14 (3.11.94) :
       - default icon name now correct "Env:Sys/def_guide"
       - time calculation now correct

    XRefConvert 1.13 (11.9.94) :
       - workbench support added
       - status window, if started from workbench added

    XRefConvert 1.12 (3.9.94) :
        - now gets the nodename from the entry with ENTRYA_NodeName

    XRefConvert 1.11 (31.8.94) :
        - added V40 option

    XRefConvert 1.10 (29.8.94) :
        - unix manpage support added

    XRefConvert 1.9 (27.8.94) :
        - main node title shows now the relative path instead of the first
          path part
        - uses now XREFA_CategoryParsed if a category is specified. This
          speeds up the convertion.
        - for AutoDoc TOC uses now the columns from the xref.library

    XRefConvert 1.8 (23.7.94) :
        - added EXCLUDETYPPES,INCLUDETYPES option

    XRefConvert 1.7 (22.7.94) :
        - some bug fixed.
        - now can handle <entry>/<entry> pairs
        - the InternXRef list wasn't free'd after convertion of a file
          (this slowed down the convertion of more than one file per call).
          This is fixed and some optimizations by stepping through the list.
        - New statistic display
        - PRI option added

    XRefConvert 1.6 (17.7.94) :
        - now it supports amigaguide files to convert ! It tries to link all
          internal @node titles in the text to the node. And links all found
          xref entries.
        - the point is now a special delimiter ! The following sequences are
          now interpreted as a delimiter ". ",".\0",".\t",".\n" !
        - category pattern added

    XRefConvert 1.5 (13.7.94) :
        - now tries to set the index array for each xreffile to get the best
          performance (then it uses a binary search algorithm)

    XRefConvert 1.4 (11.6.94) :
        - ':','-',';','*' added to STDDELIMITERS default string
        - now tries to load "Sys:config/xref/keywords" every time and then
          tries to load the specified keyword file. If no one is specified
          tries to load the "keywords" file in the current directory.
        - save icon bug fixed , if the source file had an unknown type the
          icon was saved even though. This is fixed.
        - All structures , which have equal autodoc beginnings like , Window
          struct "Window" * -> "Window"ToFront() aren't linked. This is fixed!

    XRefConvert 1.3 (29.5.94) :
        - INDENT option added

