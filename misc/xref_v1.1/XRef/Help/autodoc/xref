@database xref.doc
@master /doc/english/xref.doc
@node main "xref.doc"
@toc xref.library_xreffile@main
@{settabs 40}@{" --background-- " link "--background--"}	@{" AddXRefDynamicNode() " link "AddXRefDynamicNode()"}	
@{" CloseXRefFile() " link "CloseXRefFile()"}	@{" CreateXRefFileA() " link "CreateXRefFileA()"}	
@{" FindXRefFile() " link "FindXRefFile()"}	@{" GetXRefBaseAttrsA() " link "GetXRefBaseAttrsA()"}	
@{" GetXRefConfigDir() " link "GetXRefConfigDir()"}	@{" GetXRefFileAttrsA() " link "GetXRefFileAttrsA()"}	
@{" LoadXRefPrefs() " link "LoadXRefPrefs()"}	@{" LockXRefBase() " link "LockXRefBase()"}	
@{" ParseXRef() " link "ParseXRef()"}	@{" RemoveXRefDynamicNode() " link "RemoveXRefDynamicNode()"}	
@{" SetXRefBaseAttrsA() " link "SetXRefBaseAttrsA()"}	@{" SetXRefFileAttrsA() " link "SetXRefFileAttrsA()"}	
@{" UnlockXRefBase() " link "UnlockXRefBase()"}	@{" WriteXRefFileEntryA() " link "WriteXRefFileEntryA()"}	
@{" XR_ExpungeXRef() " link "XR_ExpungeXRef()"}	@{" XR_LoadXRef() " link "XR_LoadXRef()"}	


@endnode
@node "--background--" "xref.library/--background--"

    @{b}PURPOSE@{ub}
        the xref.library implements a pattern matching for xrefentries off
        all kinds.This is managed by categories and files.A category is a
        group of xreffiles, which have a relationship of a/some aspect(s).
        You can access a entry via a category or just an file. See the
        XREFA_#? defines for this. For example the following four files are
        grouped together in four main categories :
            1)  sys_autodoc.xref  -> CATEGORY SysAutoDoc
            2)  xref_autodoc.xref -> CATEGORY XRefAutoDoc
            3)  sys_include.xref  -> CATEGORY SysInclude
            4)  xref_include.xref -> CATEGORY XRefInclude

        The following categories matches the listed xreffiles :
                #?AutoDoc  -> 1,2
                #?Include  -> 3,4
                Sys#?      -> 1,3
                XRef#?     -> 2,4

    @{b}ENVIRONMENT@{ub}
        The xref.library uses two environment variables. First the
        XREFCONFIGDIR for the configuration of the XRef-System. You can
        specify with this env-variable, where you have all configuration
        files for the XRef-System.
        The second XREFDIR is set from the library to have an access from
        the shell to the global xref directory ! This variable is changed,
        if you specify a new global xref directory via @{"SetXRefBaseAttrs()" link "SetXRefBaseAttrsA()"} !

    @{b}PREFS@{ub}
        the xref.library can be configured by a prefs file. If the library
        is opened the first time it looks for a file in xref.prefs. First it
        tries to get the directory from the XREFCONFIGDIR env-variable.
        If this doesn't exists it uses the "sys:config/xref" directory to
        open the xref.prefs file. If this file exists, it reads it via the
        @{"LoadXRefPrefs()" link "LoadXRefPrefs()"} function.

    @{b}SEE ALSO@{ub}
        @{"GetXRefConfigDir()" link "GetXRefConfigDir()"}, @{"LoadXRefPrefs()" link "LoadXRefPrefs()"}


@endnode
@node "AddXRefDynamicNode()" "xref.library/AddXRefDynamicNode()"

    @{b}NAME@{ub}
        AddXRefDynamicNode - adds the xref.library dynamic node host to the
                             amigaguide system

    @{b}SYNOPSIS@{ub}
        success = AddXRefDynamicNode();
          D0

        BOOL AddXRefDynamicNode(void);

    @{b}FUNCTION@{ub}
        adds the xref.library dynamic node host to the amigaguide system.
        This enables the xref.library to generate a main page with all
        referenced files actually in the system or for a specified
        category.

    @{b}INPUTS@{ub}
        none

    @{b}DYNAMIC NODES@{ub}
        The following names represent the dynamic nodes of the xref.library :

        xref.library_xreffile@main - This node displays all xreffiles,
            which are in memory.

        xref.library_xreffile@<filename> - This node displays all files in
            the xreffile specified by the <filename>.

        xref.library_xreftype@Generics - This node displays all entries of
            the @{"XREFT_GENERIC" link "libraries/xref.h/main" 48} type.

        xref.library_xreftype@Functions - This node displays all entries of
            the @{"XREFT_FUNCTION" link "libraries/xref.h/main" 49} type

        xref.library_xreftype@Commands - This node displays all entries of
            the @{"XREFT_COMMAND" link "libraries/xref.h/main" 50} type

        xref.library_xreftype@Includes - This node displays all entries of
            the @{"XREFT_INCLUDE" link "libraries/xref.h/main" 51} type

        xref.library_xreftype@Macros - This node displays all entries of
            the @{"XREFT_MACRO" link "libraries/xref.h/main" 52} type

        xref.library_xreftype@Structures - This node displays all entries of
            the @{"XREFT_STRUCT" link "libraries/xref.h/main" 53} type

        xref.library_xreftype@Typedefs - This node displays all entries of
            the @{"XREFT_TYPEDEF" link "libraries/xref.h/main" 55} type

        xref.library_xreftype@Defines - This node displays all entries of
            the @{"XREFT_DEFINE" link "libraries/xref.h/main" 56} type

    @{b}RESULTS@{ub}
        result @{"TRUE" link "AG:SysInc/exec/types.h/main" 73} for success otherwise @{"FALSE" link "AG:SysInc/exec/types.h/main" 76}, perhaps there is no
        amigaguide.library or something else

    @{b}SEE ALSO@{ub}
        @{"RemoveXRefDynamicNode()" link "RemoveXRefDynamicNode()"}, @{"ParseXRef()" link "ParseXRef()"}


@endnode
@node "CloseXRefFile()" "xref.library/CloseXRefFile()"

    @{b}NAME@{ub}
        CloseXRefFile - closes and free's all allocated resources for a
            created xreffile via @{"CreateXRefFileA()" link "CreateXRefFileA()"}

    @{b}SYNOPSIS@{ub}
        CloseXRefFile(handle);
                        A0

        void CloseXRefFile(struct @{"XRefFileHandle" link "libraries/xref.h/main" 34} *);

    @{b}FUNCTION@{ub}
        this function closes the created xreffile and free's all resources
        allocated from @{"CreateXRefFileA()" link "CreateXRefFileA()"} and @{"WriteXRefFileEntryA()" link "WriteXRefFileEntryA()"}.
        Currently all entries are buffered, so only this function writes the 
        data to the disk.

    @{b}INPUTS@{ub}
        handle (struct @{"XRefFileHandle" link "libraries/xref.h/main" 34} *) - handle pointer returned from
            @{"CreateXRefFileA()" link "CreateXRefFileA()"}

    @{b}RESULTS@{ub}
        none

    @{b}SEE ALSO@{ub}
        @{"CreateXRefFileA()" link "CreateXRefFileA()"}, @{"WriteXRefFileEntryA()" link "WriteXRefFileEntryA()"}


@endnode
@node "CreateXRefFileA()" "xref.library/CreateXRefFileA()"

    @{b}NAME@{ub}
        CreateXRefFileA - create a xreffile
        CreateXRefFile - varargs stub for CreateXRefFileA

    @{b}SYNOPSIS@{ub}
        handle = CreateXRefFileA(file,taglist);
          D0                      A0     A1

        handle = CreateXRefFile(file,tag1,...);

        struct @{"XRefFileHandle" link "libraries/xref.h/main" 34} *CreateXRefFileA(STRPTR ,struct @{"TagItem" link "AG:SysInc/utility/tagitem.h/main" 32} *);

        struct @{"XRefFileHandle" link "libraries/xref.h/main" 34} *CreateXRefFile(STRPTR,Tag1,...);

    @{b}FUNCTION@{ub}
        this function creates an xreffile and allocates all needed resources.
        It returns a handle, which is used by the @{"WriteXRefFileEntryA()" link "WriteXRefFileEntryA()"} and 
        @{"CloseXRefFile()" link "CloseXRefFile()"} calls. If you get a handle to the created xreffile ,
        you must call the @{"CloseXRefFile()" link "CloseXRefFile()"} function. Otherwise the file isn't
        closed and no resources are free'd

    @{b}TAGS@{ub}
        @{"XREFA_Priority" link "libraries/xref.h/main" 92} (BYTE) - specifies a default priority, which is saved
            internally in the xreffile. If no priority is specified via
            @{"XR_LoadXRef()" link "XR_LoadXRef()"} function call, this priority is used.

        @{"XREFA_File" link "libraries/xref.h/main" 118} (STRPTR) - this tag overrides the file parameter

        @{"XREFA_Category" link "libraries/xref.h/main" 89} (STRPTR) - specifies a build-in category.This category
            can't be overwritten with a @{"XR_LoadXRef()" link "XR_LoadXRef()"} call.

        @{"XREFA_Name" link "libraries/xref.h/main" 123} (STRPTR) - defines a name for this xreffile.If this tag
            isn't set. The filename is used as the name.

        @{"XREFA_VersTag" link "libraries/xref.h/main" 128} (STRPTR) - this tag is used to write an AmigaDOS 2.0
            version-string.

        @{"XREFA_Author" link "libraries/xref.h/main" 133} (STRPTR) - specifies the author of this xreffile.

        @{"XREFA_Path" link "libraries/xref.h/main" 136} (STRPTR) - path to use for all entries in this xreffile.

    @{b}INPUTS@{ub}
        file (STRPTR) - file to create, if you specify only a filename
            without any path part, this file is created in the global xref-
            file directory.See XREFBA_XRefPath tag.
        taglist (struct @{"TagItem" link "AG:SysInc/utility/tagitem.h/main" 32} *) - pointer to an array of tagitems.
        tag1 (Tag) - first tag used in varargs stub.

    @{b}RESULTS@{ub}
        handle (struct @{"XRefFileHandle" link "libraries/xref.h/main" 34} *) - handle pointer or @{"NULL" link "AG:SysInc/exec/types.h/main" 79} for an
            failure

    @{b}SEE ALSO@{ub}
        @{"WriteXRefFileEntryA()" link "WriteXRefFileEntryA()"}, @{"CloseXRefFile()" link "CloseXRefFile()"}


@endnode
@node "FindXRefFile()" "xref.library/FindXRefFile()"

    @{b}NAME@{ub}
        FindXRefFile - find a xreffile with a given name

    @{b}SYNOPSIS@{ub}
        xreffile = FindXRefFile(name);
           D0                    A0

        struct @{"XRefFileNode" link "libraries/xref.h/main" 20} *FindXRefFile(STRPTR);

    @{b}FUNCTION@{ub}
        this function searches for xreffile with the given name. If there
        exists a xreffile with this name, it returns a pointer to it. This
        pointer is a handle for @{"GetXRefFileAttrsA()" link "GetXRefFileAttrsA()"}/@{"SetXRefFileAttrsA()" link "SetXRefFileAttrsA()"}.

    @{b}INPUTS@{ub}
        name (STRPTR) - name to search for

    @{b}RESULTS@{ub}
        xreffile (struct @{"XRefFileNode" link "libraries/xref.h/main" 20} *) - pointer to the xreffile. This is
            only a handle for the appropriate functions !

    @{b}SEE ALSO@{ub}
        @{"GetXRefFileAttrsA()" link "GetXRefFileAttrsA()"}, @{"SetXRefFileAttrsA()" link "SetXRefFileAttrsA()"}


@endnode
@node "GetXRefBaseAttrsA()" "xref.library/GetXRefBaseAttrsA()"

    @{b}NAME@{ub}
        GetXRefBaseAttrsA - get global xref.library attributes
        GetXRefBaseAttrs - varargs stub for GetXRefBaseAttrsA()

    @{b}SYNOPSIS@{ub}
        num = GetXRefBaseAttrsA(tagList);
         D0                        A0

        num = GetXRefBaseAttrs(Tag1,...);

        ULONG GetXRefBaseAttrsA(struct @{"TagItem" link "AG:SysInc/utility/tagitem.h/main" 32} *);

        ULONG GetXRefBaseAttrs(ULONG ,...);

    @{b}FUNCTION@{ub}
        This function gets global attributes of the xref.library. You must
        pass a pointer to the appropriate type for each Tag in the ti_Data
        field. See TAGS for the attributes.

    @{b}TAGS@{ub}
        @{"XREFBA_List" link "libraries/xref.h/main" 252} (struct @{"List" link "AG:SysInc/exec/lists.h/main" 20} *) - gets a pointer to the internal xref
            file list. If you want to step through the list you must lock
            the XRefBase via a @{"LockXRefBase()" link "LockXRefBase()"}/@{"UnlockXRefBase()" link "UnlockXRefBase()"} call pair.
            If you do not, the list may be corrupt, because another is
            changing the list via @{"XR_LoadXRef()" link "XR_LoadXRef()"}/@{"XR_ExpungeXRef()" link "XR_ExpungeXRef()"} calls.

        @{"XREFBA_LineLength" link "libraries/xref.h/main" 264} (UWORD) - gets the line length, which is used by
            the dynamic node to layout the page.

        @{"XREFBA_Columns" link "libraries/xref.h/main" 270} (UWORD) - gets the number of columns, which defines
            the layout of a page of a dynamic node

        @{"XREFBA_DefaultLimit" link "libraries/xref.h/main" 275} - (ULONG) gets default maximal number of matched
            xref entries by a @{"ParseXRef()" link "ParseXRef()"} call.This value will be overwritten
            by the @{"XREFA_Limit" link "libraries/xref.h/main" 113} tag for the @{"ParseXRef()" link "ParseXRef()"} function.

        @{"XREFBA_XRefDir" link "libraries/xref.h/main" 283} - (STRPTR) gets the default directory for all
            xreffiles.

    @{b}INPUTS@{ub}
        tagList (struct @{"TagItem" link "AG:SysInc/utility/tagitem.h/main" 32} *) - pointer to a @{"TagItem" link "AG:SysInc/utility/tagitem.h/main" 32} array
        Tag1 (ULONG) - first tag in the varargs stub

    @{b}RESULTS@{ub}
        num (ULONG) - number of tags processed

    @{b}SEE ALSO@{ub}
        @{"SetXRefBaseAttrsA()" link "SetXRefBaseAttrsA()"},@{"LoadXRefPrefs()" link "LoadXRefPrefs()"},@{"LockXRefBase()" link "LockXRefBase()"},@{"UnlockXRefBase()" link "UnlockXRefBase()"}


@endnode
@node "GetXRefConfigDir()" "xref.library/GetXRefConfigDir()"

    @{b}NAME@{ub}
        GetXRefConfigDir - returns the xref configuration path

    @{b}SYNOPSIS@{ub}
        GetXRefConfigDir(buffer,size);
                           A0    D0

        void GetXRefConfigDir(STRPTR ,ULONG );

    @{b}FUNCTION@{ub}
        returns in the given buffer , the current xref configuration 
        directory. If the buffer would overflow , it is truncated. Thus
        you should provide a buffer of a appropriate length for a path !

    @{b}INPUTS@{ub}
        buffer (STRPTR) - pointer to a memory area to hold the path
        size (ULONG) - number of bytes of the memory area

    @{b}RESULTS@{ub}
        none

    @{b}SEE ALSO@{ub}


@endnode
@node "GetXRefFileAttrsA()" "xref.library/GetXRefFileAttrsA()"

    @{b}NAME@{ub}
        GetXRefFileAttrsA - get some attributes of a given xreffile
        GetXRefFileAttrs - varargs stub for GetXRefFileAttrsA()

    @{b}SYNOPSIS@{ub}
        num = GetXRefFileAttrsA(xreffile,tagList);
         D0                        A0      A1

        num = GetXRefFileAttrs(xreffile,tag1,...);

        ULONG GetXRefFileAttrsA(struct @{"XRefFileNode" link "libraries/xref.h/main" 20} *,struct @{"TagItem" link "AG:SysInc/utility/tagitem.h/main" 32} *);

        ULONG GetXRefFileAttrs(struct @{"XRefFileNode" link "libraries/xref.h/main" 20} *,Tag ,...);

    @{b}FUNCTION@{ub}
        this function gets information about a given xreffile. The handle
        for the xreffile can you get via a call to @{"FindXRefFile()" link "FindXRefFile()"} or by
        stepping through the global xreffile list, which you can get with
        the @{"GetXRefBaseAttrsA()" link "GetXRefBaseAttrsA()"} function. This is the only way to get infor-
        mation about a xreffile without the name, which can be accessed in
        the ln_Name field of the @{"Node" link "AG:SysInc/exec/nodes.h/main" 22} (Perhaps only for displaying in a
        ListView).
        NOTE: You must provide a pointer to the appropriate type for each tag
        in the ti_Data field of the tagitem array.

    @{b}TAGS@{ub}
        @{"XREFA_Category" link "libraries/xref.h/main" 89} (STRPTR) - category of this xreffile

        @{"XREFA_Index" link "libraries/xref.h/main" 139} (BOOL) - indicates , if there exists an index array
            for all entries of this xreffile or not.

        @{"XREFA_Priority" link "libraries/xref.h/main" 92} (BYTE) - priority of this xreffile

        @{"XREFA_Lock" link "libraries/xref.h/main" 80} (BOOL) - returns, if this xreffile is locked or not.

        @{"XREFA_Name" link "libraries/xref.h/main" 123} (STRPTR) - returns a pointer to the xreffile name.

        @{"XREFA_VersTag" link "libraries/xref.h/main" 128} (STRPTR) - returns a pointer to the version string of
            this xreffile or @{"NULL" link "AG:SysInc/exec/types.h/main" 79}.

        @{"XREFA_Path" link "libraries/xref.h/main" 136} (STRPTR) - returns the global path for all entries in this
            xreffile.

        @{"XREFA_Length" link "libraries/xref.h/main" 147} (ULONG) - returns the number of bytes used for this
            xreffile.

    @{b}INPUTS@{ub}
        xreffile (struct @{"XRefFileNode" link "libraries/xref.h/main" 20} *) - handle for the xreffile
        tagList (struct @{"TagItem" link "AG:SysInc/utility/tagitem.h/main" 32} *) - tag array with tags you wish information
            for.
        tag1 (ULONG) first tag in the varargs stub.

    @{b}RESULTS@{ub}
        num (ULONG) - number of tags processed

    @{b}SEE ALSO@{ub}
        @{"FindXRefFile()" link "FindXRefFile()"}, @{"SetXRefFileAttrsA()" link "SetXRefFileAttrsA()"}


@endnode
@node "LoadXRefPrefs()" "xref.library/LoadXRefPrefs()"

    @{b}NAME@{ub}
        LoadXRefPrefs - load a prefs file for the xref.library

    @{b}SYNOPSIS@{ub}
        success = LoadXRefPrefs(file);
           D0                     A0

        ULONG LoadXRefPrefs(STRPTR );

    @{b}FUNCTION@{ub}
        loads the specified prefs file and sets up the xref.library
        attributes to the values given in this file.The file must be an ASCII
        text, which is line oriented.Each line is interpreted to one of the
        following templates :
            - AUTOOPEN/S,FILE/K/A,XREFPRI/N/K,LOCK/S,INDEX/S
            - AUTOLOAD/S,FILE/K/A,XREFPRI/N/K,LOCK/S,INDEX/S
            - MAINPAGE/S,LINELENGTH/N/K/A,COLUMNS/N/K/A
            - @{"CLEANUP" link "AG:SysInc/hardware/blit.h/main" 99}/S,FORCE/S
            - XREFDIR/S,DIR/K/A

        The AUTOOPEN-Line :

        This type of an entry may exists several times in a prefs file.
        It specifies the xreffile, which is opened during parsing of this
        file. The specified arguments are passed to the @{"XR_LoadXRef()" link "XR_LoadXRef()"}
        function, thus see this doc.

        The AUTOLOAD-Line :

        This type specifies xreffiles, which should be automatically loaded,
        if an entry wasn't found in the xreffiles in memory !

        The MAINPAGE-Line :

        This entry specifies the line length and the column number, which
        will be used for the "XRef-Library Main Page" and all dynamic nodes.
        Thus you can set these values appropriate to your screen/window
        resolution. This works only under V40 and above. In V39 and below all
        dynamic nodes have just one entry per line !.

        The CLEANUP-Line :

        If this line appears in a prefs file, all xreffiles are flushed
        form the memory. And if you specify the FORCE switch, all locked
        xreffiles are also flushed.

        The XREFPATH-Line :

        If you specify this line the path is used as the default xreffile
        path.

    @{b}INPUTS@{ub}
        file (STRPTR) - prefs file to load

    @{b}RESULTS@{ub}
        @{"TRUE" link "AG:SysInc/exec/types.h/main" 73} for success , @{"FALSE" link "AG:SysInc/exec/types.h/main" 76} to indicate an error (see @{"IoErr()" link "dos/IoErr()"} result for
        the reason) !

    @{b}SEE ALSO@{ub}
        @{"XR_LoadXRef()" link "XR_LoadXRef()"}, @{"XR_ExpungeXRef()" link "XR_ExpungeXRef()"}


@endnode
@node "LockXRefBase()" "xref.library/LockXRefBase()"

    @{b}NAME@{ub}
        LockXRefBase - locks the base of the xref.library

    @{b}SYNOPSIS@{ub}
        handle = LockXRefBase(key);
          D0                  D0

        ULONG LockXRefBase(ULONG);

    @{b}FUNCTION@{ub}
        This function locks the xref.library base. The key specifies, which
        internal resource of the xref.library should be locked. At the moment
        there is only a value of zero valid. This locks the whole library
        base. But in future it may exists more different resource types, thus
        you must pass zero at this time, to be compatible in future !!!

    @{b}INPUTS@{ub}
        key (ULONG) - key , which specify the internal resource to lock. Only
            zero is valid now.

    @{b}RESULTS@{ub}
        handle (ULONG) - handle to pass to the @{"UnlockXRefBase()" link "UnlockXRefBase()"} call

    @{b}SEE ALSO@{ub}
        @{"UnlockXRefBase()" link "UnlockXRefBase()"}, @{"GetXRefBaseAttrsA()" link "GetXRefBaseAttrsA()"}, @{"SetXRefBaseAttrsA()" link "SetXRefBaseAttrsA()"}


@endnode
@node "ParseXRef()" "xref.library/ParseXRef()"

    @{b}NAME@{ub}
        ParseXRef - parses the xref lists for a given pattern or name
        ParseXRefTags - varargs stub for ParseXRef

    @{b}SYNOPSIS@{ub}
        success = ParseXRef(string,tagList);
         D0                   A0     A1

        success = ParseXRefTags(string,tag1,...);

        ULONG ParseXRef(STRPTR ,struct @{"TagItem" link "AG:SysInc/utility/tagitem.h/main" 32} *);

        ULONG ParseXRefTags(STRPTR ,Tag ,...);

    @{b}FUNCTION@{ub}
        this function parses the specified xref lists for a given pattern
        or name, according to the @{"XREFA_Matching" link "libraries/xref.h/main" 108} tag value. If this function
        finds a xref entry, the callback function provided by XREFA_ParseHook
        is called with PM_XREF message. This callback function is called in
        2.0 standard @{"Hook" link "AG:SysInc/utility/hooks.h/main" 28} way :
           func(REGA0 struct @{"Hook" link "AG:SysInc/utility/hooks.h/main" 28} *hook,REGA2 struct @{"XRefFileNode" link "libraries/xref.h/main" 20} *xrnode,
                REGA1 struct pmXRef *msg);

    @{b}INPUTS@{ub}
        string (STRPTR) - string or pattern to search for
        tagList (struct @{"TagItem" link "AG:SysInc/utility/tagitem.h/main" 32} *) - @{"TagItem" link "AG:SysInc/utility/tagitem.h/main" 32} list with required/optional
            arguments

    @{b}TAGS@{ub}
        @{"XREFA_XRefHook" link "libraries/xref.h/main" 101} (struct @{"Hook" link "AG:SysInc/utility/hooks.h/main" 28} *) - pointer to a hook structure with
            the callback function, which is called if a xref entry matches
            or a new xref file or file is parsed.If you return a non zero
            value, the parse is suspended, if you return zero the parse
            goes on. The hook function must support at least the @{"XRM_XREF" link "libraries/xref.h/main" 295}
            message. Currently the following attributes are used in the
            msg->xref_Attrs field :

                @{"ENTRYA_Type" link "libraries/xref.h/main" 183}, @{"ENTRYA_Name" link "libraries/xref.h/main" 189}, @{"ENTRYA_Line" link "libraries/xref.h/main" 192}, @{"ENTRYA_File" link "libraries/xref.h/main" 186},
                @{"ENTRYA_NodeName" link "libraries/xref.h/main" 195}, @{"XREFA_Path" link "libraries/xref.h/main" 136}, @{"XREFA_Name" link "libraries/xref.h/main" 123}.

            THIS TAG IS @{fg highlight}REQUIRED@{fg text} !

        @{"XREFA_Category" link "libraries/xref.h/main" 89} (STRPTR) - category pattern string to specify the
            category for the search. If no category is specified all
            categories matches.

        @{"XREFA_CategoryParsed" link "libraries/xref.h/main" 164} (STRPTR) - a parsed category pattern using the
            @{"ParsePatternNoCase()" link "dos/ParsePatternNoCase()"} function. This will speedup parsing, if you
            call this function a lot with the same category pattern.

        @{"XREFA_File" link "libraries/xref.h/main" 118} (STRPTR) - file to parse. The name must be a real path,
            because the comparision is made by the lock to the file.This 
            tag overrides the @{"XREFA_Category" link "libraries/xref.h/main" 89} tag.

        @{"XREFA_Limit" link "libraries/xref.h/main" 113} (ULONG) - maximal number of matched xref entries. This
            tag overwrites the DefaultLimit of the library base.

        @{"XREFA_Matching" link "libraries/xref.h/main" 108} (ULONG) - mode for the matching mechanism one of the
            following modes should specified :
              @{"XREFMATCH_PATTERN_CASE" link "libraries/xref.h/main" 209}       - uses @{"MatchPattern()" link "dos/MatchPattern()"} (default)
              @{"XREFMATCH_PATTERN_NOCASE" link "libraries/xref.h/main" 213}     - uses @{"MatchPatternNoCase()" link "dos/MatchPatternNoCase()"}
              @{"XREFMATCH_COMPARE_CASE" link "libraries/xref.h/main" 217}       - uses strcmp()
              @{"XREFMATCH_COMPARE_NOCASE" link "libraries/xref.h/main" 219}     - uses @{"Stricmp()" link "utility/Stricmp()"}
              @{"XREFMATCH_COMPARE_NUM_CASE" link "libraries/xref.h/main" 221}   - uses strncmp(string,xrefentry,
                                                          strlen(string))
              @{"XREFMATCH_COMPARE_NUM_NOCASE" link "libraries/xref.h/main" 223} - uses @{"Strnicmp" link "utility/Strnicmp()"}(string,xrefentry,
                                                           strlen(string))

        @{"XREFA_AcceptTypes" link "libraries/xref.h/main" 158} (ULONG *) - ~0 terminated array, which defines
            explicitly the types, which should be used. For example the
            array ULONG mytypes[] = {@{"XREFT_GENERIC" link "libraries/xref.h/main" 48},@{"XREFT_FUNCTION" link "libraries/xref.h/main" 49},~0} accept
            only entries of the these two types.

        @{"XREFA_RejectTypes" link "libraries/xref.h/main" 152} (ULONG *) - ~0 terminated array, which defines
            types which should not be used. For example the array
            ULONG mytypes2[] = {@{"XREFT_TYPEDEF" link "libraries/xref.h/main" 55},@{"XREFT_FIELD" link "libraries/xref.h/main" 54},~0} excludes these
            types.

    @{b}RESULTS@{ub}
        @{"TRUE" link "AG:SysInc/exec/types.h/main" 73} for success, that the function has parsed all xref nodes with
        the given parameters. @{"FALSE" link "AG:SysInc/exec/types.h/main" 76} for an error code see @{"IoErr()" link "dos/IoErr()"} to get the
        reason.

    @{b}NOTES@{ub}
        this function needs at least the tag XREFA_ParseHook, to get an valid
        hook function pointer to call for any messages.

    @{b}SEE ALSO@{ub}
        @{"XR_LoadXRef()" link "XR_LoadXRef()"}, @{"dos.library/ParsePattern()" link "dos/ParsePattern()"}, @{"dos.library/MatchPattern()" link "dos/MatchPattern()"}
        
        @{"dos.library/ParsePatternNoCase()" link "dos/ParsePatternNoCase()"}, @{"dos.library/MatchPatternNoCase()" link "dos/MatchPatternNoCase()"},
        @{"utility.library/Stricmp()" link "utility/Stricmp()"}, @{"utility.library/Strnicmp()" link "utility/Strnicmp()"}, c.lib/strcmp()
        
        c.lib/strncmp()


@endnode
@node "RemoveXRefDynamicNode()" "xref.library/RemoveXRefDynamicNode()"

    @{b}NAME@{ub}
        RemoveXRefDynamicNode - removes the xref.library dynamic node host

    @{b}SYNOPSIS@{ub}
        success = RemoveXRefDynamicNode();

        BOOL RemoveXRefDynamicNode(void);

    @{b}FUNCTION@{ub}
        this removes the previously installed xref.library dynamic node host
        from the amigaguide system.

    @{b}INPUTS@{ub}
        none

    @{b}RESULTS@{ub}
        @{"TRUE" link "AG:SysInc/exec/types.h/main" 73} , if the dynamic node is removed. @{"FALSE" link "AG:SysInc/exec/types.h/main" 76} if not.

    @{b}SEE ALSO@{ub}
        @{"AddXRefDynamicNode()" link "AddXRefDynamicNode()"}


@endnode
@node "SetXRefBaseAttrsA()" "xref.library/SetXRefBaseAttrsA()"

    @{b}NAME@{ub}
        SetXRefBaseAttrsA - set global attributes of the xref.library
        SetXRefBaseAttrs - varargs stub for SetXRefBaseAttrsA()

    @{b}SYNOPSIS@{ub}
        num = SetXRefBaseAttrsA(tagList);
         D0                    A0

        num = SetXRefBaseAttrs(Tag1,...);

        ULONG SetXRefBaseAttrsA(struct @{"TagItem" link "AG:SysInc/utility/tagitem.h/main" 32} *);

        ULONG SetXRefBaseAttrs(ULONG,...);

    @{b}FUNCTION@{ub}
        This function sets some global attributes of the xref.library.
        Which attributes are changeable see TAGS.

    @{b}TAGS@{ub}
        @{"XREFBA_LineLength" link "libraries/xref.h/main" 264} - (UWORD) sets number of characters per line for
            the dynamic node. In conjunction with the @{"XREFBA_Columns" link "libraries/xref.h/main" 270}
            attribute you can specify your individual page layout.

        @{"XREFBA_Columns" link "libraries/xref.h/main" 270} - (UWORD) sets number of columns for the dynamic node.
            If you specify for example 3 columns and 90 chars per line, the
            dynamic node uses 3 columns with 30 characters.

        @{"XREFBA_DefaultLimit" link "libraries/xref.h/main" 275} - (ULONG) sets default maximal number of matched
            xref entries by a @{"ParseXRef()" link "ParseXRef()"} call.This value will be overwritten
            by the @{"XREFA_Limit" link "libraries/xref.h/main" 113} tag for the @{"ParseXRef()" link "ParseXRef()"} function.

        @{"XREFBA_XRefDir" link "libraries/xref.h/main" 283} - (STRPTR) sets the default dir for all xreffiles.
            This dir is used as the current directory, during the
            @{"XR_LoadXRef()" link "XR_LoadXRef()"} call.Thus if you use only filenames without any
            dir parts all xreffile can be placed in this directory.
            This tag changes the XREFDIR env variable !

    @{b}INPUTS@{ub}
        tagList (struct @{"TagItem" link "AG:SysInc/utility/tagitem.h/main" 32} *) - pointer to a @{"TagItem" link "AG:SysInc/utility/tagitem.h/main" 32} array
        Tag1 (ULONG) - first tag in the varargs stub

    @{b}RESULTS@{ub}
        num (ULONG) - number of tags processed

    @{b}NOTE@{ub}
        You don't need to call @{"LockXRefBase()" link "LockXRefBase()"}/@{"UnlockXRefBase()" link "UnlockXRefBase()"} pair. This
        is done by this function internally.

    @{b}SEE ALSO@{ub}
        @{"GetXRefBaseAttrsA()" link "GetXRefBaseAttrsA()"}, @{"LoadXRefPrefs()" link "LoadXRefPrefs()"}


@endnode
@node "SetXRefFileAttrsA()" "xref.library/SetXRefFileAttrsA()"

    @{b}NAME@{ub}
        SetXRefFileAttrsA - set xreffile attributes
        SetXRefFileAttrs - varargs stub for SetXRefFileAttrsA

    @{b}SYNOPSIS@{ub}
        num = SetXRefFileAttrsA(xreffile,taglist);
         D0                        A0      A1

        num = SetXRefFileAttrs(xreffile,tag1,...);

        ULONG SetXRefFileAttrsA(struct @{"XRefFileNode" link "libraries/xref.h/main" 20} *,struct @{"TagItem" link "AG:SysInc/utility/tagitem.h/main" 32} *);

        ULONG SetXRefFileAttrs(struct @{"XRefFileNode" link "libraries/xref.h/main" 20} *,Tag ,...);

    @{b}FUNCTION@{ub}
        this function sets some attributes of the given xreffile. The handle
        for the xreffile can you get via a call to @{"FindXRefFile()" link "FindXRefFile()"} or by
        stepping through the global xreffile list, which you can get with
        the @{"GetXRefBaseAttrsA()" link "GetXRefBaseAttrsA()"} function.
        The only way to change attributes of a xreffile is to call this
        function ! See TAGS for the attributes to be changed.

    @{b}TAGS@{ub}
        @{"XREFA_Priority" link "libraries/xref.h/main" 92} (BYTE) - new priority of this xreffile

        @{"XREFA_Index" link "libraries/xref.h/main" 139} (BOOL) - if set to @{"TRUE" link "AG:SysInc/exec/types.h/main" 73}, this function tries to allocate
            an index buffer and build an index for binary search.If this
            fails, this tag is interpreted as not processed.
            If you set this tag to @{"FALSE" link "AG:SysInc/exec/types.h/main" 76}, a previously allocated index buffer
            is deallocated.

        @{"XREFA_Lock" link "libraries/xref.h/main" 80} (UWORD) - if set to @{"XREF_LOCK" link "libraries/xref.h/main" 234}, this xreffile is locked,
            thus it isn't removed during a memory flush. If set to 
            @{"XREF_UNLOCK" link "libraries/xref.h/main" 229}, the lock is removed.

    @{b}INPUTS@{ub}
        xreffile (struct @{"XRefFileNode" link "libraries/xref.h/main" 20} *) - handle for the xreffile
        tagList (struct @{"TagItem" link "AG:SysInc/utility/tagitem.h/main" 32} *) - tag array with tags you wish to set
        tag1 (ULONG) - first tag in the varargs stub.

    @{b}RESULTS@{ub}
        num (ULONG) - number of tags processed

    @{b}SEE ALSO@{ub}
        @{"FindXRefFile()" link "FindXRefFile()"}, @{"GetXRefFileAttrsA()" link "GetXRefFileAttrsA()"}


@endnode
@node "UnlockXRefBase()" "xref.library/UnlockXRefBase()"

    @{b}NAME@{ub}
        UnlockXRefBase - unlocks the xref.library base

    @{b}SYNOPSIS@{ub}
        UnlockXRefBase(handle);
                         D0

        void UnlockXRefBase(ULONG);

    @{b}FUNCTION@{ub}
        This function unlocks the xref.library base, which was locked via a
        previously @{"LockXRefBase()" link "LockXRefBase()"} call. You must pass the handle you get from
        the @{"LockXRefBase()" link "LockXRefBase()"} call.This handle specifies the internal resource
        to unlock.

    @{b}INPUTS@{ub}
        handle (ULONG) - handle from a call to @{"LockXRefBase()" link "LockXRefBase()"}

    @{b}RESULTS@{ub}
        none

    @{b}SEE ALSO@{ub}
        @{"LockXRefBase()" link "LockXRefBase()"}, @{"GetXRefBaseAttrsA()" link "GetXRefBaseAttrsA()"}, @{"SetXRefBaseAttrsA()" link "SetXRefBaseAttrsA()"}


@endnode
@node "WriteXRefFileEntryA()" "xref.library/WriteXRefFileEntryA()"

    @{b}NAME@{ub}
        WriteXRefFileEntryA - writes a xref entry in the xreffile
        WriteXRefFileEntry - varargs stub for WriteXRefFileEntryA

    @{b}SYNOPSIS@{ub}
        success = WriteXRefFileEntryA(handle,taglist);
          D0                           A0     A1

        success = WriteXRefFileEntry(handle,tag1,...);

        ULONG WriteXRefFileEntryA(struct @{"XRefFileHandle" link "libraries/xref.h/main" 34} *,struct @{"TagItem" link "AG:SysInc/utility/tagitem.h/main" 32} *);

        ULONG WriteXRefFileEntry(struct @{"XRefFileHandle" link "libraries/xref.h/main" 34} *,Tag ,...);

    @{b}FUNCTION@{ub}
        this function writes a xref entry in the specified xreffile. The
        entries are fully buffered at the moment, so the entries are only
        written to disk, if you call @{"CloseXRefFile()" link "CloseXRefFile()"}.The entries are sorted
        in case-sensetive mode. The file table are build automatically.
        If in the current xreffile exists a entry with the exact ENTRY_Name
        and ENTRY_File, the function fails with the @{"IoErr()" link "dos/IoErr()"} set to
        @{"ERROR_OBJECT_EXISTS" link "AG:SysInc/dos/dos.h/main" 194} !

    @{b}TAGS@{ub}
        @{"ENTRYA_Type" link "libraries/xref.h/main" 183} (ULONG) - specifies the type of the entry. This tag is
            @{fg highlight}REQUIRED@{fg text}. Valid types for now are :
                @{"XREFT_GENERIC" link "libraries/xref.h/main" 48} - generic (AmigaGuide node)
                @{"XREFT_FUNCTION" link "libraries/xref.h/main" 49} - a library function
                @{"XREFT_COMMAND" link "libraries/xref.h/main" 50} - a device command
                @{"XREFT_INCLUDE" link "libraries/xref.h/main" 51} - a include file
                @{"XREFT_MACRO" link "libraries/xref.h/main" 52} - a define macro
                @{"XREFT_STRUCT" link "libraries/xref.h/main" 53} - a structure definition
                @{"XREFT_FIELD" link "libraries/xref.h/main" 54} - a field name of a structure
                @{"XREFT_TYPEDEF" link "libraries/xref.h/main" 55} - a typedef
                @{"XREFT_DEFINE" link "libraries/xref.h/main" 56} - a normal define

        @{"ENTRYA_Name" link "libraries/xref.h/main" 189} (STRPTR) - specifies the name of the entry. This tag is
            @{fg highlight}REQUIRED@{fg text} !

        @{"ENTRYA_File" link "libraries/xref.h/main" 186} (STRPTR) - specifies the relative path for the file
            including the filename.

        @{"ENTRYA_Line" link "libraries/xref.h/main" 192} (ULONG) - specifies the line number in the file.

        @{"ENTRYA_NodeName" link "libraries/xref.h/main" 195} (STRPTR) - specifies the amigaguide node name. If
            this isn't set the @{"ENTRYA_Name" link "libraries/xref.h/main" 189} will be used for the nodename.

        @{"ENTRYA_CheckMode" link "libraries/xref.h/main" 198} (ULONG) - one of the following modes :
                @{"ENTRYCHECK_NONE" link "libraries/xref.h/main" 203} : include the entry without any checking
                @{"ENTRYCHECK_NAME" link "libraries/xref.h/main" 204} : include the entry only, if no entry exists
                                  with this name
                @{"ENTRYCHECK_FILE" link "libraries/xref.h/main" 205} : include the entry, if there exists a entry
                                  with this name, but in a different file !
            default is : @{"ENTRYCHECK_NAME" link "libraries/xref.h/main" 204} !

    @{b}INPUTS@{ub}
        handle (struct @{"XRefFileHandle" link "libraries/xref.h/main" 34} *) - handle pointer returned from
            @{"CreateXRefFileA()" link "CreateXRefFileA()"}
        taglist (struct @{"TagItem" link "AG:SysInc/utility/tagitem.h/main" 32} *) - pointer to th e first element of the
            tagitem array
        tag1 (Tag) - first tag in the varargs stub

    @{b}RESULTS@{ub}
        success (ULONG) - @{"TRUE" link "AG:SysInc/exec/types.h/main" 73} for success , @{"FALSE" link "AG:SysInc/exec/types.h/main" 76} for a failure reason see
            @{"IoErr()" link "dos/IoErr()"}.

    @{b}SEE ALSO@{ub}
        @{"CreateXRefFileA()" link "CreateXRefFileA()"}, @{"CloseXRefFile()" link "CloseXRefFile()"}


@endnode
@node "XR_ExpungeXRef()" "xref.library/XR_ExpungeXRef()"

    @{b}NAME@{ub}
        XR_ExpungeXRef - expunge a given or all xreffile from memory
        XR_ExpungeXRefTags - varargs stub for XR_ExpungeXRef()

    @{b}SYNOPSIS@{ub}
        num = XR_ExpungeXRef(tagList);
                                A0

        num = XR_ExpungeXRefTags(tag1,...);

        ULONG XR_ExpungeXRef(struct @{"TagItem" link "AG:SysInc/utility/tagitem.h/main" 32} *);

        ULONG XR_ExpungeXRefTags(ULONG ,...);

    @{b}FUNCTION@{ub}
        expunges a given or all xreffiles from memory. This must specified
        via TAGS. A @{"NULL" link "AG:SysInc/exec/types.h/main" 79} pointer for the tagList means, that all xreffiles
        should be expunged !

    @{b}INPUTS@{ub}
        tagList (struct @{"TagItem" link "AG:SysInc/utility/tagitem.h/main" 32} *) - tags, which specify which xreffile(s)
            should be expunged

    @{b}TAGS@{ub}
        @{"XREFA_Category" link "libraries/xref.h/main" 89} (STRPTR) - expunge all xreffiles, which belongs to the
            specified category (pattern) !

        @{"XREFA_File" link "libraries/xref.h/main" 118} (STRPTR) - expunge only the given file, if you have setup
            the global XRefPath, this can be only the filename.

        @{"XREFA_Lock" link "libraries/xref.h/main" 80} (ULONG) - if the data value if @{"XREF_UNLOCK" link "libraries/xref.h/main" 229} expunge also
            xreffiles, which are locked

        @{"XREFA_XRefHook" link "libraries/xref.h/main" 101} (struct @{"Hook" link "AG:SysInc/utility/hooks.h/main" 28} *) - callback function to confirm the
            expunge of the given xreffile. The function is called in the
            Amiga 2.0 standard way with the object pointer to the
            @{"XRefFileNode" link "libraries/xref.h/main" 20} structure (struct @{"XRefFileNode" link "libraries/xref.h/main" 20} *) and the message
            @{"XRM_EXPUNGE" link "libraries/xref.h/main" 297} : (struct @{"xrmExpunge" link "libraries/xref.h/main" 330} *) !

    @{b}RESULTS@{ub}
        number of expunged files

    @{b}SEE ALSO@{ub}
        @{"XR_LoadXRef()" link "XR_LoadXRef()"}, @{"GetXRefFileAttrsA()" link "GetXRefFileAttrsA()"}, @{"SetXRefFileAttrsA()" link "SetXRefFileAttrsA()"}


@endnode
@node "XR_LoadXRef()" "xref.library/XR_LoadXRef()"

    @{b}NAME@{ub}
        XR_LoadXRef - load a xreffile into the memory
        XR_LoadXRefTags - varargs stub for XR_LoadXRef()

    @{b}SYNOPSIS@{ub}
        xrefnode = XR_LoadXRef(file,tagList);
         D0                    A0     A1
        
        xrefnode = XR_LoadXRefTags(file,tag1,...);

        struct @{"XRefFileNode" link "libraries/xref.h/main" 20} *XR_LoadXRef(STRPTR ,struct @{"TagItem" link "AG:SysInc/utility/tagitem.h/main" 32} *);

        struct @{"XRefFileNode" link "libraries/xref.h/main" 20} *XR_LoadXRefTags(STRPTR,ULONG,...);

    @{b}FUNCTION@{ub}
        loads the specified file in the memory and adds it to the global
        xref list in the library.

    @{b}INPUTS@{ub}
        file (STRPTR) - file to load into the memory
        tagList (struct @{"TagItem" link "AG:SysInc/utility/tagitem.h/main" 32} *) - pointer to a @{"TagItem" link "AG:SysInc/utility/tagitem.h/main" 32} array with more
            arguments see TAGS.

    @{b}TAGS@{ub}
        @{"XREFA_Category" link "libraries/xref.h/main" 89} (STRPTR) - category for the xreffile, if no category
            is specified, it searches for a category definition in the
            xreffile. If there is also no specified, then this file is a
            global xreffile and is parsed every time @{"ParseXRef()" link "ParseXRef()"} is called.

        @{"XREFA_Priority" link "libraries/xref.h/main" 92} (BYTE) - priority for this xreffile. This priority is
            used to insert the xreffile in the global xref list using the
            @{"exec.library/Enqueue()" link "exec/Enqueue()"} function.Thus if a xreffile has a high
            priority it is parsed before any xreffile with lower priority.

        @{"XREFA_Lock" link "libraries/xref.h/main" 80} (ULONG) - You can pass @{"XREF_LOCK" link "libraries/xref.h/main" 234} or @{"XREF_UNLOCK" link "libraries/xref.h/main" 229} here.
            If you pass @{"XREF_LOCK" link "libraries/xref.h/main" 234}, this xreffile is locked and can be removed
            only by a @{"XR_ExpungeXRef()" link "XR_ExpungeXRef()"} call with the @{"XREF_UNLOCK" link "libraries/xref.h/main" 229} value. Or
            by changing the lock mode via a @{"SetXRefFileAttrsA()" link "SetXRefFileAttrsA()"} call.
            If the xreffile is locked it can't removed by a memory flush !!!

        @{"XREFA_CustomHook" link "libraries/xref.h/main" 95} (struct @{"Hook" link "AG:SysInc/utility/hooks.h/main" 28} *) - callback function to handle a
            specified xreffile. This is used if someone has a own xreffile
            format !
            Not implemented yet !

        @{"XREFA_File" link "libraries/xref.h/main" 118} (STRPTR) - overwrites the filename from the first argument

        @{"XREFA_Name" link "libraries/xref.h/main" 123} (STRPTR) - name of the xreffile, this name is used instead
            of the filename

        @{"XREFA_Index" link "libraries/xref.h/main" 139} (BOOL) - if @{"TRUE" link "AG:SysInc/exec/types.h/main" 73}, this function tries to allocate an
            index buffer for all entries. So the if this is going allright,
            each search function uses the binary search algorithm. If it is
            @{"FALSE" link "AG:SysInc/exec/types.h/main" 76} it deallocates this index buffer and the search is then
            sequential.

        @{"XREFA_XRefHook" link "libraries/xref.h/main" 101} (struct @{"Hook" link "AG:SysInc/utility/hooks.h/main" 28} *) - callback function to notify, that
            the given xreffile was loaded.With object (struct @{"XRefFileNode" link "libraries/xref.h/main" 20} *)
            and message @{"XRM_LOAD" link "libraries/xref.h/main" 298}: (struct @{"xrmLoad" link "libraries/xref.h/main" 338} *) !

    @{b}RESULTS@{ub}
        @{"NULL" link "AG:SysInc/exec/types.h/main" 79} for a failure (see @{"IoErr()" link "dos/IoErr()"} for the reason),otherwise the pointer
        to the @{"XRefFileNode" link "libraries/xref.h/main" 20} structure !

        Special error codes :

        @{"ERROR_OBJECT_WRONG_TYPE" link "AG:SysInc/dos/dos.h/main" 202} - indicates , that the given file has not the
            right fileformat (wrong fileformat version) !

        @{"ERROR_NO_MORE_ENTRIES" link "AG:SysInc/dos/dos.h/main" 217} - indicates , that the given file has no
            entries. Thus this file is obsolete !

    @{b}SEE ALSO@{ub}
        @{"XR_ExpungeXRef()" link "XR_ExpungeXRef()"}, @{"ParseXRef()" link "ParseXRef()"}, @{"SetXRefFileAttrsA()" link "SetXRefFileAttrsA()"}, 
        @{"GetXRefFileAttrsA()" link "GetXRefFileAttrsA()"}, @{"libraries/xref.h" link "libraries/xref.h/main"}


@endnode
