@database "freedbenglish"
@index "Functions"

@Node "Main" "freedb 3.1"

    @{u}@{b}freedb@{ub} 3.1 by Alfonso Ranieri@{uu}

    1. @{"Introduction" LINK "Introduction"}
    2. @{"Author      " LINK "Author"}
    3. @{"WRID        " LINK "WRID"}
    4. @{"Terms       " LINK "Terms"}
    5. @{"Bugs        " LINK "Bugs"}
    6. @{"Functions   " LINK "Functions"}

@EndNode

@Node "Introduction" "freedb Introduction"

  @{u}@{b}Introduction@{ub}@{uu}

    The library may be used to retreive CD-ROM discs
    information using freedb standards.

    For information about freedb go to
    http://www.freedb.org .

    The freedb protocol stores discs information
    in ascii files.

    Locally these files reside in drawers called
    categories.

    The defined categories are:
      - misc
      - blues
      - classical
      - country
      - data
      - folk
      - jazz
      - newage
      - reggae
      - rock
      - soundtrack

    The files are named with the DiscID of the disc
    they rappresent. A DiscID is a 8 digits hex number.
    The computation of the DiscID is basedd upon the
    Table Of Contents (TOC) of the CD-ROM disc.

    While two discs may have the same DiscID, discs in
    the same category have different DiscID.

    This means that a couple <Categ,DiscID> may rappresent
    an unique CD-ROM disc.

    Locally, the categories are stored as subdirectories of
    a drawer, FreeDB: by defaults.

    While freedb.library let the user search and download
    discs information from a freedb server, its ARexx
    interface just offers local support.

@EndNode

@Node "Author" "freedb Author"

  @{u}@{b}Author@{ub}@{uu}


    I am @{i}Alfonso Ranieri@{ui}

    My e-mail address is @{i}alforan@tin.it@{ui}

    You can find last version of this library at my home page:
    @{i}http://web.tiscalinet.it/amiga/freedb@{ui}

@EndNode

@Node "WRID" "freedb Warning, Requirements, Installation and Distribution"

  @{u}@{b}Warning, Requirements, Installation and Distribution@{ub}@{uu}


    Warning
        THIS SOFTWARE AND INFORMATION ARE PROVIDED @{i}AS IS@{ui}.
        ALL USE IS AT YOUR OWN RISK, AND NO LIABILITY OR
        RESPONSIBILITY IS ASSUMED. NO WARRANTIES ARE MADE.

    Requirements
        The library needs AmigaOS, version 3 or higher.

    Installation
        Use the installation script.

    Distribution
        @{u}freedb.library is destributed under the@{uu}
        @{u}GNU Public Licence (GPL) version 2.@{uu}

@EndNode

@Node "Terms" "freedb Terms"

  @{u}@{b}Terms@{ub}@{uu}


    The main terms used are:

      - @{b}stem@{ub} or @{b}stemName@{ub}
        Valid ARexx variable name e.g. var, var.0, var.name

      - @{b}DiscInfo@{ub}
        Disc information. A stem with set the fields:

          . NumTracks (integral number)
            The number of the tracks of the disc

          . Year (integral number)
            The year the disc was created

          . Categ (string)
            The categ the disc belongs to

          . Genre (string)
            The musical genre of the disc

          . Title (string)
            The title of the disc

          . Artist (string)
            The author of the disc

          . PlayOrder (string)
            Tracks play order

          . MultiArtist (boolean)
            The disc is multi artist

          . Extd (string)
            Extended information

          . i.Title (string)
            The title of the i-th track (i=0,...,NumTracks-1)

          . i.Artist (string)
            The author of the i-th track (i=0,...,NumTracks-1)

          . i.Extd (string)
            Extended information about the i-th track (i=0,...,NumTracks-1)

      - @{b}TOC@{ub}
        Table Of Contents. A stem with set the fields:

          . FirstTrack (integral number)
            The first track

          . LastTack (integral number)
            The last track

          . StartAddr (integral number)
            The start address in frames (1 frame = 1/75 second)
            of the first track

          . EndAddr (integral number)
            The end address in frames of the last track

          . Frames (integral number)
            Total frames of the disc

          . Min (integral number)
          . Sec (integral number)
          . Frame (integral number)
            Total time of the disc in MSF format

          . NumTracks (integral number)
            Number of tracks

          . i.Track (integral number)
            The number of the i-th track (i=0,...,NumTracks-1)

          . i.StartAddress (integral number)
            The start address in frames of the i-th track

          . i.EndAddress (integral number)
            The end address in frames of the i-th track

          . i.Frames (integral number)
            The total frames of the i-th track

          . i.StartMin (integral number)
          . i.StartSec (integral number)
          . i.StartFrame (integral number)
            The start address in MSF format of the i-th track

          . i.EndMin (integral number)
          . i.EndSec (integral number)
          . i.EndFrame (integral number)
            The end address in MSF format of the i-th track

          . i.Min (integral number)
          . i.Sec (integral number)
          . i.Frame (integral number)
            The time of the i-th track in MSF format

          . Adr (boolean)
          . Audio (boolean)
          . CopyPerm (boolean)
          . PreEmphasys (boolean)
          . FourChannel (boolean)
            Flags for the i-th track

      - @{b}Types of arguments:@{ub}
          . D    Any data    --    --
          . N    Numeric     /N    ARexx integral number
          . S    Symbol      /S    ARexx valid symbol
          . V    StemName    /V    As S but with length<32
          . O    StemName    /O    As V but maybe "" also

@EndNode

@Node "Functions" "freedb Functions"

  @{u}@{b}Functions@{ub}@{uu}

    @{"FreeDBCreateApp   " LINK "FreeDBCreateApp"}
    @{"FreeDBGetlocalDisc" LINK "FreeDBGetlocalDisc"}
    @{"FreeDBGetString   " LINK "FreeDBGetString"}
    @{"FreeDBMatch       " LINK "FreeDBMatch"}
    @{"FreeDBTOC         " LINK "FreeDBTOC"}
    @{"help              " LINK "help"}

@EndNode

@Node "FreeDBCreateAPP" "freedb Functions - FreeDBCreateAPP"

  @{b}FreeDBCreateAPP@{ub} - creates an istance of FreeDB.

  @{b}Synopsis@{ub}
    call FreeDBCreateAPP(attrs)
    <attrs/V>

  @{b}Function@{ub}
    Creates n istance of FreeDB.

    @{i}attrs@{ui} is a stem where you may set the fields:

      - Device (string)
        A device name, e.g. "atapi.device"

      - DeviceName (string)
        A mounted device name, e.g. "CD0"

      - Unit (integral number)
        Unit for Device

      - Lun (integral number)
        Logical unit number

      - Prg (string)
        The program that is creating the istance of FreeDB

      - Ver (string)
        The version of the program that is creating the
        istance of FreeDB

      - UseSpace (boolean)
        Use Space pic if any

      - NoRequester (boolean)
        Don't show requester when lockin RootDir

      - GetDisc (boolean)
        Immediatly get disc

      - Local (boolean)
        If GetDisc, just look in he local cache

      - Remote (boolean)
        If GetDisc, ignore the local cache

  @{b}Inputs@{ub}
    attrs - a stem here to define attributes

  @{b}Result@{ub}
    none

@EndNode

@Node "FreeDBGetlocalDisc" "freedb Functions - FreeDBGetlocalDisc"

  @{b}FreeDBGetlocalDisc@{ub} - looks for a disc

  @{b}Synopsis@{ub}
    res=FreeDBGetlocalDisc(stem,device|DiscID,categ)
    <stem/V>,[device|DiscID],[categ]

  @{b}Function@{ub}
    Look up a disc in the local cache.

    If @{i}device@{ui} is supplied and it is a 8 digits valid hex number,
    it is considereed to be the DiscID of the disc to look for,
    otherise it is considered a mounted device name (e.g. "CD0").

    If you have a device named as a valid 8 digits hex number
    (e.g. "CD0000000"), just put a ":" at the end of the name
    ("CD0000000:").

    If @{i}categ@{ui} is supplied it is considered the categ the disc
    belongs to.

    How @{i}stem@{ui} is set depends on the result:

      - If res is 0, a disc was found in the local caches
        and stem is set as a DiscInfo

      - If res is 75, multi matches was found in the local
        cache and stem is set as:

          - NUM  (integral number)
            Number of the found entries

          - i.DiscID (string)
            DiscID of the i-th entry (i=0,...NUM-1)

          - i.Categ (string)
            Category

          - i.Title (string)
            Title

          - i.Artist (string)
            Artist

     - otherwise res is a freedb.library error.

  @{b}Inputs@{ub}
    stem   - where to store results
    device - see above
    categ  - see above

  @{b}Result@{ub}
    res - see above

@EndNode

@Node "FreeDBGetString" "freedb Functions - FreeDBGetString"

  @{b}FreeDBGetString{ub} - gets a localized string

  @{b}Synopsis@{ub}
    string=FreeDBGetString(id)
    <id/N>

  @{b}Function@{ub}
    Returns a freedb.library localized string.

  @{b}Inputs@{ub}
    id - the id of the string

  @{b}Result@{ub}
    string - a localized string

@EndNode

@Node "FreeDBMatch" "freedb Functions - FreeDBMatch"

  @{b}FreeDBMatch@{ub} - founds matches

  @{b}Synopsis@{ub}
    call FreeDBMatch(attrs)
    <attrs/V>

  @{b}Function@{ub}
    Finds entries in the local caches that match
    the patters defined in @{i}attrs@{ui}.

    In @{i}attrs@{ui} you my define the fields:

      - DiscID (string)
        An AmigaDOS pattern: only entries with the DiscID
        matching this are returned

      - Title (string)
        An AmigaDOS pattern: only entries with the Title
        matching this are returned

      - Artist (string)
        An AmigaDOS pattern: only entries with the Artist
        matching this are returned

      - TTitle (string)
        An AmigaDOS pattern: only entries with the a track
        title matching this are returned

    The function writes in stem:

      - NUM (integral number)
        The number of the entries found

      - .i set as a DiscInfo

  @{b}Inputs@{ub}
    stem - where supply filters and where thee function
           writes found entries

  @{b}Result@{ub}
    none

@EndNode

@Node "FreeDBTOC" "freedb Functions - FreeDBTOC"

  @{b}FreeDBTOC@{ub} - reads the TOC of a disc

  @{b}Synopsis@{ub}
    res=FreeDBTOC(device,stem)
    <device>,<stem/V>

  @{b}Function@{ub}
    Set @{i}stem@{ui} as a TOC, reading it from @{i}device@{ui}.

  @{b}Inputs@{ub}
    device - a mounted device name, e.g. "CD0"
    stem - where to writes result

@EndNode

  @{b}Result@{ub}
    res - a freedb.library error number

@EndNode

