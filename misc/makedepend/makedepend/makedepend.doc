

                           MakeDepend
                           ==========

                    ©1997 by Matthias Meixner




                          LEGAL STUFF
                          -----------
   Makedepend ist Freeware, i.e. you may freely distribute this program,
   as long as the following conditions are met:

   -  you must distribute the whole package, including this text.

   -  you are not allowed to remove or modify my copyright in the program
      or in this text.

   -  you must not make any profit by distributing this program

   -  if you want to include it on a CD-ROM, you need my explicit
      permission. The same applies, if you want to include it in
      commercial packages.

   -  The permission to include it on following CD-ROM series is granted
      by this:
                             Aminet
                          Meeting Pearls
              Fish CD-ROMS (Fresh Fish, Gold Fish)

   -  if you make any changes to MakeDepend you need to include a textfile,
      that describes these changes.

   -  you must not use significant parts of the sourcecode of this program
      for commercial purposes without my permission.
      (I call it significant, if it exceeds 200 lines of sourcecode.)

   -  You may use parts of the sourcecode for Public Domain and Freeware
      programs, as long as you include my copyright for these parts in
      your documentation.




                         INTRODUCTION
                         ------------
   While makefiles are very useful for compiling larger projects, there
   is always the problem of generating them and keeping them up to date
   as the developement keeps going on. Makedepend now can automate a big
   part of that, as it is able to scan the sourcecodes for #include
   statements and generate the dependencies from that information.

   The advantage of this implementation of makedepend is, that it is
   also capable of finding the dependencies based on the name of the
   objectfile, whereas most other implementations need the name of
   the C/C++ file.

   NOTE: makedepend only scans files, that were included by statements of
   the form #include "file.h", whereas files included by #include <file.h>
   would not be included in the dependencies. The reason for that is, that
   normally the latter form is used to include system-includes and these
   do not change and it's therefore useless to included them in the
   dependencies.

   All you have to do now to create a makefile is to specify the
   objectfiles, that are needed to build the program, defining the
   rule for linking the program and a rule for generating the
   dependencies. E.g. a smakefile for SAS/C:

   ------------------- smakefile ---------------------
   OBJS=test.o test2.o test3.o test4.o test5.o

   test: $(OBJS)
      sc link $(OBJS) to test

   depend:
      makedepend -f smakefile $(OBJS)

   ---------------------------------------------------

   After that you execute "make depend", which generates
   the makefile and then "make" which builds the program. If you have
   modified your sourcecode just use "make depend" again to update the
   dependencies.




                           OPERATION
                           ---------
   Usage:

   makedepend [-f <makefile>] [-i <idir>] [-head <head>] <file1> ....


   Options:

   -f <makefile>   Set the name of the makefile, that should be updated.
                   (default: makefile)

   -i <idir>       Add this directory to the path, that is used to search
                   for include-files. (default: current directory)

   -head <head>    Print this string in front of every dependency.



   Filenames:

   Filenames can be either names of object-files (e.g. test.o) or names
   of sourcefiles (e.g. test.c). If names of object-files are given, then
   makedepend searches for the name of the sourcecode. Therefore it
   replaces the suffix ".o" by ".c", ".cxx", ".cc", ".cpp" and ".c++" and
   checks, wether this file exists. It's also using a given search-path
   to locate the file.

   Then it generates the complete transitive closure of all included files.

   After that it scans the old makefile for the String "#DEPENDENCIES"
   and replaces everything after that label by the dependencies. If this
   String cannot be found, it is generated.

   A backup of the old makefile is kept (<filename>.bak).



                           LIMITATIONS
                           -----------
   Makedepend is able to recognize, if an include was commented out,
   however since makedepend is not a complete preprocessor, it cannot
   check if a file really gets included or if it won't get included, due
   to some #ifdef's.






                       ADDITIONAL EXAMPLE
                       ------------------
   Maybe you want the objectfiles go to a separate directory (obj):

   --------------------------- smakefile ------------------------------

   OBJS=obj/test.o obj/test2.o obj/test3.o


   test: $(OBJS)
      sc link $(OBJS) to test


   .c.o:
      sc $< objname $@

   depend:
      makedepend -f smakefile $(OBJS)

   --------------------------------------------------------------------


                          COMPILING
                          ---------
   Makedepend has successfully been compiled using SAS/C or GNU-C
   (using -noixemul).




                           AUTHOR
                           ------

   Send bug-reports, suggestions, parcels, money or ??? to

      meixner@rbg.informatik.th-darmstadt.de
   or
      meixner@igd.fhg.de
   or

      Matthias Meixner
      Sandberg 13
      36145 Schwarzbach
      Germany



   P.S. It's very likely, that my EMail addresses will change in the
        future, therefore try which one works ... :)