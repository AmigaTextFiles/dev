TABLE OF CONTENTS

mmu.library/AcceptParentTask
mmu.library/AdoptTask
mmu.library/AllocExecMem
mmu.library/AnalyzeEnforcerHit
mmu.library/ChangeThreadOwner
mmu.library/FreeExecMem
mmu.library/GetBit_PROTECTION_AWARE
mmu.library/GetBit_COOKIE
mmu.library/GetBit_TASK_READONLY
mmu.library/GetBit_GLOBAL_READONLY
mmu.library/GetBit_GLOBAL_ILLEGAL
mmu.library/GetBit_WRITETHROUGH
mmu.library/GetBit_NOCACHE
mmu.library/RestoreDescriptor
mmu.library/SetIllegal
mmu.library/SetReadonly
mmu.library/SetPageDescriptor
mmu.library/AllocExecMem                       mmu.library/AllocExecMem

   NAME
	AllocExecMem -- Allocate memory with special memory protection features

   SYNOPSIS
	memoryBlock = AllocExecMem(byteSize, attributes)
	D0		       D0	 D1

	void *AllocExecMem(ULONG, ULONG);

   FUNCTION
	See autodoc for Exec/AllocMem.
	These new MEMF bits will give your Amiga cooperative memory protection.
	You will now have to think about how other tasks use the memory _you_
	have allocated. If other tasks need to read the memory you must use the
	GLOBAL_READONLY flag. If other tasks need to write to the memory then
	you must use the PROTECTION_AWARE flag (which will get redundant some
	time...); or in other words allocate like you do today. All memory
	other tasks use I would suggest you put in a separate allocation.

   INPUTS
	This function (and the patched Exec/AllocMem when you open and
	initialize mmu.library) adds the following new flags in addition to the
	existing MEMF flags:

	PROTECTION_AWARE:	use this if you don't want any protection right
			now, but intend to set the protection yourself later
			(practical effect is page alignment). This flag might
			be obsolete and removed later.

	COOKIE:		reserved for future use (hint: do you know shared memory
			keys under UNIX?).

	TASK_READONLY:	your task can only read the memory area in question.
			This is really only useful for protecting your code.
			Using this flag without any global flags will turn on
			GLOBAL_READONLY.
			Do not _allocate_ memory with this flag.

	GLOBAL_READONLY:	all other tasks (not yourself) will only be able
			to read this memory.

	GLOBAL_ILLEGAL:	all other tasks will be hindered from reading or writing
			your memory.

	WRITETHROUGH:	not implemented yet.

	NOCACHE:	not implemented yet.

	The MEMF definition for these flags can not be found in any include
	files. The definitions for each bit can be found by calling the
	GetBit functions in this library.

   RESULT
	See Exec/AllocMem. Protection requested has immediate effect.

   NOTE
	If the size is not a multiple of the page size the returned memory block
	might not be on a page boundary. This is to enable better detection of
	reading or writing addresses behind the allocated memory block.
	This is also valid for Exec/AllocMem.

   SEE ALSO
	FreeExecMem, Exec/FreeMem

mmu.library/AnalyzeEnforcerHit

mmu.library/FreeExecMem

   NAME
	FreeExecMem -- deallocate with knowledge

   SYNOPSIS
	FreeExecMem(memoryBlock, byteSize)
		    A1		 D0

	void FreeMem(void *,ULONG);

   FUNCTION
	See Exec/FreeMem. All protection set when memory was allocated will be
	removed.

   INPUTS
	See Exec/FreeMem. This function is _not_ meant to be used with
	allocations done with Exec/AllocMem that only uses standard C= flags.
	It will probably survive if you call Exec/AllocMem and use the new
	flags, and then free it with this function. Exec/FreeMem will handle
	freeing of memory that was done before opening mmu.library and that was
	allocated without any new flags.

   SEE ALSO
	AllocExecMem, Exec/AllocMem

mmu.library/GetBit_PROTECTION_AWARE

    NAME

    SYNOPSIS
	MEMF_PROTECTION_AWARE = GetBit_PROTECTION_AWARE()
	D0

	ULONG GetBit_PROTECTION_AWARE( void );

    FUNCTION
	Get the dynamic bit definition for the MEMF_PROTECTION_AWARE flag.

    INPUTS
	None.

    RESULT
	MEMF_PROTECTION_AWARE

    SEE ALSO
	Exec/AllocMem, AllocExecMem

mmu.library/GetBit_COOKIE

    NAME


    SYNOPSIS
	MEMF_COOKIE = GetBit_COOKIE()
	D0

	ULONG GetBit_COOKIE( void );

    FUNCTION
	Get the dynamic bit definition for the MEMF_COOKIE flag.

    INPUTS
	None.

    RESULT
	MEMF_COOKIE

    SEE ALSO
	Exec/AllocMem, AllocExecMem

mmu.library/GetBit_TASK_READONLY

    NAME


    SYNOPSIS
	MEMF_TASK_READONLY = GetBit_TASK_READONLY()
	D0

	ULONG GetBit_TASK_READONLY( void );

    FUNCTION
	Get the dynamic bit definition for the MEMF_TASK_READONLY flag.

    INPUTS
	None.

    RESULT
	MEMF_TASK_READONLY

    SEE ALSO
	Exec/AllocMem, AllocExecMem

mmu.library/GetBit_GLOBAL_READONLY

    NAME


    SYNOPSIS
	MEMF_GLOBAL_READONLY = GetBit_GLOBAL_READONLY()
	D0

	ULONG GetBit_GLOBAL_READONLY( void );

    FUNCTION
	Get the dynamic bit definition for the MEMF_GLOBAL_READONLY flag.

    INPUTS
	None.

    RESULT
	MEMF_GLOBAL_READONLY

    SEE ALSO
	Exec/AllocMem, AllocExecMem

mmu.library/GetBit_GLOBAL_ILLEGAL

    NAME


    SYNOPSIS
	MEMF_GLOBAL_ILLEGAL = GetBit_GLOBAL_ILLEGAL()
	D0

	ULONG GetBit_GLOBAL_ILLEGAL( void );

    FUNCTION
	Get the dynamic bit definition for the MEMF_GLOBAL_ILLEGAL flag.

    INPUTS
	None.

    RESULT
	MEMF_GLOBAL_ILLEGAL

    SEE ALSO
	Exec/AllocMem, AllocExecMem

mmu.library/GetBit_WRITETHROUGH

    NAME


    SYNOPSIS
	MEMF_WRITETHROUGH = GetBit_WRITETHROUGH()
	D0

	ULONG GetBit_WRITETHROUGH( void );

    FUNCTION
	Get the dynamic bit definition for the MEMF_WRITETHROUGH flag.

    INPUTS
	None.

    RESULT
	MEMF_WRITETHROUGH

    NOTE
	Bit use not implemented

    SEE ALSO
	Exec/AllocMem, AllocExecMem

mmu.library/GetBit_NOCACHE

    NAME


    SYNOPSIS
	MEMF_NOCACHE = GetBit_NOCACHE()
	D0

	ULONG GetBit_NOCACHE( void );

    FUNCTION
	Get the dynamic bit definition for the MEMF_NOCACHE flag.

    INPUTS
	None.

    RESULT
	MEMF_NOCACHE

    NOTE
	Bit use not implemented

    SEE ALSO
	Exec/AllocMem, AllocExecMem

mmu.library/RestoreDescriptor

    NAME

mmu.library/SetIllegal

    NAME

mmu.library/SetReadonly

    NAME

mmu.library/SetPageDescriptor

    NAME

