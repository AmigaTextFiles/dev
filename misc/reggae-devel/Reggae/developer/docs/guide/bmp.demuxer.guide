@database bmp.demuxer.guide
@rem Source: class.c
@rem Generated with RoboDoc v3.1a (Jul  3 2005)
@rem RoboDoc is copyright 1994-1997 by Maverick Software Development
@node Main bmp.demuxer.guide
@{jcenter}
@{fg highlight}@{b}TABLE OF CONTENTS@{ub}@{fg text}

@{"bmp.demuxer/background          " Link "background"}
@{"bmp.demuxer/MMA_BlockAlign      " Link "MMA_BlockAlign"}
@{"bmp.demuxer/MMA_StreamPosBytes  " Link "MMA_StreamPosBytes"}
@{"bmp.demuxer/MMA_Video_FrameCount" Link "MMA_Video_FrameCount"}
@{"bmp.demuxer/MMM_Pull            " Link "MMM_Pull"}
@{"bmp.demuxer/MMM_Seek            " Link "MMM_Seek"}
@{jleft}
@endnode
@Node "background" "bmp.demuxer/background"
@{fg shine}bmp.demuxer/background@{fg text}

@{b}DESCRIPTION@{ub}
   The class is a Reggae demultiplexer for BMP streams (pictures). Object of
   bmp.demuxer class has two ports: port 0 is an input and accepts
   MMF_STREAM format, port 1 is an output and produces MMF_VIDEO_BMP format.
   The class is a direct subclass of multimedia.class.


@{b}NEW ATTRIBUTES@{ub}
   @{"MMA_Video_FrameCount" Link "MMA_Video_FrameCount"}   (V50)   [..G.Q], *UQUAD
   @{"MMA_BlockAlign" Link "MMA_BlockAlign"}         (V51.6) [..G.Q],  ULONG
   @{"MMA_StreamPosBytes" Link "MMA_StreamPosBytes"}     (V51.6) [..G.Q], *UQUAD


@{b}NEW METHODS@{ub}
   @{"MMM_Pull" Link "MMM_Pull"}(port, buffer, length)  (V50)
   @{"MMM_Seek" Link "MMM_Seek"}(port, type, offset)    (V51.6)


@{b}HISTORY@{ub}
   51.6 (29.01.2007)
   - Added @{"MMA_BlockAlign" Link "MMA_BlockAlign"} attribute (stream offset to pixmap data) used by
     bmp.decoder for workarounds for decoding buggy images.
   - Added missing OM_GET and @{"MMM_GetPort" Link "multimedia.class.guide/MMM_GetPort"} entries to the dispatcher.
   - Implemented @{"MMM_Seek" Link "MMM_Seek"}().
   - Added @{"MMA_StreamPosBytes" Link "MMA_StreamPosBytes"} attribute.
   - Recognition routine: if header filesize does not match filesystem
     filesize, does not set probability to 0. Allows lot of broken images to
     be accepted.

   51.5 (08.01.2006)
   - Fixed Setup(), should return TRUE when called on the output port.

   51.4 (13.06.2005)
   - Fixed broken recognition routine (peeking into random port).

   51.3 (04.05.2005)
   - Removed debuglog output.

   51.2 (20.04.2005)
   - Added debug info in the destructor.

   50.1 (24.10.2004)
   - Initial revision.


@endnode
@Node "MMA_BlockAlign" "bmp.demuxer/MMA_BlockAlign"
@{fg shine}bmp.demuxer/MMA_BlockAlign@{fg text}

@{b}NAME@{ub}
   @{b}MMA_BlockAlign@{ub} (V51.6) [..G.Q], ULONG


@{b}FUNCTION@{ub}
   This attribute is used internally to pass pixmap data offset from
   beginning of the stream, as specified in the header. This offset is used
   by bmp.decoder as a helper for decoding broken images.


@endnode
@Node "MMA_StreamPosBytes" "bmp.demuxer/MMA_StreamPosBytes"
@{fg shine}bmp.demuxer/MMA_StreamPosBytes@{fg text}

@{b}NAME@{ub}
   @{b}MMA_StreamPosBytes@{ub} (V51.6) [..G.Q], UQUAD*


@{b}FUNCTION@{ub}
   Current position in BMP encoded data in bytes (after stripping 14-byte
   BMP file header).


@{b}NOTES@{ub}
   As every 64-bit attribute, @{b}MMA_StreamPosBytes@{ub} is passed by pointer to a
   64-bit value.


@endnode
@Node "MMA_Video_FrameCount" "bmp.demuxer/MMA_Video_FrameCount"
@{fg shine}bmp.demuxer/MMA_Video_FrameCount@{fg text}

@{b}NAME@{ub}
   @{b}MMA_Video_FrameCount@{ub} (V50) [..G.Q], UQUAD*


@{b}FUNCTION@{ub}
   As BMP format does not support multiframe images, this attribute returns
   1 always.


@{b}NOTES@{ub}
   As every 64-bit attribute, @{b}MMA_Video_FrameCount@{ub} is passed by pointer to a
   64-bit value.


@endnode
@Node "MMM_Pull" "bmp.demuxer/MMM_Pull"
@{fg shine}bmp.demuxer/MMM_Pull@{fg text}

@{b}NAME@{ub}
   @{b}MMM_Pull@{ub} -- Writes Windows BitMap data to specified buffer. (V50)


@{b}SYNOPSIS@{ub}
   ULONG DoMethod(Object *obj, @{b}MMM_Pull@{ub}, ULONG port, APTR buffer, ULONG
   length);


@{b}FUNCTION@{ub}
   Pulls needed amount of stream data from input, processes them to extract
   raw Windows BitMap data and places them in the specified buffer. The
   demuxer is pass-through for image data (no data copying).


@{b}INPUTS@{ub}
   obj - object to perform method on.
   port - number of port, must be output (1).
   buffer - destination buffer for bitmap data.
   length - amount of data to be pulled in bytes.


@{b}RESULT@{ub}
   Number of bytes pulled, secondary error information via @{"MMA_ErrorCode" Link "multimedia.class.guide/MMA_ErrorCode"}.


@{b}SEE ALSO@{ub}
   multimedia.class/@{"MMA_ErrorCode" Link "multimedia.class.guide/MMA_ErrorCode"}


@endnode
@Node "MMM_Seek" "bmp.demuxer/MMM_Seek"
@{fg shine}bmp.demuxer/MMM_Seek@{fg text}

@{b}NAME@{ub}
   @{b}MMM_Seek@{ub} -- Seeks in encoded BMP data. (V51.6)


@{b}SYNOPSIS@{ub}
   ULONG DoMethod(Object *obj, @{b}MMM_Seek@{ub}, ULONG port, ULONG type, UQUAD*
   offset);


@{b}FUNCTION@{ub}
   Seeks in encoded BMP stream, as the demuxer does no data conversion it
   only adds main BMP header size to the offset, and passes the method
   to the input port (it is then forwarded to the connected stream object).


@{b}INPUTS@{ub}
   obj - object to perform method on.
   port - number of port, must be output (1).
   type - seek type, must be MMM_SEEK_BYTES.
   length - absolute position in BMP encoded data in bytes.


@{b}RESULT@{ub}
   Boolean success value.


@{b}NOTES@{ub}
   The offset is passed as a pointer to 64-bit unsigned number.


@{b}SEE ALSO@{ub}
   multimedia.class/@{"MMA_ErrorCode" Link "multimedia.class.guide/MMA_ErrorCode"}


@endnode

