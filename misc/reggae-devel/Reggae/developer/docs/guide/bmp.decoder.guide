@database bmp.decoder.guide
@rem Source: class.cpp
@rem Generated with RoboDoc v3.1a (Jul  3 2005)
@rem RoboDoc is copyright 1994-1997 by Maverick Software Development
@node Main bmp.decoder.guide
@{jcenter}
@{fg highlight}@{b}TABLE OF CONTENTS@{ub}@{fg text}

@{"bmp.decoder/background            " Link "background"}
@{"bmp.decoder/MMA_Video_BitsPerPixel" Link "MMA_Video_BitsPerPixel"}
@{"bmp.decoder/MMA_Video_Height      " Link "MMA_Video_Height"}
@{"bmp.decoder/MMA_Video_UseAlpha    " Link "MMA_Video_UseAlpha"}
@{"bmp.decoder/MMA_Video_Width       " Link "MMA_Video_Width"}
@{"bmp.decoder/MMM_Pull              " Link "MMM_Pull"}
@{jleft}
@endnode
@Node "background" "bmp.decoder/background"
@{fg shine}bmp.decoder/background@{fg text}

@{b}DESCRIPTION@{ub}
   The class decodes Windows BitMap data found in BMP images and Windows
   icons. Supported image depths are 1, 4 and 8 bits per pixel with palette,
   and 24 and 32 bits per pixel for truecolor (32 contains 8-bit alpha
   channel). The decoder supports image mask in icons by merging it into
   alpha channel. Windows BitMap data use reversed vertical scan order
   (bottom-up), so the whole image data must be buffered before decoding.
   That is why using this format is not recommended, as it takes up memory.
   An object of bmp.decoder class has two ports: port 0 is an input
   accepting MMF_VIDEO_BMP format, port 1 is an output producing 
   MMFC_VIDEO_ARGB32 format. The class is a direct subclass of
   multimedia.class.


@{b}NEW ATTRIBUTES@{ub}
   Attributes applicability:
     I - may be set at creation time.
     S - may be set on an existing object.
     G - may be get from an object.
     P - may be set for an object's port.
     Q - may be queried from an object's port.

   @{"MMA_Video_Width" Link "MMA_Video_Width"}          (V50) [..G.Q], ULONG
   @{"MMA_Video_Height" Link "MMA_Video_Height"}         (V50) [..G.Q], ULONG
   @{"MMA_Video_BitsPerPixel" Link "MMA_Video_BitsPerPixel"}   (V50) [..G.Q], ULONG
   @{"MMA_Video_UseAlpha" Link "MMA_Video_UseAlpha"}       (V50) [..G.Q], BOOL
       

@{b}NEW METHODS@{ub}
   @{"MMM_Pull" Link "MMM_Pull"}(port, buffer, length)  (V50)


@{b}HISTORY@{ub}
   51.4  (28.01.2007)
   - Added workaround for buggy savers setting structure size field in the
     header to 0, 40 bytes is assumed in this case.
   - Fixed error reporting in Setup(), result of LoadData() is returned
     instead of TRUE.
   - All memory allocations are now done with @{"MediaAllocVec" Link "multimedia.class.guide/MediaAllocVec"}().
   - Added workaround for images with shortened palette (only NumColors
     palette entries).
   - Added workaround for palette images with NumColors set to 0.
   - Added workaround for images having extra data after bitmap header or
     palette (forward seek to pixel data offset).
   - Added RLE8 decoder for compressed 8-bit images.

   51.3  (13.06.2005)
   - Fixed broken MMM_Setup.

   51.2  (20.04.2005)
   - Added debug info in the constructor and the destructor.
   - Added missing OM_GET entry in the dispatcher.

   50.4  (07.11.2004)
   - Fixed 24-bit images problem.

   50.3  (07.11.2004)
   - Added code for two colour BMP images.
   - Switched to system macros for byteswapping.

   50.2  (11.10.2004)
   - Fixed messed entries in query taglist.
   - Query tags are accessible via the class base.

   50.1  (12.09.2004)
   - Initial revision.


@endnode
@Node "MMA_Video_BitsPerPixel" "bmp.decoder/MMA_Video_BitsPerPixel"
@{fg shine}bmp.decoder/MMA_Video_BitsPerPixel@{fg text}

@{b}NAME@{ub}
   @{b}MMA_Video_BitsPerPixel@{ub} (V50) [..G.Q], ULONG


@{b}FUNCTION@{ub}
   Returns image colour depth. Possible values for bmp.decoder are 1, 4, 8,
   24 or 32.


@endnode
@Node "MMA_Video_Height" "bmp.decoder/MMA_Video_Height"
@{fg shine}bmp.decoder/MMA_Video_Height@{fg text}

@{b}NAME@{ub}
   @{b}MMA_Video_Height@{ub} (V50) [..G.Q], ULONG


@{b}FUNCTION@{ub}
   Returns height of image frame in pixels.


@endnode
@Node "MMA_Video_UseAlpha" "bmp.decoder/MMA_Video_UseAlpha"
@{fg shine}bmp.decoder/MMA_Video_UseAlpha@{fg text}

@{b}NAME@{ub}
   @{b}MMA_Video_UseAlpha@{ub} (V50) [..G.Q], BOOL


@{b}FUNCTION@{ub}
   Returns TRUE if Windows BitMap image data contain alpha channel or image
   mask (which is merged with alpha channel), FALSE otherwise.


@endnode
@Node "MMA_Video_Width" "bmp.decoder/MMA_Video_Width"
@{fg shine}bmp.decoder/MMA_Video_Width@{fg text}

@{b}NAME@{ub}
   @{b}MMA_Video_Width@{ub} (V50) [..G.Q], ULONG


@{b}FUNCTION@{ub}
   Returns width of image frame in pixels.


@endnode
@Node "MMM_Pull" "bmp.decoder/MMM_Pull"
@{fg shine}bmp.decoder/MMM_Pull@{fg text}

@{b}NAME@{ub}
   @{b}MMM_Pull@{ub} -- Writes common format image data to specified buffer. (V50)


@{b}SYNOPSIS@{ub}
   ULONG DoMethod(Object *obj, @{b}MMM_Pull@{ub}, ULONG port, APTR buffer, ULONG
   length);


@{b}FUNCTION@{ub}
   Pulls needed amount of Windows BitMap data from input, processes them to
   get image data in the common format and places them in the specified
   buffer.


@{b}INPUTS@{ub}
   obj - object to perform method on.
   port - number of port, data must be pulled from output, so 1.
   buffer - destination buffer for common format image data. This buffer
     must be allocated with MediaAllocMem().
   length - amount of data to be pulled in bytes. It should be evenly
     divisible by number of bytes per pixel for the common format (4 for
     MMFC_VIDEO_ARGB32), if not, it is rounded down, and the rest of bytes
     are undefined.


@{b}RESULT@{ub}
   Number of bytes pulled, secondary error information via @{"MMA_ErrorCode" Link "multimedia.class.guide/MMA_ErrorCode"}.


@{b}SEE ALSO@{ub}
   multimedia.class/@{"MMA_ErrorCode" Link "multimedia.class.guide/MMA_ErrorCode"}


@endnode

