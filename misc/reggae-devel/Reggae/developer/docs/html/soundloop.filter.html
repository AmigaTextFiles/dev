<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML><HEAD>
<TITLE>soundloop.filter.html</TITLE>
<!-- Source: class.c -->
<!-- Generated with RoboDoc v3.1a (Jul  3 2005) -->
<!-- RoboDoc is copyright 1994-1997 by Maverick Software Development -->
</HEAD><BODY>
<H1 ALIGN="center">TABLE OF CONTENTS</H1>
<OL>
<LI><A HREF="#background">soundloop.filter/background</A>
<LI><A HREF="#MMA_SoundLoop_Count">soundloop.filter/MMA_SoundLoop_Count</A>
<LI><A HREF="#MMA_SoundLoop_End">soundloop.filter/MMA_SoundLoop_End</A>
<LI><A HREF="#MMA_SoundLoop_Start">soundloop.filter/MMA_SoundLoop_Start</A>
<LI><A HREF="#MMA_StreamPosFrames">soundloop.filter/MMA_StreamPosFrames</A>
<LI><A HREF="#MMM_Pull">soundloop.filter/MMM_Pull</A>
<LI><A HREF="#MMM_Seek">soundloop.filter/MMM_Seek</A>
</OL>
<HR>

<H2><A NAME="background">soundloop.filter/background</A></H2>

<FONT SIZE="+1">DESCRIPTION</FONT>
<PRE>   This sound filter purpose is creating loops in audio stream. Loop start
   and end point, nummber of repetitions, are configurable. A soundloop
   object will automatically buffer short loops, longer ones are done with
   stream seeking (seekable stream is needed for this). This class supports
   all three common sound formats:
   - MMFC_AUDIO_INT16,
   - MMFC_AUDIO_INT32,
   - MMFC_AUDIO_FLOAT32.
   Up to 256 channels (including) are supported. Note that it is guarranted,
        loops longer than 2^32 frames work properly.

</PRE><FONT SIZE="+1">NEW ATTRIBUTES</FONT>
<PRE>   Attributes applicability:
     I - may be set at creation time.
     S - may be set on an existing object.
     G - may be get from an object.
     P - may be set for an object's port.
     Q - may be queried from an object's port.

   <A HREF="#MMA_SoundLoop_Start">MMA_SoundLoop_Start</A>      (V51) [ISGPQ], *UQUAD
   <A HREF="#MMA_SoundLoop_End">MMA_SoundLoop_End</A>        (V51) [ISGPQ], *UQUAD
   <A HREF="#MMA_SoundLoop_Count">MMA_SoundLoop_Count</A>      (V51) [ISGPQ],  ULONG
   <A HREF="#MMA_StreamPosFrames">MMA_StreamPosFrames</A>      (V51) [..G.Q], *UQUAD

</PRE><FONT SIZE="+1">NEW METHODS</FONT>
<PRE>   <A HREF="#MMM_Pull">MMM_Pull</A>(port, buffer, length)  (V51)
   <A HREF="#MMM_Seek">MMM_Seek</A>(port, type, position)  (V51)

</PRE>
<HR>

<H2><A NAME="MMA_SoundLoop_Count">soundloop.filter/MMA_SoundLoop_Count</A></H2>

<FONT SIZE="+1">NAME</FONT>
<PRE>   <B>MMA_SoundLoop_Count</B> (V51) [ISGPQ], ULONG

</PRE><FONT SIZE="+1">FUNCTION</FONT>
<PRE>   This attribute specified how many times a sound fragment between
        <A HREF="#MMA_SoundLoop_Start">MMA_SoundLoop_Start</A> and <A HREF="#MMA_SoundLoop_End">MMA_SoundLoop_End</A> should be repeated in the
   output stream. Note that passing 1 means no loop, as the fragment to be
   looped is played once. Passing 0 gives 2^32 loops, so it can be
   practically considered as infinite looping. When the attribute is get, it
   returns number of complete repetitions left to do at the time of query.
   Default value for this attribute is 1.

</PRE>
<HR>

<H2><A NAME="MMA_SoundLoop_End">soundloop.filter/MMA_SoundLoop_End</A></H2>

<FONT SIZE="+1">NAME</FONT>
<PRE>   <B>MMA_SoundLoop_End</B> (V51) [ISGPQ], *UQUAD

</PRE><FONT SIZE="+1">FUNCTION</FONT>
<PRE>   Loop end point in frames, counted from start of the input stream. This
   attribute is inclusive, it means if this attribute and
   <A HREF="#MMA_SoundLoop_Start">MMA_SoundLoop_Start</A> are set to be equal, one sample frame will be looped.
   Default value of this attribute is equal to MMA_Sound_FrameCount (number
   of frames in the sound). If MMA_Sound_FrameCount is 0 (which means
        unlimited or unknown length), <B>MMA_SoundLoop_End</B> default value is set to
   $FFFFFFFFFFFFFFFF, so the loop will practically never turn back (which is
   intuitive, as one can't loop unlimited number of frames).

</PRE><FONT SIZE="+1">NOTES</FONT>
<PRE>   As every 64-bit attribute, it is passed via pointer.

</PRE>
<HR>

<H2><A NAME="MMA_SoundLoop_Start">soundloop.filter/MMA_SoundLoop_Start</A></H2>

<FONT SIZE="+1">NAME</FONT>
<PRE>   <B>MMA_SoundLoop_Start</B> (V51) [ISGPQ], *UQUAD

</PRE><FONT SIZE="+1">FUNCTION</FONT>
<PRE>   Loop start point in frames, counted from start of the input stream.
        Default value for this attribute is 0.

</PRE><FONT SIZE="+1">NOTES</FONT>
<PRE>   As every 64-bit attribute, it is passed via pointer.

</PRE>
<HR>

<H2><A NAME="MMA_StreamPosFrames">soundloop.filter/MMA_StreamPosFrames</A></H2>

<FONT SIZE="+1">NAME</FONT>
<PRE>   MMA_Sound_StreamPosFrames (V51) [..G.Q], *UQUAD

</PRE><FONT SIZE="+1">FUNCTION</FONT>
<PRE>   Returns number of sound frames pulled on the output so far.

</PRE><FONT SIZE="+1">NOTES</FONT>
<PRE>   As every 64-bit attribute, it is passed via pointer.

</PRE>
<HR>

<H2><A NAME="MMM_Pull">soundloop.filter/MMM_Pull</A></H2>

<FONT SIZE="+1">NAME</FONT>
<PRE>   <B>MMM_Pull</B> -- Writes looped audio stream to specified buffer. (V51)

</PRE><FONT SIZE="+1">SYNOPSIS</FONT>
<PRE>   ULONG DoMethod(Object *obj, <B>MMM_Pull</B>, ULONG port, APTR buffer, ULONG
   length);

</PRE><FONT SIZE="+1">FUNCTION</FONT>
<PRE>   The method puts specified amount of data in the buffer. A loop specified
   with object's attributes is performed. Looping means repetition of block 
   of data. The block is specified with <A HREF="#MMA_SoundLoop_Start">MMA_SoundLoop_Start</A> and
   <A HREF="#MMA_SoundLoop_End">MMA_SoundLoop_End</A>, number of repetitions is set with <A HREF="#MMA_SoundLoop_Count">MMA_SoundLoop_Count</A>.
   Note that changing loop start, end and count changes while object is
   inside current loop may lead to strange effects.

</PRE><FONT SIZE="+1">INPUTS</FONT>
<PRE>   obj - object to perform method on.
   port - number of port, data must be pulled from port 1 (output).
   buffer - destination buffer for data.
   length - amount of data to be pulled in *bytes*.

</PRE><FONT SIZE="+1">RESULT</FONT>
<PRE>   Number of bytes pulled, secondary error information via <A HREF="multimedia.class.html#MMA_ErrorCode">MMA_ErrorCode</A>.

</PRE><FONT SIZE="+1">SEE ALSO</FONT>
<PRE>   multimedia.class/<A HREF="multimedia.class.html#MMA_ErrorCode">MMA_ErrorCode</A>

</PRE>
<HR>

<H2><A NAME="MMM_Seek">soundloop.filter/MMM_Seek</A></H2>

<FONT SIZE="+1">NAME</FONT>
<PRE>   <B>MMM_Seek</B> -- Moves stream pointer to a new position. (V51)

</PRE><FONT SIZE="+1">SYNOPSIS</FONT>
<PRE>   ULONG DoMethod(Object *obj, <A HREF="#MMM_Pull">MMM_Pull</A>, ULONG port, ULONG type, UQUAD*
   position);

</PRE><FONT SIZE="+1">FUNCTION</FONT>
<PRE>   As usual, this function moves reading position in the stream. This method
   can be succesful only if all previous objects connected in the pipeline
   support seeking. Note that seek position is for output (it means looped)
   stream, not input stream. If for example output stream is inside a third
   repetition of 100 frames loop which should be repeated 5 times, seeking
   either back or forward 100 frames, will not change the source stream
   position.

</PRE><FONT SIZE="+1">INPUTS</FONT>
<PRE>   obj - object to perform method on.
   port - number of port, seek must be done on port 1 (output).
   buffer - type of seek, MMM_SEEK_TIME or MMM_SEEK_FRAMES.
   position - a pointer to an UQUAD variable holding the new position. It is
     in frames for frame seek and in microseconds for time seek.

</PRE><FONT SIZE="+1">RESULT</FONT>
<PRE>   Number of bytes pulled, secondary error information via <A HREF="multimedia.class.html#MMA_ErrorCode">MMA_ErrorCode</A>.
   Seek operation may fail if the connected stream is not seekable.

</PRE><FONT SIZE="+1">SEE ALSO</FONT>
<PRE>   multimedia.class/<A HREF="multimedia.class.html#MMA_ErrorCode">MMA_ErrorCode</A>

</PRE>
</BODY></HTML>
