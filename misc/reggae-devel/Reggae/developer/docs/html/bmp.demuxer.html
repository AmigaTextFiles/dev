<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML><HEAD>
<TITLE>bmp.demuxer.html</TITLE>
<!-- Source: class.c -->
<!-- Generated with RoboDoc v3.1a (Jul  3 2005) -->
<!-- RoboDoc is copyright 1994-1997 by Maverick Software Development -->
</HEAD><BODY>
<H1 ALIGN="center">TABLE OF CONTENTS</H1>
<OL>
<LI><A HREF="#background">bmp.demuxer/background</A>
<LI><A HREF="#MMA_BlockAlign">bmp.demuxer/MMA_BlockAlign</A>
<LI><A HREF="#MMA_StreamPosBytes">bmp.demuxer/MMA_StreamPosBytes</A>
<LI><A HREF="#MMA_Video_FrameCount">bmp.demuxer/MMA_Video_FrameCount</A>
<LI><A HREF="#MMM_Pull">bmp.demuxer/MMM_Pull</A>
<LI><A HREF="#MMM_Seek">bmp.demuxer/MMM_Seek</A>
</OL>
<HR>

<H2><A NAME="background">bmp.demuxer/background</A></H2>

<FONT SIZE="+1">DESCRIPTION</FONT>
<PRE>   The class is a Reggae demultiplexer for BMP streams (pictures). Object of
   bmp.demuxer class has two ports: port 0 is an input and accepts
   MMF_STREAM format, port 1 is an output and produces MMF_VIDEO_BMP format.
   The class is a direct subclass of multimedia.class.

</PRE><FONT SIZE="+1">NEW ATTRIBUTES</FONT>
<PRE>   <A HREF="#MMA_Video_FrameCount">MMA_Video_FrameCount</A>   (V50)   [..G.Q], *UQUAD
   <A HREF="#MMA_BlockAlign">MMA_BlockAlign</A>         (V51.6) [..G.Q],  ULONG
   <A HREF="#MMA_StreamPosBytes">MMA_StreamPosBytes</A>     (V51.6) [..G.Q], *UQUAD

</PRE><FONT SIZE="+1">NEW METHODS</FONT>
<PRE>   <A HREF="#MMM_Pull">MMM_Pull</A>(port, buffer, length)  (V50)
   <A HREF="#MMM_Seek">MMM_Seek</A>(port, type, offset)    (V51.6)

</PRE><FONT SIZE="+1">HISTORY</FONT>
<PRE>   51.6 (29.01.2007)
   - Added <A HREF="#MMA_BlockAlign">MMA_BlockAlign</A> attribute (stream offset to pixmap data) used by
     bmp.decoder for workarounds for decoding buggy images.
   - Added missing OM_GET and <A HREF="multimedia.class.html#MMM_GetPort">MMM_GetPort</A> entries to the dispatcher.
   - Implemented <A HREF="#MMM_Seek">MMM_Seek</A>().
   - Added <A HREF="#MMA_StreamPosBytes">MMA_StreamPosBytes</A> attribute.
   - Recognition routine: if header filesize does not match filesystem
     filesize, does not set probability to 0. Allows lot of broken images to
     be accepted.

   51.5 (08.01.2006)
   - Fixed Setup(), should return TRUE when called on the output port.

   51.4 (13.06.2005)
   - Fixed broken recognition routine (peeking into random port).

   51.3 (04.05.2005)
   - Removed debuglog output.

   51.2 (20.04.2005)
   - Added debug info in the destructor.

   50.1 (24.10.2004)
   - Initial revision.

</PRE>
<HR>

<H2><A NAME="MMA_BlockAlign">bmp.demuxer/MMA_BlockAlign</A></H2>

<FONT SIZE="+1">NAME</FONT>
<PRE>   <B>MMA_BlockAlign</B> (V51.6) [..G.Q], ULONG

</PRE><FONT SIZE="+1">FUNCTION</FONT>
<PRE>   This attribute is used internally to pass pixmap data offset from
   beginning of the stream, as specified in the header. This offset is used
   by bmp.decoder as a helper for decoding broken images.

</PRE>
<HR>

<H2><A NAME="MMA_StreamPosBytes">bmp.demuxer/MMA_StreamPosBytes</A></H2>

<FONT SIZE="+1">NAME</FONT>
<PRE>   <B>MMA_StreamPosBytes</B> (V51.6) [..G.Q], UQUAD*

</PRE><FONT SIZE="+1">FUNCTION</FONT>
<PRE>   Current position in BMP encoded data in bytes (after stripping 14-byte
   BMP file header).

</PRE><FONT SIZE="+1">NOTES</FONT>
<PRE>   As every 64-bit attribute, <B>MMA_StreamPosBytes</B> is passed by pointer to a
   64-bit value.

</PRE>
<HR>

<H2><A NAME="MMA_Video_FrameCount">bmp.demuxer/MMA_Video_FrameCount</A></H2>

<FONT SIZE="+1">NAME</FONT>
<PRE>   <B>MMA_Video_FrameCount</B> (V50) [..G.Q], UQUAD*

</PRE><FONT SIZE="+1">FUNCTION</FONT>
<PRE>   As BMP format does not support multiframe images, this attribute returns
   1 always.

</PRE><FONT SIZE="+1">NOTES</FONT>
<PRE>   As every 64-bit attribute, <B>MMA_Video_FrameCount</B> is passed by pointer to a
   64-bit value.

</PRE>
<HR>

<H2><A NAME="MMM_Pull">bmp.demuxer/MMM_Pull</A></H2>

<FONT SIZE="+1">NAME</FONT>
<PRE>   <B>MMM_Pull</B> -- Writes Windows BitMap data to specified buffer. (V50)

</PRE><FONT SIZE="+1">SYNOPSIS</FONT>
<PRE>   ULONG DoMethod(Object *obj, <B>MMM_Pull</B>, ULONG port, APTR buffer, ULONG
   length);

</PRE><FONT SIZE="+1">FUNCTION</FONT>
<PRE>   Pulls needed amount of stream data from input, processes them to extract
   raw Windows BitMap data and places them in the specified buffer. The
   demuxer is pass-through for image data (no data copying).

</PRE><FONT SIZE="+1">INPUTS</FONT>
<PRE>   obj - object to perform method on.
   port - number of port, must be output (1).
   buffer - destination buffer for bitmap data.
   length - amount of data to be pulled in bytes.

</PRE><FONT SIZE="+1">RESULT</FONT>
<PRE>   Number of bytes pulled, secondary error information via <A HREF="multimedia.class.html#MMA_ErrorCode">MMA_ErrorCode</A>.

</PRE><FONT SIZE="+1">SEE ALSO</FONT>
<PRE>   multimedia.class/<A HREF="multimedia.class.html#MMA_ErrorCode">MMA_ErrorCode</A>

</PRE>
<HR>

<H2><A NAME="MMM_Seek">bmp.demuxer/MMM_Seek</A></H2>

<FONT SIZE="+1">NAME</FONT>
<PRE>   <B>MMM_Seek</B> -- Seeks in encoded BMP data. (V51.6)

</PRE><FONT SIZE="+1">SYNOPSIS</FONT>
<PRE>   ULONG DoMethod(Object *obj, <B>MMM_Seek</B>, ULONG port, ULONG type, UQUAD*
   offset);

</PRE><FONT SIZE="+1">FUNCTION</FONT>
<PRE>   Seeks in encoded BMP stream, as the demuxer does no data conversion it
   only adds main BMP header size to the offset, and passes the method
   to the input port (it is then forwarded to the connected stream object).

</PRE><FONT SIZE="+1">INPUTS</FONT>
<PRE>   obj - object to perform method on.
   port - number of port, must be output (1).
   type - seek type, must be MMM_SEEK_BYTES.
   length - absolute position in BMP encoded data in bytes.

</PRE><FONT SIZE="+1">RESULT</FONT>
<PRE>   Boolean success value.

</PRE><FONT SIZE="+1">NOTES</FONT>
<PRE>   The offset is passed as a pointer to 64-bit unsigned number.

</PRE><FONT SIZE="+1">SEE ALSO</FONT>
<PRE>   multimedia.class/<A HREF="multimedia.class.html#MMA_ErrorCode">MMA_ErrorCode</A>

</PRE>
</BODY></HTML>
