<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML><HEAD>
<TITLE>netpbm.demuxer.html</TITLE>
<!-- Source: class.cpp -->
<!-- Generated with RoboDoc v3.1a (Jul  3 2005) -->
<!-- RoboDoc is copyright 1994-1997 by Maverick Software Development -->
</HEAD><BODY>
<H1 ALIGN="center">TABLE OF CONTENTS</H1>
<OL>
<LI><A HREF="#background">netpbm.demuxer/background</A>
<LI><A HREF="#MMA_Video_BitsPerPixel">netpbm.demuxer/MMA_Video_BitsPerPixel</A>
<LI><A HREF="#MMA_Video_BytesPerLine">netpbm.demuxer/MMA_Video_BytesPerLine</A>
<LI><A HREF="#MMA_Video_FinalTouch">netpbm.demuxer/MMA_Video_FinalTouch</A>
<LI><A HREF="#MMA_Video_FrameCount">netpbm.demuxer/MMA_Video_FrameCount</A>
<LI><A HREF="#MMA_Video_GammaCorrection">netpbm.demuxer/MMA_Video_GammaCorrection</A>
<LI><A HREF="#MMA_Video_Height">netpbm.demuxer/MMA_Video_Height</A>
<LI><A HREF="#MMA_Video_Palette">netpbm.demuxer/MMA_Video_Palette</A>
<LI><A HREF="#MMA_Video_Progressive">netpbm.demuxer/MMA_Video_Progressive</A>
<LI><A HREF="#MMA_Video_UseAlpha">netpbm.demuxer/MMA_Video_UseAlpha</A>
<LI><A HREF="#MMA_Video_Width">netpbm.demuxer/MMA_Video_Width</A>
<LI><A HREF="#MMM_Pull">netpbm.demuxer/MMM_Pull</A>
</OL>
<HR>

<H2><A NAME="background">netpbm.demuxer/background</A></H2>

<FONT SIZE="+1">DESCRIPTION</FONT>
<PRE>   The class is a Reggae demultiplexer for the family of NetPBM formats
   Following subformats are supported:
     "P1" - black &amp; white plain text file (Portable BitMap, PBM),
     "P2" - grayscale plain text file (Portable GrayMap, PGM), up to 255
            gray levels.
     "P3" - true color RGB plain text file (Portable PixMap, PPM), up to 255
            levels per color component.
     "P4" - black &amp; white binary file (Portable BitMap, PBM),
     "P5" - grayscale binary file (Portable GrayMap, PGM), up to 255 gray
            levels.
     "P6" - true color RGB binary file (protable PixMap, PPM), up to 255
            levels per color component.

   Object of netbpm.demuxer class has two ports: port 0 is an input and
   accepts MMF_STREAM format, port 1 is an output and produces one of:
     MMF_VIDEO_BITPLANES - for PBM files,
     MMF_VIDEO_GRAY8 - for PGM files,
     MMF_VIDEO_RGB24BE - for PPM files.

</PRE><FONT SIZE="+1">NEW ATTRIBUTES</FONT>
<PRE>   <A HREF="#MMA_Video_BitsPerPixel">MMA_Video_BitsPerPixel</A>      (V51) [..G.Q], ULONG
   <A HREF="#MMA_Video_BytesPerLine">MMA_Video_BytesPerLine</A>      (V51) [..G.Q], ULONG
   <A HREF="#MMA_Video_FinalTouch">MMA_Video_FinalTouch</A>        (V51) [..G.Q], BOOL
   <A HREF="#MMA_Video_FrameCount">MMA_Video_FrameCount</A>        (V51) [..G.Q], *UQUAD
   <A HREF="#MMA_Video_Height">MMA_Video_Height</A>            (V51) [..G.Q], ULONG
   <A HREF="#MMA_Video_Palette">MMA_Video_Palette</A>           (V51) [..G.Q], *ULONG
   <A HREF="#MMA_Video_Progressive">MMA_Video_Progressive</A>       (V51) [..G.Q], BOOL
   <A HREF="#MMA_Video_UseAlpha">MMA_Video_UseAlpha</A>          (V51) [..G.Q], BOOL
   <A HREF="#MMA_Video_Width">MMA_Video_Width</A>             (V51) [..G.Q], ULONG
   <A HREF="#MMA_Video_GammaCorrection">MMA_Video_GammaCorrection</A>   (V51) [IS.P.], BOOL

</PRE><FONT SIZE="+1">NEW METHODS</FONT>
<PRE>   <A HREF="#MMM_Pull">MMM_Pull</A>(port, buffer, length)  (V50)

</PRE><FONT SIZE="+1">HISTORY</FONT>
<PRE>   51.6  (02.02.2007)
   - Added PPM recognition and processing.
   - Added missing <A HREF="multimedia.class.html#MMM_SetPort">MMM_SetPort</A> entry in the dispatcher.

   51.5  (29.01.2007)
   - Fixed stupid bug in the recognition routine, initial 'P' was not
     checked and any byte there was accepted.

   51.4  (26.01.2007)
   - Added proper PGM pixel value scaling for 8-bit images.
   - Added optional gamma correction for 8-bit images (will be useful for 
     24-bit PPM-s as well).
   - Disabled 16-bit PGM-s for now.

   51.3  (31.10.2006)
   - Added parsing headers of PGM images - GetGrayHeader().
   - Added <A HREF="#MMA_Video_BytesPerLine">MMA_Video_BytesPerLine</A> for PGM.
   - Enabled PGM recognition in 'recognize.c'.
   - Added PGM scaling for arbitrary max value.
   - Added MMF_VIDEO_GRAY16BE for max value higher than 255.

   51.2  (28.08.2006)
   - Switched to C++ (some useful classes).
   - Added support for "P1" plain text monochrome bitmap.
   - Added internal data bufferring for speedup.

   51.1  (27.08.2006)
   - Initial revision.

</PRE>
<HR>

<H2><A NAME="MMA_Video_BitsPerPixel">netpbm.demuxer/MMA_Video_BitsPerPixel</A></H2>

<FONT SIZE="+1">NAME</FONT>
<PRE>   <B>MMA_Video_BitsPerPixel</B> (V51) [..G.Q], ULONG

</PRE><FONT SIZE="+1">FUNCTION</FONT>
<PRE>   Number of bits used to represent one pixel in the source data. For ASCII
   formats ("P1", "P2", "P3") it means number of bits used to represent one
   pixel after conversion to binary. For example ASCII PBM file has 1 bit
   per pixel, the same as a binary one.

</PRE>
<HR>

<H2><A NAME="MMA_Video_BytesPerLine">netpbm.demuxer/MMA_Video_BytesPerLine</A></H2>

<FONT SIZE="+1">NAME</FONT>
<PRE>   <B>MMA_Video_BytesPerLine</B> (V51) [..G.Q], ULONG

</PRE><FONT SIZE="+1">FUNCTION</FONT>
<PRE>   The attribute specifies number of binary data bytes per image line.

</PRE>
<HR>

<H2><A NAME="MMA_Video_FinalTouch">netpbm.demuxer/MMA_Video_FinalTouch</A></H2>

<FONT SIZE="+1">NAME</FONT>
<PRE>   <B>MMA_Video_FinalTouch</B> (V51) [..G.Q], BOOL

</PRE><FONT SIZE="+1">FUNCTION</FONT>
<PRE>   The attribute is used for progressive display control, it goes TRUE if
   the final image is being pulled. As NetPBM formats do not support
   progressive display, pulled data are always the final one, so it is
   always TRUE.

</PRE>
<HR>

<H2><A NAME="MMA_Video_FrameCount">netpbm.demuxer/MMA_Video_FrameCount</A></H2>

<FONT SIZE="+1">NAME</FONT>
<PRE>   <B>MMA_Video_FrameCount</B> (V51) [..G.Q], UQUAD*

</PRE><FONT SIZE="+1">FUNCTION</FONT>
<PRE>   Text subformats ("P1" to "P3") contains always one image frame, so the
   attribute is 1. Binary subformats may have multiple frames, but it can be
   detected in the header, so the attribute is 0 (meaning "unknown").

</PRE><FONT SIZE="+1">NOTES</FONT>
<PRE>   As every 64-bit attribute, <B>MMA_Video_FrameCount</B> is passed by pointer to a
   64-bit value.

</PRE>
<HR>

<H2><A NAME="MMA_Video_GammaCorrection">netpbm.demuxer/MMA_Video_GammaCorrection</A></H2>

<FONT SIZE="+1">NAME</FONT>
<PRE>   <B>MMA_Video_GammaCorrection</B> (V51) [IS.P.], BOOL

</PRE><FONT SIZE="+1">FUNCTION</FONT>
<PRE>   Grayscale and color images (PGM and PPM) should be gamma corrected
   according to ITU-R BT.709 curve before writing, to increase color
   dynamic range. An inverse function should be applied to pixel values
   before processing. In spite of netpbm documentation reccomendation, most
   of images is written without this gamma correction, that is why Reggae
   makes it optional. Default value for this tag is FALSE.

</PRE>
<HR>

<H2><A NAME="MMA_Video_Height">netpbm.demuxer/MMA_Video_Height</A></H2>

<FONT SIZE="+1">NAME</FONT>
<PRE>   <B>MMA_Video_Height</B> (V51) [..G.Q], ULONG

</PRE><FONT SIZE="+1">FUNCTION</FONT>
<PRE>   Image height in pixels.

</PRE>
<HR>

<H2><A NAME="MMA_Video_Palette">netpbm.demuxer/MMA_Video_Palette</A></H2>

<FONT SIZE="+1">NAME</FONT>
<PRE>   <B>MMA_Video_Palette</B> (V51) [..G.Q], *ULONG

</PRE><FONT SIZE="+1">FUNCTION</FONT>
<PRE>   Specifies image data palette as a table of 32-bit ARGB entries. The
   attribute is defined only for PBM formats, and is a pointer to read-only
   table containing two entries: 0x00FFFFFF (opaque white) and 0x00000000
   (opaque black). For grayscale and RGB formats NULL is returned.

</PRE>
<HR>

<H2><A NAME="MMA_Video_Progressive">netpbm.demuxer/MMA_Video_Progressive</A></H2>

<FONT SIZE="+1">NAME</FONT>
<PRE>   <B>MMA_Video_Progressive</B> (V51) [..G.Q], BOOL

</PRE><FONT SIZE="+1">FUNCTION</FONT>
<PRE>   The attribute specifies availability of progressive display data in the
   image. As NetPBM formats do not support progressive display, it is always
   FALSE.

</PRE>
<HR>

<H2><A NAME="MMA_Video_UseAlpha">netpbm.demuxer/MMA_Video_UseAlpha</A></H2>

<FONT SIZE="+1">NAME</FONT>
<PRE>   <B>MMA_Video_UseAlpha</B> (V51) [..G.Q], BOOL

</PRE><FONT SIZE="+1">FUNCTION</FONT>
<PRE>   The attribute specifies availability of alpha channel data in the image.
   As NetPBM formats do not support alpha channel, it is always FALSE.

</PRE>
<HR>

<H2><A NAME="MMA_Video_Width">netpbm.demuxer/MMA_Video_Width</A></H2>

<FONT SIZE="+1">NAME</FONT>
<PRE>   <B>MMA_Video_Width</B> (V51) [..G.Q], ULONG

</PRE><FONT SIZE="+1">FUNCTION</FONT>
<PRE>   Image width in pixels.

</PRE>
<HR>

<H2><A NAME="MMM_Pull">netpbm.demuxer/MMM_Pull</A></H2>

<FONT SIZE="+1">NAME</FONT>
<PRE>   <B>MMM_Pull</B> -- Writes encoded data to specified buffer. (V50)

</PRE><FONT SIZE="+1">SYNOPSIS</FONT>
<PRE>   ULONG DoMethod(Object *obj, <B>MMM_Pull</B>, ULONG port, APTR buffer, ULONG
     length);

</PRE><FONT SIZE="+1">FUNCTION</FONT>
<PRE>   Pulls needed amount of stream data from input, processes them to extract
   raw NetPBM data and places them in the specified buffer. The first stage
   of processing is done only for text formats ("P1" to "P3"), text data are
   converted to binary data. The second stage is different for different
   subformats. PBM data (one bitplane) are passed through. Grayscale and RGB
   data are normalized for 1 or 2 byte full range if dynamic range is
   neither 255 nor 65535, then un-gamma correction may be applied to data if
   <A HREF="#MMA_Video_GammaCorrection">MMA_Video_GammaCorrection</A> is set to TRUE.

</PRE><FONT SIZE="+1">INPUTS</FONT>
<PRE>   obj - object to perform method on.
   port - number of port, must be output (1).
   buffer - destination buffer for bitmap data.
   length - amount of data to be pulled in bytes.

</PRE><FONT SIZE="+1">RESULT</FONT>
<PRE>   Number of bytes pulled, secondary error information via <A HREF="multimedia.class.html#MMA_ErrorCode">MMA_ErrorCode</A>.

</PRE><FONT SIZE="+1">SEE ALSO</FONT>
<PRE>   multimedia.class/<A HREF="multimedia.class.html#MMA_ErrorCode">MMA_ErrorCode</A>

</PRE>
</BODY></HTML>
