TABLE OF CONTENTS
0001 soundloop.filter/background
0002 soundloop.filter/MMA_SoundLoop_Count
0003 soundloop.filter/MMA_SoundLoop_End
0004 soundloop.filter/MMA_SoundLoop_Start
0005 soundloop.filter/MMA_StreamPosFrames
0006 soundloop.filter/MMM_Pull
0007 soundloop.filter/MMM_Seek
soundloop.filter/background

DESCRIPTION
   This sound filter purpose is creating loops in audio stream. Loop start
   and end point, nummber of repetitions, are configurable. A soundloop
   object will automatically buffer short loops, longer ones are done with
   stream seeking (seekable stream is needed for this). This class supports
   all three common sound formats:
   - MMFC_AUDIO_INT16,
   - MMFC_AUDIO_INT32,
   - MMFC_AUDIO_FLOAT32.
   Up to 256 channels (including) are supported. Note that it is guarranted,
  	loops longer than 2^32 frames work properly.


NEW ATTRIBUTES
   Attributes applicability:
     I - may be set at creation time.
     S - may be set on an existing object.
     G - may be get from an object.
     P - may be set for an object's port.
     Q - may be queried from an object's port.

   MMA_SoundLoop_Start      (V51) [ISGPQ], *UQUAD
   MMA_SoundLoop_End        (V51) [ISGPQ], *UQUAD
   MMA_SoundLoop_Count      (V51) [ISGPQ],  ULONG
   MMA_StreamPosFrames      (V51) [..G.Q], *UQUAD


NEW METHODS
   MMM_Pull(port, buffer, length)  (V51)
   MMM_Seek(port, type, position)  (V51)


soundloop.filter/MMA_SoundLoop_Count

NAME
   MMA_SoundLoop_Count (V51) [ISGPQ], ULONG


FUNCTION
   This attribute specified how many times a sound fragment between
  	MMA_SoundLoop_Start and MMA_SoundLoop_End should be repeated in the
   output stream. Note that passing 1 means no loop, as the fragment to be
   looped is played once. Passing 0 gives 2^32 loops, so it can be
   practically considered as infinite looping. When the attribute is get, it
   returns number of complete repetitions left to do at the time of query.
   Default value for this attribute is 1.


soundloop.filter/MMA_SoundLoop_End

NAME
   MMA_SoundLoop_End (V51) [ISGPQ], *UQUAD


FUNCTION
   Loop end point in frames, counted from start of the input stream. This
   attribute is inclusive, it means if this attribute and
   MMA_SoundLoop_Start are set to be equal, one sample frame will be looped.
   Default value of this attribute is equal to MMA_Sound_FrameCount (number
   of frames in the sound). If MMA_Sound_FrameCount is 0 (which means
  	unlimited or unknown length), MMA_SoundLoop_End default value is set to
   $FFFFFFFFFFFFFFFF, so the loop will practically never turn back (which is
   intuitive, as one can't loop unlimited number of frames).


NOTES
   As every 64-bit attribute, it is passed via pointer.


soundloop.filter/MMA_SoundLoop_Start

NAME
   MMA_SoundLoop_Start (V51) [ISGPQ], *UQUAD


FUNCTION
   Loop start point in frames, counted from start of the input stream.
  	Default value for this attribute is 0.


NOTES
   As every 64-bit attribute, it is passed via pointer.


soundloop.filter/MMA_StreamPosFrames

NAME
   MMA_Sound_StreamPosFrames (V51) [..G.Q], *UQUAD


FUNCTION
   Returns number of sound frames pulled on the output so far.


NOTES
   As every 64-bit attribute, it is passed via pointer.


soundloop.filter/MMM_Pull

NAME
   MMM_Pull -- Writes looped audio stream to specified buffer. (V51)


SYNOPSIS
   ULONG DoMethod(Object *obj, MMM_Pull, ULONG port, APTR buffer, ULONG
   length);


FUNCTION
   The method puts specified amount of data in the buffer. A loop specified
   with object's attributes is performed. Looping means repetition of block 
   of data. The block is specified with MMA_SoundLoop_Start and
   MMA_SoundLoop_End, number of repetitions is set with MMA_SoundLoop_Count.
   Note that changing loop start, end and count changes while object is
   inside current loop may lead to strange effects.


INPUTS
   obj - object to perform method on.
   port - number of port, data must be pulled from port 1 (output).
   buffer - destination buffer for data.
   length - amount of data to be pulled in *bytes*.


RESULT
   Number of bytes pulled, secondary error information via MMA_ErrorCode.


SEE ALSO
   multimedia.class/MMA_ErrorCode


soundloop.filter/MMM_Seek

NAME
   MMM_Seek -- Moves stream pointer to a new position. (V51)


SYNOPSIS
   ULONG DoMethod(Object *obj, MMM_Pull, ULONG port, ULONG type, UQUAD*
   position);


FUNCTION
   As usual, this function moves reading position in the stream. This method
   can be succesful only if all previous objects connected in the pipeline
   support seeking. Note that seek position is for output (it means looped)
   stream, not input stream. If for example output stream is inside a third
   repetition of 100 frames loop which should be repeated 5 times, seeking
   either back or forward 100 frames, will not change the source stream
   position.


INPUTS
   obj - object to perform method on.
   port - number of port, seek must be done on port 1 (output).
   buffer - type of seek, MMM_SEEK_TIME or MMM_SEEK_FRAMES.
   position - a pointer to an UQUAD variable holding the new position. It is
     in frames for frame seek and in microseconds for time seek.


RESULT
   Number of bytes pulled, secondary error information via MMA_ErrorCode.
   Seek operation may fail if the connected stream is not seekable.


SEE ALSO
   multimedia.class/MMA_ErrorCode


