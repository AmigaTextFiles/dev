TABLE OF CONTENTS
0001 bmp.decoder/background
0002 bmp.decoder/MMA_Video_BitsPerPixel
0003 bmp.decoder/MMA_Video_Height
0004 bmp.decoder/MMA_Video_UseAlpha
0005 bmp.decoder/MMA_Video_Width
0006 bmp.decoder/MMM_Pull
bmp.decoder/background

DESCRIPTION
   The class decodes Windows BitMap data found in BMP images and Windows
   icons. Supported image depths are 1, 4 and 8 bits per pixel with palette,
   and 24 and 32 bits per pixel for truecolor (32 contains 8-bit alpha
   channel). The decoder supports image mask in icons by merging it into
   alpha channel. Windows BitMap data use reversed vertical scan order
   (bottom-up), so the whole image data must be buffered before decoding.
   That is why using this format is not recommended, as it takes up memory.
   An object of bmp.decoder class has two ports: port 0 is an input
   accepting MMF_VIDEO_BMP format, port 1 is an output producing 
   MMFC_VIDEO_ARGB32 format. The class is a direct subclass of
   multimedia.class.


NEW ATTRIBUTES
   Attributes applicability:
     I - may be set at creation time.
     S - may be set on an existing object.
     G - may be get from an object.
     P - may be set for an object's port.
     Q - may be queried from an object's port.

   MMA_Video_Width          (V50) [..G.Q], ULONG
   MMA_Video_Height         (V50) [..G.Q], ULONG
   MMA_Video_BitsPerPixel   (V50) [..G.Q], ULONG
   MMA_Video_UseAlpha       (V50) [..G.Q], BOOL
       

NEW METHODS
   MMM_Pull(port, buffer, length)  (V50)


HISTORY
   51.4  (28.01.2007)
   - Added workaround for buggy savers setting structure size field in the
     header to 0, 40 bytes is assumed in this case.
   - Fixed error reporting in Setup(), result of LoadData() is returned
     instead of TRUE.
   - All memory allocations are now done with MediaAllocVec().
   - Added workaround for images with shortened palette (only NumColors
     palette entries).
   - Added workaround for palette images with NumColors set to 0.
   - Added workaround for images having extra data after bitmap header or
     palette (forward seek to pixel data offset).
   - Added RLE8 decoder for compressed 8-bit images.

   51.3  (13.06.2005)
   - Fixed broken MMM_Setup.

   51.2  (20.04.2005)
   - Added debug info in the constructor and the destructor.
   - Added missing OM_GET entry in the dispatcher.

   50.4  (07.11.2004)
   - Fixed 24-bit images problem.

   50.3  (07.11.2004)
   - Added code for two colour BMP images.
   - Switched to system macros for byteswapping.

   50.2  (11.10.2004)
   - Fixed messed entries in query taglist.
   - Query tags are accessible via the class base.

   50.1  (12.09.2004)
   - Initial revision.


bmp.decoder/MMA_Video_BitsPerPixel

NAME
   MMA_Video_BitsPerPixel (V50) [..G.Q], ULONG


FUNCTION
   Returns image colour depth. Possible values for bmp.decoder are 1, 4, 8,
   24 or 32.


bmp.decoder/MMA_Video_Height

NAME
   MMA_Video_Height (V50) [..G.Q], ULONG


FUNCTION
   Returns height of image frame in pixels.


bmp.decoder/MMA_Video_UseAlpha

NAME
   MMA_Video_UseAlpha (V50) [..G.Q], BOOL


FUNCTION
   Returns TRUE if Windows BitMap image data contain alpha channel or image
   mask (which is merged with alpha channel), FALSE otherwise.


bmp.decoder/MMA_Video_Width

NAME
   MMA_Video_Width (V50) [..G.Q], ULONG


FUNCTION
   Returns width of image frame in pixels.


bmp.decoder/MMM_Pull

NAME
   MMM_Pull -- Writes common format image data to specified buffer. (V50)


SYNOPSIS
   ULONG DoMethod(Object *obj, MMM_Pull, ULONG port, APTR buffer, ULONG
   length);


FUNCTION
   Pulls needed amount of Windows BitMap data from input, processes them to
   get image data in the common format and places them in the specified
   buffer.


INPUTS
   obj - object to perform method on.
   port - number of port, data must be pulled from output, so 1.
   buffer - destination buffer for common format image data. This buffer
     must be allocated with MediaAllocMem().
   length - amount of data to be pulled in bytes. It should be evenly
     divisible by number of bytes per pixel for the common format (4 for
     MMFC_VIDEO_ARGB32), if not, it is rounded down, and the rest of bytes
     are undefined.


RESULT
   Number of bytes pulled, secondary error information via MMA_ErrorCode.


SEE ALSO
   multimedia.class/MMA_ErrorCode


