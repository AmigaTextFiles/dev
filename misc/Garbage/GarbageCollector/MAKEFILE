############################################################################
#
# $Id: MAKEFILE 1.0 1996/12/01 06:29:24 ssolie Exp ssolie $
#
############################################################################
#
# Copyright (c) 1996 Software Evolution.  All Rights Reserved.
#
# You are hereby granted the right to copy and distribute verbatim copies of
# this program if the contents are preserved and remain unchanged.  You are
# not permitted to use any portion of the program source code in any product
# or service being sold for profit without the prior written concent from
# its author.
#
# No guarantee or warranty of any kind is given.  Use at your own risk.
#
############################################################################
#
# Makefile for "garbage collector" library.
#
NAME		= collector
LIBNAME		= garbage.lib
LIBOBJS		= garbage.o
STARTUP		= LIB:c.o
OBJECTS		= collector.o $(LIBOBJS)
LINKOPTS	= NOICONS
LIBS		= LIB:debug.lib LIB:scmieee.lib LIB:sc.lib LIB:amiga.lib

############################################################################
#
# Makes everything
#
All: $(NAME)
	oml $(LIBNAME) R $(LIBOBJS)


############################################################################
#
# Executable program creation
#
$(NAME): $(OBJECTS) $(LIBS)
	SLINK <with <
FROM $(STARTUP) $(OBJECTS) TO $(NAME).debug LIB $(LIBS) $(LINKOPTS)
<

	SLINK FROM $(NAME).debug TO $(NAME) ADDSYM


############################################################################
#
# Source file dependencies
#
collector.o:	collector.c garbage.h
garbage.o:		garbage.c garbage.h


############################################################################
#
# Default rules
#
.c.o:
	SC $*.c

.a.o:
	SC $*.asm
