<html>
<head>
<title>
Using Istar - For Inference
</title>
</head>
<body>
<h1>USING ISTAR - FOR INFERENCE</h1>
<!-- -->
      <p>
This is a step-by-step tutorial on how to make good use of Istar, and we 
start by looking at how to make use of inference.  We take real life kinds 
of tasks you might want to use it for and guide you in building knowledge 
bases (KBs) of various kinds, to teach you some of the features of Istar, 
and also to prod your thinking in how you could use it.  But there's lots 
of facilities that you will not meet in this chapter.
      <p>
      <b>Before you start</b> here, read the sections <a
href="driving.html#starting">"How do I start it?"</a> and <a 
href="driving.html#more">"Going further"</a> in the <a 
href="driving.html">Driving Istar</a> document.  This guide is at a higher 
level: it does not describe the features of Istar so much as when you might 
make use of them, for what purposes or human tasks.  Also, check your 
version of Istar: this is geared to version 1.08, though earlier versions 
will have only slight differences.
      <p>
      We present several sections here, each a small project with Istar of
about quarter of an hour.  Each is designed to let you see what Istar could 
be useful for and at the same time how to employ its facilities.  It 
provides an introduction not just to use of Istar facilities but to the 
creation of KBs in general.  You will find some useful tips.  The first 
eight or so sections take you through some of the potential benefits of 
knowledge based systems and introduce the main features.  But the KB you 
build during these is far from accurate.  Only towards the end do we 
consider how to make the KB more accurate.
      <p>
      The structure of the projects is to introduce useful features and
techniques one by one, and later projects make use of things learned in 
earlier.  So it is advisable to carry them out, or at least read them, in 
the order given.  At the end you should be able not only to drive Istar but 
to take your first steps in building real knowledge bases.  Have fun.
      <p>

<h2><a name="eval">1.  EVALUATING STOCKS AND SHARES</a></h2>
<!-- -->

Suppose your friend asked you for advice on buying stocks and shares.  As 
an alternative to talking or writing to him you could give him a knowledge 
base.  Then he could run it, it would ask him questions about a company he 
is interested in and would offer advice.  In this section you will create a 
(much simplified) knowledge base (KB) that gives such advice.  (A fuller 
version of such a knowledge base is available via the Istar <a href= 
"server.html">Knowledge Server</a>; you can run it over the Internet using 
your browser from a link on that page.  After reading this, perhaps connect 
to it for a short run to see what you will be aiming at as you go through 
this tutorial.)
      <p>
      What other reasons are there for building such a KB?
<ul>

<li>  For yourself: it would remind you at a later date of the advice you
      were giving; so <b>a KB can be your memory</b>.

<p>
<li>  This could be useful for legal reasons; so <b>a KB can be a precise
      record of knowledge</b>.

<p>
<li>  You could provide it to 100 friends and acquintances, almost as
      easily as to the initial friend; <b>a KB can be a distribution
      mechanism</b>.
      <p>
<li>  You could <b>sell it</b>.

      </ul>
      <p>
So, let's start building it.
      <p>
#  <b>Fuzzy knowledge.</b>  Buying shares depends on 'fuzzy' factors like 
the quality of the management, the strength of the market, etc. as well as 
on quantitative ones like share price.  So we will use Bayesians to build 
our KB - these allow accumulation of fuzzy evidence for and against various 
propositions, and involve special arithmetic that is explained elsewhere. 
In the top-right window (Item Types) select 'Bayesian'.
      <p>
#  <b>Drawing an inference net.</b>  Draw a box (<a 
href="driving.html#draw.box">Driving step 4</a>) towards the right of the 
screen and name it 'Buy It' (<a href="driving.html#name.it">Driving step 
9</a>).  (Note the wee 'OK' button to the right of the Label gadget; it is 
a version of the main one further below, there for your convenience when 
all you are doing is to fill in a name or meaning.)  'Buy it' is the 'goal' 
item, the thing we want to find out, the overall purpose of our KB.
      <p>
#  Draw two more boxes a couple in inches to the left of 'Buy It', calling 
them 'Will grow' and 'More profits', which express the ideas that the 
company will grow in the future and that its profits are likely to 
increase.
      <p>
#  (</b>Labelling.</b>  You can use longer names/labels if you wish, but 
the shorter the better as long as it not too ambiguous.  A good rule for 
labelling this kind of fuzzy qualitative concept: make the name a short 
proposition rather than a numeric value.  So just 'Profits' can be 
confusing since it could mean "Profits are likely to increase" or "The 
numerical value of last year's profits".  In this case 'More Profits' or 
'LYP value', respectively, might be good labels as long as you also fill in 
a longer Meaning.)
      <p>
#  Both 'Will grow' and 'More profits' are good indicators that shares in 
the company are worth buying, so we link them to 'Buy it'.  Draw a link 
from 'Will grow' to 'Buy it' and from 'More profits' to 'Buy it'.  (Your KB 
should now resemble a V on its side if the two antecedents, 'Will grow' and 
'More profits', are to the left of 'Buy it' and slightly higher and lower 
than it.)
      <p>
#  <b>Run it</b> (<a href="driving.html#running">Driving step 12</a>: bring 
up Attribute Action Panel for 'Buy it', hit Reset and Infer) with a company 
in mind - fictitious or real.  It will ask you to provide slider values 
that represent your <b>degree of belief</b>, first your belief that the 
company will grow, then your belief that the company's profits will 
increase.  Belief is positive to the right, negative to the left, the 
further from the centre, the stronger your belief.  (Note: at this stage, 
it just puts the label or meaning before you.)
      <p>
#  Look at the result (<a href="driving.html#adp.result">Driving step 
13</a>).  Not very interesting yet and probably totally wrong in its 
result, but you have built your initial KB.  Not really ready for your 
friend, so let's add some more knowledge.
      <p>
#  What determines whether a company - any company - will grow?  There are 
many factors, and we'll add a few below.  But for now we'll only add two: 
the company is in a growth sector of the economy and the company has good 
management.  So add two antecedents to 'Will grow' (draw two boxes with 
names e.g. 'Strong sector' and 'Good management', and link them to 'Will 
grow').  Now a create a couple of antecedents for 'More profits' and link 
them in: the company has a good financial history ('Good fin hist') and the 
company has low overheads ('Low overheads').  Now the KB looks like a 
branching tree on its side.
      <p>
#  But most KBs are <b>not pure trees but networks</b>.  Connect 'Good 
management' to 'More profits' just as it is already connected to 'Will 
grow', showing that we believe that increases in profits are more likely 
with good management.
      <p>
#  Run the KB; it will now seek your degree of belief about four things: 
Strong sector, Good management, Good fin hist and Low overheads.  Make some 
positive, some negative.
      <p>
#  Save it, by clicking the 'Save As' button on the left side of the KB 
Panel and giving a name.  (You will also be asked whether to make the 
SaveAs file the Save file; just hit 'Yes' for now; it allows you to use the 
Save button in future.)
      <p>
#  To summarize, in this section we have:
      <p>
<ul>
<li>  Noted several reasons for building a KB.
<li>  Used bayesian attributes/items to represent fuzzy knowledge ..
<li>  .. in terms of degrees of belief.
<li>  Drawn an inference net to evaluate attractiveness of an option.
<li>  Run it.
</ul>
      <p>

<h3><a name="fuller.kb">1a.  A Fuller KB</a></h3>
<!-- -->

To give you some idea of what a fuller share-evaluation KB might look like, 
locate the Main Control Panel (left side of control screen unless you have 
moved it).  Hit the 'Get KB' button, and select the Share Dealing file. 
This KB will be loaded, with its easel, and you will see it has around 
thirty boxes.  It's a bit messy, and the knowledge is incomplete, but it is 
starting to show the factors that affect decision to buy shares.
      <p>
#  Run it with 'Buy it' as goal item <a href="driving.html#running">Driving 
step 12</a>.  You will be asked a couple of dozen questions.
      <p>
#  Then hit the 'Rid' button bottom left of the KB Panel, and the Share 
Dealing KB will be removed, leaving only the one your are working on.
      <p>

<h2><a name="what.if">2.  DECISION SUPPORT - WHAT-IFFING</a></h2>
<!-- -->

A KB like the one you have just created can be used in a <b>decision 
support</b> mode.  If we run it several times giving different answers each 
time then we can see the effect of the various factors.  This is called 
what-iffing.  From this we might find that certain factors are more 
important than others and this can help us plan e.g. where to put resources 
or, in this scenario, what portfolio of shares to buy.
      <p>
#  Run the KB (<a href="driving.html#running">Driving step 11 and 12</a>) 
with Strong Sector and Good fin hist having strong positive belief (100) 
and Good Management and Low overheads having strong negative belief (-100). 
The result should be slightly to the left of centre, around 33%.
      <p>
#  (Notice that your input is in terms of <b>degrees of belief</b> while 
the answer is in terms of <b>probability</b>, but visually they should be 
similar at present: left of centre is negative indication, right is 
positive.)
      <p>
#  Now run it again (shortcut from the data panel to the action panel by 
pressing the OK-Act button rather than the OK button).  Reverse all the 
answers and you should obtain a slightly positive indication, 66%.
      <p>
#  We can derive some initial knowledge from this: the combination of Good 
management and Low overheads is a stronger indication of whether to buy 
than the combination of Strong sector and Good financial history.  (That 
assumes our knowledge base is correct and complete, of course, which is 
certainly is not!)  This is the way we use KBs for decision support: try 
various combinations of factors against others.
      <p>
#  But is there any overriding factor?  Run again, giving the first two 100 
and the second two -100.  The result should again be slightly positive. 
Then try other combinations of pairs of 100 and -100.
      <p>
#  What should happen is that the pair that contains Good management should 
always determine the final result.  What this means is that good management 
is a more important indicator than the others.  In looking at the KB it 
should be obvious why this is so:  Good management feeds its influence 
through to the final goal ('Buy it') by <b>two routes</b> while the others 
feed their influence by only one.  All other things being equal, the more 
routes by which a factor feeds through to the goal the more important it 
becomes.
      <p>
#  In a large KB it can be difficult to find these multiple inference 
paths, and Istar provides mechanisms for finding them; see later.  But in 
most real KBs all other things are not equal; the links themselves have 
varying strengths (weights).  So you cannot determine the strong factors 
merely by looking at the net; you must run it to find out.
      <p>
#  (Above we always divided the factors into pairs and always gave them 
extreme values; that was just to give you the idea; in reality all sorts of 
values would be used and we might vary only one or two factors at a time.)
      <p>
#  To summarize, in this section we have:
      <p>
<ul>
<li>  Used the KB in what-if mode.
<li>  Thereby found which factors are important.
<li>  Noted the effect of parallel inference paths.
</ul>
      <p>
<h2><a name="easier">3.  MAKING IT EASIER AND TIDIER TO USE</a></h2>
<!-- -->

When your KB becomes larger the above procedure becomes a bit cumbersome. 
Here are a couple of things to tidy it up and make it less cumbersome.
      <p>
#  First, let us put in <b>proper question text</b> for the degrees of 
belief.  What we do is to provide question text for each of the four 
antecedent factors.  To do this, for each in turn do the following:
      <p>
      #  Click with the RIGHT mouse button on the middle of the box
      expressing the item.  (The Attribute Details Panel should appear; if
      nothing happens, it is probably that the main easel is not active; to
      make it active, click on the easel with the left mouse button as per
      normal Intuition practice.)
      <p>
      #  In the Attribute Details Panel, find the first long string gadget,
      the 'Q' to the right of 'User supplied'.  This is the question text.
      Click in it and fill in the question texts, e.g. "Do you believe the
      company is in a strong sector?", "What is your degree of belief that
      the company has good management?", "Have they a strong financial
      history?", "Do you believe they have low overheads?"
      <p>
      #  Now, run the KB again, and your questions should appear.
      <p>
#  Second, it's a nuisance having to bring up the attribute data panel each 
time to see the result.  We can <b>show the result directly</b> on the main 
easel.  To do this bring up the Attribute Details Panel for 'Buy it' (<a 
href="driving.html#adp">Driving step 9</a>).  At the left end of the third 
row of gadgets is a check box 'Show Value'.  Click that so that a tick 
appears.  Click Ok-Act to bring up the action panel and run the KB again. 
You should see a short black <b>value line</b> part way across the bottom 
of the 'Buy it' box.  This shows its current value as a probability; the 
longer it is, the higher the probability of the concept expressed by the 
box (note: probability rather than degree of belief).  Run it a few times 
and you can see how the value changes, not so precisely as with the data 
panel but enough to give a useful indication.  (Note: the show value 
facility does not work for all data types at present; only booleans, 
probabilities, proportions and bayesians.)
      <p>
#  Such a <b>value line</b> is solid when the attribute is answered, and 
dotted when it is unanswered.  By judicious choice of which attributes have 
value lines you can gain a visual indication of how the KB is progressing.
      <p>
#  Third, you can do this with all the antecedents too, showing their 
values.
      <p>
#  Fourth, if you just want to <b>change a single input antecedent</b>, you 
don't have to reset and re-ask all the others.  Suppose you want to see the 
effect of varying just 'Good management'.  Click on it with the left mouse 
button to bring up an action panel for it.  Then hit Reset and Infer.  You 
will be asked only for Good management.  But the answer will be propagated 
through to 'Buy it'.  Try this several times.  Forward propagation does not 
stop at the current goal (i.e. for which an action panel has been raised), 
but spreads throughout the entire KB net as far as possible.  By varying 
'Good management' between its extremes you can see the maximum potential 
effect it can have, which is a good indication of its importance.  (Note: 
For this to work properly, you should ensure that the final goal, 'Buy it', 
has been answered.  If it is not answered then the effect of 'Good 
management' will not be propagated through to it because propagation 
usually only occurs once an attribute is answered.)
      <p>
#  (There is also an override facility, by which you can do similar what-
iffing with items in the middle of a net; we will cover that later.)
      <p>
#  A <b>goal</b> is an attribute whose value we are interested in 
obtaining, by the backward and forward chaining process and the question 
sequence.  So far, to obtain the value of a goal like 'Buy it' you have had 
to bring up the Attribute Action Panel, then hit Reset and Infer.  But 
suppose we have twenty such goals; it would be tedious to do this twenty 
times.  As we will see below, we can set up <b>goal lists</b> to make this 
less cumbersome.
      <p>
#  <b>Not yet saleable.</b>  Your KB is probably tidy enough to be usable 
by you and by your friend if s/he is sympathetic.  But it is not yet tidy 
enough to sell (even supposing that the knowledge is complete and 
accurate).  But this version of Istar is not designed to take you all the 
way to building a commercially attractive KB; it is, rather, a tool to help 
you create knowledge bases in ill structured areas.  Then you can export 
your KB to other software if you wish.
      <p>
#  To summarize, in this section we have:
      <p>
<ul>
<li>  Attended to ease of use and tidiness.
<li>  Introduced question text.
<li>  Used the Show Value facility.
<li>  Inferred single attributes on their own.
<li>  Mentioned goal lists.
</ul>
      <p>

<h2><a name="kg.ref">4.  KNOWLEDGE REFINEMENT AND CLARIFICATION</a></h2>
<!-- -->

By now you have probably thought about other factors that should be taken 
into account when deciding whether to purchase shares.  Also, you have 
probably thought that concepts like 'Good management' are a bit vague.
      <p>
      You'd be right on both accounts.  What has happened is that in the
process of putting the KB together and then trying it a few times your 
thinking about the domain of knowledge has been stimulated.  This can be 
just remembering things; it can also be actual <b>refinement or 
clarification</b> of your own knowledge.  Istar can help you to clarify and 
refine your knowledge, which is especially useful is decision support.
      <p>
#  The first step in refinement or clarification of knowledge is to set 
down <b>precise meanings</b>.  By 'Buy it' we mean something like "This 
company's shares are worth buying at the moment" rather than, for instance, 
"I command you to buy this share" or even "This share is, and always will 
be, worth buying".  So bring up the attribute details panel for 'Buy it'. 
Top right is a string gadget for 'Meaning'; into it put text similar to the 
first above.
      <p>
#  <b>Important Tip</b>:  Normally you should fill in the meaning as soon 
as you create the box.  (We have done so later here because of the order in 
which these tutorial sessions have been planned.)
      <p>
#  (Tip:  Notice several things that have been specified when making the 
meaning of 'Buy it' precise:
      <p>
      #  What we buy: "shares"
      #  Which we buy:  "of this company"
      #  The situation (when, where, etc.): "at the moment"
      #  etc.
      <p>
Making meaning precise often involves asking what, when, where, who, which, 
etc.)
      <p>
#  Now make the meaning of 'Strong sector' precise.  What about: "The 
company operates is a strong and growing sector."  Notice the inclusion of 
growth as well as general strength.
      <p>
#  This inclusion of sector growth sets us thinking: we are happy about 
steady, well-founded growth, but maybe not about artificially induced boom-
type growth.  So, for now, go back to 'Strong sector' and alter its Meaning 
to "... strong and growing (but steady, not boom) sector."  (Note how we 
are frequently accessing the Meaning gadget - just hit return once to get 
there - and how useful is the wee 'OK' button.)
      <p>
#  Now make the meaning of 'Low overheads' precise; devise your own text.
      <p>
#  Now try 'Good management'.  This one's perhaps not so easy to define. 
The two links we have from it, to 'Will grow' and 'More profits', speak of 
<b>two aspects</b> of quality of management.  The link to 'Will grow' 
speaks about the extent to which the management has a vision to grow the 
company and has the skills to do so, such as marketing.  The link to 'More 
profits' speaks more about the financial policies of the management: is 
their spending under control, is their investment policy sound, and so on. 
So, as we try to make the meaning precise we see that perhaps there are 
several things currently <b>bound together in the single concept</b> 'Good 
management'.
      <p>
#  We have several options here.  We can retain the the single, composite 
concept.  We can <b>split the concept</b> into several others.  Or we can 
do both.  We will do both, first splitting it and later reinstating it for 
usability purposes.
      <p>
#  Pull the 'Good management' box over to the left of the others, leaving 
enough space to place a couple of boxes between it and the others.  The 
links extend to follow it.  (Opps:  Not enough room to left?  Then move the 
other boxes to the right.  Or hit the right-arrow key and the whole KB 
moves.)
      <p>
#  Draw a box and label it 'Vision for growth' and give it a meaning like 
"The management of this company has a vision for growth."  Place it 
somewhere north-east of 'Good management'.
      <p>
#  Now we will <b>redirect a link</b>.  Hold the <i></b>left shift</b> 
key</i> down.  This will enable you to 'pick up' the end of a link and move 
it to another box.  Place mouse cursor over the end of the link from 'Will 
grow' where it leaves the 'Good management' box, press left mouse button 
and drag the mouse.  The link should now leave the box and follow the 
mouse.  Release the end of the link over the new 'Vision for growth' box. 
(<b>Oops</b>:  The wrong link (the one to More Profits) is picked up 
instead?  It picks up the link nearest to the mouse cursor position.  Hit 
Escape and try again.  <b>Oops</b>:  It doesn't pick up the link but rather 
starts drawing a new link or box?  You didn't keep the <i>Left Shift</i> 
key down while you pressed the LMB.  <b>Oops</b>:  The box grows or shrinks 
in size as you moved the mouse?  That happens if you hold the Right Shift 
key down istead.  In either case, hit Escape and try again.)
      <p>
#  How to remember it is the Left Shift key?  Well, you are shifting a 
link, and 'link' and 'left' both begin with L.
      <p>
#  If you run the KB now you will be asked about 'Vision for growth' as 
well as all the others.
      <p>
#  (Note:  The ability to redirect a link so easily is a boon: in many 
pieces of software you have to delete the link and draw a new one.  While 
this is not much of a problem here, once you have added weights to the link 
and perhaps routed it around the diagram you lose all that information and 
have to reinstate it all again.)
      <p>
#  Now draw a box 'Good fin policy', somewhere south east of 'Good 
management', with meaning like "The management of this company has sound 
financial policy."  Redirect the link between 'Good management' and 'More 
profits' in the same way as above so that it now starts at 'Good fin 
policy'.
      <p>
#  (Notice:  We still have a 'Good management' box but it is not connected 
to the goal 'Buy it'.  If you run the KB now it will no longer ask about 
'Good management'; <b>backward chaining only reaches those parts that are 
connected to the goal</b>.  We could delete it, but as there is no need to 
do so and as we sometimes find we need such items later, just leave it and 
ignore it.  We will come back to it at the very end, making the KB more 
usable.)
      <p>
#  Now that we have identified sound financial policy as a relevant concept 
in our KB we notice its similarity with good financial history.  Assuming 
that the management has been in place for some time, presumably the good 
financial history is due in part to sound financial policy.  So we really 
want 'Good fin policy' to link into 'Good fin hist' as well as directly 
into 'More profits'.  Link them (drawing a line from the right hand edge of 
'Good fin policy' into 'Good fin hist' - if 'Good fin policy' is above 
'Good fin hist' then you might want to make the link S-shaped, using the 
space bar to insert bends).
      <p>
#  To come to think of it, maybe we shouldn't have 'Good fin hist' at all. 
Maybe it is almost completely subsumed under 'Good fin policy' as far as 
'More profits' is concerned?  That is:
      <p>
      #  If the management has good financial policy then there will have
      been a good financial history.
      <p>
      #  If the management has bad financial policy then there is no way
      that there could have been a good financial history.
      <p>
The latter is bound tightly to the former and is fully dependent on it. 
But, putting as starkly as that makes us think: are there any reasons why 
we might have a poor financial history even though the policy is good, or 
that we might have a good financial history even though the policy is bad? 
Can you think of any?  I can.
      <p>
#  For the purpose of this tutorial, we will assume these two items have 
the same meaning, and merely delete the link from 'Good fin hist' and 'More 
profits' so that the former no longer has influence on the latter.
      <p>
#  <b>Deleting a link</b>.  With right mouse button click over the link 
between 'Good fin hist' and 'More profits'.  Up comes a <b>Relationship 
Instance panel</b> with details of this particular link.  (Notice, in 
passing, the Unary Op type ('Normal') and the Weight figures towards the 
bottom which is contained in four small boxes and should read 3,1, 1,3.) 
But ignore all else but the 'Delete' button.  Click it.  The link 
disappears.
      <p>
#  (We have the option of at least two other courses of action: delete the 
item 'Good fin hist' or merge it with 'Good fin policy'.  See the section 
on <a href="net.manip.html">Common Net Manipulations</a>.  Deletion of an 
item is more drastic than deletion of a link and in knowledge refinement it 
is often to err on the side of caution.  Even though the two concepts 
appear similar as far as 'More profits' is concerned, they are not in fact 
identical in terms of their actual meaning, and it might come about that 
later parts of the KB require 'Good fin hist' as distinct from 'Good fin 
policy'.)
      <p>
#  <b>Save (Save-As) the KB as 'R1'</b> so we can pick it up later.
      <p>
#  While we have been manipulating the concepts above, maybe you have 
thought of <b>other factors</b> that contribute to a belief that this 
company's shares are worth buying?  If so, you can always add it: just 
place a box for it, link it to 'Buy it' and give it a name and meaning. 
Maybe you've thought of something extra that contributes to a belief in 
'Will grow' or any other box.  Add the new concept(s) in the same way.
      <p>
#  <b>Negative evidence</b>.  Lastly, for now, maybe you have also thought 
of some factor that would lower your belief in 'Buy it'.  For instance, 
even if we believe the company will grow and its profits will increase, if 
there are rumours that its management have been involved in shady dealings, 
then perhaps it would be dangerous to buy shares.  So, in a suitable space 
to the left of 'Buy it' draw a box 'Shady dealing' with meaning "The 
management is believed to have been involved in shady deals."  Now start 
drawing a link from 'Shady dealing' towards 'Buy it', but <i>while you are 
drawing it, hit the Minus key</i> (to right of '0' on top row of keyboard). 
You should see the line change colour from red to black, indicating that it 
is now a <b>negative link</b>.  (If you change your mind, and want to 
change it back, hit the Plus key.)  Then release the link over 'Buy it'. 
(<b>Oops</b>:  Hitting minus key has no effect?  You've probably hit the 
one on the numeric keypad; hit the one above the main keyboard instead.)
      <p>
#  Negative evidence acts in a similar way to normal evidence, except that 
its effect is reversed.  When you run a KB with a negative link, as you 
increase belief in the negative evidence then it decreases belief in its 
consequent.  Try it in the what-iffing mode described above.
      <p>
#  Click right mouse button over the negative link to obtain its 
Relationship Instance panel.  Notice that the Unary Operator is 'Negate'. 
For all the positive links in your KB the Unary Operator is 'Normal'.  If 
you ever want to change a link from positive to negative or vice versa once 
it is drawn, then bring up this panel and change its Unary Op type (click 
the wee button to left of its name, as described for Inference type in <a 
href="driving.html#change.im">Driving step 21</a>).  Then click 'OK'.
      <p>
#  Notice how our process of knowledge refinement works, in several ways, 
and of course there are others.  Istar provides an easy to use too to aid 
the process of knowledge refinement and clarification.
      <p>
#  To summarize, in this section we have:
      <p>
<ul>
<li>  Found several ways of refining knowledge:
<li>  .. by making meanings precise
<li>  .. by splitting a concept to become more than one
<li>  .. by merging two concepts that are (almost) the same
<li>  .. by thinking of other concepts
<li>  Noted how these happen naturally as we build the KB.
<li>  Used the facility to redirect links.
<li>  Deleted a link.
<li>  Used negative evidence.
</ul>
      <p>

      <p>
<h2><a name="kg.comm">5.  KNOWLEDGE COMMUNICATION AND MUTUAL 
UNDERSTANDING</a></h2>
<!-- -->

(Section contains no software action.)
      <p>
The above exercise, especially that of deciding to remove 'Good fin hist', 
shows <b>knowledge clarification</b> in action, and it comes about as a 
direct result of creating a KB with a tool like Istar.  Indeed, as 
explained in Basden and Hibberd (1996) and Basden, Brown, Tetlow and 
Hibberd (1996), this is precisely why Istar was designed the way it has 
been, and why much other knowledge based software is not so easy to use. 
The process of building a good KB often involves amending what you have 
done before, and changing your mind several times!  But it's even better 
when knowledge engineer (you) and expert work together.
      <p>
      Imagine carrying out knowledge refinement with a colleague who has
some expertise, both of you around the screen.  To have someone to bounce 
ideas off is often very fruitful.  And it is often of benefit to ensure the 
newly emerging ideas are communicated to a colleague - and understood by a 
colleague.  Istar is designed for partnership working, where two (or a few) 
people are around the screen.  (And, in fact, one major reason for Istar 
being on the Amiga is that the Amiga produces a direct PAL/NTSC video 
signal which can be fed directly into a large screen TV or video projector, 
for use in such situations.)
      <p>
      (Note: This is NOT the same as group working where each has their own
screen linked by some electronic means, though in principle Istar could 
support that.  What we are talking about here is the technically more 
modest situation - but probably socially and practically more useful 
situation - where two or more people sit around a single screen.)
      <p>
      You have a partially developed KB up in front of you and your
colleague.  Think of the knowledge refinement steps we have been through:
      <p>
      <ul>
<li>  making meanings precise
<li>  a concept becomes more than one
<li>  two concepts are seen to be (almost) the same
<li>  thinking of other concepts.
      </ul>
      <p>
If a colleague sat with you, there are four things that could be going on. 
The first two occur when knowledge is being refined, as above.
      <p>
      #  First, your colleague just observes your actions and listens to
      you as you refine your knowledge.  Then your thinking and reasoning
      would be communicated.  S/he would understand why you believe, for
      instance, that 'Good management' is not a sufficiently precise
      concept.  Using Istar helps this communication and mutual
      understanding of what are often ill-defined areas.
      <p>
      #  Second, your colleague takes an active part in the refinement
      process, as the two of you discuss whether 'Good management' should
      be split in two, in three, or kept as a whole.  Using Istar
      facilitates this discussion by providing a graphical 'language' in
      which to express and try out ideas.
      <p>
The third and fourth occur when knowledge is already in a reasonably clear 
state and is merely being set down into the KB without being refined. 
(This might happen, for instance, when you are entering knowledge from a 
rulebook or knowledge of established good practice.)
      <p>
      #  Third, your colleague just observes you building the KB.  But the
      order in which you build it communicates something of importance.  So
      does your 'body language' while building it - for instance, the act
      of moving 'Good management' to the left to make room gives
      information about your intentions.  Istar is then facilitating simple
      one-way, communication, but of more than pure information.
      <p>
      #  Fourth your colleague takes an active part in the construction
      process: "Haven't you forgotten X factor?", "Is that how you
      interpret that rule; I would interpret it in a different way."
      Again, Istar facilitates communication, but this time a two-way
      communication.
      <p>
      In addition to its clear graphical display and intuitive mechanisms
for drawing knowledge bases, it has been found that a third facility is 
very important for communication:  the flashing up of the meaning of an 
item at the bottom of the screen as the mouse runs over it.  You've almost 
certainly noticed it, but if not, just move the mouse over the items of 
your KB.  (If nothing happens, it is probably because the main easel window 
is not active, and so you must make it so by clicking over its background.)
      <p>
      Superficially like the speech bubbles that come up in MUI, Windows or
the Mac, that explain what a button is for, this has a rather more 
sophisticated use in showing high level meaning rather than low level 
action.  It was found during the INCA project (Basden, Brown, Tetlow and 
Hibberd, 1996) that the knowledge engineer made little use of it since it 
was not in the main field of view but the onlooker (your colleague) made 
enormous use of it to see the meanings of the various items of itnerest.
      <p>
      To summarize, in this section we have:
      <p>
<ul>
<li>  Noted how Istar can aid communication in four ways
<li>  .. by working with a colleague
<li>  .. who either actively takes part or just observes.
<li>  Noted the use of Istar's facility to show meaning.
</ul>
      <p>
<h2><a name="benefits">6.  TYPES OF BENEFIT OF A KB</a></h2>
<!-- -->

(Section contains no software action.)
      <p>
We have now discussed four types of benefit that can accrue from a KB.  In 
the first two:
      <p>
      <ul>
<li>  simple evaluation of the attractiveness of a share
<li>  what-iffing to find significant factors
      </ul>
      <p>
the benefit accrues from running a completed KB, while in the latter two,
      <p>
      #  refinement and clarification of your knowledge and
      #  communication and discussion,
      <p>
the benefit accrues from the process of constructing the KB, rather than 
running it.  For the remaining sections we will return to types of benefit 
that can accrue from running a completed KB, and how these benefits 
influence the form and style of the KB:
      <p>
      <ul>
<li>  predicting behaviour
<li>  selection from known options
<li>  selection from undefined options
<li>  causal modelling
<li>  diagnosis
<li>  critiquing.
      </ul>
      <p>
All these assume a completed KB and the benefits accrue from running it. 
The KB you have already built is general purpose and can fulfil most of the 
purposes but with varying degrees of clumsiness.  For most effective use 
the KB should be tailored to the purpose for which it is designed.
      <p>
      I say purposes rather than purpose because many KBs hold knowledge
for more than one purpose.  For instance the Wheat Counsellor KB first 
predicted what diseases were likely in a crop of winter wheat and then 
selected the appropriate preventative treatment.  But we will look at the 
style required for each purpose, and as we do, will meet and learn about 
various facilities of Istar.
      <p>

<h2><a name="prediction">7.  PREDICTING THE BEHAVIOUR OF YOUR 
SHARE</a></h2>
<!-- -->

Your knowledge has been refined and the KB now expresses what you believe 
about share purchasing (or let us suppose so).  As you might have realised, 
your KB can be used to predict outcomes.  Suppose you have knowledge of a 
particular company and its situation.  Then if you poke this information 
into the KB it will predict the attractiveness of the shares of that 
company to investors.
      <p>
#  All you have to do is to run the KB; there is no change required to the 
knowledge.  (Bring up the action panel for 'Buy it' and click Reset and 
Infer.)
      <p>
#  What this underlines is that a well designed KB is actually multi-
purpose when run:  for evaluation, critique, understanding, communication 
and prediction.  Just as with any good model.  So, in a sense, a good KB is 
a model of reality and Istar can be seen as modelling software.  But, as 
those of you who have been involved in modelling will have realised, a 
rather different style of software.
      <p>
#  So far you have been dealing with bayesians, representing fuzzy 
concepts.  But much modelling deals with harder or more precise concepts, 
and for these we need numbers, booleans, etc.  Istar provides a host of 
these, though some obvious ones like date are still missing.  For the full 
list, see the file on <a href="value.types.html">Value Types</a>.  For now 
we will use numbers and booleans.
      <p>
#  A <b>boolean</b> is like a sharp, hard bayesian, the common true-false, 
yes-no distinction.  Bring up the attribute details panel for 'Strong 
sector'.  On the second row of gadgets, headed 'Value', the leftmost shows 
the value type (Bayesian).  Click on the wee type-change gadget at its 
left-hand end and a list of value types appears.  Select Boolean (and hit 
its OK button).  (If you get a warning message that value type is 
inconsistent with inference method, it just means that 'Strong sector' is 
set to 'Infer' rather than 'User supplied'; ignore it for now as it will 
have no effect since there are no antecedents.)  You will see the value 
type in the attribute detail panel change - but it has not come into effect 
yet.  So click 'OK'.  Then bring up the attribute detail panel again, and 
you will see that the value gadget itself, to the right of the value type 
identifier, is no longer a slider but a checkbox.  You have <b>changed 
value type</b>.
      <p>
#  Now run it, and you will see that when it asks about 'Strong sector' it 
no longer gives you a slider but a check box.  (Rather ugly, this tiny 
checkbox; in future versions there will be an option of a larger gadget 
saying Yes/No.)
      <p>
#  Now for a <b>numeric value</b>.  We'll use floating point numbers here, 
though there are other types including integers, ratios, ordinals, 
enumerators, proportions, etc.  First, we'll practice with just numeric 
values, then we'll use a numeric value in our bayesian network, which takes 
a bit more thought.  Because: how can we integrate a numeric concept like 
Share Price into a fuzzy propositional concept like whether or not to buy 
the share?  Think about it as we practice some numerics.
      <p>
#  Distance is half of acceleration times the square of time (if I remember 
my school physics correctly).  On the Select Item Type panel click on Free 
Float.
      <p>
      1.  In a clear part of the easel (notice how it smoothly scrolls as
      you move the mouse - a wonderful feature of the Amiga!) lay down an
      item and label it 'Distance'.  This will be our goal.
      <p>
      2.  Then lay down three antecedents to the left of it: 'Time',
      'Acceleration' and 'Constant'.
      <p>
      3.  Link all of them to 'Distance'.
      <p>
      4.  Bring up the attribute details panel for 'Distance' and locate
      the <b>Inference Method</b> type gadget.  It should lie just to the
      right of the 'Infer' radio button and should say "X = A + B + C .."
      or something similar, meaning that the value of this attribute is
      calculated by adding together the values of all the antecedents.  We
      want multiplication, so click on the wee type-change button at its
      left hand end and select "X = A * B * C .." from its list.  Click OK.
      <p>
      5.  But we want the square of time, not time itself: draw a second
      link from 'Time' to 'Distance', putting a bend in it (<a
      href="driving.html#bends">Driving step 6b</a>) to visually
      distinguish it from the first one; having two links into a multiply
      inference gives the <b>square</b> of distance, having three will give
      the cube, etc.
      <p>
      6.  Bring up the attribute details panel for 'Constant', set the
      derivation radio button to 'Const' and set the value to '0.5', click
      its OK button.
      <p>
#  What you have is a wee inference net that says the result is the product 
of Time, Time, Acceleration and the constant, 0.5.  Bring up the action 
panel.  Run it, giving a time of 2 and an acceleration of 3, say.  The 
result should appear as 6.  With this you can predict how far a stone will 
fall from the top of a tower block in a given time.  (Or, as mentioned in 
the first paragraph, you can put this to other uses such as evaluating 
whether the stone will reach the 23rd floor in three seconds, such as doing 
a what-if on different strengths of gravity, such as refining your 
knowledge of what factors contribute to distance fallen.)
      <p>
#  Now, how can we link a numeric concept into a bayesian network?  The 
answer is that we cannot meaningfully link it in directly.  Instead, we 
must often compare the numeric attribute with something and emerge with a 
truth statement.  So, for instance, we could say that if the Share Price is 
going up (greater than it was a week ago) then we predict that the share is 
worth buying.  So let's put that in.  (I know that knowledge is wrong; you 
can refine it below!)  It takes several stages, since you will learn and 
use several new features.
      <p>
#  First, place two Float boxes south west of 'Buy it' with enough space 
for another between them.  Label them 'Share Price' and 'Price last week', 
giving meanings of "Current share price of this company" and "The share 
price of the company a week ago".  If you like, give them suitable question 
text.
      <p>
#  Now select Boolean item type, draw an item between 'Buy it' and these 
two.  Label it 'Shares Rising' with a meaning "The share price is rising".
      <p>
#  Now link 'Share Price' as antecedent to 'Shares Rising'.  Then link 
'Price last week' similarly.  Do it in that order.
      <p>
#  Bring up the attribute details panel for 'Shares Rising'.  Change the 
inference method to "Whether A > all".  What this inference method does is 
to see whether the first antecedent is greater than all the rest (that is 
why the order was important).  It returns a boolean result (unlike most 
inference methods, in which the consequent is of the same value type as the 
antecedents).  Click OK.
      <p>
#  (If you wish to see this in operation, run the wee KB in which 'Shares 
Rising' is the goal, giving various pairs of values for 'Share Price' and 
'Price last week'.)
      <p>
#  Now link 'Shares Rising' as antecedent into 'Buy it'.  Strictly, the 
bayesian accumulation inference method (which 'Buy it' has) needs bayesian 
actecedents.  But for your convenience Istar is tolerant, making 
<b>automatic conversions</b> from probability and boolean.  (If the 
antecedent is a simple probability it has no a-priori and this is assumed 
to be half (0.5, 50%).  If the antecedent is boolean, as here, then it is 
treated as a probability with a value of either 0 or 100% with an a-priori 
of 50%, as follows:
      <p>
      <ul>
<li>  Boolean:  Values 0 or 100% only, A-priori = 50%
<li>  Probability:  Values 0 to 100%, A-priori = 50%
<li>  Bayesian:  Values 0 to 100%, A-priori = 0 to 100%
      </ul>
      <p>
For details of a-priori values, see below.)  You will find automatic value 
type conversion quite frequently, for instance allowing you to mix integers 
and floats when doing arithmetic.
      <p>
#  Now run the whole KB, and see the effect of changing share price 
compared with price last week.
      <p>
#  <b>Knowledge refinement</b>:  You probably disagree with the idea that 
shares should be bought when their price is rising.  Many will say they 
should be bought when price is falling and sold when rising.  That simple 
rule was at the centre the stock market crash of 1989, so I thought we'd 
put in its opposite here!  You are free to correct my possibly wrong 
knowledge to the conventional rule, and there are several ways of doing it:
      <p>
      <ul>
<li>  (a) alter inference method from "Whether A > the rest" to "Whether A
      < the rest" (and alter the label and meaning of 'Shares rising' in
      line with that).
      <p>
<li>  (b) (easier:) make 'Shares rising' negative evidence for 'Buy it', by
      altering the unary operator of its link to 'Negate'.
      </ul>
      <p>
Probably, the real knowledge of the link between share price movement and 
whether to buy is more complex, depending on the rate of price rise or 
drop, how long it has been rising or dropping, and what other dealers are 
doing.  It would be a good exercise to try to work out a small knowledge 
base for this, now you have the ability to connect numeric and bayesian 
information.
      <p>
In this section we have:
      <p>
<ul>
<li>  noted the use of a KB for prediction as well as others
<li>  made use of numeric information
<li>  found one way of linking numeric and bayesian
<li>  noted there are two ways of negating knowledge.
</ul>
      <p>

<h2><a name="selection">8.  SELECTION: DECIDING WHICH SHARE TO 
PURCHASE</a></h2>
<!-- -->

(This is a fairly long exercise since a number of new features are to be 
introduced.)
      <p>
Istar can be used to select options, especially where the selection 
criteria are fuzzy and make use of human 'judgement'.  This section looks 
at one way of doing this.
      <p>
      So far, our KB is run for a single company, and we have been
evaluating whether its shares are, or predicting whether it shares will be, 
worth buying, but we can also use it to select the best company from which 
to buy shares.  To use our existing KB we must run it several times, once 
for each company, and remember the result for each one.  That is, the 
general purpose KB we have constructed can also be used for selection.
      <p>
      But running it for each company can be inconvenient.  For a start, we
need to remember the result for each.  To continue, there are situations 
where there is common information and we find we are having to enter the 
same information each time.  This section looks at one way of allowing 
several selections in a single KB.
      <p>
      This method would not normally be used for selecting between such
varied things as company shares, but mainly for selection from a small and 
static range of options.  For instance, to select the best of five alloys 
from which to make machine parts, depending on their properties.
      <p>
      But we will continue with our shares KB because our aim here is to
learn a number of features and techniques, rather than end up with perfect 
knowledge.
      <p>
      We have two companies between which we must make a decision: Acme plc
and Bloggs Ltd.  Both are in the Information Technology sector.  What we 
must do is to create separate parts of the KB for each, one part for Acme, 
one for Bloggs, but using as much common knowledge as possible.  (Current 
version of Istar does not have a knowledge duplication facility, so we must 
do it manually.)
      <p>
#  Load the KB you saved as 'R1'.
      <p>
#  First, let's rename the attributes in the existing KB as relevant to 
Acme.  Easiest way to do this in our present version (few attributes) is to 
bring up the attribute details for each attribute in turn and put an "A:" 
(for Acme) in front of both label and meaning.  Do so - except for 'Buy it' 
which is better labelled 'Buy Acme' and for 'Strong sector' which is common 
data and thus not specific to either.  You can ignore the dangling 'Good 
fin hist'.
      <p>
#  Now we build a similar KB for Bloggs, but without 'Strong  Sector'. 
Preferably underneath the current one.  Create items for:
      <p>
      <ul>
<li>  'Buy Bloggs',
<li>  'B: Will grow',
<li>  'B: Vision for growth',
<li>  'B: More profits',
<li>  'B: Good fin policy',
      </ul>
      <p>
(but not for 'Strong sector'), and link them in the same pattern as for 
Acme.  (Don't bother duplicating 'Good fin hist'.)  For 'Buy Bloggs' hit 
the Show Value button on the Attribute Details panel, so, like 'Buy Acme', 
the value is shown as a line in the box.
      <p>
#  Now link the common 'Strong sector' above Acme into 'B: Will grow'. 
'Strong sector' is common to both because both are in the same sector, I.T. 
(Note the long almost-vertical link you have created: this is a <b>visual 
cue</b> in the diagram that says 'this link is different': unlike most, it 
is common to the two parts of the KB.)
      <p>
#  Make 'Strong sector' the first antecedent of 'B: Will grow', as 
described in the following paragraphs ...
      <p>
#  (A note about <b>order of antecedents</b>.  Bring up the Attribute 
Details Panel for 'A: Will grow' and look at the bottom left corner <b>List 
of Antecedents</b>.  This tells you which items/attributes are the direct 
antecedents to this one.  Notice that 'Strong sector' is first.  Now bring 
up that for 'B: Will grow' (no need to send 'A: Will grow' away; Istar 
allows several such panels to be up at the same time).  'Strong sector' 
should appear as second in the list.  This is because we linked 'Strong 
sector' to 'B: Will grow' after we linked the rest, not before; any new 
link is added at the end.  What this means is that if you run just 'Buy 
Acme' you will be asked about sector strength first, while if you run just 
'Buy Bloggs' sector strength is asked second.  Normally this doesn't matter 
much because the order should not affect the results (except for some 
order-sensitive inference methods like "Whether A > the rest").  The main 
concern is over usability; the user - your friend of the first section, 
perhaps - might wonder why the two parts behave differently and whether 
this has any significance.  The attribute details panel allows you to 
change the order by selecting an antecedent and making it first.  So select 
'Strong sector' on the list (by hitting it with the LMB to highlight it) 
and click the attached '1' button.  It should jump to first in list.  And 
if you run 'Buy Bloggs' now it should ask about sector strength first.)
      <p>
#  (The other buttons by the antecedent <a 
href="panels.html#panel.list">list</a>:
      <p>
      <ul>
<li>  #  'See' takes you to the named antecedent, bringing up its attribute
      details panel.
      <p>
<li>  #  'R' takes you to the Relationship Instance panel for the
      relationship.  In both cases the original panel stays.
      <p>
<li>  #  'X' brings up a textual explanation of what goes on in the
      inference relationship - but in the current version it is only 90%
      correct since it is still being implemented.
      <p>
<li>  #  'n' makes the selected entry 'next' in the list, swapping it.
      (Actually you might have to hit it several times owing to internal
      structures being arranged: that should be corrected in future
      versions.)
      </ul>
      <p>
Try them, sending each away when you have seen them.  These are some of the 
buttons around the general <b>panel list</b>.)
      <p>
#  <i>Run both parts of the KB (Acme and Bloggs)</i> by bringing up the 
Action panels for both 'Buy Acme' and 'Buy Bloggs' (you can have any number 
of attribute panels up at one time).  Hit Reset and Infer for Acme, and 
answer the questions that come up.  Hit Reset and Infer for Bloggs, and 
answer the questions that come up.
      <p>
#  <b>Goal lists</b>.  But notice also how cumbersome was the process of 
bringing up all the attribute action panels individually; also, you 
probably noticed that you were asked twice about the common factor, 'Strong 
market'.  It gets worse the more goals you have.  But we can make it easier 
by using <a href="rfman.html#goal.list">goal lists</a>.  <i>Bring up the KB 
panel</i> and look down the second column of buttons to the one with three 
parts; the middle part, a string, might hold 'Goal List'.  (Earlier 
versions than 1.08 are a bit different.)
      <p>
      <ul>
<li>  Selecting a goal list.  The text in the gadget shows the name of the 
current goal list, if any.  The initial one is simply called 'Goal List'. 
To select another list, hit the wee button to its left, and select from the 
list of lists that comes up the one called 'Goal List' - but for now, there 
is no need to do this since it should already be in the slot.
      <p>
<li>  Putting attributes onto the goal list.  Now <i>bring up the Attribute 
Action Panel for 'Buy Acme'</i> (if not already up) and <i>hit the button 
labelled 'Add Goal'</i>.  This adds 'Buy Acme' to the goal list.  Now <i>do 
the same for 'Buy Bloggs'</i>.
      <p>
<li>  Looking at the contents of the goal list.  Hit the 'S' button 
(meaning 'See') that is the right hand part of the KB Panel gadget, and the 
Item Details Panel for the goal list (a list can be <b>treated as an 
item</b>) appears.  On the right hand side is a list of consequents; these 
are the members of the goal list.  You can rearrange them using the '1' and 
'n' buttons as above.  <i>Make Acme first if you wish.</i>  You can rename 
the goal list and give it meaning if you wish - though its name might not 
change in the slot until you reselect it.
      <p>
<li>  <b>Running with a goal list</b>.  To run with a goal list is easy. 
Bring up the KB panel and <i>hit InferGoals</i> button (before about 
version 1.1 you also had to hit ResetGoals first).  This will start a 
multi-goal inference cycle, asking all the questions relevant to all the 
goals until all are answered.  It should ask about strong sector only once, 
but all the other information separately.
      </ul>
      <p>
#  (To remove a goal from the goal list, bring up the goal list Item 
Details Panel by hitting the 'S' key as above, select the goal in its right 
hand <a href= "panels.html#panel.list">list gadget</a> and hit the attached 
Rid button.)
      <p>
#  (To <b>find a goal</b> in a large KB, select it on the goal list Item 
Details Panel consequent list, hit the 'See' button to bring up its 
Attribute Details Panel, and hit 'Show' button.  Then look at the <b>easel: 
everything has disappeared</b> except the goal and the attributes it is 
connected to.  To bring the easel back, make sure it is active and hit the 
Numeric Enter key (bottom right on keyboard).)
      <p>
#  Now, to compare Acme and Bloogs shares, one way is to bring up the 
Attribute Details Panel of each and look at their value sliders.
      <p>
#  Best save your KB: SaveAs 'R2'.
      <p>
#  To summarize, in this section, we have (not in this order):
      <p>
<ul>
<li>  Set up a selector KB
<li>  Noted that some knowledge must be duplicated, ..
<li>  .. but that some is common
<li>  .. and some differentiates
      (In this case, the latter is info about the user.)
<li>  Noted how backward chaining lends intelligence
<li>  Dealt with the order of antecedents
<li>    Noted some of the buttons around general panel lists
<li>    Used goal lists

</ul>
      <p>

<h2><a name="results">9.  SHOWING RESULTS</a></h2>
<!-- -->

#  Run the R2 KB with both goals (using the goal list or individually, as 
you wish).  Now <i>look at the two value lines for 'Buy Acme' and 'Buy 
Bloggs'</i>.  (<b>Oops</b>: No value line?  Bring up the Attribute Details 
panel for each and ensure the Show Value button is ticked.)
      <p>
#  Notice how useful these <b>value lines</b> are for comparing two or more 
similar attributes - the longer one is the share to buy.  If you move the 
boxes so that they are aligned vertically above each other, then comparison 
is fast and easy.  (But it only works for bayesians, booleans, 
probabilities and proportions at present, not integers nor floats.)
      <p>
#  Value lines not only give a quick visual indication of a comparison, but 
they are particularly good for comparing fuzzy outcomes.  We discuss why, 
below, after we have used a different way of displaying results.
      <p>
#  Some domains require something more specific, and also require the 
knowledge base to recommend the best.  The following steps show a way of 
putting out the name of the better buy.  It is more suited to numeric goals 
which cannot be shown by the horizontal value line.  We add some extra 
inference net which compares the two and provides the name of the best 
goal.  In doing so you will learn a new value type and couple more 
facilities of Istar: the Block type and the Which Max inference method.
      <p>
#  On the Select Item Type panel list, towards the bottom select 'Block'. 
The <b>Free Block attribute type</b> means that the attribute contains the 
DSAP (data structure area pointer, an internal reference number) of a block 
of data in the KB.  Place such a box to the right of the two goals, 'Buy 
Acme' and 'Buy Bloggs'.  (Label: 'Best share', meaning e.g.: "This holds 
holds the DSAP of the block of the share which is most attractive".) 
<i>Link them to it as its antecedents.</i>
      <p>
#  Bring up the Attribute Detail Panel for 'Best Share', and the inference 
method should be, by default, "Which Max".  (If not, then change it.) 
"Which Max" looks to find which of the antecedents has the highest value 
and returns an identifier to show which.  In our case the resulting 
identifier is a DSAP of a block, but it can be an index number if the 
consequent is integer or ordinal; see the <a 
href="inference.html">Inference</a> file for more details.
      <p>
#  (If you run it using 'Best share' as the goal - ignore the goal list, 
bring up its action panel and click Reset and Infer - then the result will 
be a number like 23720.  Now if you bring up the attribute details panels 
for 'Buy Acme' and 'Buy Bloggs' you will see over the right hand side, 
about 2/3 of the way down, a gadget '</b>DSAP</b>' and one of them should 
be the number you have just seen.  Rather meaningless since it is an 
internal identifier.)
      <p>
#  Now to convert this Block value (DSAP) into something more meaningful: 
the name of the best share.  In the Select Item Type panel, select 'Free 
String'.  Place a string item to the right of 'Best share' and link 'Best 
share' into it as antecedent.  (You can call the new item 'Best share' if 
you like as Istar allows duplicate names, but it's probably better to 
differentiate it as a string version either by a different label or in the 
meaning.)
      <p>
#  (Notice how the colours of the labels in the various items/attributes is 
a clue to the value type held.)
      <p>
#  Now run the KB with this string 'Best share (string)' as goal, and look 
at its result value.  It should contain as its value either of the strings, 
'Buy Acme' or 'Buy Bloggs'.  This string value can then be placed in a 
document (though we will not do so here; in the current version of Istar 
this facility is not available).
      <p>

#  Which is the better method to show which share to buy - value lines, or 
name of best share?  It depends.  But the former (value lines) has two 
advantages in a fuzzy area of knowledge like share dealing.  One is that it 
is more immediately graphical: look for the longest line.  But, more 
importantly, suppose both results were low (e.g. 3% and 9%).  Then the 
second method would simply say 'Buy Bloggs', whereas in reality it would 
probably be inappropriate to buy either of them.
      <p>
#  The second method, using "Which Max" inference, makes the decision for 
the user while the first method merely provides decision support for the 
user.  This is often more useful since if two or more options have 
approximately the same value (e.g. 85%, 87%, 82%) then it might be 
appropriate to choose one that is not numerically the highest, for 
extraneous reasons.
      <p>
#  Let's review what we've done.  We have a KB by which the user can choose 
between Acme and Bloggs shares, given information about both companies and 
the strength of the market.  The KB is identical for each.  But in many 
selector KBs there will be small variations between the knowledge.
      <p>
#  Suppose Acme is a small company and Bloggs a large one, and the user 
might have a preference for large or small companies.  Select Bayesian 
again and create an item labelled 'Prefers small', meaning "I prefer small 
company shares".  (Notice that this is <b>information pertaining to the 
user</b>, not to the companies or their situation.  Perfectly valid.)  Then 
link it to 'Buy Acme' with a positive link and to 'Buy Bloggs' with a 
negative link.  From previous work both 'Buy Acme' and 'Buy Bloggs' will be 
answered and their values shown as horizontal lines in their boxes.  (If 
not, make sure they are.)  Then bring up the action panel for 'Prefers 
small' and reset/infer it several times with various values.  Depending on 
the other information, you should see the balance between the two shares 
change as you change preference.
      <p>
#  In a selector KB, which has knowledge on how to select between a small, 
static number of known options (like the alloys above) you will find three 
main types of knowledge:
      <p>
<ul>
<li>  some that is duplicated across the options,
<li>  some that is common to all (like 'Strong sector'), and
<li>  some that differentiates between the options (like 'Prefers small').
</ul>
      <p>
This is a general pattern.
      <p>
To summarize, in this section we have:
      <p>
<ul>
<li>  Used graphical comparison of results
<li>  Used textual display of Best Share
<li>  Used the Block value type with automatic conversion to name
<li>  Used a selector inference method, "Which Max"
<li>  Discussed methods of comparison and selection
<li>  Incorporated knowledge of user preferences
</ul>
      <p>

</i>(Short version of course:  You may skip to Section 14 on Making Your KB 
More Accurate, and simply read the intervening sections.)</i>
      <p>

      <p>
<h2><a name="selecting.criteria">10.  SELECTION: DECIDING WHAT CRITERIA TO 
JUDGE THEM ON</a></h2>
<!-- -->

The previous section looked at the construction of a KB to select between 
shares of two specific companies.  This is not very useful since there are 
many companies to consider and different ones at different times; it would 
be more useful where the range of options is small and fixed, such as 
selecting the best alloy for constructing a chemical reaction vessel.
      <p>
      In company shares we do not have a small number of known options, but
rather a large number of options which are not known until we run the KB. 
That is, between yesterday's run and today's five new companies might have 
come into existence and another twelve might have gone bust.  In such 
domains it is better to take a different approach to selection.
      <p>
I once found that this approach was needed when building a KB to select 
tree species suitable for planting on a particular plot of land.  Just for 
a change from share dealing, let us try a tree species selector.
      <p>
      A KB of the type we are about to build is offered on-line by the
Istar <a href= "server.html">Knowledge Server</a>.  It is a fuller version 
of a tree species selector.  Why not connect now, and try it out?  Then you 
can see what we are aiming at here.
      <p>
      The approach we take here is not to hold knowledge of each and every
option in the KB, but rather to use the KB to decide what selection 
criteria are important, and then these selection criteria can be applied to 
a database containing thousands of options (companies, tree species, etc.) 
and the best few examined more closely, often manually.
      <p>
      "But why not just use the database direct and apply a SQL query?" you
may ask.  The answer is that with each run a different set of selection 
criteria must be used, so that if we just used SQL direct we would have to 
write a complex SQL statement each and every run.  In effect, the KB holds 
the knowledge on how to write the SQL statement needed for each run. 
(Though we will not attempt that in this section, one could do so with the 
current version of Istar, using string value types and the "Concat" 
inference method).
      <p>
      Also - and this is what we found in the tree selector KB - simple SQL
or database access is not enough.  It is better if the KB itself can 
perform inference on data values obtained from the KB.  SQL etc. do not 
normally have bayesian mechanisms built into them.
      <p>
      This kind of KB is rather more sophisticated in structure (as well as
in detail) than the ones above.  In the ones above, three kinds of 
information came together into the eventual goals:
      <p>
      <ul>
<li>  a)  about the requirements of the user
<li>  b)  about the general situation, common to all options
<li>  c)  about each specific option.
      </ul>
      <p>
In this kind of selector, they separate out to some extent.  First we use 
(a) and some of (b) to arrive at a set of selection criteria, then we apply 
these to (c) and some more of (b) to find the relative attractiveness of 
each of the options.  In this kind of selector, (c) is often held in the 
database, but inferences from it must be made in the KB (not just in SQL) 
as discussed above.
      <p>
      We will build a small KB for the first phase of a tree species
selector.  It will first be a simple KB using facilities we have already 
met above.  Then we will refine, learning new facilities and approaches as 
we do so.
      <p>
#  Move the easel so that the whole screen is empty.
      <p>
#  Select bayesian item type.
      <p>
#  The goals.  Lay down, to the right, boxes for three selection criteria:
      <p>
      <ul>
<li> 'High timber yield',
<li> 'Hardy',
<li> 'Good cover',
      </ul>
      <p>
with meanings like:
      <p>
      <ul>
<li>  "It is important that trees have a good yield of timber",
<li>  "It is important that trees are hardy and can stand vandalism",
<li>  "It is important that trees provide good ground cover for wildlife 
and game."
      </ul>
      <p>
These are our three criterion for selection of tree species.  Click the 
Show Value box for each so that we can see easily the importance of each 
criterion.
      <p>
(Tip:  Might be useful to shorten the meanings so that more than the common 
part ("It is important that trees") appear in the mouse-position window. 
For instance, make the meanings like "Trees must have a good yield of 
timber.")
      <p>
#  Over the left hand side, place boxes to represent the requirements of 
the user:
      <p>
      <ul>
<li>  'Financial return'
<li>  'Timber'
<li>  'Wildlife'
<li>  'Near housing'
      </ul>
      <p>
with meanings:
      <p>
      <ul>
<li>  "Planting is for financial reasons"
<li>  "The income is to be from timber"
<li>  "The planting should be good for wildlife"
<li>  "The planting is near housing".
      </ul>
      <p>
Notice that 'Near housing' is part of (b) above, while the others are part 
of (a).
      <p>
#  In the middle, place a box:
      <p>
      <ul>
<li>  'Game'
      </ul>
      <p>
with the meaning:
      <p>
      <ul>
<li>  "The planting should support game".
      </ul>
      <p>
#  Link 'Financial return' to both 'High timber yield' and 'Game', because 
a money can be made either out of timber or game (pheasant shooting, etc.).
      <p>
#  Link 'Timber' to 'High timber yield' with a positive link and to 'Game' 
with a negative link.  This means that if they don't want timber but do 
want a financial yield then it must be through game.
      <p>
#  Link both 'Wildlife' and 'Game' to 'Good cover'.  Both require good 
cover.
      <p>
#  Link 'Housing nearby' to 'Hardy'.  This is because if there is housing 
nearby then children etc. will visit the wood and are likely to do some 
damage to the trees, so they must be hardy.
      <p>
#  Now clear the goal list and put the three right hand criteria into it. 
(See above for how to do this if you've forgotten.)
      <p>
#  Run it (ResetGoals, InferGoals on KB panel).  That is our basic tree 
selector KB.
      <p>
#  (Its results show how much importance should be attached to each 
criterion when assessing each tree species.  Normally (i.e. apart from 
what-iffing) the KB would be run once to obtain such importances and then 
these would be applied to the data for all the tree species.  The algorithm 
for applying criterion weights to data will depend on need and data 
available, but might consist of multiplying each degree of importance by 
the appropriate data and adding together.  For instance, if 'Hardy' turns 
out to be high (90%) and 'High timber yield' low (10%), then a tree with a 
hardiness factor of 8 out of 10 and a yield factor of 2 out of 10 the total 
would be 8 * 90% + 2 * 10% = 7.2 + 0.2 = 7.4.  For a tree with a hardiness 
factor of 2 and a yield factor of 8 the result would be 2 * 90% + 8 * 10% = 
1.8 + 0.8 = 2.6.  So the former tree species would be preferred.  If 
running the KB had resulted in the opposite weights being given then the 
tree preferences would be reversed.)
      <p>
#  This KB demonstrates basically how to set up this type of selector: have 
a group of items that represent the selection criteria, a group that 
represent the user requirements and a group that represent the common 
situation, and link them together.
      <p>
#  Did you notice that even if you said you did not want a financial return 
it still asked you whether the income should be from timber or not.  (If 
you didn't notice it, run it again, answering -100 to 'Financial return'.) 
This is obviously not right.  So we will use a couple of facilities of 
Istar to amend it.
      <p>
#  First, if the demand for financial return is low then there is little 
point in asking about 'Timber'.  Istar offers a cut-off on bayesians; you 
might have noticed the two gadgets on the bayesian attribute detail panel 
called LCO and UCO.  These are <b>lower and upper cut-off</b>, and when 
zero they are ignored.  But when not zero they come into play.  Take the 
lower cut-off, LCO.  If LCO is 30% then as soon as it is certain that the 
probability value of the attribute cannot exceed 30% then the attribute is 
considered answered and no more of its antecedents are sought by backward 
chaining.  This can be used to stop questions about 'Timber' when it is 
known that there is no financial interest.  Conversely with the upper cut-
off, UCO.
      <p>
#  Set the LCO of 'High yield' to 30%.
      <p>
#  To use the cut-offs effectively we need to alter the <b>weights of 
evidence</b>.  So far we have used mild weights of 3/1 and 1/3, symmetrical 
about unity.  We need to give the link a strong asymmetry to pull the 
consequent down to near zero when the antecedent ('Financial return') is 
low.  Then, whatever value the other antecedent takes it will never rise 
above the LCO and so they will not be asked.  (For an understanding of 
weights, see the section in <a href="inference.html">Inference</a> on 
bayesians.)
      <p>
#  Bring up the relationship instance panel for the link between 'Financial 
return' and 'High yield'.  It has four integers in four boxes called 
'Weight', and they should be 3/1 and 1/3.  Set the fourth box to 30 rather 
than 3.  (Also, ensure that the unary operator is 'Normal', not 'Negate'.)
      <p>
#  Now run the KB from just 'High yield' and answer 'Financial return' with 
-100.  It should now not ask about 'Timber'.  (If it does, perhaps you have 
run it by clicking Reset Goals and Infer Goals, because 'Timber' is still 
needed for 'Game', or perhaps you have not set the LCO of 'High yield' to 
30%.)
      <p>
#  To stop bayesian questioning we must therefore do two things: set the 
LCO (or occasionally the UCO) and set the weights on the link from the 
controlling antecedent.  So we must also do this for 'Game'.  Set its LCO 
also to 30% and set the weight on the link between 'Financial return' and 
'Game' to 3/1, 1/30.  Then, when we ResetGoals and InferGoals, 'Timber' 
should only be asked if the 'Financial return' is answered more positively 
than about -30.
      <p>
#  To summarize, in this section we have:
      <p>
<ul>
<li>  Built a KB to assign weights to selection criteria
<li>  .. which can then be applied to a database of options
<li>  Recognised some different classes of information
<li>  Found one way of preventing irrelevant questions being asked
<li>  .. by employing lower (or upper) cut-off on a bayesian
<li>  .. and by setting the weight of evidence on a link.
</ul>
      <p>

<h2><a name="irrel">11.  DEPENDENT ATTRIBUTES - IRRELEVANT 
QUESTIONS</a></h2>
<!-- -->

It often happens that one attribute is a sub-type of another, or is somehow 
dependent on it, so that if the other is answered false then the dependent 
attribute is no longer applicable.  In the example above, 'High timber 
yield' is dependent on 'Financial return' in this way: if the user does not 
want a financial return then high timber yield becomes irrelevant, 'not 
applicable'.  When this happens, it is inappropriate to ask questions that 
solely establish the value of the dependent attribute; we need to suppress 
such irrelevant questions.
      <p>
      In the above example we did this by means of the Lower Cut Off.  But
this is specific to Bayesian attributes.  There are two other methods.  The 
second method works only with booleans and an AND inference method.  The 
third, the most general, is only available in version 1.04 and later, and 
works with any consequent though it requires a boolean antecedent.
      <p>
#  Preventing irrelevant questions by boolean AND.  Change the attribute 
type of 'Financial Return' and of 'High timber yield' to boolean (bring up 
attribute details panel for each and alter the type gadget).  Also alter 
the inference method of 'High timber yield' to 'A & B & ..'.  Ensure that 
'Financial return' is the first antecedent of 'High timber yield'.  Run it 
several times.  When you answer 'Financial return' with 'No' it should not 
ask about 'Timber'; when you answer 'Yes' it should.
      <p>
#  Using the CONTROL Unary Operator (Version 1.04 onwards).  Change 'High 
timber yield' back to a Bayesian attribute and its inference method back to 
Bayesian.  Turn off the Lower Cut Off, if active, by dragging it back to 
zero.  Keep 'Financial return' as boolean.  Now bring up the relationship 
details panel for the link between them, and change its Unary Operator to 
'CONTROL'.  Now run the KB.  Answering 'Financial return' with 'No' should 
set the consequent of the CONTROL link ('Timber') to answered and 
(probably) unknown and thus suppress any further attempts to find its 
value.  When you answer with 'Yes' its value will be sought in the normal 
way.  This method will work with any type of consequent.
      <p>
      To see the usefulness of the CONTROL unary operator, try the
following without it.  The cost of a house includes a number of optional 
factors, such as a conservatory.  If the conservatory is wanted, then its 
cost needs to be worked out (e.g. from its size and quality) and added to 
that of the house.  But if not wanted, then don't bother asking size and 
quality of conservatory, and don't add it to the cost of the house.  Using 
the CONTROL unary operator, we simply link 'Want Conservatory' to 
'Conservatory cost'.  Without it, the latter will probably have to employ a 
Chooser, to choose between zero and a worked out cost.  While not a 
complicated thing to do, it nevertheless complicates the KB diagram by at 
least two extra superfluous attributes, and if there are many such 
instances, the whole loses its clarity.
      <p>

<h2><a name="causal.model">12.  CAUSAL MODELS</a></h2>
<!-- -->

(Section has no software action.)
      <p>
Istar can be used to built certain types of causal model.  A causal model 
tries to express what happens in some limited area of activity, such as 
machinery, electronics, biological systems, the weather, social systems, 
history and many more.  Some are deterministic, some normative (that is, 
there are laws that pertain but entities are not forced to obey them). 
With a causal model we can predict what will happen, and a major use is 
simulation (e.g. simulate the weather, or simulate an electronic circuit to 
see whether it will malfunction, or simulate social development).
      <p>
      The more normative, the more 'fuzzy' the information about them and
less accurately can we predict or simulate.  Determinative models can often 
make use of numeric and boolean information while bayesians and 
probabilities are more useful for normative models.
      <p>
      As you might have realised, the predictive KB above was a simple kind
of causal model.  The causality was economic and logical in nature rather 
than physical, and perhaps social and ethical, but it was still a valid 
kind of causality.  There are grounds in philosophy for seeing logical 
entailment as a form of causality.  In the same way evaluation and 
selection can involve causality.  That is why the same KB could be used, 
with minor alterations, for all these purposes.
      <p>
      But there one purpose of a KB that does not normally make use of a
causal model - diagnosis.
      <p>

<h2><a name="diagnosis">13.  DIAGNOSING WHY IT WENT WRONG OR RIGHT</a></h2>
<!-- -->

Diagnosis is finding out what went wrong.  Or, more generally, what some 
initial state was that resulted in the observed final state.
      <p>
      In most of the uses for KBs we have looked at so far (evaluation,
understanding, prediction, etc.) the inference has followed and modelled 
the causality, so that input information is of some initial state or cause 
and output information is of an outcome.  But in diagnosis inference and 
causality flow in opposite directions, so that input information is of the 
outcome and output information is about the initial state or cause.  This 
gives a diagnostic KB a different flavour, though it employs exactly the 
same inference mechanisms.
      <p>
      We will construct a small KB that seeks to explain why a certain
company share did not give us good profits, why it went down in value when 
we expected it to go up.
      <p>
      First, note that the causal KB we have used so far could in principle
be used for diagnosis.  To do so we would try all combinations of input 
information and see which ones gave the state we now observe of an 
unattractive share.  (Try it if you like: run it several times and see 
which combinations give low belief that we should 'Buy it'.)  But there are 
two problems:
      <p>
      <ul>
<li>a)  it is cumbersome and time consuming (many combinations)
      <p>
<li>b)  it cannot be very specific, in that there are several reasons why 
we are not advised to 'Buy it', and we do not know which was the one that 
functioned in this instance.
      </ul>
      <p>
      So we need to build a different type of KB, in which the goal
attributes on the right hand side are such things as 'Was not strong 
sector', 'Management had no vision', etc. and the input information on the 
left hand side includes what was our goal above (negated) 'Should not have 
bought it' and other information which we have not represented above.
      <p>
#  The first thing we can do is to try reversing the KB we have.  Load 
'R1'.  Rather than reverse the actual KB we will create another below it, 
reversed.  Move the easel down so there is space below it but so that the 
original KB can be seen.  Squash some of its items up a bit to make room 
(and also to ensure that the main easel is active).
      <p>
#  Move the mouse over 'Buy it' and press the 'T' key.  This selects item 
type to be the <b>same type</b> as the one under the mouse.  It's usually 
more convenient than using the select item type panel, and here we will 
make good use of it.
      <p>
#  Place an item to the left hand side, corresponding to 'Buy it', but 
label it something like 'ShdNotHaveBought' with meaning like "We should not 
have bought this share".
      <p>
#  Now select the type for 'Will' using the 'T' key, and place a box to the 
right of 'ShdNotHaveBought' and above, labelled 'DidNotGrow' with suitable 
meaning.  (Of course, in this KB most items are free bayesians, so strictly 
we don't have to keep using the 'T' key.  But it is a good habit to get 
into.)
      <p>
#  Do similarly for 'More Profits', perhaps labelling it 'ProfitsFell'.
      <p>
#  (Tip:  Notice the different style of labelling, without spaces; because 
the labels seem to be longer, but it could be useful as a visual way of 
distinguishing between casual and diagnostic knowledge.)
      <p>
#  Link 'ShdNotHaveBought' as antecedent to both these.  (Note: antecedence 
and consequence is reversed.)
      <p>
#  Then do similarly for all other items/attributes in the original KB, 
creating one below it that is the <b>mirror image</b> of it.
      <p>
#  Now, what do you notice about this KB?  It has only one input variable, 
from which all the others are derived.  So, however it is answered, there 
will be no real way of distinguishing between what are now the inference 
goals.  We cannot tell whether it was lack of vision or weakness of the 
sector or any other factor that meant the shares did not do well.  We must 
add some further information to help us do so.
      <p>
#  One way to do this is to focus on one of the factors that could have 
been a cause, such as 'SectorWasWeak' and ask "</b>What else</b> would 
weakness in the sector have led to?"  For instance, if the sector as a 
whole was weak then other firms in that sector would also have been weak. 
So, if other firms also did badly then this is evidence that sector 
weakness was the problem, but if other firms did well then this is unlikely 
to have been the problem.
      <p>
#  Add a bayesian 'OthersDidBadlyToo' as antecedent of 'SectorWasWeak'.
      <p>
#  Maybe you also want to set the LCO of 'SectorWasWeak' then on its 
attribute list select 'DidNotGrow' and click the 'R' button to bring up the 
relationship instance panel.  Set the fourth weight figure to 60.  This 
will prevent 'OthersDidBadlyToo' from being asked if in fact the company 
did grow.
      <p>
#  In the same way, ask "</b>What else</b> would have happened if the 
company did not grow?"  e.g. The turnover would have stayed the same, or 
the number of employees would have stayed the same or reduced.  Take one or 
both of these as evidence for 'DidNotGrow' in the same way.
      <p>
#  Note that instead of asking about belief in the negative statement 
'TurnoverDidNotIncrease' you could ask the positive statement 
'TurnoverIncreased' and link it to 'DidNotGrow' as negative evidence (that 
is, with a unary operator of Negate).  You will come across many situations 
where it might be better to <b>reverse a proposition</b> and thus all its 
relationship (both antecedent and consequent).
      <p>
#  (Knowledge refinement:  Instead of asking about turnover and employees 
separately, perhaps what we want is simply to ask "Did the company in fact 
grow during this period?")
      <p>
#  In the same way, asking "</b>What else could xxx have led to?</b>", and 
linking what you come up with as antecedence for xxx, you can build a 
diagnostic KB.  Be sensitive to the possibility that one of these factors 
might be caused by several factors in your KB, in which case it should be 
linked as antecedent to them all.
      <p>
#  To summarize, in this section we have:
      <p>
<ul>
<li>  Noted the different nature of diagnostic knowledge.
<li>  Reversed a KB.
<li>  Used the quick <b>same type</b> facility ('T' key)
<li>  Enriched our KB using the <b>What else</b> question.
<li>  Noted that it might be useful to reverse a proposition.
</ul>
      <p>
<h2><a name="accuracy">14.  MAKING YOUR KB MORE ACCURATE</a></h2>
<!-- -->

So far most of the links in your KB have had the same weight and the a-
priori settings have remained at 50%.  This is obviously not true to real 
life.  Some factors are more important than others.  In this section we 
start to tailor some of the weights (strengths) of links and set the a-
priori probabilities of your bayesian attributes.
      <p>
#  The a-priori probability is the foundation of bayesian evidence.  It 
forms the base point, to which to add evidence as it is collected.  It is 
the starting belief in the proposition represented by the bayesian, the 
belief you would have in it if you could obtain no evidence one way or 
another.  Usually the a-priori is the statistical probability of the 
proposition being true for the class of situations in which you will use 
the KB.
      <p>
#  Load the 'R1' KB that you saved earlier.
      <p>
#  Bring up the 'Buy it' attribute details panel.  Given 100 different 
companies, on average, for how many of them would you consider their shares 
attractive?  10%?  30%?  50%?  70%?  Suppose your answer were 20%, then 
find the 'AP' slider gadget to the right of the main value and move it to 
20.  You have set the a-priori.
      <p>
#  Now ask yourself the equivalent question ("Given 100 different 
companies, on average how many of them will grow?" etc.) for all other 
bayesians in the KB, and adjust their a-prioris to suit.
      <p>
#  It's basically a simple operation to set the a-priori and with a little 
practice it becomes almost second nature.  But there can be difficulties, 
especially when you start off.
      <p>
#  One is that you start to think, "Well, it depends ..."  On what?  One is 
that it might depend on sector.  If you can identify a factor on which this 
average depends then that factor is actually a piece of evidence that 
should be incorporated into your KB.  It depends on sector?  Then make the 
influence of sector a piece of evidence, and then you change your a-priori 
question to "Given 100 companies, when I take the average across all 
sectors, how many of them ...?"
      <p>
#  (Notice how asking the a-priori question sometimes helps in knowledge 
refinement by forcing hidden influences out into the open.  But, in this 
case, you already have a 'Strong Sector' attribute.)
      <p>
#  'Will grow' depends on sector, and that is already taken care of, via 
the item 'Strong sector'.  But perhaps 'Vision for growth' also depends on 
sector, in that in certain sectors the culture of that sector is for growth 
while in others it is not.  The I.T. sector tends to have a growth culture 
while the agricultural sector might not.  The construction industry at 
present is still in recession.  The sports sector seems to have a culture 
of growing.  So let us take these four as an example.  We will employ yet 
another facility of Istar, the Chooser inference method.
      <p>
#  What we want is a piece of evidence for 'Vision for growth' that depends 
on sector.  Place a bayesian 'Sector vision' as antecedent to it.  Bring up 
its attribute details panel and change its inference method to Chooser. 
The Chooser takes an integer (or an Enum or Ordinal) as its first 
antecedent, and then all the others should normally be the same type as the 
consequent.  The <b>Chooser</b> first finds the value of the first 
antecedent.  Then, if 1, it takes the first of the rest (i.e. the second 
antecedent), if 2 it takes the 2nd of the rest, and so on, and copies its 
value into the consequent.  In this case the attributes from which it 
chooses will be sector constants.
      <p>
#  Select Integer item type and place an integer attribute as antecedent to 
'Sector vision'.  Label is 'Sector Id' with meaning "The identifier for the 
sector".  Give it a question text of "To which sector does the company 
belong?  1 = I.T., 2 = Agriculture, 3 = Construction, 4 = Sports".  (For a 
less clumsy method than this long question, see Enumerated Types below.)
      <p>
#  Now create four bayesian attributes as antecedents to 'Sector vision' 
and, by bringing up their Attribute Details Panels, make each a Constant. 
Then give each a name and value something like:
      <p>
      <ul>
<li>'I.T. vision'  90%
<li>'Agriculture vision'  10%
<li>'Construction vision' 20%
<li>  'Sports vision' 60%
      </ul>
      <p>
Try resetting and inferring 'Sector vision' to see what you obtain with 
different values of the Id.
      <p>
#  (If you wish, you could also change 'Strong sector' from being an input 
information to a Chooser controlled by 'Sector Id' and to take its value 
from a similar bank of constants.  Then, by answering 'Sector Id', the user 
would automatically supply values to both 'Strong sector' and 'Sector 
vision'.)
      <p>
#  Now, don't forget to set the a-priori for 'Vision for growth' as an 
average across all sectors.  If you expect about the same number of 
companies in each sector then you could just take the average of the 
sectors you are dealing with (90+10+20+60/4=45%).  The a-priori for 'Sector 
vision' can stay at 50% since it is merely a modifying factor.
      <p>
#  (Tip:  Don't worry too much about accuracy of a-prioris or weights; they 
are more tolerant than you might think.)
      <p>
#  We have dealt with a-prioris.  Now to deal with weights of evidence.  We 
will take as an example the item 'Will grow' and its antecedents 'Strong 
sector' and 'Vision for growth'.  In doing so we deal with odds rather than 
probabilities.  Odds and probabilities are linked as:
      <p>

      <BLOCKQUOTE>
      O = P / (1 - P)
      </BLOCKQUOTE>
      <p>
and
      <p>

      <BLOCKQUOTE>
      P = O / (1 + O).
      </BLOCKQUOTE>
      <p>
In Istar odds are held as two integers, numerator and denominator.
      <p>
#  Let us suppose you have set the a-priori for 'Will grow' to 25%.  Its 
odds are therefore 0.25 / (1 - 0.25) = 0.25 / 0.75 = 1/3 ("one to three 
against").
      <p>
#  For each antecedent we ask two questions:
      <p>
      QT:  "Suppose we know that the antecedent is completely true; then
      what would the belief in the consequent be?" and
      <p>
      QF:  "Suppose we know that the antecedent is completely false; then
      what would the belief in the consequent be?"
      <p>
Ask them of 'Strong sector':  "Suppose we know for certain that it is a 
strong sector; what would our belief in 'Will grow' be?"  and conversely. 
Suppose we find QT gives 75% (odds = 3/1) and QF gives 10% (odds = 1/9).
      <p>
#  This gives us the means to work out the weights on the link between 
them.  QT provides the left hand pair of numbers on the relationship 
instance panel, and QF the right hand.  Bring up the panel.
      <p>
#  Each pair is an odds multiplier, such that when multiplied into the a-
priori odds of the consequent gives the answer to QT and QF respectively. 
Take the left hand pair and QT.
      <p>
      <ul>
<li>A-priori odds of 'Will grow' = 1/3.
<li>Answer to QT = 3/1.
<li>Therefore odds multiplier must be 9/1.
      </ul>
      <p>
So alter the left hand pair to 9/1.
      <p>
#  In a similar way, the right hand pair and QF:
      <p>
      <ul>
<li>A-priori odds of 'Will grow' = 1/3.
<li>Answer to QF = 1/9.
<li>Therefore odds multiplier must be 1/3 (which it already is).
      </ul>
      <p>
Click on the 'OK' button.
      <p>
#  Now process the others link weights in a similar manner:
      <p>
      <ul>
<li>  Convert the a-priori of the consequent to odds.
<li>  Ask QT for the antecedent and consequent.
<li>  Convert the answer to odds.
<li>  Alter the left hand odds multiplier as appropriate.
<li>  Ask GF and convert the answer to odds.
<li>  Alter the right hand odds multiplier as appropriate.
      </ul>
      <p>
#  Save the KB as 'R3'.
      <p>
#  Now run the KB.  You should start to find the results are more 
meaningful and interesting than before.  (NOTE:  At present there is a wee 
bug in the Chooser, in not resetting its antecedents.  To overcome this, 
you might have to press Reset a couple of times.)
      <p>
#  To summarize, in the section we have:
      <p>
<ul>
<li>  Concerned ourselves with KB accuracy.
<li>  Met with a-priori probabilities for bayesians
<li>  Found a simple question to ask to calculate them.
<li>  Noted that this can unearth other factors.
<li>  Used the Chooser.
<li>  Set the weights of evidence ..
<li>  .. by using odds and two simple questions.
</ul>

      <p>
<h2><a name="usability">15.  MAKING YOUR KBS MORE USABLE</a></h2>
<!-- -->

In this section we note some ways to make the KB more usable, easier to 
use, more friendly to the user.
      <p>
#  <b>Enumerators</b>
      <p>
The Chooser was driven by an integer, which meant the question text had to 
be cumbersome.  A more serious problem was that the user was free to enter 
any value.  Future versions of Istar might have value checking on input for 
integers etc. but a better method is available now: use an Enumerated Type.
      <p>
      An enumerated type is an identifier of which option is selected from
a set, e.g. which business sector.  One is already available as standard: 
Weekdays.  But we must create another.
      <p>
      <ul>
<li>  Load 'R3' if not already up.
<li>  On main control panel, click the Att Types button.
<li>  (See Panels section on <a href="panels.html#new.at">Creating New 
Attributes</a> for details.)
<li>  Hit the adjoining 'New' button to add a new attribute whose name is 
'Sector' and whose type is Enumerated.
<li>  When the <a href="panels.html#atp">Attribute Type Panel</a> appears, 
enter the following Value Names:
      <ul>
<li>  "Agriculture"
<li>  "Construction"
<li>  "Sports"
      </ul>
<li>  Click 'OK'.
<li>  Bring up the <a href="panels.html#adp">attribute details panel</a> 
for 'Sector Id'.  Click the value type wee button to bring up list of 
attribute types.  Select 'Sector'.  Click 'OK' on the type list.
<li>  Now click 'OK' on the attribute details panel.
<li>  Reset/infer 'Sector vision' and you should find it will no longer ask 
you for an integer but give you a cycle gadget showing the sector names.
<li>  Now you can change the question text for 'Sector Id' to suit.
      </ul>
      <p>
      It is often useful to create Enumerated types for the major
identifiers your KB uses.  Some will be Enums, some Ordinals.  Ordinals 
differ from Enums in that the options are in some numeric order rather than 
being just options.  e.g. Low, medium and high.
      <p>

#  <b>The order in which questions are asked</b>
      <p>
The order in which questions are asked is seldom important to the final 
results given by a KB but can make a lot of difference to the user.  For 
instance it is sensible to have the major questions at the start and also 
to try to put questions relating to a given topic together.  The order in 
which they are asked depends on the backward chaining process, the 
inference methods employed and the answers to previous questions.  But 
there are several ways of controlling the order of asking.
      <p>
      <ul>
<li>  By altering the order of antecedents of an inference attribute.
<li>  By understanding the order imposed by certain inference methods.  For 
instance, in Chooser the first antecedent must be completely asked and 
answered before any of the others are sought, so all the questions that 
pertain to the first will be asked first.  Similarly, in the comparison 
methods (A > the rest, etc.) the first must be asked first.
      </ul>
      <p>

#  <b>Suppressing irrelevant questions</b>
      <p>
Often certain questions are irrelevant to the flow of the run of a KB.  For 
instance for the I.T. sector it is irrelvant to ask about farming 
practices.  There are various ways to prevent irrelevant questions being 
asked.
      <p>
#  The Chooser.  This will backward chain only up the chosen route and will 
ignore the others.
#  Bayesian cut-offs.  Setting these will stop seeking input once it is 
certain that the value of the bayesian attribute either cannot exceed the 
lower cut-off or cannot be less than the upper cut-off, however the 
remaining unanswered antecedents are answered.
#  Certain arithmetic and logical inference methods stop when an extreme 
answer is known.  e.g. the process stops when: one of the antecedents is 
zero in multiplication, when one is false in boolean AND, when one is true 
in boolean OR.
#  In the comparisons that give a boolean result, as soon as the comparison 
fails the process stops.  So "A > the rest" will stop as soon as one of the 
rest is found to be >= A.
      <p>

#  <b>Forms</b>
      <p>
The normal method of obtaining information when running a KB in Istar is 
question by question, since that allows the session to be most responsive 
to the way information given.  But sometimes it is useful to have several 
related pieces of information all on the same screen.
      <p>
      For this, Istar offers a simple 'Forms' facility.
      <p>
      <ul>
<li>  (Load a KB, such as R1.)
<li>  Select 'Form' item type.
<li>  Place an item of this type to the left of a number of attributes on 
your KB.  Notice it has no name (though it can be given one).
<li>  Then, draw a link from the Form item to one of the attributes.
<li>  Then to another, and another.
<li>  Run the whole KB.  You should find that the three attributes you have 
linked to the form are all presented on a single screen.
<li>  Answer them all, and click 'OK'.
<li>  Allow the rest of the questions to be asked.
<li>  Now click with right mouse button on the form item, and up comes an 
item details panel.
<li>  Enter a name (label), some meaning.
<li>  Enter Form Text such as "Please give values for the following:".
<li>  Click 'OK'.
<li>  The label should now appear in the form box on the easel and the 
meaning appear in the window when you move the mouse over it, just as with 
attributes.
<li>  Run the KB and this time your Form Text should appear at the head of 
the form.
      </ul>
      <p>
      This facility is as yet undeveloped; new versions should appear
later.
      <p>

#  <b>Requiring less detail of the user</b>
      <p>
As it stands, our KB will ask us two things about the quality of 
management.  As the KB develops we might find these split into several 
more, which can feel rather too detailed to the user.  For this reason it 
is sometimes useful to first ask a more general question about the overall 
quality of management and derive these other factors from that.  Then, only 
when detail is needed, ask these factors separately.
      <p>
      There are several ways of doing this.  The easiest is to link all the
management factors back to 'Good management' as their single antecedent, 
and give weights accordingly.
      <p>
      But that does not differentiate much: they will all rise and fall
together.  There are several ways to overcome this, such as have another 
item that asks whether the management's strengths are in marketing, 
production or finance, and sets the various factors accordingly.
      <p>

<h2><a name="refces">References</a></h2>
<!-- -->

Basden A, Brown A J, Tetlow S D A, Hibberd P R, (1996), "Design of a user 
interface for a knowledge refinement tool", <i>Int. J. Human Computer 
Studies</i>, v.45, pp.157-183.
      <p>
Basden A, Hibberd P R, (1996), "User interface issues raised by knowledge 
refinement", <i>Int. J. Human Computer Studies</i>, v.45, pp.135-155.
      <p>

<hr>
Copyright (c) <a href="http://www.basden.u-net.com/andrew.html">Andrew 
Basden</a> 4 February 1998.
      <p>
Updated:  12 June 1999: a couple of hrefs put right.
</body></html>
