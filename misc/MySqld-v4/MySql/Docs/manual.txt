START-INFO-DIR-ENTRY
* mysql: (mysql).               MySQL documentation.
END-INFO-DIR-ENTRY

Table of Contents
*****************


General Information About MySQL
  MySQL, MySQL AB, and Open Source
    What Is MySQL
    What Is MySQL AB
      Contact Information
    About This Manual
    Conventions Used in This Manual
    History of MySQL
    The Main Features of MySQL
    How Stable Is MySQL?
    How Big Can MySQL Tables Be?
    Year 2000 Compliance
  MySQL Information Sources
    Books About MySQL
    General SQL Information and Tutorials
    Useful MySQL-related Links
    MySQL Mailing Lists
      The MySQL Mailing Lists
      Asking Questions or Reporting Bugs
      How to Report Bugs or Problems
      Guidelines for Answering Question on the Mailing List
  MySQL Support and Licensing
    Support offered by MySQL AB
    Copyrights Used by MySQL
      Copyright Changes
    MySQL Licensing Policy
    Example Licensing Situations
      Selling Products that use MySQL
      ISP MySQL Services
      Running a Web Server Using MySQL
  How Standards-compatible Is MySQL?
    MySQL Extensions to ANSI SQL92
    MySQL Differences Compared to ANSI SQL92
    Running MySQL in ANSI Mode
    Functionality Missing from MySQL
      Sub-selects
      `SELECT INTO TABLE'
      Transactions
      Stored Procedures and Triggers
      Foreign Keys
      Why We Did Not Implement Foreign Keys
      Views
      `--' as the Start of a Comment
    What Standards Does MySQL Follow?
    How to Cope Without `COMMIT'/`ROLLBACK'
    Known errors and design deficiencies in MySQL
  How MySQL Compares to Other Databases
    How MySQL Compares to `mSQL'
      How to Convert `mSQL' Tools for MySQL
      How `mSQL' and MySQL Client/Server Communications Protocols Differ
      How `mSQL' 2.0 SQL Syntax Differs from MySQL
    How MySQL Compares to PostgreSQL
      MySQL and PostgreSQL development strategies
      Featurewise Comparison of MySQL and PostgreSQL
      Benchmarking MySQL and PostgreSQL
  MySQL and the future (The TODO)
    Things that should be in 4.0
    Things that must be done in the real near future
    Things that have to be done sometime
    Some things we don't have any plans to do

MySQL Installation
  Quick Standard Installation of MySQL
    Installing MySQL on Linux
    Installing MySQL on Windows
  General Installation Issues
    How to Get MySQL
    Operating Systems Supported by MySQL
    Which MySQL Version to Use
    Installation Layouts
    How and When Updates Are Released
    MySQL Binaries Compiled by MySQL AB
  Installing a MySQL Source Distribution
    Quick Installation Overview
    Applying Patches
    Typical `configure' Options
    Installing from the Development Source Tree
    Problems Compiling?
    MIT-pthreads Notes
  Post-installation Setup and Testing
    Problems Running `mysql_install_db'
    Problems Starting the MySQL Server
    Starting and Stopping MySQL Automatically
  Upgrading/Downgrading MySQL
    Upgrading From Version 3.23 to Version 4.0
    Upgrading From Version 3.22 to Version 3.23
    Upgrading from Version 3.21 to Version 3.22
    Upgrading from Version 3.20 to Version 3.21
    Upgrading to Another Architecture
  Operating System Specific Notes
    Linux Notes (All Linux Versions)
      Linux Notes for Binary Distributions
      Linux x86 Notes
      Linux SPARC Notes
      Linux Alpha Notes
      Linux PowerPC Notes
      Linux MIPS Notes
      Linux IA64 Notes
    Windows Notes
      Starting MySQL on Windows 95 or Windows 98
      Starting MySQL on Windows NT or Windows 2000
      Running MySQL on Windows
      Connecting to a Remote MySQL from Windows with SSH
      Splitting Data Across Different Disks on Windows
      Compiling MySQL Clients on Windows
      MySQL-Windows Compared to Unix MySQL
    Solaris Notes
      Solaris 2.7/2.8 Notes
      Solaris x86 Notes
    BSD Notes
      FreeBSD Notes
      NetBSD notes
      OpenBSD Notes
      OpenBSD 2.5 Notes
      OpenBSD 2.8 Notes
      BSD/OS Notes
      BSD/OS Version 2.x Notes
      BSD/OS Version 3.x Notes
      BSD/OS Version 4.x Notes
    Mac OS X Notes
      Mac OS X Public Beta
      Mac OS X Server
    Other Unix Notes
      HP-UX Notes for Binary Distributions
      HP-UX Version 10.20 Notes
      HP-UX Version 11.x Notes
      IBM-AIX notes
      SunOS 4 Notes
      Alpha-DEC-UNIX Notes (Tru64)
      Alpha-DEC-OSF1 Notes
      SGI Irix Notes
      SCO Notes
      SCO Unixware Version 7.0 Notes
    OS/2 Notes
    BeOS Notes
    Novell Netware Notes

Introduction to MySQL: A MySQL Tutorial
  Connecting to and Disconnecting from the Server
  Entering Queries
  Creating and Using a Database
    Creating and Selecting a Database
    Creating a Table
    Loading Data into a Table
    Retrieving Information from a Table
      Selecting All Data
      Selecting Particular Rows
      Selecting Particular Columns
      Sorting Rows
      Date Calculations
      Working with `NULL' Values
      Pattern Matching
      Counting Rows
      Using More Than one Table
  Getting Information About Databases and Tables
  Examples of Common Queries
    The Maximum Value for a Column
    The Row Holding the Maximum of a Certain Column
    Maximum of Column per Group
    The Rows Holding the Group-wise Maximum of a Certain Field
    Using user variables
    Using Foreign Keys
    Searching on Two Keys
    Calculating visits per day
  Using `mysql' in Batch Mode
  Queries from Twin Project
    Find all Non-distributed Twins
    Show a Table on Twin Pair Status
  Using MySQL with Apache

MySQL Database Administration
  Configuring MySQL
    mysqld Command-line Options
    my.cnf Option Files
    Installing Many Servers on the Same Machine
    Running Multiple MySQL Servers on the Same Machine
  General Security Issues and the MySQL Access Privilege System
    General Security Guidelines
    How to Make MySQL Secure Against Crackers
    Startup Options for `mysqld' Concerning Security
    What the Privilege System Does
    How the Privilege System Works
    Privileges Provided by MySQL
    Connecting to the MySQL Server
    Access Control, Stage 1: Connection Verification
    Access Control, Stage 2: Request Verification
    Causes of `Access denied' Errors
  MySQL User Account Management
    `GRANT' and `REVOKE' Syntax
    MySQL User Names and Passwords
    When Privilege Changes Take Effect
    Setting Up the Initial MySQL Privileges
    Adding New Users to MySQL
    Setting Up Passwords
    Keeping Your Password Secure
    Using Secure Connections
      Basics
      Requirements
      GRANT options
  Disaster Prevention and Recovery
    Database Backups
    `BACKUP TABLE' Syntax
    `RESTORE TABLE' Syntax
    `CHECK TABLE' Syntax
    `REPAIR TABLE' Syntax
    Using `myisamchk' for Table Maintenance and Crash Recovery
      `myisamchk' Invocation Syntax
      General Options for `myisamchk'
      Check Options for `myisamchk'
      Repair Options for myisamchk
      Other Options for `myisamchk'
      `myisamchk' Memory Usage
      Using `myisamchk' for Crash Recovery
      How to Check Tables for Errors
      How to Repair Tables
      Table Optimization
    Setting Up a Table Maintenance Regimen
    Getting Information About a Table
  Database Administration Language Reference
    `OPTIMIZE TABLE' Syntax
    `ANALYZE TABLE' Syntax
    `FLUSH' Syntax
    `KILL' Syntax
    `SHOW' Syntax
      Retrieving information about Database, Tables, Columns, and Indexes
      `SHOW TABLE STATUS'
      `SHOW STATUS'
      `SHOW VARIABLES'
      `SHOW LOGS'
      `SHOW PROCESSLIST'
      `SHOW GRANTS'
      `SHOW CREATE TABLE'
  MySQL Localization and International Usage
    The Character Set Used for Data and Sorting
      German character set
    Non-English Error Messages
    Adding a New Character Set
    The character definition arrays
    String Collating Support
    Multi-byte Character Support
    Problems With Character Sets
  MySQL Server-Side Scripts and Utilities
    Overview of the Server-Side Scripts and Utilities
    safe_mysqld, the wrapper around mysqld
    mysqld_multi, program for managing multiple MySQL servers
    myisampack, The MySQL Compressed Read-only Table Generator
    mysqld-max, An extended mysqld server
  MySQL Client-Side Scripts and Utilities
    Overview of the Client-Side Scripts and Utilities
    The Command-line Tool
    mysqladmin, Administrating a MySQL Server
    Using `mysqlcheck' for Table Maintenance and Crash Recovery
    mysqldump, Dumping Table Structure and Data
    mysqlhotcopy, Copying MySQL Databases and Tables
    mysqlimport, Importing Data from Text Files
    Showing Databases, Tables, and Columns
    perror, Explaining Error Codes
    How to Run SQL Commands from a Text File
  The MySQL Log Files
    The Error Log
    The General Query Log
    The Update Log
    The Binary Update Log
    The Slow Query Log
    Log File Maintenance
  Replication in MySQL
    Introduction
    Replication Implementation Overview
    How To Set Up Replication
    Replication Features and Known Problems
    Replication Options in my.cnf
    SQL Commands Related to Replication
    Replication FAQ
    Troubleshooting Replication

MySQL Optimization
  Optimization Overview
    MySQL Design Limitations/Tradeoffs
    Portability
    What Have We Used MySQL For?
    The MySQL Benchmark Suite
    Using Your Own Benchmarks
  Optimizing `SELECT's and Other Queries
    `EXPLAIN' Syntax (Get Information About a `SELECT')
    Estimating Query Performance
    Speed of `SELECT' Queries
    How MySQL Optimizes `WHERE' Clauses
    How MySQL Optimizes `DISTINCT'
    How MySQL Optimizes `LEFT JOIN' and `RIGHT JOIN'
    How MySQL Optimizes `LIMIT'
    Speed of `INSERT' Queries
    Speed of `UPDATE' Queries
    Speed of `DELETE' Queries
    Other Optimization Tips
  Locking Issues
    How MySQL Locks Tables
    Table Locking Issues
  Optimizing Database Structure
    Design Choices
    Get Your Data as Small as Possible
    How MySQL Uses Indexes
    Column Indexes
    Multiple-Column Indexes
    How MySQL Opens and Closes Tables
    Drawbacks to Creating Large Numbers of Tables in the Same Database
    Why So Many Open tables?
  Optimizing the MySQL Server
    System/Compile Time and Startup Parameter Tuning
    Tuning Server Parameters
    How Compiling and Linking Affects the Speed of MySQL
    How MySQL Uses Memory
    How MySQL uses DNS
    `SET' Syntax
  Disk Issues
    Using Symbolic Links
      Using Symbolic Links for Databases
      Using Symbolic Links for Tables

MySQL Language Reference
  Language Structure
    Literals: How to Write Strings and Numbers
      Strings
      Numbers
      Hexadecimal Values
      `NULL' Values
    Database, Table, Index, Column, and Alias Names
    Case Sensitivity in Names
    User Variables
    Comment Syntax
    Is MySQL Picky About Reserved Words?
  Column Types
    Numeric Types
    Date and Time Types
      Y2K Issues and Date Types
      The `DATETIME', `DATE', and `TIMESTAMP' Types
      The `TIME' Type
      The `YEAR' Type
    String Types
      The `CHAR' and `VARCHAR' Types
      The `BLOB' and `TEXT' Types
      The `ENUM' Type
      The `SET' Type
    Choosing the Right Type for a Column
    Using Column Types from Other Database Engines
    Column Type Storage Requirements
  Functions for Use in `SELECT' and `WHERE' Clauses
    Non-Type-Specific Operators and Functions
      Parenthesis
      Comparison Operators
      Logical Operators
      Control Flow Functions
    String Functions
      String Comparison Functions
      Case Sensitivity
    Numeric Functions
      Arithmetic Operations
      Mathematical Functions
    Date and Time Functions
    Other Functions
      Bit Functions
      Miscellaneous Functions
  Data Manipulation: `SELECT', `INSERT', `UPDATE', `DELETE'
    `SELECT' Syntax
      `JOIN' Syntax
    `UNION' Syntax
    `INSERT' Syntax
      `INSERT ... SELECT' Syntax
    `INSERT DELAYED' syntax
    `UPDATE' Syntax
    `DELETE' Syntax
    `TRUNCATE' Syntax
    `REPLACE' Syntax
    `LOAD DATA INFILE' Syntax
  Data Definition: `CREATE', `DROP', `ALTER'
    `CREATE DATABASE' Syntax
    `DROP DATABASE' Syntax
    `CREATE TABLE' Syntax
      Silent Column Specification Changes
    `ALTER TABLE' Syntax
    `RENAME TABLE' Syntax
    `DROP TABLE' Syntax
    `CREATE INDEX' Syntax
    `DROP INDEX' Syntax
  Basic MySQL User Utility Commands
    `USE' Syntax
    `DESCRIBE' Syntax (Get Information About Columns)
  MySQL Transactional and Locking Commands
    `BEGIN/COMMIT/ROLLBACK' Syntax
    `LOCK TABLES/UNLOCK TABLES' Syntax
    `SET TRANSACTION' Syntax
  `HANDLER' Syntax
  MySQL Full-text Search
    Fulltext restrictions
    Fine-tuning MySQL Full-text Search
    New Features of Full-text Search to Appear in MySQL 4.0
    Full-text Search TODO

MySQL Table Types
  MyISAM Tables
    Space Needed for Keys
    MyISAM Table Formats
      Static (Fixed-length) Table Characteristics
      Dynamic Table Characteristics
      Compressed Table Characteristics
    MyISAM table problems.
      Corrupted MyISAM tables.
      Clients is using or hasn't closed the table properly
  MERGE Tables
  ISAM Tables
  HEAP Tables
  BDB or Berkeley_DB Tables
    Overview of BDB Tables
    Installing BDB
    BDB startup options
    Some characteristic of `BDB' tables:
    Some things we need to fix for BDB in the near future:
    Operating systems supported by *BDB*
    Errors You May Get When Using BDB Tables
  InnoDB Tables
    InnoDB tables overview
    InnoDB startup options
    Creating InnoDB table space
      If something goes wrong in database creation
    Creating InnoDB tables
      Converting MyISAM tables to InnoDB
    Adding and removing InnoDB data and log files
    Backing up and recovering an InnoDB database
      Checkpoints
    Moving an InnoDB database to another machine
    InnoDB transaction model
      Consistent read
      Locking reads
      Next-key locking: avoiding the phantom problem
      Locks set by different SQL statements in InnoDB
      Deadlock detection and rollback
      An example of how the consistent read works in InnoDB
    Performance tuning tips
      The InnoDB Monitor
    Implementation of multiversioning
    Table and index structures
      Physical structure of an index
      Insert buffering
      Adaptive hash indexes
      Physical record structure
      How an auto-increment column works in InnoDB
    File space management and disk i/o
      Disk i/o
      File space management
      Defragmenting a table
    Error handling
    Some restrictions on InnoDB tables
    InnoDB contact information

MySQL APIs
  MySQL PHP API
    Common Problems with MySQL and PHP
  MySQL Perl API
    `DBI' with `DBD::mysql'
    The `DBI' Interface
    More `DBI'/`DBD' Information
  MySQL ODBC Support
    How To Install MyODBC
    How to Fill in the Various Fields in the ODBC Administrator Program
    Connect parameters for MyODBC
    How to Report Problems with MyODBC
    Programs Known to Work with MyODBC
    How to Get the Value of an `AUTO_INCREMENT' Column in ODBC
    Reporting Problems with MyODBC
  MySQL C API
    C API Datatypes
    C API Function Overview
    C API Function Descriptions
      `mysql_affected_rows()'
      `mysql_close()'
      `mysql_connect()'
      `mysql_change_user()'
      `mysql_character_set_name()'
      `mysql_create_db()'
      `mysql_data_seek()'
      `mysql_debug()'
      `mysql_drop_db()'
      `mysql_dump_debug_info()'
      `mysql_eof()'
      `mysql_errno()'
      `mysql_error()'
      `mysql_escape_string()'
      `mysql_fetch_field()'
      `mysql_fetch_fields()'
      `mysql_fetch_field_direct()'
      `mysql_fetch_lengths()'
      `mysql_fetch_row()'
      `mysql_field_count()'
      `mysql_field_seek()'
      `mysql_field_tell()'
      `mysql_free_result()'
      `mysql_get_client_info()'
      `mysql_get_host_info()'
      `mysql_get_proto_info()'
      `mysql_get_server_info()'
      `mysql_info()'
      `mysql_init()'
      `mysql_insert_id()'
      `mysql_kill()'
      `mysql_list_dbs()'
      `mysql_list_fields()'
      `mysql_list_processes()'
      `mysql_list_tables()'
      `mysql_num_fields()'
      `mysql_num_rows()'
      `mysql_options()'
      `mysql_ping()'
      `mysql_query()'
      `mysql_real_connect()'
      `mysql_real_escape_string()'
      `mysql_real_query()'
      `mysql_reload()'
      `mysql_row_seek()'
      `mysql_row_tell()'
      `mysql_select_db()'
      `mysql_shutdown()'
      `mysql_stat()'
      `mysql_store_result()'
      `mysql_thread_id()'
      `mysql_use_result()'
    C Threaded Function Descriptions
      `my_init()'
      `mysql_thread_init()'
      `mysql_thread_end()'
    C Embedded Server Function Descriptions
      `mysql_server_init()'
      `mysql_server_end()'
    Common questions and problems when using the C API
      Why Is It that After `mysql_query()' Returns Success, `mysql_store_result()' Sometimes Returns `NULL?'
      What Results Can I Get From a Query?
      How Can I Get the Unique ID for the Last Inserted Row?
      Problems Linking with the C API
    Building Client Programs
    How to Make a Threaded Client
    libmysqld, the Embedded MySQL Server Library
      Overview of the Embedded MySQL Server Library
      Compiling Programs with `libmysqld'
      Restrictions when using the Embedded MySQL Server
      Using option files with the embedded server
      Things left to do in Embedded Server (TODO)
      A Simple Embedded Server Example
      Licensing the Embedded Server
  MySQL C++ APIs
    Borland C++
  MySQL Java Connectivity (JDBC)
  MySQL Python APIs
  MySQL Tcl APIs
  MySQL Eiffel wrapper

Extending MySQL
  Adding New Functions to MySQL
    `CREATE FUNCTION/DROP FUNCTION' Syntax
    Adding a New User-definable Function
      UDF Calling Sequences
      Argument Processing
      Return Values and Error Handling
      Compiling and Installing User-definable Functions
    Adding a New Native Function
  Adding New Procedures to MySQL
    Procedure Analyse
    Writing a Procedure
  MySQL Internals
    MySQL Threads
    MySQL Test Suite
      Running the MySQL Test Suite
      Extending the MySQL Test Suite
      Reporting Bugs in the MySQL Test Suite

Problems and Common Errors
  How to Determine What Is Causing Problems
  Some Common Errors When Using MySQL
    `Access denied' Error
    `MySQL server has gone away' Error
    `Can't connect to [local] MySQL server' error
    `Host '...' is blocked' Error
    `Too many connections' Error
    `Some non-transactional changed tables couldn't be rolled back' Error
    `Out of memory' Error
    `Packet too large' Error
    Communication Errors / Aborted Connection
    `The table is full' Error
    `Can't create/write to file' Error
    `Commands out of sync' Error in Client
    `Ignoring user' Error
    `Table 'xxx' doesn't exist' Error
    `Cant' initialize character set xxx' error.
    File Not Found
  Installation Related Issues
    Problems When Linking with the MySQL Client Library
    How to Run MySQL As a Normal User
    Problems with File Permissions
  Administration Related Issues
    What To Do If MySQL Keeps Crashing
    How to Reset a Forgotten Password
    How MySQL Handles a Full Disk
    Where MySQL Stores Temporary Files
    How to Protect or change the MySQL socket file `/tmp/mysql.sock'
    Time Zone Problems
  Query Related Issues
    Case Sensitivity in Searches
    Problems Using `DATE' Columns
    Problems with `NULL' Values
    Problems with `alias'
    Deleting Rows from Related Tables
    Solving Problems with No Matching Rows
  Table Definition Related Issues
    Problems with `ALTER TABLE'.
    How To Change the Order of Columns in a Table
    TEMPORARY TABLE problems

Some MySQL Users
  General News Sites
  Some Web Search Engines
  Some Information Search Engines Concentrated on Some Area
  Online Magazines
  Web Sites that Use MySQL as a Backend
  Some Domain/Internet/Web and Related Services
  Web Sites that Use `PHP' and MySQL
  Some MySQL Consultants
  Programming
  Uncategorized Pages

MySQL customer usage

Contributed Programs
  APIs
  Clients
  Web Tools
  Performance Benchmarking Tools
  Authentication Tools
  Converters
  Using MySQL with Other Products
  Useful Tools
  RPMs for Common Tools (Most Are for RedHat 6.1)
  Useful Functions
  Windows programs
  Uncategorized

Credits
  Developers at MySQL AB
  Contributors to MySQL
  Supporters to MySQL

MySQL change history
  Changes in release 4.0.x (Development; Alpha)
    Changes in release 4.0.0
  Changes in release 3.23.x  (Stable)
    Changes in release 3.23.44
    Changes in release 3.23.43
    Changes in release 3.23.42
    Changes in release 3.23.41
    Changes in release 3.23.40
    Changes in release 3.23.39
    Changes in release 3.23.38
    Changes in release 3.23.37
    Changes in release 3.23.36
    Changes in release 3.23.35
    Changes in release 3.23.34a
    Changes in release 3.23.34
    Changes in release 3.23.33
    Changes in release 3.23.32
    Changes in release 3.23.31
    Changes in release 3.23.30
    Changes in release 3.23.29
    Changes in release 3.23.28
    Changes in release 3.23.27
    Changes in release 3.23.26
    Changes in release 3.23.25
    Changes in release 3.23.24
    Changes in release 3.23.23
    Changes in release 3.23.22
    Changes in release 3.23.21
    Changes in release 3.23.20
    Changes in release 3.23.19
    Changes in release 3.23.18
    Changes in release 3.23.17
    Changes in release 3.23.16
    Changes in release 3.23.15
    Changes in release 3.23.14
    Changes in release 3.23.13
    Changes in release 3.23.12
    Changes in release 3.23.11
    Changes in release 3.23.10
    Changes in release 3.23.9
    Changes in release 3.23.8
    Changes in release 3.23.7
    Changes in release 3.23.6
    Changes in release 3.23.5
    Changes in release 3.23.4
    Changes in release 3.23.3
    Changes in release 3.23.2
    Changes in release 3.23.1
    Changes in release 3.23.0
  Changes in release 3.22.x (Older; Still supported)
    Changes in release 3.22.35
    Changes in release 3.22.34
    Changes in release 3.22.33
    Changes in release 3.22.32
    Changes in release 3.22.31
    Changes in release 3.22.30
    Changes in release 3.22.29
    Changes in release 3.22.28
    Changes in release 3.22.27
    Changes in release 3.22.26
    Changes in release 3.22.25
    Changes in release 3.22.24
    Changes in release 3.22.23
    Changes in release 3.22.22
    Changes in release 3.22.21
    Changes in release 3.22.20
    Changes in release 3.22.19
    Changes in release 3.22.18
    Changes in release 3.22.17
    Changes in release 3.22.16
    Changes in release 3.22.15
    Changes in release 3.22.14
    Changes in release 3.22.13
    Changes in release 3.22.12
    Changes in release 3.22.11
    Changes in release 3.22.10
    Changes in release 3.22.9
    Changes in release 3.22.8
    Changes in release 3.22.7
    Changes in release 3.22.6
    Changes in release 3.22.5
    Changes in release 3.22.4
    Changes in release 3.22.3
    Changes in release 3.22.2
    Changes in release 3.22.1
    Changes in release 3.22.0
  Changes in release 3.21.x
    Changes in release 3.21.33
    Changes in release 3.21.32
    Changes in release 3.21.31
    Changes in release 3.21.30
    Changes in release 3.21.29
    Changes in release 3.21.28
    Changes in release 3.21.27
    Changes in release 3.21.26
    Changes in release 3.21.25
    Changes in release 3.21.24
    Changes in release 3.21.23
    Changes in release 3.21.22
    Changes in release 3.21.21a
    Changes in release 3.21.21
    Changes in release 3.21.20
    Changes in release 3.21.19
    Changes in release 3.21.18
    Changes in release 3.21.17
    Changes in release 3.21.16
    Changes in release 3.21.15
    Changes in release 3.21.14b
    Changes in release 3.21.14a
    Changes in release 3.21.13
    Changes in release 3.21.12
    Changes in release 3.21.11
    Changes in release 3.21.10
    Changes in release 3.21.9
    Changes in release 3.21.8
    Changes in release 3.21.7
    Changes in release 3.21.6
    Changes in release 3.21.5
    Changes in release 3.21.4
    Changes in release 3.21.3
    Changes in release 3.21.2
    Changes in release 3.21.0
  Changes in release 3.20.x
    Changes in release 3.20.18
    Changes in release 3.20.17
    Changes in release 3.20.16
    Changes in release 3.20.15
    Changes in release 3.20.14
    Changes in release 3.20.13
    Changes in release 3.20.11
    Changes in release 3.20.10
    Changes in release 3.20.9
    Changes in release 3.20.8
    Changes in release 3.20.7
    Changes in release 3.20.6
    Changes in release 3.20.3
    Changes in release 3.20.0
  Changes in release 3.19.x
    Changes in release 3.19.5
    Changes in release 3.19.4
    Changes in release 3.19.3

Comments on porting to other systems
  Debugging a MySQL server
    Compiling MYSQL for debugging.
    Creating trace files
    Debugging mysqld under gdb
    Using a stack trace
    Using log files to find cause of errors in mysqld
    Making a test case when you experience table corruption
  Debugging a MySQL client
  The DBUG package.
  Locking methods
  Comments about RTS threads
  Differences between different thread packages

Environment Variables

Description of MySQL regular expression syntax

What is Unireg?

GNU GENERAL PUBLIC LICENSE
  Preamble
  How to Apply These Terms to Your New Programs

GNU LESSER GENERAL PUBLIC LICENSE
  Preamble
  How to Apply These Terms to Your New Libraries

Pieces of the manual in transit
  Installing a MySQL Binary Distribution
  Perl Installation Comments
    Installing Perl on Unix
    Installing ActiveState Perl on Windows
    Installing the MySQL Perl Distribution on Windows
    Problems Using the Perl `DBI'/`DBD' Interface
  Functions for Use with `GROUP BY' Clauses

SQL command, type and function index

Concept Index


This is a manual for MySQL. This version is about the 4.0.0-alpha
version of MySQL.  You can find a manual about any older version of
MySQL in the binary or source distribution for that version.

General Information About MySQL
*******************************

This is the MySQL reference manual; it documents MySQL Version
4.0.0-alpha.  As MySQL is work in progress, the manual gets updated
frequently.  There is a very good chance that this version is out of
date, unless you are looking at it online.  The most recent version of
this manual is available at
`http://www.mysql.com/documentation/index.html' in many different
formats.  If you have a hard time finding information in the manual, you
can try the searchable PHP version at `http://www.mysql.com/doc'.

MySQL is a very fast, multi-threaded, multi-user, and robust SQL
(Structured Query Language) database server.

MySQL is free software.  It is licensed with the *GNU GENERAL PUBLIC
LICENSE* `http://www.gnu.org/'.  *Note Licensing and Support::.

The MySQL home page (http://www.mysql.com/) provides the latest
information about MySQL.

The following list describes some useful sections of the manual:

   * For information about the company behind MySQL, see *Note What is
     MySQL AB::.

   * For a discussion of MySQL's capabilities, see *Note Features::.

   * For installation instructions, see *Note Installing::.

   * For tips on porting MySQL to new architectures or operating
     systems, see *Note Porting::.

   * For information about upgrading from a Version 3.23 release, see
     *Note Upgrading-from-3.23::.

   * For information about upgrading from a Version 3.22 release, see
     *Note Upgrading-from-3.22::.

   * For a tutorial introduction to MySQL, see *Note Tutorial::.

   * For examples of SQL and benchmarking information, see the
     benchmarking directory (`sql-bench' in the distribution).

   * For a history of new features and bug fixes, see *Note News::.

   * For a list of currently known bugs and misfeatures, see *Note
     Bugs::.

   * For future plans, see *Note TODO::.

   * For a list of all the contributors to this project, see *Note
     Credits::.

*IMPORTANT:*

Reports of errors (often called bugs), as well as questions and
comments, should be sent to the mailing list at <mysql@lists.mysql.com>.
*Note Bug reports::.  The `mysqlbug' script should be used to generate
bug reports.  For source distributions, the `mysqlbug' script can be
found in the `scripts' directory.  For binary distributions, `mysqlbug'
can be found in the `bin' directory. If you have found a sensitive
security bug in MySQL, you should send an e-mail to
<security@mysql.com>.

If you have any suggestions concerning additions or corrections to this
manual, please send them to the manual team at <docs@mysql.com>.

This is a reference manual; it does not provide general instruction on
SQL or relational database concepts.  If you want general information
about SQL, see *Note General-SQL::.  For books that focus more
specifically on MySQL, see *Note MySQL-Books::.

MySQL, MySQL AB, and Open Source
================================

What Is MySQL
-------------

MySQL, the most popular Open Source SQL database, is provided by MySQL
AB.  MySQL AB is a commercial company that builds its business
providing services around the MySQL database.  *Note What is MySQL AB::.

MySQL is a database management system.
     A database is a structured collection of data.  It may be anything
     from a simple shopping list to a picture gallery or the vast
     amounts of information in a corporate network.  To add, access,
     and process data stored in a computer database, you need a
     database management system such as MySQL.  Since computers are
     very good at handling large amounts of data, database management
     plays a central role in computing, as stand-alone utilities, or as
     parts of other applications.

MySQL is a relational database management system.
     A relational database stores data in separate tables rather than
     putting all the data in one big storeroom.  This adds speed and
     flexibility.  The tables are linked by defined relations making it
     possible to combine data from several tables on request.  The SQL
     part of MySQL stands for "Structured Query Language" - the most
     common standardized language used to access databases.

MySQL is Open Source Software.
     Open Source means that it is possible for anyone to use and modify.
     Anybody can download MySQL from the Internet and use it without
     paying anything.  Anybody so inclined can study the source code
     and change it to fit their needs.  MySQL uses the GPL (GNU General
     Public License) `http://www.gnu.org', to define what you may and
     may not do with the software in different situations.  If you feel
     uncomfortable with the GPL or need to embed MySQL into a
     commercial application you can buy a commercially licensed version
     from us.

Why use MySQL?
     MySQL is very fast, reliable, and easy to use.  If that is what
     you are looking for, you should give it a try.  MySQL also has a
     practical set of features developed in close cooperation with our
     users.  You can find a performance comparison of MySQL to some
     other database managers on our benchmark page.  *Note MySQL
     Benchmarks::.

     MySQL was originally developed to handle large databases much
     faster than existing solutions and has been successfully used in
     highly demanding production environments for several years.  Though
     under constant development, MySQL today offers a rich and useful
     set of functions.  The connectivity, speed, and security make
     MySQL highly suited for accessing databases on the Internet.

The technical features of MySQL
     For advanced technical information, see *Note Reference::.  MySQL
     is a client/server system that consists of a multi-threaded SQL
     server that supports different backends, several different client
     programs and libraries, administrative tools, and several
     programming interfaces.

     We also provide MySQL as a multi-threaded library which you can
     link into your application to get a smaller, faster, easier to
     manage product.

MySQL has a lot of contributed software available.
     It is very likely that you will find that your favorite
     application or language already supports MySQL.

The official way to pronounce MySQL is "My Ess Que Ell" (not
MY-SEQUEL). But we try to avoid correcting people who say MY-SEQUEL.

What Is MySQL AB
----------------

MySQL AB is the Swedish company owned and run by the MySQL founders and
main developers.  We are dedicated to developing MySQL and spreading
our database to new users.  MySQL AB owns the copyright to the MySQL
server source code and the MySQL trademark.  A significant amount of
revenues from our services goes to developing MySQL.  *Note What-is::.

MySQL AB has been profitable providing MySQL from the start.  We don't
get any outside funding, but have earned all our money ourselves.

We are searching for partners that would like to support our development
of MySQL so that we can accelerate the pace of development.  If you are
interested in doing this, please e-mail <partner@mysql.com>!

MySQL AB currently has over twenty people
(`http://www.mysql.com/development/team.html') on its payroll and is
growing rapidly.

Our main sources of income are:

   * Commercial high quality support for MySQL provided by the MySQL
     developers themselves.  If you are interested in purchasing a
     support contract, please visit `https://order.mysql.com/' to view
     our support options and order support.

   * Consulting services.  We have developers and consultants in 12
     countries and partners in many other countries that can help you
     with almost any MySQL related issues.  If you need consulting
     services, please e-mail a good description of your needs to
     <info@mysql.com>!  If we can't handle this ourselves we can
     usually find a partner or a developer that can help you with your
     problems.

   * Licensing MySQL for use as an embedded database.  *Note Licensing
     policy::.  If you have a commercial product for which you need a
     fast, high quality database, but you can't afford to make your
     product Open Source, you can buy the right to use the MySQL server
     under a commercial copyright.  If you are interested in this you
     can buy MySQL licenses at `https://order.mysql.com/' or contact us
     at <licensing@mysql.com>.

   * Advertising. `http://www.mysql.com/' is a very popular web site
     with more than 10,000,000 page views per months (January 2001).
     By putting a banner on this site you are guaranteed to reach a lot
     of potential customers in the open source, Linux and database
     communities. If you are interested in this e-mail
     <advertising@mysql.com>.

   * We are building a partner program to be able to provide MySQL
     services in every country.  If you are interested in becoming a
     partner of MySQL AB please visit
     `http://www.mysql.com/information/partners.html' or e-mail
     <partner@mysql.com>.

   * We provide MySQL training through our partner programs.  For more
     information, please e-mail <info@mysql.com>.

   * The MySQL brand has, since 1995, been associated with speed and
     reliability, and is known to be something you can depend upon.  If
     you are interested in using the MySQL trademark in your marketing,
     you can e-mail <info@mysql.com> about this.

The MySQL core values show our dedication to MySQL and Open Source.

We want MySQL to be:

   * The best and the most widely used database in the world.

   * Available and affordable for all.

   * Easy to use.

   * Continuously improving while remaining fast and safe.

   * Fun to use and improve.

   * Free from bugs.

MySQL AB and the people of MySQL AB:

   * Promote Open Source Philosophy and support the Open Source
     Community.

   * Aim to be good citizens.

   * Prefer partners that share our values and mind-set.

   * Answer e-mail and provide support.

   * Are a virtual company, networking with others.

   * Work against software patents.

Contact Information
...................

For commercial licensing, please contact the MySQL licensing team.  The
much preferred method is by e-mail to <licensing@mysql.com>.  Fax is
also possible but handling of these may take much longer (Fax +46-8-729
69 05).

If you represent a business that is interested in partnering with
MySQL, please send e-mail to <partner@mysql.com>.

For timely, precise answers to technical questions about MySQL you
should order one of our support contracts (https://order.mysql.com/).
MySQL support is provided by the MySQL developers so the standard is
extremely high.

If you are interested in placing a banner advertisement on our Web site,
please send e-mail to <advertising@mysql.com>.

If you are interested in any of the jobs listed in our jobs
(http://www.mysql.com/development/jobs/) section, please send e-mail to
<jobs@mysql.com>.

For general discussion amongst our many users, please direct your
attention to the appropriate mailing list
(http://www.mysql.com/documentation/lists.html).

For general information inquires, please send e-mail to
<info@mysql.com>.

For questions or comments about the workings or content of the Web site,
please send e-mail to <webmaster@mysql.com>.

About This Manual
-----------------

This manual is currently available in Texinfo, plain text, Info, HTML,
PostScript, and PDF versions.  The primary document is the Texinfo file.
The HTML version is produced automatically using a modified version of
`texi2html'.  The plain text and Info versions are produced with
`makeinfo'.  The Postscript version is produced using `texi2dvi' and
`dvips'.  The PDF version is produced with `pdftex'.

This manual is written and maintained by David Axmark, Michael (Monty)
Widenius, Jeremy Cole, Arjen Lentz, and Paul DuBois. For other
contributors, see *Note Credits::.

Conventions Used in This Manual
-------------------------------

This manual uses certain typographical conventions:

`constant'
     Constant-width font is used for command names and options; SQL
     statements; database, table and column names; C and Perl code; and
     environment variables.  Example: "To see how `mysqladmin' works,
     invoke it with the `--help' option."

`filename'
     Constant-width font with surrounding quotes is used for filenames
     and pathnames.  Example: "The distribution is installed under the
     `/usr/local/' directory."

`c'
     Constant-width font with surrounding quotes is also used to
     indicate character sequences.  Example: "To specify a wild card,
     use the `%' character."

_italic_
     Italic font is used for emphasis, _like this_.

*boldface*
     Boldface font is used for access privilege names (for example, "do
     not grant the *process* privilege lightly") and occasionally to
     convey *especially strong emphasis*.

When commands are shown that are meant to be executed by a particular
program, the program is indicated by a prompt shown before the command.
For example, `shell>' indicates a command that you execute from your
login shell, and `mysql>' indicates a command that you execute from the
`mysql' client program:

     shell> type a shell command here
     mysql> type a mysql command here

Shell commands are shown using Bourne shell syntax.  If you are using a
`csh'-style shell, you may need to issue commands slightly differently.
For example, the sequence to set an environment variable and run a
command looks like this in Bourne shell syntax:

     shell> VARNAME=value some_command

For `csh', you would execute the sequence like this:

     shell> setenv VARNAME value
     shell> some_command

Often database, table, and column names must be substituted into
commands.  To indicate that such substitution is necessary, this manual
uses `db_name', `tbl_name' and `col_name'.  For example, you might see
a statement like this:

     mysql> SELECT col_name FROM db_name.tbl_name;

This means that if you were to enter a similar statement, you would
supply your own database, table, and column names, perhaps like this:

     mysql> SELECT author_name FROM biblio_db.author_list;

SQL statements may be written in uppercase or lowercase.  When this
manual shows a SQL statement, uppercase is used for particular keywords
if those keywords are under discussion (to emphasize them) and
lowercase is used for the rest of the statement.  For example, you
might see the following in a discussion of the `SELECT' statement:

     mysql> SELECT count(*) FROM tbl_name;

On the other hand, in a discussion of the `COUNT()' function, the same
statement would be written like this:

     mysql> select COUNT(*) from tbl_name;

If no particular emphasis is intended, all keywords are written
uniformly in uppercase.

In syntax descriptions, square brackets (`[' and `]') are used to
indicate optional words or clauses:

     DROP TABLE [IF EXISTS] tbl_name

When a syntax element consists of a number of alternatives, the
alternatives are separated by vertical bars (`|').  When one member
from a set of choices *may* be chosen, the alternatives are listed
within square brackets (`[' and `]'):

     TRIM([[BOTH | LEADING | TRAILING] [remstr] FROM] str)

When one member from a set of choices *must* be chosen, the
alternatives are listed within braces (`{' and `}'):

     {DESCRIBE | DESC} tbl_name {col_name | wild}

History of MySQL
----------------

We once started out with the intention of using `mSQL' to connect to our
tables using our own fast low-level (ISAM) routines. However, after some
testing we came to the conclusion that `mSQL' was not fast enough nor
flexible enough for our needs.  This resulted in a new SQL interface to
our database but with almost the same API interface as `mSQL'.  This
API was chosen to ease porting of third-party code.

The derivation of the name MySQL is not perfectly clear.  Our base
directory and a large number of our libraries and tools have had the
prefix "my" for well over 10 years.  However, Monty's daughter (some
years younger) is also named My.  Which of the two gave its name to
MySQL is still a mystery, even for us.

The Main Features of MySQL
--------------------------

The following list describes some of the important characteristics of
MySQL:

   * Fully multi-threaded using kernel threads.  This means it can
     easily use multiple CPUs if available.

   * C, C++, Eiffel, Java, Perl, PHP, Python and Tcl APIs.  *Note
     Clients::.

   * Works on many different platforms.  *Note Which OS::.

   * Many column types: signed/unsigned integers 1, 2, 3, 4, and 8 bytes
     long, `FLOAT', `DOUBLE', `CHAR', `VARCHAR', `TEXT', `BLOB',
     `DATE', `TIME', `DATETIME', `TIMESTAMP', `YEAR', `SET', and `ENUM'
     types.  *Note Column types::.

   * Very fast joins using an optimized one-sweep multi-join.

   * Full operator and function support in the `SELECT' and `WHERE'
     parts of queries.  For example:

          mysql> SELECT CONCAT(first_name, " ", last_name) FROM tbl_name
                     WHERE income/dependents > 10000 AND age > 30;

   * SQL functions are implemented through a highly optimized class
     library and should be as fast as possible!  Usually there isn't
     any memory allocation at all after query initialization.

   * Full support for SQL `GROUP BY' and `ORDER BY' clauses.  Support
     for group functions (`COUNT()', `COUNT(DISTINCT ...)', `AVG()',
     `STD()', `SUM()', `MAX()' and `MIN()').

   * Support for `LEFT OUTER JOIN' and `RIGHT OUTER JOIN' with ANSI SQL
     and ODBC syntax.

   * You can mix tables from different databases in the same query (as
     of Version 3.22).

   * A privilege and password system that is very flexible and secure,
     and allows host-based verification.  Passwords are secure because
     all password traffic is encrypted when you connect to a server.

   * ODBC (Open-DataBase-Connectivity) support for Win32 (with source).
     All ODBC 2.5 functions and many others.  For example, you can use
     MS Access to connect to your MySQL server.  *Note ODBC::.

   * Very fast B-tree disk tables with index compression.

   * Up to 32 indexes per table are allowed.  Each index may consist of
     1 to 16 columns or parts of columns.  The maximum index length is
     500 bytes (this may be changed when compiling MySQL).  An index
     may use a prefix of a `CHAR' or `VARCHAR' field.

   * Fixed-length and variable-length records.

   * In-memory hash tables which are used as temporary tables.

   * Handles large databases.  We are using MySQL with some databases
     that contain 50,000,000 records and we know of users that uses
     MySQL with 60,000 tables and about 5,000,000,000 rows

   * All columns have default values.  You can use `INSERT' to insert a
     subset of a table's columns; those columns that are not explicitly
     given values are set to their default values.

   * Uses GNU Automake, Autoconf, and Libtool for portability.

   * Written in C and C++.  Tested with a broad range of different
     compilers.

   * A very fast thread-based memory allocation system.

   * No memory leaks.  MySQL has been tested with Purify, a commercial
     memory leakage detector.

   * Includes `myisamchk', a very fast utility for table checking,
     optimization, and repair.  All of the functionality of `myisamchk'
     is also available through the SQL interface as well.  *Note MySQL
     Database Administration::.

   * Full support for several different character sets, including
     ISO-8859-1 (Latin1), german, big5, ujis, and more.  For example,
     the Scandinavian characters `a*', `a"' and `o"' are allowed in
     table and column names.

   * All data are saved in the chosen character set.  All comparisons
     for normal string columns are case insensitive.

   * Sorting is done according to the chosen character set (the Swedish
     way by default).  It is possible to change this when the MySQL
     server is started up.  To see an example of very advanced sorting,
     look at the Czech sorting code.  MySQL supports many different
     character sets that can be specified at compile and run time.

   * Aliases on tables and columns are allowed as in the SQL92 standard.

   * `DELETE', `INSERT', `REPLACE', and `UPDATE' return the number of
     rows that were changed (affected).  It is possible to return the
     number of rows matched instead by setting a flag when connecting
     to the server.

   * Function names do not clash with table or column names.  For
     example, `ABS' is a valid column name.  The only restriction is
     that for a function call, no spaces are allowed between the
     function name and the `(' that follows it.  *Note Reserved words::.

   * All MySQL programs can be invoked with the `--help' or `-?'
     options to obtain online assistance.

   * The server can provide error messages to clients in many languages.
     *Note Languages::.

   * Clients may connect to the MySQL server using TCP/IP Sockets, Unix
     Sockets (Unix), or Named Pipes (NT).

   * The MySQL-specific `SHOW' command can be used to retrieve
     information about databases, tables, and indexes.  The `EXPLAIN'
     command can be used to determine how the optimizer resolves a
     query.

How Stable Is MySQL?
--------------------

This section addresses the questions "How stable is MySQL?" and "Can I
depend on MySQL in this project?"  We will try to clarify some issues
and to answer some of the more important questions that seem to concern
many people.  This section has been put together from information
gathered from the mailing list (which is very active in reporting bugs).

At TcX, MySQL has worked without any problems in our projects since
mid-1996.  When MySQL was released to a wider public, we noticed that
there were some pieces of "untested code" that were quickly found by the
new users who made queries in a manner different than our own.  Each new
release has had fewer portability problems than the previous one (even
though each has had many new features).

Each release of MySQL has been usable, and there have been problems
only when users start to use code from the "gray zones."  Naturally,
outside users don't know what the gray zones are; this section attempts
to indicate those that are currently known.  The descriptions deal with
Version 3.23 of MySQL.  All known and reported bugs are fixed in the
latest version, with the exception of the bugs listed in the bugs
section, which are things that are design-related.  *Note Bugs::.

MySQL is written in multiple layers and different independent modules.
These modules are listed below with an indication of how well-tested
each of them is:

*The ISAM table handler -- Stable*
     This manages storage and retrieval of all data in MySQL Version
     3.22 and earlier.  In all MySQL releases there hasn't been a single
     (reported) bug in this code. The only known way to get a corrupted
     table is to kill the server in the middle of an update.  Even that
     is unlikely to destroy any data beyond rescue, because all data
     are flushed to disk between each query.  There hasn't been a
     single bug report about lost data because of bugs in MySQL.

*The MyISAM table handler -- Stable*
     This is new in MySQL Version 3.23.  It's largely based on the ISAM
     table code but has a lot of new and very useful features.

*The parser and lexical analyser -- Stable*
     There hasn't been a single reported bug in this system for a long
     time.

*The C client code -- Stable*
     No known problems.  In early Version 3.20 releases, there were
     some limitations in the send/receive buffer size.  As of Version
     3.21, the buffer size is now dynamic up to a default of 16M.

*Standard client programs -- Stable*
     These include `mysql', `mysqladmin', `mysqlshow', `mysqldump', and
     `mysqlimport'.

*Basic SQL -- Stable*
     The basic SQL function system and string classes and dynamic memory
     handling.  Not a single reported bug in this system.

*Query optimizer -- Stable*

*Range optimizer -- Stable*

*Join optimizer -- Stable*

*Locking -- Gamma*
     This is very system-dependent.  On some systems there are big
     problems using standard OS locking (`fcntl()').  In these cases,
     you should run the MySQL daemon with the `--skip-locking' flag.
     Problems are known to occur on some Linux systems, and on SunOS
     when using NFS-mounted file systems.

*Linux threads -- Stable*
     The major problem found has been with the `fcntl()' call, which is
     fixed by using the `--skip-locking' option to `mysqld'.  Some
     people have reported lockup problems with Version 0.5.
     LinuxThreads will need to be recompiled if you plan to use 1000+
     concurrent connections.  Although it is possible to run that many
     connections with the default LinuxThreads (however, you will never
     go above 1021), the default stack spacing of 2 MB makes the
     application unstable, and we have been able to reproduce a
     coredump after creating 1021 idle connections.  *Note Linux::.

*Solaris 2.5+ pthreads -- Stable*
     We use this for all our production work.

*MIT-pthreads (Other systems) -- Stable*
     There have been no reported bugs since Version 3.20.15 and no
     known bugs since Version 3.20.16.  On some systems, there is a
     "misfeature" where some operations are quite slow (a 1/20 second
     sleep is done between each query).  Of course, MIT-pthreads may
     slow down everything a bit, but index-based `SELECT' statements
     are usually done in one time frame so there shouldn't be a mutex
     locking/thread juggling.

*Other thread implementions -- Beta - Gamma*
     The ports to other systems are still very new and may have bugs,
     possibly in MySQL, but most often in the thread implementation
     itself.

*`LOAD DATA ...', `INSERT ... SELECT' -- Stable*
     Some people thought they had found bugs here, but these usually
     have turned out to be misunderstandings.  Please check the manual
     before reporting problems!

*`ALTER TABLE' -- Stable*
     Small changes in Version 3.22.12.

*DBD -- Stable*
     Now maintained by Jochen Wiedmann (<wiedmann@neckar-alb.de>).
     Thanks!

*`mysqlaccess' -- Stable*
     Written and maintained by Yves Carlier (<Yves.Carlier@rug.ac.be>).
     Thanks!

*`GRANT' -- Stable*
     Big changes made in MySQL Version 3.22.12.

**MyODBC* (uses ODBC SDK 2.5) -- Gamma*
     It seems to work well with some programs.

*Replication - Beta / Gamma*
     We are still working on replication, so don't expect this to be
     rock solid yet.  On the other hand, some MySQL users are already
     using this with good results.

*BDB Tables - Beta*
     The Berkeley DB code is very stable, but we are still improving
     the interface between MySQL and BDB tables, so it will take some
     time before this is tested as well as the other table types.

*InnoDB Tables - Beta*
     This is a recent addition to `MySQL'. They appear to work well and
     can be used after some initial testing.

*Automatic recovery of MyISAM tables - Beta*
     This only affects the new code that checks if the table was closed
     properly on open and executes an automatic check/repair of the
     table if it wasn't.

*MERGE tables - Beta / Gamma*
     The usage of keys on `MERGE' tables is still not well tested.  The
     other parts of the `MERGE' code are quite well tested.

*FULLTEXT - Beta*
     Text search seems to work, but is still not widely used.

MySQL AB provides high-quality support for paying customers, but the
MySQL mailing list usually provides answers to common questions.  Bugs
are usually fixed right away with a patch; for serious bugs, there is
almost always a new release.

How Big Can MySQL Tables Be?
----------------------------

MySQL Version 3.22 has a 4G limit on table size. With the new `MyISAM'
in MySQL Version 3.23 the maximum table size is pushed up to 8 million
terabytes (2 ^ 63 bytes).

Note, however, that operating systems have their own file size limits.
Here are some examples:

*Operating System*                   *File Size Limit*
Linux-Intel 32 bit                   2G, 4G or more, depends on Linux
                                     version
Linux-Alpha                          8T (?)
Solaris 2.5.1                        2G (possible 4G with patch)
Solaris 2.6                          4G
Solaris 2.7 Intel                    4G
Solaris 2.7 ULTRA-SPARC              8T (?)

On Linux 2.2 you can get bigger tables than 2G by using the LFS patch
for the ext2 file system.  On Linux 2.4 there exists also patches for
ReiserFS to get support for big files.

This means that the table size for MySQL is normally limited by the
operating system.

By default, MySQL tables have a maximum size of about 4G.  You can
check the maximum table size for a table with the `SHOW TABLE STATUS'
command or with the `myisamchk -dv table_name'.  *Note SHOW::.

If you need bigger tables than 4G (and your operating system supports
this), you should set the `AVG_ROW_LENGTH' and `MAX_ROWS' parameter
when you create your table.  *Note CREATE TABLE::.  You can also set
these later with `ALTER TABLE'. *Note ALTER TABLE::.

If your big table is going to be read-only, you could use `myisampack'
to merge and compress many tables to one.  `myisampack' usually
compresses a table by at least 50%, so you can have, in effect, much
bigger tables.  *Note `myisampack': myisampack.

You can go around the operating system file limit for `MyISAM' data
files by using the `RAID' option. *Note CREATE TABLE::.

Another solution can be the included MERGE library, which allows you to
handle a collection of identical tables as one. *Note MERGE tables:
MERGE.

Year 2000 Compliance
--------------------

MySQL itself has no problems with Year 2000 (Y2K) compliance:

   * MySQL uses Unix time functions and has no problems with dates
     until `2069'; all 2-digit years are regarded to be in the range
     `1970' to `2069', which means that if you store `01' in a `year'
     column, MySQL treats it as `2001'.

   * All MySQL date functions are stored in one file `sql/time.cc' and
     coded very carefully to be year 2000-safe.

   * In MySQL Version 3.22 and later, the new `YEAR' column type can
     store years `0' and `1901' to `2155' in 1 byte and display them
     using 2 or 4 digits.

You may run into problems with applications that use MySQL in a way
that is not Y2K-safe.  For example, many old applications store or
manipulate years using 2-digit values (which are ambiguous) rather than
4-digit values.  This problem may be compounded by applications that use
values such as `00' or `99' as "missing" value indicators.

Unfortunately, these problems may be difficult to fix, because different
applications may be written by different programmers, each of whom may
use a different set of conventions and date-handling functions.

Here is a simple demonstration illustrating that MySQL doesn't have any
problems with dates until the year 2030:

     mysql> DROP TABLE IF EXISTS y2k;
     Query OK, 0 rows affected (0.01 sec)
     
     mysql> CREATE TABLE y2k (date date, date_time datetime, time_stamp timestamp);
     Query OK, 0 rows affected (0.00 sec)
     
     mysql> INSERT INTO y2k VALUES
         -> ("1998-12-31","1998-12-31 23:59:59",19981231235959),
         -> ("1999-01-01","1999-01-01 00:00:00",19990101000000),
         -> ("1999-09-09","1999-09-09 23:59:59",19990909235959),
         -> ("2000-01-01","2000-01-01 00:00:00",20000101000000),
         -> ("2000-02-28","2000-02-28 00:00:00",20000228000000),
         -> ("2000-02-29","2000-02-29 00:00:00",20000229000000),
         -> ("2000-03-01","2000-03-01 00:00:00",20000301000000),
         -> ("2000-12-31","2000-12-31 23:59:59",20001231235959),
         -> ("2001-01-01","2001-01-01 00:00:00",20010101000000),
         -> ("2004-12-31","2004-12-31 23:59:59",20041231235959),
         -> ("2005-01-01","2005-01-01 00:00:00",20050101000000),
         -> ("2030-01-01","2030-01-01 00:00:00",20300101000000),
         -> ("2050-01-01","2050-01-01 00:00:00",20500101000000);
     Query OK, 13 rows affected (0.01 sec)
     Records: 13  Duplicates: 0  Warnings: 0
     
     mysql> SELECT * FROM y2k;
     +------------+---------------------+----------------+
     | date       | date_time           | time_stamp     |
     +------------+---------------------+----------------+
     | 1998-12-31 | 1998-12-31 23:59:59 | 19981231235959 |
     | 1999-01-01 | 1999-01-01 00:00:00 | 19990101000000 |
     | 1999-09-09 | 1999-09-09 23:59:59 | 19990909235959 |
     | 2000-01-01 | 2000-01-01 00:00:00 | 20000101000000 |
     | 2000-02-28 | 2000-02-28 00:00:00 | 20000228000000 |
     | 2000-02-29 | 2000-02-29 00:00:00 | 20000229000000 |
     | 2000-03-01 | 2000-03-01 00:00:00 | 20000301000000 |
     | 2000-12-31 | 2000-12-31 23:59:59 | 20001231235959 |
     | 2001-01-01 | 2001-01-01 00:00:00 | 20010101000000 |
     | 2004-12-31 | 2004-12-31 23:59:59 | 20041231235959 |
     | 2005-01-01 | 2005-01-01 00:00:00 | 20050101000000 |
     | 2030-01-01 | 2030-01-01 00:00:00 | 20300101000000 |
     | 2050-01-01 | 2050-01-01 00:00:00 | 00000000000000 |
     +------------+---------------------+----------------+
     13 rows in set (0.00 sec)

This shows that the `DATE' and `DATETIME' types will not give any
problems with future dates (they handle dates until the year 9999).

The `TIMESTAMP' type, which is used to store the current time, has a
range up to only `2030-01-01'.  `TIMESTAMP' has a range of `1970' to
`2030' on 32-bit machines (signed value).  On 64-bit machines it
handles times up to `2106' (unsigned value).

Even though MySQL is Y2K-compliant, it is your responsibility to
provide unambiguous input.  See *Note Y2K issues:: for MySQL's rules
for dealing with ambiguous date input data (data containing 2-digit year
values).

MySQL Information Sources
=========================

Books About MySQL
-----------------

For the latest book information, with user comments, please visit
`http://www.mysql.com/portal/books/html/index.html'.

While this manual is still the right place for up to date technical
information, its primary goal is to contain everything there is to know
about MySQL.  It is sometimes nice to have a bound book to read in bed
or while you travel.  Here is a list of books about MySQL and related
subjects (in English).

By purchasing a book through these hyperlinks provided herein, you are
contributing to the development of MySQL.

_MySQL_
Available              Barnes and Noble
                       (http://service.bfast.com/bfast/click?bfmid=2181&sourceid=34233559&bfpid=0735709211&bfmtype=book)
Publisher              New Riders
Author                 Paul DuBois
Pub Date               1st Edition December 1999
ISBN                   0735709211
Pages                  800
Price                  $49.99 US
Downloadable examples   `samp_db' distribution
                       (http://www.kitebird.com/mysql-book/)
Errata                  are available here
                       (http://www.kitebird.com/mysql-book/errata.html)

Foreword by Michael "Monty" Widenius, MySQL Moderator.
In _MySQL_, Paul DuBois provides you with a comprehensive guide to one
of the most popular relational database systems.  Paul has contributed
to the online documentation for MySQL and is an active member of the
MySQL community.  The principal MySQL developer, Monty Widenius, and a
network of his fellow developers reviewed the manuscript, and provided
Paul with the kind of insight no one else could supply.
Instead of merely giving you a general overview of MySQL, Paul teaches
you how to make the most of its capabilities.  Through two sample
database applications that run throughout the book, he gives you
solutions to problems you're sure to face.  He helps you integrate
MySQL efficiently with third-party tools, such as PHP and Perl,
enabling you to generate dynamic Web pages through database queries.
He teaches you to write programs that access MySQL databases, and also
provides a comprehensive set of references to column types, operators,
functions, SQL syntax, MySQL programming, C API, Perl `DBI', and PHP
API.  _MySQL_ simply gives you the kind of information you won't find
anywhere else.
If you use MySQL, this book provides you with:
   * An introduction to MySQL and SQL.

   * Coverage of MySQL's data types and how to use them.

   * Thorough treatment of how to write client programs in C.

   * A guide to using the Perl `DBI' and PHP APIs for developing
     command-line and Web-based applications.

   * Tips on administrative issues such as user accounts, backup, crash
     recovery, and security.

   * Help in choosing an ISP for MySQL access.

   * A comprehensive reference for MySQL's data types, operators,
     functions, and SQL statements and utilities.

   * Complete reference guides for MySQL's C API, the Perl `DBI' API,
     and PHP's MySQL-related functions.

_MySQL & mSQL_
Available              Barnes and Noble
                       (http://service.bfast.com/bfast/click?bfmid=2181&sourceid=34233559&bfpid=1565924347&bfmtype=book)
Publisher              O'Reilly
Authors                Randy Jay Yarger, George Reese & Tim King
Pub Date               1st Edition July 1999
ISBN                   1-56592-434-7, Order Number: 4347
Pages                  506
Price                  $34.95

This book teaches you how to use MySQL and `mSQL', two popular and
robust database products that support key subsets of SQL on both Linux
and Unix systems.  Anyone who knows basic C, Java, Perl, or Python can
write a program to interact with a database, either as a stand-alone
application or through a Web page.  This book takes you through the
whole process, from installation and configuration to programming
interfaces and basic administration.  Includes plenty of tutorial
material.
_Sams' Teach Yourself MySQL in 21 Days_
Available              Barnes and Noble
                       (http://service.bfast.com/bfast/click?bfmid=2181&sourceid=34233559&bfpid=0672319144&bfmtype=book)
Publisher              Sams
Authors                Mark Maslakowski and Tony Butcher
Pub Date               June 2000
ISBN                   0672319144
Pages                  650
Price                  $39.99

Sams' _Teach Yourself MySQL in 21 Days_ is for intermediate Linux users
who want to move into databases.  A large share of the audience is Web
developers who need a database to store large amounts of information
that can be retrieved via the Web.

Sams' _Teach Yourself MySQL in 21 Days_ is a practical, step-by-step
tutorial.  The reader will learn to design and employ this open source
database technology into his or her Web site using practical, hands-on
examples to follow.
_E-Commerce Solutions with MySQL_
Available              Barnes and Noble
                       (http://service.bfast.com/bfast/click?bfmid=2181&sourceid=34233559&bfpid=0761524452&bfmtype=book)
Publisher              Prima Communications, Inc.
Authors                N/A
Pub Date               January 2000
ISBN                   0761524452
Pages                  500
Price                  $39.99

No description available.
_MySQL and PHP from Scratch_
Available              Barnes and Noble
                       (http://service.bfast.com/bfast/click?bfmid=2181&sourceid=34233559&bfpid=0789724405&bfmtype=book)
Publisher              Que
Authors                N/A
Pub Date               September 2000
ISBN                   0789724405
Pages                  550
Price                  $34.99

This book puts together information on installing, setting up, and
troubleshooting Apache, MySQL, PHP3, and IMP into one complete volume.
You also learn how each piece is part of a whole by learning,
step-by-step, how to create a web-based e-mail system.  Learn to run
the equivalent of Active Server Pages (ASP) using PHP3, set up an
e-commerce site using a database and the Apache web server, and create
a data entry system (such as sales, product quality tracking, customer
preferences, etc) that no installation in the PC.
_Professional MySQL Programming_
Available              Barnes and Noble
                       (http://shop.barnesandnoble.com/bookSearch/isbnInquiry.asp?isbn=1861005164)
Publisher              Wrox Press, Inc.
Authors                N/A
Pub Date               Late 2001
ISBN                   1861005164
Pages                  1000
Price                  $49.99

No description available.
_Professional Linux Programming_
Available              Barnes and Noble
                       (http://service.bfast.com/bfast/click?bfmid=2181&sourceid=34233559&bfpid=1861003013&bfmtype=book)
Publisher              Wrox Press, Inc.
Authors                N/A
Pub Date               September 2000
ISBN                   1861003013
Pages                  1155
Price                  $47.99

In this follow-up to the best-selling _Beginning Linux Programming_,
you will learn from the authors' real-world knowledge and experience of
developing software for Linux; you'll be taken through the development
of a sample 'DVD Store' application, with 'theme' chapters addressing
different aspects of its implementation.  Meanwhile, individual
"take-a-break" chapters cover important topics that go beyond the
bounds of the central theme.  All focus on the practical aspects of
programming, showing how crucial it is to choose the right tools for
the job, use them as they should be used, and get things right first
time.
_PHP and MySQL Web Development_
Available              Barnes and Noble
                       (http://service.bfast.com/bfast/click?bfmid=2181&sourceid=34233559&bfpid=0672317842&bfmtype=book)
Publisher              Sams
Authors                Luke Welling, Laura Thomson
Pub Date               March 2001
ISBN                   0672317842
Pages                  700
Price                  $49.99

_PHP and MySQL Web Development_ introduces you to the advantages of
implementing both MySQL and PHP.  These advantages are detailed through
the provision of both statistics and several case studies.  A practical
web application is developed throughout the book, providing you with
the tools necessary to implement a functional online database.  Each
function is developed separately, allowing you the choice to
incorporate only those parts that you would like to implement.
Programming concepts of the PHP language are highlighted, including
functions which tie MySQL support into a PHP script and advanced topics
regarding table manipulation.
*Books recommended by the MySQL Developers*

_SQL-99 Complete, Really_
Available              Barnes and Noble
                       (http://service.bfast.com/bfast/click?bfmid=2181&sourceid=34233559&bfpid=0879305681&bfmtype=book)
Publisher              CMP Books
Authors                Peter Gulutzan, Trudy Pelzer
Pub Date               April 1999
ISBN                   0879305681
Pages                  1104
Price                  $55.96

This book contains complete descriptions of the new standards for
syntax, data structures, and retrieval processes of SQL databases.  As
an example-based reference manual, it includes all of the CLI
functions, information, schema tables, and status codes, as well as a
working SQL database provided on the companion disk.
_C, A reference manual_
Available              Barnes and Noble
                       (http://service.bfast.com/bfast/click?bfmid=2181&sourceid=34233559&bfpid=0133262243&bfmtype=book)
Publisher              Prentice Hall
Authors                Samuel P. Harbison, Guy L. Steele
Pub Date               September 1994
ISBN                   0133262243
Pages                  480
Price                  $35.99

A new and improved revision of the bestselling C language reference.
This manual introduces the notion of "Clean C", writing C code that can
be compiled as a C++ program, C programming style that emphasizes
correctness, portability, maintainability, and incorporates the ISO C
Amendment 1 (1994) which specifies new facilities for writing portable,
international programs in C.
_C++ for Real Programmers_
Available              Barnes and Noble
                       (http://service.bfast.com/bfast/click?bfmid=2181&sourceid=34233559&bfpid=0120499428&bfmtype=book)
Publisher              Academic Press, Incorporated
Authors                Jeff Alger, Jim Keogh
Pub Date               February 1998
ISBN                   0120499428
Pages                  388
Price                  $39.95

_C++ For Real Programmers_ bridges the gap between C++ as described in
beginner and intermediate-level books and C++ as it is practiced by
experts.  Numerous valuable techniques are described, organized into
three simple themes: indirection, class hierarchies, and memory
management.  It also provides in-depth coverage of template creation,
exception handling, pointers and optimization techniques.  The focus of
the book is on ANSI C++ and, as such, is compiler independent.

_C++ For Real Programmers_ is a revision of _Secrets of the C++
Masters_ and includes a new appendix comparing C++ with Java.  The book
comes with a 3.5" disk for Windows with source code.
_Algorithms in C_
Available              Barnes and Noble
                       (http://service.bfast.com/bfast/click?bfmid=2181&sourceid=34233559&bfpid=0201514257&bfmtype=book)
Publisher              Addison Wesley Longman, Inc.
Authors                Robert Sedgewick
Pub Date               April 1990
ISBN                   0201514257
Pages                  648
Price                  $45.75

_Algorithms in C_ describes a variety of algorithms in a number of
areas of interest, including: sorting, searching, string-processing, and
geometric, graph and mathematical algorithms.  The book emphasizes
fundamental techniques, providing readers with the tools to confidently
implement, run, and debug useful algorithms.
_Multithreaded Programming with Pthreads_
Available              Barnes and Noble
                       (http://service.bfast.com/bfast/click?bfmid=2181&sourceid=34233559&bfpid=0136807291&bfmtype=book)
Publisher              Prentice Hall
Authors                Bil Lewis, Daniel J. Berg
Pub Date               October 1997
ISBN                   0136807291
Pages                  432
Price                  $34.95

Based on the best-selling _Threads Primer_, _Multithreaded Programming
with Pthreads_ gives you a solid understanding of Posix threads: what
they are, how they work, when to use them, and how to optimize them. It
retains the clarity and humor of _Threads Primer_, but includes
expanded comparisons to Win32 and OS/2 implementations.  Code examples
tested on all of the major UNIX platforms are featured along with
detailed explanations of how and why they use threads.
_Programming the PERL DBI: Database Programming with PERL_
Available              Barnes and Noble
                       (http://service.bfast.com/bfast/click?bfmid=2181&sourceid=34233559&bfpid=1565926994&bfmtype=book)
Publisher              O'Reilly & Associates, Incorporated
Authors                Alligator Descartes, Tim Bunce
Pub Date               February 2000
ISBN                   1565926994
Pages                  400
Price                  $27.96

_Programming the Perl DBI_ is coauthored by Alligator Descartes, one of
the most active members of the DBI community, and by Tim Bunce, the
inventor of DBI.  For the uninitiated, the book explains the
architecture of DBI and shows you how to write DBI-based programs.  For
the experienced DBI dabbler, this book explains DBI's nuances and the
peculiarities of each individual DBD.

The book includes:
   * An introduction to DBI and its design.

   * How to construct queries and bind parameters.

   * Working with database, driver, and statement handles.

   * Debugging techniques.

   * Coverage of each existing DBD.

   * A complete reference to DBI.

General SQL Information and Tutorials
-------------------------------------

The MySQL book portal is split into different sections to make it easy
to locate books for various purposes.
`http://www.mysql.com/portal/books/html/index.html'

Tutorials can be found at:
`http://www.mysql.com/portal/development/html/development-61-1.html'

Useful MySQL-related Links
--------------------------

The MySQL development portal is the ultimate source of MySQL related
links. `http://www.mysql.com/portal/development/html/index.html'

Apart from the following links, you can find and download a lot of
MySQL programs, tools and APIs from the Contrib directory
(http://www.mysql.com/Downloads/Contrib/).

MySQL

Tutorials and Manuals
---------------------

MySQL Myths Debunked (http://michael.bacarella.com/research/mysqlmyths.html)
     MySQL used in the real world.

`http://www.4t2.com/mysql'
     Information about the German MySQL mailing list.

`http://www2.rent-a-database.de/mysql/'
     MySQL handbook in German.

`http://www.bitmover.com:8888//home/bk/mysql'
     Web access to the MySQL BitKeeper repository.

`http://www.analysisandsolutions.com/code/mybasic.htm'
     Beginners MySQL Tutorial on how to install and set up MySQL on a
     Windows machine.

`http://www.devshed.com/Server_Side/MySQL/'
     A lot of MySQL tutorials.

`http://mysql.hitstar.com/'
     MySQL manual in Chinese.

`http://www.linuxplanet.com/linuxplanet/tutorials/1046/1/'
     Setting Up a MySQL-based Web site.

`http://www.hotwired.com/webmonkey/backend/tutorials/tutorial1.html'
     MySQL-Perl tutorial.

`http://www.iserver.com/support/contrib/perl5/modules.html'
     Installing new Perl modules that require locally installed modules.

`http://www.hotwired.com/webmonkey/databases/tutorials/tutorial4.html'
     PHP/MySQL Tutorial.

`http://www.useractive.com/'
     Hands on tutorial for MySQL.

Porting MySQL/Using MySQL on Different Systems
----------------------------------------------

`http://www.entropy.ch/software/macosx/mysql/'
     Binary of MySQL for Mac OS X Client.  Includes information of how
     to build and use MySQL on Mac OS X.

`http://xclave.macnn.com/MySQL/'
     The Mac OS Xclave.  Running MySQL on Mac OS X.

`http://www.prnet.de/RegEx/mysql.html'
     MySQL for Mac OS X Server.

`http://www.latencyzero.com/macosx/mysql.html'
     Building MySQL for Mac OS X.

`http://www.essencesw.com/Software/mysqllib.html'
     New Client libraries for the Mac OS Classic (Macintosh).

`http://www.lilback.com/macsql/'
     Client libraries for Mac OS Classic (Macintosh).

`http://sixk.maniasys.com/index_en.html'
     MySQL for Amiga

Perl-related Links
------------------

`http://dbimysql.photoflux.com/'
     Perl DBI with MySQL FAQ.

MySQL Discussion Forums
-----------------------

`http://www.weberdev.com/'
     Examples using MySQL; (check Top 20)

`http://futurerealm.com/forum/futureforum.htm'
     FutureForum Web Discussion Software.

Commercial Applications that Support MySQL
------------------------------------------

`http://www.supportwizard.com/'
     SupportWizard; Interactive helpdesk on the Web. This product
     includes a licensed copy of MySQL.

`http://www.sonork.com/'
     Sonork,  Instant Messenger that is not only Internet oriented.
     It's focused on private networks and on small to medium companies.
     Client is free, server is free for up to 5 seats.

`http://www.stweb.org/'
     StWeb - Stratos Web and Application server - An easy-to-use, cross
     platform, Internet/Intranet development and deployment system for
     development of web-enabled applications.  The standard version of
     StWeb has a native interface to MySQL database.

`http://www.rightnowtech.com/'
     Right Now Web; Web automation for customer service.

`http://www.icaap.org/Bazaar/'
     Bazaar; Interactive Discussion Forums with Web interface.

`http://www.phonesweep.com/'
     PhoneSweepT is the world's first commercial Telephone Scanner.
     Many break-ins in recent years have come not through the Internet,
     but through unauthorized dial-up modems.  PhoneSweep lets you find
     these modems by repeatedly placing phone calls to every phone
     number that your organization controls.  PhoneSweep has a built-in
     expert system that can recognize more than 250 different kinds of
     remote-access programs, including Carbon Copy(TM), pcANYWHERE(TM),
     and Windows NT RAS.  All information is stored in the SQL
     database.  It then generates a comprehensive report detailing
     which services were discovered on which dial-up numbers in your
     organization.

SQL Clients and Report Writers
------------------------------

urSQL (http://www.urbanresearch.com/software/utils/urbsql/index.html)
     SQL Editor and Query Utility. Custom syntax highlighting, editable
     results grid, exportable result-sets, basic MySQL admin functions,
     Etc.. For Windows.

MySQL Data Manager (http://www.edatanew.com/)
     MySQL Data Manager * is platform independent web client (written
     in perl) for MySQL server over TCP/IP.

`http://ksql.sourceforge.net/'
     KDE MySQL client.

`http://www.ecker-software.de'
     A Windows GUI client by David Ecker.

`http://www.icaap.org/software/kiosk/'
     Kiosk; a MySQL client for database management.  Written in Perl.
     Will be a part of Bazaar.

`http://www.casestudio.com/'
     Db design tool that supports MySQL 3.23.

`http://home.skif.net/~voland/zeos/eng/index.html'
     Zeos - A client that supports MySQL, Interbase and PostgreSQL.

`http://www.geocities.com/SiliconValley/Ridge/4280/GenericReportWriter/grwhome.html'
     A free report writer in Java

`http://www.javaframework.de'
     MySQLExport - Export of MySQL create statements and data in a lot
     of different formats (SQL, HTML, CVS, text, ZIP, GZIP...).

`http://dlabs.4t2.com'
     M2D, a MySQL Administration client for Windows.  M2D supports
     administration of MySQL databases, creation of new databases and
     tables, editing, and more.

`http://dlabs.4t2.com'
     Dexter, a small server written in Perl which can be used as a
     proxy server for MySQL or as a database extender.

`http://www.scibit.com/Products/Software/Utils/Mascon.asp'
     Mascon is a powerful Win32 GUI for administering MySQL databases.

`http://www.rtlabs.com/'
     MacSQL Monitor.  GUI for MySQL, ODBC, and JDBC databases for the
     Mac OS.

Distributions that Include MySQL
--------------------------------

`http://www.suse.com/'
     SuSE Linux (6.1 and above)

`http://www.redhat.com/'
     RedHat Linux (7.0 and above)

`http://distro.conectiva.com.br'
     Conectiva Linux (4.0 and above)

Web Development Tools that Support MySQL
----------------------------------------

`http://www.php.net/'
     PHP: A server-side HTML-embedded scripting language.

`http://www.midgard-project.org'
     The Midgard Application Server; a powerful Web development
     environment based on MySQL and PHP.

`http://www.dbServ.de/'
     dbServ is an extension to a web server to integrate database
     output into your HTML code.  You may use any HTML function in your
     output.  Only the client will stop you.  It works as standalone
     server or as Java servlet.

`http://www.chilisoft.com/'
     Platform independent ASP from Chili!Soft

`http://www.voicenet.com/~zellert/tjFM'
     A JDBC driver for MySQL.

`http://www.wernhart.priv.at/php/'
     MySQL + PHP demos.

`http://www.dbwww.com/'
     ForwardSQL: HTML interface to manipulate MySQL databases.

`http://www.daa.com.au/~james/www-sql/'
     WWW-SQL: Display database information.

`http://www.heitml.com/'
     HeiTML: A server-side extension of HTML and a 4GL language at the
     same time.

`http://hawkeye.net/'
     Hawkeye Internet Server Suite.

`http://www.webgroove.com/'
     WebGroove Script: HTML compiler and server-side scripting language.

`http://www.ihtml.com/'
     A server-side Web site scripting language.

`ftp://ftp.igc.apc.org/pub/myodbc/README'
     How to use MySQL with ColdFusion on Solaris.

`http://calistra.com/MySQL/'
     Calistra's ODBC MySQL Administrator.

`http://phpclub.net/'
     PHPclub - Tips and tricks for PHP.

`http://www.widgetchuck.com'
     The Widgetchuck; Web Site Tools and Gadgets

`http://www.adcycle.com/'
     AdCycle - advertising management software.

`http://sourceforge.net/projects/pwpage/'
     pwPage - provides an extremely fast and simple approach to the
     creation of database forms.  That is, if a database table exists
     and an HTML page has been constructed using a few simple
     guidelines, pwPage can be immediately used for table data
     selections, insertions, updates, deletions and selectable table
     content reviewing.

`http://www.omnis-software.com/products/studio/studio.html'
     OMNIS Studio is a rapid application development (RAD) tool.

Database Design Tools with MySQL Support
----------------------------------------

`http://www.mysql.com/documentation/dezign/'
     "DeZign for databases" is a database development tool that uses an
     entity relationship diagram (ERD).

Web Servers with MySQL Tools
----------------------------

`ftp://ftp.kcilink.com/pub/'
     mod_auth_mysql, An Apache authentication module.

`http://www.roxen.com/'
     The Roxen Challenger Web server.

Extensions for Other Programs
-----------------------------

`http://www.seawood.org/msql_bind/'
     MySQL support for BIND (The Internet Domain Name Server).

`http://www.inet-interactive.com/sendmail/'
     MySQL support for Sendmail and Procmail.

Using MySQL with Other Programs
-------------------------------

`http://www.iserver.com/support/addonhelp/database/mysql/msaccess.html'
     Using MySQL with Access.

`http://www.iserver.com/support/contrib/perl5/modules.html'
     Installing new Perl modules that require locally installed modules.

ODBC-related Links
------------------

`http://www.iodbc.org/'
     Popular iODBC Driver Manager (libiodbc) now available as Open
     Source.

`http://users.ids.net/~bjepson/freeODBC/'
     The FreeODBC Pages.

`http://genix.net/unixODBC/'
     The unixODBC Project goals are to develop and promote unixODBC to
     be the definitive standard for ODBC on the Linux platform.  This
     is to include GUI support for KDE.

`http://www.sw-soft.com/products/BtrieveODBC/'
     A MySQL-based ODBC driver for Btrieve.

*API*-related Links
-------------------

`http://www.jppp.com/'
     Partially implemented TDataset-compatible components for MySQL.

`http://www.riverstyx.net/qpopmysql/'
     qpopmysql - A patch to allow POP3 authentication from a MySQL
     database.  There's also a link to Paul Khavkine's patch for
     Procmail to allow any MTA to deliver to users in a MySQL database.

`http://www.essencesw.com/Software/mysqllib.html'
     New Client libraries for the Mac OS Classic (Macintosh).

`http://www.lilback.com/macsql/'
     Client libraries for the Macintosh.

`http://www.essencesw.com/Plugins/mysqlplug.html'
     Plugin for REALbasic (for Macintosh)

`http://www.iis.ee.ethz.ch/~neeri/macintosh/gusi-qa.html'
     A library that emulates BSD sockets and pthreads on Macintosh.
     This can be used if you want to compile the MySQL client library
     on Mac.  It could probably even be sued to port MySQL to
     Macintosh, but we don't know of anyone that has tried that.

`http://www.dedecker.net/jessie/scmdb/'
     SCMDB - an add-on for SCM that ports the MySQL C library to scheme
     (SCM).  With this library scheme developers can make connections
     to a MySQL database and use embedded SQL in their programs.

Other MySQL-related Links
-------------------------

SAT (http://www.satisoft.com/)
     The Small Application Toolkit (SAT) is a collection of utilities
     intended to simplify the development of small, multi-user, GUI
     based applications in a (Microsoft -or- X) Windows Client / Unix
     Server environment.

`http://www.wix.com/mysql-hosting/'
     Registry of Web providers who support MySQL.

`http://www.softagency.co.jp/mysql/index.en.html'
     Links about using MySQL in Japan/Asia.

`http://abattoir.cc.ndsu.nodak.edu/~nem/mysql/udf/'
     MySQL UDF Registry.

`http://www.open.com.au/products.html'
     Commercial Web defect tracking system.

`http://www.stonekeep.com/pts/'
     PTS: Project Tracking System.

`http://tomato.nvgc.vt.edu/~hroberts/mot'
     Job and software tracking system.

`http://www.cynergi.net/exportsql/'
     ExportSQL: A script to export data from Access95+.

`http://SAL.KachinaTech.COM/H/1/MYSQL.html'
     SAL (Scientific Applications on Linux) MySQL entry.

`http://www.infotech-nj.com/itech/index.shtml'
     A consulting company which mentions MySQL in the right company.

`http://www.pmpcs.com/'
     PMP Computer Solutions.  Database developers using MySQL and
     `mSQL'.

`http://www.dedserius.com/y2kmatrix/'
     Y2K tester.

SQL and Database Interfaces
---------------------------

`http://java.sun.com/products/jdbc/'
     The JDBC database access API.

`http://www.gagme.com/mysql'
     Patch for `mSQL' Tcl.

`http://www.amsoft.ru/easysql/'
     EasySQL: An ODBC-like driver manager.

`http://www.lightlink.com/hessling/rexxsql.html'
     A REXX interface to SQL databases.

`http://www.binevolve.com/~tdarugar/tcl-sql/'
     Tcl interface for MySQL.

`http://www.contrib.andrew.cmu.edu/~shadow/sql.html'
     SQL Reference Page with a lot of interesting links.

Examples of MySQL Use
---------------------

`http://www.little6.com/about/linux/'
     Little6 Inc., An online contract and job finding site that is
     powered by MySQL, PHP3, and Linux.

`http://www.worldrecords.com'
     World Records - A search engine for information about music that
     uses MySQL and PHP.

`http://www.webtechniques.com/archives/1998/01/note/'
     A Contact Database using MySQL and PHP.

`http://modems.rosenet.net/mysql/'
     Web based interface and Community Calendar with PHP.

`http://www.odbsoft.com/cook/sources.htm'
     Perl package to generate html from a SQL table structure and for
     generating SQL statements from an html form.

`http://www.gusnet.cx/proj/telsql/'
     Basic telephone database using `DBI'/`DBD'.

`http://tecfa.unige.ch/guides/java/staf2x/ex/jdbc/coffee-break'
     JDBC examples by Daniel K. Schneider.

`http://www.ooc.com/'
     Object Oriented Concepts Inc; CORBA applications with examples in
     source.

`http://www.stopbit.com/'
     Stopbit - A technology news site using MySQL and PHP.

`http://www.penguinservices.com/scripts'
     Online shopping cart system.

`http://www.city-gallery.com/album/'
     Old Photo Album - The album is a collaborative popular history of
     photography project that generates all pages from data stored in a
     MySQL database.  Pages are dynamically generated through a php3
     interface to the database content.  Users contribute images and
     descriptions.  Contributed images are stored on the web server to
     avoid storing them in the database as BLOBs.  All other
     information is stored on the shared MySQL server.

General Database Links
----------------------

`http://black.hole-in-the.net/guy/webdb/'
     Homepage of the webdb-l (Web Databases) mailing list.

`http://www.symbolstone.org/technology/perl/DBI/index.html'
     Perl `DBI'/`DBD' modules homepage.

`http://www.student.uni-koeln.de/cygwin/'
     Cygwin tools.  Unix on top of Windows.

`http://www.tek-tips.com/'
     Tek-Tips Forums are 800+ independent peer-to-peer non-commercial
     support forums for Computer Professionals.  Features include
     automatic e-mail notification of responses, a links library, and
     member confidentiality guaranteed.

`http://www.public.asu.edu/~peterjn/btree/'
     B-Trees: Balanced Tree Data Structures.

`http://www.fit.qut.edu.au/~maire/baobab/lecture/sld001.htm'
     A lecture about B-Trees.

There are also many Web pages that use MySQL.  *Note Users::.  Send any
additions to this list to <webmaster@mysql.com>. We now require that
you show a MySQL logo somewhere if you wish your site to be added.  It
is okay to have it on a "used tools" page or something similar.

MySQL Mailing Lists
-------------------

This section introduces you to the MySQL mailing lists, and gives some
guidelines as to how to use them.

The MySQL Mailing Lists
.......................

To subscribe to the main MySQL mailing list, send a message to the
electronic mail address <mysql-subscribe@lists.mysql.com>.

To unsubscribe from the main MySQL mailing list, send a message to the
electronic mail address <mysql-unsubscribe@lists.mysql.com>.

Only the address to which you send your messages is significant.  The
subject line and the body of the message are ignored.

If your reply address is not valid, you can specify your address
explicitly.  Adding a hyphen to the subscribe or unsubscribe command
word, followed by your address with the `@' character in your address
replaced by a `='.  For example, to subscribe `your_name@host.domain',
send a message to
`mysql-subscribe-your_name=host.domain@lists.mysql.com'.

Mail to <mysql-subscribe@lists.mysql.com> or
<mysql-unsubscribe@lists.mysql.com> is handled automatically by the
ezmlm mailing list processor.  Information about ezmlm is available at
The ezmlm Website (http://www.ezmlm.org).

To post a message to the list itself, send your message to
`mysql@lists.mysql.com'.  However, please _do not_ send mail about
subscribing or unsubscribing to <mysql@lists.mysql.com>, because any
mail sent to that address is distributed automatically to thousands of
other users.

Your local site may have many subscribers to <mysql@lists.mysql.com>.
If so, it may have a local mailing list, so that messages sent from
`lists.mysql.com' to your site are propagated to the local list.  In
such cases, please contact your system administrator to be added to or
dropped from the local MySQL list.

If you wish to have traffic for a mailing list go to a separate mailbox
in your mail program, set up a filter based on the message headers.
You can use either the `List-ID:' or `Delivered-To:' headers to identify
list messages.

The following MySQL mailing lists exist:

`<announce-subscribe@lists.mysql.com> announce'
     This is for announcement of new versions of MySQL and related
     programs.  This is a low volume list all MySQL users should
     subscribe to.

`<mysql-subscribe@lists.mysql.com> mysql'
     The main list for general MySQL discussion.  Please note that some
     topics are better discussed on the more-specialized lists.  If you
     post to the wrong list, you may not get an answer!

`<mysql-digest-subscribe@lists.mysql.com> mysql-digest'
     The `mysql' list in digest form.  That means you get all individual
     messages, sent as one large mail message once a day.

`<bugs-subscribe@lists.mysql.com> bugs'
     On this list you should only post a full, repeatable bug report
     using the `mysqlbug' script (if you are running on Windows, you
     should include a description of the operating system and the MySQL
     version).  Preferably, you should test the problem using the
     latest stable or development version of MySQL before posting!
     Anyone should be able to repeat the bug by just using `mysql test
     < script' on the included test case.  All bugs posted on this list
     will be corrected or documented in the next MySQL release!  If
     there are only small code changes involved, we will also post a
     patch that fixes the problem.

`<bugs-digest-subscribe@lists.mysql.com> bugs-digest'
     The `bugs' list in digest form.

`<internals-subscribe@lists.mysql.com> internals'
     A list for people who work on the MySQL code.  On this list one
     can also discuss MySQL development and post patches.

`<internals-digest-subscribe@lists.mysql.com> internals-digest'
     A digest version of the `internals' list.

`<java-subscribe@lists.mysql.com> java'
     Discussion about MySQL and Java.  Mostly about the JDBC drivers.

`<java-digest-subscribe@lists.mysql.com> java-digest'
     A digest version of the `java' list.

`<win32-subscribe@lists.mysql.com> win32'
     All things concerning MySQL on Microsoft operating systems such as
     Win95, Win98, NT, and Win2000.

`<win32-digest-subscribe@lists.mysql.com> win32-digest'
     A digest version of the `win32' list.

`<myodbc-subscribe@lists.mysql.com> myodbc'
     All things about connecting to MySQL with ODBC.

`<myodbc-digest-subscribe@lists.mysql.com> myodbc-digest'
     A digest version of the `myodbc' list.

`<plusplus-subscribe@lists.mysql.com> plusplus'
     All things concerning programming with the C++ API to MySQL.

`<plusplus-digest-subscribe@lists.mysql.com> plusplus-digest'
     A digest version of the `plusplus' list.

`<msql-mysql-modules-subscribe@lists.mysql.com> msql-mysql-modules'
     A list about the Perl support in MySQL. msql-mysql-modules

`<msql-mysql-modules-digest-subscribe@lists.mysql.com> msql-mysql-modules-digest'
     A digest version of the `msql-mysql-modules' list.

You subscribe or unsubscribe to all lists in the same way as described
above.  In your subscribe or unsubscribe message, just put the
appropriate mailing list name rather than `mysql'.  For example, to
subscribe to or unsubscribe from the `myodbc' list, send a message to
<myodbc-subscribe@lists.mysql.com> or
<myodbc-unsubscribe@lists.mysql.com>.

If you can't get an answer for your questions from the mailing list, one
option is to pay for support from MySQL AB, which will put you in
direct contact with MySQL developers. *Note Support::.

The following table shows some MySQL mailing in other languages than
English.  Note that these are not operated by MySQL AB, so we can't
guarantee the quality on these.

`<mysql-france-subscribe@yahoogroups.com> A French mailing list'

`<list@tinc.net> A Korean mailing list'
     Email `subscribe mysql your@e-mail.address' to this list.

`<mysql-de-request@lists.4t2.com> A German mailing list'
     Email `subscribe mysql-de your@e-mail.address' to this list.  You
     can find information about this mailing list at
     `http://www.4t2.com/mysql'.

`<mysql-br-request@listas.linkway.com.br> A Portugese mailing list'
     Email `subscribe mysql-br your@e-mail.address' to this list.

`<mysql-alta@elistas.net> A Spanish mailing list'
     Email `subscribe mysql your@e-mail.address' to this list.

Asking Questions or Reporting Bugs
..................................

Before posting a bug report or question, please do the following:

   * Start by searching the MySQL online manual at:
     `http://www.mysql.com/documentation/manual.php'
     We try to keep the manual up to date by updating it frequently with
     solutions to newly found problems!

   * Search the MySQL mailing list archives:
     `http://www.mysql.com/documentation/'
   * You can also use `http://www.mysql.com/search.html' to search all
     the Web pages (including the manual) that are located at
     `http://www.mysql.com/'.

If you can't find an answer in the manual or the archives, check with
your local MySQL expert.  If you still can't find an answer to your
question, go ahead and read the next section about how to send mail to
<mysql@lists.mysql.com>.

How to Report Bugs or Problems
..............................

Writing a good bug report takes patience, but doing it right the first
time saves time for us and for you.  A good bug report containing a full
test case for the bug will make it very likely that we will fix it in
the next release.  This section will help you write your report
correctly so that you don't waste your time doing things that may not
help us much or at all.

We encourage everyone to use the `mysqlbug' script to generate a bug
report (or a report about any problem), if possible.  `mysqlbug' can be
found in the `scripts' directory in the source distribution, or, for a
binary distribution, in the `bin' directory under your MySQL
installation directory.  If you are unable to use `mysqlbug', you should
still include all the necessary information listed in this section.

The `mysqlbug' script helps you generate a report by determining much
of the following information automatically, but if something important
is missing, please include it with your message!  Please read this
section carefully and make sure that all the information described here
is included in your report.

The normal place to report bugs and problems is
<mysql@lists.mysql.com>.  If you can make a test case that clearly
demonstrates the bug, you should post it to the <bugs@lists.mysql.com>
list.  Note that on this list you should only post a full, repeatable
bug report using the `mysqlbug' script.  If you are running on Windows,
you should include a description of the operating system and the MySQL
version.  Preferably, you should test the problem using the latest
stable or development version of MySQL before posting!  Anyone should
be able to repeat the bug by just using "`mysql test < script'" on the
included test case or run the shell or perl script that is included in
the bug report.  All bugs posted on the `bugs' list will be corrected
or documented in the next MySQL release!  If there are only small code
changes involved to correct this problem, we will also post a patch
that fixes the problem.

Remember that it is possible to respond to a message containing too much
information, but not to one containing too little.  Often people omit
facts because they think they know the cause of a problem and assume
that some details don't matter.  A good principle is: if you are in
doubt about stating something, state it!  It is a thousand times faster
and less troublesome to write a couple of lines more in your report
than to be forced to ask again and wait for the answer because you
didn't include enough information the first time.

The most common errors are that people don't indicate the version
number of the MySQL distribution they are using, or don't indicate what
platform they have MySQL installed on (including the platform version
number).  This is highly relevant information, and in 99 cases out of
100 the bug report is useless without it!  Very often we get questions
like, "Why doesn't this work for me?" then we find that the feature
requested wasn't implemented in that MySQL version, or that a bug
described in a report has been fixed already in newer MySQL versions.
Sometimes the error is platform dependent; in such cases, it is next to
impossible to fix anything without knowing the operating system and the
version number of the platform.

Remember also to provide information about your compiler, if it is
related to the problem.  Often people find bugs in compilers and think
the problem is MySQL-related.  Most compilers are under development all
the time and become better version by version.  To determine whether or
not your problem depends on your compiler, we need to know what
compiler is used.  Note that every compiling problem should be regarded
as a bug report and reported accordingly.

It is most helpful when a good description of the problem is included
in the bug report.  That is, a good example of all the things you did
that led to the problem and the problem itself exactly described.  The
best reports are those that include a full example showing how to
reproduce the bug or problem.  *Note Reproduceable test case::.

If a program produces an error message, it is very important to include
the message in your report!  If we try to search for something from the
archives using programs, it is better that the error message reported
exactly matches the one that the program produces.  (Even the case
should be observed!)  You should never try to remember what the error
message was; instead, copy and paste the entire message into your
report!

If you have a problem with MyODBC, you should try to generate a MyODBC
trace file.  *Note MyODBC bug report::.

Please remember that many of the people who will read your report will
do so using an 80-column display.  When generating reports or examples
using the `mysql' command line tool, you should therefore use the
`--vertical' option (or the `\G' statement terminator) for output that
would exceed the available width for such a display (for example, with
the `EXPLAIN SELECT' statement; see the example below).

Please include the following information in your report:

   * The version number of the MySQL distribution you are using (for
     example, MySQL Version 3.22.22). You can find out which version you
     are running by executing `mysqladmin version'.  `mysqladmin' can be
     found in the `bin' directory under your MySQL installation
     directory.

   * The manufacturer and model of the machine you are working on.

   * The operating system name and version.  For most operating
     systems, you can get this information by executing the Unix
     command `uname -a'.

   * Sometimes the amount of memory (real and virtual) is relevant. If
     in doubt, include these values.

   * If you are using a source distribution of MySQL, the name and
     version number of the compiler used is needed.  If you have a
     binary distribution, the distribution name is needed.

   * If the problem occurs during compilation, include the exact error
     message(s) and also a few lines of context around the offending
     code in the file where the error occurred.

   * If `mysqld' died, you should also report the query that crashed
     `mysqld'.  You can usually find this out by running `mysqld' with
     logging enabled.  *Note Using log files::.

   * If any database table is related to the problem, include the
     output from `mysqldump --no-data db_name tbl_name1 tbl_name2 ...'.
     This is very easy to do and is a powerful way to get information
     about any table in a database that will help us create a situation
     matching the one you have.

   * For speed-related bugs or problems with `SELECT' statements, you
     should always include the output of `EXPLAIN SELECT ...', and at
     least the number of rows that the `SELECT' statement produces.
     The more information you give about your situation, the more
     likely it is that someone can help you!  For example, the
     following is an example of a very good bug report (it should of
     course be posted with the `mysqlbug' script):

     Example run using the `mysql' command line tool (note the use of
     the `\G' statement terminator for statements whose output width
     would otherwise exceed that of an 80-column display device):

          mysql> SHOW VARIABLES;
          mysql> SHOW COLUMNS FROM ...\G
                 <output from SHOW COLUMNS>
          mysql> EXPLAIN SELECT ...\G
                 <output from EXPLAIN>
          mysql> FLUSH STATUS;
          mysql> SELECT ...;
                 <A short version of the output from SELECT,
                 including the time taken to run the query>
          mysql> SHOW STATUS;
                 <output from SHOW STATUS>

   * If a bug or problem occurs while running *mysqld*, try to provide
     an input script that will reproduce the anomaly.  This script
     should include any necessary source files.  The more closely the
     script can reproduce your situation, the better.  If you can make
     a reproduceable test case, you should post this to
     <bugs@lists.mysql.com> for a high priority treatment!

     If you can't provide a script, you should at least include the
     output from `mysqladmin variables extended-status processlist' in
     your mail to provide some information of how your system is
     performing!

   * If you can't produce a test case in a few rows, or if the test
     table is too big to be mailed to the mailing list (more than 10
     rows), you should dump your tables using `mysqldump' and create a
     `README' file that describes your problem.

     Create a compressed archive of your files using `tar' and `gzip'
     or `zip', and use `ftp' to transfer the archive to
     `ftp://support.mysql.com/pub/mysql/secret/'.  Then send a short
     description of the problem to <bugs@lists.mysql.com>.

   * If you think that MySQL produces a strange result from a query,
     include not only the result, but also your opinion of what the
     result should be, and an account describing the basis for your
     opinion.

   * When giving an example of the problem, it's better to use the
     variable names, table names, etc., that exist in your actual
     situation than to come up with new names.  The problem could be
     related to the name of a variable or table!  These cases are rare,
     perhaps, but it is better to be safe than sorry.  After all, it
     should be easier for you to provide an example that uses your
     actual situation, and it is by all means better for us.  In case
     you have data you don't want to show to others, you can use `ftp'
     to transfer it to `ftp://support.mysql.com/pub/mysql/secret/'.  If
     the data are really top secret and you don't want to show them
     even to us, then go ahead and provide an example using other
     names, but please regard this as the last choice.

   * Include all the options given to the relevant programs, if
     possible.  For example, indicate the options that you use when you
     start the `mysqld' daemon and that you use to run any MySQL client
     programs.  The options to programs like `mysqld' and `mysql', and
     to the `configure' script, are often keys to answers and are very
     relevant!  It is never a bad idea to include them anyway!  If you
     use any modules, such as Perl or PHP, please include the version
     number(s) of those as well.

   * If your question is related to the privilege system, please
     include the output of `mysqlaccess', the output of `mysqladmin
     reload', and all the error messages you get when trying to
     connect!  When you test your privileges, you should first run
     `mysqlaccess'.  After this, execute `mysqladmin reload version'
     and try to connect with the program that gives you trouble.
     `mysqlaccess' can be found in the `bin' directory under your MySQL
     installation directory.

   * If you have a patch for a bug, that is good, but don't assume the
     patch is all we need, or that we will use it, if you don't provide
     some necessary information, such as test cases showing the bug
     that your patch fixes.  We might find problems with your patch or
     we might not understand it at all; if so, we can't use it.

     If we can't verify exactly what the patch is meant for, we won't
     use it.  Test cases will help us here.  Show that the patch will
     handle all the situations that may occur.  If we find a borderline
     case (even a rare one) where the patch won't work, it may be
     useless.

   * Guesses about what the bug is, why it occurs, or what it depends
     on, are usually wrong.  Even the MySQL team can't guess such things
     without first using a debugger to determine the real cause of a
     bug.

   * Indicate in your mail message that you have checked the reference
     manual and mail archive so others know that you have tried to
     solve the problem yourself.

   * If you get a `parse error', please check your syntax closely!  If
     you can't find something wrong with it, it's extremely likely that
     your current version of MySQL doesn't support the query you are
     using.  If you are using the current version and the manual at
     `http://www.mysql.com/documentation/manual.php' doesn't cover the
     syntax you are using, MySQL doesn't support your query.  In this
     case, your only options are to implement the syntax yourself or
     e-mail <mysql-licensing@mysql.com> and ask for an offer to
     implement it!

     If the manual covers the syntax you are using, but you have an
     older version of MySQL, you should check the MySQL change history
     to see when the syntax was implemented.  In this case, you have
     the option of upgrading to a newer version of MySQL.  *Note News::.

   * If you have a problem such that your data appears corrupt or you
     get errors when you access some particular table, you should first
     check and then try repairing your tables with `myisamchk' or
     `CHECK TABLE' and `REPAIR TABLE'.  *Note MySQL Database
     Administration::.

   * If you often get corrupted tables you should try to find out when
     and why this happens!  In this case, the
     `mysql-data-directory/'hostname'.err' file may contain some
     information about what happened.  *Note Error log::.  Please
     include any relevant information from this file in your bug
     report!  Normally `mysqld' should *NEVER* crash a table if nothing
     killed it in the middle of an update!  If you can find the cause
     of `mysqld' dying, it's much easier for us to provide you with a
     fix for the problem!  *Note What is crashing::.

   * If possible, download and install the most recent version of MySQL
     and check whether or not it solves your problem.  All versions of
     MySQL are thoroughly tested and should work without problems!  We
     believe in making everything as backward compatible as possible,
     and you should be able to switch MySQL versions in minutes!  *Note
     Which version::.

If you are a support customer, please cross-post the bug report to
<mysql-support@mysql.com> for higher priority treatment, as well as to
the appropriate mailing list to see if someone else has experienced (and
perhaps solved) the problem.

For information on reporting bugs in *MyODBC*, see *Note ODBC
Problems::.

For solutions to some common problems, see *Note Problems::.

When answers are sent to you individually and not to the mailing list,
it is considered good etiquette to summarize the answers and send the
summary to the mailing list so that others may have the benefit of
responses you received that helped you solve your problem!

Guidelines for Answering Question on the Mailing List
.....................................................

If you consider your answer to have broad interest, you may want to
post it to the mailing list instead of replying directly to the
individual who asked.  Try to make your answer general enough that
people other than the original poster may benefit from it.  When you
post to the list, please make sure that your answer is not a
duplication of a previous answer.

Try to summarize the essential part of the question in your reply;
don't feel obliged to quote the entire original message.

Please don't post mail messages from your browser with HTML mode turned
on!  Many users don't read mail with a browser!

MySQL Support and Licensing
===========================

This section describes MySQL support and licensing arrangements:

   * Support costs and benefits (*note Support::)

   * The copyrights under which MySQL is distributed (*note Copyright::)

   * When and why you should license MySQL (*note Licensing policy::)

   * Sample situations illustrating when a license is required (*note
     Licensing examples::)


Support offered by MySQL AB
---------------------------

MySQL AB offers several commercial support options.  A description of
what each level of support includes is given at
`https://order.mysql.com'.  If you have restricted access to the
Internet, contact our sales staff at <sales@mysql.com>.

Technical support from MySQL AB means personal answers to your personal
problems direct from the software engineers who code the MySQL database
engine.  It is often very helpful to receive quick, personally prepared
answers tailored to your exact needs.  This is what MySQL AB paid
technical support offers. Our pricing model ensures that basic support
is affordable even for those on limited budgets.

We try to take a broad and inclusive view of technical support.  Almost
any problem involving MySQL is important to us if it's important to
you.  Typically customers seek help on how to get different commands
and utilities to work, remove performance bottlenecks, restore crashed
systems, understand operating system or networking impacts on MySQL,
establish best practices for backup and recovery, utilize APIs, etc.

Copyrights Used by MySQL
------------------------

There are several different copyrights on the MySQL distribution:

  1. The MySQL-specific source needed to build the `mysqlclient'
     library is licensed under the `LGPL' and the programs in the
     `client' directory are under the `GPL'. Each file states at the
     beginning which license it is under.

  2. The client library, and the GNU `getopt' library, are covered by
     the "GNU LIBRARY GENERAL PUBLIC LICENSE."  *Note LGPL license::.

  3. Some parts of the source (the `regexp' library) are covered by a
     Berkeley-style copyright.

  4. All the source in the server, and the GNU `readline' library, are
     covered by the "GNU GENERAL PUBLIC LICENSE."  *Note GPL license::.
     This is also available as the file `COPYING' in the distributions.


The SQL client library should be free enough that it is possible to add
MySQL support into commercial products without a license.  For this
reason, we chose the LGPL license for the client code.

This means that you can use MySQL for free with any program that uses
any of the free software licenses.  MySQL is also free for any end user
for personal or company usage.

However, if you use MySQL for something important to you, you may want
to help secure its development by purchasing licenses or a support
contract.  *Note Support::.

Copyright Changes
.................

Version 3.22 of MySQL is still using a more strict license.  See the
documentation for that version for more information.

MySQL Licensing Policy
----------------------

The formal terms of the GPL license can be found at *Note GPL license::.
For pricing and ordering information, see `https://order.mysql.com/'.

Basically, our licensing policy and interpretation of the GPL is as
follows:

For normal internal use, MySQL costs nothing.  You do not have to pay
us if you do not want to.

A license is required if:

   - You link a program, that is not free software, with code from the
     MySQL server or clients that has the GPL copyright. This happens
     for example when you use MySQL as an embedded server in your
     applications or when you add not free extensions to the MySQL
     server.  In this case your application/code would also become GPL
     through the GPL license that acts as a virus.  By licensing MySQL
     server from MySQL AB under a commercial license you will avoid
     this problem.  See `http://www.gnu.org/copyleft/gpl-faq.html'.

   - You have a commercial application that ONLY works with MySQL and
     ships the application with the MySQL server.  This is because we
     view this as linking even if it is done over the network.

   - You have a distribution of MySQL and you don't provide the source
     code for your copy of the MySQL server, as defined in the GPL
     license.

A license is *not* required if:

   - You include the MySQL client code in a commercial program.  The
     client part of MySQL is licensed under the LGPL `GNU Library
     General Public License'.  The `mysql' command-line client does
     include code from the `readline' library that is under the `GPL',
     however.


If your use of MySQL does not require a license, but you like MySQL and
want to encourage further development, you are certainly welcome to
purchase a license or MySQL support anyway.  *Note Support::.

If you use MySQL in a commercial context such that you profit by its
use, we ask that you further the development of MySQL by purchasing
some level of support.  We feel that if MySQL helps your business, it
is reasonable to ask that you help MySQL.  (Otherwise, if you ask us
support questions, you are not only using for free something into which
we've put a lot a work, you're asking us to provide free support, too.)

Note that older versions of MySQL are still using a more strict license
(http://www.mysql.com/support/arrangements/mypl.html).  See the
documentation for the specific version for more information.

For circumstances under which a MySQL license is required, you need a
license per machine that runs the `mysqld' server.  However, a
multiple-CPU machine counts as a single machine, and there is no
restriction on the number of MySQL servers that run on one machine, or
on the number of clients concurrently connected to a server running on
that machine.

If you have any questions as to whether or not a license is required for
your particular use of MySQL, please read this again and then contact
us.  *Note Contact information::.

If you require a MySQL license, the easiest way to pay for it is to use
the license form on MySQL's secure server at `https://order.mysql.com/'.
You can also get the latest pricing and ordering information by sending
an e-mail to <sales@mysql.com>.

Example Licensing Situations
----------------------------

This section describes some situations illustrating whether or not you
must license the MySQL server.  Generally these examples involve
providing MySQL as an integral part of a product.

Note that a single MySQL license covers any number of CPUs and `mysqld'
servers on a machine!  There is no artificial limit on the number of
clients that connect to the server in any way.

Selling Products that use MySQL
...............................

To determine whether or not you need a MySQL license when selling your
application, you should ask whether the proper functioning of your
application is dependent on the use of MySQL and whether you include
the MySQL server with your product.  There are several cases to
consider:

   * Does your application require MySQL to function properly?

   * If your product requires MySQL, you need a license for any machine
     that runs the `mysqld' server.  For example, if you've designed
     your application around MySQL, then you've really made a
     commercial product that requires the engine, so you need a license.

   * If your application does not require MySQL, you do not need to
     obtain a license.  For example, if using MySQL just adds some new
     optional features to your product (such as adding logging to a
     database if MySQL is used rather than logging to a text file), it
     should fall within normal use, and a license would not be required.

   * In other words, you need a license if you sell a product designed
     specifically for use with MySQL or that requires the MySQL server
     to function at all.  This is true whether or not you provide MySQL
     for your client as part of your product distribution.

   * It also depends on what you're doing for the client.  Do you plan
     to provide your client with detailed instructions on installing
     MySQL with your software?  Then your product may be contingent on
     the use of MySQL; if so, you need to buy a license.  If you are
     simply tying into a database that you expect already to have been
     installed by the time your software is purchased, then you probably
     don't need a license.


ISP MySQL Services
..................

Internet Service Providers (ISPs) often host MySQL servers for their
customers.  With the GPL license this does not require a license.

On the other hand, we do encourage people to use ISPs that have MySQL
support, as this will give them the confidence that if they have some
problem with their MySQL installation, their ISP will be able to solve
the problem for them (in some cases with the help from the MySQL
development team).

All ISPs that want to keep themselves up-to-date should subscribe to
our `announce' mailing list so that they can be aware of critical issues
that may be relevant for their MySQL installations.

Note that if the ISP doesn't have a license for MySQL, it should give
its customers at least read access to the source of the MySQL
installation so that its customers can verify that it is patched
correctly.

Running a Web Server Using MySQL
................................

If you use MySQL in conjunction with a Web server, you do not have to
pay for a license.

This is true even if you run a commercial Web server that uses MySQL,
because you are not selling an embedded MySQL version yourself.
However, in this case we would like you to purchase MySQL support,
because MySQL is helping your enterprise.

How Standards-compatible Is MySQL?
==================================

This section describes how MySQL relates to the ANSI SQL standards.
MySQL has many extensions to the ANSI SQL standards, and here you will
find out what they are, and how to use them.  You will also find
information about functionality missing from MySQL, and how to work
around some differences.

MySQL Extensions to ANSI SQL92
------------------------------

MySQL includes some extensions that you probably will not find in other
SQL databases.  Be warned that if you use them, your code will not be
portable to other SQL servers.  In some cases, you can write code that
includes MySQL extensions, but is still portable, by using comments of
the form `/*! ... */'.  In this case, MySQL will parse and execute the
code within the comment as it would any other MySQL statement, but
other SQL servers will ignore the extensions.  For example:

     SELECT /*! STRAIGHT_JOIN */ col_name FROM table1,table2 WHERE ...

If you add a version number after the `'!'', the syntax will only be
executed if the MySQL version is equal to or newer than the used
version number:

     CREATE /*!32302 TEMPORARY */ TABLE (a int);

The above means that if you have Version 3.23.02 or newer, then MySQL
will use the `TEMPORARY' keyword.

MySQL extensions are listed below:

   * The field types `MEDIUMINT', `SET', `ENUM', and the different
     `BLOB' and `TEXT' types.

   * The field attributes `AUTO_INCREMENT', `BINARY', `NULL',
     `UNSIGNED', and `ZEROFILL'.

   * All string comparisons are case insensitive by default, with sort
     ordering determined by the current character set (ISO-8859-1
     Latin1 by default).  If you don't like this, you should declare
     your columns with the `BINARY' attribute or use the `BINARY' cast,
     which causes comparisons to be done according to the ASCII order
     used on the MySQL server host.

   * MySQL maps each database to a directory under the MySQL data
     directory, and tables within a database to filenames in the
     database directory.

     This has a few implications:

        - Database names and table names are case sensitive in MySQL on
          operating systems that have case-sensitive filenames (like
          most Unix systems). *Note Name case sensitivity::.

        - Database, table, index, column, or alias names may begin with
          a digit (but may not consist solely of digits).

        - You can use standard system commands to backup, rename, move,
          delete, and copy tables.  For example, to rename a table,
          rename the `.MYD', `.MYI', and `.frm' files to which the
          table corresponds.

   * In SQL statements, you can access tables from different databases
     with the `db_name.tbl_name' syntax.  Some SQL servers provide the
     same functionality but call this `User space'.  MySQL doesn't
     support tablespaces as in: `create table ralph.my_table...IN
     my_tablespace'.

   * `LIKE' is allowed on numeric columns.

   * Use of `INTO OUTFILE' and `STRAIGHT_JOIN' in a `SELECT' statement.
     *Note `SELECT': SELECT.

   * The `SQL_SMALL_RESULT' option in a `SELECT' statement.

   * `EXPLAIN SELECT' to get a description on how tables are joined.

   * Use of index names, indexes on a prefix of a field, and use of
     `INDEX' or `KEY' in a `CREATE TABLE' statement. *Note `CREATE
     TABLE': CREATE TABLE.

   * Use of `TEMPORARY' or `IF NOT EXISTS' with `CREATE TABLE'.

   * Use of `COUNT(DISTINCT list)' where 'list' is more than one
     element.

   * Use of `CHANGE col_name', `DROP col_name', or `DROP INDEX',
     `IGNORE' or `RENAME' in an `ALTER TABLE' statement. *Note `ALTER
     TABLE': ALTER TABLE.

   * Use of `RENAME TABLE'. *Note `RENAME TABLE': RENAME TABLE.

   * Use of multiple `ADD', `ALTER', `DROP', or `CHANGE' clauses in an
     `ALTER TABLE' statement.

   * Use of `DROP TABLE' with the keywords `IF EXISTS'.

   * You can drop multiple tables with a single `DROP TABLE' statement.

   * The `LIMIT' clause of the `DELETE' statement.

   * The `DELAYED' clause of the `INSERT' and `REPLACE' statements.

   * The `LOW_PRIORITY' clause of the `INSERT', `REPLACE', `DELETE',
     and `UPDATE' statements.

   * Use of `LOAD DATA INFILE'. In many cases, this syntax is
     compatible with Oracle's `LOAD DATA INFILE'. *Note `LOAD DATA':
     LOAD DATA.

   * The `ANALYZE TABLE', `CHECK TABLE', `OPTIMIZE TABLE', and `REPAIR
     TABLE' statements.

   * The `SHOW' statement.  *Note `SHOW': SHOW.

   * Strings may be enclosed by either `"' or `'', not just by `''.

   * Use of the escape `\' character.

   * The `SET OPTION' statement. *Note `SET OPTION': SET OPTION.

   * You don't need to name all selected columns in the `GROUP BY' part.
     This gives better performance for some very specific, but quite
     normal queries.  *Note Group by functions::.

   * One can specify `ASC' and `DESC' with `GROUP BY'.

   * To make it easier for users who come from other SQL environments,
     MySQL supports aliases for many functions. For example, all string
     functions support both ANSI SQL syntax and ODBC syntax.

   * MySQL understands the `||' and `&&' operators to mean logical OR
     and AND, as in the C programming language.  In MySQL, `||' and
     `OR' are synonyms, as are `&&' and `AND'.  Because of this nice
     syntax, MySQL doesn't support the ANSI SQL `||' operator for
     string concatenation; use `CONCAT()' instead. Because `CONCAT()'
     takes any number of arguments, it's easy to convert use of the
     `||' operator to MySQL.

   * `CREATE DATABASE' or `DROP DATABASE'.  *Note `CREATE DATABASE':
     CREATE DATABASE.

   * The `%' operator is a synonym for `MOD()'.  That is, `N % M' is
     equivalent to `MOD(N,M)'.  `%' is supported for C programmers and
     for compatibility with PostgreSQL.

   * The `=', `<>', `<=' ,`<', `>=',`>', `<<', `>>', `<=>', `AND',
     `OR', or `LIKE' operators may be used in column comparisons to the
     left of the `FROM' in `SELECT' statements.  For example:

          mysql> SELECT col1=1 AND col2=2 FROM tbl_name;

   * The `LAST_INSERT_ID()' function.  *Note `mysql_insert_id()':
     mysql_insert_id.

   * The `REGEXP' and `NOT REGEXP' extended regular expression
     operators.

   * `CONCAT()' or `CHAR()' with one argument or more than two
     arguments.  (In MySQL, these functions can take any number of
     arguments.)

   * The `BIT_COUNT()', `CASE', `ELT()', `FROM_DAYS()', `FORMAT()',
     `IF()', `PASSWORD()', `ENCRYPT()', `md5()', `ENCODE()', `DECODE()',
     `PERIOD_ADD()', `PERIOD_DIFF()', `TO_DAYS()', or `WEEKDAY()'
     functions.

   * Use of `TRIM()' to trim substrings. ANSI SQL only supports removal
     of single characters.

   * The `GROUP BY' functions `STD()', `BIT_OR()', and `BIT_AND()'.

   * Use of `REPLACE' instead of `DELETE' + `INSERT'.  *Note `REPLACE':
     REPLACE.

   * The `FLUSH flush_option' statement.

   * The possibility to set variables in a statement with `:=':
          SELECT @a:=SUM(total),@b=COUNT(*),@a/@b AS avg FROM test_table;
          SELECT @t1:=(@t2:=1)+@t3:=4,@t1,@t2,@t3;


MySQL Differences Compared to ANSI SQL92
----------------------------------------

We try to make MySQL follow the ANSI SQL standard and the ODBC SQL
standard, but in some cases MySQL does some things differently:

   * `--' is only a comment if followed by a white space. *Note Missing
     comments::.

   * For `VARCHAR' columns, trailing spaces are removed when the value
     is stored. *Note Bugs::.

   * In some cases, `CHAR' columns are silently changed to `VARCHAR'
     columns. *Note Silent column changes::.

   * Privileges for a table are not automatically revoked when you
     delete a table. You must explicitly issue a `REVOKE' to revoke
     privileges for a table. *Note `GRANT': GRANT.

   * `NULL AND FALSE' will evaluate to `NULL' and not to `FALSE'.  This
     is because we don't think it's good to have to evaluate a lot of
     extra conditions in this case.

Running MySQL in ANSI Mode
--------------------------

If you start `mysqld' with the `--ansi' option, the following behavior
of MySQL changes:

   * `||' is string concatenation instead of `OR'.

   * You can have any number of spaces between a function name and the
     `('.  This forces all function names to be treated as reserved
     words.

   * `"' will be an identifier quote character (like the MySQL ``'
     quote character) and not a string quote character.

   * `REAL' will be a synonym for `FLOAT' instead of a synonym of
     `DOUBLE'.

   * The default transaction isolation level is `SERIALIZABLE'.  *Note
     SET TRANSACTION::.

This is the same as using
`--sql-mode=REAL_AS_FLOAT,PIPES_AS_CONCAT,ANSI_QUOTES,IGNORE_SPACE,SERIALIZE,ONLY_FULL_GROUP_BY'.

Functionality Missing from MySQL
--------------------------------

The following functionality is missing in the current version of MySQL.
For a prioritized list indicating when new extensions may be added to
MySQL, you should consult the online MySQL TODO list
(http://www.mysql.com/documentation/manual.php?section=TODO). That is
the latest version of the TODO list in this manual. *Note TODO::.

Sub-selects
...........

MySQL currently only supports sub selects of the form `INSERT ...
SELECT ...' and `REPLACE ... SELECT ...'. You can however use the
function `IN()' in other contexts.

In many cases you can rewrite the query without a sub-select:

     SELECT * FROM table1 WHERE id IN (SELECT id FROM table2);

This can be re-written as:

     SELECT table1.* FROM table1,table2 WHERE table1.id=table2.id;

The queries:
     SELECT * FROM table1 WHERE id NOT IN (SELECT id FROM table2);
     SELECT * FROM table1 WHERE NOT EXISTS (SELECT id FROM table2 where table1.id=table2.id);

Can be rewritten as:

     SELECT table1.* FROM table1 LEFT JOIN table2 ON table1.id=table2.id where table2.id IS NULL

For more complicated subqueries you can often create temporary tables
to hold the subquery.  In some cases, however this option will not
work. The most frequently encountered of these cases arises with
`DELETE' statements, for which standard SQL does not support joins
(except in sub-selects).  For this situation there are two options
available until subqueries are supported by MySQL.

The first option is to use a procedural programming language (such as
Perl or PHP) to submit a `SELECT' query to obtain the primary keys for
the records to be deleted, and then use these values to construct the
`DELETE' statement (`DELETE FROM ... WHERE ... IN (key1, key2, ...)').

The second option is to use interactive SQL to contruct a set of
`DELETE' statements automatically, using the MySQL extension `CONCAT()'
(in lieu of the standard `||' operator).  For example:

     SELECT CONCAT('DELETE FROM tab1 WHERE pkid = ', tab1.pkid, ';')
       FROM tab1, tab2
      WHERE tab1.col1 = tab2.col2;

You can place this query in a script file and redirect input from it to
the `mysql' command-line interpreter, piping its output back to a
second instance of the interpreter:

     prompt> mysql --skip-column-names mydb < myscript.sql | mysql mydb

MySQL 4.0 supports multi-table deletes that can be used to efficiently
delete rows based on information from one table or even from many tables
at the same time.

`SELECT INTO TABLE'
...................

MySQL doesn't yet support the Oracle SQL extension: `SELECT ... INTO
TABLE ...'.  MySQL supports instead the ANSI SQL syntax `INSERT INTO
... SELECT ...', which is basically the same thing. *Note INSERT
SELECT::.

     INSERT INTO tblTemp2 (fldID) SELECT tblTemp1.fldOrder_ID FROM tblTemp1 WHERE
     tblTemp1.fldOrder_ID > 100;

Alternatively, you can use `SELECT INTO OUTFILE...' or `CREATE TABLE
... SELECT' to solve your problem.

Transactions
............

As MySQL does nowadays support transactions, the following discussion
is only valid if you are only using the non-transaction-safe table
types. *Note COMMIT::.

The question is often asked, by the curious and the critical, "Why is
MySQL not a transactional database?" or "Why does MySQL not support
transactions?"

MySQL has made a conscious decision to support another paradigm for
data integrity, "atomic operations." It is our thinking and experience
that atomic operations offer equal or even better integrity with much
better performance. We, nonetheless, appreciate and understand the
transactional database paradigm and plan, within the next few releases,
to introduce transaction-safe tables on a per table basis. We will be
giving our users the possibility to decide if they need the speed of
atomic operations or if they need to use transactional features in their
applications.

How does one use the features of MySQL to maintain rigorous integrity
and how do these features compare with the transactional paradigm?

First, in the transactional paradigm, if your applications are written
in a way that is dependent on the calling of "rollback" instead of
"commit" in critical situations, then transactions are more convenient.
Moreover, transactions ensure that unfinished updates or corrupting
activities are not committed to the database; the server is given the
opportunity to do an automatic rollback and your database is saved.

MySQL, in almost all cases, allows you to solve for potential problems
by including simple checks before updates and by running simple scripts
that check the databases for inconsistencies and automatically repair
or warn if such occurs. Note that just by using the MySQL log or even
adding one extra log, one can normally fix tables perfectly with no
data integrity loss.

Moreover, fatal transactional updates can be rewritten to be atomic. In
fact,we will go so far as to say that all integrity problems that
transactions solve can be done with `LOCK TABLES' or atomic updates,
ensuring that you never will get an automatic abort from the database,
which is a common problem with transactional databases.

Not even transactions can prevent all loss if the server goes down.  In
such cases even a transactional system can lose data.  The difference
between different systems lies in just how small the time-lap is where
they could lose data. No system is 100% secure, only "secure enough."
Even Oracle, reputed to be the safest of transactional databases, is
reported to sometimes lose data in such situations.

To be safe with MySQL, you only need to have backups and have the
update logging turned on.  With this you can recover from any situation
that you could with any transactional database.  It is, of course,
always good to have backups, independent of which database you use.

The transactional paradigm has its benefits and its drawbacks. Many
users and application developers depend on the ease with which they can
code around problems where an abort appears to be, or is necessary, and
they may have to do a little more work with MySQL to either think
differently or write more. If you are new to the atomic operations
paradigm, or more familiar or more comfortable with transactions, do not
jump to the conclusion that MySQL has not addressed these issues.
Reliability and integrity are foremost in our minds.  Recent estimates
indicate that there are more than 1,000,000 `mysqld' servers currently
running, many of which are in production environments.  We hear very,
very seldom from our users that they have lost any data, and in almost
all of those cases user error is involved. This is, in our opinion, the
best proof of MySQL's stability and reliability.

Lastly, in situations where integrity is of highest importance, MySQL's
current features allow for transaction-level or better reliability and
integrity. If you lock tables with `LOCK TABLES', all updates will
stall until any integrity checks are made.  If you only obtain a read
lock (as opposed to a write lock), then reads and inserts are still
allowed to happen.  The new inserted records will not be seen by any of
the clients that have a `READ' lock until they release their read
locks.  With `INSERT DELAYED' you can queue inserts into a local queue,
until the locks are released, without having the client wait for the
insert to complete. *Note INSERT DELAYED::.

"Atomic," in the sense that we mean it, is nothing magical. It only
means that you can be sure that while each specific update is running,
no other user can interfere with it, and there will never be an
automatic rollback (which can happen on transaction based systems if
you are not very careful).  MySQL also guarantees that there will not be
any dirty reads.  You can find some example of how to write atomic
updates in the commit-rollback section. *Note Commit-rollback::.

We have thought quite a bit about integrity and performance, and we
believe that our atomic operations paradigm allows for both high
reliability and extremely high performance, on the order of three to
five times the speed of the fastest and most optimally tuned of
transactional databases. We didn't leave out transactions because they
are hard to do. The main reason we went with atomic operations as
opposed to transactions is that by doing this we could apply many speed
optimizations that would not otherwise have been possible.

Many of our users who have speed foremost in their minds are not at all
concerned about transactions. For them transactions are not an issue.
For those of our users who are concerned with or have wondered about
transactions vis-a-vis MySQL, there is a "MySQL way" as we have
outlined above.  For those where safety is more important than speed,
we recommend them to use the `BDB', or `InnoDB' tables for all their
critical data. *Note Table types::.

One final note: We are currently working on a safe replication schema
that we believe to be better than any commercial replication system we
know of. This system will work most reliably under the atomic
operations, non-transactional, paradigm. Stay tuned.

Stored Procedures and Triggers
..............................

A stored procedure is a set of SQL commands that can be compiled and
stored in the server. Once this has been done, clients don't need to
keep reissuing the entire query but can refer to the stored procedure.
This provides better performance because the query has to be parsed
only once, and less information needs to be sent between the server and
the client. You can also raise the conceptual level by having libraries
of functions in the server.

A trigger is a stored procedure that is invoked when a particular event
occurs.  For example, you can install a stored procedure that is
triggered each time a record is deleted from a transaction table and
that automatically deletes the corresponding customer from a customer
table when all his transactions are deleted.

The planned update language will be able to handle stored procedures,
but without triggers. Triggers usually slow down everything, even
queries for which they are not needed.

To see when MySQL might get stored procedures, see *Note TODO::.

Foreign Keys
............

Note that foreign keys in SQL are not used to join tables, but are used
mostly for checking referential integrity (foreign key constraints).  If
you want to get results from multiple tables from a `SELECT' statement,
you do this by joining tables:

     SELECT * from table1,table2 where table1.id = table2.id;

*Note `JOIN': JOIN. *Note example-Foreign keys::.

The `FOREIGN KEY' syntax in MySQL exists only for compatibility with
other SQL vendors' `CREATE TABLE' commands; it doesn't do anything.
The `FOREIGN KEY' syntax without `ON DELETE ...' is mostly used for
documentation purposes. Some ODBC applications may use this to produce
automatic `WHERE' clauses, but this is usually easy to override.
`FOREIGN KEY' is sometimes used as a constraint check, but this check
is unnecessary in practice if rows are inserted into the tables in the
right order. MySQL only supports these clauses because some
applications require them to exist (regardless of whether or not they
work).

In MySQL, you can work around the problem of `ON DELETE ...' not being
implemented by adding the appropriate `DELETE' statement to an
application when you delete records from a table that has a foreign key.
In practice this is as quick (in some cases quicker) and much more
portable than using foreign keys.

In MySQL 4.0 you can use multi-table delete to delete rows from many
tables with one command. *Note DELETE::.

In the near future we will extend the `FOREIGN KEY' implementation so
that at least the information will be saved in the table specification
file and may be retrieved by `mysqldump' and ODBC. At a later stage we
will implement the foreign key constraints for application that can't
easily be coded to avoid them.

MySQL 3.23.44 and forwards, InnoDB tables supports checking of foreign
key constraints. *Note InnoDB::.

Why We Did Not Implement Foreign Keys
.....................................

Many database scholars and programmers feel very strongly that
referential integrity should be enforced inside the database server.
Indeed, in many cases, this approach is very helpful. However, in
talking with many database users we have observed that foreign keys are
often misused, which can cause severe problems. Even when used
properly, it is not a magic solution for the referential integrity
problem, although it does make things easier in some cases.

Because of the above observations, we did not assign implementing
foreign keys a high priority. Our user base consisted of mostly of
developers who did not mind enforcing referential integerity inside the
application code, and in fact, preferred to do it that way because it
gave them more control.

However, in the last couple of years, our user base has expanded a
great deal and we now have many users who would like to have the
enforced referential integrity support inside MySQL. So we will
implement the foreign keys in the near future, although at this point
we cannot provide a definite delivery date.

Some advantages of foreign key enforcement:

   * Assuming proper design of the relations, foreign key constraints
     will make it more difficult for a programmer to introduce an
     inconsistency into the database

   * Using cascading updates and deletes can simplify the client code

   * Properly designed foreign key rules aid in documenting relations
     between tables

Disadvantages:

   * MySQL does not yet support enforced referential integrity, so if
     your application depends on it, you will not be able to use it
     with MySQL until we implement this feature.

   * Mistakes, that are easy to make in designing key relations, can
     cause severe problems, for example, circular rules, or the wrong
     combination of cascading deletes.

   * A properly written application will make sure internally that it
     is not violating referential integrity constraints before
     proceding with a query.  Thus, additionaly checks on the database
     level will only slow down performance for such application.

   * It is not uncommon for a DBA to make such a complex topology of
     relations that it becomes very difficult, and in some cases
     impossible to backup or restore individual tables.

Views
.....

MySQL doesn't yet support views, but we plan to implement these to
about 4.1.

Views are mostly useful for letting users access a set of relations as
one table (in read-only mode).  Many SQL databases don't allow one to
update any rows in a view, but you have to do the updates in the
separate tables.

As MySQL is mostly used in applications and on web system where the
application writer has full control on the database usage, most of our
users haven't regarded views to be very important. (At least no one has
been interested enough in this to be prepared to finance the
implementation of views).

One doesn't need views in MySQL to restrict access to columns as MySQL
has a very sophisticated privilege system. *Note Privilege system::.

`--' as the Start of a Comment
..............................

Some other SQL databases use `--' to start comments. MySQL has `#' as
the start comment character, even if the `mysql' command-line tool
removes all lines that start with `--'.  You can also use the C comment
style `/* this is a comment */' with MySQL.  *Note Comments::.

MySQL Version 3.23.3 and above supports the `--' comment style only if
the comment is followed by a space.  This is because this degenerate
comment style has caused many problems with automatically generated SQL
queries that have used something like the following code, where we
automatically insert the value of the payment for `!payment!':

     UPDATE tbl_name SET credit=credit-!payment!

What do you think will happen when the value of `payment' is negative?

Because `1--1' is legal in SQL, we think it is terrible that `--' means
start comment.

In MySQL Version 3.23 you can, however, use: `1-- This is a comment'

The following discussion only concerns you if you are running a MySQL
version earlier than Version 3.23:

If you have a SQL program in a text file that contains `--' comments
you should use:

     shell> replace " --" " #" < text-file-with-funny-comments.sql \
              | mysql database

instead of the usual:

     shell> mysql database < text-file-with-funny-comments.sql

You can also edit the command file "in place" to change the `--'
comments to `#' comments:

     shell> replace " --" " #" -- text-file-with-funny-comments.sql

Change them back with this command:

     shell> replace " #" " --" -- text-file-with-funny-comments.sql

What Standards Does MySQL Follow?
---------------------------------

Entry level SQL92. ODBC levels 0-2.

How to Cope Without `COMMIT'/`ROLLBACK'
---------------------------------------

The following mostly applies only for `ISAM', `MyISAM', and `HEAP'
tables. If you only use transaction-safe tables (`BDB', or `InnoDB'
tables) in an an update, you can do `COMMIT' and `ROLLBACK' also with
MySQL.  *Note COMMIT::.

The problem with handling `COMMIT'-`ROLLBACK' efficiently with the
above table types would require a completely different table layout
than MySQL uses today.  The table type would also need extra threads
that do automatic cleanups on the tables, and the disk usage would be
much higher. This would make these table types about 2-4 times slower
than they are today.

For the moment, we prefer implementing the SQL server language
(something like stored procedures). With this you would very seldom
really need `COMMIT'-`ROLLBACK.' This would also give much better
performance.

Loops that need transactions normally can be coded with the help of
`LOCK TABLES', and you don't need cursors when you can update records
on the fly.

We at TcX had a greater need for a real fast database than a 100%
general database. Whenever we find a way to implement these features
without any speed loss, we will probably do it. For the moment, there
are many more important things to do. Check the TODO for how we
prioritize things at the moment. (Customers with higher levels of
support can alter this, so things may be reprioritized.)

The current problem is actually `ROLLBACK'. Without `ROLLBACK', you can
do any kind of `COMMIT' action with `LOCK TABLES'. To support
`ROLLBACK' with the above table types, MySQL would have to be changed
to store all old records that were updated and revert everything back
to the starting point if `ROLLBACK' was issued. For simple cases, this
isn't that hard to do (the current `isamlog' could be used for this
purpose), but it would be much more difficult to implement `ROLLBACK'
for `ALTER/DROP/CREATE TABLE'.

To avoid using `ROLLBACK', you can use the following strategy:

  1. Use `LOCK TABLES ...' to lock all the tables you want to access.

  2. Test conditions.

  3. Update if everything is okay.

  4. Use `UNLOCK TABLES' to release your locks.

This is usually a much faster method than using transactions with
possible `ROLLBACK's, although not always. The only situation this
solution doesn't handle is when someone kills the threads in the middle
of an update. In this case, all locks will be released but some of the
updates may not have been executed.

You can also use functions to update records in a single operation.
You can get a very efficient application by using the following
techniques:

   * Modify fields relative to their current value.

   * Update only those fields that actually have changed.

For example, when we are doing updates to some customer information, we
update only the customer data that has changed and test only that none
of the changed data, or data that depend on the changed data, has
changed compared to the original row. The test for changed data is done
with the `WHERE' clause in the `UPDATE' statement. If the record wasn't
updated, we give the client a message: "Some of the data you have
changed have been changed by another user". Then we show the old row
versus the new row in a window, so the user can decide which version of
the customer record he should use.

This gives us something that is similar to column locking but is
actually even better, because we only update some of the columns, using
values that are relative to their current values.  This means that
typical `UPDATE' statements look something like these:

     UPDATE tablename SET pay_back=pay_back+'relative change';
     
     UPDATE customer
       SET
         customer_date='current_date',
         address='new address',
         phone='new phone',
         money_he_owes_us=money_he_owes_us+'new_money'
       WHERE
         customer_id=id AND address='old address' AND phone='old phone';

As you can see, this is very efficient and works even if another client
has changed the values in the `pay_back' or `money_he_owes_us' columns.

In many cases, users have wanted `ROLLBACK' and/or `LOCK TABLES' for
the purpose of managing unique identifiers for some tables. This can be
handled much more efficiently by using an `AUTO_INCREMENT' column and
either the SQL function `LAST_INSERT_ID()' or the C API function
`mysql_insert_id()'. *Note `mysql_insert_id()': mysql_insert_id.

At MySQL AB, we have never had any need for row-level locking because
we have always been able to code around it. Some cases really need row
locking, but they are very few. If you want row-level locking, you can
use a flag column in the table and do something like this:

     UPDATE tbl_name SET row_flag=1 WHERE id=ID;

MySQL returns 1 for the number of affected rows if the row was found
and `row_flag' wasn't already 1 in the original row.

You can think of it as MySQL changed the above query to:

     UPDATE tbl_name SET row_flag=1 WHERE id=ID and row_flag <> 1;

Known errors and design deficiencies in MySQL
---------------------------------------------

The following problems are known and have a very high priority to get
fixed:

   * `ANALYZE TABLE' on a BDB table may in some case make the table
     unusable until one has restarted `mysqld'.  When this happens you
     will see errors like the following in the MySQL error file:

          001207 22:07:56  bdb:  log_flush: LSN past current end-of-log

   * Don't execute `ALTER TABLE' on a `BDB' table on which you are
     running not completed multi-statement transactions. (The
     transaction will probably be ignored).

   * `ANALYZE TABLE', `OPTIMIZE TABLE' and `REPAIR TABLE' may cause
     problems on tables for which you are using `INSERT DELAYED'.

   * Doing a `LOCK TABLE ..' and `FLUSH TABLES ..' doesn't guarantee
     that there isn't a half-finished transaction in progress on the
     table.

   * BDB tables are a bit slow to open. If you have many BDB tables in a
     database, it will take a long time to use the `mysql' client on the
     database if you are not using the `-A' option or if you are using
     `rehash'. This is especially notable when you have a big table
     cache.

   * Th current replication protocol cannot deal with `LOAD DATA INFILE'
     and line terminator characters of more than 1 character.

The following problems are known and will be fixed in due time:

   * For the moment `MATCH' only works with `SELECT' statements.

   * When using `SET CHARACTER SET', one can't use translated
     characters in database, table and column names.

   * `DELETE FROM merge_table' used without a `WHERE' will only clear
     the mapping for the table, not delete everything in the mapped
     tables.

   * You cannot build in another directory when using MIT-pthreads.
     Because this requires changes to MIT-pthreads, we are not likely
     to fix this.

   * `BLOB' values can't "reliably" be used in `GROUP BY' or `ORDER BY'
     or `DISTINCT'. Only the first `max_sort_length' bytes (default
     1024) are used when comparing `BLOB'bs in these cases.  This can
     be changed with the `-O max_sort_length' option to `mysqld'. A
     workaround for most cases is to use a substring: `SELECT DISTINCT
     LEFT(blob,2048) FROM tbl_name'.

   * Calculation is done with `BIGINT' or `DOUBLE' (both are normally
     64 bits long). It depends on the function which precision one
     gets. The general rule is that bit functions are done with `BIGINT'
     precision, `IF', and `ELT()' with `BIGINT' or `DOUBLE' precision
     and the rest with `DOUBLE' precision.  One should try to avoid
     using bigger unsigned long long values than 63 bits
     (9223372036854775807) for anything else than bit fields!  MySQL
     4.0 has better `BIGINT' handling than 3.23.

   * All string columns, except `BLOB' and `TEXT' columns, automatically
     have all trailing spaces removed when retrieved. For `CHAR' types
     this is okay, and may be regarded as a feature according to ANSI
     SQL92. The bug is that in MySQL, `VARCHAR' columns are treated the
     same way.

   * You can only have up to 255 `ENUM' and `SET' columns in one table.

   * `safe_mysqld' re-directs all messages from `mysqld' to the
     `mysqld' log.  One problem with this is that if you execute
     `mysqladmin refresh' to close and reopen the log, `stdout' and
     `stderr' are still redirected to the old log.  If you use `--log'
     extensively, you should edit `safe_mysqld' to log to
     `'hostname'.err' instead of `'hostname'.log' so you can easily
     reclaim the space for the old log by deleting the old one and
     executing `mysqladmin refresh'.

   * In the `UPDATE' statement, columns are updated from left to right.
     If you refer to an updated column, you will get the updated value
     instead of the original value. For example:

          mysql> UPDATE tbl_name SET KEY=KEY+1,KEY=KEY+1;

     This will update `KEY' with `2' instead of with `1'.

   * You can't use temporary tables more than once in the same query.
     For example, the following doesn't work.

          select * from temporary_table, temporary_table as t2;

   * `RENAME' doesn't work with `TEMPORARY' tables.

   * The optimizer may handle `DISTINCT' differently if you are using
     'hidden' columns in a join or not.  In a join, hidden columns are
     counted as part of the result (even if they are not shown) while in
     normal queries hidden columns doesn't participate in the `DISTINCT'
     comparison.  We will probably change this in the future to never
     compare the hidden columns when executing `DISTINCT'

     An example of this is:

          SELECT DISTINCT mp3id FROM band_downloads WHERE userid = 9 ORDER BY id
          DESC;

     and

          SELECT DISTINCT band_downloads.mp3id, FROM band_downloads,band_mp3
          WHERE band_downloads.userid = 9 AND band_mp3.id = band_downloads.mp3id
          ORDER BY band_downloads.id DESC;

     In the second case you may in MySQL 3.23.x get two identical rows
     in the result set (because the hidden 'id' column may differ).

     Note that the this only happens for queries where you don't have
     the ORDER BY columns in the result, something that is you are not
     allowed to do in ANSI SQL.

   * Because MySQL allows you to work with table types that doesn't
     support transactions (and thus can't `rollback' data) some things
     behaves a little different in MySQL than in other SQL servers:
     (This is just to ensure that MySQL never need to do a rollback for
     a SQL command).  This may be a little awkward at times as column
     Because MySQL allows you to work with table types that don't
     support transactions, and thus can't `rollback' data, some things
     behave a little differently in MySQL than in other SQL servers.
     This is just to ensure that MySQL never need to do a rollback for
     a SQL command.  This may be a little awkward at times as column
     values must be checked in the application, but this will actually
     give you a nice speed increase as it allows MySQL to do some
     optimizations that otherwise would be very hard to do.

     If you set a column to an incorrect value, MySQL will, instead of
     doing a rollback, store the `best possible value' in the column:

        - If you try to store a value outside the range in a numerical
          column, MySQL will instead store the smallest or biggest
          possible value in the column.

        - If you try to store a string that doesn't start with a number
          into a numerical column, MySQL will store 0 into it.

        - If you try to store `NULL' into a column that doesn't take
          `NULL' values, MySQL will store 0 or `''' (empty string) in
          it instead. (This behavior can, however, be changed with the
          -DDONT_USE_DEFAULT_FIELDS compile option).

        - MySQL allows you to store some wrong date values into `DATE'
          and `DATETIME' columns. (Like 2000-02-31 or 2000-02-00).  If
          the date is totally wrong, MySQL will store the special
          0000-00-00 date value in the column.

        - If you set an `ENUM' column to an unsupported value, it will
          be set to the error value 'empty string', with numeric value
          0.

        - If you set an `SET' column to an unsupported value, the value
          will be ignored. *Note Bugs::.


   * If you execute a `PROCEDURE' on a query that returns an empty set,
     in some cases the `PROCEDURE' will not transform the columns.

   * Creation of a table of type `MERGE' doesn't check if the underlying
     tables are of compatible types.

   * MySQL can't yet handle `NaN', `-Inf' and `Inf' values in double.
     Using these will cause problems when trying to export and import
     data. We should as an intermediate solution change `NaN' to `NULL'
     (if possible) and `-Inf' and `Inf' to the Minimum respective
     maximum possible `double' value.

   * `LIMIT' on negative numbers are treated as big positive numbers.

   * If you use `ALTER TABLE' to first add an `UNIQUE' index to a table
     used in a `MERGE' table and then use `ALTER TABLE' to add a normal
     index on the `MERGE' table, the key order will be different for
     the tables if there was an old not-unique key in the table. This
     is because `ALTER TABLE' puts `UNIQUE' keys before normal keys to
     be able to detect duplicate keys as early as possible.

The following are known bugs in earlier versions of MySQL:

   * You can get a hung thread if you do a `DROP TABLE' on a table that
     is one among many tables that is locked with `LOCK TABLES'.

   * In the following case you can get a core dump:

        - Delayed insert handler has pending inserts to a table.

        - `LOCK table' with `WRITE'

        - `FLUSH TABLES'

   * Before MySQL Version 3.23.2 an `UPDATE' that updated a key with a
     `WHERE' on the same key may have failed because the key was used to
     search for records and the same row may have been found multiple
     times:

          UPDATE tbl_name SET KEY=KEY+1 WHERE KEY > 100;

     A workaround is to use:

          mysql> UPDATE tbl_name SET KEY=KEY+1 WHERE KEY+0 > 100;

     This will work because MySQL will not use index on expressions in
     the `WHERE' clause.

   * Before MySQL Version 3.23, all numeric types where treated as
     fixed-point fields. That means you had to specify how many
     decimals a floating-point field shall have. All results were
     returned with the correct number of decimals.

For platform-specific bugs, see the sections about compiling and
porting.

How MySQL Compares to Other Databases
=====================================

This section compares MySQL to other popular databases.

This section has been written by the MySQL developers, so it should be
read with that in mind.  There are no factual errors contained in this
section that we know of.  If you find something which you believe to be
an error, please contact us about it at <docs@mysql.com>.

For a list of all supported limits, functions, and types, see the
`crash-me' Web page at `http://www.mysql.com/information/crash-me.php'.

How MySQL Compares to `mSQL'
----------------------------

*Performance*
     For a true comparison of speed, consult the growing MySQL benchmark
     suite. *Note MySQL Benchmarks::.

     Because there is no thread creation overhead, a small parser, few
     features, and simple security, `mSQL' should be quicker at:

        * Tests that perform repeated connects and disconnects, running
          a very simple query during each connection.

        * `INSERT' operations into very simple tables with few columns
          and keys.

        * `CREATE TABLE' and `DROP TABLE'.

        * `SELECT' on something that isn't an index. (A table scan is
          very easy.)

     Because these operations are so simple, it is hard to be better at
     them when you have a higher startup overhead. After the connection
     is established, MySQL should perform much better.

     On the other hand, MySQL is much faster than `mSQL' (and most
     other SQL implementations) on the following:

        * Complex `SELECT' operations.

        * Retrieving large results (MySQL has a better, faster, and
          safer protocol).

        * Tables with variable-length strings, because MySQL has more
          efficient handling and can have indexes on `VARCHAR' columns.

        * Handling tables with many columns.

        * Handling tables with large record lengths.

        * `SELECT' with many expressions.

        * `SELECT' on large tables.

        * Handling many connections at the same time. MySQL is fully
          multi-threaded. Each connection has its own thread, which
          means that no thread has to wait for another (unless a thread
          is modifying a table another thread wants to access). In
          `mSQL', once one connection is established, all others must
          wait until the first has finished, regardless of whether the
          connection is running a query that is short or long. When the
          first connection terminates, the next can be served, while
          all the others wait again, etc.

        * Joins.  `mSQL' can become pathologically slow if you change
          the order of tables in a `SELECT'. In the benchmark suite, a
          time more than 15000 times slower than MySQL was seen.  This
          is due to `mSQL''s lack of a join optimizer to order tables
          in the optimal order. However, if you put the tables in
          exactly the right order in `mSQL'2 and the `WHERE' is simple
          and uses index columns, the join will be relatively fast!
          *Note MySQL Benchmarks::.

        * `ORDER BY' and `GROUP BY'.

        * `DISTINCT'.

        * Using `TEXT' or `BLOB' columns.

*SQL Features*
        * `GROUP BY' and `HAVING'.  `mSQL' does not support `GROUP BY'
          at all.  MySQL supports a full `GROUP BY' with both `HAVING'
          and the following functions: `COUNT()', `AVG()', `MIN()',
          `MAX()', `SUM()', and `STD()'.  `COUNT(*)' is optimized to
          return very quickly if the `SELECT' retrieves from one table,
          no other columns are retrieved, and there is no `WHERE'
          clause.  `MIN()' and `MAX()' may take string arguments.

        * `INSERT' and `UPDATE' with calculations.  MySQL can do
          calculations in an `INSERT' or `UPDATE'.  For example:

               mysql> UPDATE SET x=x*10+y WHERE x<20;

        * Aliasing.  MySQL has column aliasing.

        * Qualifying column names.  In MySQL, if a column name is
          unique among the tables used in a query, you do not have to
          use the full qualifier.

        * `SELECT' with functions.  MySQL has many functions (too many
          to list here; see *Note Functions::).


*Disk Space Efficiency*
     That is, how small can you make your tables?

     MySQL has very precise types, so you can create tables that take
     very little space. An example of a useful MySQL datatype is the
     `MEDIUMINT' that is 3 bytes long. If you have 100,000,000 records,
     saving even one byte per record is very important.

     `mSQL2' has a more limited set of column types, so it is more
     difficult to get small tables.

*Stability*
     This is harder to judge objectively. For a discussion of MySQL
     stability, see *Note Stability::.

     We have no experience with `mSQL' stability, so we cannot say
     anything about that.

*Price*
     Another important issue is the license. MySQL has a more flexible
     license than `mSQL', and is also less expensive than `mSQL'.
     Whichever product you choose to use, remember to at least consider
     paying for a license or e-mail support.  (You are required to get
     a license if you include MySQL with a product that you sell, of
     course.)

*Perl Interfaces*
     MySQL has basically the same interfaces to Perl as `mSQL' with
     some added features.

*JDBC (Java)*
     MySQL currently has a lot of different JDBC drivers:

        * The mm driver: A type 4 JDBC driver by Mark Matthews
          <mmatthew@ecn.purdue.edu>.  This is released under the LGPL.

        * The Resin driver. This is a commercial JDBC driver released
          under open source.
          `http://www.caucho.com/projects/jdbc-mysql/index.xtp'

        * The gwe driver: A Java interface by GWE technologies (not
          supported anymore).

        * The jms driver: An improved gwe driver by Xiaokun Kelvin ZHU
          <X.Zhu@brad.ac.uk> (not supported anymore).

        * The twz driver: A type 4 JDBC driver by Terrence W. Zellers
          <zellert@voicenet.com>.  This is commercial but is free for
          private and educational use (not supported anymore).

     The recommended driver is the mm driver. The Resin driver may also
     be good (at least the benchmarks looks good), but we haven't
     received that much information about this yet.

     We know that `mSQL' has a JDBC driver, but we have too little
     experience with it to compare.

*Rate of Development*
     MySQL has a very small team of developers, but we are quite used
     to coding C and C++ very rapidly. Because threads, functions,
     `GROUP BY', and so on are still not implemented in `mSQL', it has
     a lot of catching up to do. To get some perspective on this, you
     can view the `mSQL' `HISTORY' file for the last year and compare
     it with the News section of the MySQL Reference Manual (*note
     News::). It should be pretty obvious which one has developed most
     rapidly.

*Utility Programs*
     Both `mSQL' and MySQL have many interesting third-party tools.
     Because it is very easy to port upward (from `mSQL' to MySQL),
     almost all the interesting applications that are available for
     `mSQL' are also available for MySQL.

     MySQL comes with a simple `msql2mysql' program that fixes
     differences in spelling between `mSQL' and MySQL for the most-used
     C API functions.  For example, it changes instances of
     `msqlConnect()' to `mysql_connect()'. Converting a client program
     from `mSQL' to MySQL usually takes a couple of minutes.

How to Convert `mSQL' Tools for MySQL
.....................................

According to our experience, it would just take a few hours to convert
tools such as `msql-tcl' and `msqljava' that use the `mSQL' C API so
that they work with the MySQL C API.

The conversion procedure is:

  1. Run the shell script `msql2mysql' on the source. This requires the
     `replace' program, which is distributed with MySQL.

  2. Compile.

  3. Fix all compiler errors.

Differences between the `mSQL' C API and the MySQL C API are:

   * MySQL uses a `MYSQL' structure as a connection type (`mSQL' uses
     an `int').

   * `mysql_connect()' takes a pointer to a `MYSQL' structure as a
     parameter.  It is easy to define one globally or to use `malloc()'
     to get one.  `mysql_connect()' also takes two parameters for
     specifying the user and password.  You may set these to `NULL,
     NULL' for default use.

   * `mysql_error()' takes the `MYSQL' structure as a parameter. Just
     add the parameter to your old `msql_error()' code if you are
     porting old code.

   * MySQL returns an error number and a text error message for all
     errors. `mSQL' returns only a text error message.

   * Some incompatibilities exist as a result of MySQL supporting
     multiple connections to the server from the same process.

How `mSQL' and MySQL Client/Server Communications Protocols Differ
..................................................................

There are enough differences that it is impossible (or at least not
easy) to support both.

The most significant ways in which the MySQL protocol differs from the
`mSQL' protocol are listed below:

   * A message buffer may contain many result rows.

   * The message buffers are dynamically enlarged if the query or the
     result is bigger than the current buffer, up to a configurable
     server and client limit.

   * All packets are numbered to catch duplicated or missing packets.

   * All column values are sent in ASCII. The lengths of columns and
     rows are sent in packed binary coding (1, 2, or 3 bytes).

   * MySQL can read in the result unbuffered (without having to store
     the full set in the client).

   * If a single read/write takes more than 30 seconds, the server
     closes the connection.

   * If a connection is idle for 8 hours, the server closes the
     connection.

How `mSQL' 2.0 SQL Syntax Differs from MySQL
............................................

*Column types*

`MySQL'
     Has the following additional types (among others; *note `CREATE
     TABLE': CREATE TABLE.):
        * `ENUM' type for one of a set of strings.

        * `SET' type for many of a set of strings.

        * `BIGINT' type for 64-bit integers.

`'
     MySQL also supports the following additional type attributes:
        * `UNSIGNED' option for integer columns.

        * `ZEROFILL' option for integer columns.

        * `AUTO_INCREMENT' option for integer columns that are a
          `PRIMARY KEY'.  *Note `mysql_insert_id()': mysql_insert_id.

        * `DEFAULT' value for all columns.

`mSQL2'
     `mSQL' column types correspond to the MySQL types shown below:
     `mSQL'     *Corresponding MySQL type*
     *type*     
     `CHAR(len)'`CHAR(len)'
     `TEXT(len)'`TEXT(len)'. `len' is the maximal length.  And `LIKE'
                works.
     `INT'      `INT'. With many more options!
     `REAL'     `REAL'. Or `FLOAT'. Both 4- and 8-byte versions are
                available.
     `UINT'     `INT UNSIGNED'
     `DATE'     `DATE'. Uses ANSI SQL format rather than `mSQL''s own
                format.
     `TIME'     `TIME'
     `MONEY'    `DECIMAL(12,2)'. A fixed-point value with two decimals.

*Index Creation*

`MySQL'
     Indexes may be specified at table creation time with the `CREATE
     TABLE' statement.

`mSQL'
     Indexes must be created after the table has been created, with
     separate `CREATE INDEX' statements.

*To Insert a Unique Identifier into a Table*

`MySQL'
     Use `AUTO_INCREMENT' as a column type specifier.  *Note
     `mysql_insert_id()': mysql_insert_id.

`mSQL'
     Create a `SEQUENCE' on a table and select the `_seq' column.

*To Obtain a Unique Identifier for a Row*

`MySQL'
     Add a `PRIMARY KEY' or `UNIQUE' key to the table and use this.
     New in Version 3.23.11: If the `PRIMARY' or `UNIQUE' key consists
     of only one column and this is of type integer, one can also refer
     to it as `_rowid'.

`mSQL'
     Use the `_rowid' column. Observe that `_rowid' may change over time
     depending on many factors.

*To Get the Time a Column Was Last Modified*

`MySQL'
     Add a `TIMESTAMP' column to the table. This column is
     automatically set to the current date and time for `INSERT' or
     `UPDATE' statements if you don't give the column a value or if you
     give it a `NULL' value.

`mSQL'
     Use the `_timestamp' column.

*`NULL' Value Comparisons*

`MySQL'
     MySQL follows ANSI SQL, and a comparison with `NULL' is always
     `NULL'.

`mSQL'
     In `mSQL', `NULL = NULL' is TRUE.  You must change `=NULL' to `IS
     NULL' and `<>NULL' to `IS NOT NULL' when porting old code from
     `mSQL' to MySQL.

*String Comparisons*

`MySQL'
     Normally, string comparisons are performed in case-independent
     fashion with the sort order determined by the current character
     set (ISO-8859-1 Latin1 by default).  If you don't like this,
     declare your columns with the `BINARY' attribute, which causes
     comparisons to be done according to the ASCII order used on the
     MySQL server host.

`mSQL'
     All string comparisons are performed in case-sensitive fashion with
     sorting in ASCII order.

*Case-insensitive Searching*

`MySQL'
     `LIKE' is a case-insensitive or case-sensitive operator, depending
     on the columns involved. If possible, MySQL uses indexes if the
     `LIKE' argument doesn't start with a wild-card character.

`mSQL'
     Use `CLIKE'.

*Handling of Trailing Spaces*

`MySQL'
     Strips all spaces at the end of `CHAR' and `VARCHAR' columns. Use
     a `TEXT' column if this behavior is not desired.

`mSQL'
     Retains trailing space.

*`WHERE' Clauses*

`MySQL'
     MySQL correctly prioritizes everything (`AND' is evaluated before
     `OR'). To get `mSQL' behavior in MySQL, use parentheses (as shown
     in an example below).

`mSQL'
     Evaluates everything from left to right. This means that some
     logical calculations with more than three arguments cannot be
     expressed in any way. It also means you must change some queries
     when you upgrade to MySQL. You do this easily by adding
     parentheses.  Suppose you have the following `mSQL' query:
          mysql> SELECT * FROM table WHERE a=1 AND b=2 OR a=3 AND b=4;
     To make MySQL evaluate this the way that `mSQL' would, you must
     add parentheses:
          mysql> SELECT * FROM table WHERE (a=1 AND (b=2 OR (a=3 AND (b=4))));

*Access Control*

`MySQL'
     Has tables to store grant (permission) options per user, host, and
     database. *Note Privileges::.

`mSQL'
     Has a file `mSQL.acl' in which you can grant read/write privileges
     for users.

How MySQL Compares to PostgreSQL
--------------------------------

When reading the following, please note that both products are
continually evolving.  We at MySQL AB and the PostgreSQL developers are
both working on making our respective database as good as possible, so
we are both a serious choice to any commercial database.

The following comparison is made by us at MySQL AB.  We have tried to be
as accurate and fair as possible, but because we don't have a full
knowledge of all PostgreSQL features while we know MySQL througly, we
may have got some things wrong.  We will however correct these when they
come to our attention.

We would first like to note that PostgreSQL and MySQL are both widely
used products, but with different design goals, even if we are both
striving to be ANSI SQL compatible.  This means that for some
applications MySQL is more suited, while for others PostgreSQL is more
suited.  When choosing which database to use, you should first check if
the database's feature set satisfies your application.  If you need raw
speed, MySQL is probably your best choice.  If you need some of the
extra features that only PostgreSQL can offer, you should use
`PostgreSQL'.

MySQL and PostgreSQL development strategies
...........................................

When adding things to MySQL we take pride to do an optimal, definite
solution.  The code should be so good that we shouldn't have any need to
change it in the foreseeable future.  We also do not like to sacrifice
speed for features but instead will do our utmost to find a solution
that will give maximal throughput.  This means that development will
take a little longer, but the end result will be well worth this.  This
kind of development is only possible because all server code are
checked by one of a few (currently two) persons before it's included in
the MySQL server.

We at MySQL AB believe in frequent releases to be able to push out new
features quickly to our users.  Because of this we do a new small
release about every three weeks, and a major branch every year.  All
releases are throughly tested with our testing tools on a lot of
different platforms.

PostgreSQL is based on a kernel with lots of contributors. In this setup
it makes sense to prioritize adding a lot of new features, instead of
implementing them optimally, because one can always optimize things
later if there arises a need for this.

Another big difference between MySQL and PostgreSQL is that nearly all
of the code in the MySQL server are coded by developers that are
employed by MySQL AB and are still working on the server code. The
exceptions are the transaction engines, and the regexp library.

This is in sharp contrast to the PostgreSQL code where the majority of
the code is coded by a big group of people with different backgrounds.
It was only recently that the PostgreSQL developers announced that their
current developer group had finally had time to take a look at all the
code in the current PostgreSQL release.

Both of the above development methods has it's own merits and drawbacks.
We here at MySQL AB think of course that our model is better because our
model gives better code consistency, more optimal and reusable code, and
in our opinion, fewer bugs.  Because we are the authors of the MySQL
server code, we are better able to coordinate new features and releases.

Featurewise Comparison of MySQL and PostgreSQL
..............................................

On the crash-me (http://www.mysql.com/information/crash-me.php) page
you can find a list of those database constructs and limits that one
can detect automatically with a program.  Note however that a lot of
the numerical limits may be changed with startup options for respective
database.  The above web page is however extremely useful when you want
to ensure that your applications works with many different databases or
when you want to convert your application from one datbase to another.

MySQL offers the following advantages over PostgreSQL:

   * `MySQL' is generally much faster than PostgreSQL.  *Note
     MySQL-PostgreSQL benchmarks::.

   * MySQL has a much larger user base than PostgreSQL, therefor the
     code is more tested and has historically been more stable than
     PostgreSQL.  MySQL is the much more used in production
     environments than PostgreSQL, mostly thanks to that MySQL AB,
     formerly TCX DataKonsult AB, has provided top quality commercial
     support for MySQL from the day it was released, whereas until
     recently PostgreSQL was unsupported.

   * MySQL works better on Windows than PostgreSQL does.  MySQL runs as
     a native Windows application (a service on NT/Win2000/WinXP), while
     PostgreSQL is run under the cygwin emulation.  We have heard that
     PostgreSQL is not yet that stable on Windows but we haven't been
     able to verify this ourselves.

   * MySQL has more APIs to other languages and is supported by more
     existing programs than PostgreSQL.  *Note Contrib::.

   * MySQL works on 24/7 heavy duty systems.  In most circumstances you
     never have to run any cleanups on MySQL.  PostgreSQL doesn't yet
     support 24/7 systems because you have to run `VACUUM()' once in a
     while to reclaim space from `UPDATE' and `DELETE' commands and to
     perform statistics analyzes that are critical to get good
     performance with PostgreSQL.  `VACUUM()' is also needed after
     adding a lot of new rows to a table.  On a busy system with lots
     of changes, `VACUUM()' must be run very frequently, in the worst
     cases even many times a day.  During the `VACUUM()' run, which may
     take hours if the database is big, the database is from a
     production standpoint, practically dead.  The PostgreSQL team has
     fixing this on their TODO, but we assume that this is not an easy
     thing to fix permanently.

   * A working, tested replication feature used by sites like:
        - Yahoo Finance (`http://finance.yahoo.com')

        - Mobile.de (`http://www.mobile.de/')

        - Slashdot (`http://www.slashdot.org')

   * Included in the MySQL distribution are two different testing
     suites, `mysql-test-run' and crash-me
     (http://www.mysql.com/information/crash-me.php), as well as a
     benchmark suite.  The test system is actively updated with code to
     test each new feature and almost all reproduceable bugs that have
     come to our attention.  We test MySQL with these on a lot of
     platforms before every release.  These tests are more
     sophisticated than anything we have seen from PostgreSQL, and they
     ensures that the MySQL is kept to a high standard.

   * There are far more books in print about MySQL than about
     PostgreSQL.  O'Reilly, Sams, Que, and New Riders are all major
     publishers with books about MySQL.  All MySQL features are also
     documented in the MySQL on-line manual, because when a new feature
     is implemented, the MySQL developers are required to document it
     before it's included in the source.

   * MySQL supports more of the standard ODBC functions than
     `PostgreSQL'.

   * MySQL has a much more sophisticated `ALTER TABLE'.

   * MySQL has support for tables without transactions for applications
     that need all speed they can get. The tables may be memory based,
     `HEAP' tables or disk based `MyISAM'.  *Note Table types::.

   * MySQL has support for two different table handlers that support
     transactions, `BerkeleyDB' and `InnoDB'.  Because every
     transaction engine performs differently under different
     conditions, this gives the application writer more options to find
     an optimal solution for his or her setup.  *Note Table types::.

   * `MERGE' tables gives you a unique way to instantly make a view over
     a set of identical tables and use these as one.  This is perfect
     for systems where you have log files that you order for example by
     month.  *Note MERGE::.

   * The option to compress read-only tables, but still have direct
     access to the rows in the table, gives you better performance by
     minimizing disk reads.  This is very useful when you are archiving
     things.  *Note myisampack::.

   * MySQL has internal support for fulltext search. *Note Fulltext
     Search::.

   * You can access many databases from the same connection (depending
     of course on your privileges).

   * MySQL is coded from the start to be multi-threaded while
     PostgreSQL uses processes.  Context switching and access to common
     storage areas is much faster between threads than between separate
     processes, this gives MySQL a big speed advantage in multi-user
     applications and also makes it easier for MySQL to take full
     advantage of symmetric multiprocessor (SMP) systems.

   * MySQL has a much more sophisticated privilege system than
     PostgreSQL.  While PostgreSQL only supports `INSERT', `SELECT', and
     `UPDATE/DELETE' grants per user on a database or a table, MySQL
     allows you to define a full set of different privileges on
     database, table and column level.  MySQL also allows you to
     specify the privilege on host and user combinations.  *Note
     GRANT::.

   * MySQL supports a compressed client/server protocol which improves
     performance over slow links.

   * MySQL employs a "table handler" concept, and is the only relational
     database we know of built around this concept.  This allows
     different low-level table types to be swapped into the SQL engine,
     and each table type can be optimized for different performance
     characteristics.

   * All MySQL table types (except *InnoDB*) are implemented as files
     (one table per file), which makes it really easy to backup, move,
     delete and even symlink databases and tables, even when the server
     is down.

   * Tools to repair and optimize *MyISAM* tables (the most common
     MySQL table type).  A repair tool is only needed when a physical
     corruption of a data file happens, usually from a hardware
     failure.  It allows a majority of the data to be recovered.

   * Upgrading MySQL is painless.  When you are upgrading MySQL, you
     don't need to dump/restore your data, as you have to do with most
     PostgreSQL upgrades.

Drawbacks with MySQL compared to PostgreSQL:

   * The transaction support in MySQL is not yet as well tested as
     PostgreSQL's system.

   * Because MySQL uses threads, which are not yet flawless on many
     OSes, one must either use binaries from
     `http://www.mysql.com/downloads', or carefully follow our
     instructions on
     `http://www.mysql.com/doc/I/n/Installing_source.html' to get an
     optimal binary that works in all cases.

   * Table locking, as used by the non-transactional `MyISAM' tables, is
     in many cases faster than page locks, row locks or versioning.  The
     drawback however is that if one doesn't take into account how table
     locks work, a single long-running query can block a table for
     updates for a long time. This can usable be avoided when designing
     the application.  If not, one can always switch the trouble table
     to use one of the transactional table types. *Note Table locking::.

   * With UDF (user defined functions) one can extend MySQL with both
     normal SQL functions and aggregates, but this is not yet as easy
     or as flexible as in PostgreSQL.  *Note Adding functions::.

   * Updates that run over multiple tables is harder to do in MySQL.
     This will, however, be fixed in MySQL 4.0 with multi-table `UPDATE'
     and in MySQL 4.1 with subselects.  In MySQL 4.0 one can use
     multi-table deletes to delete from many tables at the same time.
     *Note DELETE::.

PostgreSQL currently offers the following advantages over MySQL:

Note that because we know the MySQL road map, we have included in the
following table the version when MySQL should support this feature.
Unfortunately we couldn't do this for previous comparison, because we
don't know the PostgreSQL roadmap.

*Feature*                                          *MySQL version*
Subselects                                         4.1
Foreign keys                                       4.0 and 4.1
Views                                              4.2
Stored procedures                                  4.1
Extensible type system                             Not planned
Unions                                             4.0
Full join                                          4.0 or 4.1
Triggers                                           4.1
Constrainst                                        4.1
Cursors                                            4.1 or 4.2
Extensible index types like R-trees                R-trees are planned
                                                   for 4.2
Inherited tables                                   Not planned

Other reasons to use PostgreSQL:

   * Standard usage in PostgreSQL is closer to ANSI SQL in some cases.

   * One can speed up PostgreSQL by coding things as stored procedures.

   * For geographical data, R-TREES makes PostgreSQL better than MySQL.

   * The PostgreSQL optimizer can do some optimization that the current
     MySQL optimizer can't do.  Most notable is doing joins when you
     don't have the proper keys in place and doing a join where you are
     using different keys combined with OR.  The MySQL benchmark suite
     at `http://www.mysql.com/information/benchmarks.html' shows you
     what kind of constructs you should watch out for when using
     different databases.

   * PostgreSQL has a bigger team of developers that contribute to the
     server.

Drawbacks with PostgreSQL compared to MySQL:

   * `VACUUM()' makes PostgreSQL hard to use in a 24/7 environment.

   * Only transactional tables.

   * Much slower `INSERT', `DELETE', and `UPDATE'.

For a complete list of drawbacks, you should also examine the first
table in this section.

Benchmarking MySQL and PostgreSQL
.................................

The only open source benchmark that we know of that can be used to
benchmark MySQL and PostgreSQL (and other databases) is our own. It can
be found at `http://www.mysql.com/information/benchmarks.html'.

We have many times asked the PostgreSQL developers and some PostgreSQL
users to help us extend this benchmark to make it the definitive
benchmark for databases, but unfortunately we haven't gotten any
feedback for this.

We the MySQL developers have, because of this, spent a lot of hours to
get maximum performance from PostgreSQL for the benchmarks, but because
we don't know PostgreSQL intimately, we are sure that there are things
that we have missed.  We have on the benchmark page documented exactly
how we did run the benchmark so that it should be easy for anyone to
repeat and verify our results.

The benchmarks are usually run with and without the `--fast' option.
When run with `--fast' we are trying to use every trick the server can
do to get the code to execute as fast as possible.  The idea is that the
normal run should show how the server would work in a default setup and
the `--fast' run shows how the server would do if the application
developer would use extensions in the server to make his application run
faster.

When running with PostgreSQL and `--fast' we do a `VACUUM()' after
every major table `UPDATE' and `DROP TABLE' to make the database in
perfect shape for the following `SELECT's.  The time for `VACUUM()' is
measured separately.

When running with PostgreSQL 7.1.1 we could, however, not run with
`--fast' because during the `INSERT' test, the postmaster (the
PostgreSQL deamon) died and the database was so corrupted that it was
impossible to restart postmaster.   After this happened twice, we
decided to postpone the `--fast' test until next PostgreSQL release.
The details about the machine we run the benchmark can be found on the
benchmark page.

Before going to the other benchmarks we know of, we would like to give
some background on benchmarks:

It's very easy to write a test that shows ANY database to be best
database in the world, by just restricting the test to something the
database is very good at and not test anything that the database is not
good at.  If one after this publishes the result with a single figure,
things are even easier.

This would be like us measuring the speed of MySQL compared to
PostgreSQL by looking at the summary time of the MySQL benchmarks on
our web page.  Based on this MySQL would be more than 40 times faster
than PostgreSQL, something that is of course not true.  We could make
things even worse by just taking the test where PostgreSQL performs
worst and claim that MySQL is more than 2000 times faster than
PostgreSQL.

The case is that MySQL does a lot of optimizations that PostgreSQL
doesn't do. This is of course also true the other way around.  An SQL
optimizer is a very complex thing, and a company could spend years on
just making the optimizer faster and faster.

When looking at the benchmark results you should look for things that
you do in your application and just use these results to decide which
database would be best suited for your application.  The benchmark
results also shows things a particular database is not good at and
should give you a notion about things to avoid and what you may have to
do in other ways.

We know of two benchmark tests that claims that PostgreSQL performs
better than MySQL.  These both where multi-user tests, a test that we
here at MySQL AB haven't had time to write and include in the benchmark
suite, mainly because it's a big task to do this in a manner that is
fair against all databases.

One is the benchmark paid for by Great Bridge, which you can read about
at: `http://www.greatbridge.com/about/press.php?content_id=4'.

This is the probably worst benchmark we have ever seen anyone conduct.
This was not only tuned to only test what PostgreSQL is absolutely best
at, it was also totally unfair against every other database involved in
the test.

*NOTE*:  We know that not even some of the main PostgreSQL developers
did like the way Great Bridge conducted the benchmark, so we don't
blame them for the way the benchmark was made.

This benchmark has been condemned in a lot of postings and newsgroups so
we will here just shortly repeat some things that where wrong with it.

   * The tests were run with an expensive commercial tool, that makes it
     impossible for an open source company like us to verify the
     benchmarks, or even check how the benchmarks were really done.
     The tool is not even a true benchmark tool, but an
     application/setup testing tool.  To refer this as a "standard"
     benchmark tool is to stretch the truth a long way.

   * Great Bridge admitted that they had optimized the PostgreSQL
     database (with `VACUUM()' before the test) and tuned the startup
     for the tests, something they hadn't done for any of the other
     databases involved.  To say "This process optimizes indexes and
     frees up disk space a bit.  The optimized indexes boost
     performance by some margin."  Our benchmarks clearly indicate that
     the difference in running a lot of selects on a database with and
     without `VACUUM()' can easily differ by a factor of ten.

   * The test results were also strange.  The AS3AP test documentation
     mentions that the test does "selections, simple joins, projections,
     aggregates, one-tuple updates, and bulk updates".

     PostgreSQL is good at doing `SELECT's and `JOIN's (especially
     after a `VACUUM()'), but doesn't perform as well on `INSERT's or
     `UPDATE's.  The benchmarks seem to indicate that only `SELECT's
     were done (or very few updates).  This could easily explain they
     good results for PostgreSQL in this test.  The bad results for
     MySQL will be obvious a bit down in this document.

   * They did run the so-called benchmark from a Windows machine
     against a Linux machine over ODBC, a setup that no normal database
     user would ever do when running a heavy multi-user application.
     This tested more the ODBC driver and the Windows protocol used
     between the clients than the database itself.

   * When running the database against Oracle and MS-SQL (Great Bridge
     has indirectly indicated that the databases they used in the
     test), they didn't use the native protocol but instead ODBC.
     Anyone that has ever used Oracle knows that all real application
     uses the native interface instead of ODBC.  Doing a test through
     ODBC and claiming that the results had anything to do with using
     the database in a real-world situation can't be regarded as fair.
     They should have done two tests with and without ODBC to provide
     the right facts (after having got experts to tune all involved
     databases of course).

   * They refer to the TPC-C tests, but they don't mention anywhere
     that the test they did was not a true TPC-C test and they were not
     even allowed to call it a TPC-C test.  A TPC-C test can only be
     conducted by the rules approved by the TPC Council
     (`http://www.tpc.org'). Great Bridge didn't do that.  By doing
     this they have both violated the TPC trademark and miscredited
     their own benchmarks.  The rules set by the TPC Council are very
     strict to ensure that no one can produce false results or make
     unprovable statements.  Apparently Great Bridge wasn't interested
     in doing this.

   * After the first test, we contacted Great Bridge and mentioned to
     them some of the obvious mistakes they had done with MySQL:

        - Running with a debug version of our ODBC driver

        - Running on a Linux system that wasn't optimized for threads

        - Using an old MySQL version when there was a recommended newer
          one available

        - Not starting MySQL with the right options for heavy
          multi-user use (the default installation of MySQL is tuned
          for minimal resource use).

     Great Bridge did run a new test, with our optimized ODBC driver
     and with better startup options for MySQL, but refused to either
     use our updated glibc library or our standard binary (used by 80%
     of our users), which was statically linked with a fixed glibc
     library.

     According to what we know, Great Bridge did nothing to ensure that
     the other databases were set up correctly to run well in their test
     environment.  We are sure however that they didn't contact Oracle
     or Microsoft to ask for their advice in this matter ;)

   * The benchmark was paid for by Great Bridge, and they decided to
     publish only partial, chosen results (instead of publishing it
     all).

Tim Perdue, a long time PostgreSQL fan and a reluctant MySQL user
published a comparison on phpbuider
(http://www.phpbuilder.com/columns/tim20001112.php3).

When we became aware of the comparison, we phoned Tim Perdue about this
because there were a lot of strange things in his results.  For example,
he claimed that MySQL had a problem with five users in his tests, when
we know that there are users with similar machines as his that are using
MySQL with 2000 simultaneous connections doing 400 queries per second.
(In this case the limit was the web bandwidth, not the database.)

It sounded like he was using a Linux kernel that either had some
problems with many threads, such as kernels before 2.4, which had a
problem with many threads on multi-CPU machines. We have documented in
this manual how to fix this and Tim should be aware of this problem.

The other possible problem could have been an old glibc library and
that Tim didn't use a MySQL binary from our site, which is linked with
a corrected glibc library, but had compiled a version of his own with.
In any of the above cases, the symptom would have been exactly what Tim
had measured.

We asked Tim if we could get access to his data so that we could repeat
the benchmark and if he could check the MySQL version on the machine to
find out what was wrong and he promised to come back to us about this.
He has not done that yet.

Because of this we can't put any trust in this benchmark either :(

Over time things also changes and the above benchmarks are not that
relevant anymore.  MySQL now have a couple of different table handlers
with different speed/concurrency tradeoffs.  *Note Table types::. It
would be interesting to see how the above tests would run with the
different transactional table types in MySQL.  PostgreSQL has of course
also got new features since the test was made.  As the above test are
not publicly available there is no way for us to know how the database
would preform in the same tests today.

Conclusion:

The only benchmarks that exist today that anyone can download and run
against MySQL and PostgreSQL is the MySQL benchmarks.  We here at MySQL
believe that open source databases should be tested with open source
tools!  This is the only way to ensure that no one does tests that
nobody can reproduce and use this to claim that a database is better
than another.  Without knowing all the facts it's impossible to answer
the claims of the tester.

The thing we find strange is that every test we have seen about
PostgreSQL, that is impossible to reproduce, claims that PostgreSQL is
better in most cases while our tests, which anyone can reproduce,
clearly shows otherwise.  With this we don't want to say that PostgreSQL
isn't good at many things (it is!) or that it isn't faster than MySQL
under certain conditions.  We would just like to see a fair test where
they are very good so that we could get some friendly competition going!

For more information about our benchmarks suite *Note MySQL
Benchmarks::.

We are working on an even better benchmark suite, including multi user
tests, and a better documentation of what the individual tests really
do and how to add more tests to the suite.

MySQL and the future (The TODO)
===============================

This appendix lists the features that we plan to implement in MySQL.

Everything in this list is approximately in the order it will be done.
If you want to affect the priority order, please register a license or
support us and tell us what you want to have done more quickly. *Note
Licensing and Support::.

The plan is that we in the future will support the full ANSI SQL99
standard, but with a lot of useful extensions. The challenge is to do
this without sacrifying the speed or compromise the code.

Things that should be in 4.0
----------------------------

We have now shifted development to MySQL Version 4.0.  Most of the basic
things we want to have in 4.0 is already done.  The target is to quickly
implement the rest of the following features and then shift development
to MySQL 4.1.

The news section for 4.0 includes a list of the features we have already
implemented in the 4.0 tree. *Note News-4.0.x::.

   * Allow users to change startup options without taking down the
     server.

   * Fail safe replication.

   * More functions for full-text search.  *Note Fulltext Features to
     Appear in MySQL 4.0::.

   * New key cache

   * New table definition file format (`.frm' files) This will enable us
     to not run out of bits when adding more table options.  One will
     still be able to use the old `.frm' file format with 4.0.  All
     newly created tables will, however, use the new format.

     The new file format will enable us to add new column types, more
     options for keys and `FOREIGN KEY' support.

   * Replication should work with `RAND()' and user variables `@var'.

   * Online backup with very low performance penalty.  The online
     backup will make it easy to add a new replication slave without
     taking down the master.  Allow `DELETE' on `MyISAM' tables to use
     the record cache.  To do this, we need to update the threads
     record cache when we update the `.MYD' file.

   * Character set casts and syntax for handling multiple character
     sets.

   * Help for all commands from the client.

   * `SHOW COLUMNS FROM table_name' (used by `mysql' client to allow
     expansions of column names) should not open the table, but only the
     definition file. This will require less memory and be much faster.

   * When using `SET CHARACTER SET' we should translate the whole query
     at once and not only strings. This will enable users to use the
     translated characters in database, table and column names.

   * Add a portable interface over `gethostbyaddr_r()' so that we can
     change `ip_to_hostname()' to not block other threads while doing
     DNS lookups.

   * Add `record_in_range()' method to `MERGE' tables to be able to
     choose the right index when there is many to choose from. We should
     also extend the info interface to get the key distribution for
     each index, of `analyze' is run on all sub tables.

   * `SET SQL_DEFAULT_TABLE_TYPE=[MyISAM | INNODB | BDB | HEAP]'.

Things that must be done in the real near future
------------------------------------------------

   * Subqueries.  `select id from t where grp in (select grp from g
     where u > 100)'

   * Atomic multi-table updates, eg `update items,month set
     items.price=month.price where items.id=month.id;';

   * Derived tables.
          select a.col1, b.col2 from (select max(col1) as col1 from root_table ) a,
          other_table b where a.col1=b.col1

     This could be done by automatically creating temporary tables for
     the derived tables for the duration of the query.

   * Add `PREPARE' of statements and sending of parameters to `mysqld'.

   * Extend the server/client protocol to support warnings.

   * Add options to the server/protocol protocol to get progress notes
     for long running commands.

   * Add database and real table name (in case of alias) to the
     MYSQL_FIELD structure.

   * Don't allow more than a defined number of threads to run MyISAM
     recover at the same time.

   * Change `INSERT ... SELECT' to optionally use concurrent inserts.

   * Implement `RENAME DATABASE'. To make this safe for all table
     handlers, it should work as follows:
        * Create the new database.

        * For every table do a rename of the table to another database,
          as we do with the `RENAME' command.

        * Drop the old database.

   * Return the original field types() when doing `SELECT MIN(column)
     ... GROUP BY'.

   * Multiple result sets.

   * Change the protocol to allow binary transfer of values. To do this
     efficiently, we need to add an API to allow binding of variables.

   * Add `PREPARE' of statements and sending of parameters to `mysqld'.

   * Make it possible to specify `long_query_time' with a granularity
     in microseconds.

   * Add a configurable prompt to the `mysql' command line client, with
     options like database in use, time and date...

   * Add range checking to `MERGE' tables.

   * Link the `myisampack' code into the server.

   * Port of MySQL to BeOS.

   * Port of the MySQL clients to LynxOS.

   * Add a temporary key buffer cache during `INSERT/DELETE/UPDATE' so
     that we can gracefully recover if the index file gets full.

   * If you perform an `ALTER TABLE' on a table that is symlinked to
     another disk, create temporary tables on this disk.

   * Implement a `DATE/DATETIME' type that handles time zone information
     properly, so that dealing with dates in different time zones is
     easier.

   * FreeBSD and MIT-pthreads;  Do sleeping threads take CPU?

   * Check if locked threads take any CPU.

   * Fix configure so that one can compile all libraries (like `MyISAM')
     without threads.

   * Add an option to periodically flush key pages for tables with
     delayed keys if they haven't been used in a while.

   * Allow join on key parts (optimization issue).

   * `INSERT SQL_CONCURRENT' and `mysqld --concurrent-insert' to do a
     concurrent insert at the end of the file if the file is
     read-locked.

   * Remember `FOREIGN' key definitions in the `.frm' file.

   * Cascading `DELETE'

   * Server side cursors.

   * Check if `lockd' works with modern Linux kernels; If not, we have
     to fix `lockd'!  To test this, start `mysqld' with
     `--enable-locking' and run the different fork* test suits. They
     shouldn't give any errors if `lockd' works.

   * Allow SQL variables in `LIMIT', like in `LIMIT @a,@b'.

   * Allow update of variables in `UPDATE' statements. For example:
     `UPDATE TABLE foo SET @a=a+b,a=@a, b=@a+c'

   * Change when user variables are updated so that one can use them
     with `GROUP BY', as in the following example: `SELECT id,
     @a:=count(*), sum(sum_col)/@a FROM table_name GROUP BY id'.

   * Don't add automatic `DEFAULT' values to columns.  Give an error
     when using an `INSERT' that doesn't contain a column that doesn't
     have a `DEFAULT'.

   * Caching of queries and results. This should be done as a separated
     module that examines each query and if this is query is in the
     cache the cached result should be returned.  When one updates a
     table one should remove as few queries as possible from the cache.
     This should give a big speed bost on machines with much RAM where
     queries are often repeated (like WWW applications).  One idea
     would be to only cache queries of type: `SELECT CACHED ...'

   * Fix `libmysql.c' to allow two `mysql_query()' commands in a row
     without reading results or give a nice error message when one does
     this.

   * Optimize `BIT' type to take 1 bit (now `BIT' takes 1 char).

   * Check why MIT-pthreads `ctime()' doesn't work on some FreeBSD
     systems.

   * Add an `IMAGE' option to `LOAD DATA INFILE' to not update
     `TIMESTAMP' and `AUTO_INCREMENT' fields.

   * Added `LOAD DATE INFILE.. UPDATE' syntax.
        * For tables with primary keys, if the data contains the
          primary key, entries matching that primary key are updated
          from the remainder of the columns. However, columns MISSING
          from the incoming data feed are not touched.

        * For tables tables with primary keys that are missing some
          part of the key in the incoming data stream, or that have no
          primary key, the feed is treated as a `LOAD DATA INFILE ...
          REPLACE INTO' is now.

   * Make `LOAD DATA INFILE' understand syntax like:
          LOAD DATA INFILE 'file_name.txt' INTO TABLE tbl_name
          TEXT_FIELDS (text_field1, text_field2, text_field3)
          SET table_field1=concatenate(text_field1, text_field2), table_field3=23
          IGNORE text_field3
          
          This can be used to skip over extra columns in the text file, or update columns
          based on expressions of the read data...

   * `LOAD DATA INFILE 'file_name' INTO TABLE 'table_name' ERRORS TO
     err_table_name' This would cause any errors and warnings to be
     logged into the err_table_name table. That table would have a
     structure like:

          line_number    - line number in data file
          error_message  - the error/warning message
          and maybe
          data_line      - the line from the data file

   * Add true `VARCHAR' support (There is already support for this in
     MyISAM).

   * Automatic output from `mysql' to netscape.

   * `LOCK DATABASES'. (with various options)

   * Change sort to allocate memory in "hunks" to get better memory
     utilization.

   * `DECIMAL' and `NUMERIC' types can't read exponential numbers;
     `Field_decimal::store(const char *from,uint len)' must be recoded
     to fix this.

   * Fix `mysql.cc' to do fewer `malloc()' calls when hashing field
     names.

   * Functions: ADD_TO_SET(value,set) and REMOVE_FROM_SET(value,set)

   * Add use of `t1 JOIN t2 ON ...' and `t1 JOIN t2 USING ...'
     Currently, you can only use this syntax with `LEFT JOIN'.

   * Add full support for `unsigned long long' type.

   * Many more variables for `show status'.  Counts for:
     `INSERT'/`DELETE'/`UPDATE' statements. Records reads and updated.
     Selects on 1 table and selects with joins.  Mean number of tables
     in select. Number of `ORDER BY' and `GROUP BY' queries.

   * If you abort `mysql' in the middle of a query, you should open
     another connection and kill the old running query.  Alternatively,
     an attempt should be made to detect this in the server.

   * Add a handler interface for table information so you can use it as
     a system table. This would be a bit slow if you requested
     information about all tables, but very flexible.  `SHOW INFO FROM
     tbl_name' for basic table information should be implemented.

   * Add support for UNICODE.

   * `NATURAL JOIN' and `UNION JOIN'

   * Allow `select a from crash_me left join crash_me2 using (a)'; In
     this case a is assumed to come from the crash_me table.

   * Fix that `ON' and `USING' works with the `JOIN' join type.

   * Oracle like `CONNECT BY PRIOR ...' to search hierarchy structures.

   * `RENAME DATABASE'

   * `mysqladmin copy database new-database'. - Requires COPY command
     to be added to `mysqld'

   * Processlist should show number of queries/thread.

   * `SHOW HOSTS' for printing information about the hostname cache.

   * `DELETE' and `REPLACE' options to the `UPDATE' statement (this
     will delete rows when one gets a duplicate key error while
     updating).

   * Change the format of `DATETIME' to store fractions of seconds.

   * Add all missing ANSI92 and ODBC 3.0 types.

   * Change table names from empty strings to `NULL' for calculated
     columns.

   * Don't use 'Item_copy_string' on numerical values to avoid
     number->string->number conversion in case of: `SELECT
     COUNT(*)*(id+0) FROM table_name GROUP BY id'

   * Make it possible to use the new GNU regexp library instead of the
     current one (The GNU library should be much faster than the old
     one).

   * Change that `ALTER TABLE' doesn't abort clients that executes
     `INSERT DELAYED'.

   * Fix that when columns referenced in an `UPDATE' clause contains
     the old values before the update started.

   * `myisamchk', `REPAIR' and `OPTIMIZE TABLE' should be able to
     handle cases where the data and/or index files are symbolic links.

   * Add simulation of `pread()'/`pwrite()' on Windows to enable
     concurrent inserts.

   * A logfile analyzer that could parsed out information about which
     tables are hit most often, how often multi-table joins are
     executed, etc.  It should help users identify areas or table
     design that could be optimized to execute much more efficient
     queries.

   * Add `SUM(DISTINCT)'

   * Add `ANY()',`EVERY()' and `SOME()' group functions. In ANSI SQL
     these only works on boolean columns, but we can extend these to
     work on any columns/expressions by applying: value == 0 -> FALSE
     and value <> 0 -> TRUE.

   * Fix that the type for `MAX(column)' is the same as the column type.
          create table t1 (a DATE);
          insert into t1 values (now());
          create table t2 select max(a) from t1;
          show columns from t2;

   * Come up with a nice syntax for a statement that will `UPDATE' the
     row if it exists and `INSERT' a new row if the row didn't exist.
     (Like `REPLACE' works with `INSERT' / `DELETE')

Things that have to be done sometime
------------------------------------

   * Implement function: `get_changed_tables(timeout,table1,table2,...)'

   * Change reading through tables to use memmap when possible. Now only
     compressed tables use memmap.

   * Add a new privilege *'Show_priv'* for `SHOW' commands.

   * Make the automatic timestamp code nicer.  Add timestamps to the
     update log with `SET TIMESTAMP=#;'

   * Use read/write mutex in some places to get more speed.

   * Full foreign key support. One probably wants to implement a
     procedural language first.

   * Simple views (first on one table, later on any expression).

   * Automatically close some tables if a table, temporary table or
     temporary files gets error 23 (not enough open files).

   * When one finds a field=#, change all occurrences of field to #.
     Now this is only done for some simple cases.

   * Change all const expressions with calculated expressions if
     possible.

   * Optimize key = expression. At the moment only key = field or key =
     constant are optimized.

   * Join some of the copy functions for nicer code.

   * Change `sql_yacc.yy' to an inline parser to reduce its size and get
     better error messages (5 days).

   * Change the parser to use only one rule per different number of
     arguments in function.

   * Use of full calculation names in the order part. (For ACCESS97)

   * `UNION', `MINUS', `INTERSECT' and `FULL OUTER JOIN'.  (Currently
     only `LEFT OUTER JOIN' is supported)

   * Allow `UNIQUE' on fields that can be `NULL'.

   * `SQL_OPTION MAX_SELECT_TIME=#' to put a time limit on a query.

   * Make the update log to a database.

   * Negative `LIMIT' to retrieve data from the end.

   * Alarm around client connect/read/write functions.

   * Please note the changes to `safe_mysqld': according to FSSTND
     (which Debian tries to follow) PID files should go into
     `/var/run/<progname>.pid' and log files into `/var/log'. It would
     be nice if you could put the "DATADIR" in the first declaration of
     "pidfile" and "log", so the placement of these files can be
     changed with a single statement.

   * Allow a client to request logging.

   * Add use of `zlib()' for `gzip'-ed files to `LOAD DATA INFILE'.

   * Fix sorting and grouping of `BLOB' columns (partly solved now).

   * Stored procedures.  This is currently not regarded to be very
     important as stored procedures are not very standardized yet.
     Another problem is that true stored procedures make it much harder
     for the optimizer and in many cases the result is slower than
     before We will, on the other hand, add a simple (atomic) update
     language that can be used to write loops and such in the MySQL
     server.

   * Change to use semaphores when counting threads.  One should first
     implement a semaphore library to MIT-pthreads.

   * Don't assign a new `AUTO_INCREMENT' value when one sets a column
     to 0.  Use `NULL' instead.

   * Add full support for `JOIN' with parentheses.

   * As an alternative for one thread / connection manage a pool of
     threads to handle the queries.

   * Allow one to get more than one lock with `GET_LOCK'.  When doing
     this, one must also handle the possible deadlocks this change will
     introduce.

Time is given according to amount of work, not real time.

Some things we don't have any plans to do
-----------------------------------------

   * Nothing;  In the long run we plan to be fully ANSI 92 / ANSI 99
     compliant.

MySQL Installation
******************

This chapter describes how to obtain and install MySQL:

   * For a list of sites from which you can obtain MySQL, see *Note
     Getting MySQL: Getting MySQL.

   * To see which platforms are supported, see *Note Which OS::. Please
     note that not all supported system are equally good for running
     MySQL on them.  On some it is much more robust and efficient than
     others - see  *Note Which OS:: for details.

   * Several versions of MySQL are available in both binary and source
     distributions.  We also provide public access to our current
     source tree for those who want to see our most recent developments
     and help us test new code.  To determine which version and type of
     distribution you should use, see *Note Which version::. When in
     doubt, use the binary distribution.

   * Installation instructions for binary and source distributions are
     described in *Note Installing binary:: and *Note Installing
     source::.  Each set of instructions includes a section on
     system-specific problems you may run into.

   * For post-installation procedures, see *Note Post-installation::.
     These procedures apply whether you install MySQL using a binary or
     source distribution.

Quick Standard Installation of MySQL
====================================

Installing MySQL on Linux
-------------------------

The recommended way to install MySQL on Linux is by using an RPM file.
The MySQL RPMs are currently being built on a RedHat Version 6.2 system
but should work on other versions of Linux that support `rpm' and use
`glibc'.

If you have problems with an RPM file, for example, if you receive the
error "`Sorry, the host 'xxxx' could not be looked up'", see *Note
Binary notes-Linux::.

The RPM files you may want to use are:

   * `MySQL-VERSION.i386.rpm'

     The MySQL server.  You will need this unless you only want to
     connect to a MySQL server running on another machine.

   * `MySQL-client-VERSION.i386.rpm'

     The standard MySQL client programs. You probably always want to
     install this package.

   * `MySQL-bench-VERSION.i386.rpm'

     Tests and benchmarks. Requires Perl and msql-mysql-modules RPMs.

   * `MySQL-devel-VERSION.i386.rpm'

     Libraries and include files needed if you want to compile other
     MySQL clients, such as the Perl modules.

   * `MySQL-VERSION.src.rpm'

     This contains the source code for all of the above packages. It
     can also be used to try to build RPMs for other architectures (for
     example, Alpha or SPARC).

To see all files in an RPM package, run:
     shell> rpm -qpl MySQL-VERSION.i386.rpm

To perform a standard minimal installation, run:

     shell> rpm -i MySQL-VERSION.i386.rpm MySQL-client-VERSION.i386.rpm

To install just the client package, run:

     shell> rpm -i MySQL-client-VERSION.i386.rpm

The RPM places data in `/var/lib/mysql'. The RPM also creates the
appropriate entries in `/etc/rc.d/' to start the server automatically
at boot time.  (This means that if you have performed a previous
installation, you may want to make a copy of your previously installed
MySQL startup file if you made any changes to it, so you don't lose
your changes.)

After installing the RPM file(s), the `mysqld' daemon should be running
and you should now be able to start using MySQL.  *Note
Post-installation::.

If something goes wrong, you can find more information in the binary
installation chapter. *Note Installing binary::.

Installing MySQL on Windows
---------------------------

The following instructions apply to precompiled binary distributions.
If you download a source distribution, you will have to compile and
install it yourself.

If you don't have a copy of the MySQL distribution, you should first
download one from `http://www.mysql.com/downloads/mysql-3.23.html'.

If you plan to connect to MySQL from some other program, you will
probably also need the *MyODBC* driver. You can find this at the
*MyODBC* download page
(`http://www.mysql.com/downloads/api-myodbc.html').

To install either distribution, unzip it in some empty directory and
run the `Setup.exe' program.

By default, MySQL-Windows is configured to be installed in `C:\mysql'.
If you want to install MySQL elsewhere, install it in `C:\mysql' first,
then move the installation to where you want it.  If you do move MySQL,
you must indicate where everything is located by supplying a
`--basedir' option when you start the server.  For example, if you have
moved the MySQL distribution to `D:\programs\mysql', you must start
`mysqld' like this:

     C:\> D:\programs\mysql\bin\mysqld --basedir D:\programs\mysql

Use `mysqld --help' to display all the options that `mysqld'
understands!

With all newer MySQL versions, you can also create a `C:\my.cnf' file
that holds any default options for the MySQL server.  Copy the file
`\mysql\my-xxxxx.cnf' to `C:\my.cnf' and edit it to suit your setup.
Note that you should specify all paths with `/' instead of `\'. If you
use `\', you need to specify it twice, because `\' is the escape
character in MySQL.  *Note Option files::.

Starting with MySQL 3.23.38, the Windows distribution includes both the
normal and the *MySQL-Max* binaries.  The main benefit of using the
normal `mysqld.exe' binary is that it's a little faster and uses less
resources.

Here is a list of the different MySQL servers you can use:

`mysqld'            Compiled with full debugging and automatic memory
                   allocation checking, symbolic links, BDB and InnoDB
                   tables.
`mysqld-opt'        Optimized binary with no support for transactional
                   tables.
`mysqld-nt'         Optimized binary for NT with support for named
                   pipes. You can run this version on Win98, but in this
                   case no named pipes are created and you must have
                   TCP/IP installed.
`mysqld-max'        Optimized binary with support for symbolic links,
                   BDB and InnoDB tables.
`mysqld-max-nt'     Like `mysqld-max', but compiled with support for
                   named pipes.

All of the above binaries are optimized for the Pentium Pro processor
but should work on any Intel processor >= i386.

NOTE: If you want to use InnoDB tables, there are certain startup
options that must be specified in your `my.ini' file! *Note InnoDB
start::.

General Installation Issues
===========================

How to Get MySQL
----------------

Check the MySQL home page (http://www.mysql.com/) for information about
the current version and for downloading instructions.

Our main download mirror is located at:

`http://mirrors.sunsite.dk/mysql/'

If you are interested in becoming a MySQL mirror site, you may
anonymously rsync with: `rsync://sunsite.dk/ftp/mirrors/mysql/'.  Please
send e-mail to <webmaster@mysql.com> notifying us of your mirror to be
added to the list below.

If you have problems downloading from our main site, try using one of
the mirrors listed below.

Please report bad or out-of-date mirrors to <webmaster@mysql.com>.

*Europe:*

   *  Austria [Univ. of Technology/Vienna]  WWW
     (http://gd.tuwien.ac.at/db/mysql/) FTP
     (ftp://gd.tuwien.ac.at/db/mysql/)

   *  Belgium [BELNET]  WWW (http://mysql.belnet.be/) FTP
     (ftp://ftp.belnet.be/mirror/ftp.mysql.com/pub/mysql/)

   *  Bulgaria [online.bg/Sofia]  WWW (http://mysql.online.bg/) FTP
     (ftp://mysql.online.bg/)

   *  Czech Republic [Masaryk University in Brno]  WWW
     (http://mysql.linux.cz/index.html) FTP
     (ftp://ftp.fi.muni.cz/pub/mysql/)

   *  Czech Republic [www.sopik.cz]  WWW (http://www.mysql.cz/)

   *  Czech Republic [www.gin.cz]  WWW (http://mysql.gin.cz/) FTP
     (ftp://ftp.gin.cz/pub/MIRRORS/www.mysql.com/)

   *  Denmark [Borsen]  WWW (http://mysql.borsen.dk/)

   *  Denmark [SunSITE]  WWW (http://mirrors.sunsite.dk/mysql/) FTP
     (ftp://sunsite.dk/mirrors/mysql/)

   *  Estonia [OKinteractive]  WWW (http://mysql.mirror.ok.ee)

   *  France [mtesa.net]  WWW (http://mysql.mtesa.net/)

   *  France [fastorama.com, Chatenois]  WWW
     (http://mysql.fastorama.com/) FTP
     (ftp://ftp.fastorama.com/unix/mysql/)

   *  Finland [tonnikala.net]  WWW (http://mysql.tonnikala.org/)

   *  Finland [KPNQwest]  WWW (http://mysql.kpnqwest.fi/)

   *  France [Omegatomic]  WWW (http://mysql.omegatomic.com/)

   *  Germany [Kernelnotes.de, Bonn]  WWW
     (http://www.kernelnotes.de/mysql/) FTP
     (ftp://ftp.kernelnotes.de/pub/mirror/mysql.org/)

   *  Germany [Wolfenbuettel]  WWW
     (http://www.fh-wolfenbuettel.de/ftp/pub/database/mysql/) FTP
     (ftp://ftp.fh-wolfenbuettel.de/pub/database/mysql/)

   *  Greece [NTUA, Athens]  WWW (http://www.ntua.gr/mysql/) FTP
     (ftp://ftp.ntua.gr/pub/databases/mysql/)

   *  Hungary [Xenia]  WWW (http://mysql.sote.hu/) FTP
     (ftp://xenia.sote.hu/pub/mirrors/www.mysql.com/)

   *  Hungary [TiszaneT]  WWW (http://mysql.tiszanet.hu/) FTP
     (ftp://mysql.tiszanet.hu/pub/mirrors/mysql/)

   *  Hungary [stop.hu]  WWW (http://mysql.mirror.stop.hu/)

   *  Iceland [GM]  WWW (http://mysql.gm.is/) FTP
     (ftp://ftp.gm.is/pub/mysql/)

   *  Italy [feelinglinux.com]  WWW (http://mysql.feelinglinux.com/)

   *  Italy [Teta Srl]  WWW (http://www.teta.it/mysql/)

   *  Italy [tzone.it]  WWW (http://mysql.tzone.it/)

   *  Ireland [Esat Net]  WWW
     (http://ftp.esat.net/mirrors/download.sourceforge.net/pub/mirrors/mysql/)
     FTP
     (ftp://ftp.esat.net/mirrors/download.sourceforge.net/pub/mirrors/mysql/)

   *  Latvia [linux.lv]  FTP (ftp://ftp.linux.lv/pub/software/mysql/)

   *  Netherlands [Silverpoint]  WWW (http://mysql.silverpoint.nl/)

   *  Netherlands [Widexs BV]  WWW (http://mysql.widexs.nl/) FTP
     (ftp://mysql.widexs.nl/pub/mysql/)

   *  Netherlands [ProServe]  WWW (http://mysql.proserve.nl/)

   *  Poland [Sunsite]  WWW (http://sunsite.icm.edu.pl/mysql/) FTP
     (ftp://sunsite.icm.edu.pl/pub/unix/mysql/)

   *  Poland [ncservice.com/Gdansk]  WWW (http://mysql.service.net.pl/)

   *  Portugal [Netc]  WWW (http://ftp.netc.pt/pub/mysql/) FTP
     (ftp://ftp.netc.pt/pub/mysql/)

   *  Romania [roedu.net/Bucharest]  FTP
     (ftp://ftp.roedu.net/pub/mirrors/ftp.mysql.com/)

   *  Russia [DirectNet]  WWW (http://mysql.directnet.ru/) FTP
     (ftp://ftp.dn.ru/pub/MySQL/)

   *  Russia [Scientific Center/Chernogolovka]  FTP
     (ftp://ftp.chg.ru/pub/databases/mysql/)

   *  Sweden [Sunet]  WWW
     (http://ftp.sunet.se/pub/unix/databases/relational/mysql/) FTP
     (ftp://ftp.sunet.se/pub/unix/databases/relational/mysql/)

   *  Switzerland [Sunsite]  WWW
     (http://sunsite.cnlab-switch.ch/ftp/mirror/mysql/) FTP
     (ftp://sunsite.cnlab-switch.ch/mirror/mysql/)

   *  Turkey [proGEN]  WWW (http://mysql.progen.com.tr/)

   *  UK [PLiG/UK]  WWW (http://ftp.plig.org/pub/mysql/) FTP
     (ftp://ftp.plig.org/pub/mysql/)

   *  Ukraine [PACO]  WWW (http://mysql.paco.net.ua) FTP
     (ftp://mysql.paco.net.ua/)

   *  Ukraine [ISP Alkar Teleport/Dnepropetrovsk]  WWW
     (http://mysql.dp.ua/)

   *  Yugoslavia [bolex.co.yu]  WWW (http://mysql.boa.org.yu/) FTP
     (ftp://ftp.linux.org.yu/pub/MySQL/)


*North America:*

   *  Canada [Tryc]  WWW (http://web.tryc.on.ca/mysql/)

   *  Mexico [UNAM]  WWW (http://mysql.unam.mx/) FTP
     (ftp://mysql.unam.mx/pub/mysql/)

   *  USA [Hurricane Electric/San Jose]  WWW (http://mysql.he.net/)

   *  USA [ValueClick, Los Angeles CA]  WWW
     (http://mysql.valueclick.com/) FTP
     (ftp://mysql.valueclick.com/pub/mysql/Downloads/)

   *  USA [Wisconsin University/Wisconsin]  WWW
     (http://mirror.sit.wisc.edu/mysql/) FTP
     (ftp://mirror.sit.wisc.edu/mirrors/mysql/)

   *  USA [LinuxWired/Scottsdale, AZ]  WWW
     (http://mysql.linuxwired.net/) FTP
     (ftp://ftp.linuxwired.net/pub/mirrors/mysql/)

   *  USA [adgrafix.com/Boston, MA]  WWW (http://mysql.adgrafix.com/)

   *  USA [netNumina/Cambridge, MA]  WWW
     (http://mysql.mirrors.netnumina.com/)

   *  USA [Ahaza Systems/Seattle, WA]  WWW
     (http://mysql.mirrortree.com/) FTP
     (ftp://mysql.mirrortree.com/pub/mysql/)

   *  USA [NIXC/Vienna, VA]  WWW (http://www.nixc.net/mysql/) FTP
     (ftp://www.nixc.net/pub/mysql/)


*South America:*

   *  Argentina [bannerlandia.com]  WWW
     (http://mysql.bannerlandia.com.ar/) FTP
     (ftp://mysql.bannerlandia.com.ar/mirrors/mysql/)

   *  Chile [Vision]  WWW (http://mysql.vision.cl/)

   *  Chile [PSINet]  WWW (http://mysql.psinet.cl/) FTP
     (ftp://ftp.psinet.cl/pub/database/mysql/)

   *  Chile [Tecnoera]  WWW (http://mysql.tecnoera.com/)


*Asia:*

   *  China [linuxforum.net]  WWW
     (http://www2.linuxforum.net/mirror/mysql/)

   *  China [HKLPG/Hong Kong]  WWW (http://mysql.hklpg.org)

   *  China [Gremlins/Hong Kong]  WWW (http://mysql.gremlins.com.hk/)
     FTP (ftp://ftp.mirrors.gremlins.com.hk/mysql/)

   *  China [shellhung.org/Hong Kong]  WWW (http://mysql.shellhung.org/)
     FTP (ftp://ftp.shellhung.org/pub/Mirror/mysql/)

   *  Indonesia [incaf.net]  WWW (http://mysql.incaf.net/)

   *  Indonesia [web.id]  WWW (http://mysql.itb.web.id/) FTP
     (ftp://mysql.itb.web.id/pub/MySQL/)

   *  Japan [Soft Agency]  WWW (http://www.softagency.co.jp/MySQL)

   *  Japan [u-aizu.ac.jp/Aizu]  FTP
     (ftp://ftp.u-aizu.ac.jp/ftp/pub/dbms/mysql/mysql.com)

   *  Philippines [Ateneo de Zamboanga University]  WWW
     (http://mysql.adzu.edu.ph/)

   *  South Korea [Webiiz]  WWW (http://mysql.webiiz.com/)

   *  South Korea [PanworldNet]  WWW (http://mysql.holywar.net/)

   *  Singapore [HJC]  WWW (http://mysql.hjc.edu.sg) FTP
     (ftp://ftp.hjc.edu.sg/mysql)

   *  Taiwan [TTN]  WWW (http://mysql.ttn.net)

   *  Taiwan [nctu.edu/HsinChu]  WWW (http://mysql.nctu.edu.tw/)


*Africa:*

   *  South-Africa [Mweb]  WWW (http://www.mysql.mweb.co.za/)

   *  South Africa [The Internet Solution/Johannesburg]  FTP
     (ftp://ftp.is.co.za/linux/mysql/)


Operating Systems Supported by MySQL
------------------------------------

We use GNU Autoconf, so it is possible to port MySQL to all modern
systems with working Posix threads and a C++ compiler.  (To compile
only the client code, a C++ compiler is required but not threads.)  We
use and develop the software ourselves primarily on Sun Solaris
(Versions 2.5 - 2.7) and SuSE Linux Version 7.x.

Note that for many operating systems, the native thread support works
only in the latest versions. MySQL has been reported to compile
successfully on the following operating system/thread package
combinations:

   * AIX 4.x with native threads.  *Note IBM-AIX::.

   * Amiga.

   * BSDI 2.x with the included MIT-pthreads package.  *Note BSDI::.

   * BSDI 3.0, 3.1 and 4.x with native threads.  *Note BSDI::.

   * DEC Unix 4.x with native threads.  *Note Alpha-DEC-UNIX::.

   * FreeBSD 2.x with the included MIT-pthreads package.  *Note
     FreeBSD::.

   * FreeBSD 3.x and 4.x with native threads.  *Note FreeBSD::.

   * HP-UX 10.20 with the included MIT-pthreads package.  *Note HP-UX
     10.20::.

   * HP-UX 11.x with the native threads.  *Note HP-UX 11.x::.

   * Linux 2.0+ with LinuxThreads 0.7.1+ or `glibc' 2.0.7+.  *Note
     Linux::.

   * Mac OS X Server.  *Note Mac OS X::.

   * NetBSD 1.3/1.4 Intel and NetBSD 1.3 Alpha (Requires GNU make).
     *Note NetBSD::.

   * OpenBSD > 2.5 with native therads. OpenBSD < 2.5 with the included
     MIT-pthreads package.  *Note OpenBSD::.

   * OS/2 Warp 3, FixPack 29 and OS/2 Warp 4, FixPack 4.  *Note OS/2::.

   * SGI Irix 6.x with native threads.  *Note SGI-Irix::.

   * Solaris 2.5 and above with native threads on SPARC and x86.  *Note
     Solaris::.

   * SunOS 4.x with the included MIT-pthreads package.  *Note Solaris::.

   * SCO OpenServer with a recent port of the FSU Pthreads package.
     *Note SCO::.

   * SCO UnixWare 7.0.1.  *Note SCO Unixware::.

   * Tru64 Unix

   * Win95, Win98, NT, and Win2000.  *Note Windows::.

Note that not all platforms are suited equally well for running MySQL.
How well a certain platform is suited for a high-load mission critical
MySQL server is determined by the following factors:

   * General stability of the thread library. A platform may have
     excellent reputation otherwise, but if the thread library is
     unstable in the code that is called by MySQL, even if everything
     else is perfect, MySQL will be only as stable as the thread
     library.

   * The ability of the kernel and/or thread library to take advantage
     of *SMP* on multi-processor systems. In other words, when a process
     creates a thread, it should be possible for that thread to run on
     a different CPU than the original process.

   * The ability of the kernel and/or the thread library to run many
     threads which acquire/release a mutex over a short critical region
     frequently without excessive context switches. In other words, if
     the implementation of `pthread_mutex_lock()' is too anxious to
     yield CPU, this will hurt MySQL tremendously. If this issue is not
     taken care of, adding extra CPUs will actually make MySQL slower.

   * General file system stability/performance.

   * Ability of the file system to deal with large files at all and
     deal with them efficiently, if your tables are big.

   * Our level of expertise here at MySQL AB with the platform. If we
     know a platform well, we introduce platform-specific
     optimizations/fixes enabled at compile time. We can also provide
     advice on configuring your system optimally for MySQL.

   * The amount of testing of similar configurations we have done
     internally.

   * The number of users that have successfully run MySQL on that
     platform in similar configurations. If this number is high, the
     chances of hitting some platform-specific surprise are much
     smaller.

Based on the above criteria, the best platforms for running MySQL at
this point are x86 with SuSE Linux 7.1, 2.4 kernel and ReiserFS (or any
similar Linux distribution) and Sparc with Solaris 2.7 or 2.8. FreeBSD
comes third, but we really hope it will join the top club once the
thread library is improved. We also hope that at some point we will be
able to include all other platforms on which MySQL compiles, runs ok,
but not quite with the same level of stability and performance, into
the top category. This will require some effort on our part in
cooperation with the developers of the OS/library components MySQL
depends upon. If you are interested in making one of those components
better, are in a position to influence their development, and need more
detailed instructions on what MySQL needs to run better, send an e-mail
to <internals@lists.mysql.com>.

Please note that the comparison above is not to say that one OS is
better or worse than the other in general. We are talking about
choosing a particular OS for a dedicated purpose - running MySQL, and
compare platforms in that regard only. With this in mind, the result of
this comparison would be different if we included more issues into it.
And in some cases, the reason one OS is better than the other could
simply be that we have put forth more effort into testing on and
optimizing for that particular platform.  We are just stating our
observations to help you make a decision on which platform to use MySQL
on in your setup.

Which MySQL Version to Use
--------------------------

The first decision to make is whether you want to use the latest
development release or the last stable release:

   * Normally, if you are beginning to use MySQL for the first time or
     trying to port it to some system for which there is no binary
     distribution, we recommend going with the stable release (currently
     Version 4.0.0-alpha.  Note that all MySQL releases are checked
     with the MySQL benchmarks and an extensive test suite before each
     release.

   * Otherwise, if you are running an old system and want to upgrade,
     but don't want to take chances with a non-seamless upgrade, you
     should upgrade to the latest in the same branch you are using
     (where only the last version number is newer than yours).  We have
     tried to fix only fatal bugs and make small, relatively safe
     changes to that version.

The second decision to make is whether you want to use a source
distribution or a binary distribution.  In most cases you should
probably use a binary distribution, if one exists for your platform, as
this generally will be easier to install than a source distribution.

In the following cases you probably will be better off with a source
installation:

   * If you want to install MySQL at some explicit location.  (The
     standard binary distributions are "ready to run" at any place, but
     you may want to get even more flexibility).

   * To be able to satisfy different user requirements, we are
     providing two different binary versions; One compiled with the
     non-transactional table handlers, (a small, fast binary), and one
     configured with the most important extended options like
     transaction-safe tables.  Both versions are compiled from the same
     source distribution.  All native `MySQL' clients can connect to
     both MySQL versions.

     The extended MySQL binary distribution is marked with the `-max'
     suffix and is configured with the same options as `mysqld-max'.
     *Note `mysqld-max': mysqld-max.

     If you want to use the `MySQL-Max' RPM, you must first install the
     standard `MySQL' RPM.

   * If you want to configure `mysqld' with some extra features that are
     NOT in the standard binary distributions.  Here is a list of the
     most common extra options that you may want to use:

        * `--with-berkeley-db'

        * `--with-innodb'

        * `--with-raid'

        * `--with-libwrap'

        * `--with-named-z-lib  (This is done for some of the binaries)'

        * `--with-debug[=full]'

   * The default binary distribution is normally compiled with support
     for all characters sets and should work on a variety of processors
     from the same processor family.

     If you want a faster MySQL server you may want to recompile it
     with support for only the character sets you need, use a better
     compiler (like `pgcc') or use compiler options that are better
     optimized for your processor.

   * If you have found a bug and reported it to the MySQL development
     team you will probably receive a patch that you need to apply to
     the source distribution to get the bug fixed.

   * If you want to read (and/or modify) the C and C++ code that makes
     up MySQL, you should get a source distribution.  The source code is
     always the ultimate manual.  Source distributions also contain more
     tests and examples than binary distributions.

The MySQL naming scheme uses release numbers that consist of three
numbers and a suffix.  For example, a release name like
`mysql-3.21.17-beta' is interpreted like this:

   * The first number (`3') describes the file format.  All Version 3
     releases have the same file format.

   * The second number (`21') is the release level.  Normally there are
     two to choose from. One is the release/stable branch (currently
     `23') and the other is the development branch (currently `4.0').
     Normally both are stable, but the development version may have
     quirks, missing documentation on new features, or may fail to
     compile on some systems.

   * The third number (`17') is the version number within the release
     level.  This is incremented for each new distribution.  Usually you
     want the latest version for the release level you have chosen.

   * The suffix (`beta') indicates the stability level of the release.
     The possible suffixes are:

        - `alpha' indicates that the release contains some large
          section of new code that hasn't been 100% tested.  Known bugs
          (usually there are none) should be documented in the News
          section.  *Note News::.  There are also new commands and
          extensions in most alpha releases.  Active development that
          may involve major code changes can occur on an alpha release,
          but everything will be tested before doing a release.  There
          should be no known bugs in any MySQL release.

        - `beta' means that all new code has been tested.  No major new
          features that could cause corruption on old code are added.
          There should be no known bugs.  A version changes from alpha
          to beta when there haven't been any reported fatal bugs
          within an alpha version for at least a month and we don't
          plan to add any features that could make any old command more
          unreliable.

        - `gamma' is a beta that has been around a while and seems to
          work fine.  Only minor fixes are added.  This is what many
          other companies call a release.

        - If there is no suffix, it means that the version has been run
          for a while at many different sites with no reports of bugs
          other than platform-specific bugs.  Only critical bug fixes
          are applied to the release. This is what we call a stable
          release.

All versions of MySQL are run through our standard tests and benchmarks
to ensure that they are relatively safe to use.  Because the standard
tests are extended over time to check for all previously found bugs,
the test suite keeps getting better.

Note that all releases have been tested at least with:

An internal test suite
     This is part of a production system for a customer.  It has many
     tables with hundreds of megabytes of data.

The MySQL benchmark suite
     This runs a range of common queries.  It is also a test to see
     whether the latest batch of optimizations actually made the code
     faster.  *Note MySQL Benchmarks::.

The `crash-me' test
     This tries to determine what features the database supports and
     what its capabilities and limitations are.  *Note MySQL
     Benchmarks::.

Another test is that we use the newest MySQL version in our internal
production environment, on at least one machine.  We have more than 100
gigabytes of data to work with.

Installation Layouts
--------------------

This section describes the default layout of the directories created by
installing binary and source distributions.

A binary distribution is installed by unpacking it at the installation
location you choose (typically `/usr/local/mysql') and creates the
following directories in that location:

*Directory*            *Contents of directory*
`bin'                  Client programs and the `mysqld' server
`data'                 Log files, databases
`include'              Include (header) files
`lib'                  Libraries
`scripts'              `mysql_install_db'
`share/mysql'          Error message files
`sql-bench'            Benchmarks

A source distribution is installed after you configure and compile it.
By default, the installation step installs files under `/usr/local', in
the following subdirectories:

*Directory*            *Contents of directory*
`bin'                  Client programs and scripts
`include/mysql'        Include (header) files
`info'                 Documentation in Info format
`lib/mysql'            Libraries
`libexec'              The `mysqld' server
`share/mysql'          Error message files
`sql-bench'            Benchmarks and `crash-me' test
`var'                  Databases and log files

Within an installation directory, the layout of a source installation
differs from that of a binary installation in the following ways:

   * The `mysqld' server is installed in the `libexec' directory rather
     than in the `bin' directory.

   * The data directory is `var' rather than `data'.

   * `mysql_install_db' is installed in the `/usr/local/bin' directory
     rather than in `/usr/local/mysql/scripts'.

   * The header file and library directories are `include/mysql' and
     `lib/mysql' rather than `include' and `lib'.

You can create your own binary installation from a compiled source
distribution by executing the script `scripts/make_binary_distribution'.

How and When Updates Are Released
---------------------------------

MySQL is evolving quite rapidly here at MySQL AB and we want to share
this with other MySQL users.  We try to make a release when we have
very useful features that others seem to have a need for.

We also try to help out users who request features that are easy to
implement.  We take note of what our licensed users want to have, and
we especially take note of what our extended e-mail supported customers
want and try to help them out.

No one has to download a new release.  The News section will tell you if
the new release has something you really want.  *Note News::.

We use the following policy when updating MySQL:

   * For each minor update, the last number in the version string is
     incremented.  When there are major new features or minor
     incompatibilities with previous versions, the second number in the
     version string is incremented.  When the file format changes, the
     first number is increased.

   * Stable tested releases are meant to appear about 1-2 times a year,
     but if small bugs are found, a release with only bug fixes will be
     released.

   * Working releases are meant to appear about every 1-8 weeks.

   * Binary distributions for some platforms will be made by us for
     major releases.  Other people may make binary distributions for
     other systems but probably less frequently.

   * We usually make patches available as soon as we have located and
     fixed small bugs.

   * For non-critical but annoying bugs, we will make patches available
     if they are sent to us.  Otherwise we will combine many of them
     into a larger patch.

   * If there is, by any chance, a fatal bug in a release we will make
     a new release as soon as possible.  We would like other companies
     to do this, too.

The current stable release is Version 3.23; We have already moved active
development to Version 4.0.  Bugs will still be fixed in the stable
version.  We don't believe in a complete freeze, as this also leaves
out bug fixes and things that "must be done."  "Somewhat frozen" means
that we may add small things that "almost surely will not affect
anything that's already working."

MySQL Binaries Compiled by MySQL AB
-----------------------------------

As a service, we at MySQL AB provide a set of binary distributions of
MySQL that are compiled at our site or at sites where customers kindly
have given us access to their machines.

These distributions are generated with
`scripts/make_binary_distribution' and are configured with the
following compilers and options:

SunOS 4.1.4 2 sun4c with `gcc' 2.7.2.1
     `CC=gcc CXX=gcc CXXFLAGS="-O3 -felide-constructors" ./configure
     --prefix=/usr/local/mysql --disable-shared
     --with-extra-charsets=complex --enable-assembler'

SunOS 5.5.1 (and above) sun4u with `egcs' 1.0.3a or 2.90.27 or gcc 2.95.2 and newer
     `CC=gcc CFLAGS="-O3" CXX=gcc CXXFLAGS="-O3 -felide-constructors
     -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql
     --with-low-memory --with-extra-charsets=complex --enable-assembler'

SunOS 5.6 i86pc with `gcc' 2.8.1
     `CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql
     --with-low-memory --with-extra-charsets=complex'

Linux 2.0.33 i386 with `pgcc' 2.90.29 (`egcs' 1.0.3a)
     `CFLAGS="-O3 -mpentium -mstack-align-double" CXX=gcc CXXFLAGS="-O3
     -mpentium -mstack-align-double -felide-constructors
     -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql
     --enable-assembler --with-mysqld-ldflags=-all-static
     --with-extra-charsets=complex'

Linux 2.2.x with x686 with `gcc' 2.95.2
     `CFLAGS="-O3 -mpentiumpro" CXX=gcc CXXFLAGS="-O3 -mpentiumpro
     -felide-constructors -fno-exceptions -fno-rtti" ./configure
     --prefix=/usr/local/mysql --enable-assembler
     --with-mysqld-ldflags=-all-static --disable-shared
     --with-extra-charset=complex'

SCO 3.2v5.0.4 i386 with `gcc' 2.7-95q4
     `CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql
     --with-extra-charsets=complex'

AIX 2 4 with `gcc' 2.7.2.2
     `CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql
     --with-extra-charsets=complex'

OSF1 V4.0 564 alpha with `gcc' 2.8.1
     `CC=gcc CFLAGS=-O CXX=gcc CXXFLAGS=-O3 ./configure
     --prefix=/usr/local/mysql --with-low-memory
     --with-extra-charsets=complex'

Irix 6.3 IP32 with `gcc' 2.8.0
     `CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql
     --with-extra-charsets=complex'

BSDI BSD/OS 3.1 i386 with `gcc' 2.7.2.1
     `CC=gcc CXX=gcc CXXFLAGS=-O ./configure --prefix=/usr/local/mysql
     --with-extra-charsets=complex'

BSDI BSD/OS 2.1 i386 with `gcc' 2.7.2
     `CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql
     --with-extra-charsets=complex'

Anyone who has more optimal options for any of the configurations listed
above can always mail them to the developer's mailing list at
<internals@lists.mysql.com>.

RPM distributions prior to MySQL Version 3.22 are user-contributed.
Beginning with Version 3.22, the RPMs are generated by us at MySQL AB.

If you want to compile a debug version of MySQL, you should add
`--with-debug' or `--with-debug=full' to the above configure lines and
remove any `-fomit-frame-pointer' options.

Installing a MySQL Source Distribution
======================================

Before you proceed with the source installation, check first to see if
our binary is available for your platform and if it will work for you.
We put in a lot of effort into making sure that our binaries are built
with the best possible options.

You need the following tools to build and install MySQL from source:

   * GNU `gunzip' to uncompress the distribution.

   * A reasonable `tar' to unpack the distribution.  GNU `tar' is known
     to work.  Sun `tar' is known to have problems.

   * A working ANSI C++ compiler.  `gcc' >= 2.95.2, `egcs' >= 1.0.2 or
     `egcs 2.91.66', SGI C++, and SunPro C++ are some of the compilers
     that are known to work.  `libg++' is not needed when using `gcc'.
     `gcc' 2.7.x has a bug that makes it impossible to compile some
     perfectly legal C++ files, such as `sql/sql_base.cc'.  If you only
     have `gcc' 2.7.x, you must upgrade your `gcc' to be able to
     compile MySQL. `gcc' 2.8.1 is also known to have problems on some
     platforms so it should be avoided if there exists a new compiler
     for the platform..

     `gcc' >= 2.95.2 is recommended when compiling MySQL Version 3.23.x.

   * A good `make' program.  GNU `make' is always recommended and is
     sometimes required.  If you have problems, we recommend trying GNU
     `make' 3.75 or newer.

If you are using a recent version of *gcc*, recent enough to understand
`-fno-exceptions' option, it is *VERY IMPORTANT* that you use it.
Otherwise, you may compile a binary that crashes randomly. We also
recommend that you use `-felide-contructors' and `-fno-rtti' along with
`-fno-exceptions'. When in doubt, do the following:


     CFLAGS="-O3" CXX=gcc CXXFLAGS="-O3 -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --enable-assembler --with-mysqld-ldflags=-all-static

On most systems this will give you a fast and stable binary.

If you run into problems, *PLEASE ALWAYS USE `mysqlbug'* when posting
questions to <mysql@lists.mysql.com>.  Even if the problem isn't a bug,
`mysqlbug' gathers system information that will help others solve your
problem.  By not using `mysqlbug', you lessen the likelihood of getting
a solution to your problem!  You will find `mysqlbug' in the `scripts'
directory after you unpack the distribution.  *Note Bug reports::.

Quick Installation Overview
---------------------------

The basic commands you must execute to install a MySQL source
distribution are:

     shell> groupadd mysql
     shell> useradd -g mysql mysql
     shell> gunzip < mysql-VERSION.tar.gz | tar -xvf -
     shell> cd mysql-VERSION
     shell> ./configure --prefix=/usr/local/mysql
     shell> make
     shell> make install
     shell> scripts/mysql_install_db
     shell> chown -R root  /usr/local/mysql
     shell> chown -R mysql /usr/local/mysql/var
     shell> chgrp -R mysql /usr/local/mysql
     shell> cp support-files/my-medium.cnf /etc/my.cnf
     shell> /usr/local/mysql/bin/safe_mysqld --user=mysql &

If you want have support for InnoDB tables, you should edit the
`/etc/my.cnf' file and remove the `#' character before the parameters
that starts with `innodb_...'. *Note Option files::. *Note InnoDB
start::.

If you start from a source RPM, then do the following:

     shell> rpm --rebuild MySQL-VERSION.src.rpm

This will make a binary RPM that you can install.

You can add new users using the `bin/mysql_setpermission' script if you
install the `DBI' and `Msql-Mysql-modules' Perl modules.

A more detailed description follows.

To install a source distribution, follow the steps below, then proceed
to *Note Post-installation::, for post-installation initialization and
testing:

  1. Pick the directory under which you want to unpack the
     distribution, and move into it.

  2. Obtain a distribution file from one of the sites listed in *Note
     Getting MySQL: Getting MySQL.

  3. If you are interested in using Berkeley DB tables with MySQL, you
     will need to obtain a patched version of the Berkeley DB source
     code.  Please read the chapter on Berkeley DB tables before
     proceeding.  *Note BDB::.

     MySQL source distributions are provided as compressed `tar'
     archives and have names like `mysql-VERSION.tar.gz', where
     `VERSION' is a number like 4.0.0-alpha.

  4. Add a user and group for `mysqld' to run as:

          shell> groupadd mysql
          shell> useradd -g mysql mysql

     These commands add the `mysql' group, and the `mysql' user.  The
     syntax for `useradd' and `groupadd' may differ slightly on
     different versions of Unix.  They may also be called `adduser' and
     `addgroup'.  You may wish to call the user and group something
     else instead of `mysql'.

  5. Unpack the distribution into the current directory:
          shell> gunzip < /path/to/mysql-VERSION.tar.gz | tar xvf -

     This command creates a directory named `mysql-VERSION'.

  6. Change into the top-level directory of the unpacked distribution:

          shell> cd mysql-VERSION

     Note that currently you must configure and build MySQL from this
     top-level directory.  You can not build it in a different
     directory.

  7. Configure the release and compile everything:

          shell> ./configure --prefix=/usr/local/mysql
          shell> make

     When you run `configure', you might want to specify some options.
     Run `./configure --help' for a list of options.  *Note `configure'
     options: configure options, discusses some of the more useful
     options.

     If `configure' fails, and you are going to send mail to
     <mysql@lists.mysql.com> to ask for assistance, please include any
     lines from `config.log' that you think can help solve the problem.
     Also include the last couple of lines of output from `configure'
     if `configure' aborts.  Post the bug report using the `mysqlbug'
     script.  *Note Bug reports::.

     If the compile fails, see *Note Compilation problems::, for help
     with a number of common problems.

  8. Install everything:

          shell> make install

     You might need to run this command as `root'.

  9. Create the MySQL grant tables (necessary only if you haven't
     installed MySQL before):

          shell> scripts/mysql_install_db

     Note that MySQL versions older than Version 3.22.10 started the
     MySQL server when you run `mysql_install_db'.  This is no longer
     true!

 10. Change ownership of binaries to `root' and ownership of the data
     directory to the user that you will run `mysqld' as:

          shell> chown -R root  /usr/local/mysql
          shell> chown -R mysql /usr/local/mysql/var
          shell> chgrp -R mysql /usr/local/mysql

     The first command changes the `owner' attribute of the files to the
     `root' user, the second one changes the `owner' attribute of the
     data directory to the `mysql' user, and the third one changes the
     `group' attribute to the `mysql' group.

 11. If you want to install support for the Perl `DBI'/`DBD' interface,
     see *Note Perl support::.

 12. If you would like MySQL to start automatically when you boot your
     machine, you can copy `support-files/mysql.server' to the location
     where your system has its startup files.  More information can be
     found in the `support-files/mysql.server' script itself and in
     *Note Automatic start::.

After everything has been installed, you should initialize and test your
distribution:

     shell> /usr/local/mysql/bin/safe_mysqld --user=mysql &

If that command fails immediately with `mysqld daemon ended' then you
can find some information in the file
`mysql-data-directory/'hostname'.err'.  The likely reason is that you
already have another `mysqld' server running.  *Note Multiple servers::.

*Note Post-installation::.

Applying Patches
----------------

Sometimes patches appear on the mailing list or are placed in the
patches area (http://www.mysql.com/Downloads/Patches) of the MySQL Web
site.

To apply a patch from the mailing list, save the message in which the
patch appears in a file, change into the top-level directory of your
MySQL source tree, and run these commands:

     shell> patch -p1 < patch-file-name
     shell> rm config.cache
     shell> make clean

Patches from the FTP site are distributed as plain text files or as
files compressed with `gzip'.  Apply a plain patch as shown above for
mailing list patches.  To apply a compressed patch, change into the
top-level directory of your MySQL source tree and run these commands:

     shell> gunzip < patch-file-name.gz | patch -p1
     shell> rm config.cache
     shell> make clean

After applying a patch, follow the instructions for a normal source
install, beginning with the `./configure' step.  After running the `make
install' step, restart your MySQL server.

You may need to bring down any currently running server before you run
`make install'.  (Use `mysqladmin shutdown' to do this.)  Some systems
do not allow you to install a new version of a program if it replaces
the version that is currently executing.

Typical `configure' Options
---------------------------

The `configure' script gives you a great deal of control over how you
configure your MySQL distribution.  Typically you do this using options
on the `configure' command line.  You can also affect `configure' using
certain environment variables.  *Note Environment variables::.  For a
list of options supported by `configure', run this command:

     shell> ./configure --help

Some of the more commonly-used `configure' options are described below:

   * To compile just the MySQL client libraries and client programs and
     not the server, use the `--without-server' option:

          shell> ./configure --without-server

     If you don't have a C++ compiler, `mysql' will not compile (it is
     the one client program that requires C++).  In this case, you can
     remove the code in `configure' that tests for the C++ compiler and
     then run `./configure' with the `--without-server' option. The
     compile step will still try to build `mysql', but you can ignore
     any warnings about `mysql.cc'.  (If `make' stops, try `make -k' to
     tell it to continue with the rest of the build even if errors
     occur.)

   * If you want to get a embedded MySQL library (`libmysqld.a') you
     should use the `--with-embedded-server' option.

   * If you don't want your log files and database directories located
     under `/usr/local/var', use a `configure' command, something like
     one of these:

          shell> ./configure --prefix=/usr/local/mysql
          shell> ./configure --prefix=/usr/local \
                     --localstatedir=/usr/local/mysql/data

     The first command changes the installation prefix so that
     everything is installed under `/usr/local/mysql' rather than the
     default of `/usr/local'.  The second command preserves the default
     installation prefix, but overrides the default location for
     database directories (normally `/usr/local/var') and changes it to
     `/usr/local/mysql/data'.  After you have compiled MySQL, you can
     change these options with option files. *Note Option files::.

   * If you are using Unix and you want the MySQL socket located
     somewhere other than the default location (normally in the
     directory `/tmp' or `/var/run') use a `configure' command like
     this:

          shell> ./configure --with-unix-socket-path=/usr/local/mysql/tmp/mysql.sock

     Note that the given file must be an absolute pathname!  You can
     also later change the location `mysql.sock' by using the MySQL
     option files. *Note Problems with mysql.sock::.

   * If you want to compile statically linked programs (for example, to
     make a binary distribution, to get more speed, or to work around
     problems with some RedHat Linux distributions), run `configure'
     like this:

          shell> ./configure --with-client-ldflags=-all-static \
                     --with-mysqld-ldflags=-all-static

   * If you are using `gcc' and don't have `libg++' or `libstdc++'
     installed, you can tell `configure' to use `gcc' as your C++
     compiler:

          shell> CC=gcc CXX=gcc ./configure

     When you use `gcc' as your C++ compiler, it will not attempt to
     link in `libg++' or `libstdc++'.

     Here is some common environment variables to set depending on the
     compiler you are using:

     gcc 2.7.2.1    CC=gcc CXX=gcc CXXFLAGS="-O3 -felide-constructors"
     egcs 1.0.3a    CC=gcc CXX=gcc CXXFLAGS="-O3 -felide-constructors
                   -fno-exceptions -fno-rtti"
     gcc 2.95.2     CFLAGS="-O3 -mpentiumpro" CXX=gcc CXXFLAGS="-O3
                   -mpentiumpro -felide-constructors -fno-exceptions
                   -fno-rtti"
     pgcc 2.90.29   CFLAGS="-O3 -mpentiumpro -mstack-align-double"
     or newer      CXX=gcc CXXFLAGS="-O3 -mpentiumpro
                   -mstack-align-double -felide-constructors
                   -fno-exceptions -fno-rtti"

     In most cases you can get a reasonably optimal MySQL binary by
     using the options from the above and adding the following options
     to the configure line:

          --prefix=/usr/local/mysql --enable-assembler --with-mysqld-ldflags=-all-static

     The full configure line would in other words be something like the
     following for all recent gcc versions:

          CFLAGS="-O3 -mpentiumpro" CXX=gcc CXXFLAGS="-O3 -mpentiumpro -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --enable-assembler --with-mysqld-ldflags=-all-static

     The binaries we provide on the MySQL Web site at
     `http://www.mysql.com' are all compiled with full optimization and
     should be perfect for most users.  *Note MySQL binaries::.  There
     are some things you can tweak to make an even faster binary, but
     this is only for advanced users.  *Note Compile and link options::.

     If the build fails and produces errors about your compiler or
     linker not being able to create the shared library
     `libmysqlclient.so.#' (`#' is a version number), you can work
     around this problem by giving the `--disable-shared' option to
     `configure'.  In this case, `configure' will not build a shared
     `libmysqlclient.so.#' library.

   * You can configure MySQL not to use `DEFAULT' column values for
     non-`NULL' columns (that is, columns that are not allowed to be
     `NULL').  This causes `INSERT' statements to generate an error
     unless you explicitly specify values for all columns that require a
     non-`NULL' value.  To suppress use of default values, run
     `configure' like this:

          shell> CXXFLAGS=-DDONT_USE_DEFAULT_FIELDS ./configure

   * By default, MySQL uses the ISO-8859-1 (Latin1) character set. To
     change the default set, use the `--with-charset' option:
          shell> ./configure --with-charset=CHARSET
     `CHARSET' may be one of `big5', `cp1251', `cp1257', `czech',
     `danish', `dec8', `dos', `euc_kr', `gb2312', `gbk', `german1',
     `hebrew', `hp8', `hungarian', `koi8_ru', `koi8_ukr', `latin1',
     `latin2', `sjis', `swe7', `tis620', `ujis', `usa7', or
     `win1251ukr'.  *Note Character sets::.

     If you want to convert characters between the server and the
     client, you should take a look at the `SET OPTION CHARACTER SET'
     command.  *Note `SET OPTION': SET OPTION.

     *Warning:* If you change character sets after having created any
     tables, you will have to run `myisamchk -r -q' on every table. Your
     indexes may be sorted incorrectly otherwise.  (This can happen if
     you install MySQL, create some tables, then reconfigure MySQL to
     use a different character set and reinstall it.)

     With the option `--with-extra-charset=LIST' you can define which
     additional character sets should be incompiled in the server.

     Here `LIST' is either a list of character set separated with space,
     `complex' to include all characters that can't be dynamically
     loaded or `all' to include all character sets into the binaries.

   * To configure MySQL with debugging code, use the `--with-debug'
     option:
          shell> ./configure --with-debug
     This causes a safe memory allocator to be included that can find
     some errors and that provides output about what is happening.
     *Note Debugging server::.

   * If your client programs are using threads, you need to also
     compile a thread-safe version of the MySQL client library with the
     `--enable-thread-safe-client' configure options. This will create a
     `libmysqlclient_r' library with which you should link your threaded
     applications.  *Note Threaded clients::.

   * Options that pertain to particular systems can be found in the
     system-specific section of this manual.  *Note Operating System
     Specific Notes::.

Installing from the Development Source Tree
-------------------------------------------

*CAUTION:* You should read this section only if you are interested in
helping us test our new code. If you just want to get MySQL up and
running on your system, you should use a standard release distribution
(either a source or binary distribution will do).

To obtain our most recent development source tree, use these
instructions:

  1. Download *BitKeeper* from
     `http://www.bitmover.com/cgi-bin/download.cgi'.  You will need
     *Bitkeeper* 2.0 or newer to access our repository.

  2. Follow the instructions to install it.

  3. After *BitKeeper* is installed, use this command if you want to
     clone the MySQL 3.23 branch:

          shell> bk clone bk://work.mysql.com:7000 mysql

     To clone the 4.0 branch, use this command instead:

          shell> bk clone bk://work.mysql.com:7001 mysql-4.0

     The initial download of the source tree may take a while,
     depending on the speed of your connection; be patient.

  4. You will need GNU `autoconf 2.13', `automake 1.4', `libtool', and
     `m4' to run the next set of commands.  Note that the new versions
     of `autoconf' (2.52) and `automake' (1.5) do not work.

     If you get some strange error during this stage, check that you
     really have `libtool' installed!

          shell> cd mysql
          shell> bk -r edit
          shell> aclocal; autoheader; autoconf;  automake;
          shell> ./configure  # Add your favorite options here
          shell> make

     A collection of our standard configure scripts is located in the
     `BUILD/' subdirectory.  If you are lazy, you can use
     `BUILD/compile-pentium-debug'. To compile on a different
     architecture, modify the script removing flags that are
     Pentium-specific.

  5. When the build is done, run `make install'.  Be careful with this
     on a production machine; the command may overwrite your live
     release installation.  If you have another installation of MySQL,
     we recommand that you run `./configure' with different values for
     the `prefix', `tcp-port', and `unix-socket-path' options than
     those used for your production server.

  6. Play hard with your new installation and try to make the new
     features crash.  Start by running `make test'.  *Note MySQL test
     suite::.

  7. If you have gotten to the `make' stage and the distribution does
     not compile, please report it to <bugs@lists.mysql.com>.  If you
     have installed the latest versions of the required GNU tools, and
     they crash trying to process our configuration files, please
     report that also.  However, if you execute `aclocal' and get a
     `command not found' error or a similar problem, do not report it.
     Instead, make sure all the necessary tools are installed and that
     your `PATH' variable is set correctly so your shell can find them.

  8. After the initial `bk clone' operation to get the source tree, you
     should run `bk pull' periodically to get the updates.

  9. You can examine the change history for the tree with all the diffs
     by using `bk sccstool'.  If you see some funny diffs or code that
     you have a question about, do not hesitate to send e-mail to
     <internals@lists.mysql.com>.  Also, if you think you have a better
     idea on how to do something, send an e-mail to the same address
     with a patch.  `bk diffs' will produce a patch for you after you
     have made changes to the source. If you do not have the time to
     code your idea, just send a description.

 10. *BitKeeper* has a nice help utility that you can access via `bk
     helptool'.


Problems Compiling?
-------------------

All MySQL programs compile cleanly for us with no warnings on Solaris
using `gcc'.  On other systems, warnings may occur due to differences
in system include files.  See *Note MIT-pthreads:: for warnings that
may occur when using MIT-pthreads.  For other problems, check the list
below.

The solution to many problems involves reconfiguring.  If you do need to
reconfigure, take note of the following:

   * If `configure' is run after it already has been run, it may use
     information that was gathered during its previous invocation.  This
     information is stored in `config.cache'.  When `configure' starts
     up, it looks for that file and reads its contents if it exists, on
     the assumption that the information is still correct.  That
     assumption is invalid when you reconfigure.

   * Each time you run `configure', you must run `make' again to
     recompile.  However, you may want to remove old object files from
     previous builds first, because they were compiled using different
     configuration options.

To prevent old configuration information or object files from being
used, run these commands before rerunning `configure':

     shell> rm config.cache
     shell> make clean

Alternatively, you can run `make distclean'.

The list below describes some of the problems compiling MySQL that have
been found to occur most often:

   * If you get errors when compiling `sql_yacc.cc', such as the ones
     shown below, you have probably run out of memory or swap space:

          Internal compiler error: program cc1plus got fatal signal 11
            or
          Out of virtual memory
            or
          Virtual memory exhausted

     The problem is that `gcc' requires huge amounts of memory to
     compile `sql_yacc.cc' with inline functions.  Try running
     `configure' with the `--with-low-memory' option:

          shell> ./configure --with-low-memory

     This option causes `-fno-inline' to be added to the compile line
     if you are using `gcc' and `-O0' if you are using something else.
     You should try the `--with-low-memory' option even if you have so
     much memory and swap space that you think you can't possibly have
     run out.  This problem has been observed to occur even on systems
     with generous hardware configurations, and the `--with-low-memory'
     option usually fixes it.

   * By default, `configure' picks `c++' as the compiler name and GNU
     `c++' links with `-lg++'.  If you are using `gcc', that behavior
     can cause problems during configuration such as this:

          configure: error: installation or configuration problem:
          C++ compiler cannot create executables.

     You might also observe problems during compilation related to
     `g++', `libg++', or `libstdc++'.

     One cause of these problems is that you may not have `g++', or you
     may have `g++' but not `libg++', or `libstdc++'.  Take a look at
     the `config.log' file.  It should contain the exact reason why
     your c++ compiler didn't work!  To work around these problems, you
     can use `gcc' as your C++ compiler.  Try setting the environment
     variable `CXX' to `"gcc -O3"'.  For example:

          shell> CXX="gcc -O3" ./configure

     This works because `gcc' compiles C++ sources as well as `g++'
     does, but does not link in `libg++' or `libstdc++' by default.

     Another way to fix these problems, of course, is to install `g++',
     `libg++' and `libstdc++'.

   * If your compile fails with errors, such as any of the following,
     you must upgrade your version of `make' to GNU `make':

          making all in mit-pthreads
          make: Fatal error in reader: Makefile, line 18:
          Badly formed macro assignment
            or
          make: file `Makefile' line 18: Must be a separator (:
            or
          pthread.h: No such file or directory

     Solaris and FreeBSD are known to have troublesome `make' programs.

     GNU `make' Version 3.75 is known to work.

   * If you want to define flags to be used by your C or C++ compilers,
     do so by adding the flags to the `CFLAGS' and `CXXFLAGS'
     environment variables.  You can also specify the compiler names
     this way using `CC' and `CXX'.  For example:

          shell> CC=gcc
          shell> CFLAGS=-O3
          shell> CXX=gcc
          shell> CXXFLAGS=-O3
          shell> export CC CFLAGS CXX CXXFLAGS

     See *Note MySQL binaries::, for a list of flag definitions that
     have been found to be useful on various systems.

   * If you get an error message like this, you need to upgrade your
     `gcc' compiler:

          client/libmysql.c:273: parse error before `__attribute__'

     `gcc' 2.8.1 is known to work, but we recommend using `gcc' 2.95.2
     or `egcs' 1.0.3a instead.

   * If you get errors such as those shown below when compiling
     `mysqld', `configure' didn't correctly detect the type of the last
     argument to `accept()', `getsockname()', or `getpeername()':

          cxx: Error: mysqld.cc, line 645: In this statement, the referenced
               type of the pointer value "&length" is "unsigned long", which
               is not compatible with "int".
          new_sock = accept(sock, (struct sockaddr *)&cAddr, &length);

     To fix this, edit the `config.h' file (which is generated by
     `configure').  Look for these lines:

          /* Define as the base type of the last arg to accept */
          #define SOCKET_SIZE_TYPE XXX

     Change `XXX' to `size_t' or `int', depending on your operating
     system.  (Note that you will have to do this each time you run
     `configure', because `configure' regenerates `config.h'.)

   * The `sql_yacc.cc' file is generated from `sql_yacc.yy'.  Normally
     the build process doesn't need to create `sql_yacc.cc', because
     MySQL comes with an already-generated copy.  However, if you do
     need to re-create it, you might encounter this error:

          "sql_yacc.yy", line xxx fatal: default action causes potential...

     This is a sign that your version of `yacc' is deficient.  You
     probably need to install `bison' (the GNU version of `yacc') and
     use that instead.

   * If you need to debug `mysqld' or a MySQL client, run `configure'
     with the `--with-debug' option, then recompile and link your
     clients with the new client library.  *Note Debugging client::.

MIT-pthreads Notes
------------------

This section describes some of the issues involved in using
MIT-pthreads.

Note that on Linux you should NOT use MIT-pthreads but install
LinuxThreads!  *Note Linux::.

If your system does not provide native thread support, you will need to
build MySQL using the MIT-pthreads package.  This includes older
FreeBSD systems, SunOS 4.x, Solaris 2.4 and earlier, and some others.
*Note Which OS::.

   * On most systems, you can force MIT-pthreads to be used by running
     `configure' with the `--with-mit-threads' option:

          shell> ./configure --with-mit-threads

     Building in a non-source directory is not supported when using
     MIT-pthreads, because we want to minimize our changes to this code.

   * The checks that determine whether or not to use MIT-pthreads occur
     only during the part of the configuration process that deals with
     the server code.  If you have configured the distribution using
     `--without-server' to build only the client code, clients will not
     know whether or not MIT-pthreads is being used and will use Unix
     socket connections by default.  Because Unix sockets do not work
     under MIT-pthreads, this means you will need to use `-h' or
     `--host' when you run client programs.

   * When MySQL is compiled using MIT-pthreads, system locking is
     disabled by default for performance reasons.  You can tell the
     server to use system locking with the `--use-locking' option.

   * Sometimes the pthread `bind()' command fails to bind to a socket
     without any error message (at least on Solaris).  The result is
     that all connections to the server fail.  For example:

          shell> mysqladmin version
          mysqladmin: connect to server at '' failed;
          error: 'Can't connect to mysql server on localhost (146)'

     The solution to this is to kill the `mysqld' server and restart it.
     This has only happened to us when we have forced the server down
     and done a restart immediately.

   * With MIT-pthreads, the `sleep()' system call isn't interruptible
     with `SIGINT' (break).  This is only noticeable when you run
     `mysqladmin --sleep'.  You must wait for the `sleep()' call to
     terminate before the interrupt is served and the process stops.

   * When linking, you may receive warning messages like these (at
     least on Solaris); they can be ignored:

          ld: warning: symbol `_iob' has differing sizes:
              (file /my/local/pthreads/lib/libpthread.a(findfp.o) value=0x4;
          file /usr/lib/libc.so value=0x140);
              /my/local/pthreads/lib/libpthread.a(findfp.o) definition taken
          ld: warning: symbol `__iob' has differing sizes:
              (file /my/local/pthreads/lib/libpthread.a(findfp.o) value=0x4;
          file /usr/lib/libc.so value=0x140);
              /my/local/pthreads/lib/libpthread.a(findfp.o) definition taken

   * Some other warnings also can be ignored:

          implicit declaration of function `int strtoll(...)'
          implicit declaration of function `int strtoul(...)'

   * We haven't gotten `readline' to work with MIT-pthreads.  (This
     isn't needed, but may be interesting for someone.)

Post-installation Setup and Testing
===================================

Once you've installed MySQL (from either a binary or source
distribution), you need to initialize the grant tables, start the
server, and make sure that the server works okay.  You may also wish to
arrange for the server to be started and stopped automatically when
your system starts up and shuts down.

Normally you install the grant tables and start the server like this
for installation from a source distribution:

     shell> ./scripts/mysql_install_db
     shell> cd mysql_installation_directory
     shell> ./bin/safe_mysqld --user=mysql &

For a binary distribution (not RPM or pkg packages), do this:

     shell> cd mysql_installation_directory
     shell> ./bin/mysql_install_db
     shell> ./bin/safe_mysqld --user=mysql &

This creates the `mysql' database which will hold all database
privileges, the `test' database which you can use to test MySQL and
also privilege entries for the user that run `mysql_install_db' and a
`root' user (without any passwords).  This also starts the `mysqld'
server.

`mysql_install_db' will not overwrite any old privilege tables, so it
should be safe to run in any circumstances.  If you don't want to have
the `test' database you can remove it with `mysqladmin -u root drop
test'.

Testing is most easily done from the top-level directory of the MySQL
distribution.  For a binary distribution, this is your installation
directory (typically something like `/usr/local/mysql').  For a source
distribution, this is the main directory of your MySQL source tree.

In the commands shown below in this section and in the following
subsections, `BINDIR' is the path to the location in which programs
like `mysqladmin' and `safe_mysqld' are installed.  For a binary
distribution, this is the `bin' directory within the distribution.  For
a source distribution, `BINDIR' is probably `/usr/local/bin', unless
you specified an installation directory other than `/usr/local' when
you ran `configure'.  `EXECDIR' is the location in which the `mysqld'
server is installed.  For a binary distribution, this is the same as
`BINDIR'.  For a source distribution, `EXECDIR' is probably
`/usr/local/libexec'.

Testing is described in detail below:

  1. If necessary, start the `mysqld' server and set up the initial
     MySQL grant tables containing the privileges that determine how
     users are allowed to connect to the server.  This is normally done
     with the `mysql_install_db' script:

          shell> scripts/mysql_install_db

     Typically, `mysql_install_db' needs to be run only the first time
     you install MySQL.  Therefore, if you are upgrading an existing
     installation, you can skip this step.  (However,
     `mysql_install_db' is quite safe to use and will not update any
     tables that already exist, so if you are unsure of what to do, you
     can always run `mysql_install_db'.)

     `mysql_install_db' creates six tables (`user', `db', `host',
     `tables_priv', `columns_priv', and `func') in the `mysql'
     database.  A description of the initial privileges is given in
     *Note Default privileges::.  Briefly, these privileges allow the
     MySQL `root' user to do anything, and allow anybody to create or
     use databases with a name of `'test'' or starting with `'test_''.

     If you don't set up the grant tables, the following error will
     appear in the log file when you start the server:

          mysqld: Can't find file: 'host.frm'

     The above may also happen with a binary MySQL distribution if you
     don't start MySQL by executing exactly `./bin/safe_mysqld'!  *Note
     `safe_mysqld': safe_mysqld.

     You might need to run `mysql_install_db' as `root'.  However, if
     you prefer, you can run the MySQL server as an unprivileged
     (non-`root') user, provided that user can read and write files in
     the database directory.  Instructions for running MySQL as an
     unprivileged user are given in *Note Changing MySQL user: Changing
     MySQL user.

     If you have problems with `mysql_install_db', see *Note
     `mysql_install_db': mysql_install_db.

     There are some alternatives to running the `mysql_install_db'
     script as it is provided in the MySQL distribution:

        * You may want to edit `mysql_install_db' before running it, to
          change the initial privileges that are installed into the
          grant tables.  This is useful if you want to install MySQL on
          a lot of machines with the same privileges.  In this case you
          probably should need only to add a few extra `INSERT'
          statements to the `mysql.user' and `mysql.db' tables!

        * If you want to change things in the grant tables after
          installing them, you can run `mysql_install_db', then use
          `mysql -u root mysql' to connect to the grant tables as the
          MySQL `root' user and issue SQL statements to modify the
          grant tables directly.

        * It is possible to re-create the grant tables completely after
          they have already been created.  You might want to do this if
          you've already installed the tables but then want to
          re-create them after editing `mysql_install_db'.

     For more information about these alternatives, see *Note Default
     privileges::.

  2. Start the MySQL server like this:

          shell> cd mysql_installation_directory
          shell> bin/safe_mysqld &

     If you have problems starting the server, see *Note Starting
     server::.

  3. Use `mysqladmin' to verify that the server is running.  The
     following commands provide a simple test to check that the server
     is up and responding to connections:

          shell> BINDIR/mysqladmin version
          shell> BINDIR/mysqladmin variables

     The output from `mysqladmin version' varies slightly depending on
     your platform and version of MySQL, but should be similar to that
     shown below:

          shell> BINDIR/mysqladmin version
          mysqladmin  Ver 8.14 Distrib 3.23.32, for linux on i586
          Copyright (C) 2000 MySQL AB & MySQL Finland AB & TCX DataKonsult AB
          This software comes with ABSOLUTELY NO WARRANTY. This is free software,
          and you are welcome to modify and redistribute it under the GPL license
          
          Server version          3.23.32-debug
          Protocol version        10
          Connection              Localhost via Unix socket
          TCP port                3306
          UNIX socket             /tmp/mysql.sock
          Uptime:                 16 sec
          
          Threads: 1  Questions: 9  Slow queries: 0  Opens: 7  Flush tables: 2  Open tables: 0 Queries per second avg: 0.000  Memory in use: 132K  Max memory used: 16773K

     To get a feeling for what else you can do with `BINDIR/mysqladmin',
     invoke it with the `--help' option.

  4. Verify that you can shut down the server:

          shell> BINDIR/mysqladmin -u root shutdown

  5. Verify that you can restart the server.  Do this using
     `safe_mysqld' or by invoking `mysqld' directly.  For example:

          shell> BINDIR/safe_mysqld --log &

     If `safe_mysqld' fails, try running it from the MySQL installation
     directory (if you are not already there).  If that doesn't work,
     see *Note Starting server::.

  6. Run some simple tests to verify that the server is working.  The
     output should be similar to what is shown below:

          shell> BINDIR/mysqlshow
          +-----------+
          | Databases |
          +-----------+
          | mysql     |
          +-----------+
          
          shell> BINDIR/mysqlshow mysql
          Database: mysql
          +--------------+
          |    Tables    |
          +--------------+
          | columns_priv |
          | db           |
          | func         |
          | host         |
          | tables_priv  |
          | user         |
          +--------------+
          
          shell> BINDIR/mysql -e "select host,db,user from db" mysql
          +------+--------+------+
          | host | db     | user |
          +------+--------+------+
          | %    | test   |      |
          | %    | test_% |      |
          +------+--------+------+

     There is also a benchmark suite in the `sql-bench' directory
     (under the MySQL installation directory) that you can use to
     compare how MySQL performs on different platforms.  The
     `sql-bench/Results' directory contains the results from many runs
     against different databases and platforms.  To run all tests,
     execute these commands:

          shell> cd sql-bench
          shell> run-all-tests

     If you don't have the `sql-bench' directory, you are probably
     using an RPM for a binary distribution.  (Source distribution RPMs
     include the benchmark directory.)  In this case, you must first
     install the benchmark suite before you can use it.  Beginning with
     MySQL Version 3.22, there are benchmark RPM files named
     `mysql-bench-VERSION-i386.rpm' that contain benchmark code and
     data.

     If you have a source distribution, you can also run the tests in
     the `tests' subdirectory. For example, to run
     `auto_increment.tst', do this:

          shell> BINDIR/mysql -vvf test < ./tests/auto_increment.tst

     The expected results are shown in the `./tests/auto_increment.res'
     file.

Problems Running `mysql_install_db'
-----------------------------------

The purpose of the `mysql_install_db' script is to generate new MySQL
privilege tables.  It will not affect any other data!  It will also not
do anything if you already have MySQL privilege tables installed!

If you want to re-create your privilege tables, you should take down
the `mysqld' server, if it's running, and then do something like:

     mv mysql-data-directory/mysql mysql-data-directory/mysql-old
     mysql_install_db

This section lists problems you might encounter when you run
`mysql_install_db':

*`mysql_install_db' doesn't install the grant tables*
     You may find that `mysql_install_db' fails to install the grant
     tables and terminates after displaying the following messages:

          starting mysqld daemon with databases from XXXXXX
          mysql daemon ended

     In this case, you should examine the log file very carefully!  The
     log should be located in the directory `XXXXXX' named by the error
     message, and should indicate why `mysqld' didn't start.  If you
     don't understand what happened, include the log when you post a
     bug report using `mysqlbug'!  *Note Bug reports::.

*There is already a `mysqld' daemon running*
     In this case, you probably don't have to run `mysql_install_db' at
     all.  You have to run `mysql_install_db' only once, when you
     install MySQL the first time.

*Installing a second `mysqld' daemon doesn't work when one daemon is running*
     This can happen when you already have an existing MySQL
     installation, but want to put a new installation in a different
     place (for example, for testing, or perhaps you simply want to run
     two installations at the same time).  Generally the problem that
     occurs when you try to run the second server is that it tries to
     use the same socket and port as the old one.  In this case you
     will get the error message: `Can't start server: Bind on TCP/IP
     port: Address already in use' or `Can't start server : Bind on
     unix socket...'. *Note Installing many servers::.

*You don't have write access to `/tmp'*
     If you don't have write access to create a socket file at the
     default place (in `/tmp') or permission to create temporary files
     in `/tmp,' you will get an error when running `mysql_install_db'
     or when starting or using `mysqld'.

     You can specify a different socket and temporary directory as
     follows:

          shell> TMPDIR=/some_tmp_dir/
          shell> MYSQL_UNIX_PORT=/some_tmp_dir/mysqld.sock
          shell> export TMPDIR MYSQL_UNIX_PORT

     *Note Problems with mysql.sock::.

     `some_tmp_dir' should be the path to some directory for which you
     have write permission. *Note Environment variables::.

     After this you should be able to run `mysql_install_db' and start
     the server with these commands:

          shell> scripts/mysql_install_db
          shell> BINDIR/safe_mysqld &

*`mysqld' crashes immediately*
     If you are running RedHat Version 5.0 with a version of `glibc'
     older than 2.0.7-5, you should make sure you have installed all
     `glibc' patches!  There is a lot of information about this in the
     MySQL mail archives.  Links to the mail archives are available
     online at `http://www.mysql.com/documentation/'.  Also, see *Note
     Linux::.

     You can also start `mysqld' manually using the
     `--skip-grant-tables' option and add the privilege information
     yourself using `mysql':

          shell> BINDIR/safe_mysqld --skip-grant-tables &
          shell> BINDIR/mysql -u root mysql

     From `mysql', manually execute the SQL commands in
     `mysql_install_db'.  Make sure you run `mysqladmin
     flush-privileges' or `mysqladmin reload' afterward to tell the
     server to reload the grant tables.

Problems Starting the MySQL Server
----------------------------------

If you are going to use tables that support transactions (BDB, InnoDB),
you should first create a my.cnf file and set startup options for the
table types you plan to use. *Note Table types::.

Generally, you start the `mysqld' server in one of three ways:

   * By invoking `mysql.server'.  This script is used primarily at
     system startup and shutdown, and is described more fully in *Note
     Automatic start::.

   * By invoking `safe_mysqld', which tries to determine the proper
     options for `mysqld' and then runs it with those options. *Note
     `safe_mysqld': safe_mysqld.

   * On NT you should install `mysqld' as a service as follows:
          bin\mysqld-nt --install               # Install MySQL as a service

     You can now start/stop `mysqld' as follows:
          NET START mysql
          NET STOP mysql

     Note that in this case you can't use any other options for
     `mysqld'!

     You can remove the service as follows:
          bin\mysqld-nt --remove                # remove MySQL as a service

   * By invoking `mysqld' directly.

When the `mysqld' daemon starts up, it changes directory to the data
directory.  This is where it expects to write log files and the pid
(process ID) file, and where it expects to find databases.

The data directory location is hardwired in when the distribution is
compiled.  However, if `mysqld' expects to find the data directory
somewhere other than where it really is on your system, it will not work
properly.  If you have problems with incorrect paths, you can find out
what options `mysqld' allows and what the default path settings are by
invoking `mysqld' with the `--help' option.  You can override the
defaults by specifying the correct pathnames as command-line arguments
to `mysqld'.  (These options can be used with `safe_mysqld' as well.)

Normally you should need to tell `mysqld' only the base directory under
which MySQL is installed.  You can do this with the `--basedir' option.
You can also use `--help' to check the effect of changing path options
(note that `--help' _must_ be the final option of the `mysqld'
command).  For example:

     shell> EXECDIR/mysqld --basedir=/usr/local --help

Once you determine the path settings you want, start the server without
the `--help' option.

Whichever method you use to start the server, if it fails to start up
correctly, check the log file to see if you can find out why.  Log files
are located in the data directory (typically `/usr/local/mysql/data'
for a binary distribution, `/usr/local/var' for a source distribution,
`\mysql\data\mysql.err' on Windows).  Look in the data directory for
files with names of the form `host_name.err' and `host_name.log' where
`host_name' is the name of your server host.  Then check the last few
lines of these files:

     shell> tail host_name.err
     shell> tail host_name.log

If you find something like the following in the log file:
     000729 14:50:10  bdb:  Recovery function for LSN 1 27595 failed
     000729 14:50:10  bdb:  warning: ./test/t1.db: No such file or directory
     000729 14:50:10  Can't init databases

This means that you didn't start `mysqld' with `--bdb-no-recover' and
Berkeley DB found something wrong with its log files when it tried to
recover your databases.  To be able to continue, you should move away
the old Berkeley DB log file from the database directory to some other
place, where you can later examine these.  The log files are named
`log.0000000001', where the number will increase over time.

If you are running `mysqld' with BDB table support and `mysqld' core
dumps at start this could be because of some problems with the BDB
recover log.  In this case you can try starting `mysqld' with
`--bdb-no-recover'.  If this helps, then you should remove all `log.*'
files from the data directory and try starting `mysqld' again.

If you get the following error, it means that some other program (or
another `mysqld' server) is already using the TCP/IP port or socket
`mysqld' is trying to use:

     Can't start server: Bind on TCP/IP port: Address already in use
       or
     Can't start server : Bind on unix socket...

Use `ps' to make sure that you don't have another `mysqld' server
running.  If you can't find another server running, you can try to
execute the command `telnet your-host-name tcp-ip-port-number' and press
`RETURN' a couple of times.  If you don't get an error message like
`telnet: Unable to connect to remote host: Connection refused',
something is using the TCP/IP port `mysqld' is trying to use.  See
*Note mysql_install_db:: and *Note Multiple servers::.

If `mysqld' is currently running, you can find out what path settings
it is using by executing this command:

     shell> mysqladmin variables

or

     shell> mysqladmin -h 'your-host-name' variables

If `safe_mysqld' starts the server but you can't connect to it, you
should make sure you have an entry in `/etc/hosts' that looks like this:

     127.0.0.1       localhost

This problem occurs only on systems that don't have a working thread
library and for which MySQL must be configured to use MIT-pthreads.

If you can't get `mysqld' to start you can try to make a trace file to
find the problem. *Note Making trace files::.

If you are using InnoDB tables, refer to the InnoDB-specific startup
options.  *Note InnoDB start::.

If you are using BDB (Berkeley DB) tables, you should familiarize
yourself with the different BDB specific startup options.  *Note BDB
start::.

Starting and Stopping MySQL Automatically
-----------------------------------------

The `mysql.server' and `safe_mysqld' scripts can be used to start the
server automatically at system startup time. `mysql.server' can also be
used to stop the server.

The `mysql.server' script can be used to start or stop the server by
invoking it with `start' or `stop' arguments:

     shell> mysql.server start
     shell> mysql.server stop

`mysql.server' can be found in the `share/mysql' directory under the
MySQL installation directory or in the `support-files' directory of the
MySQL source tree.

Before `mysql.server' starts the server, it changes directory to the
MySQL installation directory, then invokes `safe_mysqld'.  You might
need to edit `mysql.server' if you have a binary distribution that
you've installed in a non-standard location.  Modify it to `cd' into
the proper directory before it runs `safe_mysqld'. If you want the
server to run as some specific user, add an appropriate `user' line to
the `/etc/my.cnf' file, as shown later in this section.

`mysql.server stop' brings down the server by sending a signal to it.
You can take down the server manually by executing `mysqladmin
shutdown'.

You might want to add these start and stop commands to the appropriate
places in your `/etc/rc*' files when you start using MySQL for
production applications.  Note that if you modify `mysql.server', then
upgrade MySQL sometime, your modified version will be overwritten, so
you should make a copy of your edited version that you can reinstall.

If your system uses `/etc/rc.local' to start external scripts, you
should append the following to it:
     /bin/sh -c 'cd /usr/local/mysql ; ./bin/safe_mysqld --user=mysql &'

You can also add options for `mysql.server' in a global `/etc/my.cnf'
file.  A typical `/etc/my.cnf' file might look like this:

     [mysqld]
     datadir=/usr/local/mysql/var
     socket=/var/tmp/mysql.sock
     port=3306
     user=mysql
     
     [mysql.server]
     basedir=/usr/local/mysql

The `mysql.server' script understands the following options: `datadir',
`basedir', and `pid-file'.

The following table shows which option groups each of the startup
scripts read from option files:

*Script*       *Option groups*
`mysqld'       `mysqld' and `server'
`mysql.server' `mysql.server', `mysqld', and `server'
`safe_mysqld'  `mysql.server', `mysqld', and `server'

*Note Option files::.

Upgrading/Downgrading MySQL
===========================

You can always move the MySQL form and data files between different
versions on the same architecture as long as you have the same base
version of MySQL. The current base version is 3. If you change the
character set when running MySQL (which may also change the sort
order), you must run `myisamchk -r -q' on all tables.  Otherwise your
indexes may not be ordered correctly.

If you are afraid of new versions, you can always rename your old
`mysqld' to something like `mysqld'-'old-version-number'.  If your new
`mysqld' then does something unexpected, you can simply shut it down
and restart with your old `mysqld'!

When you do an upgrade you should also back up your old databases, of
course.

If after an upgrade, you experience problems with recompiled client
programs, like `Commands out of sync' or unexpected core dumps, you
probably have used an old header or library file when compiling your
programs.  In this case you should check the date for your `mysql.h'
file and `libmysqlclient.a' library to verify that they are from the new
MySQL distribution.  If not, please recompile your programs!

If you get some problems that the new `mysqld' server doesn't want to
start or that you can't connect without a password, check that you don't
have some old `my.cnf' file from your old installation!  You can check
this with: `program-name --print-defaults'.  If this outputs anything
other than the program name, you have an active `my.cnf' file that will
affect things!

It is a good idea to rebuild and reinstall the `Msql-Mysql-modules'
distribution whenever you install a new release of MySQL, particularly
if you notice symptoms such as all your `DBI' scripts dumping core
after you upgrade MySQL.

Upgrading From Version 3.23 to Version 4.0
------------------------------------------

You can use your old data files without any modification with Version
4.0.  If you want to move your data from a MySQL 4.0 server to an older
server, you have to use `mysqldump'.

Old clients should work with a Version 4.0 server without any problems.

The following lists tell what you have to watch out for when upgrading
to version 4.0;

   * `safe_mysqld' is renamed to `mysqld_safe'.

   * The old C API functions `mysql_drop_db', `mysql_create_db' and
     `mysql_connect' are not supported anymore, unless one compiles
     MySQL with `USE_OLD_FUNCTIONS'.   Instead of doing this, one should
     change the client to use the new 4.0 API.

   * In the `MYSQL_FIELD' structure, `length' and `max_length' has
     changed from `unsigned int' to `unsigned long'. This should not
     cause any other problems than some warnings if you use these to
     `printf()' type function.

   * You should use `TRUNCATE TABLE' when you want to delete all rows
     from a table and you don't care of how many rows where deleted.
     (Because `TRUNCATE TABLE' is faster than `DELETE FROM table_name').

   * You will get an error if you have an active `LOCK TABLES' or
     transaction when trying to execute `TRUNCATE TABLE' or `DROP
     DATABASE'.

   * You should use integers to store values in BIGINT columns (instead
     of using strings as you did in MySQL 3.23).  Using strings will
     still work, but using integers is more efficient.

   * Format of `SHOW OPEN TABLE' has changed.

   * Multithreaded clients should use `mysql_thread_init()' and
     `mysql_thread_end()'. *Note Threaded clients::.

Upgrading From Version 3.22 to Version 3.23
-------------------------------------------

MySQL Version 3.23 supports tables of the new `MyISAM' type and the old
`ISAM' type.  You don't have to convert your old tables to use these
with Version 3.23.  By default, all new tables will be created with
type `MyISAM' (unless you start `mysqld' with the
`--default-table-type=isam' option). You can change an `ISAM' table to
a `MyISAM' table with `ALTER TABLE table_name TYPE=MyISAM' or the Perl
script `mysql_convert_table_format'.

Version 3.22 and 3.21 clients will work without any problems with a
Version 3.23 server.

The following lists tell what you have to watch out for when upgrading
to Version 3.23:

   * All tables that uses the `tis620' character set must be fixed with
     `myisamchk -r' or `REPAIR TABLE'.

   * If you do a `DROP DATABASE' on a symbolic linked database, both the
     link and the original database is deleted.  (This didn't happen in
     3.22 because configure didn't detect the `readlink' system call).

   * `OPTIMIZE TABLE' now only works for *MyISAM* tables.  For other
     table types, you can use `ALTER TABLE' to optimize the table.
     During `OPTIMIZE TABLE' the table is now locked from other threads.

   * The MySQL client `mysql' is now by default started with the option
     `--no-named-commands (-g)'. This option can be disabled with
     `--enable-named-commands (-G)'. This may cause incompatibility
     problems in some cases, for example in SQL scripts that use named
     commands without a semicolon!  Long format commands still work
     from the first line.

   * If you are using the `german' character sort order, you must repair
     all your tables with `isamchk -r', as we have made some changes in
     the sort order!

   * The default return type of `IF' will now depend on both arguments
     and not only the first argument.

   * `AUTO_INCREMENT' will not work with negative numbers. The reason
     for this is that negative numbers caused problems when wrapping
     from -1 to 0.  `AUTO_INCREMENT' is now for MyISAM tables handled
     at a lower level and is much faster than before. For MyISAM tables
     old numbers are also not reused anymore, even if you delete some
     rows from the table.

   * `CASE', `DELAYED', `ELSE', `END', `FULLTEXT', `INNER', `RIGHT',
     `THEN' and `WHEN' are now reserved words.

   * `FLOAT(X)' is now a true floating-point type and not a value with a
     fixed number of decimals.

   * When declaring `DECIMAL(length,dec)' the length argument no longer
     includes a place for the sign or the decimal point.

   * A `TIME' string must now be of one of the following formats:
     `[[[DAYS] [H]H:]MM:]SS[.fraction]' or
     `[[[[[H]H]H]H]MM]SS[.fraction]'

   * `LIKE' now compares strings using the same character comparison
     rules as `'=''.  If you require the old behavior, you can compile
     MySQL with the `CXXFLAGS=-DLIKE_CMP_TOUPPER' flag.

   * `REGEXP' is now case insensitive for normal (not binary) strings.

   * When you check/repair tables you should use `CHECK TABLE' or
     `myisamchk' for `MyISAM' tables (`.MYI') and `isamchk' for ISAM
     (`.ISM') tables.

   * If you want your `mysqldump' files to be compatible between MySQL
     Version 3.22 and Version 3.23, you should not use the `--opt' or
     `--full' option to `mysqldump'.

   * Check all your calls to `DATE_FORMAT()' to make sure there is a
     `%' before each format character.  (Later MySQL Version 3.22 did
     allow this syntax.)

   * `mysql_fetch_fields_direct' is now a function (it was a macro) and
     it returns a pointer to a `MYSQL_FIELD' instead of a `MYSQL_FIELD'.

   * `mysql_num_fields()' can no longer be used on a `MYSQL*' object
     (it's now a function that takes `MYSQL_RES*' as an argument. You
     should now use `mysql_field_count()' instead.

   * In MySQL Version 3.22, the output of `SELECT DISTINCT ...' was
     almost always sorted.  In Version 3.23, you must use `GROUP BY' or
     `ORDER BY' to obtain sorted output.

   * `SUM()' now returns `NULL', instead of 0, if there is no matching
     rows. This is according to ANSI SQL.

   * An `AND' or `OR' with `NULL' values will now return `NULL' instead
     of 0. This mostly affects queries that use `NOT' on an `AND/OR'
     expression as `NOT NULL' = `NULL'.  `LPAD()' and `RPAD()' will
     shorten the result string if it's longer than the length argument.

Upgrading from Version 3.21 to Version 3.22
-------------------------------------------

Nothing that affects compatibility has changed between Version 3.21 and
3.22.  The only pitfall is that new tables that are created with `DATE'
type columns will use the new way to store the date. You can't access
these new fields from an old version of `mysqld'.

After installing MySQL Version 3.22, you should start the new server
and then run the `mysql_fix_privilege_tables' script. This will add the
new privileges that you need to use the `GRANT' command.  If you forget
this, you will get `Access denied' when you try to use `ALTER TABLE',
`CREATE INDEX', or `DROP INDEX'. If your MySQL root user requires a
password, you should give this as an argument to
`mysql_fix_privilege_tables'.

The C API interface to `mysql_real_connect()' has changed.  If you have
an old client program that calls this function, you must place a `0' for
the new `db' argument (or recode the client to send the `db' element
for faster connections).  You must also call `mysql_init()' before
calling `mysql_real_connect()'!  This change was done to allow the new
`mysql_options()' function to save options in the `MYSQL' handler
structure.

The `mysqld' variable `key_buffer' has changed names to
`key_buffer_size', but you can still use the old name in your startup
files.

Upgrading from Version 3.20 to Version 3.21
-------------------------------------------

If you are running a version older than Version 3.20.28 and want to
switch to Version 3.21, you need to do the following:

You can start the `mysqld' Version 3.21 server with `safe_mysqld
--old-protocol' to use it with clients from a Version 3.20 distribution.
In this case, the new client function `mysql_errno()' will not return
any server error, only `CR_UNKNOWN_ERROR' (but it works for client
errors), and the server uses the old `password()' checking rather than
the new one.

If you are *NOT* using the `--old-protocol' option to `mysqld', you
will need to make the following changes:

   * All client code must be recompiled. If you are using ODBC, you
     must get the new *MyODBC* 2.x driver.

   * The script `scripts/add_long_password' must be run to convert the
     `Password' field in the `mysql.user' table to `CHAR(16)'.

   * All passwords must be reassigned in the `mysql.user' table (to get
     62-bit rather than 31-bit passwords).

   * The table format hasn't changed, so you don't have to convert any
     tables.

MySQL Version 3.20.28 and above can handle the new `user' table format
without affecting clients. If you have a MySQL version earlier than
Version 3.20.28, passwords will no longer work with it if you convert
the `user' table. So to be safe, you should first upgrade to at least
Version 3.20.28 and then upgrade to Version 3.21.

The new client code works with a 3.20.x `mysqld' server, so if you
experience problems with 3.21.x, you can use the old 3.20.x server
without having to recompile the clients again.

If you are not using the `--old-protocol' option to `mysqld', old
clients will issue the error message:

     ERROR: Protocol mismatch. Server Version = 10 Client Version = 9

The new Perl `DBI'/`DBD' interface also supports the old `mysqlperl'
interface.  The only change you have to make if you use `mysqlperl' is
to change the arguments to the `connect()' function.  The new arguments
are: `host', `database', `user', `password' (the `user' and `password'
arguments have changed places).  *Note Perl `DBI' Class: Perl DBI Class.

The following changes may affect queries in old applications:

   * `HAVING' must now be specified before any `ORDER BY' clause.

   * The parameters to `LOCATE()' have been swapped.

   * There are some new reserved words. The most notable are `DATE',
     `TIME', and `TIMESTAMP'.

Upgrading to Another Architecture
---------------------------------

If you are using MySQL Version 3.23, you can copy the `.frm', `.MYI',
and `.MYD' files between different architectures that support the same
floating-point format.  (MySQL takes care of any byte swapping issues.)

The MySQL `ISAM' data and index files (`.ISD' and `*.ISM',
respectively) are architecture-dependent and in some cases
OS-dependent.  If you want to move your applications to another machine
that has a different architecture or OS than your current machine, you
should not try to move a database by simply copying the files to the
other machine. Use `mysqldump' instead.

By default, `mysqldump' will create a file full of SQL statements.  You
can then transfer the file to the other machine and feed it as input to
the `mysql' client.

Try `mysqldump --help' to see what options are available.  If you are
moving the data to a newer version of MySQL, you should use `mysqldump
--opt' with the newer version to get a fast, compact dump.

The easiest (although not the fastest) way to move a database between
two machines is to run the following commands on the machine on which
the database is located:

     shell> mysqladmin -h 'other hostname' create db_name
     shell> mysqldump --opt db_name \
             | mysql -h 'other hostname' db_name

If you want to copy a database from a remote machine over a slow
network, you can use:

     shell> mysqladmin create db_name
     shell> mysqldump -h 'other hostname' --opt --compress db_name \
             | mysql db_name

You can also store the result in a file, then transfer the file to the
target machine and load the file into the database there.  For example,
you can dump a database to a file on the source machine like this:

     shell> mysqldump --quick db_name | gzip > db_name.contents.gz

(The file created in this example is compressed.) Transfer the file
containing the database contents to the target machine and run these
commands there:

     shell> mysqladmin create db_name
     shell> gunzip < db_name.contents.gz | mysql db_name

You can also use `mysqldump' and `mysqlimport' to accomplish the
database transfer.  For big tables, this is much faster than simply
using `mysqldump'.  In the commands shown below, `DUMPDIR' represents
the full pathname of the directory you use to store the output from
`mysqldump'.

First, create the directory for the output files and dump the database:

     shell> mkdir DUMPDIR
     shell> mysqldump --tab=DUMPDIR db_name

Then transfer the files in the `DUMPDIR' directory to some corresponding
directory on the target machine and load the files into MySQL there:

     shell> mysqladmin create db_name           # create database
     shell> cat DUMPDIR/*.sql | mysql db_name   # create tables in database
     shell> mysqlimport db_name DUMPDIR/*.txt   # load data into tables

Also, don't forget to copy the `mysql' database, because that's where
the grant tables (`user', `db', `host') are stored.  You may have to
run commands as the MySQL `root' user on the new machine until you have
the `mysql' database in place.

After you import the `mysql' database on the new machine, execute
`mysqladmin flush-privileges' so that the server reloads the grant table
information.

Operating System Specific Notes
===============================

Linux Notes (All Linux Versions)
--------------------------------

The notes below regarding *glibc* apply only to the situation when you
build MySQL yourself. If you are running Linux on an x86 machine, in
most cases it is much better for you to just use our binary. We link
our binaries against the best patched version of *glibc* we can come up
with and with the best compiler options, in an attempt to make it
suitable for a high-load server. So if you read the text below, and are
in doubt about what you should do, try our binary first to see if it
meets your needs, and worry about your own build only after you have
discovered that our binary is not good enough. In that case, we would
appreciate a note about it, so we can build a better binary next time.
For a typical user, even for setups with a lot of concurrent
connections and/or tables exceeding 2GB limit, our binary in most cases
is the best choice.

MySQL uses LinuxThreads on Linux.  If you are using an old Linux
version that doesn't have `glibc2', you must install LinuxThreads
before trying to compile MySQL.   You can get LinuxThreads at
`http://www.mysql.com/Downloads/Linux'.

*NOTE:* We have seen some strange problems with Linux 2.2.14 and MySQL
on SMP systems; If you have a SMP system, we recommend you to upgrade
to Linux 2.4 ASAP!  Your system will be faster and more stable by doing
this!

Note that `glibc' versions before and including Version 2.1.1 have a
fatal bug in `pthread_mutex_timedwait' handling, which is used when you
do `INSERT DELAYED'.  We recommend you to not use `INSERT DELAYED'
before upgrading glibc.

If you plan to have 1000+ concurrent connections, you will need to make
some changes to LinuxThreads, recompile it, and relink MySQL against
the new `libpthread.a'.  Increase `PTHREAD_THREADS_MAX' in
`sysdeps/unix/sysv/linux/bits/local_lim.h' to 4096 and decrease
`STACK_SIZE' in `linuxthreads/internals.h' to 256 KB. The paths are
relative to the root of `glibc' Note that MySQL will not be stable with
around 600-1000 connections if `STACK_SIZE' is the default of 2 MB.

If you have a problem with that MySQL can't open enough files, or
connections, it may be that you haven't configured Linux to handle
enough files.

In Linux 2.2 and forwards, you can check the number of allocated file
handlers by doing:

     cat /proc/sys/fs/file-max
     cat /proc/sys/fs/dquot-max
     cat /proc/sys/fs/super-max

If you have more than 16M of memory, you should add something like the
following in your boot script (`/etc/rc/boot.local' on SuSE):

     echo 65536 > /proc/sys/fs/file-max
     echo 8192 > /proc/sys/fs/dquot-max
     echo 1024 > /proc/sys/fs/super-max

You can also run the above from the command line as root, but in this
case your old limits will be used next time your computer reboots.

You should also add /etc/my.cnf:

     [safe_mysqld]
     open-files-limit=8192

The above should allow MySQL to create up to 8192 connections + files.

The `STACK_SIZE' constant in LinuxThreads controls the spacing of thread
stacks in the address space.  It needs to be large enough so that there
will be plenty of room for the stack of each individual thread, but
small enough to keep the stack of some thread from running into the
global `mysqld' data.  Unfortunately, the Linux implementation of
`mmap()', as we have experimentally discovered, will successfully unmap
an already mapped region if you ask it to map out an address already in
use, zeroing out the data on the entire page, instead of returning an
error.  So, the safety of `mysqld' or any other threaded application
depends on the "gentleman" behavior of the code that creates threads.
The user must take measures to make sure the number of running threads
at any time is sufficiently low for thread stacks to stay away from the
global heap.  With `mysqld', you should enforce this "gentleman"
behavior by setting a reasonable value for the `max_connections'
variable.

If you build MySQL yourself and do not want to mess with patching
LinuxThreads, you should set `max_connections' to a value no higher
than 500.  It should be even less if you have a large key buffer,  large
heap tables, or some other things that make `mysqld' allocate a lot of
memory or if you are running a 2.2 kernel with a 2GB patch. If you are
using our binary or RPM version 3.23.25 or later, you can safely set
`max_connections' at 1500, assuming no large key buffer or heap tables
with lots of data.  The more you reduce `STACK_SIZE' in LinuxThreads
the more threads you can safely create.  We recommend the values between
128K and 256K.

If you use a lot of concurrent connections, you may suffer from a
"feature" in the 2.2 kernel that penalizes a process for forking or
cloning a child in an attempt to prevent a fork bomb attack.  This will
cause MySQL not to scale well as you increase the number of concurrent
clients.  On single CPU systems, we have seen this manifested in a very
slow thread creation, which means it may take a long time to connect to
MySQL (as long as 1 minute), and it may take just as long to shut it
down.  On multiple CPU systems, we have observed a gradual drop in
query speed as the number of clients increases.  In the process of
trying to find a solution, we have received a kernel patch from one of
our users, who claimed it made a lot of difference for his site.  The
patch is available here
(`http://www.mysql.com/Downloads/Patches/linux-fork.patch'). We have
now done rather extensive testing of this patch on both development and
production systems.  It has significantly improved `MySQL' performance
without causing any problems and we now recommend it to our users who
are still running high-load servers on 2.2 kernels.  This issue has
been fixed in the 2.4 kernel, so if you are not satisfied with the
current performance of your system, rather than patching your 2.2
kernel, it might be easier to just upgrade to 2.4, which will also give
you a nice SMP boost in addition to fixing this fairness bug.

We have tested MySQL on the 2.4 kernel on a 2 CPU machine and found
MySQL scales MUCH better - there was virtually no slowdown on query
throughput all the way up to 1000 clients, and MySQL scaling factor (
computed as the ratio of maximum throughput to the throughput with one
client) was 180%.  We have observed similar results on a 4-CPU system -
virtually no slowdown as the number of clients was increased up to
1000, and 300% scaling factor. So for a high-load SMP server we would
definitely recommend the 2.4 kernel at this point. We have discovered
that it is essential to run `mysqld' process with the highest possible
priority on the 2.4 kernel to achieve maximum performance.  This can be
done by adding `renice -20 $$' command to `safe_mysqld'. In our testing
on a 4-CPU machine, increasing the priority gave 60% increase in
throughput with 400 clients.

We are currently also trying to collect more info on how well `MySQL'
performs on 2.4 kernel on 4-way and 8-way systems. If you have access
such a system and have done some benchmarks, please send a mail to
<docs@mysql.com> with the results - we will include them in the manual.

There is another issue that greatly hurts MySQL performance, especially
on SMP systems.  The implementation of mutex in LinuxThreads in
*glibc-2.1* is very bad for programs with many threads that only hold
the mutex for a short time. On an SMP system, ironic as it is, if you
link MySQL against unmodified *LinuxThreads*, removing processors from
the machine improves MySQL performance in many cases.  We have made a
patch available for *glibc 2.1.3*, linuxthreads-2.1-patch
(http://www.mysql.com/Downloads/Linux/linuxthreads-2.1-patch) to
correct this behavior.

With *glibc-2.2.2* MySQL version 3.23.36 will use the adaptive mutex,
which is much better than even the patched one in *glibc-2.1.3*. Be
warned, however, that under some conditions, the current mutex code in
*glibc-2.2.2* overspins, which hurts MySQL performance. The chance of
this condition can be reduced by renicing `mysqld' process to the
highest priority. We have also been able to correct the overspin
behavior with a patch, available here
(http://www.mysql.com/Downloads/Linux/linuxthreads-2.2.2.patch). It
combines the correction of overspin, maximum number of threads, and
stack spacing all in one. You will need to apply it in the
`linuxthreads' directory with `patch -p0
</tmp/linuxthreads-2.2.2.patch'.  We hope it will be included in some
form in to the future releases of `glibc-2.2'. In any case, if you link
against `glibc-2.2.2' you still need to correct `STACK_SIZE' and
`PTHREAD_THREADS_MAX'. We hope that the defaults will be corrected to
some more acceptable values for high-load MySQL setup in the future, so
that your own build can be reduced to `./configure; make; make install'.

We recommend that you use the above patches to build a special static
version of `libpthread.a' and use it only for statically linking
against `MySQL'. We know that the patches are safe for `MySQL' and
significantly improve its performance, but we cannot say anything about
other applications. If you link other applications against the patched
version of the library, or build a patched shared version and install
it on your system, you are doing it at your own risk with regard to
other applications that depend on `LinuxThreads'.

If you experience any strange problems during the installation of
MySQL, or with some common utilties hanging, it is very likely that
they are either library or compiler related. If this is the case, using
our binary will resolve them.

One known problem with the binary distribution is that with older Linux
systems that use `libc' (like RedHat 4.x or Slackware), you will get
some non-fatal problems with hostname resolution.  *Note Binary
notes-Linux::.

When using LinuxThreads you will see a minimum of three processes
running.  These are in fact threads.  There will be one thread for the
LinuxThreads manager, one thread to handle connections, and one thread
to handle alarms and signals.

Note that the Linux kernel and the LinuxThread library can by default
only have 1024 threads.  This means that you can only have up to 1021
connections to MySQL on an unpatched system.  The page
`http://www.volano.com/linuxnotes.html' contains information how to go
around this limit.

If you see a dead `mysqld' daemon process with `ps', this usually means
that you have found a bug in MySQL or you have a corrupted table. *Note
Crashing::.

To get a core dump on Linux if `mysqld' dies with a SIGSEGV signal, you
can start `mysqld' with the `--core-file' option.  Note that you also
probably need to raise the `core file size' by adding `ulimit -c
1000000' to `safe_mysqld' or starting `safe_mysqld' with
`--core-file-sizes=1000000'. *Note `safe_mysqld': safe_mysqld.

To get a core dump on Linux if `mysqld' dies with a SIGSEGV signal, you
can start `mysqld' with the `--core-file' option.  Note that you also
probably need to raise the `core file size' by adding `ulimit -c
1000000' to `safe_mysqld' or starting `safe_mysqld' with
`--core-file-sizes=1000000'.  *Note `safe_mysqld': safe_mysqld.

If you are linking your own MySQL client and get the error:

     ld.so.1: ./my: fatal: libmysqlclient.so.4: open failed: No such file or directory

When executing them, the problem can be avoided by one of the following
methods:

   * Link the client with the following flag (instead of `-Lpath'):
     `-Wl,r/path-libmysqlclient.so'.

   * Copy `libmysqclient.so' to `/usr/lib'.

   * Add the pathname of the directory where `libmysqlclient.so' is
     located to the `LD_RUN_PATH' environment variable before running
     your client.

If you are using the Fujitsu compiler `(fcc / FCC)' you will have some
problems compiling MySQL because the Linux header files are very `gcc'
oriented.

The following `configure' line should work with `fcc/FCC':

     CC=fcc CFLAGS="-O -K fast -K lib -K omitfp -Kpreex -D_GNU_SOURCE -DCONST=const -DNO_STRTOLL_PROTO" CXX=FCC CXXFLAGS="-O -K fast -K lib  -K omitfp -K preex --no_exceptions --no_rtti -D_GNU_SOURCE -DCONST=const -Dalloca=__builtin_alloca -DNO_STRTOLL_PROTO '-D_EXTERN_INLINE=static __inline'" ./configure --prefix=/usr/local/mysql --enable-assembler --with-mysqld-ldflags=-all-static --disable-shared --with-low-memory

Linux Notes for Binary Distributions
....................................

MySQL needs at least Linux Version 2.0.

*WARNING*: We have have reports from some MySQL users that they have
got serious stability problems with MySQL with Linux kernel 2.2.14.  If
you are using this kernel you should upgrade to 2.2.19 (or newer) or to
a 2.4 kernel.  If you have a multi-cpu box, then you should seriously
consider using 2.4 as this will give you a significant speed boost.

The binary release is linked with `-static', which means you do not
normally need to worry about which version of the system libraries you
have. You need not install LinuxThreads, either.  A program linked with
`-static' is slightly bigger than a dynamically linked program but also
slightly faster (3-5%).  One problem, however, is that you can't use
user-definable functions (UDFs) with a statically linked program.  If
you are going to write or use UDF functions (this is something only for
C or C++ programmers), you must compile MySQL yourself, using dynamic
linking.

If you are using a `libc'-based system (instead of a `glibc2' system),
you will probably get some problems with hostname resolving and
`getpwnam()' with the binary release. (This is because `glibc'
unfortunately depends on some external libraries to resolve hostnames
and `getpwent()', even when compiled with `-static'). In this case you
probably get the following error message when you run
`mysql_install_db':

     Sorry, the host 'xxxx' could not be looked up

or the following error when you try to run `mysqld' with the `--user'
option:

     getpwnam: No such file or directory

You can solve this problem in one of the following ways:

   * Get a MySQL source distribution (an RPM or the `tar.gz'
     distribution) and install this instead.

   * Execute `mysql_install_db --force'; This will not execute the
     `resolveip' test in `mysql_install_db'.  The downside is that you
     can't use host names in the grant tables; you must use IP numbers
     instead (except for `localhost').  If you are using an old MySQL
     release that doesn't support `--force', you have to remove the
     `resolveip' test in `mysql_install' with an editor.

   * Start `mysqld' with `su' instead of using `--user'.

The Linux-Intel binary and RPM releases of MySQL are configured for the
highest possible speed.  We are always trying to use the fastest stable
compiler available.

MySQL Perl support requires Version Perl 5.004_03 or newer.

On some Linux 2.2 versions, you may get the error `Resource temporarily
unavailable' when you do a lot of new connections to a `mysqld' server
over TCP/IP.

The problem is that Linux has a delay between when you close a TCP/IP
socket and until this is actually freed by the system.  As there is only
room for a finite number of TCP/IP slots, you will get the above error
if you try to do too many new TCP/IP connections during a small time,
like when you run the MySQL `test-connect' benchmark over TCP/IP.

We have mailed about this problem a couple of times to different Linux
mailing lists but have never been able to resolve this properly.

The only known 'fix' to this problem is to use persistent connections in
your clients or use sockets, if you are running the database server and
clients on the same machine.  We hope that the `Linux 2.4' kernel will
fix this problem in the future.

Linux x86 Notes
...............

MySQL requires `libc' Version 5.4.12 or newer. It's known to work with
`libc' 5.4.46.  `glibc' Version 2.0.6 and later should also work. There
have been some problems with the `glibc' RPMs from RedHat, so if you
have problems, check whether or not there are any updates!  The `glibc'
2.0.7-19 and 2.0.7-29 RPMs are known to work.

On some older Linux distributions, `configure' may produce an error
like this:

     Syntax error in sched.h. Change _P to __P in the /usr/include/sched.h file.
     See the Installation chapter in the Reference Manual.

Just do what the error message says and add an extra underscore to the
`_P' macro that has only one underscore, then try again.

You may get some warnings when compiling; those shown below can be
ignored:

     mysqld.cc -o objs-thread/mysqld.o
     mysqld.cc: In function `void init_signals()':
     mysqld.cc:315: warning: assignment of negative value `-1' to `long unsigned int'
     mysqld.cc: In function `void * signal_hand(void *)':
     mysqld.cc:346: warning: assignment of negative value `-1' to `long unsigned int'

In Debian GNU/Linux, if you want MySQL to start automatically when the
system boots, do the following:

     shell> cp support-files/mysql.server /etc/init.d/mysql.server
     shell> /usr/sbin/update-rc.d mysql.server defaults 99

`mysql.server' can be found in the `share/mysql' directory under the
MySQL installation directory or in the `support-files' directory of the
MySQL source tree.

If `mysqld' always core dumps when it starts up, the problem may be that
you have an old `/lib/libc.a'.  Try renaming it, then remove
`sql/mysqld' and do a new `make install' and try again.  This problem
has been reported on some Slackware installations.

If you get the following error when linking `mysqld', it means that
your `libg++.a' is not installed correctly:

     /usr/lib/libc.a(putc.o): In function `_IO_putc':
     putc.o(.text+0x0): multiple definition of `_IO_putc'

You can avoid using `libg++.a' by running `configure' like this:

     shell> CXX=gcc ./configure

Linux SPARC Notes
.................

In some implementations, `readdir_r()' is broken.  The symptom is that
`SHOW DATABASES' always returns an empty set.  This can be fixed by
removing `HAVE_READDIR_R' from `config.h' after configuring and before
compiling.

Some problems will require patching your Linux installation.  The patch
can be found at
`http://www.mysql.com/Downloads/patches/Linux-sparc-2.0.30.diff'.  This
patch is against the Linux distribution `sparclinux-2.0.30.tar.gz' that
is available at `vger.rutgers.edu' (a version of Linux that was never
merged with the official 2.0.30).  You must also install LinuxThreads
Version 0.6 or newer.

Linux Alpha Notes
.................

MySQL Version 3.23.12 is the first MySQL version that is tested on
Linux-Alpha.  If you plan to use MySQL on Linux-Alpha, you should
ensure that you have this version or newer.

We have tested MySQL on Alpha with our benchmarks and test suite, and
it appears to work nicely.  The main thing we haven't yet had time to
test is how things works with many concurrent users.

When we compiled the standard MySQL binary we are using SuSE 6.4,
kernel 2.2.13-SMP, Compaq C compiler (V6.2-504) and Compaq C++ compiler
(V6.3-005) on a Comaq DS20 machine with an Alpha EV6 processor.

You can find the above compilers at
`http://www.support.compaq.com/alpha-tools').  By using these compilers,
instead of gcc, we get about 9-14 % better performance with MySQL.

Note that the configure line optimized the binary for the current CPU;
This means you can only use our binary if you have an Alpha EV6
processor. We also compile statically to avoid library problems.

     CC=ccc CFLAGS="-fast" CXX=cxx CXXFLAGS="-fast -noexceptions -nortti" ./configure --prefix=/usr/local/mysql --disable-shared --with-extra-charsets=complex --enable-thread-safe-client --with-mysqld-ldflags=-non_shared --with-client-ldflags=-non_shared

If you want to use egcs the following configure line worked for us:

     CFLAGS="-O3 -fomit-frame-pointer" CXX=gcc CXXFLAGS="-O3 -fomit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --disable-shared

Some known problems when running MySQL on Linux-Alpha:

   * Debugging threaded applications like MySQL will not work with `gdb
     4.18'.  You should download and use gdb 5.0 instead!

   * If you try linking `mysqld' statically when using `gcc', the
     resulting image will core dump at start.  In other words, *DON'T*
     use `--with-mysqld-ldflags=-all-static' with `gcc'.

Linux PowerPC Notes
...................

MySQL should work on MkLinux with the newest `glibc' package (tested
with `glibc' 2.0.7).

Linux MIPS Notes
................

To get MySQL to work on Qube2, (Linux Mips), you need the newest
`glibc' libraries (`glibc-2.0.7-29C2' is known to work).  You must also
use the `egcs' C++ compiler (`egcs-1.0.2-9', `gcc 2.95.2' or newer).

Linux IA64 Notes
................

To get MySQL to compile on Linux Ia64, we use the following compile
line: Using `gcc-2.96':

     CC=gcc CFLAGS="-O3 -fno-omit-frame-pointer" CXX=gcc CXXFLAGS="-O3 -fno-omit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql "--with-comment=Official MySQL binary" --with-extra-charsets=complex

On Ia64 the MySQL client binaries are using shared libraries. This means
that if you install our binary distribution in some other place than
`/usr/local/mysql' you need to either modify `/etc/ld.so.conf' or add
the path to the directory where you have `libmysqlclient.so' to the
`LD_LIBRARY_PATH' environment variable.

*Note Link errors::.

Windows Notes
-------------

This section describes installation and use of MySQL on Windows.  This
information is also provided in the `README' file that comes with the
MySQL Windows distribution.

Starting MySQL on Windows 95 or Windows 98
..........................................

MySQL uses TCP/IP to connect a client to a server. (This will allow any
machine on your network to connect to your MySQL server.)  Because of
this, you must install TCP/IP on your machine before starting MySQL.
You can find TCP/IP on your Windows CD-ROM.

Note that if you are using an old Win95 release (for example OSR2), it's
likely that you have an old Winsock package!  MySQL requires Winsock 2!
You can get the newest Winsock from `http://www.microsoft.com/'.
Win98 has the new Winsock 2 library, so the above doesn't apply for
Win98.

To start the `mysqld' server, you should start an MS-DOS window and
type:

     C:\> C:\mysql\bin\mysqld

This will start `mysqld' in the background without a window.

You can kill the MySQL server by executing:

     C:\> C:\mysql\bin\mysqladmin -u root shutdown

Note that Win95 and Win98 don't support creation of named pipes.  On
Win95 and Win98, you can only use named pipes to connect to a remote
MySQL server running on a Windows NT server host.  (The MySQL server
must also support named pipes, of course. For example, using
`mysqld-opt' under NT will not allow named pipe connections.  You
should use either `mysqld-nt' or `mysqld-max-nt'.)

If `mysqld' doesn't start, please check the `\mysql\data\mysql.err'
file to see if the server wrote any message there to indicate the cause
of the problem.  You can also try to start the server with `mysqld
--standalone';  In this case, you may get some useful information on
the screen that may help solve the problem.

The last option is to start `mysqld' with `--standalone --debug'.  In
this case `mysqld' will write a log file `C:\mysqld.trace' that should
contain the reason why `mysqld' doesn't start. *Note Making trace
files::.

Starting MySQL on Windows NT or Windows 2000
............................................

The Win95/Win98 section also applies to MySQL on NT/Win2000, with the
following differences:

To get MySQL to work with TCP/IP on NT, you must install service pack 3
(or newer)!

Note that everything in the following that applies for NT also applies
for Win2000!

For NT/Win2000, the server name is `mysqld-nt'.  Normally you should
install MySQL as a service on NT/Win2000:

     C:\> C:\mysql\bin\mysqld-nt --install

or

     C:\> C:\mysql\bin\mysqld-max-nt --install

(Under Windows NT, you can actually install any of the server binaries
as a service, but only those having names that end with `-nt.exe'
provide support for named pipes.)

You can start and stop the MySQL service with these commands:

     C:\> NET START mysql
     C:\> NET STOP mysql

Note that in this case you can't use any other options for `mysqld-nt'!

You can also run `mysqld-nt' as a stand-alone program on NT if you need
to start `mysqld-nt' with any options!  If you start `mysqld-nt'
without options on NT, `mysqld-nt' tries to start itself as a service
with the default service options.  If you have stopped `mysqld-nt', you
have to start it with `NET START mysql'.

The service is installed with the name `MySQL'. Once installed, it must
be started using the Services Control Manager (SCM) Utility found in the
Control Panel, or by using the `NET START MySQL' command.  If any
options are desired, they must be specified as "Startup parameters" in
the SCM utility before you start the MySQL service.  Once running,
`mysqld-nt' can be stopped using `mysqladmin', or from the SCM utility
or by using the command `NET STOP MySQL'. If you use SCM to stop
`mysqld-nt', there is a strange message from SCM about `mysqld shutdown
normally'.  When run as a service, `mysqld-nt' has no access to a
console and so no messages can be seen.

On NT you can get the following service error messages:

Permission Denied      Means that it cannot find `mysqld-nt.exe'.
Cannot Register        Means that the path is incorrect.
Failed to install      Means that the service is already installed or
service.               that the Service Control Manager is in bad state.

If you have problems installing `mysqld-nt' as a service, try starting
it with the full path:

     C:\> C:\mysql\bin\mysqld-nt --install

If this doesn't work, you can get `mysqld-nt' to start properly by
fixing the path in the registry!

If you don't want to start `mysqld-nt' as a service, you can start it as
follows:

     C:\> C:\mysql\bin\mysqld-nt --standalone

or

     C:\> C:\mysql\bin\mysqld --standalone --debug

The last version gives you a debug trace in `C:\mysqld.trace'.  *Note
Making trace files::.

Running MySQL on Windows
........................

MySQL supports TCP/IP on all Windows platforms and named pipes on NT.
The default is to use named pipes for local connections on NT and
TCP/IP for all other cases if the client has TCP/IP installed.  The
host name specifies which protocol is used:

*Host name*            *Protocol*
NULL (none)            On NT, try named pipes first; if that doesn't
                       work, use TCP/IP. On Win95/Win98, TCP/IP is used.
.                      Named pipes
localhost              TCP/IP to current host
hostname               TCP/IP

You can force a MySQL client to use named pipes by specifying the
`--pipe' option or by specifying `.' as the host name.  Use the
`--socket' option to specify the name of the pipe.

You can test whether or not MySQL is working by executing the following
commands:

     C:\> C:\mysql\bin\mysqlshow
     C:\> C:\mysql\bin\mysqlshow -u root mysql
     C:\> C:\mysql\bin\mysqladmin version status proc
     C:\> C:\mysql\bin\mysql test

If `mysqld' is slow to answer to connections on Win95/Win98, there is
probably a problem with your DNS.  In this case, start `mysqld' with
`--skip-name-resolve' and use only `localhost' and IP numbers in the
MySQL grant tables.  You can also avoid DNS when connecting to a
`mysqld-nt' MySQL server running on NT by using the `--pipe' argument
to specify use of named pipes.  This works for most MySQL clients.

There are two versions of the MySQL command-line tool:
`mysql'            Compiled on native Windows, which offers very limited
                   text editing capabilities.
`mysqlc'           Compiled with the Cygnus GNU compiler and libraries,
                   which offers `readline' editing.

If you want to use `mysqlc.exe', you must copy
`C:\mysql\lib\cygwinb19.dll' to your Windows system directory
(`\windows\system' or similar place).

The default privileges on Windows give all local users full privileges
to all databases without specifying a password.  To make MySQL more
secure, you should set a password for all users and remove the row in
the `mysql.user' table that has `Host='localhost'' and `User='''.

You should also add a password for the `root' user. The following
example starts by removing the anonymous user that can be used by anyone
to access the `test' database, then sets a `root' user password:

     C:\> C:\mysql\bin\mysql mysql
     mysql> DELETE FROM user WHERE Host='localhost' AND User='';
     mysql> QUIT
     C:\> C:\mysql\bin\mysqladmin reload
     C:\> C:\mysql\bin\mysqladmin -u root password your_password

After you've set the password, if you want to take down the `mysqld'
server, you can do so using this command:

     C:\> mysqladmin --user=root --password=your_password shutdown

If you are using the old shareware version of MySQL Version 3.21 under
Windows, the above command will fail with an error: `parse error near
'SET OPTION password''.  The fix is in to upgrade to the current MySQL
version, which is freely available.

With the current MySQL versions you can easily add new users and change
privileges with `GRANT' and `REVOKE' commands.  *Note GRANT::.

Connecting to a Remote MySQL from Windows with SSH
..................................................

Here is a note about how to connect to get a secure connection to remote
MySQL server with SSH (by David Carlson <dcarlson@mplcomm.com>):

   * Install an SSH client on your Windows machine.  As a user, the
     best non-free one I've found is from `SecureCRT' from
     `http://www.vandyke.com/'.  Another option is `f-secure' from
     `http://www.f-secure.com/'. You can also find some free ones on
     *Google* at
     `http://directory.google.com/Top/Computers/Security/Products_and_Tools/Cryptography/SSH/Clients/Windows/'.

   * Start your Windows SSH client.  Set `Host_Name =
     yourmysqlserver_URL_or_IP'.  Set `userid=your_userid' to log in to
     your server (probably not the same as your MySQL login/password.

   * Set up port forwarding. Either do a remote forward (Set
     `local_port: 3306', `remote_host: yourmysqlservername_or_ip',
     `remote_port: 3306' ) or a local forward (Set `port: 3306',
     `host: localhost', `remote port: 3306').

   * Save everything, otherwise you'll have to redo it the next time.

   * Log in to your server with SSH session you just created.

   * On your Windows machine, start some ODBC application (such as
     Access).

   * Create a new file in Windows and link to MySQL using the ODBC
     driver the same way you normally do, EXCEPT type in `localhost'
     for the MySQL host server -- not `yourmysqlservername'.

You should now have an ODBC connection to MySQL, encrypted using SSH.

Splitting Data Across Different Disks on Windows
................................................

Beginning with MySQL Version 3.23.16, the `mysqld-max' and
`mysql-max-nt' servers in the MySQL distribution are compiled with the
`-DUSE_SYMDIR' option.  This allows you to put a database on different
disk by adding a symbolic link to it (in a manner similar to the way
that symbolic links work on Unix).

On Windows, you make a symbolic link to a database by creating a file
that contains the path to the destination directory and saving this in
the `mysql_data' directory under the filename `database.sym'.  Note
that the symbolic link will be used only if the directory
`mysql_data_dir\database' doesn't exist.

For example, if the MySQL data directory is `C:\mysql\data' and you
want to have database `foo' located at `D:\data\foo', you should create
the file `C:\mysql\data\foo.sym' that contains the text `D:\data\foo\'.
After that, all tables created in the database `foo' will be created
in `D:\data\foo'.

Note that because of the speed penalty you get when opening every table,
we have not enabled this by default even if you have compiled MySQL
with support for this. To enable symlinks you should put in your
`my.cnf' or `my.ini' file the following entry:

     [mysqld]
     use-symbolic-links

In MySQL 4.0 we will enable symlinks by default. Then you should
instead use the `skip-symlink' option if you want to disable this.

Compiling MySQL Clients on Windows
..................................

In your source files, you should include `windows.h' before you include
`mysql.h':

     #if defined(_WIN32) || defined(_WIN64)
     #include <windows.h>
     #endif
     #include <mysql.h>

You can either link your code with the dynamic `libmysql.lib' library,
which is just a wrapper to load in `libmysql.dll' on demand, or link
with the static `mysqlclient.lib' library.

Note that as the mysqlclient libraries are compiled as threaded
libraries, you should also compile your code to be multi-threaded!

MySQL-Windows Compared to Unix MySQL
....................................

MySQL-Windows has by now proven itself to be very stable. This version
of MySQL has the same features as the corresponding Unix version with
the following exceptions:

*Win95 and threads*
     Win95 leaks about 200 bytes of main memory for each thread
     creation.  Each connection in MySQL creates a new thread, so you
     shouldn't run `mysqld' for an extended time on Win95 if your
     server handles many connections!  WinNT and Win98 don't suffer
     from this bug.

*Concurrent reads*
     MySQL depends on the `pread()' and `pwrite()' calls to be able to
     mix `INSERT' and `SELECT'.  Currently we use mutexes to emulate
     `pread()'/`pwrite()'.  We will, in the long run, replace the file
     level interface with a virtual interface so that we can use the
     `readfile()'/`writefile()' interface on NT to get more speed.  The
     current implementation limits the number of open files MySQL can
     use to 1024, which means that you will not be able to run as many
     concurrent threads on NT as on Unix.

*Blocking read*
     MySQL uses a blocking read for each connection.  This means that:

        * A connection will not be disconnected automatically after 8
          hours, as happens with the Unix version of MySQL.

        * If a connection hangs, it's impossible to break it without
          killing MySQL.

        * `mysqladmin kill' will not work on a sleeping connection.

        * `mysqladmin shutdown' can't abort as long as there are
          sleeping connections.

     We plan to fix this problem when our Windows developers have
     figured out a nice workaround.

*UDF functions*
     For the moment, MySQL-Windows does not support user-definable
     functions.

*`DROP DATABASE'*
     You can't drop a database that is in use by some thread.

*Killing MySQL from the task manager*
     You can't kill MySQL from the task manager or with the shutdown
     utility in Win95.  You must take it down with `mysqladmin
     shutdown'.

*Case-insensitive names*
     Filenames are case insensitive on Windows, so database and table
     names are also case insensitive in MySQL for Windows.  The only
     restriction is that database and table names must be specified
     using the same case throughout a given statement.  *Note Name case
     sensitivity::.

*The `\' directory character*
     Pathname components in Win95 are separated by the `\' character,
     which is also the escape character in MySQL.  If you are using
     `LOAD DATA INFILE' or `SELECT ... INTO OUTFILE', you must double
     the `\' character:

          mysql> LOAD DATA INFILE "C:\\tmp\\skr.txt" INTO TABLE skr;
          mysql> SELECT * INTO OUTFILE 'C:\\tmp\\skr.txt' FROM skr;

     Alternatively, use Unix style filenames with `/' characters:

          mysql> LOAD DATA INFILE "C:/tmp/skr.txt" INTO TABLE skr;
          mysql> SELECT * INTO OUTFILE 'C:/tmp/skr.txt' FROM skr;

*`Can't open named pipe' error*
     If you use a MySQL 3.22 version on NT with the newest mysql-clients
     you will get the following error:

          error 2017: can't open named pipe to host: . pipe...

     This is because the release version of MySQL uses named pipes on NT
     by default.  You can avoid this error by using the
     `--host=localhost' option to the new MySQL clients or create an
     option file `C:\my.cnf' that contains the following information:

          [client]
          host = localhost

*`Access denied for user' error*
     If you get the error `Access denied for user: 'some-user@unknown'
     to database 'mysql'' when accessing a MySQL server on the same
     machine, this means that MySQL can't resolve your host name
     properly.

     To fix this, you should create a file `\windows\hosts' with the
     following information:

          127.0.0.1       localhost

*`ALTER TABLE'*
     While you are executing an `ALTER TABLE' statement, the table is
     locked from usage by other threads.  This has to do with the fact
     that on Windows, you can't delete a file that is in use by another
     threads.  (In the future, we may find some way to work around this
     problem.)

*`DROP TABLE' on a table that is in use by a `MERGE' table will not work*
     The `MERGE' handler does its table mapping hidden from MySQL.
     Because Windows doesn't allow you to drop files that are open, you
     first must flush all `MERGE' tables (with `FLUSH TABLES') or drop
     the `MERGE' table before dropping the table.  We will fix this at
     the same time we introduce `VIEW's.

Here are some open issues for anyone who might want to help us with the
Windows release:

   * Make a single-user `MYSQL.DLL' server.  This should include
     everything in a standard MySQL server, except thread creation.
     This will make MySQL much easier to use in applications that don't
     need a true client/server and don't need to access the server from
     other hosts.

   * Add some nice start and shutdown icons to the MySQL installation.

   * Create a tool to manage registry entries for the MySQL startup
     options.  The registry entry reading is already coded into
     `mysqld.cc', but it should be recoded to be more parameter
     oriented.  The tool should also be able to update the `C:\my.cnf'
     option file if the user prefers to use that instead of the
     registry.

   * When registering `mysqld' as a service with `--install' (on NT) it
     would be nice if you could also add default options on the command
     line.  For the moment, the workaround is to list the parameters in
     the `C:\my.cnf' file instead.

   * It would be real nice to be able to kill `mysqld' from the task
     manager.  For the moment, you must use `mysqladmin shutdown'.

   * Port `readline' to Windows for use in the `mysql' command line
     tool.

   * GUI versions of the standard MySQL clients (`mysql', `mysqlshow',
     `mysqladmin', and `mysqldump') would be nice.

   * It would be nice if the socket read and write functions in `net.c'
     were interruptible. This would make it possible to kill open
     threads with `mysqladmin kill' on Windows.

   * `mysqld' always starts in the "C" locale and not in the default
     locale.  We would like to have `mysqld' use the current locale for
     the sort order.

   * Implement UDF functions with `.DLL's.

   * Add macros to use the faster thread-safe increment/decrement
     methods provided by Windows.


Other Windows-specific issues are described in the `README' file that
comes with the MySQL-Windows distribution.

Solaris Notes
-------------

On Solaris, you may run into trouble even before you get the MySQL
distribution unpacked!  Solaris `tar' can't handle long file names, so
you may see an error like this when you unpack MySQL:

     x mysql-3.22.12-beta/bench/Results/ATIS-mysql_odbc-NT_4.0-cmp-db2,informix,ms-sql,mysql,oracle,solid,sybase, 0 bytes, 0 tape blocks
     tar: directory checksum error

In this case, you must use GNU `tar' (`gtar') to unpack the
distribution.  You can find a precompiled copy for Solaris at
`http://www.mysql.com/Downloads/'.

Sun native threads work only on Solaris 2.5 and higher.  For Version
2.4 and earlier, MySQL will automatically use MIT-pthreads.  *Note
MIT-pthreads::.

If you get the following error from configure:

     checking for restartable system calls... configure: error can not run test
     programs while cross compiling

This means that you have something wrong with your compiler
installation!  In this case you should upgrade your compiler to a newer
version.  You may also be able to solve this problem by inserting the
following row into the `config.cache' file:

     ac_cv_sys_restartable_syscalls=${ac_cv_sys_restartable_syscalls='no'}

If you are using Solaris on a SPARC, the recommended compiler is `gcc'
2.95.2.  You can find this at `http://gcc.gnu.org/'.  Note that `egcs'
1.1.1 and `gcc' 2.8.1 don't work reliably on SPARC!

The recommended `configure' line when using `gcc' 2.95.2 is:

     CC=gcc CFLAGS="-O3" \
     CXX=gcc CXXFLAGS="-O3 -felide-constructors -fno-exceptions -fno-rtti" \
     ./configure --prefix=/usr/local/mysql --with-low-memory --enable-assembler

If you have a ultra sparc, you can get 4 % more performance by adding
"-mcpu=v8 -Wa,-xarch=v8plusa" to CFLAGS and CXXFLAGS.

If you have Sun Workshop (Fortre) 5.3 (or newer) compiler, you can run
`configure' like this:

     CC=cc CFLAGS="-Xa -fast -xO4 -native -xstrconst -mt" \
     CXX=CC CXXFLAGS="-noex -xO4 -mt" \
     ./configure --prefix=/usr/local/mysql --enable-assembler

In the MySQL benchmarks, we got a 6 % speedup on an Ultrasparc when
using Sun Workshop 5.3 compared to using gcc with -mcpu flags.

If you get a problem with `fdatasync' or `sched_yield', you can fix
this by adding `LIBS=-lrt' to the configure line

The following paragraph is only relevant for older compilers than
WorkShop 5.3:

You may also have to edit the `configure' script to change this line:

     #if !defined(__STDC__) || __STDC__ != 1

to this:

     #if !defined(__STDC__)

If you turn on `__STDC__' with the `-Xc' option, the Sun compiler can't
compile with the Solaris `pthread.h' header file.  This is a Sun bug
(broken compiler or broken include file).

If `mysqld' issues the error message shown below when you run it, you
have tried to compile MySQL with the Sun compiler without enabling the
multi-thread option (`-mt'):

     libc internal error: _rmutex_unlock: rmutex not held

Add `-mt' to `CFLAGS' and `CXXFLAGS' and try again.

If you get the following error when compiling MySQL with `gcc', it
means that your `gcc' is not configured for your version of Solaris:

     shell> gcc -O3 -g -O2 -DDBUG_OFF  -o thr_alarm ...
     ./thr_alarm.c: In function `signal_hand':
     ./thr_alarm.c:556: too many arguments to function `sigwait'

The proper thing to do in this case is to get the newest version of
`gcc' and compile it with your current `gcc' compiler!  At least for
Solaris 2.5, almost all binary versions of `gcc' have old, unusable
include files that will break all programs that use threads (and
possibly other programs)!

Solaris doesn't provide static versions of all system libraries
(`libpthreads' and `libdl'), so you can't compile MySQL with
`--static'.  If you try to do so, you will get the error:

     ld: fatal: library -ldl: not found
     
     or
     
     undefined reference to `dlopen'
     
     or
     
     cannot find -lrt

If too many processes try to connect very rapidly to `mysqld', you will
see this error in the MySQL log:

     Error in accept: Protocol error

You might try starting the server with the `--set-variable back_log=50'
option as a workaround for this. *Note Command-line options::.

If you are linking your own MySQL client, you might get the following
error when you try to execute it:

     ld.so.1: ./my: fatal: libmysqlclient.so.#: open failed: No such file or directory

The problem can be avoided by one of the following methods:

   * Link the client with the following flag (instead of `-Lpath'):
     `-Wl,r/full-path-to-libmysqlclient.so'.

   * Copy `libmysqclient.so' to `/usr/lib'.

   * Add the pathname of the directory where `libmysqlclient.so' is
     located to the `LD_RUN_PATH' environment variable before running
     your client.

When using the `--with-libwrap' configure option, you must also include
the libraries that `libwrap.a' needs:

     --with-libwrap="/opt/NUtcpwrapper-7.6/lib/libwrap.a -lnsl -lsocket

If you have problems with configure trying to link with `-lz' and you
don't have `zlib' installed, you have two options:

   * If you want to be able to use the compressed communication
     protocol, you need to get and install zlib from ftp.gnu.org.

   * Configure with `--with-named-z-libs=no'.

If you are using gcc and have problems with loading `UDF' functions
into MySQL, try adding `-lgcc' to the link line for the `UDF' function.

If you would like MySQL to start automatically, you can copy
`support-files/mysql.server' to `/etc/init.d' and create a symbolic
link to it named `/etc/rc3.d/S99mysql.server'.

Solaris 2.7/2.8 Notes
.....................

You can normally use a Solaris 2.6 binary on Solaris 2.7 and 2.8.  Most
of the Solaris 2.6 issues also apply for Solaris 2.7 and 2.8.

Note that MySQL Version 3.23.4 and above should be able to autodetect
new versions of Solaris and enable workarounds for the following
problems!

Solaris 2.7 / 2.8 has some bugs in the include files.  You may see the
following error when you use `gcc':

     /usr/include/widec.h:42: warning: `getwc' redefined
     /usr/include/wchar.h:326: warning: this is the location of the previous
     definition

If this occurs, you can do the following to fix the problem:

Copy `/usr/include/widec.h' to `.../lib/gcc-lib/os/gcc-version/include'
and change line 41 from:

     #if     !defined(lint) && !defined(__lint)
     
     to
     
     #if     !defined(lint) && !defined(__lint) && !defined(getwc)

Alternatively, you can edit `/usr/include/widec.h' directly.  Either
way, after you make the fix, you should remove `config.cache' and run
`configure' again!

If you get errors like this when you run `make', it's because
`configure' didn't detect the `curses.h' file (probably because of the
error in `/usr/include/widec.h'):

     In file included from mysql.cc:50:
     /usr/include/term.h:1060: syntax error before `,'
     /usr/include/term.h:1081: syntax error before `;'

The solution to this is to do one of the following:

   * Configure with `CFLAGS=-DHAVE_CURSES_H CXXFLAGS=-DHAVE_CURSES_H
     ./configure'.

   * Edit `/usr/include/widec.h' as indicted above and rerun configure.

   * Remove the `#define HAVE_TERM' line from `config.h' file and run
     `make' again.

If you get a problem that your linker can't find `-lz' when linking
your client program, the problem is probably that your `libz.so' file is
installed in `/usr/local/lib'.  You can fix this by one of the
following methods:

   * Add `/usr/local/lib' to `LD_LIBRARY_PATH'.

   * Add a link to `libz.so' from `/lib'.

   * If you are using Solaris 8, you can install the optional zlib from
     your Solaris 8 CD distribution.

   * Configure MySQL with the `--with-named-z-libs=no' option.

Solaris x86 Notes
.................

On Solaris 2.8 on x86, `mysqld' will core dump if you run 'strip' in.

If you are using `gcc' or `egcs' on Solaris x86 and you experience
problems with core dumps under load, you should use the following
`configure' command:

     CC=gcc CFLAGS="-O3 -fomit-frame-pointer -DHAVE_CURSES_H" \
     CXX=gcc \
     CXXFLAGS="-O3 -fomit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti -DHAVE_CURSES_H" \
     ./configure --prefix=/usr/local/mysql

This will avoid problems with the `libstdc++' library and with C++
exceptions.

If this doesn't help, you should compile a debug version and run it
with a trace file or under `gdb'.  *Note Using gdb on mysqld::.

BSD Notes
---------

FreeBSD Notes
.............

FreeBSD 3.x is recommended for running MySQL since the thread package
is much more integrated.

The easiest and therefor the preferred way to install is to use the
mysql-server and mysql-client ports available on
`http://www.freebsd.org'.

Using these gives you:
   * A working MySQL with all optimizations known to work on your
     version of FreeBSD enabled.

   * Automatic configuration and build.

   * Startup scripts installed in /usr/local/etc/rc.d.

   * Ability to see which files that are installed with pkg_info -L.
     And to remove them all with pkg_delete if you no longer want MySQL
     on that machine.

It is recommended you use MIT-pthreads on FreeBSD 2.x and native
threads on Versions 3 and up. It is possible to run with  native
threads on some late 2.2.x versions but you may encounter problems
shutting down `mysqld'.

The MySQL `Makefile's require GNU make (`gmake') to work.  If you want
to compile MySQL you need to install GNU `make' first.

Be sure to have your name resolver setup correct.  Otherwise you may
experience resolver delays or failures when connecting to `mysqld'.

Make sure that the `localhost' entry in the `/etc/hosts' file is
correct (otherwise you will have problems connecting to the database).
The `/etc/hosts' file should start with a line:

     127.0.0.1       localhost localhost.your.domain

If you notice that `configure' will use MIT-pthreads, you should read
the MIT-pthreads notes.  *Note MIT-pthreads::.

If you get an error from `make install' that it can't find
`/usr/include/pthreads', `configure' didn't detect that you need
MIT-pthreads.  This is fixed by executing these commands:

     shell> rm config.cache
     shell> ./configure --with-mit-threads

FreeBSD is also known to have a very low default file handle limit.
*Note Not enough file handles::.  Uncomment the ulimit -n section in
safe_mysqld or raise the limits for the `mysqld' user in /etc/login.conf
(and rebuild it with cap_mkdb /etc/login.conf).  Also be sure you set
the appropriate class for this user in the password file if you are not
using the default (use: chpass mysqld-user-name).  *Note `safe_mysqld':
safe_mysqld.

If you get problems with the current date in MySQL, setting the `TZ'
variable will probably help.  *Note Environment variables::.

To get a secure and stable system you should only use FreeBSD kernels
that are marked `-STABLE'.

NetBSD notes
............

To compile on NetBSD you need GNU `make'.  Otherwise the compile will
crash when `make' tries to run `lint' on C++ files.

OpenBSD Notes
.............

This section contains notes on OpenBSD.

OpenBSD 2.5 Notes
.................

On OpenBSD Version 2.5, you can compile MySQL with native threads with
the following options:

     CFLAGS=-pthread CXXFLAGS=-pthread ./configure --with-mit-threads=no

OpenBSD 2.8 Notes
.................

Our users have reported that OpenBSD 2.8 has a threading bug which
causes problems with MySQL.  The OpenBSD Developers have fixed the
problem, but as of January 25th, 2001, it's only available in the
"-current" branch.  The symptoms of this threading bug are: slow
response, high load, high CPU usage, and crashes.

BSD/OS Notes
............

This section contains notes on BSD/OS.

BSD/OS Version 2.x Notes
........................

If you get the following error when compiling MySQL, your `ulimit'
value for virtual memory is too low:

     item_func.h: In method `Item_func_ge::Item_func_ge(const Item_func_ge &)':
     item_func.h:28: virtual memory exhausted
     make[2]: *** [item_func.o] Error 1

Try using `ulimit -v 80000' and run `make' again.  If this doesn't work
and you are using `bash', try switching to `csh' or `sh'; some BSDI
users have reported problems with `bash' and `ulimit'.

If you are using `gcc', you may also use have to use the
`--with-low-memory' flag for `configure' to be able to compile
`sql_yacc.cc'.

If you get problems with the current date in MySQL, setting the `TZ'
variable will probably help.  *Note Environment variables::.

BSD/OS Version 3.x Notes
........................

Upgrade to BSD/OS Version 3.1.  If that is not possible, install
BSDIpatch M300-038.

Use the following command when configuring MySQL:

     shell> env CXX=shlicc++ CC=shlicc2 \
            ./configure \
                --prefix=/usr/local/mysql \
                --localstatedir=/var/mysql \
                --without-perl \
                --with-unix-socket-path=/var/mysql/mysql.sock

The following is also known to work:

     shell> env CC=gcc CXX=gcc CXXFLAGS=-O3 \
            ./configure \
                --prefix=/usr/local/mysql \
                --with-unix-socket-path=/var/mysql/mysql.sock

You can change the directory locations if you wish, or just use the
defaults by not specifying any locations.

If you have problems with performance under heavy load, try using the
`--skip-thread-priority' option to `mysqld'!  This will run all threads
with the same priority; on BSDI Version 3.1, this gives better
performance (at least until BSDI fixes their thread scheduler).

If you get the error `virtual memory exhausted' while compiling, you
should try using `ulimit -v 80000' and run `make' again.  If this
doesn't work and you are using `bash', try switching to `csh' or `sh';
some BSDI users have reported problems with `bash' and `ulimit'.

BSD/OS Version 4.x Notes
........................

BSDI Version 4.x has some thread-related bugs.  If you want to use
MySQL on this, you should install all thread-related patches.  At least
M400-023 should be installed.

On some BSDI Version 4.x systems, you may get problems with shared
libraries.  The symptom is that you can't execute any client programs,
for example, `mysqladmin'.  In this case you need to reconfigure not to
use shared libraries with the `--disable-shared' option to configure.

Some customers have had problems on BSDI 4.0.1 that the `mysqld' binary
after a while can't open tables.  This is because some library/system
related bug causes `mysqld' to change current directory without asking
for this!

The fix is to either upgrade to 3.23.34 or after running `configure'
remove the line `#define HAVE_REALPATH' from `config.h' before running
make.

Note that the above means that you can't symbolic link a database
directories to another database directory or symbolic link a table to
another database on BSDI!  (Making a symbolic link to another disk is
ok).

Mac OS X Notes
--------------

Mac OS X Public Beta
....................

MySQL should work without any problems on Mac OS X Public Beta
(Darwin).  You don't need the pthread patches for this OS!

Mac OS X Server
...............

Before trying to configure MySQL on Mac OS X server you must first
install the pthread package from `http://www.prnet.de/RegEx/mysql.html'.

Our binary for Mac OS X is compiled on Rhapsody 5.5 with the following
configure line:

     CC=gcc CFLAGS="-O2 -fomit-frame-pointer" CXX=gcc CXXFLAGS="-O2 -fomit-frame-pointer" ./configure --prefix=/usr/local/mysql "--with-comment=Official MySQL binary" --with-extra-charsets=complex  --disable-shared

You might want to also add aliases to your shell's resource file to
access `mysql' and `mysqladmin' from the command line:

     alias mysql '/usr/local/mysql/bin/mysql'
     alias mysqladmin '/usr/local/mysql/bin/mysqladmin'

Other Unix Notes
----------------

HP-UX Notes for Binary Distributions
....................................

Some of the binary distributions of MySQL for HP-UX is distributed as
an HP depot file and as a tar file.  To use the depot file you must be
running at least HP-UX 10.x to have access to HP's software depot tools.

The HP version of MySQL was compiled on an HP 9000/8xx server under
HP-UX 10.20, and uses MIT-pthreads.  It is known to work well under
this configuration.  MySQL Version 3.22.26 and newer can also be built
with HP's native thread package.

Other configurations that may work:

   * HP 9000/7xx running HP-UX 10.20+

   * HP 9000/8xx running HP-UX 10.30

The following configurations almost definitely won't work:

   * HP 9000/7xx or 8xx running HP-UX 10.x where x < 2

   * HP 9000/7xx or 8xx running HP-UX 9.x

To install the distribution, use one of the commands below, where
`/path/to/depot' is the full pathname of the depot file:

   * To install everything, including the server, client and
     development tools:

          shell> /usr/sbin/swinstall -s /path/to/depot mysql.full

   * To install only the server:

          shell> /usr/sbin/swinstall -s /path/to/depot mysql.server

   * To install only the client package:

          shell> /usr/sbin/swinstall -s /path/to/depot mysql.client

   * To install only the development tools:

          shell> /usr/sbin/swinstall -s /path/to/depot mysql.developer

The depot places binaries and libraries in `/opt/mysql' and data in
`/var/opt/mysql'. The depot also creates the appropriate entries in
`/etc/init.d' and `/etc/rc2.d' to start the server automatically at
boot time.  Obviously, this entails being `root' to install.

To install the HP-UX tar.gz distribution, you must have a copy of GNU
`tar'.

HP-UX Version 10.20 Notes
.........................

There are a couple of small problems when compiling MySQL on HP-UX.  We
recommend that you use `gcc' instead of the HP-UX native compiler,
because `gcc' produces better code!

We recommend using gcc 2.95 on HP-UX.  Don't use high optimization
flags (like -O6) as this may not be safe on HP-UX.

Note that MIT-pthreads can't be compiled with the HP-UX compiler
because it can't compile `.S' (assembler) files.

The following configure line should work:

     CFLAGS="-DHPUX -I/opt/dce/include" CXXFLAGS="-DHPUX -I/opt/dce/include -felide-constructors -fno-exceptions -fno-rtti" CXX=gcc ./configure --with-pthread --with-named-thread-libs='-ldce' --prefix=/usr/local/mysql --disable-shared

If you are compiling `gcc' 2.95 yourself, you should NOT link it with
the DCE libraries (`libdce.a' or `libcma.a') if you want to compile
MySQL with MIT-pthreads.  If you mix the DCE and MIT-pthreads packages
you will get a `mysqld' to which you cannot connect.  Remove the DCE
libraries while you compile `gcc' 2.95!

HP-UX Version 11.x Notes
........................

For HP-UX Version 11.x we recommend MySQL Version 3.23.15 or later.

Because of some critical bugs in the standard HP-UX libraries, you
should install the following patches before trying to run MySQL on
HP-UX 11.0:

     PHKL_22840 Streams cumulative
     PHNE_22397 ARPA cumulative

This will solve a problem that one gets `EWOULDBLOCK' from `recv()' and
`EBADF' from `accept()' in threaded applications.

If you are using `gcc' 2.95.1 on an unpatched HP-UX 11.x system, you
will get the error:

     In file included from /usr/include/unistd.h:11,
                      from ../include/global.h:125,
                      from mysql_priv.h:15,
                      from item.cc:19:
     /usr/include/sys/unistd.h:184: declaration of C function ...
     /usr/include/sys/pthread.h:440: previous declaration ...
     In file included from item.h:306,
                      from mysql_priv.h:158,
                      from item.cc:19:

The problem is that HP-UX doesn't define `pthreads_atfork()'
consistently.  It has conflicting prototypes in
`/usr/include/sys/unistd.h':184 and `/usr/include/sys/pthread.h':440
(details below).

One solution is to copy `/usr/include/sys/unistd.h' into
`mysql/include' and edit `unistd.h' and change it to match the
definition in `pthread.h'.  Here's the diff:

     183,184c183,184
     <      extern int pthread_atfork(void (*prepare)(), void (*parent)(),
     <                                                void (*child)());
     ---
     >      extern int pthread_atfork(void (*prepare)(void), void (*parent)(void),
     >                                                void (*child)(void));

After this, the following configure line should work:

     CFLAGS="-fomit-frame-pointer -O3 -fpic" CXX=gcc CXXFLAGS="-felide-constructors -fno-exceptions -fno-rtti -O3" ./configure --prefix=/usr/local/mysql --disable-shared

Here is some information that a HP-UX Version 11.x user sent us about
compiling MySQL with HP-UX:x compiler:

      Environment:
           proper compilers.
              setenv CC cc
              setenv CXX aCC
           flags
              setenv CFLAGS -D_REENTRANT
              setenv CXXFLAGS -D_REENTRANT
              setenv CPPFLAGS -D_REENTRANT
          % aCC -V
          aCC: HP ANSI C++ B3910B X.03.14.06
          % cc -V /tmp/empty.c
          cpp.ansi: HP92453-01 A.11.02.00 HP C Preprocessor (ANSI)
          ccom: HP92453-01 A.11.01.00 HP C Compiler
          cc: "/tmp/empty.c", line 1: warning 501: Empty source file.
     
       configuration:
          ./configure  --with-pthread        \
          --prefix=/source-control/mysql     \
          --with-named-thread-libs=-lpthread \
          --with-low-memory
     
         added '#define _CTYPE_INCLUDED' to include/m_ctype.h. This
         symbol is the one defined in HP's /usr/include/ctype.h:
     
          /* Don't include std ctype.h when this is included */
          #define _CTYPE_H
          #define __CTYPE_INCLUDED
          #define _CTYPE_INCLUDED
          #define _CTYPE_USING   /* Don't put names in global namespace. */

   * I had to use the compile-time flag `-D_REENTRANT' to get the
     compiler to recognize the prototype for `localtime_r'.
     Alternatively I could have supplied the prototype for
     `localtime_r'. But I wanted to catch other bugs without needing to
     run into them.  I wasn't sure where I needed it, so I added it to
     all flags.

   * The optimization flags used by MySQL (-O3) are not recognized by
     HP's compilers.  I did not change the flags.

If you get the following error from `configure'

     checking for cc option to accept ANSI C... no
     configure: error: MySQL requires a ANSI C compiler (and a C++ compiler). Try gcc. See the Installation chapter in the Reference Manual.

Check that you don't have the path to the K&R compiler before the path
to the HP-UX C and C++ compiler.

IBM-AIX notes
.............

Automatic detection of `xlC' is missing from Autoconf, so a `configure'
command something like this is needed when compiling MySQL (This
example uses the IBM compiler):

     export CC="xlc_r -ma -O3 -qstrict -qoptimize=3 -qmaxmem=8192 "
     export CXX="xlC_r -ma -O3 -qstrict -qoptimize=3 -qmaxmem=8192"
     export CFLAGS="-I /usr/local/include"
     export LDLFAGS="-L /usr/local/lib"
     export CPPFLAGS=$CFLAGS
     export CXXFLAGS=$CFLAGS
     
     ./configure --prefix=/usr/local \
     		--localstatedir=/var/mysql \
     		--sysconfdir=/etc/mysql \
     		--sbindir='/usr/local/bin' \
     		--libexecdir='/usr/local/bin' \
     		--enable-thread-safe-client \
     		--enable-large-files

Above are the options used to compile the MySQL distribution that can
be found at `http://www-frec.bull.com/'.

If you change the `-O3' to `-O2' in the above configure line, you must
also remove the `-qstrict' option (this is a limitation in the IBM C
compiler).

If you are using `gcc' or `egcs' to compile MySQL, you *MUST* use the
`-fno-exceptions' flag, as the exception handling in `gcc'/`egcs' is
not thread safe!  (This is tested with `egcs' 1.1.)  There are also
some known problems with IBM's assembler, which may cause it to
generate bad code when used with gcc.

We recommend the following `configure' line with `egcs' and `gcc 2.95'
on AIX:

     CC="gcc -pipe -mcpu=power -Wa,-many" \
     CXX="gcc -pipe -mcpu=power -Wa,-many" \
     CXXFLAGS="-felide-constructors -fno-exceptions -fno-rtti" \
     ./configure --prefix=/usr/local/mysql --with-low-memory

The `-Wa,-many' is necessary for the compile to be successful.  IBM is
aware of this problem but is in to hurry to fix it because of the
workaround available.  We don't know if the `-fno-exceptions' is
required with `gcc 2.95', but as MySQL doesn't use exceptions and the
above option generates faster code, we recommend that you should always
use this option with `egcs / gcc'.

If you get a problem with assembler code try changing the -mcpu=xxx to
match your cpu. Typically power2, power, or powerpc may need to be used,
alternatively you might need to use 604 or 604e. I'm not positive but I
would think using "power" would likely be safe most of the time, even on
a power2 machine.

If you don't know what your cpu is then do a "uname -m", this will give
you back a string that looks like "000514676700", with a format of
xxyyyyyymmss where xx and ss are always 0's, yyyyyy is a unique system
id and mm is the id of the CPU Planar. A chart of these values can be
found at
`http://www.rs6000.ibm.com/doc_link/en_US/a_doc_lib/cmds/aixcmds5/uname.htm'.
This will give you a machine type and a machine model you can use to
determine what type of cpu you have.

If you have problems with signals (MySQL dies unexpectedly under high
load) you may have found an OS bug with threads and signals.  In this
case you can tell MySQL not to use signals by configuring with:

     shell> CFLAGS=-DDONT_USE_THR_ALARM CXX=gcc \
            CXXFLAGS="-felide-constructors -fno-exceptions -fno-rtti -DDONT_USE_THR_ALARM" \
            ./configure --prefix=/usr/local/mysql --with-debug --with-low-memory

This doesn't affect the performance of MySQL, but has the side effect
that you can't kill clients that are "sleeping" on a connection with
`mysqladmin kill' or `mysqladmin shutdown'.  Instead, the client will
die when it issues its next command.

On some versions of AIX, linking with `libbind.a' makes `getservbyname'
core dump.  This is an AIX bug and should be reported to IBM.

For AIX 4.2.1 and gcc you have to do the following changes.

After configuring, edit `config.h' and `include/my_config.h' and change
the line that says

     #define HAVE_SNPRINTF 1

to

     #undef HAVE_SNPRINTF

And finally, in `mysqld.cc' you need to add a prototype for initgoups.

     #ifdef _AIX41
     extern "C" int initgroups(const char *,int);
     #endif

SunOS 4 Notes
.............

On SunOS 4, MIT-pthreads is needed to compile MySQL, which in turn
means you will need GNU `make'.

Some SunOS 4 systems have problems with dynamic libraries and `libtool'.
You can use the following `configure' line to avoid this problem:

     shell> ./configure --disable-shared --with-mysqld-ldflags=-all-static

When compiling `readline', you may get warnings about duplicate defines.
These may be ignored.

When compiling `mysqld', there will be some `implicit declaration of
function' warnings. These may be ignored.

Alpha-DEC-UNIX Notes (Tru64)
............................

If you are using egcs 1.1.2 on Digital Unix, you should upgrade to gcc
2.95.2, as egcs on DEC has some serious bugs!

When compiling threaded programs under Digital Unix, the documentation
recommends using the `-pthread' option for `cc' and `cxx' and the
libraries `-lmach -lexc' (in addition to `-lpthread').  You should run
`configure' something like this:

     CC="cc -pthread" CXX="cxx -pthread -O" \
     ./configure --with-named-thread-libs="-lpthread -lmach -lexc -lc"

When compiling `mysqld', you may see a couple of warnings like this:

     mysqld.cc: In function void handle_connections()':
     mysqld.cc:626: passing long unsigned int *' as argument 3 of
     accept(int,sockadddr *, int *)'

You can safely ignore these warnings.  They occur because `configure'
can detect only errors, not warnings.

If you start the server directly from the command line, you may have
problems with it dying when you log out.  (When you log out, your
outstanding processes receive a `SIGHUP' signal.)  If so, try starting
the server like this:

     shell> nohup mysqld [options] &

`nohup' causes the command following it to ignore any `SIGHUP' signal
sent from the terminal.  Alternatively, start the server by running
`safe_mysqld', which invokes `mysqld' using `nohup' for you.  *Note
`safe_mysqld': safe_mysqld.

If you get a problem when compiling mysys/get_opt.c, just remove the
line #define _NO_PROTO from the start of that file!

If you are using Compac's CC compiler, the following configure line
should work:

     CC="cc -pthread"
     CFLAGS="-O4 -ansi_alias -ansi_args -fast -inline speed all -arch host"
     CXX="cxx -pthread"
     CXXFLAGS="-O4 -ansi_alias -ansi_args -fast -inline speed all -arch host"
     export CC CFLAGS CXX CXXFLAGS
     ./configure \
     --prefix=/usr/local/mysql \
     --with-low-memory \
     --enable-large-files \
     --enable-shared=yes \
     --with-named-thread-libs="-lpthread -lmach -lexc -lc"
     gnumake

If you get a problem with libtool, when compiling with shared libraries
as above, when linking `mysql', you should be able to get around this
by issuing:

     cd mysql
     /bin/sh ../libtool --mode=link cxx -pthread  -O3 -DDBUG_OFF \
     -O4 -ansi_alias -ansi_args -fast -inline speed \
     -speculate all \ -arch host  -DUNDEF_HAVE_GETHOSTBYNAME_R \
     -o mysql  mysql.o readline.o sql_string.o completion_hash.o \
     ../readline/libreadline.a -lcurses \
     ../libmysql/.libs/libmysqlclient.so  -lm
     cd ..
     gnumake
     gnumake install
     scripts/mysql_install_db

Alpha-DEC-OSF1 Notes
....................

If you have problems compiling and have DEC `CC' and `gcc' installed,
try running `configure' like this:

     CC=cc CFLAGS=-O CXX=gcc CXXFLAGS=-O3 \
     ./configure --prefix=/usr/local/mysql

If you get problems with the `c_asm.h' file, you can create and use a
'dummy' `c_asm.h' file with:

     touch include/c_asm.h
     CC=gcc CFLAGS=-I./include \
     CXX=gcc CXXFLAGS=-O3 \
     ./configure --prefix=/usr/local/mysql

Note that the following problems with the `ld' program can be fixed by
downloading the latest DEC (Compaq) patch kit from:
`http://ftp.support.compaq.com/public/unix/'.

On OSF1 V4.0D and compiler "DEC C V5.6-071 on Digital Unix V4.0 (Rev.
878)" the compiler had some strange behavior (undefined `asm' symbols).
`/bin/ld' also appears to be broken (problems with `_exit undefined'
errors occuring while linking `mysqld').  On this system, we have
managed to compile MySQL with the following `configure' line, after
replacing `/bin/ld' with the version from OSF 4.0C:

     CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql

With the Digital compiler "C++ V6.1-029", the following should work:

     CC=cc -pthread
     CFLAGS=-O4 -ansi_alias -ansi_args -fast -inline speed -speculate all -arch host
     CXX=cxx -pthread
     CXXFLAGS=-O4 -ansi_alias -ansi_args -fast -inline speed -speculate all -arch host -noexceptions -nortti
     export CC CFLAGS CXX CXXFLAGS
     ./configure --prefix=/usr/mysql/mysql --with-mysqld-ldflags=-all-static --disable-shared --with-named-thread-libs="-lmach -lexc -lc"

In some versions of OSF1, the `alloca()' function is broken. Fix this
by removing the line in `config.h' that defines `'HAVE_ALLOCA''.

The `alloca()' function also may have an incorrect prototype in
`/usr/include/alloca.h'.  This warning resulting from this can be
ignored.

`configure' will use the following thread libraries automatically:
`--with-named-thread-libs="-lpthread -lmach -lexc -lc"'.

When using `gcc', you can also try running `configure' like this:

     shell> CFLAGS=-D_PTHREAD_USE_D4 CXX=gcc CXXFLAGS=-O3 ./configure ....

If you have problems with signals (MySQL dies unexpectedly under high
load), you may have found an OS bug with threads and signals. In this
case you can tell MySQL not to use signals by configuring with:

     shell> CFLAGS=-DDONT_USE_THR_ALARM \
            CXXFLAGS=-DDONT_USE_THR_ALARM \
            ./configure ...

This doesn't affect the performance of MySQL, but has the side effect
that you can't kill clients that are "sleeping" on a connection with
`mysqladmin kill' or `mysqladmin shutdown'.  Instead, the client will
die when it issues its next command.

With `gcc' 2.95.2, you will probably run into the following compile
error:

     sql_acl.cc:1456: Internal compiler error in `scan_region', at except.c:2566
     Please submit a full bug report.

To fix this you should change to the `sql' directory and do a "cut and
paste" of the last `gcc' line, but change `-O3' to `-O0' (or add `-O0'
immediately after `gcc' if you don't have any `-O' option on your
compile line).  After this is done you can just change back to the
top-level directly and run `make' again.

SGI Irix Notes
..............

If you are using Irix Version 6.5.3 or newer `mysqld' will only be able
to create threads if you run it as a user with `CAP_SCHED_MGT'
privileges (like `root') or give the `mysqld' server this privilege
with the following shell command:

     shell> chcap "CAP_SCHED_MGT+epi" /opt/mysql/libexec/mysqld

You may have to undefine some things in `config.h' after running
`configure' and before compiling.

In some Irix implementations, the `alloca()' function is broken.  If the
`mysqld' server dies on some `SELECT' statements, remove the lines from
`config.h' that define `HAVE_ALLOC' and `HAVE_ALLOCA_H'.  If
`mysqladmin create' doesn't work, remove the line from `config.h' that
defines `HAVE_READDIR_R'.  You may have to remove the `HAVE_TERM_H'
line as well.

SGI recommends that you install all of the patches on this page as a
set:
http://support.sgi.com/surfzone/patches/patchset/6.2_indigo.rps.html

At the very minimum, you should install the latest kernel rollup, the
latest `rld' rollup, and the latest `libc' rollup.

You definitely need all the POSIX patches on this page, for pthreads
support:

`http://support.sgi.com/surfzone/patches/patchset/6.2_posix.rps.html'

If you get the something like the following error when compiling
`mysql.cc':

     "/usr/include/curses.h", line 82: error(1084): invalid combination of type

Type the following in the top-level directory of your MySQL source tree:

     shell> extra/replace bool curses_bool < /usr/include/curses.h > include/curses.h
     shell> make

There have also been reports of scheduling problems.  If only one
thread is running, things go slow.  Avoid this by starting another
client.  This may lead to a 2-to-10-fold increase in execution speed
thereafter for the other thread.  This is a poorly understood problem
with Irix threads; you may have to improvise to find solutions until
this can be fixed.

If you are compiling with `gcc', you can use the following `configure'
command:

     CC=gcc CXX=gcc CXXFLAGS=-O3 \
     ./configure --prefix=/usr/local/mysql --enable-thread-safe-client --with-named-thread-libs=-lpthread

On Irix 6.5.11 with native Irix C and C++ compilers ver. 7.3.1.2, the
following is reported to work

     CC=cc CXX=CC CFLAGS='-O3 -n32 -TARG:platform=IP22 -I/usr/local/include \
     -L/usr/local/lib' CXXFLAGS='-O3 -n32 -TARG:platform=IP22 \
     -I/usr/local/include -L/usr/local/lib' ./configure --prefix=/usr/local/mysql \
     --with-berkeley-db --with-innodb \
     --with-libwrap=/usr/local --with-named-curses-libs=/usr/local/lib/libncurses.a

SCO Notes
.........

The current port is tested only on a "sco3.2v5.0.4" and "sco3.2v5.0.5"
system.  There has also been a lot of progress on a port to "sco
3.2v4.2".

For the moment the recommended compiler on OpenServer is gcc 2.95.2.
With this you should be able to compile MySQL with just:

     CC=gcc CXX=gcc ./configure ... (options)

  1. For OpenServer 5.0.X you need to use GDS in Skunkware 95 (95q4c).
     This is necessary because GNU `gcc' 2.7.2 in Skunkware 97 does not
     have GNU `as'.  You can also use `egcs' 1.1.2 or newer
     `http://www.egcs.com/'.  If you are using `egcs' 1.1.2 you have to
     execute the following command:

          shell> cp -p /usr/include/pthread/stdtypes.h /usr/local/lib/gcc-lib/i386-pc-sco3.2v5.0.5/egcs-2.91.66/include/pthread/

  2. You need the port of GCC 2.5.x for this product and the Development
     system.  They are required on this version of SCO Unix.  You cannot
     just use the GCC Dev system.

  3. You should get the FSU Pthreads package and install it first.
     This can be found at
     `http://www.cs.wustl.edu/~schmidt/ACE_wrappers/FSU-threads.tar.gz'.
     You can also get a precompiled package from
     `http://www.mysql.com/Downloads/SCO/FSU-threads-3.5c.tar.gz'.

  4. FSU Pthreads can be compiled with SCO Unix 4.2 with tcpip.  Or
     OpenServer 3.0 or Open Desktop 3.0 (OS 3.0 ODT 3.0), with the SCO
     Development System installed using a good port of GCC 2.5.x ODT or
     OS 3.0 you will need a good port of GCC 2.5.x There are a lot of
     problems without a good port.  The port for this product requires
     the SCO Unix Development system.  Without it, you are missing the
     libraries and the linker that is needed.

  5. To build FSU Pthreads on your system, do the following:

       a. Run `./configure' in the `threads/src' directory and select
          the SCO OpenServer option. This command copies
          `Makefile.SCO5' to `Makefile'.

       b. Run `make'.

       c. To install in the default `/usr/include' directory, login as
          root, then `cd' to the `thread/src' directory, and run `make
          install'.

  6. Remember to use GNU `make' when making MySQL.

  7. If you don't start `safe_mysqld' as root, you probably will get
     only the default 110 open files per process.  `mysqld' will write
     a note about this in the log file.

  8. With SCO 3.2V5.0.5, you should use FSU Pthreads version 3.5c or
     newer.  You should also use gcc 2.95.2 or newer!

     The following `configure' command should work:

          shell> ./configure --prefix=/usr/local/mysql --disable-shared

  9. With SCO 3.2V4.2, you should use FSU Pthreads version 3.5c or
     newer.  The following `configure' command should work:

          shell> CFLAGS="-D_XOPEN_XPG4" CXX=gcc CXXFLAGS="-D_XOPEN_XPG4" \
                 ./configure \
                     --prefix=/usr/local/mysql \
                     --with-named-thread-libs="-lgthreads -lsocket -lgen -lgthreads" \
                     --with-named-curses-libs="-lcurses"

     You may get some problems with some include files. In this case,
     you can find new SCO-specific include files at
     `http://www.mysql.com/Downloads/SCO/SCO-3.2v4.2-includes.tar.gz'.
     You should unpack this file in the `include' directory of your
     MySQL source tree.

SCO development notes:

   * MySQL should automatically detect FSU Pthreads and link `mysqld'
     with `-lgthreads -lsocket -lgthreads'.

   * The SCO development libraries are re-entrant in FSU Pthreads.  SCO
     claims that its libraries' functions are re-entrant, so they must
     be reentrant with FSU Pthreads.  FSU Pthreads on OpenServer tries
     to use the SCO scheme to make re-entrant libraries.

   * FSU Pthreads (at least the version at `http://www.mysql.com/')
     comes linked with GNU `malloc'.  If you encounter problems with
     memory usage, make sure that `gmalloc.o' is included in
     `libgthreads.a' and `libgthreads.so'.

   * In FSU Pthreads, the following system calls are pthreads-aware:
     `read()', `write()', `getmsg()', `connect()', `accept()',
     `select()', and `wait()'.

If you want to install DBI on SCO, you have to edit the `Makefile' in
DBI-xxx and each subdirectory.

Note that the following assumes gcc 2.95.2 or newer:

     OLD:                                  NEW:
     CC = cc                               CC = gcc
     CCCDLFLAGS = -KPIC -W1,-Bexport       CCCDLFLAGS = -fpic
     CCDLFLAGS = -wl,-Bexport              CCDLFLAGS =
     
     LD = ld                               LD = gcc -G -fpic
     LDDLFLAGS = -G -L/usr/local/lib       LDDLFLAGS = -L/usr/local/lib
     LDFLAGS = -belf -L/usr/local/lib      LDFLAGS = -L/usr/local/lib
     
     LD = ld                               LD = gcc -G -fpic
     OPTIMISE = -Od                        OPTIMISE = -O1
     
     OLD:
     CCCFLAGS = -belf -dy -w0 -U M_XENIX -DPERL_SCO5 -I/usr/local/include
     
     NEW:
     CCFLAGS = -U M_XENIX -DPERL_SCO5 -I/usr/local/include

This is because the Perl dynaloader will not load the `DBI' modules if
they were compiled with `icc' or `cc'.

Perl works best when compiled with `cc'.

SCO Unixware Version 7.0 Notes
..............................

You must use a version of MySQL at least as recent as Version 3.22.13
because that version fixes some portability problems under Unixware.

We have been able to compile MySQL with the following `configure'
command on Unixware Version 7.0.1:

     CC=cc CXX=CC ./configure --prefix=/usr/local/mysql

If you want to use `gcc', you must use `gcc' 2.95.2 or newer.

OS/2 Notes
----------

MySQL uses quite a few open files. Because of this, you should add
something like the following to your `CONFIG.SYS' file:

     SET EMXOPT=-c -n -h1024

If you don't do this, you will probably run into the following error:

     File 'xxxx' not found (Errcode: 24)

When using MySQL with OS/2 Warp 3, FixPack 29 or above is required.
With OS/2 Warp 4, FixPack 4 or above is required. This is a requirement
of the Pthreads library.  MySQL must be installed in a partition that
supports long filenames such as HPFS, FAT32, etc.

The `INSTALL.CMD' script must be run from OS/2's own `CMD.EXE' and may
not work with replacement shells such as `4OS2.EXE'.

The `scripts/mysql-install-db' script has been renamed.  It is now
called `install.cmd' and is a REXX script, which will set up the default
MySQL security settings and create the WorkPlace Shell icons for MySQL.

Dynamic module support is compiled in but not fully tested. Dynamic
modules should be compiled using the Pthreads run-time library.

     gcc -Zdll -Zmt -Zcrtdll=pthrdrtl -I../include -I../regex -I.. \
         -o example udf_example.cc -L../lib -lmysqlclient udf_example.def
     mv example.dll example.udf

*Note:* Due to limitations in OS/2, UDF module name stems must not
exceed 8 characters. Modules are stored in the `/mysql2/udf' directory;
the `safe-mysqld.cmd' script will put this directory in the
`BEGINLIBPATH' environment variable. When using UDF modules, specified
extensions are ignored -- it is assumed to be `.udf'.  For example, in
Unix, the shared module might be named `example.so' and you would load
a function from it like this:

     mysql> CREATE FUNCTION metaphon RETURNS STRING SONAME "example.so";

Is OS/2, the module would be named `example.udf', but you would not
specify the module extension:

     mysql> CREATE FUNCTION metaphon RETURNS STRING SONAME "example";

BeOS Notes
----------

We are really interested in getting MySQL to work on BeOS, but
unfortunately we don't have any person who knows BeOS or has time to do
a port.

We are interested in finding someone to do a port, and we will help them
with any technical questions they may have while doing the port.

We have previously talked with some BeOS developers that have said that
MySQL is 80% ported to BeOS, but we haven't heard from them in a while.

Novell Netware Notes
--------------------

We are really interested in getting MySQL to work on Netware, but
unfortunately we don't have any person who knows Netware or has time to
do a port.

We are interested in finding someone to do a port, and we will help them
with any technical questions they may have while doing the port.

Introduction to MySQL: A MySQL Tutorial
***************************************

This chapter provides a tutorial introduction to MySQL by showing how
to use the `mysql' client program to create and use a simple database.
`mysql' (sometimes referred to as the "terminal monitor" or just
"monitor") is an interactive program that allows you to connect to a
MySQL server, run queries, and view the results.  `mysql' may also be
used in batch mode: you place your queries in a file beforehand, then
tell `mysql' to execute the contents of the file.  Both ways of using
`mysql' are covered here.

To see a list of options provided by `mysql', invoke it with the
`--help' option:

     shell> mysql --help

This chapter assumes that `mysql' is installed on your machine and that
a MySQL server is available to which you can connect.  If this is not
true, contact your MySQL administrator.  (If _you_ are the
administrator, you will need to consult other sections of this manual.)

This chapter describes the entire process of setting up and using a
database.  If you are interested only in accessing an already-existing
database, you may want to skip over the sections that describe how to
create the database and the tables it contains.

Because this chapter is tutorial in nature, many details are
necessarily left out.  Consult the relevant sections of the manual for
more information on the topics covered here.

Connecting to and Disconnecting from the Server
===============================================

To connect to the server, you'll usually need to provide a MySQL user
name when you invoke `mysql' and, most likely, a password.  If the
server runs on a machine other than the one where you log in, you'll
also need to specify a hostname.  Contact your administrator to find
out what connection parameters you should use to connect (that is, what
host, user name, and password to use).  Once you know the proper
parameters, you should be able to connect like this:

     shell> mysql -h host -u user -p
     Enter password: ********

The `********' represents your password; enter it when `mysql' displays
the `Enter password:' prompt.

If that works, you should see some introductory information followed by
a `mysql>' prompt:

     shell> mysql -h host -u user -p
     Enter password: ********
     Welcome to the MySQL monitor.  Commands end with ; or \g.
     Your MySQL connection id is 459 to server version: 3.22.20a-log
     
     Type 'help' for help.
     
     mysql>

The prompt tells you that `mysql' is ready for you to enter commands.

Some MySQL installations allow users to connect as the anonymous
(unnamed) user to the server running on the local host.  If this is the
case on your machine, you should be able to connect to that server by
invoking `mysql' without any options:

     shell> mysql

After you have connected successfully, you can disconnect any time by
typing `QUIT' at the `mysql>' prompt:

     mysql> QUIT
     Bye

You can also disconnect by pressing Control-D.

Most examples in the following sections assume you are connected to the
server.  They indicate this by the `mysql>' prompt.

Entering Queries
================

Make sure you are connected to the server, as discussed in the previous
section.  Doing so will not in itself select any database to work with,
but that's okay.  At this point, it's more important to find out a
little about how to issue queries than to jump right in creating
tables, loading data into them, and retrieving data from them.  This
section describes the basic principles of entering commands, using
several queries you can try out to familiarize yourself with how
`mysql' works.

Here's a simple command that asks the server to tell you its version
number and the current date.  Type it in as shown below following the
`mysql>' prompt and hit the RETURN key:

     mysql> SELECT VERSION(), CURRENT_DATE;
     +--------------+--------------+
     | version()    | CURRENT_DATE |
     +--------------+--------------+
     | 3.22.20a-log | 1999-03-19   |
     +--------------+--------------+
     1 row in set (0.01 sec)
     mysql>

This query illustrates several things about `mysql':

   * A command normally consists of a SQL statement followed by a
     semicolon.  (There are some exceptions where a semicolon is not
     needed.  `QUIT', mentioned earlier, is one of them.  We'll get to
     others later.)

   * When you issue a command, `mysql' sends it to the server for
     execution and displays the results, then prints another `mysql>'
     to indicate that it is ready for another command.

   * `mysql' displays query output as a table (rows and columns).  The
     first row contains labels for the columns.  The rows following are
     the query results.  Normally, column labels are the names of the
     columns you fetch from database tables.  If you're retrieving the
     value of an expression rather than a table column (as in the
     example just shown), `mysql' labels the column using the
     expression itself.

   * `mysql' shows how many rows were returned and how long the query
     took to execute, which gives you a rough idea of server
     performance.  These values are imprecise because they represent
     wall clock time (not CPU or machine time), and because they are
     affected by factors such as server load and network latency.  (For
     brevity, the "rows in set" line is not shown in the remaining
     examples in this chapter.)

Keywords may be entered in any lettercase.  The following queries are
equivalent:

     mysql> SELECT VERSION(), CURRENT_DATE;
     mysql> select version(), current_date;
     mysql> SeLeCt vErSiOn(), current_DATE;

Here's another query.  It demonstrates that you can use `mysql' as a
simple calculator:

     mysql> SELECT SIN(PI()/4), (4+1)*5;
     +-------------+---------+
     | SIN(PI()/4) | (4+1)*5 |
     +-------------+---------+
     |    0.707107 |      25 |
     +-------------+---------+

The commands shown thus far have been relatively short, single-line
statements.  You can even enter multiple statements on a single line.
Just end each one with a semicolon:

     mysql> SELECT VERSION(); SELECT NOW();
     +--------------+
     | version()    |
     +--------------+
     | 3.22.20a-log |
     +--------------+
     
     +---------------------+
     | NOW()               |
     +---------------------+
     | 1999-03-19 00:15:33 |
     +---------------------+

A command need not be given all on a single line, so lengthy commands
that require several lines are not a problem.  `mysql' determines where
your statement ends by looking for the terminating semicolon, not by
looking for the end of the input line.  (In other words, `mysql'
accepts free-format input:  it collects input lines but does not
execute them until it sees the semicolon.)

Here's a simple multiple-line statement:

     mysql> SELECT
         -> USER()
         -> ,
         -> CURRENT_DATE;
     +--------------------+--------------+
     | USER()             | CURRENT_DATE |
     +--------------------+--------------+
     | joesmith@localhost | 1999-03-18   |
     +--------------------+--------------+

In this example, notice how the prompt changes from `mysql>' to `->'
after you enter the first line of a multiple-line query.  This is how
`mysql' indicates that it hasn't seen a complete statement and is
waiting for the rest.  The prompt is your friend, because it provides
valuable feedback.  If you use that feedback, you will always be aware
of what `mysql' is waiting for.

If you decide you don't want to execute a command that you are in the
process of entering, cancel it by typing `\c':

     mysql> SELECT
         -> USER()
         -> \c
     mysql>

Here, too, notice the prompt.  It switches back to `mysql>' after you
type `\c', providing feedback to indicate that `mysql' is ready for a
new command.

The following table shows each of the prompts you may see and
summarizes what they mean about the state that `mysql' is in:

*Prompt**Meaning*
`mysql>'Ready for new command.
`       Waiting for next line of multiple-line command.
->'     
`       Waiting for next line, collecting a string that begins with a
'>'     single quote (`'').
`       Waiting for next line, collecting a string that begins with a
">'     double quote (`"').

Multiple-line statements commonly occur by accident when you intend to
issue a command on a single line, but forget the terminating semicolon.
In this case, `mysql' waits for more input:

     mysql> SELECT USER()
         ->

If this happens to you (you think you've entered a statement but the
only response is a `->' prompt), most likely `mysql' is waiting for the
semicolon.  If you don't notice what the prompt is telling you, you
might sit there for a while before realizing what you need to do.
Enter a semicolon to complete the statement, and `mysql' will execute
it:

     mysql> SELECT USER()
         -> ;
     +--------------------+
     | USER()             |
     +--------------------+
     | joesmith@localhost |
     +--------------------+

The `'>' and `">' prompts occur during string collection.  In MySQL,
you can write strings surrounded by either `'' or `"' characters (for
example, `'hello'' or `"goodbye"'), and `mysql' lets you enter strings
that span multiple lines.  When you see a `'>' or `">' prompt, it means
that you've entered a line containing a string that begins with a `''
or `"' quote character, but have not yet entered the matching quote
that terminates the string.  That's fine if you really are entering a
multiple-line string, but how likely is that?  Not very.  More often,
the `'>' and `">' prompts indicate that you've inadvertantly left out a
quote character.  For example:

     mysql> SELECT * FROM my_table WHERE name = "Smith AND age < 30;
         ">

If you enter this `SELECT' statement, then hit RETURN and wait for the
result, nothing will happen.  Instead of wondering why this query takes
so long, notice the clue provided by the `">' prompt.  It tells you
that `mysql' expects to see the rest of an unterminated string.  (Do
you see the error in the statement?  The string `"Smith' is missing the
second quote.)

At this point, what do you do?  The simplest thing is to cancel the
command.  However, you cannot just type `\c' in this case, because
`mysql' interprets it as part of the string that it is collecting!
Instead, enter the closing quote character (so `mysql' knows you've
finished the string), then type `\c':

     mysql> SELECT * FROM my_table WHERE name = "Smith AND age < 30;
         "> "\c
     mysql>

The prompt changes back to `mysql>', indicating that `mysql' is ready
for a new command.

It's important to know what the `'>' and `">' prompts signify, because
if you mistakenly enter an unterminated string, any further lines you
type will appear to be ignored by `mysql' -- including a line
containing `QUIT'!  This can be quite confusing, especially if you
don't know that you need to supply the terminating quote before you can
cancel the current command.

Creating and Using a Database
=============================

Now that you know how to enter commands, it's time to access a database.

Suppose you have several pets in your home (your menagerie) and you'd
like to keep track of various types of information about them.  You can
do so by creating tables to hold your data and loading them with the
desired information.  Then you can answer different sorts of questions
about your animals by retrieving data from the tables.  This section
shows you how to:

   * Create a database

   * Create a table

   * Load data into the table

   * Retrieve data from the table in various ways

   * Use multiple tables

The menagerie database will be simple (deliberately), but it is not
difficult to think of real-world situations in which a similar type of
database might be used.  For example, a database like this could be
used by a farmer to keep track of livestock, or by a veterinarian to
keep track of patient records.  A menagerie distribution containing
some of the queries and sample data used in the following sections can
be obtained from the MySQL Web site.  It's available in either
compressed `tar' format
(http://www.mysql.com/Downloads/Contrib/Examples/menagerie.tar.gz) or
Zip format
(http://www.mysql.com/Downloads/Contrib/Examples/menagerie.zip).

Use the `SHOW' statement to find out what databases currently exist on
the server:

     mysql> SHOW DATABASES;
     +----------+
     | Database |
     +----------+
     | mysql    |
     | test     |
     | tmp      |
     +----------+

The list of databases is probably different on your machine, but the
`mysql' and `test' databases are likely to be among them.  The `mysql'
database is required because it describes user access privileges.  The
`test' database is often provided as a workspace for users to try
things out.

If the `test' database exists, try to access it:

     mysql> USE test
     Database changed

Note that `USE', like `QUIT', does not require a semicolon.  (You can
terminate such statements with a semicolon if you like; it does no
harm.)  The `USE' statement is special in another way, too:  it must be
given on a single line.

You can use the `test' database (if you have access to it) for the
examples that follow, but anything you create in that database can be
removed by anyone else with access to it.  For this reason, you should
probably ask your MySQL administrator for permission to use a database
of your own.  Suppose you want to call yours `menagerie'.  The
administrator needs to execute a command like this:

     mysql> GRANT ALL ON menagerie.* TO your_mysql_name;

where `your_mysql_name' is the MySQL user name assigned to you.

Creating and Selecting a Database
---------------------------------

If the administrator creates your database for you when setting up your
permissions, you can begin using it.  Otherwise, you need to create it
yourself:

     mysql> CREATE DATABASE menagerie;

Under Unix, database names are case sensitive (unlike SQL keywords), so
you must always refer to your database as `menagerie', not as
`Menagerie', `MENAGERIE', or some other variant.  This is also true for
table names.  (Under Windows, this restriction does not apply, although
you must refer to databases and tables using the same lettercase
throughout a given query.)

Creating a database does not select it for use; you must do that
explicitly.  To make `menagerie' the current database, use this command:

     mysql> USE menagerie
     Database changed

Your database needs to be created only once, but you must select it for
use each time you begin a `mysql' session.  You can do this by issuing a
`USE' statement as shown above.  Alternatively, you can select the
database on the command line when you invoke `mysql'.  Just specify its
name after any connection parameters that you might need to provide.
For example:

     shell> mysql -h host -u user -p menagerie
     Enter password: ********

Note that `menagerie' is not your password on the command just shown.
If you want to supply your password on the command line after the `-p'
option, you must do so with no intervening space (for example, as
`-pmypassword', not as `-p mypassword').  However, putting your
password on the command line is not recommended, because doing so
exposes it to snooping by other users logged in on your machine.

Creating a Table
----------------

Creating the database is the easy part, but at this point it's empty, as
`SHOW TABLES' will tell you:

     mysql> SHOW TABLES;
     Empty set (0.00 sec)

The harder part is deciding what the structure of your database should
be: what tables you will need and what columns will be in each of them.

You'll want a table that contains a record for each of your pets.  This
can be called the `pet' table, and it should contain, as a bare minimum,
each animal's name.  Because the name by itself is not very
interesting, the table should contain other information.  For example,
if more than one person in your family keeps pets, you might want to
list each animal's owner.  You might also want to record some basic
descriptive information such as species and sex.

How about age?  That might be of interest, but it's not a good thing to
store in a database.  Age changes as time passes, which means you'd
have to update your records often.  Instead, it's better to store a
fixed value such as date of birth.  Then, whenever you need age, you
can calculate it as the difference between the current date and the
birth date.  MySQL provides functions for doing date arithmetic, so
this is not difficult.  Storing birth date rather than age has other
advantages, too:

   * You can use the database for tasks such as generating reminders
     for upcoming pet birthdays.  (If you think this type of query is
     somewhat silly, note that it is the same question you might ask in
     the context of a business database to identify clients to whom
     you'll soon need to send out birthday greetings, for that
     computer-assisted personal touch.)

   * You can calculate age in relation to dates other than the current
     date.  For example, if you store death date in the database, you
     can easily calculate how old a pet was when it died.

You can probably think of other types of information that would be
useful in the `pet' table, but the ones identified so far are
sufficient for now: name, owner, species, sex, birth, and death.

Use a `CREATE TABLE' statement to specify the layout of your table:

     mysql> CREATE TABLE pet (name VARCHAR(20), owner VARCHAR(20),
         -> species VARCHAR(20), sex CHAR(1), birth DATE, death DATE);

`VARCHAR' is a good choice for the `name', `owner', and `species'
columns because the column values will vary in length.  The lengths of
those columns need not all be the same, and need not be `20'.  You can
pick any length from `1' to `255', whatever seems most reasonable to
you.  (If you make a poor choice and it turns out later that you need a
longer field, MySQL provides an `ALTER TABLE' statement.)

Animal sex can be represented in a variety of ways, for example, `"m"'
and `"f"', or perhaps `"male"' and `"female"'.  It's simplest to use
the single characters `"m"' and `"f"'.

The use of the `DATE' data type for the `birth' and `death' columns is
a fairly obvious choice.

Now that you have created a table, `SHOW TABLES' should produce some
output:

     mysql> SHOW TABLES;
     +---------------------+
     | Tables in menagerie |
     +---------------------+
     | pet                 |
     +---------------------+

To verify that your table was created the way you expected, use a
`DESCRIBE' statement:

     mysql> DESCRIBE pet;
     +---------+-------------+------+-----+---------+-------+
     | Field   | Type        | Null | Key | Default | Extra |
     +---------+-------------+------+-----+---------+-------+
     | name    | varchar(20) | YES  |     | NULL    |       |
     | owner   | varchar(20) | YES  |     | NULL    |       |
     | species | varchar(20) | YES  |     | NULL    |       |
     | sex     | char(1)     | YES  |     | NULL    |       |
     | birth   | date        | YES  |     | NULL    |       |
     | death   | date        | YES  |     | NULL    |       |
     +---------+-------------+------+-----+---------+-------+

You can use `DESCRIBE' any time, for example, if you forget the names of
the columns in your table or what types they are.

Loading Data into a Table
-------------------------

After creating your table, you need to populate it.  The `LOAD DATA' and
`INSERT' statements are useful for this.

Suppose your pet records can be described as shown below.  (Observe
that MySQL expects dates in `YYYY-MM-DD' format; this may be different
than what you are used to.)

*name*       *owner*      *species*    *sex*        *birth*      *death*
Fluffy       Harold       cat          f            1993-02-04   
Claws        Gwen         cat          m            1994-03-17   
Buffy        Harold       dog          f            1989-05-13   
Fang         Benny        dog          m            1990-08-27   
Bowser       Diane        dog          m            1998-08-31   1995-07-29
Chirpy       Gwen         bird         f            1998-09-11   
Whistler     Gwen         bird                      1997-12-09   
Slim         Benny        snake        m            1996-04-29   

Because you are beginning with an empty table, an easy way to populate
it is to create a text file containing a row for each of your animals,
then load the contents of the file into the table with a single
statement.

You could create a text file `pet.txt' containing one record per line,
with values separated by tabs, and given in the order in which the
columns were listed in the `CREATE TABLE' statement.  For missing
values (such as unknown sexes or death dates for animals that are still
living), you can use `NULL' values.  To represent these in your text
file, use `\N'.  For example, the record for Whistler the bird would
look like this (where the whitespace between values is a single tab
character):

`Whistler'  `Gwen'      `bird'      `\N'        `1997-12-09'       `\N'

To load the text file `pet.txt' into the `pet' table, use this command:

     mysql> LOAD DATA LOCAL INFILE "pet.txt" INTO TABLE pet;

You can specify the column value separator and end of line marker
explicitly in the `LOAD DATA' statement if you wish, but the defaults
are tab and linefeed.  These are sufficient for the statement to read
the file `pet.txt' properly.

When you want to add new records one at a time, the `INSERT' statement
is useful.  In its simplest form, you supply values for each column, in
the order in which the columns were listed in the `CREATE TABLE'
statement.  Suppose Diane gets a new hamster named Puffball.  You could
add a new record using an `INSERT' statement like this:

     mysql> INSERT INTO pet
         -> VALUES ('Puffball','Diane','hamster','f','1999-03-30',NULL);

Note that string and date values are specified as quoted strings here.
Also, with `INSERT', you can insert `NULL' directly to represent a
missing value.  You do not use `\N' like you do with `LOAD DATA'.

From this example, you should be able to see that there would be a lot
more typing involved to load your records initially using several
`INSERT' statements rather than a single `LOAD DATA' statement.

Retrieving Information from a Table
-----------------------------------

The `SELECT' statement is used to pull information from a table.  The
general form of the statement is:

     SELECT what_to_select
     FROM which_table
     WHERE conditions_to_satisfy

`what_to_select' indicates what you want to see.  This can be a list of
columns, or `*' to indicate "all columns." `which_table' indicates the
table from which you want to retrieve data.  The `WHERE' clause is
optional.  If it's present, `conditions_to_satisfy' specifies
conditions that rows must satisfy to qualify for retrieval.

Selecting All Data
..................

The simplest form of `SELECT' retrieves everything from a table:

     mysql> SELECT * FROM pet;
     +----------+--------+---------+------+------------+------------+
     | name     | owner  | species | sex  | birth      | death      |
     +----------+--------+---------+------+------------+------------+
     | Fluffy   | Harold | cat     | f    | 1993-02-04 | NULL       |
     | Claws    | Gwen   | cat     | m    | 1994-03-17 | NULL       |
     | Buffy    | Harold | dog     | f    | 1989-05-13 | NULL       |
     | Fang     | Benny  | dog     | m    | 1990-08-27 | NULL       |
     | Bowser   | Diane  | dog     | m    | 1998-08-31 | 1995-07-29 |
     | Chirpy   | Gwen   | bird    | f    | 1998-09-11 | NULL       |
     | Whistler | Gwen   | bird    | NULL | 1997-12-09 | NULL       |
     | Slim     | Benny  | snake   | m    | 1996-04-29 | NULL       |
     | Puffball | Diane  | hamster | f    | 1999-03-30 | NULL       |
     +----------+--------+---------+------+------------+------------+

This form of `SELECT' is useful if you want to review your entire table,
for instance, after you've just loaded it with your initial dataset.
As it happens, the output just shown reveals an error in your data
file:  Bowser appears to have been born after he died!  Consulting your
original pedigree papers, you find that the correct birth year is 1989,
not 1998.

There are are least a couple of ways to fix this:

   * Edit the file `pet.txt' to correct the error, then empty the table
     and reload it using `DELETE' and `LOAD DATA':

          mysql> SET AUTOCOMMIT=1;  # Used for quick re-create of the table
          mysql> DELETE FROM pet;
          mysql> LOAD DATA LOCAL INFILE "pet.txt" INTO TABLE pet;

     However, if you do this, you must also re-enter the record for
     Puffball.

   * Fix only the erroneous record with an `UPDATE' statement:

          mysql> UPDATE pet SET birth = "1989-08-31" WHERE name = "Bowser";

As shown above, it is easy to retrieve an entire table.  But typically
you don't want to do that, particularly when the table becomes large.
Instead, you're usually more interested in answering a particular
question, in which case you specify some constraints on the information
you want.  Let's look at some selection queries in terms of questions
about your pets that they answer.

Selecting Particular Rows
.........................

You can select only particular rows from your table.  For example, if
you want to verify the change that you made to Bowser's birth date,
select Bowser's record like this:

     mysql> SELECT * FROM pet WHERE name = "Bowser";
     +--------+-------+---------+------+------------+------------+
     | name   | owner | species | sex  | birth      | death      |
     +--------+-------+---------+------+------------+------------+
     | Bowser | Diane | dog     | m    | 1989-08-31 | 1995-07-29 |
     +--------+-------+---------+------+------------+------------+

The output confirms that the year is correctly recorded now as 1989,
not 1998.

String comparisons are normally case insensitive, so you can specify the
name as `"bowser"', `"BOWSER"', etc.  The query result will be the same.

You can specify conditions on any column, not just `name'.  For example,
if you want to know which animals were born after 1998, test the `birth'
column:

     mysql> SELECT * FROM pet WHERE birth >= "1998-1-1";
     +----------+-------+---------+------+------------+-------+
     | name     | owner | species | sex  | birth      | death |
     +----------+-------+---------+------+------------+-------+
     | Chirpy   | Gwen  | bird    | f    | 1998-09-11 | NULL  |
     | Puffball | Diane | hamster | f    | 1999-03-30 | NULL  |
     +----------+-------+---------+------+------------+-------+

You can combine conditions, for example, to locate female dogs:

     mysql> SELECT * FROM pet WHERE species = "dog" AND sex = "f";
     +-------+--------+---------+------+------------+-------+
     | name  | owner  | species | sex  | birth      | death |
     +-------+--------+---------+------+------------+-------+
     | Buffy | Harold | dog     | f    | 1989-05-13 | NULL  |
     +-------+--------+---------+------+------------+-------+

The preceding query uses the `AND' logical operator.  There is also an
`OR' operator:

     mysql> SELECT * FROM pet WHERE species = "snake" OR species = "bird";
     +----------+-------+---------+------+------------+-------+
     | name     | owner | species | sex  | birth      | death |
     +----------+-------+---------+------+------------+-------+
     | Chirpy   | Gwen  | bird    | f    | 1998-09-11 | NULL  |
     | Whistler | Gwen  | bird    | NULL | 1997-12-09 | NULL  |
     | Slim     | Benny | snake   | m    | 1996-04-29 | NULL  |
     +----------+-------+---------+------+------------+-------+

`AND' and `OR' may be intermixed.  If you do that, it's a good idea to
use parentheses to indicate how conditions should be grouped:

     mysql> SELECT * FROM pet WHERE (species = "cat" AND sex = "m")
         -> OR (species = "dog" AND sex = "f");
     +-------+--------+---------+------+------------+-------+
     | name  | owner  | species | sex  | birth      | death |
     +-------+--------+---------+------+------------+-------+
     | Claws | Gwen   | cat     | m    | 1994-03-17 | NULL  |
     | Buffy | Harold | dog     | f    | 1989-05-13 | NULL  |
     +-------+--------+---------+------+------------+-------+

Selecting Particular Columns
............................

If you don't want to see entire rows from your table, just name the
columns in which you're interested, separated by commas.  For example,
if you want to know when your animals were born, select the `name' and
`birth' columns:

     mysql> SELECT name, birth FROM pet;
     +----------+------------+
     | name     | birth      |
     +----------+------------+
     | Fluffy   | 1993-02-04 |
     | Claws    | 1994-03-17 |
     | Buffy    | 1989-05-13 |
     | Fang     | 1990-08-27 |
     | Bowser   | 1989-08-31 |
     | Chirpy   | 1998-09-11 |
     | Whistler | 1997-12-09 |
     | Slim     | 1996-04-29 |
     | Puffball | 1999-03-30 |
     +----------+------------+

To find out who owns pets, use this query:

     mysql> SELECT owner FROM pet;
     +--------+
     | owner  |
     +--------+
     | Harold |
     | Gwen   |
     | Harold |
     | Benny  |
     | Diane  |
     | Gwen   |
     | Gwen   |
     | Benny  |
     | Diane  |
     +--------+

However, notice that the query simply retrieves the `owner' field from
each record, and some of them appear more than once.  To minimize the
output, retrieve each unique output record just once by adding the
keyword `DISTINCT':

     mysql> SELECT DISTINCT owner FROM pet;
     +--------+
     | owner  |
     +--------+
     | Benny  |
     | Diane  |
     | Gwen   |
     | Harold |
     +--------+

You can use a `WHERE' clause to combine row selection with column
selection.  For example, to get birth dates for dogs and cats only, use
this query:

     mysql> SELECT name, species, birth FROM pet
         -> WHERE species = "dog" OR species = "cat";
     +--------+---------+------------+
     | name   | species | birth      |
     +--------+---------+------------+
     | Fluffy | cat     | 1993-02-04 |
     | Claws  | cat     | 1994-03-17 |
     | Buffy  | dog     | 1989-05-13 |
     | Fang   | dog     | 1990-08-27 |
     | Bowser | dog     | 1989-08-31 |
     +--------+---------+------------+

Sorting Rows
............

You may have noticed in the preceding examples that the result rows are
displayed in no particular order.  However, it's often easier to examine
query output when the rows are sorted in some meaningful way.  To sort a
result, use an `ORDER BY' clause.

Here are animal birthdays, sorted by date:

     mysql> SELECT name, birth FROM pet ORDER BY birth;
     +----------+------------+
     | name     | birth      |
     +----------+------------+
     | Buffy    | 1989-05-13 |
     | Bowser   | 1989-08-31 |
     | Fang     | 1990-08-27 |
     | Fluffy   | 1993-02-04 |
     | Claws    | 1994-03-17 |
     | Slim     | 1996-04-29 |
     | Whistler | 1997-12-09 |
     | Chirpy   | 1998-09-11 |
     | Puffball | 1999-03-30 |
     +----------+------------+

To sort in reverse order, add the `DESC' (descending) keyword to the
name of the column you are sorting by:

     mysql> SELECT name, birth FROM pet ORDER BY birth DESC;
     +----------+------------+
     | name     | birth      |
     +----------+------------+
     | Puffball | 1999-03-30 |
     | Chirpy   | 1998-09-11 |
     | Whistler | 1997-12-09 |
     | Slim     | 1996-04-29 |
     | Claws    | 1994-03-17 |
     | Fluffy   | 1993-02-04 |
     | Fang     | 1990-08-27 |
     | Bowser   | 1989-08-31 |
     | Buffy    | 1989-05-13 |
     +----------+------------+

You can sort on multiple columns.  For example, to sort by type of
animal, then by birth date within animal type with youngest animals
first, use the following query:

     mysql> SELECT name, species, birth FROM pet ORDER BY species, birth DESC;
     +----------+---------+------------+
     | name     | species | birth      |
     +----------+---------+------------+
     | Chirpy   | bird    | 1998-09-11 |
     | Whistler | bird    | 1997-12-09 |
     | Claws    | cat     | 1994-03-17 |
     | Fluffy   | cat     | 1993-02-04 |
     | Fang     | dog     | 1990-08-27 |
     | Bowser   | dog     | 1989-08-31 |
     | Buffy    | dog     | 1989-05-13 |
     | Puffball | hamster | 1999-03-30 |
     | Slim     | snake   | 1996-04-29 |
     +----------+---------+------------+

Note that the `DESC' keyword applies only to the column name immediately
preceding it (`birth'); `species' values are still sorted in ascending
order.

Date Calculations
.................

MySQL provides several functions that you can use to perform
calculations on dates, for example, to calculate ages or extract parts
of dates.

To determine how many years old each of your pets is, compute the
difference in the year part of the current date and the birth date, then
subtract one if the current date occurs earlier in the calendar year
than the birth date.  The following query shows, for each pet, the
birth date, the current date, and the age in years.

     mysql> SELECT name, birth, CURRENT_DATE,
         -> (YEAR(CURRENT_DATE)-YEAR(birth))
         -> - (RIGHT(CURRENT_DATE,5)<RIGHT(birth,5))
         -> AS age
         -> FROM pet;
     +----------+------------+--------------+------+
     | name     | birth      | CURRENT_DATE | age  |
     +----------+------------+--------------+------+
     | Fluffy   | 1993-02-04 | 2001-08-29   |    8 |
     | Claws    | 1994-03-17 | 2001-08-29   |    7 |
     | Buffy    | 1989-05-13 | 2001-08-29   |   12 |
     | Fang     | 1990-08-27 | 2001-08-29   |   11 |
     | Bowser   | 1989-08-31 | 2001-08-29   |   11 |
     | Chirpy   | 1998-09-11 | 2001-08-29   |    2 |
     | Whistler | 1997-12-09 | 2001-08-29   |    3 |
     | Slim     | 1996-04-29 | 2001-08-29   |    5 |
     | Puffball | 1999-03-30 | 2001-08-29   |    2 |
     +----------+------------+--------------+------+

Here, `YEAR()' pulls out the year part of a date and `RIGHT()' pulls
off the rightmost five characters that represent the `MM-DD' (calendar
year) part of the date.  The part of the expression that compares the
`MM-DD' values evaluates to 1 or 0, which adjusts the year difference
down a year if `CURRENT_DATE' occurs earlier in the year than `birth'.
The full expression is somewhat ungainly, so an alias (`age') is used
to make the output column label more meaningful.

The query works, but the result could be scanned more easily if the rows
were presented in some order.  This can be done by adding an `ORDER BY
name' clause to sort the output by name:

     mysql> SELECT name, birth, CURRENT_DATE,
         -> (YEAR(CURRENT_DATE)-YEAR(birth))
         -> - (RIGHT(CURRENT_DATE,5)<RIGHT(birth,5))
         -> AS age
         -> FROM pet ORDER BY name;
     +----------+------------+--------------+------+
     | name     | birth      | CURRENT_DATE | age  |
     +----------+------------+--------------+------+
     | Bowser   | 1989-08-31 | 2001-08-29   |   11 |
     | Buffy    | 1989-05-13 | 2001-08-29   |   12 |
     | Chirpy   | 1998-09-11 | 2001-08-29   |    2 |
     | Claws    | 1994-03-17 | 2001-08-29   |    7 |
     | Fang     | 1990-08-27 | 2001-08-29   |   11 |
     | Fluffy   | 1993-02-04 | 2001-08-29   |    8 |
     | Puffball | 1999-03-30 | 2001-08-29   |    2 |
     | Slim     | 1996-04-29 | 2001-08-29   |    5 |
     | Whistler | 1997-12-09 | 2001-08-29   |    3 |
     +----------+------------+--------------+------+

To sort the output by `age' rather than `name', just use a different
`ORDER BY' clause:

     mysql> SELECT name, birth, CURRENT_DATE,
         -> (YEAR(CURRENT_DATE)-YEAR(birth))
         -> - (RIGHT(CURRENT_DATE,5)<RIGHT(birth,5))
         -> AS age
         -> FROM pet ORDER BY age;
     +----------+------------+--------------+------+
     | name     | birth      | CURRENT_DATE | age  |
     +----------+------------+--------------+------+
     | Chirpy   | 1998-09-11 | 2001-08-29   |    2 |
     | Puffball | 1999-03-30 | 2001-08-29   |    2 |
     | Whistler | 1997-12-09 | 2001-08-29   |    3 |
     | Slim     | 1996-04-29 | 2001-08-29   |    5 |
     | Claws    | 1994-03-17 | 2001-08-29   |    7 |
     | Fluffy   | 1993-02-04 | 2001-08-29   |    8 |
     | Fang     | 1990-08-27 | 2001-08-29   |   11 |
     | Bowser   | 1989-08-31 | 2001-08-29   |   11 |
     | Buffy    | 1989-05-13 | 2001-08-29   |   12 |
     +----------+------------+--------------+------+

A similar query can be used to determine age at death for animals that
have died.  You determine which animals these are by checking whether
or not the `death' value is `NULL'.  Then, for those with non-`NULL'
values, compute the difference between the `death' and `birth' values:

     mysql> SELECT name, birth, death,
         -> (YEAR(death)-YEAR(birth)) - (RIGHT(death,5)<RIGHT(birth,5))
         -> AS age
         -> FROM pet WHERE death IS NOT NULL ORDER BY age;
     +--------+------------+------------+------+
     | name   | birth      | death      | age  |
     +--------+------------+------------+------+
     | Bowser | 1989-08-31 | 1995-07-29 |    5 |
     +--------+------------+------------+------+

The query uses `death IS NOT NULL' rather than `death != NULL' because
`NULL' is a special value.  This is explained later.  *Note Working
with `NULL': Working with NULL.

What if you want to know which animals have birthdays next month?  For
this type of calculation, year and day are irrelevant; you simply want
to extract the month part of the `birth' column.  MySQL provides several
date-part extraction functions, such as `YEAR()', `MONTH()', and
`DAYOFMONTH()'.  `MONTH()' is the appropriate function here.  To see
how it works, run a simple query that displays the value of both
`birth' and `MONTH(birth)':

     mysql> SELECT name, birth, MONTH(birth) FROM pet;
     +----------+------------+--------------+
     | name     | birth      | MONTH(birth) |
     +----------+------------+--------------+
     | Fluffy   | 1993-02-04 |            2 |
     | Claws    | 1994-03-17 |            3 |
     | Buffy    | 1989-05-13 |            5 |
     | Fang     | 1990-08-27 |            8 |
     | Bowser   | 1989-08-31 |            8 |
     | Chirpy   | 1998-09-11 |            9 |
     | Whistler | 1997-12-09 |           12 |
     | Slim     | 1996-04-29 |            4 |
     | Puffball | 1999-03-30 |            3 |
     +----------+------------+--------------+

Finding animals with birthdays in the upcoming month is easy, too.
Suppose the current month is April.  Then the month value is `4' and
you look for animals born in May (month 5) like this:

     mysql> SELECT name, birth FROM pet WHERE MONTH(birth) = 5;
     +-------+------------+
     | name  | birth      |
     +-------+------------+
     | Buffy | 1989-05-13 |
     +-------+------------+

There is a small complication if the current month is December, of
course.  You don't just add one to the month number (`12') and look for
animals born in month 13, because there is no such month.  Instead, you
look for animals born in January (month 1).

You can even write the query so that it works no matter what the current
month is.  That way you don't have to use a particular month number in
the query.  `DATE_ADD()' allows you to add a time interval to a given
date.  If you add a month to the value of `NOW()', then extract the
month part with `MONTH()', the result produces the month in which to
look for birthdays:

     mysql> SELECT name, birth FROM pet
         -> WHERE MONTH(birth) = MONTH(DATE_ADD(NOW(), INTERVAL 1 MONTH));

A different way to accomplish the same task is to add `1' to get the
next month after the current one (after using the modulo function
(`MOD') to wrap around the month value to `0' if it is currently `12'):

     mysql> SELECT name, birth FROM pet
         -> WHERE MONTH(birth) = MOD(MONTH(NOW()), 12) + 1;

Note that `MONTH' returns a number between 1 and 12. And
`MOD(something,12)' returns a number between 0 and 11. So the addition
has to be after the `MOD()', otherwise we would go from November (11)
to January (1).

Working with `NULL' Values
..........................

The `NULL' value can be surprising until you get used to it.
Conceptually, `NULL' means missing value or unknown value and it is
treated somewhat differently than other values.  To test for `NULL',
you cannot use the arithmetic comparison operators such as `=', `<', or
`!='.  To demonstrate this for yourself, try the following query:

     mysql> SELECT 1 = NULL, 1 != NULL, 1 < NULL, 1 > NULL;
     +----------+-----------+----------+----------+
     | 1 = NULL | 1 != NULL | 1 < NULL | 1 > NULL |
     +----------+-----------+----------+----------+
     |     NULL |      NULL |     NULL |     NULL |
     +----------+-----------+----------+----------+

Clearly you get no meaningful results from these comparisons.  Use the
`IS NULL' and `IS NOT NULL' operators instead:

     mysql> SELECT 1 IS NULL, 1 IS NOT NULL;
     +-----------+---------------+
     | 1 IS NULL | 1 IS NOT NULL |
     +-----------+---------------+
     |         0 |             1 |
     +-----------+---------------+

In MySQL, 0 or `NULL' means false and anything else means true.  The
default truth value from a boolean operation is 1.

This special treatment of `NULL' is why, in the previous section, it
was necessary to determine which animals are no longer alive using
`death IS NOT NULL' instead of `death != NULL'.

Pattern Matching
................

MySQL provides standard SQL pattern matching as well as a form of
pattern matching based on extended regular expressions similar to those
used by Unix utilities such as `vi', `grep', and `sed'.

SQL pattern matching allows you to use `_' to match any single
character and `%' to match an arbitrary number of characters (including
zero characters).  In MySQL, SQL patterns are case insensitive by
default.  Some examples are shown below.  Note that you do not use `='
or `!=' when you use SQL patterns; use the `LIKE' or `NOT LIKE'
comparison operators instead.

To find names beginning with `b':

     mysql> SELECT * FROM pet WHERE name LIKE "b%";
     +--------+--------+---------+------+------------+------------+
     | name   | owner  | species | sex  | birth      | death      |
     +--------+--------+---------+------+------------+------------+
     | Buffy  | Harold | dog     | f    | 1989-05-13 | NULL       |
     | Bowser | Diane  | dog     | m    | 1989-08-31 | 1995-07-29 |
     +--------+--------+---------+------+------------+------------+

To find names ending with `fy':

     mysql> SELECT * FROM pet WHERE name LIKE "%fy";
     +--------+--------+---------+------+------------+-------+
     | name   | owner  | species | sex  | birth      | death |
     +--------+--------+---------+------+------------+-------+
     | Fluffy | Harold | cat     | f    | 1993-02-04 | NULL  |
     | Buffy  | Harold | dog     | f    | 1989-05-13 | NULL  |
     +--------+--------+---------+------+------------+-------+

To find names containing a `w':

     mysql> SELECT * FROM pet WHERE name LIKE "%w%";
     +----------+-------+---------+------+------------+------------+
     | name     | owner | species | sex  | birth      | death      |
     +----------+-------+---------+------+------------+------------+
     | Claws    | Gwen  | cat     | m    | 1994-03-17 | NULL       |
     | Bowser   | Diane | dog     | m    | 1989-08-31 | 1995-07-29 |
     | Whistler | Gwen  | bird    | NULL | 1997-12-09 | NULL       |
     +----------+-------+---------+------+------------+------------+

To find names containing exactly five characters, use the `_' pattern
character:

     mysql> SELECT * FROM pet WHERE name LIKE "_____";
     +-------+--------+---------+------+------------+-------+
     | name  | owner  | species | sex  | birth      | death |
     +-------+--------+---------+------+------------+-------+
     | Claws | Gwen   | cat     | m    | 1994-03-17 | NULL  |
     | Buffy | Harold | dog     | f    | 1989-05-13 | NULL  |
     +-------+--------+---------+------+------------+-------+

The other type of pattern matching provided by MySQL uses extended
regular expressions.  When you test for a match for this type of
pattern, use the `REGEXP' and `NOT REGEXP' operators (or `RLIKE' and
`NOT RLIKE', which are synonyms).

Some characteristics of extended regular expressions are:

   * `.' matches any single character.

   * A character class `[...]' matches any character within the
     brackets.  For example, `[abc]' matches `a', `b', or `c'.  To name
     a range of characters, use a dash.  `[a-z]' matches any lowercase
     letter, whereas `[0-9]' matches any digit.

   * `*' matches zero or more instances of the thing preceding it.  For
     example, `x*' matches any number of `x' characters, `[0-9]*'
     matches any number of digits, and `.*' matches any number of
     anything.

   * Regular expressions are case sensitive, but you can use a
     character class to match both lettercases if you wish.  For
     example, `[aA]' matches lowercase or uppercase `a' and `[a-zA-Z]'
     matches any letter in either case.

   * The pattern matches if it occurs anywhere in the value being
     tested.  (SQL patterns match only if they match the entire value.)

   * To anchor a pattern so that it must match the beginning or end of
     the value being tested, use `^' at the beginning or `$' at the end
     of the pattern.

To demonstrate how extended regular expressions work, the `LIKE' queries
shown above are rewritten below to use `REGEXP'.

To find names beginning with `b', use `^' to match the beginning of the
name:

     mysql> SELECT * FROM pet WHERE name REGEXP "^b";
     +--------+--------+---------+------+------------+------------+
     | name   | owner  | species | sex  | birth      | death      |
     +--------+--------+---------+------+------------+------------+
     | Buffy  | Harold | dog     | f    | 1989-05-13 | NULL       |
     | Bowser | Diane  | dog     | m    | 1989-08-31 | 1995-07-29 |
     +--------+--------+---------+------+------------+------------+

Prior to MySQL Version 3.23.4, `REGEXP' is case sensitive, and the
previous query will return no rows. To match either lowercase or
uppercase `b', use this query instead:

     mysql> SELECT * FROM pet WHERE name REGEXP "^[bB]";

From MySQL 3.23.4 on, to force a `REGEXP' comparison to be case
sensitive, use the `BINARY' keyword to make one of the strings a binary
string. This query will match only lowercase `b' at the beginning of a
name:

     mysql> SELECT * FROM pet WHERE name REGEXP BINARY "^b";

To find names ending with `fy', use `$' to match the end of the name:

     mysql> SELECT * FROM pet WHERE name REGEXP "fy$";
     +--------+--------+---------+------+------------+-------+
     | name   | owner  | species | sex  | birth      | death |
     +--------+--------+---------+------+------------+-------+
     | Fluffy | Harold | cat     | f    | 1993-02-04 | NULL  |
     | Buffy  | Harold | dog     | f    | 1989-05-13 | NULL  |
     +--------+--------+---------+------+------------+-------+

To find names containing a lowercase or uppercase `w', use this query:

     mysql> SELECT * FROM pet WHERE name REGEXP "w";
     +----------+-------+---------+------+------------+------------+
     | name     | owner | species | sex  | birth      | death      |
     +----------+-------+---------+------+------------+------------+
     | Claws    | Gwen  | cat     | m    | 1994-03-17 | NULL       |
     | Bowser   | Diane | dog     | m    | 1989-08-31 | 1995-07-29 |
     | Whistler | Gwen  | bird    | NULL | 1997-12-09 | NULL       |
     +----------+-------+---------+------+------------+------------+

Because a regular expression pattern matches if it occurs anywhere in
the value, it is not necessary in the previous query to put a wild card
on either side of the pattern to get it to match the entire value like
it would be if you used a SQL pattern.

To find names containing exactly five characters, use `^' and `$' to
match the beginning and end of the name, and five instances of `.' in
between:

     mysql> SELECT * FROM pet WHERE name REGEXP "^.....$";
     +-------+--------+---------+------+------------+-------+
     | name  | owner  | species | sex  | birth      | death |
     +-------+--------+---------+------+------------+-------+
     | Claws | Gwen   | cat     | m    | 1994-03-17 | NULL  |
     | Buffy | Harold | dog     | f    | 1989-05-13 | NULL  |
     +-------+--------+---------+------+------------+-------+

You could also write the previous query using the `{n}'
"repeat-`n'-times" operator:

     mysql> SELECT * FROM pet WHERE name REGEXP "^.{5}$";
     +-------+--------+---------+------+------------+-------+
     | name  | owner  | species | sex  | birth      | death |
     +-------+--------+---------+------+------------+-------+
     | Claws | Gwen   | cat     | m    | 1994-03-17 | NULL  |
     | Buffy | Harold | dog     | f    | 1989-05-13 | NULL  |
     +-------+--------+---------+------+------------+-------+

Counting Rows
.............

Databases are often used to answer the question, "How often does a
certain type of data occur in a table?"  For example, you might want to
know how many pets you have, or how many pets each owner has, or you
might want to perform various kinds of censuses on your animals.

Counting the total number of animals you have is the same question as
"How many rows are in the `pet' table?" because there is one record per
pet.  The `COUNT()' function counts the number of non-`NULL' results, so
the query to count your animals looks like this:

     mysql> SELECT COUNT(*) FROM pet;
     +----------+
     | COUNT(*) |
     +----------+
     |        9 |
     +----------+

Earlier, you retrieved the names of the people who owned pets.  You can
use `COUNT()' if you want to find out how many pets each owner has:

     mysql> SELECT owner, COUNT(*) FROM pet GROUP BY owner;
     +--------+----------+
     | owner  | COUNT(*) |
     +--------+----------+
     | Benny  |        2 |
     | Diane  |        2 |
     | Gwen   |        3 |
     | Harold |        2 |
     +--------+----------+

Note the use of `GROUP BY' to group together all records for each
`owner'.  Without it, all you get is an error message:

     mysql> SELECT owner, COUNT(owner) FROM pet;
     ERROR 1140 at line 1: Mixing of GROUP columns (MIN(),MAX(),COUNT()...)
     with no GROUP columns is illegal if there is no GROUP BY clause

`COUNT()' and `GROUP BY' are useful for characterizing your data in
various ways.  The following examples show different ways to perform
animal census operations.

Number of animals per species:

     mysql> SELECT species, COUNT(*) FROM pet GROUP BY species;
     +---------+----------+
     | species | COUNT(*) |
     +---------+----------+
     | bird    |        2 |
     | cat     |        2 |
     | dog     |        3 |
     | hamster |        1 |
     | snake   |        1 |
     +---------+----------+

Number of animals per sex:

     mysql> SELECT sex, COUNT(*) FROM pet GROUP BY sex;
     +------+----------+
     | sex  | COUNT(*) |
     +------+----------+
     | NULL |        1 |
     | f    |        4 |
     | m    |        4 |
     +------+----------+

(In this output, `NULL' indicates sex unknown.)

Number of animals per combination of species and sex:

     mysql> SELECT species, sex, COUNT(*) FROM pet GROUP BY species, sex;
     +---------+------+----------+
     | species | sex  | COUNT(*) |
     +---------+------+----------+
     | bird    | NULL |        1 |
     | bird    | f    |        1 |
     | cat     | f    |        1 |
     | cat     | m    |        1 |
     | dog     | f    |        1 |
     | dog     | m    |        2 |
     | hamster | f    |        1 |
     | snake   | m    |        1 |
     +---------+------+----------+

You need not retrieve an entire table when you use `COUNT()'.  For
example, the previous query, when performed just on dogs and cats,
looks like this:

     mysql> SELECT species, sex, COUNT(*) FROM pet
         -> WHERE species = "dog" OR species = "cat"
         -> GROUP BY species, sex;
     +---------+------+----------+
     | species | sex  | COUNT(*) |
     +---------+------+----------+
     | cat     | f    |        1 |
     | cat     | m    |        1 |
     | dog     | f    |        1 |
     | dog     | m    |        2 |
     +---------+------+----------+

Or, if you wanted the number of animals per sex only for known-sex
animals:

     mysql> SELECT species, sex, COUNT(*) FROM pet
         -> WHERE sex IS NOT NULL
         -> GROUP BY species, sex;
     +---------+------+----------+
     | species | sex  | COUNT(*) |
     +---------+------+----------+
     | bird    | f    |        1 |
     | cat     | f    |        1 |
     | cat     | m    |        1 |
     | dog     | f    |        1 |
     | dog     | m    |        2 |
     | hamster | f    |        1 |
     | snake   | m    |        1 |
     +---------+------+----------+

Using More Than one Table
.........................

The `pet' table keeps track of which pets you have.  If you want to
record other information about them, such as events in their lives like
visits to the vet or when litters are born, you need another table.
What should this table look like? It needs:

   * To contain the pet name so you know which animal each event
     pertains to.

   * A date so you know when the event occurred.

   * A field to describe the event.

   * An event type field, if you want to be able to categorize events.

Given these considerations, the `CREATE TABLE' statement for the
`event' table might look like this:

     mysql> CREATE TABLE event (name VARCHAR(20), date DATE,
         -> type VARCHAR(15), remark VARCHAR(255));

As with the `pet' table, it's easiest to load the initial records by
creating a tab-delimited text file containing the information:

Fluffy      1995-05-15  litter      4 kittens, 3 female, 1 male
Buffy       1993-06-23  litter      5 puppies, 2 female, 3 male
Buffy       1994-06-19  litter      3 puppies, 3 female
Chirpy      1999-03-21  vet         needed beak straightened
Slim        1997-08-03  vet         broken rib
Bowser      1991-10-12  kennel      
Fang        1991-10-12  kennel      
Fang        1998-08-28  birthday    Gave him a new chew toy
Claws       1998-03-17  birthday    Gave him a new flea collar
Whistler    1998-12-09  birthday    First birthday

Load the records like this:

     mysql> LOAD DATA LOCAL INFILE "event.txt" INTO TABLE event;

Based on what you've learned from the queries you've run on the `pet'
table, you should be able to perform retrievals on the records in the
`event' table; the principles are the same.  But when is the `event'
table by itself insufficient to answer questions you might ask?

Suppose you want to find out the ages of each pet when they had their
litters.  The `event' table indicates when this occurred, but to
calculate the age of the mother, you need her birth date.  Because that
is stored in the `pet' table, you need both tables for the query:

     mysql> SELECT pet.name, (TO_DAYS(date) - TO_DAYS(birth))/365 AS age, remark
         -> FROM pet, event
         -> WHERE pet.name = event.name AND type = "litter";
     +--------+------+-----------------------------+
     | name   | age  | remark                      |
     +--------+------+-----------------------------+
     | Fluffy | 2.27 | 4 kittens, 3 female, 1 male |
     | Buffy  | 4.12 | 5 puppies, 2 female, 3 male |
     | Buffy  | 5.10 | 3 puppies, 3 female         |
     +--------+------+-----------------------------+

There are several things to note about this query:

   * The `FROM' clause lists two tables because the query needs to pull
     information from both of them.

   * When combining (joining) information from multiple tables, you
     need to specify how records in one table can be matched to records
     in the other.  This is easy because they both have a `name'
     column.  The query uses `WHERE' clause to match up records in the
     two tables based on the `name' values.

   * Because the `name' column occurs in both tables, you must be
     specific about which table you mean when referring to the column.
     This is done by prepending the table name to the column name.

You need not have two different tables to perform a join.  Sometimes it
is useful to join a table to itself, if you want to compare records in
a table to other records in that same table.  For example, to find
breeding pairs among your pets, you can join the `pet' table with
itself to pair up males and females of like species:

     mysql> SELECT p1.name, p1.sex, p2.name, p2.sex, p1.species
         -> FROM pet AS p1, pet AS p2
         -> WHERE p1.species = p2.species AND p1.sex = "f" AND p2.sex = "m";
     +--------+------+--------+------+---------+
     | name   | sex  | name   | sex  | species |
     +--------+------+--------+------+---------+
     | Fluffy | f    | Claws  | m    | cat     |
     | Buffy  | f    | Fang   | m    | dog     |
     | Buffy  | f    | Bowser | m    | dog     |
     +--------+------+--------+------+---------+

In this query, we specify aliases for the table name in order to refer
to the columns and keep straight which instance of the table each
column reference is associated with.

Getting Information About Databases and Tables
==============================================

What if you forget the name of a database or table, or what the
structure of a given table is (for example, what its columns are
called)?  MySQL addresses this problem through several statements that
provide information about the databases and tables it supports.

You have already seen `SHOW DATABASES', which lists the databases
managed by the server.  To find out which database is currently
selected, use the `DATABASE()' function:

     mysql> SELECT DATABASE();
     +------------+
     | DATABASE() |
     +------------+
     | menagerie  |
     +------------+

If you haven't selected any database yet, the result is blank.

To find out what tables the current database contains (for example, when
you're not sure about the name of a table), use this command:

     mysql> SHOW TABLES;
     +---------------------+
     | Tables in menagerie |
     +---------------------+
     | event               |
     | pet                 |
     +---------------------+

If you want to find out about the structure of a table, the `DESCRIBE'
command is useful; it displays information about each of a table's
columns:

     mysql> DESCRIBE pet;
     +---------+-------------+------+-----+---------+-------+
     | Field   | Type        | Null | Key | Default | Extra |
     +---------+-------------+------+-----+---------+-------+
     | name    | varchar(20) | YES  |     | NULL    |       |
     | owner   | varchar(20) | YES  |     | NULL    |       |
     | species | varchar(20) | YES  |     | NULL    |       |
     | sex     | char(1)     | YES  |     | NULL    |       |
     | birth   | date        | YES  |     | NULL    |       |
     | death   | date        | YES  |     | NULL    |       |
     +---------+-------------+------+-----+---------+-------+

`Field' indicates the column name, `Type' is the data type for the
column, `Null' indicates whether or not the column can contain `NULL'
values, `Key' indicates whether or not the column is indexed, and
`Default' specifies the column's default value.

If you have indexes on a table, `SHOW INDEX FROM tbl_name' produces
information about them.

Examples of Common Queries
==========================

Here are examples of how to solve some common problems with MySQL.

Some of the examples use the table `shop' to hold the price of each
article (item number) for certain traders (dealers).  Supposing that
each trader has a single fixed price per article, then (`article',
`dealer') is a primary key for the records.

Start the command line tool `mysql' and select a database:

     mysql your-database-name

(In most MySQL installations, you can use the database-name 'test').

You can create the example table as:

     CREATE TABLE shop (
      article INT(4) UNSIGNED ZEROFILL DEFAULT '0000' NOT NULL,
      dealer  CHAR(20)                 DEFAULT ''     NOT NULL,
      price   DOUBLE(16,2)             DEFAULT '0.00' NOT NULL,
      PRIMARY KEY(article, dealer));
     
     INSERT INTO shop VALUES
     (1,'A',3.45),(1,'B',3.99),(2,'A',10.99),(3,'B',1.45),(3,'C',1.69),
     (3,'D',1.25),(4,'D',19.95);

Okay, so the example data is:

     mysql> SELECT * FROM shop;
     
     +---------+--------+-------+
     | article | dealer | price |
     +---------+--------+-------+
     |    0001 | A      |  3.45 |
     |    0001 | B      |  3.99 |
     |    0002 | A      | 10.99 |
     |    0003 | B      |  1.45 |
     |    0003 | C      |  1.69 |
     |    0003 | D      |  1.25 |
     |    0004 | D      | 19.95 |
     +---------+--------+-------+

The Maximum Value for a Column
------------------------------

"What's the highest item number?"

     SELECT MAX(article) AS article FROM shop
     
     +---------+
     | article |
     +---------+
     |       4 |
     +---------+

The Row Holding the Maximum of a Certain Column
-----------------------------------------------

"Find number, dealer, and price of the most expensive article."

In ANSI SQL this is easily done with a sub-query:

     SELECT article, dealer, price
     FROM   shop
     WHERE  price=(SELECT MAX(price) FROM shop)

In MySQL (which does not yet have sub-selects), just do it in two steps:

  1. Get the maximum price value from the table with a `SELECT'
     statement.

  2. Using this value compile the actual query:
          SELECT article, dealer, price
          FROM   shop
          WHERE  price=19.95

Another solution is to sort all rows descending by price and only get
the first row using the MySQL specific `LIMIT' clause:

     SELECT article, dealer, price
     FROM   shop
     ORDER BY price DESC
     LIMIT 1

*NOTE*:  If there are several most expensive articles (for example,
each 19.95) the `LIMIT' solution shows only one of them!

Maximum of Column per Group
---------------------------

"What's the highest price per article?"

     SELECT article, MAX(price) AS price
     FROM   shop
     GROUP BY article
     
     +---------+-------+
     | article | price |
     +---------+-------+
     |    0001 |  3.99 |
     |    0002 | 10.99 |
     |    0003 |  1.69 |
     |    0004 | 19.95 |
     +---------+-------+

The Rows Holding the Group-wise Maximum of a Certain Field
----------------------------------------------------------

"For each article, find the dealer(s) with the most expensive price."

In ANSI SQL, I'd do it with a sub-query like this:

     SELECT article, dealer, price
     FROM   shop s1
     WHERE  price=(SELECT MAX(s2.price)
                   FROM shop s2
                   WHERE s1.article = s2.article);

In MySQL it's best do it in several steps:

  1. Get the list of (article,maxprice).

  2. For each article get the corresponding rows that have the stored
     maximum price.

This can easily be done with a temporary table:

     CREATE TEMPORARY TABLE tmp (
             article INT(4) UNSIGNED ZEROFILL DEFAULT '0000' NOT NULL,
             price   DOUBLE(16,2)             DEFAULT '0.00' NOT NULL);
     
     LOCK TABLES shop read;
     
     INSERT INTO tmp SELECT article, MAX(price) FROM shop GROUP BY article;
     
     SELECT shop.article, dealer, shop.price FROM shop, tmp
     WHERE shop.article=tmp.article AND shop.price=tmp.price;
     
     UNLOCK TABLES;
     
     DROP TABLE tmp;

If you don't use a `TEMPORARY' table, you must also lock the 'tmp'
table.

"Can it be done with a single query?"

Yes, but only by using a quite inefficient trick that I call the
"MAX-CONCAT trick":

     SELECT article,
            SUBSTRING( MAX( CONCAT(LPAD(price,6,'0'),dealer) ), 7) AS dealer,
       0.00+LEFT(      MAX( CONCAT(LPAD(price,6,'0'),dealer) ), 6) AS price
     FROM   shop
     GROUP BY article;
     
     +---------+--------+-------+
     | article | dealer | price |
     +---------+--------+-------+
     |    0001 | B      |  3.99 |
     |    0002 | A      | 10.99 |
     |    0003 | C      |  1.69 |
     |    0004 | D      | 19.95 |
     +---------+--------+-------+

The last example can, of course, be made a bit more efficient by doing
the splitting of the concatenated column in the client.

Using user variables
--------------------

You can use MySQL user variables to remember results without having to
store them in temporary variables in the client.  *Note Variables::.

For example, to find the articles with the highest and lowest price you
can do:

     select @min_price:=min(price),@max_price:=max(price) from shop;
     select * from shop where price=@min_price or price=@max_price;
     
     +---------+--------+-------+
     | article | dealer | price |
     +---------+--------+-------+
     |    0003 | D      |  1.25 |
     |    0004 | D      | 19.95 |
     +---------+--------+-------+

Using Foreign Keys
------------------

You don't need foreign keys to join 2 tables.

The only thing MySQL doesn't do is `CHECK' to make sure that the keys
you use really exist in the table(s) you're referencing and it doesn't
automatically delete rows from a table with a foreign key definition.
If you use your keys like normal, it'll work just fine:

     CREATE TABLE persons (
         id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
         name CHAR(60) NOT NULL,
         PRIMARY KEY (id)
     );
     
     CREATE TABLE shirts (
         id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
         style ENUM('t-shirt', 'polo', 'dress') NOT NULL,
         color ENUM('red', 'blue', 'orange', 'white', 'black') NOT NULL,
         owner SMALLINT UNSIGNED NOT NULL REFERENCES persons,
         PRIMARY KEY (id)
     );
     
     
     INSERT INTO persons VALUES (NULL, 'Antonio Paz');
     
     INSERT INTO shirts VALUES
     (NULL, 'polo', 'blue', LAST_INSERT_ID()),
     (NULL, 'dress', 'white', LAST_INSERT_ID()),
     (NULL, 't-shirt', 'blue', LAST_INSERT_ID());
     
     
     INSERT INTO persons VALUES (NULL, 'Lilliana Angelovska');
     
     INSERT INTO shirts VALUES
     (NULL, 'dress', 'orange', LAST_INSERT_ID()),
     (NULL, 'polo', 'red', LAST_INSERT_ID()),
     (NULL, 'dress', 'blue', LAST_INSERT_ID()),
     (NULL, 't-shirt', 'white', LAST_INSERT_ID());
     
     
     SELECT * FROM persons;
     +----+---------------------+
     | id | name                |
     +----+---------------------+
     |  1 | Antonio Paz         |
     |  2 | Lilliana Angelovska |
     +----+---------------------+
     
     SELECT * FROM shirts;
     +----+---------+--------+-------+
     | id | style   | color  | owner |
     +----+---------+--------+-------+
     |  1 | polo    | blue   |     1 |
     |  2 | dress   | white  |     1 |
     |  3 | t-shirt | blue   |     1 |
     |  4 | dress   | orange |     2 |
     |  5 | polo    | red    |     2 |
     |  6 | dress   | blue   |     2 |
     |  7 | t-shirt | white  |     2 |
     +----+---------+--------+-------+
     
     
     SELECT s.* FROM persons p, shirts s
      WHERE p.name LIKE 'Lilliana%'
        AND s.owner = p.id
        AND s.color <> 'white';
     
     +----+-------+--------+-------+
     | id | style | color  | owner |
     +----+-------+--------+-------+
     |  4 | dress | orange |     2 |
     |  5 | polo  | red    |     2 |
     |  6 | dress | blue   |     2 |
     +----+-------+--------+-------+

Searching on Two Keys
---------------------

MySQL doesn't yet optimize when you search on two different keys
combined with `OR' (searching on one key with different `OR' parts is
optimized quite well):

     SELECT field1_index, field2_index FROM test_table WHERE field1_index = '1'
     OR  field2_index = '1'

The reason is that we haven't yet had time to come up with an efficient
way to handle this in the general case. (The `AND' handling is, in
comparison, now completely general and works very well.)

For the moment you can solve this very efficiently by using a
`TEMPORARY' table. This type of optimization is also very good if you
are using very complicated queries where the SQL server does the
optimizations in the wrong order.

     CREATE TEMPORARY TABLE tmp
     SELECT field1_index, field2_index FROM test_table WHERE field1_index = '1';
     INSERT INTO tmp
     SELECT field1_index, field2_index FROM test_table WHERE field2_index = '1';
     SELECT * from tmp;
     DROP TABLE tmp;

The above way to solve this query is in effect a `UNION' of two queries.

Calculating visits per day
--------------------------

The following shows an idea of how you can use the bit group functions
to calculate the number of days per month a user has visited a web page.

     CREATE TABLE t1 (year YEAR(4), month INT(2) UNSIGNED ZEROFILL, day INT(2) UNSIGNED ZEROFILL);
     INSERT INTO t1 VALUES(2000,1,1),(2000,1,20),(2000,1,30),(2000,2,2),(2000,2,23),(2000,2,23);
     
     SELECT year,month,BIT_COUNT(BIT_OR(1<<day)) AS days FROM t1 GROUP BY year,month;
     
     Which returns:
     
     +------+-------+------+
     | year | month | days |
     +------+-------+------+
     | 2000 |    01 |    3 |
     | 2000 |    02 |    2 |
     +------+-------+------+

The above calculates how many different days was used for a given
year/month combination, with automatic removal of duplicate entries.

Using `mysql' in Batch Mode
===========================

In the previous sections, you used `mysql' interactively to enter
queries and view the results.  You can also run `mysql' in batch mode.
To do this, put the commands you want to run in a file, then tell
`mysql' to read its input from the file:

     shell> mysql < batch-file

If you need to specify connection parameters on the command line, the
command might look like this:

     shell> mysql -h host -u user -p < batch-file
     Enter password: ********

When you use `mysql' this way, you are creating a script file, then
executing the script.

Why use a script?  Here are a few reasons:

   * If you run a query repeatedly (say, every day or every week),
     making it a script allows you to avoid retyping it each time you
     execute it.

   * You can generate new queries from existing ones that are similar
     by copying and editing script files.

   * Batch mode can also be useful while you're developing a query,
     particularly for multiple-line commands or multiple-statement
     sequences of commands.  If you make a mistake, you don't have to
     retype everything.  Just edit your script to correct the error,
     then tell `mysql' to execute it again.

   * If you have a query that produces a lot of output, you can run the
     output through a pager rather than watching it scroll off the top
     of your screen:

          shell> mysql < batch-file | more

   * You can catch the output in a file for further processing:

          shell> mysql < batch-file > mysql.out

   * You can distribute your script to other people so they can run the
     commands, too.

   * Some situations do not allow for interactive use, for example,
     when you run a query from a `cron' job.  In this case, you must
     use batch mode.

The default output format is different (more concise) when you run
`mysql' in batch mode than when you use it interactively.  For example,
the output of `SELECT DISTINCT species FROM pet' looks like this when
run interactively:

     +---------+
     | species |
     +---------+
     | bird    |
     | cat     |
     | dog     |
     | hamster |
     | snake   |
     +---------+

But like this when run in batch mode:

     species
     bird
     cat
     dog
     hamster
     snake

If you want to get the interactive output format in batch mode, use
`mysql -t'.  To echo to the output the commands that are executed, use
`mysql -vvv'.

Queries from Twin Project
=========================

At Analytikerna and Lentus, we have been doing the systems and field
work for a big research project. This project is a collaboration
between the Institute of Environmental Medicine at Karolinska
Institutet Stockholm and the Section on Clinical Research in Aging and
Psychology at the University of Southern California.

The project involves a screening part where all twins in Sweden older
than 65 years are interviewed by telephone. Twins who meet certain
criteria are passed on to the next stage. In this latter stage, twins
who want to participate are visited by a doctor/nurse team. Some of the
examinations include physical and neuropsychological examination,
laboratory testing, neuroimaging, psychological status assessment, and
family history collection. In addition, data are collected on medical
and environmental risk factors.

More information about Twin studies can be found at:

     <http://www.imm.ki.se/TWIN/TWINUKW.HTM>

The latter part of the project is administered with a Web interface
written using Perl and MySQL.

Each night all data from the interviews are moved into a MySQL database.

Find all Non-distributed Twins
------------------------------

The following query is used to determine who goes into the second part
of the project:

     select
             concat(p1.id, p1.tvab) + 0 as tvid,
             concat(p1.christian_name, " ", p1.surname) as Name,
             p1.postal_code as Code,
             p1.city as City,
             pg.abrev as Area,
             if(td.participation = "Aborted", "A", " ") as A,
             p1.dead as dead1,
             l.event as event1,
             td.suspect as tsuspect1,
             id.suspect as isuspect1,
             td.severe as tsevere1,
             id.severe as isevere1,
             p2.dead as dead2,
             l2.event as event2,
             h2.nurse as nurse2,
             h2.doctor as doctor2,
             td2.suspect as tsuspect2,
             id2.suspect as isuspect2,
             td2.severe as tsevere2,
             id2.severe as isevere2,
             l.finish_date
     from
             twin_project as tp
             /* For Twin 1 */
             left join twin_data as td on tp.id = td.id and tp.tvab = td.tvab
             left join informant_data as id on tp.id = id.id and tp.tvab = id.tvab
             left join harmony as h on tp.id = h.id and tp.tvab = h.tvab
             left join lentus as l on tp.id = l.id and tp.tvab = l.tvab
             /* For Twin 2 */
             left join twin_data as td2 on p2.id = td2.id and p2.tvab = td2.tvab
             left join informant_data as id2 on p2.id = id2.id and p2.tvab = id2.tvab
             left join harmony as h2 on p2.id = h2.id and p2.tvab = h2.tvab
             left join lentus as l2 on p2.id = l2.id and p2.tvab = l2.tvab,
             person_data as p1,
             person_data as p2,
             postal_groups as pg
     where
             /* p1 gets main twin and p2 gets his/her twin. */
             /* ptvab is a field inverted from tvab */
             p1.id = tp.id and p1.tvab = tp.tvab and
             p2.id = p1.id and p2.ptvab = p1.tvab and
             /* Just the sceening survey */
             tp.survey_no = 5 and
             /* Skip if partner died before 65 but allow emigration (dead=9) */
             (p2.dead = 0 or p2.dead = 9 or
              (p2.dead = 1 and
               (p2.death_date = 0 or
                (((to_days(p2.death_date) - to_days(p2.birthday)) / 365)
                 >= 65))))
             and
             (
             /* Twin is suspect */
             (td.future_contact = 'Yes' and td.suspect = 2) or
             /* Twin is suspect - Informant is Blessed */
             (td.future_contact = 'Yes' and td.suspect = 1 and id.suspect = 1) or
             /* No twin - Informant is Blessed */
             (ISNULL(td.suspect) and id.suspect = 1 and id.future_contact = 'Yes') or
             /* Twin broken off - Informant is Blessed */
             (td.participation = 'Aborted'
              and id.suspect = 1 and id.future_contact = 'Yes') or
             /* Twin broken off - No inform - Have partner */
             (td.participation = 'Aborted' and ISNULL(id.suspect) and p2.dead = 0))
             and
             l.event = 'Finished'
             /* Get at area code */
             and substring(p1.postal_code, 1, 2) = pg.code
             /* Not already distributed */
             and (h.nurse is NULL or h.nurse=00 or h.doctor=00)
             /* Has not refused or been aborted */
             and not (h.status = 'Refused' or h.status = 'Aborted'
             or h.status = 'Died' or h.status = 'Other')
     order by
             tvid;

Some explanations:
`concat(p1.id, p1.tvab) + 0 as tvid'
     We want to sort on the concatenated `id' and `tvab' in numerical
     order. Adding `0' to the result causes MySQL to treat the result
     as a number.

column `id'
     This identifies a pair of twins. It is a key in all tables.

column `tvab'
     This identifies a twin in a pair. It has a value of `1' or `2'.

column `ptvab'
     This is an inverse of `tvab'. When `tvab' is `1' this is `2', and
     vice versa. It exists to save typing and to make it easier for
     MySQL to optimize the query.

This query demonstrates, among other things, how to do lookups on a
table from the same table with a join (`p1' and `p2'). In the example,
this is used to check whether a twin's partner died before the age of
65. If so, the row is not returned.

All of the above exist in all tables with twin-related information. We
have a key on both `id,tvab' (all tables), and `id,ptvab'
(`person_data') to make queries faster.

On our production machine (A 200MHz UltraSPARC), this query returns
about 150-200 rows and takes less than one second.

The current number of records in the tables used above:
*Table*                *Rows*
`person_data'          71074
`lentus'               5291
`twin_project'         5286
`twin_data'            2012
`informant_data'       663
`harmony'              381
`postal_groups'        100

Show a Table on Twin Pair Status
--------------------------------

Each interview ends with a status code called `event'. The query shown
below is used to display a table over all twin pairs combined by event.
This indicates in how many pairs both twins are finished, in how many
pairs one twin is finished and the other refused, and so on.

     select
             t1.event,
             t2.event,
             count(*)
     from
             lentus as t1,
             lentus as t2,
             twin_project as tp
     where
             /* We are looking at one pair at a time */
             t1.id = tp.id
             and t1.tvab=tp.tvab
             and t1.id = t2.id
             /* Just the sceening survey */
             and tp.survey_no = 5
             /* This makes each pair only appear once */
             and t1.tvab='1' and t2.tvab='2'
     group by
             t1.event, t2.event;

Using MySQL with Apache
=======================

The Contrib section includes programs that let you authenticate your
users from a MySQL database and also let you log your log files into a
MySQL table. *Note Contrib::.

You can change the Apache logging format to be easily readable by MySQL
by putting the following into the Apache configuration file:

     LogFormat \
             "\"%h\",%{%Y%m%d%H%M%S}t,%>s,\"%b\",\"%{Content-Type}o\",  \
             \"%U\",\"%{Referer}i\",\"%{User-Agent}i\""

In MySQL you can do something like this:

     LOAD DATA INFILE '/local/access_log' INTO TABLE table_name
     FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"' ESCAPED BY '\\'

MySQL Database Administration
*****************************

Configuring MySQL
=================

mysqld Command-line Options
---------------------------

In most cases you should manage mysqld options through option files.
*Note Option files::.

`mysqld' and `mysqld.server' reads options from the `mysqld' and
`server' groups. `mysqld_safe' read options from the `mysqld',
`server', `mysqld_safe' and `safe_mysqld' groups.  An embedded MySQL
server usually reads options from the `server', `embedded' and
`xxxxx_SERVER', where `xxxxx' is the name of the application.

`mysqld' accepts the following command-line options:

`--ansi'
     Use ANSI SQL syntax instead of MySQL syntax.  *Note ANSI mode::.

`-b, --basedir=path'
     Path to installation directory. All paths are usually resolved
     relative to this.

`--big-tables'
     Allow big result sets by saving all temporary sets on file.  It
     solves most 'table full' errors, but also slows down the queries
     where in-memory tables would suffice.  Since Version 3.23.2, MySQL
     is able to solve it automatically by using memory for small
     temporary tables and switching to disk tables where necessary.

`--bind-address=IP'
     IP address to bind to.

`--character-sets-dir=path'
     Directory where character sets are.  *Note Character sets::.

`--chroot=path'
     Chroot `mysqld' daemon during startup.  Recommended security
     measure. It will somewhat limit `LOAD DATA INFILE' and `SELECT ...
     INTO OUTFILE' though.

`--core-file'
     Write a core file if `mysqld' dies.  For some systems you must also
     specify `--core-file-size' to `safe_mysqld'. *Note `safe_mysqld':
     safe_mysqld.

`-h, --datadir=path'
     Path to the database root.

`--default-character-set=charset'
     Set the default character set.  *Note Character sets::.

`--default-table-type=type'
     Set the default table type for tables.  *Note Table types::.

`--debug[...]='
     If MySQL is configured with `--with-debug', you can use this
     option to get a trace file of what `mysqld' is doing.  *Note
     Making trace files::.

`--delay-key-write-for-all-tables'
     Don't flush key buffers between writes for any `MyISAM' table.
     *Note Server parameters::.

`--enable-locking'
     Enable system locking.  Note that if you use this option on a
     system which a not fully working lockd() (as on Linux) you will
     easily get mysqld to deadlock.

`-T, --exit-info'
     This is a bit mask of different flags one can use for debugging the
     mysqld server;  One should not use this option if one doesn't know
     exactly what it does!

`--flush'
     Flush all changes to disk after each SQL command.  Normally MySQL
     only does a write of all changes to disk after each SQL command
     and lets the operating system handle the syncing to disk.  *Note
     Crashing::.

`-?, --help'
     Display short help and exit.

`--init-file=file'
     Read SQL commands from this file at startup.

`-L, --language=...'
     Client error messages in given language.  May be given as a full
     path.  *Note Languages::.

`-l, --log[=file]'
     Log connections and queries to file. *Note Query log::.

`--log-isam[=file]'
     Log all ISAM/MyISAM changes to file (only used when debugging
     ISAM/MyISAM).

`--log-slow-queries[=file]'
     Log all queries that have taken more than `long_query_time'
     seconds to execute to file.  *Note Slow query log::.

`--log-update[=file]'
     Log updates to `file.#' where `#' is a unique number if not given.
     *Note Update log::.

`--log-long-format'
     Log some extra information to update log.  If you are using
     `--log-slow-queries' then queries that are not using indexes are
     logged to the slow query log.

`--low-priority-updates'
     Table-modifying operations (`INSERT'/`DELETE'/`UPDATE') will have
     lower priority than selects.  It can also be done via `{INSERT |
     REPLACE | UPDATE | DELETE} LOW_PRIORITY ...' to lower the priority
     of only one query, or by `SET OPTION SQL_LOW_PRIORITY_UPDATES=1'
     to change the priority in one thread.  *Note Table locking::.

`--memlock'
     Lock the `mysqld' process in memory.  This works only if your
     system supports the `mlockall()' system call (like Solaris).  This
     may help if you have a problem where the operating system is
     causing `mysqld' to swap on disk.

`--myisam-recover [=option[,option...]]] where option is any combination'
     of `DEFAULT', `BACKUP', `FORCE' or `QUICK'.  You can also set this
     explicitely to `""' if you want to disable this option. If this
     option is used, `mysqld' will on open check if the table is marked
     as crashed or if if the table wasn't closed properly.  (The last
     option only works if you are running with `--skip-locking'.)  If
     this is the case `mysqld' will run check on the table. If the
     table was corrupted, `mysqld' will attempt to repair it.

     The following options affects how the repair works.

     DEFAULT              The same as not giving any option to
                                   `--myisam-recover'.
     BACKUP               If the data table was changed during recover,
                          save a                     backup of the
                          `table_name.MYD' data file as
                            `table_name-datetime.BAK'.
     FORCE                Run recover even if we will loose more than
                          one row                     from the .MYD file.
     QUICK                Don't check the rows in the table if there
                          isn't any                     delete blocks.

     Before a table is automatically repaired, MySQL will add a note
     about this in the error log.  If you want to be able to recover
     from most things without user intervention, you should use the
     options `BACKUP,FORCE'.  This will force a repair of a table even
     if some rows would be deleted, but it will keep the old data file
     as a backup so that you can later examine what happened.

`--pid-file=path'
     Path to pid file used by `safe_mysqld'.

`-P, --port=...'
     Port number to listen for TCP/IP connections.

`-o, --old-protocol'
     Use the 3.20 protocol for compatibility with some very old clients.
     *Note Upgrading-from-3.20::.

`--one-thread'
     Only use one thread (for debugging under Linux).  *Note Debugging
     server::.

`-O, --set-variable var=option'
     Give a variable a value. `--help' lists variables.  You can find a
     full description for all variables in the `SHOW VARIABLES' section
     in this manual.  *Note SHOW VARIABLES::.  The tuning server
     parameters section includes information of how to optimize these.
     *Note Server parameters::.

`--safe-mode'
     Skip some optimize stages.  Implies `--skip-delay-key-write'.

`--safe-show-database'
     Don't show databases for which the user doesn't have any
     privileges.

`--safe-user-create'
     If this is enabled, a user can't create new users with the GRANT
     command, if the user doesn't have `INSERT' privilege to the
     `mysql.user' table or any column in this table.

`--skip-concurrent-insert'
     Turn off the ability to select and insert at the same time on
     `MyISAM' tables. (This is only to be used if you think you have
     found a bug in this feature.)

`--skip-delay-key-write'
     Ignore the `delay_key_write' option for all tables.  *Note Server
     parameters::.

`--skip-grant-tables'
     This option causes the server not to use the privilege system at
     all.  This gives everyone _full access_ to all databases!  (You
     can tell a running server to start using the grant tables again by
     executing `mysqladmin flush-privileges' or `mysqladmin reload'.)

`--skip-host-cache'
     Never use host name cache for faster name-ip resolution, but query
     DNS server on every connect instead.  *Note DNS::.

`--skip-locking'
     Don't use system locking.  To use `isamchk' or `myisamchk' you must
     shut down the server.  *Note Stability::.  Note that in MySQL
     Version 3.23 you can use `REPAIR' and `CHECK' to repair/check
     `MyISAM' tables.

`--skip-name-resolve'
     Hostnames are not resolved.  All `Host' column values in the grant
     tables must be IP numbers or `localhost'.  *Note DNS::.

`--skip-networking'
     Don't listen for TCP/IP connections at all.  All interaction with
     `mysqld' must be made via Unix sockets.  This option is highly
     recommended for systems where only local requests are allowed.
     *Note DNS::.

`--skip-new'
     Don't use new, possible wrong routines.  Implies
     `--skip-delay-key-write'.  This will also set default table type
     to `ISAM'.  *Note ISAM::.

`--skip-symlink'
     Don't delete or rename files that a symlinked file in the data
     directory points to.

`--skip-safemalloc'
     If MySQL is configured with `--with-debug=full', all programs will
     check the memory for overruns for every memory allocation and
     memory freeing.  As this checking is very slow, you can avoid
     this, when you don't need memory checking, by using this option.

`--skip-show-database'
     Don't allow 'SHOW DATABASE' commands, unless the user has *process*
     privilege.

`--skip-stack-trace'
     Don't write stack traces.  This option is useful when you are
     running `mysqld' under a debugger. *Note Debugging server::.

`--skip-thread-priority'
     Disable using thread priorities for faster response time.

`--socket=path'
     Socket file to use for local connections instead of default
     `/tmp/mysql.sock'.

`--sql-mode=option[,option[,option...]]'
     Option can be any combination of: `REAL_AS_FLOAT',
     `PIPES_AS_CONCAT', `ANSI_QUOTES', `IGNORE_SPACE', `SERIALIZE',
     `ONLY_FULL_GROUP_BY'.  It can also be empty (`""') if you want to
     reset this.

     By specifying all of the above options is same as using -ansi.
     With this option one can turn on only needed SQL modes. *Note ANSI
     mode::.

`transaction-isolation= { READ-UNCOMMITTED | READ-COMMITTED | REPEATABLE-READ | SERIALIZABLE }'
     Sets the default transaction isolation level.  *Note SET
     TRANSACTION::.

`-t, --tmpdir=path'
     Path for temporary files. It may be useful if your default `/tmp'
     directory resides on a partition too small to hold temporary
     tables.

`-u, --user=user_name'
     Run `mysqld' daemon as user `user_name'.  This option is
     _mandatory_ when starting `mysqld' as root.

`-V, --version'
     Output version information and exit.

`-W, --warnings'
     Print out warnings like `Aborted connection...' to the `.err' file.
     *Note Communication errors::.

my.cnf Option Files
-------------------

MySQL can, since Version 3.22, read default startup options for the
server and for clients from option files.

MySQL reads default options from the following files on Unix:

*Filename*             *Purpose*
`/etc/my.cnf'          Global options
`DATADIR/my.cnf'       Server-specific options
`defaults-extra-file'  The file specified with -defaults-extra-file=#
`~/.my.cnf'            User-specific options

`DATADIR' is the MySQL data directory (typically
`/usr/local/mysql/data' for a binary installation or `/usr/local/var'
for a source installation).  Note that this is the directory that was
specified at configuration time, not the one specified with `--datadir'
when `mysqld' starts up!  (`--datadir' has no effect on where the
server looks for option files, because it looks for them before it
processes any command-line arguments.)

MySQL reads default options from the following files on Windows:

*Filename*             *Purpose*
`windows-system-directory\my.ini'Global options
`C:\my.cnf'            Global options
`C:\mysql\data\my.cnf' Server-specific options

Note that on Windows, you should specify all paths with `/' instead of
`\'. If you use `\', you need to specify this twice, as `\' is the
escape character in MySQL.

MySQL tries to read option files in the order listed above.  If
multiple option files exist, an option specified in a file read later
takes precedence over the same option specified in a file read earlier.
Options specified on the command line take precedence over options
specified in any option file.  Some options can be specified using
environment variables.  Options specified on the command line or in
option files take precedence over environment variable values. *Note
Environment variables::.

The following programs support option files:  `mysql', `mysqladmin',
`mysqld', `mysqld_safe', `mysql.server', `mysqldump', `mysqlimport',
`mysqlshow', `mysqlcheck', `myisamchk', and `myisampack'.

You can use option files to specify any long option that a program
supports!  Run the program with `--help' to get a list of available
options.

An option file can contain lines of the following forms:

`#comment'
     Comment lines start with `#' or `;'. Empty lines are ignored.

`[group]'
     `group' is the name of the program or group for which you want to
     set options.  After a group line, any `option' or `set-variable'
     lines apply to the named group until the end of the option file or
     another group line is given.

`option'
     This is equivalent to `--option' on the command line.

`option=value'
     This is equivalent to `--option=value' on the command line.

`set-variable = variable=value'
     This is equivalent to `--set-variable variable=value' on the
     command line.  This syntax must be used to set a `mysqld' variable.

The `client' group allows you to specify options that apply to all
MySQL clients (not `mysqld'). This is the perfect group to use to
specify the password you use to connect to the server.  (But make sure
the option file is readable and writable only by yourself.)

Note that for options and values, all leading and trailing blanks are
automatically deleted.  You may use the escape sequences `\b', `\t',
`\n', `\r', `\\', and `\s' in your value string (`\s' == blank).

Here is a typical global option file:

     [client]
     port=3306
     socket=/tmp/mysql.sock
     
     [mysqld]
     port=3306
     socket=/tmp/mysql.sock
     set-variable = key_buffer_size=16M
     set-variable = max_allowed_packet=1M
     
     [mysqldump]
     quick

Here is typical user option file:

     [client]
     # The following password will be sent to all standard MySQL clients
     password=my_password
     
     [mysql]
     no-auto-rehash
     set-variable = connect_timeout=2
     
     [mysqlhotcopy]
     interactive-timeout

If you have a source distribution, you will find sample configuration
files named `my-xxxx.cnf' in the `support-files' directory.  If you
have a binary distribution, look in the `DIR/support-files' directory,
where `DIR' is the pathname to the MySQL installation directory
(typically `/usr/local/mysql').  Currently there are sample
configuration files for small, medium, large, and very large systems.
You can copy `my-xxxx.cnf' to your home directory (rename the copy to
`.my.cnf') to experiment with this.

All MySQL clients that support option files support the following
options:

-no-defaults                  Don't read any option files.
-print-defaults               Print the program name and all options
                              that it will get.
-defaults-file=full-path-to-default-fileOnly use the given configuration file.
-defaults-extra-file=full-path-to-default-fileRead this configuration file after the
                              global configuration file but before the
                              user configuration file.

Note that the above options must be first on the command line to work!
`--print-defaults' may however be used directly after the
`--defaults-xxx-file' commands.

Note for developers:  Option file handling is implemented simply by
processing all matching options (that is, options in the appropriate
group) before any command-line arguments. This works nicely for
programs that use the last instance of an option that is specified
multiple times. If you have an old program that handles
multiply-specified options this way but doesn't read option files, you
need add only two lines to give it that capability.  Check the source
code of any of the standard MySQL clients to see how to do this.

In shell scripts you can use the `my_print_defaults' command to parse
the config files:


     shell> my_print_defaults client mysql
     --port=3306
     --socket=/tmp/mysql.sock
     --no-auto-rehash

The above output contains all options for the groups 'client' and
'mysql'.

Installing Many Servers on the Same Machine
-------------------------------------------

In some cases you may want to have many different `mysqld' daemons
(servers) running on the same machine.  You may for example want to run
a new version of MySQL for testing together with an old version that is
in production.  Another case is when you want to give different users
access to different `mysqld' servers that they manage themselves.

One way to get a new server running is by starting it with a different
socket and port as follows:

     shell> MYSQL_UNIX_PORT=/tmp/mysqld-new.sock
     shell> MYSQL_TCP_PORT=3307
     shell> export MYSQL_UNIX_PORT MYSQL_TCP_PORT
     shell> scripts/mysql_install_db
     shell> bin/safe_mysqld &

The environment variables appendix includes a list of other environment
variables you can use to affect `mysqld'. *Note Environment variables::.

The above is the quick and dirty way that one commonly uses for testing.
The nice thing with this is that all connections you do in the above
shell will automatically be directed to the new running server!

If you need to do this more permanently, you should create an option
file for each server. *Note Option files::.  In your startup script that
is executed at boot time (mysql.server?) you should specify for both
servers:

`safe_mysqld --default-file=path-to-option-file'

At least the following options should be different per server:

   * port=#

   * socket=path

   * pid-file=path

The following options should be different, if they are used:

   * log=path

   * log-bin=path

   * log-update=path

   * log-isam=path

   * bdb-logdir=path

If you want more performance, you can also specify the following
differently:

   * tmpdir=path

   * bdb-tmpdir=path

*Note Command-line options::.

If you are installing binary MySQL versions (.tar files) and start them
with `./bin/safe_mysqld' then in most cases the only option you need to
add/change is the `socket' and `port' argument to `safe_mysqld'.

Running Multiple MySQL Servers on the Same Machine
--------------------------------------------------

There are circumstances when you might want to run multiple servers on
the same machine.  For example, you might want to test a new MySQL
release while leaving your existing production setup undisturbed.  Or
you might be an Internet service provider that wants to provide
independent MySQL installations for different customers.

If you want to run multiple servers, the easiest way is to compile the
servers with different TCP/IP ports and socket files so they are not
both listening to the same TCP/IP port or socket file. *Note
`mysqld_multi': mysqld_multi.

Assume an existing server is configured for the default port number and
socket file.  Then configure the new server with a `configure' command
something like this:

     shell> ./configure  --with-tcp-port=port_number \
                  --with-unix-socket-path=file_name \
                  --prefix=/usr/local/mysql-3.22.9

Here `port_number' and `file_name' should be different than the default
port number and socket file pathname, and the `--prefix' value should
specify an installation directory different than the one under which
the existing MySQL installation is located.

You can check the socket used by any currently executing MySQL server
with this command:

     shell> mysqladmin -h hostname --port=port_number variables

Note that if you specify "`localhost'" as a hostname, `mysqladmin' will
default to using Unix sockets instead of TCP/IP.

If you have a MySQL server running on the port you used, you will get a
list of some of the most important configurable variables in MySQL,
including the socket name.

You don't have to recompile a new MySQL server just to start with a
different port and socket.  You can change the port and socket to be
used by specifying them at run time as options to `safe_mysqld':

     shell> /path/to/safe_mysqld --socket=file_name --port=port_number

`mysqld_multi' can also take `safe_mysqld' (or `mysqld') as an argument
and pass the options from a configuration file to `safe_mysqld' and
further to `mysqld'.

If you run the new server on the same database directory as another
server with logging enabled, you should also specify the name of the log
files to `safe_mysqld' with `--log', `--log-update', or
`--log-slow-queries'.  Otherwise, both servers may be trying to write
to the same log file.

*WARNING*: Normally you should never have two servers that update data
in the same database!  If your OS doesn't support fault-free system
locking, this may lead to unpleasant surprises!

If you want to use another database directory for the second server, you
can use the `--datadir=path' option to `safe_mysqld'.

*NOTE* also that starting several MySQL servers (`mysqlds') in
different machines and letting them access one data directory over
`NFS' is generally a *BAD IDEA*! The problem is that the `NFS' will
become the bottleneck with the speed. It is not meant for such use. And
last but not least, you would still have to come up with a solution how
to make sure that two or more `mysqlds' are not interfering with each
other. At the moment there is no platform that would 100% reliable do
the file locking (`lockd' daemon usually) in every situation. Yet there
would be one more possible risk with `NFS'; it would make the work even
more complicated for `lockd' daemon to handle. So make it easy for your
self and forget about the idea. The working solution is to have one
computer with an operating system that efficiently handles threads and
have several CPUs in it.

When you want to connect to a MySQL server that is running with a
different port than the port that is compiled into your client, you can
use one of the following methods:

   * Start the client with `--host 'hostname' --port=port_number' to
     connect with TCP/IP, or `[--host localhost] --socket=file_name' to
     connect via a Unix socket.

   * In your C or Perl programs, you can give the port or socket
     arguments when connecting to the MySQL server.

   * If your are using the Perl `DBD::mysql' module you can read the
     options from the MySQL option files.  *Note Option files::.

          $dsn = "DBI:mysql:test;mysql_read_default_group=client;mysql_read_default_file=/usr/local/mysql/data/my.cnf"
          $dbh = DBI->connect($dsn, $user, $password);

   * Set the `MYSQL_UNIX_PORT' and `MYSQL_TCP_PORT' environment
     variables to point to the Unix socket and TCP/IP port before you
     start your clients.  If you normally use a specific socket or
     port, you should place commands to set these environment variables
     in your `.login' file.  *Note Environment variables::.

   * Specify the default socket and TCP/IP port in the `.my.cnf' file
     in your home directory. *Note Option files::.

General Security Issues and the MySQL Access Privilege System
=============================================================

MySQL has an advanced but non-standard security/privilege system.  This
section describes how it works.

General Security Guidelines
----------------------