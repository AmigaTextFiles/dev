.\" @(#)ctg.1 0  2/22/95
.ds ]W COMMANDS
.\" Copyright (C) 1994-1995 by Rainer Koppler
.TH CTG 1 "25 February 1995"
.SH NAME
ctg \- generate pretty class trees from C++ source files
.SH SYNOPSIS
.B ctg
[
.BI \-m
]
[
.BI \-o " name"
]
[
.BI \-p
]
[
.BI \-r " name"
]
[
.BI \-s
]
[
.BI \-S " name"
]
[
.BI \-v
]
name ...
.LP
.SH DESCRIPTION
.IX "ctg"  ""  "\fLctg\fP
.LP
.B ctg
reads a number of C++ source files, extracts class und struct definitions and
generates a graphical representation of the resulting class hierarchy as a
PostScript source. The output may be constrained to a subset of classes
according to the contents of a given configuration file.
.SH OPTIONS
If run without options, ctg processes all input files silently and writes the
generated class tree to the standard output.
.LP
.TP 10
.BI \-m
Micro size output. By default ctg uses 80x12 boxes and font size 10 for the
PostScript output which suffices for trees with depth 6. With this option 60x10
boxes and font size 8 are used. This might suffice for larger class libraries.
.TP
.BI \-o " name"
Output file specification. By default ctg writes the PostScript source to the
standard. With this option the output is written to \fIname\fP.
.TP
.BI \-p
Also include privates. By default ctg ignores \fIprivate\fP sections within
class definitions. With this option also private classes are included into the
hierarchy.
.TP
.BI \-r " name"
Root class specification. Only descendants of class \fIname\fP are included into
the output. This option overrides any \fBroot\fP specification in a given
configuration file. Without this option all classes are sons of the overall
root \fB*\fP.
.TP
.BI \-s
Also include structs. By default ctg ignores struct definitions. With this
option also structs are included into the hierarchy.
.TP
.BI \-S " name"
Configuration file specification. By default ctg tries to read the configuration
from \fB~./ctgrc\fP. This options causes ctg to read it from the file \fIname\fP.
.TP
.BI \-v
Verbose option. By default ctg processes the input files silently. With this
option ctg generates messages about all actions and writes them to the standard
output. If no output file specification is given, the PostScript source is
written to the file \fIout.ps\fP.
.SH FILES
If the \fB-S\fP option has been omitted, \fBctg\fP tries to read the
configuration from \fB~/.ctgrc\fP. Note that the argument to \fB-r\fP overrides
a given \fBroot\fP specification in the configuration file.
.LP
A configuration for \fBctg\fP consists of a number of specification statements
which affect the preprocessing stage and the PostScript code generation.
.LP
.ti +0.2i
Config = { Stmt }.
.ti +0.2i
Stmt   = "preprocess" string
.ti +0.2i
       | "exclude" file_identifier { file_identifier }
.ti +0.2i
       | "root" Node
.ti +0.2i
       | "collapse" class_identifier { class_identifier }.
.ti +0.2i
Node   = (class_identifier | "*")
.br
.ti +0.2i
         [ "(" Node { "," Node } ")" ].
.LP
.B preprocess \fIstring\fP
.LP
In order to enable accurate parsing all sources are preprocessed before they are
passed on \fBctg\fP's parser. The statement specifies a command template used
for the invocation of an external preprocessor. The template \fIstring\fP must
contain two \fB%s\fP fill-ins where at each invocation the first one is replaced
by the source file name and the second one by the preprocessor output file
(extension \fB.i\fP required). Example: \fIpreprocess "gcc -E %s >%s"\fP.
.LP
.B exclude \fIfile_identifier\fP { \fIfile_identifier\fP }
.LP
This statement specifies a number of header files which will be excluded from
the final preprocessor output. Typically this list consists of C and C++
standard headers. The \fIiostream.h\fP header should always be specified, since it
contains classes with multiple inheritance (see diagnostics).
.LP
.B root \fINode\fP
.LP
The root of the generated class hierarchy is specified with this statement.
Optionally \fIclass_identifier\fP may be followed by a list of (direct) son nodes
enclosed in brackets. In such a case only these sons are included into the
output, all other sons do not appear. Each son node may in turn consist of
a \fIclass_identifier\fP and a list of son nodes. The special class node "*" is
regarded as the father of all class and struct definitions.
.LP
.B collapse \fIclass_identifier\fP { \fIclass_identifier\fP }
.LP
This statement specifies a number of class nodes whose sons will not be included
in the generated class tree.
.SH EXAMPLE
$ cat my_ctgrc
.br
preprocess "gcc -E -I/home/gup/rk/misc/include %s >%s"
.br
exclude
.br
.ti +0.2i
iostream.h iomanip.h fstream.h
.br
.ti +0.2i
assert.h ctype.h errno.h float.h limits.h locale.h math.h
.br
.ti +0.2i
setjmp.h signal.h stdarg.h stddef.h stdio.h stdlib.h
.br
.ti +0.2i
string.h time.h
.br
.ti +0.2i
sys/types.h sys/param.h sys/time.h unistd.h pwd.h
.br
root * (Preprocessor,
.br
        TObject (FuzzyParser, ClassTree, Scanner)
.br
       )
.br
$ ctg -o ctg.ps -S my_ctgrc *.cc
.SH DIAGNOSTICS
Error messages generated by the semantic actions of the fuzzy parser:
.LP
.TP 4
.I duplicate class definition
two class definitions with the same identifier
.TP
.I undefined base class
definition of a derived class where the anchestor is unknown
.TP
.I multiple inheritance not supported
class definition with more than one base class
(reported for iostream.h classes)
.LP
Error messages generated by the PostScript code generator:
.LP
.TP 4
.I tree width exceeds n
tree width exceeds paper size
.TP
.I tree height exceeds n
tree height exceeds paper size
.LP
Fatal errors that should not occur under normal conditions:
.LP
file \fIfile\fP, line \fIline\fP: unhandled exception: \fIcode\fP - exiting
.TP 20
.I code = -2
out of memory
.TP
.I code = -200
scanner could not open source file
.TP
.I code = -201
hash table error
.SH BUGS
ctg does not support multiple inheritance, so only \fItrue\fP trees are
generated.
.SH AUTHOR
Rainer Koppler (rk@gup.uni-linz.ac.at), v1.0, 21/02/95
