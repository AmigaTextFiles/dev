
This is the documentation for IncVer, v.1.1.

IncVer is a version/revision number increaser (?).

IncVer is (C)opyright by Janne Jalkanen 1994.

This program is Freely Distributable, that is, you may copy
and spread it without charge. However, you may not charge anything
(except for the cost of the disk) if you spread it. If you
modify the source code, you must not spread the modified source or code.
(Send it to me, I'll include your modifications and release a new
version.)


Keep Amiga alive: Don't use pirated software!


Tech corner
-----------
This program has been written on an A4000/030 under OS 3.0, but
it should work on every Amiga with at least KS 1.2. Note however,
that you cannot have dates in your history file if you run with
anything less than V36 (2.0). You will also need at least V36 include
files to compile the source code. If you still use 1.3, upgrade.
It is worth it if you do anything else than play games.

As this is the first public release, the program can still be considered
to be a beta-test version. Your bug reports are welcome. My address
can be found at the end of this file.

The compiler used was DICE v.2.07.54R. Thanks, Matt for this great
program!


About
-----
I wrote this program for those people who need just a simple
way of bumping revisions. I know there are ports of RCS available
for the Amiga, as well as a number of other programs (BumpRev
by C=, many IncRev programs... which is exactly why this program
is called IncVer :) ) that are for revision control. However,
there's really no need for RCS if you write only simple programs
and you just wish to keep track of the current versions. IncVer
does just that.

Note: This program won't yet work correctly under any
other OS than AmigaDOS. I might port this to U**X some day, but
someone has to convince me first. (There's already some code for that
existing in the source...)

Note2: The reason why the defaults are defined a bit oddly is as follows:
I usually write something like this:
---in main.h---
...
#define VERSION "1.234"
...
---in main.c---
...
const char versionstring[]="$VER: myprogram "VERSION" (C) Janne Jalkanen 199?";
...

That way I can use the version number elsewhere, too. (Like:
printf("Program version "VERSION". Eat your heart out.\n").

Warning: Do not use this program on binary files. Undocumented
	 behaviour will result if you do that. And probably some
	 colourful crashes, too. The only safe files are ASCII
	 files.


Usage
-----
IncVer allows you to easily increase version/revision numbers with lots of
versatility. Syntax is as follows:

IncVer [<options>] [<filename>]

Valid options are:

    -h		    Display usage information

    -v<version>     Increase version number by one or set to
		    <version> (if specified).

    -r<revision>    Increase revision number by one or set to
		    <revision> (if specified).

    -s<string>	    Change search string to <string>. This is
		    the string after which a version number
		    is expected. Default is '#define VERSION'.
		    You may also set the environment variable
		    "INCVER_STRING", whose value is then used as
		    default.

    -c<commentfile> Change commentfile to <string>. Default
		    is "HISTORY" or, if existing, the contents
		    of the environment variable "INCVER_COMMENTS".

    -n		    "No comments" -option. If you include this on
		    the command line, you won't be queried for a
		    comment for this version.

    -H<formatstr>   Header string for each revision. Default is
		    "\nVersion %v.%r (%D, %d %t)". Or INCVER_FMTSTR, if
		    defined. See below for definition of options.

    <filename>	    If specified, then the search for the version
		    string will be conducted in this file.
		    Default is 'main.h', or, if exists, the contents
		    of the environment variable "INCVER_FILE".

If you do not specify '-v' or '-r', then '-r' is assumed and
revision is increased by one.

Note that there may be no whitespaces between the options and their
arguments.


Version strings
---------------

A version string is a bunch of characters followed by a
version number. This is an example of one:

#define VERSION "1.23"

IncVer will search for the given string on every line of the
given file. Then the line is scanned for the first number
which is then assumed to be the version number, which must
consist of two integers separated by a full stop (.).

This version number is then replaced with whatever the user
desires and written back to the disk. (Actually, it is a bit
more complicated than that.)

So, a valid definition for a version string could be "$VER:",
in which case the following line will be interpreted correctly:

const char *versionstring = "$VER: myprogram 40.15 (C) Myself"
			     ^^^^^	     ^^^^^
			   version string    version number

Note that there may be no numeric characters between version
string and version number, otherwise the program will go ga-ga.


Version numbers
---------------
Version numbers consist of two numbers separated by a full stop.
Example:
	    12.222
	    ^^ ^^^----- this is the _revision_ number
	    |___________this is the _version_ number

I usually increase revision number on each bugfix, etc. and version
number at each major release. Suit yourself. Note that you shouldn't
interpret the number as a decimal number. Some people use decimal
notation, where the integer part tells the major version number,
and the decimal part (tenths) tells the major revision number
and the 1/100 part tells the minor revision number. Sorry, if you
want to use that scheme, then you'll have to use -r option to
specify a new number (but note that you can't make version numbers
like 1.01).


Headers
-------

For your history file, you may use these options, if you do not like the
default format. This will work just like in C. (Since you write programs, I
assume you know at least some C...)

Here are the different options:
    %D	weekday
    %d	date in standard format
    %t	time
    %v	Version number
    %r	Revision number
    %f	Current file name

Control characters conform to C usage. For instance:
'\n' = Carriage Return, '\t' = Tabulator, etc. If you require a backslash ('\')
use '\\', or if you require a per cent sign ('%') use '\%'.

Everything else written here will be written out as is.

Example :

>Setenv INCVER_FMTSTR "\nThis is version %v, revision %r. Released on %D %d\n"

will result in a string like this in the history file:

This is version 39, revision 232. Released on Tuesday 17-Feb-94
---------------------------------------------------------------

History file header strings will always be underlined.

Comments
--------
If no comment file exists, a new one will be created and you will
be asked an initial description for the project. You can terminate
this description with an empty line.

After this, every time you run IncVer, you will be asked (unless
you state specifically 'no comments' on the command line. See above)
for a short description for this version.

The descriptions may not exceed 127 characters per line (but I suggest
you keep it to MAX 80 characters, so people can read it elsewhere
with shorter terminal displays) and 1023 characters in total.
(That means approximately 12 lines if you write full lines.) I might
remove the limits in a future release, but I don't need any bigger
comments. You can edit the comment file by hand if you wish.

You can end a comment by entering an empty line.

The comment file will look as follows: (The lines marked with *****
don't belong into the file :)

***** THIS IS YOUR INITIAL DESCRIPTION *****
IncVer controls your programs version numbers.
(Format is Version.Revision, where both start from zero up).
(C) Janne Jalkanen 1994

***** HERE GOES THE HISTORY *****

VERSION HISTORY:
================

Version: 1.0 (Thursday, 10-Feb-94 00:16:08) ***** DATE OF INCVER RUN *****
-------------------------------------------
- first release 			    ***** YOUR COMMENTS *****



Examples
--------

(No environment variables specified)
>IncVer

Increase revision number in file 'main.h' by one. Ask for a comment
and append it to the file 'HISTORY'. Version string is '#define VERSION'.

>IncVer -n -v2 main.c

Start version 2 (release number will be zeroed) on file main.c. Do not
add a comment.

>setenv INCREV_STRING "$VER:"
>IncVer

From now on, use standard Commodore version numbering system.
(Amiga users may wish to copy the ENV:INCREV_STRING file to ENVARC:,
in order to make the variable permanent.)


Author
------

I am:
			    Janne Jalkanen
			    Tavaststjernankatu 1 A 23
			    00250 Helsinki
			    FINLAND

		     e-mail:Janne.Jalkanen@hut.fi

		    (e-mail definately preferred :)
	     (Comments, bug reports and criticisms welcome)

Warranty
--------

There's no warranty to this program whatsoever. I am not and will be
not responsible for any damage you might cause to your system
or your files by using this program, even if you use it exactly
as this manual states.

So there, don't sue me. (I wouldn't have any money anyway :( )

Hey, it works for me in my setup without any problems.


