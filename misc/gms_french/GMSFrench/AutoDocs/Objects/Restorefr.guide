@DATABASE "Restore"
@AUTHOR   "Paul Manias"
@NODE     "Main" "Objet: Restore"

@{b}@{u}DOCUMENTATION SUR L'OBJET@{uu}@{ub}
Nom:        @{"RESTORE" LINK "Description"}
Version:    0.9 Beta.
Date:       Décembre 1997
Auteur:     Paul Manias
Traducteur: Julien Boibessot
Copyright:  DreamWorld Productions, 1996-1997. Tous droits réservés.

@EndNode
---------------------------------------------------------------------
------
@NODE "Description" "Objet: Restore"

@{b}@{u}OBJET@{uu}@{ub}
Nom:     Restore
Module:  @{"Blitter" LINK 
"GMSDev:AutoDocs/Blitterfr.guide/Functions"}
Version: 1
Type:    Complexe

@{b}@{u}DESCRIPTION@{uu}@{ub}
Un objet Restore est requis lorsque vous spécifiez les flags CLEAR ou
RESTORE dans un objet Bob/MBob.

Les objets Restore sont vitales dans des environements en double ou 
triple buffer car il est très difficile de garder la trace des 
parties du background qui auront besoin d'être remplacées. En 
utilisant un objet Restore et les flags CLEAR et RESTORE, vous 
éliminerez complètement ce problème. 
Un objet Restore est basé sur une liste, donc vous pouvez utiliser un 
objet Restore pour autant de Bobs que vous voulez.

L'objet Restore est constitué d'un nombre d'entrées, une pour chaque 
Bob qui a été dessiné à l'écran. Chaque entrée prend actuellement 
jusqu'à 28
octets de mémoire, multipliés par le nombre de buffers (eg 28*2 
octets pour le double Buffer). Le nombre d'entrées dont vous avez 
besoin dépend du type de jeu que vous êtes en train d'écrire, mais 
dans bien des cas 50 entrées seront plus que suffisantes. 
Si vous manquez d'entrées, la fonction Draw() allouera de la place 
supplémentaire au vol.
Si vous trouvez que cela se produit (votre jeu peut ralentir quand  
trop d'objets apparaissent à l'écran), nous vous recommandons 
d'augmenter le le nombre d'entrées que vous allouez lors de 
l'initialisation.

Vous devez toujours faire attention au fait qu'il y a une différence 
significative de vitesse entre Restaurer et Effacer.
L'effaçage (CLEAR) est rapide car le blitter utilise peu de ces 
canaux et le CPU aide bien dans ce genre de tâche.
La restauration (RESTORE) est plus lente car le blitter a à déplacer 
des données entre deux endroits différents, de plus il doit éxécuter 
cette action deux fois (une fois pour sauver le background, et une 
fois pour restaurer le background). Utilisez donc CLEAR dés que 
possible (si le background est vide) dans les autres cas vous devrez 
probablement utiliser RESTORE.

@{b}@{u}ACTIONS@{ub}@{uu}
L'objet Restore supporte les actions suivantes:

   * @{"Activate()" LINK "Restore_Activate()"} Restaure le background 
d'un Bob.
     @{"Get()     " LINK "GMSDev:AutoDocs/Kernelfr.guide/Get()" } 
Obtient un nouvel objet Restore.
     @{"Init()    " LINK "GMSDev:AutoDocs/Kernelfr.guide/Init()"} 
Initialise un objet Restore à un Bitmap.
     @{"Free()    " LINK "GMSDev:AutoDocs/Kernelfr.guide/Free()"} 
Libère un objet Restore du système.
   * @{"Reset()   " LINK "Restore_Reset()"} Met à 0 un objet Restore.

@{b}@{u}STRUCTURE@{uu}@{ub}
La structure Restore est constituée des champs publics suivant:

     @{"Buffers" LINK "RST_Buffers"} Nombre de buffers écran.
     @{"Entries" LINK "RST_Entries"} Nombre d'entrées.
     @{"Owner  " LINK "RST_Owner"  } Propriétaire de l'objet Restore 
(doit être un Bitmap).

@EndNode
---------------------------------------------------------------------
------
@NODE "RST_Buffers" "Objet: Restore"

@{b}@{u}CHAMP@{uu}@{ub}
Nom:          Buffers
Type:         WORD
Héritage:     Init() [Contenant: Screen]
Par défaut:   1
Modification: Ne peut être modifié après initialisation.
Status:       Lecture/IEcriture

@{b}@{u}DESCRIPTION@{uu}@{ub}
Ce champ spécifie le nombre de buffers du Bitmap sur lequel est basé 
l'objet Restore. Il est vital que cette valeur corresponde au nombre 
de buffers dans l'écran donné. Par exemple, si l'écran est en double 
buffer alors cette vakeur sera de 2. Si il est en triple buffer cette 
valeur sera de 3.

Si les valeurs ne correspondent pas vous obtiendrez des résultats 
imprévisibles.

@EndNode
---------------------------------------------------------------------
------
@NODE "RST_Entries" "Objet: Restore"

@{b}@{u}CHAMP@{uu}@{ub}
Nom:          Entries
Type:         WORD
Par défaut:   1
Modification: Ne peut être modifié activement après initialisation.
Status:       Lecture/IEcriture

@{b}@{u}DESCRIPTION@{uu}@{ub}
Ce champ spécifie le nombre d'entrées qui sont présentes dans la 
liste d'objets Restore des buffers des Bobs.

Lorsque vous initialisez pour la première fois votre objet Restore, 
vous avez besoin de spécifier le nombre d'entrées ici -- 1 entrée 
pour chaque Bob qui doit être à l'écran à tout moment. Si vous sous-
estimez cette valeur alors tout marchera, mais de la mémoire devra 
être allouée au vol pour créer suffisamment d'espace pour tous vos 
Bobs.

@EndNode
---------------------------------------------------------------------
------
@NODE "RST_Owner" "Objet: Restore"

@{b}@{u}CHAMP@{uu}@{ub}
Nom:          Owner
Type:         struct Bitmap *
Héritage:     Init()
Modification: Ne peut être modifié après initialisation.
Status:       Lecture seulement 

@{b}@{u}DESCRIPTION@{uu}@{ub}
Ce champ réferencie le Bitmap auquel votre objet Restore est lié. Il 
hérite initialement du contenant de l'objet que vous avez donné à 
Init().
Si vous donnez un Screen comme contenant, un Bitmap sera dérivé de 
celui-ci.

@EndNode
---------------------------------------------------------------------
------
@NODE "Restore_Activate()" "Restore: Activate()"

@{b}@{u}ACTION@{uu}@{ub}
Nom:     @{"Activate()" LINK 
"GMSDev:AutoDocs/Kernelfr.guide/Activate()"}
Objet:   Restore
Résumé:  Restaure toutes les images "bufferisées" en nettoyant ou 
replaçant les backgrounds.

@{b}@{u}DESCRIPTION@{uu}@{ub}
Cette action va restaurer tous les backgrounds qui ont été détruits 
par les Bobs utilisant les flags RESTORE et CLEAR.

Le positionnement de cette fonction est assez important - elle doit 
être AVANT toutes fonctions Draw*() pour être efficace, sinon vous 
obtiendrez des clignotements dans les graphismes voir même un crash 
du système.
 
@EndNode
---------------------------------------------------------------------
--------
@NODE "Restore_Reset()" "Restore: Reset()"

@{b}@{u}ACTION@{uu}@{ub}
Nom:     @{"Reset()" LINK "GMSDev:AutoDocs/Kernelfr.guide/Reset()"}
Objet:   Restore
Résumé:  Met à zéro un objet Restore en nettoyant l'historique de 
l'ancienne image.

@{b}@{u}DESCRIPTION@{uu}@{ub}
Met à zéro l'historique d'un objet Restore de telle sorte que toute 
image actuellement bufferisée ne s'attende plus à être restaurée. 
C'est pratique lorsque vous changez complètement l'image du 
background et que vous ne voulez plus blitter l'ancien groupe 
d'images.

@{b}@{u}VOIR AUSSI@{uu}@{ub}
Restore: @{"Flush()" LINK "Restore_Flush()"}

@EndNode
