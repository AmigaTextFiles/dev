<HTML>
<HEAD>
<TITLE>Dumping</TITLE>
<meta name="DC.Language" content="fr">
<meta http-equiv="content-language" content="fr">
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
<!-- $Id: dump.html 1.4 2004/02/22 20:34:39 wepl Exp wepl $ -->
</HEAD>
<BODY>
<h3>Dumps et fichiers de log WHDLoad</h3>
Principalement &agrave; des fins de debug, WHDLoad est capable de cr&eacute;&eacute;r plusieurs types de fichiers dumps (images m&eacute;moire/registres) et de log (trace).
<h4><a name="memory">Dump m&eacute;moire</a></h4>
Un dump m&eacute;moire est un fichier contenant toute la m&eacute;moire utilis&eacute;e par le programme install&eacute;.
La taille du fichier d&eacute;pend du programme install&eacute; (&eacute;gal &agrave; la valeur de ws_BaseMemSize dans la structure du Slave). Un dump m&eacute;moire est cr&eacute;&eacute; si la <a href="opt.html#DebugKey">touche de debug (DebugKey)</a> est press&eacute;e ou si en cas d'erreur le bouton Coredump est cliqu&eacute;.
Le nom du fichier dump cr&eacute;&eacute; est ".whdl_memory". L'emplacement par d&eacute;faut est "PROGDIR:" mais peut &ecirc;tre modifi&eacute; &agrave; l'aide de l'option <a href="opt.html#CoreDumpPath">CoreDumpPath</a>. Un fichier existant du m&ecirc;me nom sera &eacute;cras&eacute;. Si le programme install&eacute; utilise de la m&eacute;moire Fast, celle-ci est sauvegard&eacute;e sous le nom ".whdl_expmem".
<h4><a name="register">Dump des registres</a></h4>
Le dump des registres contient l'&eacute;tat complet du CPU (incluant le MMU), les CIA et les coprocesseurs (custom chips).
Certains registres custom et cia ne sont pas lisibles. Ils ne sont contenus dans le fichier de dump que si le mode <a
href="opt.html#Snoop">Snoop</a> est actif. Les informations sont &eacute;crites dans un fichier ASCII avec mise en forme utilisant des s&eacute;quences d'&eacute;chappement (utilisant CSI - Control Sequence Introducer, 155). Pour visualiser le fichier, un programme qui comprend les s&eacute;quences d'&eacute;chappement est recommand&eacute;
(ex: More, MuchMore, Multiview,
...). Le nom du fichier dump cr&eacute;&eacute; est ".whdl_register". L'emplacement par d&eacute;faut est "PROGDIR:" mais peut &ecirc;tre modifi&eacute; &agrave; l'aide de l'option <a href="opt.html#CoreDumpPath">CoreDumpPath</a>. Si un fichier portant le m&ecirc;me nom existe d&eacute;j&agrave;, le dump sera ajout&eacute; &agrave; la suite, sinon un nouveau fichier sera cr&eacute;&eacute;.
<h4><a name="FileLog">Log des acc&egrave;s aux fichiers</a></h4>
Tous les acc&egrave;s au disque sont trac&eacute;s si l'option <a
href="opt.html#FileLog">FileLog</a> a &eacute;t&eacute; activ&eacute;e. Cette fonctionnalit&eacute; est tr&egrave;s utile pour analyser les op&eacute;rations effectu&eacute;es par le programme install&eacute; sur le disque, dans un souci de debug ou d'optimisation.
Les fonctions resload suivantes cr&eacute;ent une entr&eacute;e dans le fichier de log:
<ul>
<li>resload_DeleteFile
<li>resload_DiskLoad
<li>resload_Examine
<li>resload_ExNext
<li>resload_GetFileSize
<li>resload_GetFileSizeDec
<li>resload_ListFiles
<li>resload_LoadFile
<li>resload_LoadFileDecrunch
<li>resload_LoadFileOffset
<li>resload_SaveFile
<li>resload_SaveFileOffset
</ul>
Chaque acc&egrave;s &agrave; un fichier par les fonctions ci-dessus cr&eacute;&eacute; une ligne dans le fichier de log, cette ligne identifie la fonction appel&eacute;e, les param&egrave;tres, et le r&eacute;sultat. WHDLoad rassemble les entr&eacute;es log dans un buffer interne. Le buffer est vid&eacute; en sortie de programme, ou pendant un acc&egrave;s s'il est plein. Les informations sont &eacute;crites dans un fichier ASCII. Le nom du fichier dump cr&eacute;&eacute; est ".whdl_filelog". L'emplacement par d&eacute;faut est "PROGDIR:" mais peut &ecirc;tre modifi&eacute; &agrave; l'aide de l'option <a href="opt.html#CoreDumpPath">CoreDumpPath</a>.
</BODY>
</HTML>
