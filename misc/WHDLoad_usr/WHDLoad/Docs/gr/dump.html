<HTML>
<HEAD>
<TITLE>Dumping</TITLE>
<meta name="DC.Language" content="gr">
<meta http-equiv="content-language" content="gr">
<meta http-equiv="content-type" content="text/html; charset=iso-8859-7">
<!-- $Id: dump.html 1.1 2006/06/07 06:35:47 wepl Exp wepl $ -->
</HEAD>
<BODY>
<h3>Αρχεία dump και καταγραφής του WHDLoad</h3>
Κυρίως για λόγους debugging το WHDLoad μπορεί να δημιουργήσει διάφορα αρχεία dump και καταγραφής.
<h4><a name="memory">Dump μνήμης</a></h4>
Ένα dump μνήμης είναι όλη η μνήμη που χρησιμοποιείται από το εγκατεστημένο πρόγραμμα γραμμένη σε ένα
αρχείο. Το μέγεθος του dump εξαρτάται από το εγκατεστημένο πρόγραμμα (είναι ίσο με τη τιμή
της ws_BaseMemSize στη δομή του Slave). Ένα dump μνήμης θα δημιουργηθεί
εάν το <a href="opt.html#DebugKey">DebugKey</a> πατηθεί ή μετά από ένα
σφάλμα πατηθεί το κουμπί CoreDump. Το όνομα του αρχείου του dump μνήμης
που θα δημιουργηθεί είναι ".whdl_memory". Η προεπιλεγμένη τοποθεσία είναι "PROGDIR:" αλλά μπορεί να
αλλάξει με την επιλογή <a href="opt.html#CoreDumpPath">CoreDumpPath</a>. Αν
υπάρχει αρχείο με την ίδια ονομασία θα επανεγγραφεί πάντα. Εάν το εγκατεστημένο
πρόγραμμα χρησιμοποιεί επιπλέον Fast-Memory, θα αποθηκευθεί κάτω από το όνομα αρχείου
".whdl_expmem".
<h4><a name="register">Dump καταχωρητών</a></h4>
Το dump καταχωρητών περιέχει την πλήρη κατάσταση του CPU (μαζί με το MMU), των
Cia και των Custom chips. Μερικοί καταχωρητές των Cia και Custom δεν μπορούν να διαβαστούν,
αυτοί περιέχονται στο αρχείο dump μόνο αν είναι ενεργό το <a
href="opt.html#Snoop">Snoop</a> mode. Οι πληροφορίες
θα γραφούν σε ένα αρχείο ASCII με μερικές σημειώσεις με χρήση Escape sequences
(χρησιμοποιώντας CSI - Control Sequence Introducer, δεκαδικό 155). Για την εμφάνιση, συνίσταται ένα πρόγραμμα
που να υποστηρίζει Escape sequences (π.χ. More, MuchMore, MultiView,
...). Το όνομα του αρχείου dump είναι ".whdl_register", η προεπιλεγμένη τοποθεσία είναι
"PROGDIR:" αλλά μπορεί να αλλαχθεί με την επιλογή <a
href="opt.html#CoreDumppath">CoreDumpPath</a>. Εάν υπάρχει ήδη αρχείο
με το ίδιο όνομα, το dump θα προστεθεί - διαφορετικά θα δημιουργηθεί νέο
αρχείο.
<h4><a name="FileLog">Αρχείο καταγραφής πρόσβασης</a></h4>
Όλες οι προσβάσεις δίσκου θα καταγραφούν αν έχει ενεργοποιηθεί η επιλογή <a
href="opt.html#FileLog">FileLog</a>. Αυτή η λειτουργία
θα είναι πολύ χρήσιμη για την ανάλυση των λειτουργειών δίσκου του εγκατεστημένου προγράμματος
για λόγους debugging και βελτιστοποίησης. Η ακόλουθες συναρτήσεις resload θα δημιουργήσουν
μία καταχώρηση στο αρχείο καταγραφής:
<ul>
<li>resload_DeleteFile
<li>resload_DiskLoad
<li>resload_Examine
<li>resload_ExNext
<li>resload_GetFileSize
<li>resload_GetFileSizeDec
<li>resload_ListFiles
<li>resload_LoadFile
<li>resload_LoadFileDecrunch
<li>resload_LoadFileOffset
<li>resload_SaveFile
<li>resload_SaveFileOffset
</ul>
Κάθε πρόσβαση αρχείου μέσω των παραπάνω συναρτήσεων δημιουργεί μία γραμμή στο αρχείο καταγραφής,
η γραμμή αναφέρει την καλεσμένη συνάρτηση, τις παραμέτρους και το αποτέλεσμα. Το WHDLoad
θα συλλέξει τις καταχωρήσεις της καταγραφής σε ένα εσωτερικό buffer. Ο buffer θα
καθαριστεί στην έξοδο ή κατά μία πρόσβαση αν έχει γεμίσει. Οι πληροφορίες
θα γραφούν σε ένα αρχείο ASCII, το όνομα του αρχείου dump είναι
".whdl_filelog", η προεπιλεγμένη τοποθεσία "PROGDIR:" αλλά μπορεί να αλλάξει με την επιλογή
<a href="opt.html#CoreDumppath">CoreDumpPath</a>.
</BODY>
</HTML>
