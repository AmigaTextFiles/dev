    include_p odk:classes/system/include/sprintf.p

class misc
{
    public Fillbuffer(long mem_p,long char,long memsize)
     {
        tst.l d3
        beq .l2
        cmpi.l #1,d3
        beq .l2
        move.l d1,a0
        subq.l #1,d3
.l1:    move.b d2,(a0)+
        dbra  d3,.l1
.l2:        
     }

    public strlen(long mem_p)
     {
        move.l d1,a0
        move.l #-1,d0
.l1:    addq.l #1,d0
        cmpi.b #0,(a0)+
        bne .l1
     }

    public chomp(long mem_p)
     {
        move.l d1,a0
        move.l d1,a1
.l1:    cmpi.b #$00,(a0)+
        bne .l1
        cmpi.b #$0a,-2(a0)
        bne .rts1
        move.b #$00,-2(a0)
.rts1:  cmpi.b #$0a,-1(a0)
        bne .rts
        move.b #$00,-1(a0)
.rts:   lea -1(a0),a0
        cmpi.b #$00,(a0)
        bne .rts
        sub.l a1,a0
        move.l a0,d0
        return d0
     }

    public trim(long mem_p)
     {
        move.l d1,a0
        move.l d1,a1
.l1:    cmpi.b #$00,(a0)+
        bne .l1
        lea -1(a0),a0
.l2:    lea -1(a0),a0
        cmpi.b #$0a,(a0)
        beq .l3
        cmpi.b #$20,(a0)
        beq .l3
        cmpi.b #$09,(a0)
        beq .l3
        bra.s .l4
.l3:    move.b #$00,(a0)
        bra .l2
.l4:    sub.l a1,a0
        move.l a0,d0
        addq.l #1,d0
        return d0
     }
    
    public Sprintf(long dest,long commands,long arg1,long arg2,long arg3,long arg4,long arg5,long arg6,long arg7,long arg8,long arg9,long arg10)
    {
      {* newProc=SPrint_f[][a3,a0,a1]*}
        
      Sprint_F(dest,commands,>myArgs:*arg1,*arg2,*arg3,*arg4,*arg5,*arg6,*arg7,*arg8,*arg9,*arg10,0)
    }
    
}

