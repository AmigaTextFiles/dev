TABLE OF CONTENTS

hardblocks.library/LoadHardBlocks
hardblocks.library/SaveHardBlocks
hardblocks.library/RestoreHardBlocks
hardblocks.library/BackupHardBlocks
hardblocks.library/PrintHardBlocks
hardblocks.library/FreeHardBlocks
hardblocks.library/RemoveHardBlocks
hardblocks.library/InitRigidDiskBlock
hardblocks.library/LastHardBlockNum
hardblocks.library/LoadHardBlocks           hardblocks.library/LoadHardBlocks

   NAME
	LoadHardBlocks - read hardblocks from SCSI device

   SYNOPSIS
	error = LoadHardBlocks(rdb, device, unit)
	  D0                   A0     A1     D0

	USHORT LoadHardBlocks(struct RigidDiskBlock *, BYTE *, ULONG);

   FUNCTION
	This routine reads the hardblocks from specified unit of SCSI
	device. The hardblocks are stored in given RigidDiskBlock
	structure.
	All block numbers, eg. rdb_PartitionList, xxx_Next,
	fhb_SegListBlocks ..., are represented by POINTERS to blocks in
	memory. Use FreeHardBlocks() to release memory allocated for this
	hardblocks.

	Note as NULL block address isn't used $ffffffff, but ZERO.

   INPUTS
	rdb -- a pointer to a free RigidDiskBlock structure
	device -- the name of the SCSI device
	unit -- the unit number of SCSI device

   RESULTS
	error -- 0 if the call succeeded else an error code as defined in
		 <libraries/hardblocks.h>

   SEE ALSO
	SaveHardBlocks(), FreeHardBlocks()

   BUGS
	None

hardblocks.library/SaveHardBlocks           hardblocks.library/SaveHardBlocks

   NAME
	SaveHardBlocks - write hardblocks to SCSI device

   SYNOPSIS
	error = SaveHardBlocks(rdb, device, unit)
	  D0                   A0     A1     D0

	USHORT SaveHardBlocks(struct RigidDiskBlock *, BYTE *, ULONG);

   FUNCTION
	This routine writes the hardblocks defined in given RigidDiskBlock
	to specified unit of SCSI device.
	The hardblocks can be built by an call to LoadHardBlocks() and
	RestoreHardBlocks() or constructed manually.

   INPUTS
	rdb -- a pointer to a properly initialized RigidDiskBlock structure
	device -- the name of the SCSI device
	unit -- the unit number of SCSI device

   RESULTS
	error -- 0 if the call succeeded else an error code as defined in
		 <libraries/hardblocks.h>

   SEE ALSO
	LoadHardBlocks(), RestoreHardBlocks(), FreeHardBlocks()

   BUGS
	None

hardblocks.library/RestoreHardBlocks     hardblocks.library/RestoreHardBlocks

   NAME
	RestoreHardBlocks - read hardblocks from file

   SYNOPSIS
	error = RestoreHardBlocks(rdb, file)
	  D0                      A0    A1

	USHORT RestoreHardBlocks(struct RigidDiskBlock *, BYTE *);

   FUNCTION
	This routine reads the hardblocks from specified file. The file must
	be created with BackupHardBlocks(). The hardblocks are stored in
	given RigidDiskBlock structure.
	All block numbers, eg. rdb_PartitionList, xxx_Next,
	fhb_SegListBlocks ..., are represented by POINTERS to blocks in
	memory. Use FreeHardBlocks() to release memory allocated for this
	hardblocks.

	Note as NULL block address isn't used $ffffffff, but ZERO.

   INPUTS
	rdb -- a pointer to a free RigidDiskBlock structure
	file -- the name of the file containing a hardblocks backup

   RESULTS
	error -- 0 if the call succeeded else an error code as defined in
		 <libraries/hardblocks.h>

   SEE ALSO
	BackupHardBlocks(), FreeHardBlocks()

   BUGS
	None

hardblocks.library/BackupHardBlocks       hardblocks.library/BackupHardBlocks

   NAME
	BackupHardBlocks - write hardblocks to file

   SYNOPSIS
	error = BackupHardBlocks(rdb, file)
	  D0                     A0    A1

	USHORT BackupHardBlocks(struct RigidDiskBlock *, BYTE *);

   FUNCTION
	This routine writes the hardblocks defined in given RigidDiskBlock to
	specified file.
	The hardblocks can be built by an call to LoadHardBlocks() and
	RestoreHardBlocks() or constructed manually.

   INPUTS
	rdb -- a pointer to a properly initialized RigidDiskBlock structure
	file -- the name of the file containing a hardblocks backup

   RESULTS
	error -- 0 if the call succeeded else an error code as defined in
		 <libraries/hardblocks.h>

   SEE ALSO
	BackupHardBlocks(), FreeHardBlocks()

   BUGS
	None

hardblocks.library/PrintHardBlocks         hardblocks.library/PrintHardBlocks

   NAME
	PrintHardBlocks - show contents of hardblocks in human readable format

   SYNOPSIS
	error = PrintHardBlocks(rdb, fh)
	  D0                    A0   A1

	USHORT PrintHardBlocks(struct RigidDiskBlock *, BPTR);

   FUNCTION
	This routine shows the contents of the hardblocks stored in given
	RigidDiskBlock in human readable format. The routine sends its
	output to specified file handle. This file handle is the result of
	Output() or Open().
	The hardblocks can be built by an call to LoadHardBlocks() and
	RestoreHardBlocks() or constructed manually.

   INPUTS
	rdb -- a pointer to a properly initialized RigidDiskBlock structure
	fh -- the output file handle

   RESULTS
	error -- 0 if the call succeeded else an error code as defined in
		 <libraries/hardblocks.h>

   SEE ALSO
	LoadHardBlocks(), RestoreBlocks(), FreeHardBlocks()

   BUGS
	None

hardblocks.library/FreeHardBlocks           hardblocks.library/FreeHardBlocks

   NAME
	FreeHardBlocks - release hardblocks from memory

   SYNOPSIS
	error = FreeHardBlocks(rdb)
	  D0                   A0

	USHORT FreeHardBlocks(struct RigidDiskBlock *);

   FUNCTION
	This routine releases specified hardblocks from memory.
	The hardblocks can be built by an call to LoadHardBlocks() and
	RestoreHardBlocks() or constructed manually.

	All block numbers, eg. rdb_PartitionList, xxx_Next,
	fhb_SegListBlocks ..., are represented by POINTERS to blocks in
	memory.

	Note as NULL block address isn't used $ffffffff, but ZERO.

   INPUTS
	rdb -- a pointer to a properly initialized RigidDiskBlock structure

   RESULTS
	error -- 0 if the call succeeded else an error code as defined in
		 <libraries/hardblocks.h>

   SEE ALSO
	LoadHardBlocks(), RestoreBlocks()

   BUGS
	None

hardblocks.library/RemoveHardBlocks       hardblocks.library/RemoveHardBlocks

   NAME
	RemoveHardBlocks - delete hardblocks from SCSI device

   SYNOPSIS
	error = RemoveHardBlocks(device, unit)
	  D0                       A0     D0

	USHORT RemoveHardBlocks(BYTE *, ULONG);

   FUNCTION
	This routine tries to delete any existent hardblocks from specified
	unit of SCSI device.

	Note that only the RigidDiskBlock found within the first 16 blocks
	of the device will be cleared. All other hardblocks are left intact.

   INPUTS
	device -- the name of the SCSI device
	unit -- the unit number of SCSI device

   RESULTS
	error -- 0 if the call succeeded else an error code as defined in
		 <libraries/hardblocks.h>

   SEE ALSO
	SaveHardBlocks()

   BUGS
	None

hardblocks.library/InitRigidDiskBlock   hardblocks.library/InitRigidDiskBlock

   NAME
	InitRigidDiskBlock - initialize RigidDiskBlock with standard values

   SYNOPSIS
	error = InitRigidDiskBlock(rdb, device, unit)
	  D0                       A0     a1     D0

	USHORT InitRigidDiskBlock(struct RigidDiskBlock *, BYTE *, ULONG);

   FUNCTION
	This routine completely initializes given RigidDiskBlock with data
	feom specified unit of SCSI device. It clears all block list heads,
	fills physical drive characteristics with data from MODE SENSE +
	READ CAPACITY and gets drive identification via INQUIRY. The host id
	and block size are determined too.

   INPUTS
	rdb -- a pointer to a free RigidDiskBlock structure
	device -- the name of the SCSI device
	unit -- the unit number of SCSI device

   RESULTS
	error -- 0 if the call succeeded else an error code as defined in
		 <libraries/hardblocks.h>

   SEE ALSO

   BUGS
	None

hardblocks.library/LastHardBlockNum       hardblocks.library/LastHardBlockNum

   NAME
	LastHardBlockNum - calc block address of last hardblock

   SYNOPSIS
	error = LastHardBlockNum(rdb)
	  D0                     A0

	USHORT LastHardBlockNum(struct RigidDiskBlock *);

   FUNCTION
	This routine calculates the block address of the last block of
	specified hardblocks. The result is stored in rdb_HighRDSKBlock.

	Note that the function starts counting with rdb_RDBBlocksLo, so this
	must be initialized first.

   INPUTS
	rdb -- a pointer to a properly initialized RigidDiskBlock structure

   RESULTS
	error -- 0 if the call succeeded else an error code as defined in
		 <libraries/hardblocks.h>

   SEE ALSO

   BUGS
	None

