# -*- text -*-

#
# this makefile is specific to the Amiga system
# please check the settings for program locations
#


# remember programs
MV = c:rename
RM = c:delete quiet
CP = c:copy quiet
MV = c:rename quiet
YACC = gnu:bison1.21/bison
%CC = bin:gcc -m68030
CC = bin:gcc
AR = bin:ar
RANLIB = bin:ranlib


# remember files
SOURCES = add.c admin.c checkin.c checkout.c classify.c commit.c create_adm.c diff.c entries.c find_names.c \
          hash.c history.c ignore.c import.c lock.c log.c logmsg.c main.c myndbm.c rcs.c modules.c no_diff.c \
	  parseinfo.c patch.c recurse.c release.c remove.c repos.c rtag.c status.c tag.c update.c vers_ts.c \
	  version.c subr.c          

MSOURCES = hash.c mkmodules.c myndbm.c

OBJECTS = add.o admin.o checkin.o checkout.o classify.o commit.o create_adm.o diff.o entries.o find_names.o \
          hash.o history.o ignore.o import.o lock.o log.o logmsg.o main.o myndbm.o rcs.o modules.o no_diff.o \
	  parseinfo.o patch.o recurse.o release.o remove.o repos.o rtag.o status.o subr.o tag.o update.o \
          version.o vers_ts.o

MOBJECTS = hash.o mkmodules.o myndbm.o subr.o version.o

PROGS = cvs mkmodules

LIBS = ../lib/libcvs.a

# remember destination path
BIN = /bin


.PHONY:
all:            $(PROGS)

cvs:            $(OBJECTS)
		$(CC) -o $@ $(OBJECTS) $(LIBS)
		-$(RM) $(BIN)/cvs
		$(MV) cvs $(BIN)

mkmodules:      $(MOBJECTS)
		$(CC) -o $@ $(MOBJECTS) $(LIBS)
		-$(RM) $(BIN)/mkmodules
		$(MV) mkmodules $(BIN)


.PHONY:
clean:
		-$(RM) $(OBJECTS)
		-$(RM) $(MOBJECTS)

.PHONY:
cleanall:
		-$(RM) $(OBJECTS)
		-$(RM) $(MOBJECTS)
		-$(RM) $(BIN)/cvs $(BIN)/mkmodules
