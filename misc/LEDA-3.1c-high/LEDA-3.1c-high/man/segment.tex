\bigskip
\bigskip
{\magonebf 6.1.2 Segments (segment)}

{\bf 1. Definition}

An instance $s$ of the data type $segment$ is a directed straight line 
segment in the two-dimensional plane, i.e., a straight line segment $[p,q]$ 
connecting two points $p,q \in \real^2$. $p$ is called the start point
and $q$ is called the end point of $s$. The length of $s$ is the euclidean 
distance between $p$ and $q$. The angle between a right oriented horizontal 
ray and $s$ is called the direction of $s$. The segment $[(0,0),(0,0)]$ 
is said to be empty.

\def\name{$segment$}
\def\type{$segment$}

{\bf 2. Creation}

a) \create s (point\ p,\ point\ q)

b) \create s (double\ x_1,\ double\ y_1,\ double\ x_2,\ double\ y_2)

c) \create s (point\ p,\ double\ \alpha,\ double\ d)

d) \create s {}


introduces a variable \var\ of type \name. \var\ is initialized to the segment 
from $p$ to $q$ (variant a), to the segment from $(x_1,y_1)$ to $(x_2,y_2)$
(variant v), to the segment with start point $p$, direction $\alpha$, and 
length $d$ (variant c), or to the empty segment (variant d).


\bigskip
{\bf 3. Operations}

\medskip
\+\cleartabs & \hskip 2.5truecm & \hskip 5truecm &\cr
\+\op point   start {}
                           {returns the start point of segment \var.}
\smallskip
\+\op point   end {}
                           {returns the end point of segment \var.}
\smallskip
\+\op double    xcoord1 {}
                           {returns the x-coordinate of \var.start().}
\smallskip
\+\op double    ycoord1 {}
                           {returns the y-coordinate of \var.start().}
\smallskip
\+\op double    xcoord2 {}
                           {returns the x-coordinate of \var.end().}
\smallskip
\+\op double    ycoord2 {}
                           {returns the y-coordinate of \var.end().}
\smallskip
\+\op double    length {}
                           {returns the length of \var.}
\smallskip
\+\op double   direction {} 
                        {returns the direction of \var\ as an angle in}
\+\nop                  {the intervall $(-\pi,\pi]$.}
\smallskip
\+\op double   angle {segment\ t} 
                        {returns the angle between \var\ and $t$, i.e.,}
\+\nop                  {$t$.direction() - \var.direction().}
\smallskip
\+\op double   angle {} 
                        {returns \var.direction().}
\smallskip
\+\op bool   horizontal {} 
                        {returns true iff \var\ is horizontal.}
\smallskip
\+\op bool   vertical {} 
                        {returns true iff \var\ is vertical.}
\smallskip
\+\op double   slope {}
                        {returns the slope of $s$.}
\+\nop                  { \precond  \var\  is not vertical.}
\smallskip
\+\op bool    intersection {segment\ t,\ point\&\ p} {}
\+\nop                     {if $s$ and $t$ are not collinear and intersect the}
\+\nop                     {intersection point is assigned to $p$ and true is}
\+\nop                     {returned, otherwise false is returned.}
\smallskip
\+\op segment rotate {point\ q,\ double\ \alpha}
                        {returns the segment created by a rotation of $s$}
\+\nop                  {about point $q$ by angle $\alpha$.}
\smallskip
\+\op segment rotate {double\ \alpha}
                        {returns $s$.rotate($s$.start(),$\alpha$).}
\smallskip
\+\op segment translate {vector\ v} {}
\+\nop                     {returns $s+v$, i.e., the segment created by}
\+\nop                     {translating $s$ by vector $v$. \precond $v$}
\+\nop                     {has dimension 2.}
\smallskip
\+\op segment translate {double\ alpha,\ double\ d} {}
\+\nop                  {returns the segment created by a translation of }
\+\nop                  {$s$ in direction $\alpha$ by distance $d$.}
\smallskip

\bigskip
{\bf 3. Operators }
\medskip
\+&$bool$       &$segment$ ==    $segment$  &test for equality\cr
\smallskip
\+&$bool$       &$segment$\ !=   $segment$  &test for inequality\cr
\smallskip
\+&$segment$    &$segment$ +\ \  $vector$  &translation by vector\cr
\medskip
Input and output operators:
\medskip
\+&$ostream\&$ &$ostream << segment$ &writes a segment to an output stream.\cr
\smallskip
\+&$istream\&$ &$istream >> segment$ &reads the coordinates of a segment (four doubles)\cr
\+&            &                     &from an input stream.\cr

