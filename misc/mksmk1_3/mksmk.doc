
Introduction

  "mksmk" rev 1.30 is a make file generator for use with the SAS
smake utility.  It is capable of working with any revision of
the SAS 'C' compiler and make utility, from revision 5.1 up to
and including revision 6.2.  "mksmk" is capable of working with
both 'C' and assembly language source files, as described below.
This generator also provides automatic maintenance of function
prototypes and external declarations if desired.

Revision History

   1.00

      initial version.

   1.10

      fix circular dependency handling.

      add "-d" switch to assembler invocation when make for debugging
      is requested.

      provide status display

      improve prototype dependency handling.

      eliminate multiple passes through source files.

   1.20

      first PD release.

   1.30

      set program return code.

      accept program parameters from text file.

      disable ctrl break interruption.

      option to  scan leading lines only for includes.
      
      optional use of tab characters

Distribution


   This version of mksmk may be distributed freely as long as the
   following conditions are met:

   The distributor may charge a fee up to the costs of obtaining a
   public domain diskette from Fred Fish.  The distributor agrees to cease
   distributing the programs and data involved if requested to do so by
   the author.  The distributor may only distribute an unmodified copy of
   the original program, with all the supplied documentation and copyright
   notices left intact.

Support

   If you  have  any  suggestions,  bug  reports  or  questions,
   please  contact  the  author at  the  address given at the end
   of this file.

License

   This license applies to the product called "mksmk", a set of
   programs for the Commodore-Amiga computer, published by
   Joseph F. Hart, and the accompanying documentation, example
   files and anything else that comes with the original distribution.
   The terms "Programs" and "mksmk" refer to this product. The
   licensee is addressed as "you".

   You may copy and distribute verbatim copies of the executable code
   and documentation as you receive it, in any medium, provided that
   you conspicuously and appropriately publish only the original,
   unmodified programs, with all copyright notices and disclaimers of
   warranty intact and including all the accompanying documentation,
   example files and anything else that came with the original.

   You may not copy and/or distribute these programs without
   the accompanying documentation and other additional files
   that came with the original.  You may not copy and/or
   distribute modified versions of these programs.

   You may not copy, modify, sublicense, distribute or
   transfer the programs except as expressly provided under
   this license.  Any attempt otherwise to copy, modify,
   sublicense, distribute or transfer the programs is void, and
   will automatically terminate your rights to use the programs
   under this license.  However, parties who have received
   copies, or rights to use copies, from you under this license
   will not have their licenses terminated so long as such
   parties remain in full compliance.

   By copying, distributing and/or using the programs you
   indicate your acceptance of this license to do so, and all
   its terms and conditions.

   Each time you redistribute the programs, the recipient
   automatically receives a license from the original licensor
   to copy, distribute and/or use the programs subject to these
   terms and conditions.  You may not impose any further
   restrictions on the recipients' exercise of the rights
   granted herein.

   You may not disassemble, decompile, re-source or otherwise
   reverse engineer the programs.

   If you wish to incorporate parts of the programs into other
   programs, write to the author to ask for permission.

   You agree to cease distributing the programs and data
   involved if requested to do so by author.

   You may charge a fee to recover distribution costs.  The
   fee for diskette distribution may not be more than the cost
   to obtain a public domain diskette from Fred Fish.

Disclaimer

        THERE IS   NO  WARRANTY  FOR  THE  PROGRAMS,  TO  THE  EXTENT
   PERMITTED  BY  APPLICABLE  LAW.  EXCEPT WHEN OTHERWISE STATED IN
   WRITING  THE  COPYRIGHT HOLDERS AND/OR OTHER PARTIES PROVIDE THE
   PROGRAMS  "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED
   OR   IMPLIED,   INCLUDING,  BUT  NOT  LIMITED  TO,  THE  IMPLIED
   WARRANTIES  OF  MERCHANTABILITY  AND  FITNESS  FOR  A PARTICULAR
   PURPOSE.   THE  ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF
   THE  PROGRAMS IS WITH YOU.  SHOULD THE PROGRAMS PROVE DEFECTIVE,
   YOU  ASSUME  THE  COST  OF  ALL  NECESSARY  SERVICING, REPAIR OR
   CORRECTION.

        IN NO  EVENT  UNLESS  REQUIRED BY APPLICABLE LAW OR AGREED TO
   IN  WRITING  WILL  ANY  COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO
   MAY  REDISTRIBUTE  THE PROGRAMS AS PERMITTED ABOVE, BE LIABLE TO
   YOU  FOR  DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR
   CONSEQUENTIAL  DAMAGES  ARISING  OUT  OF THE USE OR INABILITY TO
   USE  THE  PROGRAMS (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR
   DATA  BEING  RENDERED  INACCURATE  OR LOSSES SUSTAINED BY YOU OR
   THIRD  PARTIES  OR A FAILURE OF THE PROGRAMS TO OPERATE WITH ANY
   OTHER  PROGRAMS),  EVEN  IF  SUCH HOLDER OR OTHER PARTY HAS BEEN
   ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.



mksmk V1.30
Usage: mksmk <target> [-<option>...] <source file> [<source file>...]

   where <target> is the file you are ultimately trying to generate.

   use ? by itself to print a help message

   <option> is one of the following:
      -o<output file>
      -p<AmigaDos file pattern>
      -s5       = use SAS 5.x format - default SAS 6.x format
      -np       = no prototype generation
      -d        = compile and link for debugging
      -noscmsg  = do not use errorrexx option in compile line
      -i<dir>   = 'C' include directory
      -h<dir>   = assembly language header directory
      -nolnk    = no link dependency lines
      -a<file>  = program argument list
      -m        = all lines will be scanned.
      -m<n>     = maximum number of lines
                  to be scanned (default = 100)
      -t        = use tab characters

   <source file> is one of the source files used to
      generate the target.  At least one of these must be specified,
      which may also be done with a file template.

   Arguments to mksmk may be specified in any order.
      except that the target must appear before any source
      files specifically named.  It may appear after a pattern.

   Arguments may also be given in a text file.  The name of this
      file may then be specified to mksmk via the "-a" switch.
      Nested argument files are ignored.


Prototype Generation Handling

   This program generates prototypes in two different source files, which
may included by the source file to which they correspond.  They may be
included directly by the source file, or indirectly by a header file
directly or indirectly referenced by the source file.  One of the
prototype files consists of internal function prototypes.  The other
prototype file consists of external function prototypes and external
data definitions.  A pair of these files may be generated for each
source file requiring them.  If the source file is named 'module'.c,
the external prototype file for it is named 'module'_extprotos.h.
The internal prototype file is named 'module'_intprotos.h.  These
may be located in a directory different from that of the source file,
provided only that the compiler can reach them where and when they
are referenced.  Commands will be automatically provided in the make
file to generate the prototype files where required by the source files.

     A prototype file is considered to be dependent on the source
file that includes it, whether directly or indirectly. A change
in the source file may involve a change in the argument lists or
types of the functions defined within it.  This would necessitate
a change in the prototype files associated with that source file,
thus causing the dependency of the prototype files upon that
source file.  Since a prototype file is dependent upon a source file
that includes it, the possibility of cyclic dependency must be dealt
with.  No file is permitted to be dependent upon any other file
upon which the first is directly or indirectly dependent, which
should prevent such a dependency problem.


Include file processing.

   The make file generator searches every file it is given,
and every file referenced by that file, whether directly or
indirectly.  The generator does not search the standard directory
by default as does the compiler, but only when it is expressly
directed to do so by the path within the include statement.
This prevents standard includes from being searched unless this
is expressly desired.  The generator uses a rather thorough method
of determining whether or not a given statement is in fact an
include statement, owing to the variable spacing that may be used
to create one.  Furthermore, the generator uses a method of reading
source lines which allows it to read lines of any length whatsoever.
There is absolutely no line length limit, nor is there any limit
to the size of file it can handle.
___________________________________________________________________

                  |         Internet: VISHART@ubvms.cc.buffalo.edu
Joe Hart          |     ///    Plink: OSS542
Niagara Falls, NY | \\\///  Ham call: WA2SND
                  |  \XX/   AMIGA - Computers for REAL MEN
===================================================================
