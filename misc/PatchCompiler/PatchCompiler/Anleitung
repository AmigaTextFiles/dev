

  ญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญ
  ญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญ
  ญญ                                                                   ญญ
  ญญ                       PatchStarCompiler V1.00                     ญญ
  ญญ                                                                   ญญ
  ญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญ
  ญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญ
  ญญ                                                                   ญญ
  ญญ      Copyright 1990      Roger Fischlin                           ญญ
  ญญ                          Steigerwaldweg 6                         ญญ
  ญญ                          6450 Hanau 7                             ญญ
  ญญ                          Deutschland                              ญญ
  ญญ                                                                   ญญ
  ญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญ
  ญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญ
  ญญ                                                                   ญญ
  ญญ  Dieses Programm ist  FREEWARE, d.h. das Urheberrecht liegt beim  ญญ
  ญญ  Autor !                                                          ญญ
  ญญ                                                                   ญญ
  ญญ  Die Weitergabe ist nur erlaubt wenn :                            ญญ
  ญญ  1. der Name des Autors und der Copyright-Vermerk nicht entfernt  ญญ
  ญญ     wurden,                                                       ญญ
  ญญ  2. die  Weitergabe  unentgeldlich  ist  bzw. nur  die  DIREKTEN  ญญ
  ญญ     Kosten erhoben werden.                                        ญญ
  ญญ                                                                   ญญ
  ญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญ
  ญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญ





  Patchen, d.h. das gezielte manipulieren einiger  Bytes eines Files, ist
  in Mode gekommen. berlicherweise ben๖tigen Sie zum Patchen einen File-
  Editor (z.B. "NewZap","FileMaster"). Deshalb  entstand die  Idee,  eine
  einfache ,  PASCAL-ไhnliche  Programmiersprache  speziell   fr  Patch-
  Programme zu entwickeln. Diese Programme k๖nnen dann mit dem PatchStar-
  Compiler in ein im CLI ausfhrbares Programm bersetzt werden.





                            PatchStar-Spache
                           ญญญญญญญญญญญญญญญญญญ

  Die Spache umfa฿t nur wenige Befehle:

  TEXT, PATCH, CHECK, IF TRUE, IF FALSE, BEGIN, END, EXIT

  Allgemein  achtet  der  Compiler  weder auf  Gro฿- und Kleinschreibung,
  ferner k๖nnen  beliebig viele  Leerzeichen  und Tabs zur besseren ber-
  sichtlichkeit eingefgt  werden.  Jede  Zeile  kann  mit einem vorange-
  stellten "*"-  oder  ";"-Zeichen als  Kommentarzeile  genutzt   werden,
  au฿erdem kann mit einen ";"-Zeichen am Zeilenende nach dem Befehle eine
  Bemerkung im Quellcode hinzugefgt werden.



  TEXT     : TEXT entspricht  der  PASCAL-Anweisung  "WriteLn".Der in An-
             fhrungszeichen eingeschlossen Text wird im CLI-Fenster aus-
             gegeben, anschlie฿end  springt der  Cursor   in die  nไchste
             Zeile.
             Beispiele :   TEXT "Programm gepatcht."
                           TEXT 'Falsche Programmversion !'


  PATCH    : PATCH ist der zentrale Befehl zum Patchen. Nach dem Befehls-
             wort folgt die  Adresse (in  dezimaler,  hexadezimaler  [$],
             binไrer [%] oder oktaler [@] Schreibweise). Nach  mindestens
             einem Leerzeichen folgenden dann  die   zu  patchenden Byte-
             Werte in hexadezimaler Form. Zur besseren  bersichtlichkeit
             kann nach der Patch-Adresse ebenfalls ein Doppelpunkt einge-
             fgt werden. Falls Sie jedoch einen  String patchen m๖chten,
             so  wird  dieser  statt   der einzelnen Bytes in Anfhrungs-
             zeichen gestzt. Das Mischen von Byte- und String-Angaben ist
             nicht m๖glich !
             Da PATCH der zentrale Befehl ist, kann das Befehlswort  auch
             entfallen  und  man beginnt  direkt  mit  der Patch-Adresse.

             Beispiele :   PATCH $0000  :  "256"
                           PATCH 50        ff ff ff ea
                           PATCH %110      '200'
                                 123456    $4a $99 $5a
                                 @00       $349afb


  CHECK    : CHECK  dient  zum  berprfen  von  Bytes  der zu patchenden
             Datei. Dies mag sinnvoll sein, wenn der  Patch z.B.  mehrere
             Programmversionen bearbeiten kann. Aber auch eine Abfrage,ob
             es sich um die richtige Version handelt, kann vor falsch ge-
             patchten  Files bewahren. Der  Befehl hat die gleiche Syntax
             wie PATCH, das Befehlswort darf aber nicht entfallen, da der
             Compiler die  Anweisung  sonst als einen PATCH-Befehl inter-
             pretiert. Das  Ergebnis  der  Abfrage  kann anschlie฿end mit
             Hilfe der IF-Anweisung (siehe unten) ausgewertet werden.

             Beispiele :   CHECK $0000  :  "256"
                           CHECK 50        ff ff ff ea
                           CHECK %110      '200'


  BEGIN    : Mit BEGIN  und  END werden, wie in Pascal, mehrere Programm-
  END        zeilen zusammengefa฿t. Dies ist nach einer IF-Abfrage (siehe
             unten) n๖tig, damit der Compiler  wei฿, welche  Befehle  der
             Computer ausfhren soll, und welche wer gegebenenfalls ber-
             springen soll.



  IF FALSE : Mit beiden IF-Befehlen wird das Ergebnis der CHECK-Anweisung
  IF TRUE    verarbeitet. Die  nach "IF FALSE"  folgenden Befehle  werden
             ausgefhrt, wenn die CHECK-berprfung negativ (falsch) war,
             die sich an "IF TRUE" anschlie฿enden Anweisungen werden aus-
             gefhrt, falls die berprfung positiv (wahr) war. Die  nach
             der IF-Anweisung auszufhrenden Befehle mssen, auch wenn es
             sich nur um einen Befehl handelt, innerhalb einer BEGIN-END-
             Anweisung stehen. 
             Der IF-Befehl bezieht sich immer auf die zuletzt ausgefhrte
             CHECK-Anweisung ! Innerhalb der  BEGIN-END-Anweisung  k๖nnen
             weitere IF-Abfragen vorkommen.


             Beispiel  :   CHECK $132  :  "256"
                           IF TRUE
                              BEGIN
                                   TEXT "PAL-Version !"
                              END
                           IF FALSE
                              BEGIN
                                   PATCH $132 : "256"
                                   TEXT "NTSC- auf PAL-Version gepatcht!"
                              END




  EXIT     : Trifft der Computer auf  eine EXIT-Anweisung, beendet er die
             Ausfhrung des Patches vorzeitig.


             Beispiel  :   CHECK $4656  :  "1.3"
                           IF FALSE
                              BEGIN
                                   TEXT "Leider falsche Programmversion!"
                                   EXIT
                              END




                             Beispielprogramm           
  ญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญ

  ; ED Patch      taken from FileMaster


  check $1aad : "199"                 ; check if it's the right version !


  if true                                    ; yes, now patch window size
     begin
          Patch $1aad : "255"
          Text  "ED 1.4 will now open PAL window."
     end



  if false                         ; no, it's a different version of ED !
     begin
          Text "Sorry, wrong version of ED !"
     end


  ญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญญ






                            Patch erzeugen
                           ญญญญญญญญญญญญญญญญ

  Erstellen Sie den Quellcode in der oben beschriebenen Sprache  in einem
  ASCII-Editor (z.B. ED) und speichern Sie die Datei ab.Erzeugen Sie eine
  zweite Datei,  deren Inhalt  beim  Aufruf  des Programmes mit einem "?"
  ausgeben wird. Rufen Sie dann im CLI den PatchStarCompiler auf:

  1> PatchStarCompiler <Info-Datei> <Quellcode> <Name des Patches>


  Der Compiler generiert in mehren Schritten  aus  den Dateien das  reine
  Patch-Programm  und  speichert  es unter dem  Namen,  der  als  dritter
  Parameter bergeben wurde.



                                        27. Oktober 1990   Roger Fischlin  
