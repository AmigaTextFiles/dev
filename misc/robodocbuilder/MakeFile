####################################################################
#
#          MAKEFILE FOR RoboDocBuilderPPC program(s)
#
####################################################################
#
MAKE     = SDK:c/make
#
CC       = GCC:bin/gcc
#
CFLAGS   = -c -ISDK:Local/Include
#
LIBS     = -lm -lstringfuncs -lamiga -lauto
#
DBGFLAGS = -c -ggdb -gdwarf-2 -ISDK:Local/Include -DDEBUG=1
#
GLOB     = GlobalObjects/CommonFuncsPPC.o
#
TARGET   = RoboDocBuilder.lha
#
clean :
	Delete *.o $(TARGET) Archive.list QUIET FORCE
#
all   :
	$(MAKE) RoboDocBuilderPPC
	$(MAKE) RoboDocBuilderPPCDBG
	$(MAKE) makeArchive
	$(MAKE) makeList
#
#
#
# -------------------- Final target(s): ----------------------------------
#
RoboDocBuilderPPC : RoboDocBuilder.o
	$(CC) --strip-debug $< CPGM:$(GLOB) -o $@ $(LIBS)
#
RoboDocBuilderPPC.o : RoboDocBuilder.c RoboDocBuilderLocale.h
	$(CC) $(DBGFLAGS) $< -o $@
#
#
# -------------------- Debug target(s): ----------------------------------
#
RoboDocBuilderPPCDBG: RoboDocBuilderPPC.o
	$(CC) -ggdb -gdwarf-2 $< CPGM:$(GLOB) -o $@ $(LIBS) -lnet -lz
#
# -------------------- Misc Targets: -------------------------------------
#
RoboDocBuilderLocale.h : RoboDocBuilder.cd
	CatComp $< CFILE  $@ NOCODE NOARRAY NOBLOCK
#	CatComp $<›CTFILE RoboDocBuilder.ct
#
# -------------------- Archive Target: -----------------------------------
#
ACMD = LhArc
#
OPTS = -x -a 
#
makeList:
	$(ACMD) list $(TARGET) >Archive.list  
#
makeArchive : 
	FileNote RoboDocBuilderPPC "V3.0: The main program!"
	FileNote RoboDocBuilder.install "Requires V42.9 or better!"
	COPY System:Appbin/RoboDoc CPGM:RoboDocBuilder/RoboDoc
	FileNote RoboDoc "V3.0j"
	FileNote RoboDocTemplates/RoboDoc.defaults "For V3.0j of RoboDoc!"
	$(ACMD) $(OPTS) add $(TARGET) RoboDocBuilderPPC.readme
	$(ACMD) $(OPTS) add $(TARGET) RoboDocBuilderPPC
	$(ACMD) $(OPTS) add $(TARGET) RoboDocBuilderPPC.info
	$(ACMD) $(OPTS) add $(TARGET) RoboDocBuilder.guide
	$(ACMD) $(OPTS) add $(TARGET) RoboDocBuilder.guide.info
	$(ACMD) $(OPTS) add $(TARGET) RoboDocBuilder.install
	$(ACMD) $(OPTS) add $(TARGET) RoboDocBuilder.install.info
	$(ACMD) $(OPTS) add $(TARGET) RoboDocTemplates/Main.Template
	$(ACMD) $(OPTS) add $(TARGET) RoboDocTemplates/Head.Template
	$(ACMD) $(OPTS) add $(TARGET) RoboDocTemplates/Full.Template
	$(ACMD) $(OPTS) add $(TARGET) RoboDocTemplates/Internal.Template
	$(ACMD) $(OPTS) add $(TARGET) RoboDocTemplates/ASSEMBLER.sample
	$(ACMD) $(OPTS) add $(TARGET) RoboDocTemplates/BASIC.sample
	$(ACMD) $(OPTS) add $(TARGET) RoboDocTemplates/C.sample
	$(ACMD) $(OPTS) add $(TARGET) RoboDocTemplates/FORTRAN.sample
	$(ACMD) $(OPTS) add $(TARGET) RoboDocTemplates/ExampleProg1.c
	$(ACMD) $(OPTS) add $(TARGET) RoboDocTemplates/ExampleProg2.c
	$(ACMD) $(OPTS) add $(TARGET) RoboDocTemplates/RoboDoc.defaults
	$(ACMD) $(OPTS) add $(TARGET) RoboDoc
	$(ACMD) $(OPTS) add $(TARGET) RoboDocBuilderLocale.h
	$(ACMD) $(OPTS) add $(TARGET) RoboDocBuilder.c
	$(ACMD) $(OPTS) add $(TARGET) RoboDocBuilder.cd
	$(ACMD) $(OPTS) add $(TARGET) RoboDocBuilder.ct
	FileNote RoboDocBuilder.html  "Generated by the program from source code comments!"
	$(ACMD) $(OPTS) add $(TARGET) RoboDocBuilder.html
	$(ACMD) $(OPTS) add $(TARGET) SMakeFile
	$(ACMD) $(OPTS) add $(TARGET) MakeFile
	$(ACMD) $(OPTS) add $(TARGET) cprinit
	COPY CPGM:GlobalObjects/CommonFuncs#?.#?                  TO CPGM:RoboDocBuilder/
	$(ACMD) $(OPTS) add $(TARGET) CommonFuncsPPC.o
	$(ACMD) $(OPTS) add $(TARGET) CommonFuncs.h
	$(ACMD) $(OPTS) add $(TARGET) CommonFuncs.guide
	$(ACMD) $(OPTS) add $(TARGET) CommonFuncs.guide.info
	COPY SDK:Local/Include/AmigaDosErrs.h                        CPGM:RoboDocBuilder/AmigaDOSErrs.h
	COPY SDK:Local/Include/Author.h                              CPGM:RoboDocBuilder/Author.h
	$(ACMD) $(OPTS) add $(TARGET) AmigaDOSErrs.h
	$(ACMD) $(OPTS) add $(TARGET) Author.h
	COPY CPGM:MyTools/ToolTypesEditor/ToolTypesEditorPPC         CPGM:RoboDocBuilder/ToolTypesEditorPPC
	COPY CPGM:MyTools/ToolTypesEditor/ToolTypesEditor.guide      CPGM:RoboDocBuilder/ToolTypesEditor.guide
	COPY CPGM:MyTools/ToolTypesEditor/ToolTypesEditor.guide.info CPGM:RoboDocBuilder/ToolTypesEditor.guide.info
	FileNote ToolTypesEditorPPC   "(c) 2004 by J.T. Steichen"
	$(ACMD) $(OPTS) add $(TARGET) ToolTypesEditorPPC
	$(ACMD) $(OPTS) add $(TARGET) ToolTypesEditor.guide
	$(ACMD) $(OPTS) add $(TARGET) ToolTypesEditor.guide.info
	DELETE CPGM:RoboDocBuilder/ToolTypesEditorPPC
	DELETE CPGM:RoboDocBuilder/ToolTypesEditor.guide
	DELETE CPGM:RoboDocBuilder/ToolTypesEditor.guide.info
	DELETE CPGM:RoboDocBuilder/AmigaDOSErrs.h
	DELETE CPGM:RoboDocBuilder/Author.h
	DELETE CPGM:RoboDocBuilder/CommonFuncs#?.#?
	DELETE CPGM:RoboDocBuilder/RoboDoc
#
