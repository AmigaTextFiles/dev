'**************************************
'                                     *
'     IntuiExtend.Lib 1.4/@1995-96    *
'                                     *
'          by CIERP Philippe.         *
'                                     *
'          from AMIGAzette 83         *
'                                     *
'**************************************
'
Amos To Back 
'Equate définition 
WBDISK=1
WBDRAVER=2
WBTOOL=3
WBPROJECT=4
WBGARBAGE=5
WBDEVICE=6
WBKICK=7
WBAPPICON=8
'
'Création du Port-Message
MY_PORT=Wb Create Msgport
If MY_PORT>0
   'Réserver l'icône à utiliser   
   'D_OBJ=Wb Get Diskicon(DISK$)
   D_OBJ=Wb Get Deficon(WBPROJECT)
   If D_OBJ>0
      'Créer et afficher la AppIcon
      APPICON=App Create Icon(D_OBJ,MY_PORT,"Phil-AppIcon"+Chr$(0))
      If APPICON>0
         MSG=Wb Get Msg(MY_PORT)
         If MSG=$80000
            'NumArg=0/DoubleClick else Number of Args. 
            NUMARG=App Get Numarg
            If NUMARG=0
               Print "AppIcon activée..."
            Else 
               Print "Liste des Paramètres...";Chr$(10)
               For T=1 To NUMARG
                  ARGLIST$=App Get Arglist(T)
                  Print "Argument n°";T;" >> ";ARGLIST$
               Next T
            End If 
         End If 
         'Renvoyer le message à Intuition 
         Wb Reply Msg 
         'Libérer la AppIcon
         App Free Icon APPICON
      End If 
      'Libérer l'icône réservée  
      Wb Free Diskobject D_OBJ
   End If 
   'Libérer le Port-Message 
   Wb Erase Msgport(MY_PORT)
End If 
'
Amos To Front 
Print Chr$(10);"Pressez une touche..."
Wait Key 
