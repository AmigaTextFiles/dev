CC=i386-aros-gcc
STRIP=i386-aros-strip --strip-unneeded --remove-section .comment
CFLAGS=-O2 -w -std=c99 #-g -fsanitize=address

all: dumpamos listamos unlockamos

dumpamos: dumpamos.c fileio.c
	$(CC) $(CFLAGS) -o $@ $<
	$(STRIP) $@

listamos: listamos.c fileio.c amoslib.h amoslib.c \
 extensions/00_base.h extensions/01_music.h extensions/02_compact.h \
 extensions/03_request.h extensions/06_ioports.h
	$(CC) $(CFLAGS) -o $@ $< -lm
	$(STRIP) $@

unlockamos: unlockamos.c fileio.c
	$(CC) $(CFLAGS) -o $@ $<
	$(STRIP) $@

clean:
	rm -f dumpamos listamos unlockamos
