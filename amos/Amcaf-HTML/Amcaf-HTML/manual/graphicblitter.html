<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <!--
      AMCAF Extension V1.40 Manual for Amos Professional, written by Chris Hodges (1994/95) and compiled by asymetrix for the Amiga community and should stay completely FREE FOREVER.
      Created 2009. :)
  -->
  <title>AMCAF Extension V1.40 Manual</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="keywords" content="AMCAF Extension V1.40 Manual, Amos Professional, Amiga, Programming, Basic, Chris Hodges, Extension, computing, code, AmigaDOS, Aminet.net">
  <meta name="author" content="asymetrix">

</head>

<body bgcolor="white">
<a href="../index.html">AMCAF Extension V1.40 Manual</a>&nbsp; <a href="../command.html">Index</a>

<hr align="center" size="1" width="100%">

<h1>Blitter Commands</h1>

<p>
AMCAF makes it possible to control the <a href="additional.html#blitter">Blitter</a> by hand and to
clear, fill, copy or modify <a href="additional.html#bitplane">Bitplanes</a> directly.</p>

<br>

<h2>Commands</h2>

<a name="blittercopy"></a>
<p><b>BLITTER COPY</b><br>
<i>instruction: copy and modify a bitplane</i><br>
<b>Blitter Copy</b> sourcescreen,sourceplane <b>To</b> targetscreen,targetplane<br>
<b>Blitter Copy</b> sourcescreen,sourceplane <b>To</b> targetscreen,targetplane,miniterm<br>
<b>Blitter Copy</b> s1,p1,s2,p2 <b>To</b> targetscreen,targetplane<br>
<b>Blitter Copy</b> s1,p1,s2,p2 <b>To</b> targetscreen,targetplane,miniterm<br>
<b>Blitter Copy</b> s1,p1,s2,p2,s3,p3 <b>To</b> targetscreen,targetplane<br>
<b>Blitter Copy</b> s1,p1,s2,p2,s3,p3 <b>To</b> targetscreen,targetplane,miniterm
</p>

<p>
With the help of Blitter Copy you can copy a <a href="additional.html#bitplane">Bitplane</a> of a screen to
another or the same bitplane on another or the same screen.<br>
The Amiga <a href="additional.html#blitter">Blitter chip</a> is used to fulfill this action.<br>
If two or three source screens and bitplanes parameters are given, the graphics can be
combined by so called miniterms and the result is then written into the target screen.</p>

<p><b>Important</b></p>

<p>
1. Before you can call Blitter Copy, you <b>must</b> set the limits of the
   operation using Blitter Copy Limit.</p>

<p>2. Take care that <b>all</b> specified screens have these dimensions and <b>all</b>
   screens are big enough.</p>

<p>The optional parameter miniterm contains a bitmask which defines the way the source planes should be combined.</p>

<p>If these values are omitted, these default values are used:</p>

<pre>
One source   : the bitplane is copies normally             (=%11110000).
Two sources  : the bitplanes are combined using logical OR (=%11111100).
Three sources: the bitplanes are combined using logical OR (=%11111110).
</pre>

<p><b>Frequently used miniterm values:</b></p>

<pre>
Sourceplanes one, two and three represent A, B and C.

1: %11110000: copy bitplane                 : A
1: %00001111: invert bitplane               : NOT A
2: %11111100: use logical OR on the planes  : A OR B
2: %00000011: OR planes and invert them     : NOT (A OR B)
2: %11000000: the two planes are ANDed      : A AND B
2: %00111111: planes are ANDed and inverted : NOT (A AND B)
2: %00111100: the planes will be XORed      : A XOR B
2: %11000011: planes are XORed and inverted : NOT (A XOR B)
3: %11111110: OR all planes (create mask)   : A OR B OR C
3: %00000001: OR all planes and invert them : NOT (A OR B OR C)
3: %10000000: Do a logical AND on all planes: A AND B AND C
3: %01111111: AND all planes and invert them: NOT (A AND B AND C)
</pre>

<p>
If you want to create other combinations, simply try out the values you
like (nothing can happen except of bad looking screens).<br>
If you have some knowledge on boolean algebra, read <a href="additional.html#blitterminterms">Blitter miniterms</a>.
</p>

<br>

<a name="blittercopylimit"></a>
<p><b>BLITTER COPY LIMIT</b><br>
<i>instruction: set the blitter copy area</i><br>
<b>Blitter Copy Limit</b> screen<br>
<b>Blitter Copy Limit</b> x1,y1 <b>To</b> x2,y2</p>

<p>
Using this command you define the rectangular area which will be used for the Blitter Copy command.<br>
If you only specify the 'screen' parameter, the full screen dimensions of the screen numbered 'screen' will be taken.</p>

<p>
Otherwise x1,y1 represents the upper left corner and x2,y2 the lower right
corner of the region which will be affected by the copying and combining
process.<br>
This area will be used for <b>all</b> screens, therefore you must ensure that every screen is at least as big as the lower right corner
 of the specified limits.
</p>

<br>

<a name="blitterfill"></a>
<p><b>BLITTER FILL</b><br>
<i>instruction: fill polygons using the blitter</i><br>
<b>Blitter Fill</b> screen,bitplane<br>
<b>Blitter Fill</b> screen,bitplane,x1,y1,x2,y2<br>
<b>Blitter Fill</b> sourcescreen,sourceplane <b>To</b> targetscreen,targetplane<br>
<b>Blitter Fill</b> sourcescreen,sourceplane,x1,y1,x2,y2 <b>To</b> targetscreen,targetplane
</p>

<p>
With Blitter Fill you can fill polygons. However, there are some
limitations: the filling algorithm of the <a href="additional.html#blitter">Blitter chip</a> is very simple.<br>
It only fills the gap between two dots of a horizontal line.
Therefore the limiting lines may only be one pixel thick.<br>
These lines can be either created using Turbo Draw or Bcircle.
</p>

<p>
The 'screen' and 'bitplane' parameter specify the screen which contains
the area to be filled.<br>
Additionally you can give a rectangular region which is defined by the coordinate pairs x1,y1 and x2,y2.</p>

<p>
You can also give a second screen 'targetscreen' and a second
bitplane number 'targetplane' into which the filled figures are written.<br>
In this mode, the source screen is not altered in any way.</p>

<p>
If more than one filled figure is to be drawn and these don't overlap, you
can draw all limiting lines first and then fill all figures in one cycle.</p>

<p>
The Blitter processes the screen from the lower right to the upper left.<br>
Due to this feature you should draw on <b>Double Buffered</b> or <b>hidden screens</b>
to avoid flickering.</p>

<br>

<a name="blitterclear"></a>
<p><b>BLITTER CLEAR</b><br>
<i>instruction: clear a bitplane using the blitter</i><br>
<b>Blitter Clear</b> screen,bitplane<br>
<b>Blitter Clear</b> screen,bitplane,x1,y1 <b>To</b> x2,y2
</p>

<p>
The <a href="additional.html#blitter">Blitter chip</a> can be used to clear <a href="additional.html#bitplane">Bitplanes</a> as well.<br>
In comparison to the AMOS command Cls, Blitter Clear allows you to wipe single bitplane instead of all.</p>

<p>
Optionally you may include the coordinates of a rectangular region where
the command should have an effect on.</p>

<br>

<a name="blitterwait"></a>
<p><b>BLITTER WAIT</b><br>
<i>instruction: wait for blitter to finish a task</i><br>
<b>Blitter Wait</b></p>

<p>
This command waits until the <a href="additional.html#blitter">Blitter</a> has finished his work.<br>
You are advised to use this command <b>before</b> calling e.g Print or any other command
that does not require the blitter, that will draw onto a screen, which is currently altered by the blitter.<br>
You should use Blitter Wait in <b>front</b> of Wait Vbl, too.</p>

<br>

<a name="turbodraw"></a>
<p><b>TURBO DRAW</b><br>
<i>instruction: draw from one coordinate to another</i><br>
<b>Turbo Draw</b> x1,y1 <b>To</b> x2,y2,colour<br>
<b>Turbo Draw</b> x1,y1 <b>To</b> x2,y2,colour,bitplane</p>

<p>
This instruction replaces the AMOS Draw command. The x1,y1 coordinates
represent the starting point of the line and x2,y2 the ending point.<br>
The coordinates needn't to be on the screen, the line is clipped automatically.</p>

<p>
The colour of the line must be given, whereas the 'bitplane' parameter is optional.<br>
It determines into which <a href="additional.html#bitplane">Bitplanes</a>
the line should be drawn. So Bit 0 represents bitplane 0, bit 1 represents bitplane 1 etc.<br>
If the corresponding bit is set, a line will be drawn in the bitplane, otherwise not.
If 'bitplanes' is omitted, every bitplane is drawn into.<br>
Turbo Draw supports a line pattern, which can be changed using the AMOS Set Line command.</p>

<p>
With Turbo Draw, you can draw even more and special lines, so-called
Blitter Lines.<br>
These lines are only drawn with one dot in each horizontal line and are used to create polygons which can then
 be filled with the blitter chip.<br>
To switch to this mode, the 'bitplane' parameter must be
given as negative number, everything else can remain as it is.<br>
Please note that an extra line is drawn automatically if the blitter line leaves the
right boundary of the screen.</p>

<br>

<a name="bcircle"></a>
<p><b>BCIRCLE</b><br>
<i>instruction: draw a circle for the blitter to fill</i><br>
<b>Bcircle</b> x,y,radius,bitplane</p>

<p>
Draws an empty circle around x,y with a radius into the bitplane.<br>
This line is really only one pixel thick to ensure the circle can
be filled by the <a href="additional.html#blitter">Blitter chip</a>.</p>

<br>

<a name="blitterbusy"></a>
<p><b>BLITTER BUSY</b><br>
<i>function: return the current blitter state</i><br>
flag=<b>Blitter Busy</b></p>

<p>
This function returns -1 (True), if the <a href="additional.html#blitter">Blitter chip</a> is currently busy
and working on a job, e.g is currently clearing a bitplane or drawing a
line etc.<br>
This can be used to wait for the end of the blitter activity,
although Blitter Wait is preferred in this case.<br>
You could use Blitter Busy to decide, if you want to do some more calculations using the processor or
better start the next blitter activity.</p>

</body>
</html>
