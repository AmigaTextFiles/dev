<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <!--
      AMCAF Extension V1.40 Manual for Amos Professional, written by Chris Hodges (1994/95) and compiled by asymetrix for the Amiga community and should stay completely FREE FOREVER.
      Created 2009. :)
  -->
  <title>AMCAF Extension V1.40 Manual</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="keywords" content="AMCAF Extension V1.40 Manual, Amos Professional, Amiga, Programming, Basic, Chris Hodges, Extension, computing, code, AmigaDOS, Aminet.net">
  <meta name="author" content="asymetrix">

</head>

<body bgcolor="white">
<a href="../index.html">AMCAF Extension V1.40 Manual</a>&nbsp; <a href="../command.html">Index</a>

<hr align="center" size="1" width="100%">

<h1>Disk Support Functions</h1>

<br>

<p>These are various functions to help you with disk access and filenames.</p>

<br>

<a name="ioerror"></a>
<p><b>IO ERROR</b><br>
<i>function: return the last dos error code</i><br>
errnumber=<b>Io Error</b></p>

<p>The Io Error function gives back the number of the last DOS-error.</p>

<br>

<a name="ioerrorstring"></a>
<p><b>IO ERROR$</b><br>
<i>function: return a dos errorstring</i><br>
error$=<b>Io Error$</b>(errnumber)</p>

<p>
This function returns the string of the corresponding DOS error message.<br>
If no string for the error number exists, an empty string will be returned.<br>
When using Kickstart 2.0 not the interior list is taken but the localized strings of
the system.</p>

<br>

<a name="filename"></a>
<p><b>FILENAME$</b><br>
<i>function: return the filename of a full path</i><br>
file$=<b>Filename$</b>(pathfile$)</p>

<p>This function cuts the filename out of an mixed path and file string.</p>

<pre>Example: Filename$("DH2:AMOS/AMOSPro") results in "AMOSPro".</pre>

<br>

<a name="path"></a>
<p><b>PATH$</b><br>
<i>function: return the directory of a full path</i><br>
pathway$=<b>Path$</b>(pathfile$)</p>

<p>
Path$ returns the pathname part of a mixed path-filename string. Could be used as a kind of Parent$-Function too.</p>

<pre>Example: Path$("DH2:AMOS/AMOSPro") returns "DH2:AMOS".</pre>

<br>

<a name="extpath"></a>
<p><b>EXTPATH$</b><br>
<i>function: append a forward slash to a path if required</i><br>
newpath$=<b>Extpath$</b>(directory$)</p>

<p>
Adds a slash to a pathname, if it is a directory. Handy if you want to
add a filename to a path.</p>

<pre>
Examples: Extpath$("DH2:AMOS")+"AMOSPro" returns "DH2:AMOS/AMOSPro",
          Extpath$("DH2:")+"AMOS"        returns "DH2:AMOS".
</pre>

<br>

<a name="objectprotectionstring"></a>
<p><b>OBJECT PROTECTION$</b><br>
<i>function: return an objects protection flags as a string</i><br>
prot$=<b>Object Protection$</b>(prot)</p>

<p>
Object Protection$ returns the <a href="additional.html#protectionflags">Protection flags</a> of an <a href="additional.html#diskobject">Object</a>.<br>
The Object Protection$ function converts this numeric value into a string in the format "hsparwed".</p>

<br>

<a name="patternmatch"></a>
<p><b>PATTERN MATCH</b><br>
<i>function: compare a string with a certain pattern</i><br>
flag=<b>Pattern Match</b>(sourcestring$,pattern$)</p>

<p>
Pattern Match checks, if the string 'sourcestring$' matches the pattern 'pattern$'.<br>
If this is the case, then True (-1) will be returned otherwise False (0).<br>
The pattern may contain any regular DOS jokers, an asterisk (*) will be converted into '#?' automatically.</p>

<p>This command only works on OS2.0 and higher.</p>

<br>

<a name="diskstate"></a>
<p><b>DISK STATE</b><br>
<i>function: return the state of a disk device</i><br>
flags=<b>Disk State</b>(directory$)</p>

<p>
Disk State acquires the current state of a disk drive. 'flags' is a bitmap which holds two bits:</p>

<pre>
<b>Bit</b>
0=0: The disk is not write protected, you can write onto the disk.
0=1: The volume is write protected or is currently being validated.
1=0: Currently the disk is not in use, nobody is reading or writing.
1=1: The disk is currently in use.
</pre>

<p>
If no disk is in the drive, it normally should return -1, but I'm afraid
in this case a requester will be opened with the title "No disk in
drive xxx:" which creates the error 'File not found'.</p>

<pre>
<b>Please use the following workaround:</b>

Request Off
Trap FLAGS=Disk State(DIRECTORY$)
Request On
If Errtrap Then FLAGS=-1
</pre>

<br>

<a name="disktype"></a>
<p><b>DISK TYPE</b><br>
<i>function: return the type of a volume</i><br>
type=<b>Disk Type</b>(directory$)</p>

<p>The Disk Type function returns the type of a directory. This value can be:</p>

<pre>
0: It is a real device              (e.g. 'DF0:')
1: The path is a directory (assign) (e.g. 'LIBS:')
2: It is the name of a volume       (e.g. 'Workbench2.0:')

Using this function you can filter specific disk types out of a device list.
</pre>

<br>

<a name="doshash"></a>
<p><b>DOS HASH</b><br>
<i>function: calculate the hash value of a file</i><br>
hash$=<b>Dos Hash</b>$(file$)</p>

<p>This function return the hash value of a file. Only for advanced users who want to read directly from dos disks.</p>

</body>
</html>
