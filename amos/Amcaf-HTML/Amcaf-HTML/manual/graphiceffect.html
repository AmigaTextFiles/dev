<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <!--
      AMCAF Extension V1.40 Manual for Amos Professional, written by Chris Hodges (1994/95) and compiled by asymetrix for the Amiga community and should stay completely FREE FOREVER.
      Created 2009. :)
  -->
  <title>AMCAF Extension V1.40 Manual</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="keywords" content="AMCAF Extension V1.40 Manual, Amos Professional, Amiga, Programming, Basic, Chris Hodges, Extension, computing, code, AmigaDOS, Aminet.net">
  <meta name="author" content="asymetrix">

</head>

<body bgcolor="white">
<a href="../index.html">AMCAF Extension V1.40 Manual</a>&nbsp; <a href="../command.html">Index</a>

<hr align="center" size="1" width="100%">

<h1>Effects Commands</h1>

<br>

A big part of AMCAF contains graphical effects.<br>
If you only want to have a few stars or simply want to make a logo explode or create some neat
effects using shade bobs, AMCAF makes (nearly) everything possible!

<br>

<a name="pixshift"></a>
<h2>Pix Shift Commands</h2>

<p>
Using these commands you can increase or decrease the colour indexes in a
rectangular area.<br>
These instructions work pixel wise and therefore makes it possible to limit the colours, and so the Pix Shift commands are slower
than <a href="#shadebob">Shade Bobs</a>.</p>

<br>

<a name="maskcopy"></a>
<p><b>MASK COPY</b><br>
<i>instruction: copy an area of a screen to another screen</i><br>
<b>Mask Copy </b>screen1,x1,y1,x2,y2 <b>To</b> screen2,x3,y3,maskaddress</p>

<p>
Copies a part of a screen to an other, just like Screen Copy.<br>
However, a mask bitplane can be given. 'maskaddress' represents the startaddress of
the <a href="additional.html#bitplane">Bitplane</a>.</p>

<br>

<a name="pixshiftup"></a>
<p><b>PIX SHIFT UP</b><br>
<i>instruction: increase the colour index of an area of a screen</i><br>
<b>Pix Shift Up</b> screen,c1,c2,x1,y1 <b>To</b> x2,y2<br>
<b>Pix Shift Up</b> screen,c1,c2,x1,y1 <b>To</b> x2,y2,bank</p>

<p>
Using this command, you can increase the colour indexes in the rectangular
area from x1,y1 to x2y2.<br>
The 'screen' parameter therefore contains the number of the screen on which this regions is situated.
'c1' and 'c2' hold the border colours, which should be taken into account for the colour
cycling, other colours are not affected.</p>

<p>
If you supply the optional parameter 'bank', you can use a previously
calculated mask which can be created with the Make Pix Mask command.<br>
However, if the colour indexes override 'c2', they are set back to 'c1' again.</p>

<br>

<a name="pixshiftdown"></a>
<p><b>PIX SHIFT DOWN</b><br>
<i>instruction: decrease the colour index of an area of a screen</i><br>
<b>Pix Shift Down</b> screen,c1,c2,x1,y1 <b>To</b> x2,y2<br>
<b>Pix Shift Down</b> screen,c1,c2,x1,y1 <b>To</b> x2,y2,bank</p>

<p>
Using this command, you can decrease the colour indexes in the rectangular
area from x1,y1 to x2y2.<br>
The 'screen' parameter therefore contains the number of the screen on which this regions is situated.
'c1' and 'c2' hold the border colours, which should be taken into account for the colour
cycling, other colours are not affected.</p>

<p>
If you supply the optional parameter 'bank', you can use a previously
calculated mask which can be created with the Make Pix Mask command.<br>
However, if the colour indexes go below 'c1', they are set back to 'c2' again.</p>

<br>

<a name="pixbrighten"></a>
<p><b>PIX BRIGHTEN</b><br>
<i>instruction: increase the colour index of an area of a screen</i><br>
<b>Pix Brighten</b> screen,c1,c2,x1,y1 <b>To</b> x2,y2<br>
<b>Pix Brighten</b> screen,c1,c2,x1,y1 <b>To</b> x2,y2,bank</p>

<p>
Using this command, you can increase the colour indexes in the rectangular
area from x1,y1 to x2y2.<br>
The 'screen' parameter therefore contains the number of the screen on which this regions is situated.
'c1' and 'c2' hold the border colours, which should be taken into account for the colour
cycling, other colours are not affected.</p>

<p>
If you supply the optional parameter 'bank', you can use a previously
calculated mask which can be created with the Make Pix Mask command.<br>
In difference to Pix Shift Up, the colour indexes don't override 'c2'.</p>

<br>

<a name="pixdarken"></a>
<p><b>PIX DARKEN</b><br>
<i>instruction: decrease the colour index of an area of a screen</i><br>
<b>Pix Darken</b> screen,c1,c2,x1,y1 <b>To</b> x2,y2<br>
<b>Pix Darken</b> screen,c1,c2,x1,y1 <b>To</b> x2,y2,bank</p>

<p>
Using this command, you can decrease the colour indexes in the rectangular
area from x1,y1 to x2y2.<br>
The 'screen' parameter therefore contains the number of the screen on which this regions is situated.
'c1' and 'c2' hold the border colours, which should be taken into account for the colour
cycling, other colours are not affected.</p>

<p>
If you supply the optional parameter 'bank', you can use a previously
calculated mask which can be created with the Make Pix Mask command.<br>
In difference to Pix Shift Down, the colour indexes don't go below 'c1'.</p>

<br>

<a name="makepixmask"></a>
<p><b>MAKE PIX MASK</b><br>
<i>instruction: grab an area of a screen</i><br>
<b>Make Pix Mask</b> screen,x1,y1 <b>To</b> x2,y2,bank</p>

<p>
Grabs a specific part of the screen and saves it into the bank with the
number bank. This command can be used to create a mask for the Pix Shift
instruction.<br>
If you use such a mask, the size must be exactly the same like the limits you specify with the Pix Shift commands.</p>

<br>

<a name="shadepix"></a>
<p><b>SHADE PIX</b><br>
<i>instruction: increase the colour value at the given point of a screen</i><br>
<b>Shade Pix</b> x,y<br>
<b>Shade Pix</b> x,y,number</p>

<p>
This instructions increases the colour value at the given point x,y on the current screen.
If the highest colour is reached, the colour is reset to zero.<br>
The optional parameter 'number' holds the number of <a href="additional.html#bitplane">Bitplanes</a>
to be cycled and may range from 1 to 6.</p>

<br>

<a name="shadebob"></a>
<h2>Shade Bobs Commands</h2>

<p>
Shade Bobs aren't really bobs, but "in the scene" this is the common name
for such effects. Shade Bobs increase or decrease colour values of the
pixel they are placed on. This is rather similar to colour cycling,
however using Shade Bobs the pixels on the screen are affected and not the
palette entries!<br>
When using Shade Bobs you cannot limit the colours to a
certain range but only the amount of bitplanes that will be used to be
<a href="additional.html#cyclic">cycled</a> through. Additionally, Shade Bobs may leave the screen boundaries.
</p>

<br>

<a name="shadebobmask"></a>
<p><b>SHADE BOB MASK</b><br>
<i>instruction: set image to use on shade bob </i><br>
<b>Shade Bob Mask</b> flag</p>

<p>Using Shade Bob Mask you may specify, if the mask of a object or the first
bitplane is to be taken for drawing.<br>
If flag is set to zero, bitplane 0 is used for the Shade Bob Up and Shade Bob Down instructions, other values
for flag instruct the commands to use the mask of the object.</p>

<br>

<a name="shadebobplanes"></a>
<p><b>SHADE BOB PLANES</b><br>
<i>instruction: set number of bitplanes to use on shade bob</i><br>
<b>Shade Bob Planes</b> number</p>

<p>
Set the number of <a href="additional.html#bitplane">Bitplanes</a> to be cycled through. This can be used to
protect the graphics in higher bitplanes from the influences of Shade
Bobs.<br>
'number' sets the number of bitplanes, that should be drawn in and must be a value between 1 and 6.</p>

<br>

<a name="shadebobup"></a>
<p><b>SHADE BOB UP</b><br>
<i>instruction: increase the colour index and draw a shade bob</i><br>
<b>Shade Bob Up</b> screen number,x,y,image</p>

<p>
This instruction draws a Shade Bob on the screen at the coordinates x,y. This bob only increases the colour indexes only. 'image'
holds the image number of the sprite bank which should be used to draw the bob.<br>
Either the mask or the first bitplane of the object is used for this
process, according to the setting of Shade Bob Mask.<br>

Remember, that this command supports the hot spot of the bob image.</p>

<br>

<a name="shadebobdown"></a>
<p><b>SHADE BOB DOWN</b><br>
<i>instruction: decrease the colour index and draw a shade bob</i><br>
<b>Shade Bob Down</b> screen number,x,y,image</p>

<p>This command is similar to Shade Bob Up and decreases the colour index only.</p>

<br>

<a name="tdstars"></a>
<h2>Td Stars Commands</h2>

<p>
Using these commands you not only can realize 3D star effects, because the commands are rather versatile.</p>

<br>

<a name="tdstarsbank"></a>
<p><b>TD STARS BANK</b><br>
<i>instruction: reserve a bank for 3d stars</i><br>
<b>Td Stars Bank</b> bank,stars</p>

<p>
This instruction reserves a bank for 3D stars. The 'bank' parameter holds
the number of the memory bank which should be used for the stars. 'stars'
contains the number of stars to be saved in this bank.<br>

Each star consumes 12 bytes of memory.</p>

<br>

<a name="tdstarsplanes"></a>
<p><b>TD STARS PLANES</b><br>
<i>instruction: set the bitplanes to use for 3d stars</i><br>
<b>Td Stars Planes</b> bitplane 1,bitplane 2</p>

<p>
Td Stars Planes is used to specify the <a href="additional.html#bitplane">Bitplanes</a> which the stars should
be drawn on.<br>
Normally, these are the bitplanes 0 and 1, but these defaults can be modified with this instruction.</p>

<br>

<a name="tdstarslimit"></a>
<p><b>TD STARS LIMIT</b><br>
<i>instruction: limit the area of a screen to use for 3d stars</i><br>
<b>Td Stars Limit</b><br>
<b>Td Stars Limit</b> x1,y1 <b>To</b> x2,y2</p>

<p>
Limits the stars into a specific area on the screen. If no parameters are
given, the full screen sizes are used.<br>
x1,y1 and x2,y2 create a rectangular region, in which the stars will be
drawn in.<br>
These coordinates must lie WITHIN the screen dimensions, otherwise the stars could corrupt your memory.</p>

<br>

<a name="tdstarsorigin"></a>
<p><b>TD STARS ORIGIN</b><br>
<i>instruction: set the starting point for 3d stars</i><br>
<b>Td Stars Origin</b> x,y</p>

<p>
Sets the origin, where stars start from, as soon as they have left the
screen. The coordinates x,y must lie on the screen and within the drawing
area, you have defined using Td Stars Limit earlier.</p>

<p>
The Td Stars Limit instruction automatically places the origin in the
middle of the specified area. Therefore, this command has to be placed after Td Stars Limit.</p>

<br>

<a name="tdstarsgravity"></a>
<p><b>TD STARS GRAVITY</b><br>
<i>instruction: set the direction for 3d stars</i><br>
<b>Td Stars Gravity</b> sx,sy</p>

<p>
Set the direction which the stars shall drift into. 'sx' contains a value
which is added each step to the horizontal speed and may be a positive
number for right drift or a negative one for left movement. Same with
'sy', but this one has effect on the vertical speed.</p>

<p>
Normally, these values are set to 0, but you could use other values
in conjunction with Td Stars Accelerate to create an effect of spreading sparks.</p>

<br>

<a name="tdstarsaccelerate"></a>
<p><b>TD STARS ACCELERATE</b><br>
<i>instruction: toggle acceleration for 3d stars on or off</i><br>
<b>Td Stars Accelerate</b> On<br>
<b>Td Stars Accelerate</b> Off</p>

<p>Determines, if the stars are to be accelerated during the flight.</p>

<br>

<a name="tdstarsinit"></a>
<p><b>TD STARS INIT</b><br>
<i>instruction: initialise the 3d stars</i><br>
<b>Td Stars Init</b></p>

<p>
Initialises the stars. That means, that the stars are moved by random
values to avoid that they all start in the origin.<br>
This command should therefore be called once after all parameters have been set.</p>

<br>

<a name="tdstarsdo"></a>
<p><b>TD STARS SINGLE DO</b><br>
<b>TD STARS DOUBLE DO</b><br>
<i>instruction: process and draw the 3d stars</i><br>
<b>Td Stars Single Do</b><br>
<b>Td Stars Double Do</b></p>

<p>
Clears, draws and moves all the stars in one single step. For Double
Buffered screens you have to call the command Td Stars Double Do, for normal ones Td Stars Single Do.<br>

To manually control the draw process you have to call the commands Td Stars Single Del
or Td Stars Double Del, then Td Stars Move and Td Stars Draw in this order.</p>

<br>

<a name="tdstarsdel"></a>
<p><b>TD STARS SINGLE DEL</b><br>
<b>TD STARS DOUBLE DEL</b><br>
<i>instruction: delete the 3d stars from the screen</i><br>
<b>Td Stars Single Del</b><br>
<b>Td Stars Double Del</b></p>

<p>
Wipes the stars from the screen. You have to distinguish between Single
and Double Buffered screens. Use Td Stars Double Del on Double Buffered<br>
<b>Note:</b> The background is not saved during the drawing process.</p>

<br>

<a name="tdstarsmove"></a>
<p><b>TD STARS MOVE</b><br>
<i>instruction: move the 3d stars on the screen</i><br>
<b>Td Stars Move</b><br>
<b>Td Stars Move</b> star number</p>

<p>
The Td Stars Move instruction moves all the stars by on step. To see the
result, you have to draw the stars with a call to Td Stars Draw.<br>

The second version of this command enables you to move a single star.</p>

<br>

<a name="tdstarsdraw"></a>
<p><b>TD STARS DRAW</b><br>
<i>instruction: draw the 3d stars to the screen</i><br>
<b>Td Stars Draw</b></p>

<p>
This command draws all the stars onto screen. To clear the stars again you
have to use either Td Stars Single Del or Td Stars Double Del according to the screen type.</p>

<br>

<a name="splinters"></a>
<h2>Splinters Commands</h2>

<p>
Splinters are similar to Td Stars, but they don't destroy the background
and use the colour of the pixel they have removed and Splinters require a
list of coordinates.<br>
Each coordinate requires four bytes, i.e already a field of 16x16 coordinates consumes 16 KB of memory.</p>

<br>

<a name="coordsbank"></a>
<p><b>COORDS BANK</b><br>
<i>instruction: reserve a bank to store coords</i><br>
<b>Coords Bank</b> bank number,coords<br>
<b>Coords Bank</b> bank number</p>

<p>
Reserves the bank to store a coordinates array. These banks are utilized e.g for Splinters. 'coords' holds the amount of
coordinates the bank should be able to hold.<br>
Each coordinate requires 4 bytes. If this parameter is omitted the existing bank will only be
switched to without erasing it. So you can jump between predefined banks.
</p>

<br>

<a name="coordsread"></a>
<p><b>COORDS READ</b><br>
<i>instruction: read coords into a bank</i><br>
<b>Coords Read</b> screen,colour,x1,y1 <b>To</b> x2,y2,bank,mode</p>

<p>
Read the coordinates for Splinters into a bank. The memory bank with the number 'bank' must have been defined
previously with a call to the Coords Bank command.<br>
The 'screen' parameter holds the number of the screen on which the pixels are. 'colour'
represents the background colour, that will be left out when reading in
the dots.<br>
The rectangle which is described by the coordinates x1,y1 and
x2,y2 will be then read in and all dots, which don't have the colour
'colour', will be stored in the bank.<br>
'mode' can be either 0, if you want the coords to be read in strict order, or 1, if you want the coords to be shuffled.</p>

<br>

<a name="splintersbank"></a>
<p><b>SPLINTERS BANK</b><br>
<i>instruction: reserve a set number of splinters into a bank</i><br>
<b>Splinters Bank</b> bank number,splinum</p>

<p>
Reserves a memory bank for a maximum of 'splinum' Splinters. Each Splinter requires 22 bytes of memory.</p>

<br>

<a name="splinterscolour"></a>
<p><b>SPLINTERS COLOUR</b><br>
<i>instruction: set splinter colour to use</i><br>
<b>Splinters Colour</b> bkcolour,planes</p>

<p>
Determines, which colour is to be left, after a Splinter has released
a dot from that point. The 'planes' parameter describes the number of
bitplanes to be taken for the Splinters operation.<br>
Normally, this value should be equal to the number of available bitplanes. However, it can be
useful for some effects to reduce this value.</p>

<br>

<a name="splinterslimit"></a>
<p><b>SPLINTERS LIMIT</b><br>
<i>instruction: limit splinter area on the screen</i><br>
<b>Splinters Limit</b><br>
<b>Splinters Limit</b> x1,y1 <b>To</b> x2,y2</p>

<p>
Sets the limits for the Splinters to a rectangular area on the screen.
If you don't give any parameters, AMCAF uses the limits of the current screen.</p>

<br>

<a name="splintersmax"></a>
<p><b>SPLINTERS MAX</b><br>
<i>instruction: change max number of splinters</i><br>
<b>Splinters Max</b> number</p>

<p>
Changes the max. number of new Splinters to appear on each step.
Therefore a pulsing effect can be avoided.<br>
If the number is set to 0, no more Splinters are created. When set to -1, there won't be a limit.</p>

<br>

<a name="splintersfuel"></a>
<p><b>SPLINTERS FUEL</b><br>
<i>instruction: set the time for splinters on screen</i><br>
<b>Splinters Fuel</b> time</p>

<p>
This command is used to set the amount of time the Splinters move over the
screen until they disappear automatically.<br>
The 'time' parameter holds the number of steps the splinters are moved before they vanish. If you set
'time' to 0, the Splinters only disappear at the edges of the screen.</p>

<br>

<a name="splintersgravity"></a>
<p><b>SPLINTERS GRAVITY</b><br>
<i>instruction: set the direction for splinters on screen</i><br>
<b>Splinters Gravity</b> sx,sy</p>

<p>
Set the direction which the Splinters shall drift into. 'sx' contains a
value which is added each step to the horizontal speed and may be a
positive number for right drift or a negative one for left movement.<br>
Same with 'sy', but this one has effect on the vertical speed.</p>

<br>

<a name="splintersinit"></a>
<p><b>SPLINTERS INIT</b><br>
<i>instruction: initialise the splinters</i><br>
<b>Splinters Init</b></p>

<p>
Initialises the Splinters. They are fed with the coordinates and speeds you have specified earlier.</p>

<br>

<a name="splintersdo"></a>
<p><b>SPLINTERS SINGLE DO</b><br>
<b>SPLINTERS DOUBLE DO</b><br>
<i>instruction: draw the splinters to the screen</i><br>
<b>Splinters Single Do</b><br>
<b>Splinters Double Do</b></p>

<p>
Clears, draws and moves all Splinters in one single step.
For Double Buffered screens you have to call the command Splinters Double Do,
for normal ones Splinters Single Do.<br>
To manually control the draw process you have to call the commands Splinters Single Del
or Splinters Double Del, then Splinters Move, Splinters Back and Splinters Draw in this order.</p>

<br>

<a name="splintersdel"></a>
<p><b>SPLINTERS SINGLE DEL</b><br>
<b>SPLINTERS DOUBLE DEL</b><br>
<i>instruction: clear the splinters from the screen</i><br>
Splinters Single Del<br>
Splinters Double Del</p>

<p>
Clears the splinters from the screen again. As the clearing process
must either wipe the pre-last pixels from the screen (when using Double
Buffering), or the last pixels (with Single Buffered screens), you have
to take the appropriate command for the right screen type.<br>
The background is automatically restored.</p>

<br>

<a name="splintersmove"></a>
<p><b>SPLINTERS MOVE</b><br>
<i>instruction: move the splinters on the screen</i><br>
<b>Splinters Move</b></p>

<p>This command moves the Splinters one step.</p>

<br>

<a name="splintersdraw"></a>
<p><b>SPLINTERS DRAW</b><br>
<i>instruction: draw the splinters onto the screen</i><br>
<b>Splinters Draw</b></p>

<p>Draws the Splinters onto the screen.</p>

<br>

<a name="splintersback"></a>
<p><b>SPLINTERS BACK</b><br>
<i>instruction: save the background for next splinter draw operation</i><br>
<b>Splinters Back</b></p>

<p>
Saves the background, on which the Splinters are to be drawn in the next step.</p>

<br>

<h2>Splinters Functions</h2>

<a name="countpixels"></a>
<p><b>COUNT PIXELS</b><br>
<i>function: count the number of pixels in an area</i><br>
number=<b>Count Pixels</b>(screen number,colour,x1,y1 <b>To</b> x2,y2)</p>

<p>
This function returns the number of pixels in the rectangular area from x1,y1 to x2,y2 in the screen, that don't have the colour index colour.<br>
This function can be used to first acquire the number of points in this area and then to reserve a coordinates bank.</p>

<br>

<a name="splintersactive"></a>
<p><b>SPLINTERS ACTIVE</b><br>
<i>function: return the number of active splinters</i><br>
number=<b>Splinters Active</b></p>

<p>
This function returns the number of active Splinters at this time.
This can be used to know when the animation has finished.</p>

</body>
</html>