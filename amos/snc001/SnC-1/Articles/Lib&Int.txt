 __________   __________   __________   __________   __________   __________ 
| ` |  _| | | ` |  _| | | ` |  _| | | ` |  _| | | ` |  _| | | ` |  _| |
|_,_|_|/_,_| |_,_|_|/_,_| |_,_|_|/_,_| |_,_|_|/_,_| |_,_|_|/_,_| |_,_|_|/_,_|
=============================================================================
                         Accessing System Libraries
=============================================================================

Before I begin, I'm using AMOS Pro.  I don't know if AMOS Classic has all the
commands to access libraries;  And I don't really care either.

When  ever  accessing  libraries  it's a good idea to have the Amiga Includes
docs with you so you know exactly what library vector offsets (known from now
as  LVO)  you  are wanting to use.  If you don't have these then don't cry as
you'll  find  v39  includes for the exec, graphics and intuition libraries on
this disk.  These include files are all public domain.

To communicate with libraries AMOS provides a number of commands.  Chapter
11.05 in the AMOS Professional manual babbles on about all these so i'm not
going to bother.  Most library functions need parameters to feed on, to send
parameters to libraries you have to use the AREG() and DREG() functions.  The
autodocs supplied with the include files specify any registers that need to
have parameters put into before calling the library command.

Now a feel a quick demo comming on.

                                     -=-

Say  you wanted to open a new screen under intuition.  First find the command
in the library includes.  The screen open command is in the intuition library
and  is  at  offset  -198.   If  you then check the autoocs for the intuition
library it shows that the open screen command needs a parameter which must be
put into reqiester a0.  This is how you do it in AMOS :-

	SCREEN_NUMBER=2
	Areg(0)=SCREEN_NUMBER
	RESULT=Intcall(-198)

If  all  goes  well  you  should  be able to flick back to workbench and then
toggle  between  the  main  WB  screen  and  a blank lowres one.  Setting the
screens  resolution  and  other definitions are a little more complicated and
not something I want to get itno at the moment.

The above example is crap though.  A good library call is the display beep.

	SCREEN_NUMBER=0 : Rem Workbench Screen Default
	Areg(0)=SCREEN_NUMBER
	RESULT=Intcall(-96) : Rem DisplayBeep()

I've  compiled  together  a  few  workbench calls and put them into their own
procedures so that all you have to do is insert parameters into the procedure
name  call  so no registers need to be set by you.  Have a look at the source
and then fiddle about and add more procedures to do better functions.

                                     -=-

One of the most useful library calls for game and demo coders has to be
Forbid() and Permit().  With a single call:

                              XXX=Execall(-132)

at  the  start  of  your program the multitasking system will be disabled and
thus  speed up and make your programs run smoother.  But beware at the end of
the program you MUST do a Permit() call like this:

                              XXX=Execall(-138)

to  enable the multitasking system so that the AMOS editor can work.  Faliure
to do this will definetly crash your pooter into a wall!

                                     -=-

Also  examine  the  "NFAPlay  Cli"  source code for a demo of how to create a
workbench friendly util that is coded in AMOS with NO extensions!






