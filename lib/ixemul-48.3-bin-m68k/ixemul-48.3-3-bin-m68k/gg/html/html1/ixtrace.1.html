<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>IXTRACE(1) manual page</title>
</head>
<body bgcolor='white'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
ixtrace - a tracer for ixemul.library 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<b>ixtrace</b> [ <b>-a</b> ] [ <b>-i</b> ] [ <b>-m</b>
] [ <b>-l</b> ] [ <b>-v</b> ] [ <b>-w</b> ] [ <b>-z</b> ] [ <b>-c</b> syscall name ] [ <b>-n</b> N ] [ <b>-o </b> logfile ] [ <b></b>
-p  pid ] [ <b></b> -s  syscall-number ] <br>

<h2><a name='sect2' href='#toc2'>Description</a></h2>
<i>Ixtrace</i> is a utility that reports every call that is made to
the <i>ixemul.library</i>. Since it scans every call made through the library base,
it catches even  more calls than for example SnoopDOS. <p>
Obviously, tracing
support slows down <i>all</i> clients of the library (as each call is now routed
through a trace function). For this reason there are two library versions.
<i>Ixemul.library</i> itself doesn&rsquo;t contain tracing support. Using the tracer with
this library gives a "Function not implemented" error. To use the <i>ixtrace</i>
utility, you should use the <i>ixemul.trace</i> library instead of <i>ixemul.library</i>.
See <b>USAGE</b> for more detailed instructions. <p>
The option most often used is
<b>-m</b>, as the library uses <i>sigsetmask()</i> a lot internally, and mentioning this
call again and again would just clutter the screen. 
<h2><a name='sect3' href='#toc3'>Options</a></h2>

<dl>

<dt><b>-a</b> </dt>
<dd>Print all calls,
even those considered &lsquo;not interesting&rsquo;: internal stdio-calls and 32 bit arithmetic
emulation for 68000, for example. </dd>

<dt><b>-i</b> </dt>
<dd>Normally, the tracer shows a function
call when that function returns, to be able to display the return value
(and <i>errno</i> in parenthesis). When  <b>-i</b> is specified, it always displays the
function on entry, instead of on exit.  See <b>BUGS</b> for current problems if
you invoke <i>ixtrace</i> without the <b>-i</b> option. </dd>

<dt><b>-m</b> </dt>
<dd>Skip <i>sigsetmask()</i> calls. This
function is used extensively inside the library, and will in most cases
just clutter the tracer output. </dd>

<dt><b>-l</b> </dt>
<dd>List <i>all</i> system calls to stdout. No more
need to look up a call you want to trace in the include/sys/syscall.def
file. </dd>

<dt><b>-v</b> </dt>
<dd>Print the current  <i>version</i> number. </dd>

<dt><b>-w</b> </dt>
<dd>Wipe out the syscalls you  
<i>DON&rsquo;T</i> want to trace. </dd>

<dt><b>-z</b> </dt>
<dd>Allows the input of <i>syscall</i> names that the user wants
to trace. </dd>

<dt><b>-c</b> </dt>
<dd>Only print calls to a specific system call, by name. Differs
from <i>-s</i> , which expects a syscall number. </dd>

<dt><b>-n</b> </dt>
<dd>Skip the first <i>N</i>  traces. </dd>

<dt><b>-o</b> </dt>
<dd>Specify
a logfile. If <b>-o</b> is omitted, output goes to <i>stdout</i>. </dd>

<dt><b>-p</b> </dt>
<dd>Only print output from
a specific process. You have to provide the decimal address of the process.
Default is to scan all current <i>ixemul.library</i> clients. </dd>

<dt><b>-s</b> </dt>
<dd>Only print calls
to a specific system call. You have to specify the system call number as
found in <b>&lt;sys/syscalls.def&gt;</b>. </dd>
</dl>

<h2><a name='sect4' href='#toc4'>Usage</a></h2>
Before you can use <i>ixtrace</i>, you will first
have to flush the old <i>ixemul.library</i> out of the system. The Workbench option
<b>FlushLibs</b> can do that for you, <b>Avail FLUSH</b> achieves the same from a shell.
This assumes no currently running process is using the library. <p>
Next make
sure the system loads <i>ixemul.trace</i> instead of <i>ixemul.library</i> next time it
starts a program that uses <i>ixemul.library</i>  <p>
You can do that by replacing
<i>ixemul.library</i> with <i>ixemul.trace</i>. You can also use <b>LoadLib</b> <b>ixemul.trace</b>. But
<b>LoadLib</b> is not an official CLI command. <p>
Now Start the tracer (probably in
its own window). You should now see a log of all functions called from your
program(s),  and some functions called as a consequence of your functions
from inside the library. A typical output line is: <p>
<b>$7588790: &lt;strcmp("foo",
"-n")=57 (0)</b> <p>

<dl>

<dt><b>$7588790</b> </dt>
<dd>This is the process address. </dd>

<dt><b>&lt;</b> </dt>
<dd>Type of log, <b>&lt;</b> means on
exit, <b>&gt;</b> means on entry. </dd>

<dt><b>strcmp("foo", "-n")</b> </dt>
<dd>The function with the parameters.
</dd>

<dt><b>=57</b> </dt>
<dd>The result of the function. </li><b></b><li>The value of <i>errno</i>. </li>
</ol>

<h2><a name='sect5' href='#toc5'>Bugs</a></h2>
There seems to be
some race condition, that can result in deadlock when running without the
<b>-i</b> flag. <p>
Currently, if trace-on-exit is enabled, the function is called with
16 arguments, no matter how many arguments you passed to it. This should
be enough for 99% of all applications, but you may have more than 16 arguments
to a <i>printf()</i> somewhere. <p>
Functions returning more than a 4 byte result do
<i>not</i> work unless you specify the  <b>-i</b> option! 
<h2><a name='sect6' href='#toc6'>History</a></h2>
Adapted by David Zaroski
from the original <b>README</b> written by Markus Wild. <p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Options</a></li>
<li><a name='toc4' href='#sect4'>Usage</a></li>
<li><a name='toc5' href='#sect5'>Bugs</a></li>
<li><a name='toc6' href='#sect6'>History</a></li>
</ul>
</body>
</html>
