                                  <!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>msgctl(2) manual page</title>
</head>
<body bgcolor='white'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>NAME</a></h2>
  
<h2><a name='sect1' href='#toc1'>SYNOPSIS</a></h2>
     
<h2><a name='sect2' href='#toc2'>DESCRIPTION</a></h2>
The  system
call performs some control operations on the message queue specified by
 
<p> Each message queue has a data structure associated with it, parts of
which may be altered by  and parts of which determine the actions of  The
data structure is defined in  and contains (amongst others) the following
members:  struct msqid_ds {     struct ipc_perm msg_perm;<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* msg queue permission
bits */<br>
     u_long msg_cbytes; /* # of bytes in use on the queue */<br>
     u_long msg_qnum;   /* # of msgs in the queue */<br>
     u_long msg_qbytes; /* max # of bytes on the queue */<br>
     pid_t  msg_lspid;  /* pid of last msgsnd() */<br>
     pid_t  msg_lrpid;  /* pid of last msgrcv() */<br>
     time_t msg_stime;  /* time of last msgsnd() */<br>
     time_t msg_rtime;  /* time of last msgrcv() */<br>
     time_t msg_ctime;  /* time of last msgctl() */<br>
 };  
<p> The  ipc_perm  structure used inside the  shmid_ds  structure is
defined in  and looks like this:  struct ipc_perm {     ushort cuid; /*
creator user id */<br>
     ushort cgid; /* creator group id */<br>
     ushort uid;<tt> </tt>&nbsp;<tt> </tt>&nbsp; /* user id */<br>
     ushort gid;<tt> </tt>&nbsp;<tt> </tt>&nbsp; /* group id */<br>
     ushort mode; /* permission (9 bits, see <a href='chmod.2'>chmod(2)</a>
) */<br>
     ushort seq;<tt> </tt>&nbsp;<tt> </tt>&nbsp; /* sequence # (to generate unique id) */<br>
     key_t key;<tt> </tt>&nbsp;<tt> </tt>&nbsp; /* user specified msg/sem/shm key */<br>
 };  
<p> The operation to be performed by  is specified in  and is one of:
  Gather information about the message queue and place it in the structure
pointed to by   Set the value of the    and  fields in the structure associated
with  The values are taken from the corresponding fields in the structure
pointed to by  This operation can only be executed by the super-user, or
a process that has an effective user id equal to either   or  in the data
structure associated with the message queue. The value of  can only be increased
by the super-user. Values for  that exceed the system limit (MSGMNB from
 are silently truncated to that limit. 
<p>  Remove the message queue specified
by  and destroy the data associated with it. Only the super-user or a process
with an effective uid equal to the   or  values in the data structure associated
with the queue can do this.  
<p> The permission to read from or write to a
message queue (see  and  is determined by the  field in the same way as
is done with files (see  but the effective uid can match either the  field
or the  field, and the effective gid can match either  or  
<h2><a name='sect3' href='#toc3'>RETURN VALUES</a></h2>
Upon
successful completion, a value of 0 is returned. Otherwise, -1 is returned
and the global variable  is set to indicate the error. 
<h2><a name='sect4' href='#toc4'>ERRORS</a></h2>
 will fail
if:    is equal to IPC_SET or IPC_RMID and the caller is not the super-user,
nor does the effective uid match either the  or  fields of the data structure
associated with the message queue. 
<p> An attempt is made to increase the value
of  through IPC_SET but the caller is not the super-user.  The command is
IPC_STAT and the caller has no read permission for this message queue. 
 is not a valid message queue identifier. 
<p>  is not a valid command.   specifies
an invalid address.  
<h2><a name='sect5' href='#toc5'>SEE ALSO</a></h2>
   
<h2><a name='sect6' href='#toc6'>HISTORY</a></h2>
Message queues appeared in the first
release of AT&amp;T Unix System V. <p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>NAME</a></li>
<li><a name='toc1' href='#sect1'>SYNOPSIS</a></li>
<li><a name='toc2' href='#sect2'>DESCRIPTION</a></li>
<li><a name='toc3' href='#sect3'>RETURN VALUES</a></li>
<li><a name='toc4' href='#sect4'>ERRORS</a></li>
<li><a name='toc5' href='#sect5'>SEE ALSO</a></li>
<li><a name='toc6' href='#sect6'>HISTORY</a></li>
</ul>
</body>
</html>
