                                  <!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>msgrcv(2) manual page</title>
</head>
<body bgcolor='white'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>NAME</a></h2>
  
<h2><a name='sect1' href='#toc1'>SYNOPSIS</a></h2>
     
<h2><a name='sect2' href='#toc2'>DESCRIPTION</a></h2>
The   function
receives a message from the message queue specified in  and places it into
the structure pointed to by  This structure should consist of the following
members:      long mtype;    /* message type */<br>
     char mtext[1]; /* body of message */<br>
  
<p>  is an integer greater than 0 that can be used for selecting messages,
 is an array of bytes, with a size up to that of the system limit (MSGMAX).

<p> The value of  has one of the following meanings:    is greater than 0.
The first message of type  will be received.   is equal to 0. The first message
on the queue will be received.   is less than 0. The first message of the
lowest message type that is less than or equal to the absolute value of
 will be received.  
<p>  specifies the maximum length of the requested message.
If the received message has a length greater than  it will be silently
truncated if the MSG_NOERROR flag is set in  otherwise an error will be
returned. 
<p> If no matching message is present on the message queue specified
by  the behaviour of  depends on whether the IPC_NOWAIT flag is set in
 or not. If IPC_NOWAIT is set,  will immediately return a value of -1, and
set  to EAGAIN. If IPC_NOWAIT is not set, the calling process will be blocked
until:   A message of the requested type becomes available on the message
queue.  The message queue is removed, in which case -1 will be returned,
and  set to EINVAL.  A signal is received and caught. -1 is returned, and
 set to EINTR.  
<p> If a message is successfully received, the data structure
associated with  is updated as follows:    is decremented by the size of
the message.   is set to the pid of the caller.   is set to the current time.
  is decremented by 1. 
<h2><a name='sect3' href='#toc3'>RETURN VALUES</a></h2>
Upon successful completion,  returns
the number of bytes received into the  field of the structure pointed to
by  Otherwise, -1 is returned, and  set to indicate the error. 
<h2><a name='sect4' href='#toc4'>ERRORS</a></h2>
 will
fail if:    is not a valid message queue identifier 
<p> The message queue
was removed while  was waiting for a message of the requested type to become
available on it. 
<p>  is less than 0.  A matching message was received, but
its size was greater than  and the MSG_NOERROR flag was not set in   The
calling process does not have read access to the message queue.   points
to an invalid address.  The system call was interrupted by the delivery
of a signal.  There is no message of the requested type available on the
message queue, and IPC_NOWAIT is set in  
<h2><a name='sect5' href='#toc5'>SEE ALSO</a></h2>
   
<h2><a name='sect6' href='#toc6'>BUGS</a></h2>
NetBSD does not
define the EIDRM error value, which should be used in the case of a removed
message queue, nor the ENOMSG value, which should be used when no suitable
message is available and IPC_NOWAIT is set. 
<h2><a name='sect7' href='#toc7'>HISTORY</a></h2>
Message queues appeared
in the first release of AT&amp;T Unix System V. <p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>NAME</a></li>
<li><a name='toc1' href='#sect1'>SYNOPSIS</a></li>
<li><a name='toc2' href='#sect2'>DESCRIPTION</a></li>
<li><a name='toc3' href='#sect3'>RETURN VALUES</a></li>
<li><a name='toc4' href='#sect4'>ERRORS</a></li>
<li><a name='toc5' href='#sect5'>SEE ALSO</a></li>
<li><a name='toc6' href='#sect6'>BUGS</a></li>
<li><a name='toc7' href='#sect7'>HISTORY</a></li>
</ul>
</body>
</html>
