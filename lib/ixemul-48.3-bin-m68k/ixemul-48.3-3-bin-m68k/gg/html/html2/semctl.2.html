                                  <!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>semctl(2) manual page</title>
</head>
<body bgcolor='white'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>NAME</a></h2>
  
<h2><a name='sect1' href='#toc1'>SYNOPSIS</a></h2>
     
<h2><a name='sect2' href='#toc2'>DESCRIPTION</a></h2>
The  system
call provides a number of control operations on the semaphore specified
by  and  The operation to be performed is specified in  (see below).  is
a union of the following fields:      int     val;            /* value
for SETVAL */<br>
     struct  semid_ds *buf;  /* buffer for IPC_{STAT,SET} */<br>
     u_short *array;         /* array for GETALL &amp; SETALL */<br>
  
<p> The  semid_ds  structure used in the IPC_SET and IPC_STAT commands is
defined as follows in   struct semid_ds {     struct ipc_perm sem_perm;
 /* operation permissions */<br>
     struct  sem *sem_base;     /* semaphore set */<br>
     u_short sem_nsems;         /* number of sems in set */<br>
     time_t  sem_otime;         /* last operation time */<br>
     time_t  sem_ctime;         /* last change time */<br>
 };  
<p> The  ipc_perm  structure used inside the  semid_ds  structure is
defined in  and looks like this:  struct ipc_perm {     ushort cuid; /*
creator user id */<br>
     ushort cgid; /* creator group id */<br>
     ushort uid;<tt> </tt>&nbsp;<tt> </tt>&nbsp; /* user id */<br>
     ushort gid;<tt> </tt>&nbsp;<tt> </tt>&nbsp; /* group id */<br>
     ushort mode; /* r/w permission (see <a href='chmod.2'>chmod(2)</a>
) */<br>
     ushort seq;<tt> </tt>&nbsp;<tt> </tt>&nbsp; /* sequence # (to generate unique msg/sem/shm id) */<br>
     key_t key;<tt> </tt>&nbsp;<tt> </tt>&nbsp; /* user specified msg/sem/shm key */<br>
 };  
<p>  provides the following operations:   Return the value of the semaphore.
 Set the value of the semaphore to   Return the pid of the last process
that did an operation on this semaphore.  Return the number of processes
waiting to acquire the semaphore.  Return the number of processes waiting
for the value of the semaphore to reach 0.  Return the values for all the
semaphores associated with    Set the values for all the semaphores that
are associated with the semaphore identifier  to the corresponding values
in   Gather statistics about a semaphore and place the information in the
 semid_ds  structure pointed to by  (see above).  Set the value of the 
 and  fields in the structure associated with the semaphore. The values
are taken from the corresponding fields in the structure pointed to by
 This operation can only be executed by the super-user, or a process that
has an effective user id equal to either   or  in the data structure associated
with the message queue.  Remove the semaphores associated with  from the
system and destroy the data structures associated with it. Only the super-user
or a process with an effective uid equal to the   or  values in the data
structure associated with the semaphore can do this.  
<p> The permission to
read or change a message queue (see  is determined by the  field in the
same way as is done with files (see  but the effective uid can match either
the  field or the  field, and the effective gid can match either  or  
<h2><a name='sect3' href='#toc3'>RETURN
VALUES</a></h2>
For the GETVAL, GETPID, GETNCNT and GETZCNT operations,  returns
one of the values described above if successful. All other operations will
make  return 0 if no errors occur. Otherwise -1 is returned and  set to reflect
the error. 
<h2><a name='sect4' href='#toc4'>ERRORS</a></h2>
 will fail if:    is equal to IPC_SET or IPC_RMID and the
caller is not the super-user, nor does the effective uid match either the
 or  fields of the data structure associated with the message queue.  The
caller has no operation permission for this semaphore.   is not a valid
message semaphore identifier. 
<p>  is not a valid command.   specifies an invalid
address.  
<h2><a name='sect5' href='#toc5'>SEE ALSO</a></h2>
  <p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>NAME</a></li>
<li><a name='toc1' href='#sect1'>SYNOPSIS</a></li>
<li><a name='toc2' href='#sect2'>DESCRIPTION</a></li>
<li><a name='toc3' href='#sect3'>RETURN VALUES</a></li>
<li><a name='toc4' href='#sect4'>ERRORS</a></li>
<li><a name='toc5' href='#sect5'>SEE ALSO</a></li>
</ul>
</body>
</html>
