                                  <!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>semop(2) manual page</title>
</head>
<body bgcolor='white'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>NAME</a></h2>
  
<h2><a name='sect1' href='#toc1'>SYNOPSIS</a></h2>
     
<h2><a name='sect2' href='#toc2'>DESCRIPTION</a></h2>
 provides
a number of atomic operations on a set of semaphores. The semaphore set
is specified by   is an array of semaphore operations,   is the number
of operations in this array. The  structures in the array contain the following
members:          u_short sem_num;        /* semaphore # */<br>
         short   sem_op;         /* semaphore operation */<br>
         short   sem_flg;        /* operation flags */<br>
  
<p> Each operation (specified in  is applied to semaphore number  in the
set of semaphores specified by  The value of  determines the action taken
in the following way:    is less than 0. The current process is blocked
until the value of the semaphore is greater than or equal to the absolute
value of  The absolute value of  is then subtracted from the value of the
semaphore, and the calling process continues. Negative values of  are thus
used to enter critical regions.   is greater than 0. Its value is added to
the value of the specified semaphore. This is used to leave critical regions.
  is equal to 0. The calling process is blocked until the value of the specified
semaphore reaches 0.  
<p> The behaviour of each operation is influenced by
the flags set in  in the following way:   In the case where the calling
process would normally block, waiting for a semaphore to reach a certain
value, IPC_NOWAIT makes the call return immediately, returning a value
of -1 and setting  to EAGAIN.  Keep track of the changes that this call makes
to the value of a semaphore, so that they can be undone when the calling
process terminates. This is useful to prevent other processes waiting on
a semaphore to block forever, should the process that has the semaphore
locked terminate in a critical section.  
<h2><a name='sect3' href='#toc3'>RETURN VALUES</a></h2>
Upon successful completion,
a value of 0 is returned. Otherwise, -1 is returned and the global variable
 is set to indicate the error. 
<h2><a name='sect4' href='#toc4'>ERRORS</a></h2>
 will fail if:   There is no semaphore
associated with  
<p> The semaphore set was removed while the process was waiting
for one of its semaphores to reach a certain value. 
<p>  The calling process
has no permission to access the specified semaphore set.  The value of 
is too big. The maximum is specified in MAX_SOPS in &lt;sys/sem.h&gt;   in one of
the sem_buf structures is less than 0, or greater than the actual number
of semaphores in the set specified by   SEM_UNDO was requested, and there
is not enough space left in the kernel to store the unfo information.  The
requested operation can not immediately be performed, and IPC_NOWAIT was
set in    points to an illegal address. 
<h2><a name='sect5' href='#toc5'>SEE ALSO</a></h2>
  
<h2><a name='sect6' href='#toc6'>BUGS</a></h2>
In case of a removed
semaphore identifier,  should be set to EIDRM, but NetBSD does not define
this error. <p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>NAME</a></li>
<li><a name='toc1' href='#sect1'>SYNOPSIS</a></li>
<li><a name='toc2' href='#sect2'>DESCRIPTION</a></li>
<li><a name='toc3' href='#sect3'>RETURN VALUES</a></li>
<li><a name='toc4' href='#sect4'>ERRORS</a></li>
<li><a name='toc5' href='#sect5'>SEE ALSO</a></li>
<li><a name='toc6' href='#sect6'>BUGS</a></li>
</ul>
</body>
</html>
