                                      <!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>fts(3) manual page</title>
</head>
<body bgcolor='white'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>NAME</a></h2>
  
<h2><a name='sect1' href='#toc1'>SYNOPSIS</a></h2>
             
<h2><a name='sect2' href='#toc2'>DESCRIPTION</a></h2>
The
 functions are provided for traversing  file hierarchies. A simple overview
is that the  function returns a &lsquo;&lsquo;handle&rsquo;&rsquo; on a file hierarchy, which is then
supplied to the other  functions. The function  returns a pointer to a structure
describing one of the files in the file hierarchy. The function  returns
a pointer to a linked list of structures, each of which describes one of
the files contained in a directory in the hierarchy. In general, directories
are visited two distinguishable times; in pre-order (before any of their
descendants are visited) and in post-order (after all of their descendants
have been visited). Files are visited once. It is possible to walk the hierarchy
&lsquo;&lsquo;logically&rsquo;&rsquo; (ignoring symbolic links) or physically (visiting symbolic links),
order the walk of the hierarchy or prune and/or re-visit portions of the
hierarchy.  Two structures are defined (and typedef&rsquo;d) in the include file
 The first is  the structure that represents the file hierarchy itself.
The second is  the structure that represents a file in the file hierarchy.
Normally, an  structure is returned for every file in the file hierarchy.
In this manual page, &lsquo;&lsquo;file&rsquo;&rsquo; and  are generally interchangeable. The  structure
contains at least the following fields, which are described in greater
detail below:  typedef struct _ftsent { <tt> </tt>&nbsp;<tt> </tt>&nbsp;u_short fts_info;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* flags for FTSENT
structure */<br>
 <tt> </tt>&nbsp;<tt> </tt>&nbsp;char *fts_accpath;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* access path */<br>
 <tt> </tt>&nbsp;<tt> </tt>&nbsp;char *fts_path;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* root path */<br>
 <tt> </tt>&nbsp;<tt> </tt>&nbsp;short fts_pathlen;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* strlen(fts_path) */<br>
 <tt> </tt>&nbsp;<tt> </tt>&nbsp;char *fts_name;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* file name */<br>
 <tt> </tt>&nbsp;<tt> </tt>&nbsp;short fts_namelen;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* strlen(fts_name) */<br>
 <tt> </tt>&nbsp;<tt> </tt>&nbsp;short fts_level;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* depth (-1 to N) */<br>
 <tt> </tt>&nbsp;<tt> </tt>&nbsp;int fts_errno;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* file errno */<br>
 <tt> </tt>&nbsp;<tt> </tt>&nbsp;long fts_number;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* local numeric value */<br>
 <tt> </tt>&nbsp;<tt> </tt>&nbsp;void *fts_pointer;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* local address value */<br>
 <tt> </tt>&nbsp;<tt> </tt>&nbsp;struct ftsent *fts_parent;<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* parent directory */<br>
 <tt> </tt>&nbsp;<tt> </tt>&nbsp;struct ftsent *fts_link;<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* next file structure */<br>
 <tt> </tt>&nbsp;<tt> </tt>&nbsp;struct ftsent *fts_cycle;<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* cycle structure */<br>
 <tt> </tt>&nbsp;<tt> </tt>&nbsp;struct stat *fts_statp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* <a href='stat.2'>stat(2)</a>
 information */<br>
 } FTSENT;   These fields are defined as follows:   One of the following
flags describing the returned  structure and the file it represents. With
the exception of directories without errors  all of these entries are terminal,
that is, they will not be revisited, nor will any of their descendants
be visited.   A directory being visited in pre-order.  A directory that causes
a cycle in the tree. (The  field of the  structure will be filled in as
well.)  Any  structure that represents a file type not explicitly described
by one of the other  values.  A directory which cannot be read. This is an
error return, and the  field will be set to indicate what caused the error.
 A file named  or  which was not specified as a file name to  (see   A
directory being visited in post-order. The contents of the  structure will
be unchanged from when it was returned in pre-order, i.e. with the  field
set to   This is an error return, and the  field will be set to indicate
what caused the error.  A regular file.  A file for which no  information
was available. The contents of the  field are undefined. This is an error
return, and the  field will be set to indicate what caused the error.  A
file for which no  information was requested. The contents of the  field
are undefined.  A symbolic link.  A symbolic link with a non-existent target.
The contents of the  field reference the file characteristic information
for the symbolic link itself.   A path for accessing the file from the current
directory.  The path for the file relative to the root of the traversal.
This path contains the path specified to  as a prefix.  The length of the
string referenced by   The name of the file.  The length of the string referenced
by   The depth of the traversal, numbered from -1 to N, where this file
was found. The  structure representing the parent of the starting point
(or root) of the traversal is numbered -1, and the  structure for the root
itself is numbered 0.  Upon return of a  structure from the  or  functions,
with its  field set to    or  the  field contains the value of the external
variable  specifying the cause of the error. Otherwise, the contents of
the  field are undefined.  This field is provided for the use of the application
program and is not modified by the  functions. It is initialized to 0.  This
field is provided for the use of the application program and is not modified
by the  functions. It is initialized to   A pointer to the  structure referencing
the file in the hierarchy immediately above the current file, i.e. the directory
of which this file is a member. A parent structure for the initial entry
point is provided as well, however, only the   and  fields are guaranteed
to be initialized.  Upon return from the  function, the  field points to
the next structure in the NULL-terminated linked list of directory members.
Otherwise, the contents of the  field are undefined.  If a directory causes
a cycle in the hierarchy (see  either because of a hard link between two
directories, or a symbolic link pointing to a directory, the  field of
the structure will point to the  structure in the hierarchy that references
the same file as the current  structure. Otherwise, the contents of the
 field are undefined.  A pointer to  information for the file.   A single
buffer is used for all of the paths of all of the files in the file hierarchy.
Therefore, the  and  fields are guaranteed to be   for the file most recently
returned by  To use these fields to reference any files represented by
other  structures will require that the path buffer be modified using the
information contained in that  structure&rsquo;s  field. Any such modifications
should be undone before further calls to  are attempted. The  field is always
 
<h2><a name='sect3' href='#toc3'>FTS_OPEN</a></h2>
The  function takes a pointer to an array of character pointers
naming one or more paths which make up a logical file hierarchy to be traversed.
The array must be terminated by a  pointer.  There are a number of options,
at least one of which (either  or  must be specified. The options are selected
by  the following values:   This option causes any symbolic link specified
as a root path to be followed immediately whether or not  is also specified.
 This option causes the  routines to return  structures for the targets
of symbolic links instead of the symbolic links themselves. If this option
is set, the only symbolic links for which  structures are returned to the
application are those referencing non-existent files. Either  or   be provided
to the  function.  As a performance optimization, the  functions change
directories as they walk the file hierarchy. This has the side-effect that
an application cannot rely on being in any particular directory during
the traversal. The  option turns off this optimization, and the  functions
will not change the current directory. Note that applications should not
themselves change their current directory and try to access files unless
 is specified and absolute pathnames were provided as arguments to   By
default, returned  structures reference file characteristic information
(the  field) for each file visited. This option relaxes that requirement
as a performance optimization, allowing the  functions to set the  field
to  and leave the contents of the  field undefined.  This option causes
the  routines to return  structures for symbolic links themselves instead
of the target files they point to. If this option is set,  structures for
all symbolic links in the hierarchy are returned to the application. Either
 or   be provided to the  function.  By default, unless they are specified
as path arguments to  any files named  or  encountered in the file hierarchy
are ignored. This option causes the  routines to return  structures for
them.  This option prevents  from descending into directories that have
a different device number than the file from which the descent began.  
The argument  specifies a user-defined function which may be used to order
the traversal of the hierarchy. It takes two pointers to pointers to  structures
as arguments and should return a negative value, zero, or a positive value
to indicate if the file referenced by its first argument comes before,
in any order with respect to, or after, the file referenced by its second
argument. The   and  fields of the  structures may  be used in this comparison.
If the   field is set to  or  the  field may not either. If the  argument
is  the directory traversal order is in the order listed in  for the root
paths, and in the order listed in the directory for everything else. 
<h2><a name='sect4' href='#toc4'>FTS_READ</a></h2>
The
 function returns a pointer to an  structure describing a file in the hierarchy.
Directories (that are readable and do not cause cycles) are visited at
least twice, once in pre-order and once in post-order. All other files are
visited at least once. (Hard links between directories that do not cause
cycles or symbolic links to symbolic links may cause files to be visited
more than once, or directories more than twice.)  If all the members of
the hierarchy have been returned,  returns  and sets the external variable
 to 0. If an error unrelated to a file in the hierarchy occurs,  returns
 and sets  appropriately. If an error related to a returned file occurs,
a pointer to an  structure is returned, and  may or may not have been set
(see   The  structures returned by  may be overwritten after a call to
 on the same file hierarchy stream, or, after a call to  on the same file
hierarchy stream unless they represent a file of type directory, in which
case they will not be overwritten until after a call to  after the  structure
has been returned by the function  in post-order. 
<h2><a name='sect5' href='#toc5'>FTS_CHILDREN</a></h2>
The  function
returns a pointer to an  structure describing the first entry in a NULL-terminated
linked list of the files in the directory represented by the  structure
most recently returned by  The list is linked through the  field of the
 structure, and is ordered by the user-specified comparison function, if
any. Repeated calls to  will recreate this linked list.  As a special case,
if  has not yet been called for a hierarchy,  will return a pointer to
the files in the logical directory specified to  i.e. the arguments specified
to  Otherwise, if the  structure most recently returned by  is not a directory
being visited in pre-order, or the directory does not contain any files,
 returns  and sets  to zero. If an error occurs,  returns  and sets  appropriately.
 The  structures returned by  may be overwritten after a call to   or 
on the same file hierarchy stream.   may be set to the following value:
  Only the names of the files are needed. The contents of all the fields
in the returned linked list of structures are undefined with the exception
of the  and  fields.  
<h2><a name='sect6' href='#toc6'>FTS_SET</a></h2>
The function  allows the user application to
determine further processing for the file  of the stream  The  function
returns 0 on success, and -1 if an error occurs.  must be set to one of the
following values:   Re-visit the file; any file type may be re-visited. The
next call to  will return the referenced file. The  and  fields of the structure
will be reinitialized at that time, but no other fields will have been
changed. This option is meaningful only for the most recently returned file
from  Normal use is for post-order directory visits, where it causes the
directory to be re-visited (in both pre and post-order) as well as all of
its descendants.  The referenced file must be a symbolic link. If the referenced
file is the one most recently returned by  the next call to  returns the
file with the  and  fields reinitialized to reflect the target of the symbolic
link instead of the symbolic link itself. If the file is one of those most
recently returned by  the  and  fields of the structure, when returned
by  will reflect the target of the symbolic link instead of the symbolic
link itself. In either case, if the target of the symbolic link does not
exist the fields of the returned structure will be unchanged and the  field
will be set to   If the target of the link is a directory, the pre-order
return, followed by the return of all of its descendants, followed by a
post-order return, is done.  No descendants of this file are visited. The
file may be one of those most recently returned by either  or   
<h2><a name='sect7' href='#toc7'>FTS_CLOSE</a></h2>
The
 function closes a file hierarchy stream  and restores the current directory
to the directory from which  was called to open  The  function returns
0 on success, and -1 if an error occurs. 
<h2><a name='sect8' href='#toc8'>ERRORS</a></h2>
The function  may fail and
set  for any of the errors specified for the library functions  and   The
function  may fail and set  for any of the errors specified for the library
functions  and   The functions  and  may fail and set  for any of the errors
specified for the library functions     and   In addition,   and  may fail
and set  as follows:   The options were invalid.  
<h2><a name='sect9' href='#toc9'>SEE ALSO</a></h2>
    
<h2><a name='sect10' href='#toc10'>STANDARDS</a></h2>
The
 utility is expected to be included in a future  revision. <p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>NAME</a></li>
<li><a name='toc1' href='#sect1'>SYNOPSIS</a></li>
<li><a name='toc2' href='#sect2'>DESCRIPTION</a></li>
<li><a name='toc3' href='#sect3'>FTS_OPEN</a></li>
<li><a name='toc4' href='#sect4'>FTS_READ</a></li>
<li><a name='toc5' href='#sect5'>FTS_CHILDREN</a></li>
<li><a name='toc6' href='#sect6'>FTS_SET</a></li>
<li><a name='toc7' href='#sect7'>FTS_CLOSE</a></li>
<li><a name='toc8' href='#sect8'>ERRORS</a></li>
<li><a name='toc9' href='#sect9'>SEE ALSO</a></li>
<li><a name='toc10' href='#sect10'>STANDARDS</a></li>
</ul>
</body>
</html>
