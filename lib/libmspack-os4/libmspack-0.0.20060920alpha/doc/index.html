<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>libmspack: Main Page</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6 -->
<div class="tabs">
  <ul>
    <li id="current"><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<h1>libmspack Documentation</h1>
<p>
<h2><a class="anchor" name="intro">
Introduction</a></h2>
libmspack is a library which provides compressors and decompressors, archivers and dearchivers for Microsoft compression formats.<h2><a class="anchor" name="formats">
Formats supported</a></h2>
The following file formats are supported:<ul>
<li>SZDD files, which use LZSS compression</li><li>KWAJ files, which use LZSS, LZSS+Huffman or deflate compression</li><li>.HLP (MS Help) files, which use LZSS compression</li><li>.CAB (MS Cabinet) files, which use deflate, LZX or Quantum compression</li><li>.CHM (HTML Help) files, which use LZX compression</li><li>.LIT (MS EBook) files, which use LZX compression and DES encryption</li></ul>
<p>
To determine the capabilities of the library, and the binary compatibility version of any particular compressor or decompressor, use the <a class="el" href="mspack_8h.html#2194442b6f887014905c2f59e43213f7">mspack_version()</a> function. The UNIX library interface version is defined as the highest-versioned library component.<h2><a class="anchor" name="starting">
Getting started</a></h2>
The macro <a class="el" href="mspack_8h.html#3a94be2216dd1e835733acb7c4645fca">MSPACK_SYS_SELFTEST()</a> should be used to ensure the library can be used. In particular, it checks if the caller is using 32-bit file I/O when the library is compiled for 64-bit file I/O and vice versa.<p>
If compiled normally, the library includes basic file I/O and memory management functionality using the standard C library. This can be customised and replaced entirely by creating a <a class="el" href="structmspack__system.html">mspack_system</a> structure.<p>
A compressor or decompressor for the required format must be instantiated before it can be used. Each construction function takes one parameter, which is either a pointer to a custom <a class="el" href="structmspack__system.html">mspack_system</a> structure, or NULL to use the default. The instantiation returned, if not NULL, contains function pointers (methods) to work with the given file format.<p>
For compression:<ul>
<li><a class="el" href="mspack_8h.html#a11b092e00e6d4862d134a05b97b9c09">mspack_create_cab_compressor()</a> creates a <a class="el" href="structmscab__compressor.html">mscab_compressor</a></li><li><a class="el" href="mspack_8h.html#749d6b350987be706728e020e875b13f">mspack_create_chm_compressor()</a> creates a <a class="el" href="structmschm__compressor.html">mschm_compressor</a></li><li><a class="el" href="mspack_8h.html#9478967ec3cf95b0a312272d6e78afbe">mspack_create_lit_compressor()</a> creates a <a class="el" href="structmslit__compressor.html">mslit_compressor</a></li><li><a class="el" href="mspack_8h.html#9587b6c3bf2907d496a0c438c7904463">mspack_create_hlp_compressor()</a> creates a <a class="el" href="structmshlp__compressor.html">mshlp_compressor</a></li><li><a class="el" href="mspack_8h.html#00c23794eac4dab60057cc5b84c2a7ea">mspack_create_szdd_compressor()</a> creates a <a class="el" href="structmsszdd__compressor.html">msszdd_compressor</a></li><li><a class="el" href="mspack_8h.html#a214297f2f85b56b2a556bf560dba9d2">mspack_create_kwaj_compressor()</a> creates a <a class="el" href="structmskwaj__compressor.html">mskwaj_compressor</a></li></ul>
<p>
For decompression:<ul>
<li><a class="el" href="mspack_8h.html#9964981ec0e6f49814301101e1708f95">mspack_create_cab_decompressor()</a> creates a <a class="el" href="structmscab__decompressor.html">mscab_decompressor</a></li><li><a class="el" href="mspack_8h.html#5829a2023927ad4dc8bd452f3b294851">mspack_create_chm_decompressor()</a> creates a <a class="el" href="structmschm__decompressor.html">mschm_decompressor</a></li><li><a class="el" href="mspack_8h.html#019e19331c50d80a4d424395671219f2">mspack_create_lit_decompressor()</a> creates a <a class="el" href="structmslit__decompressor.html">mslit_decompressor</a></li><li><a class="el" href="mspack_8h.html#0bd8ff2ddc155f3bf5ee4f47fdde7f4a">mspack_create_hlp_decompressor()</a> creates a <a class="el" href="structmshlp__decompressor.html">mshlp_decompressor</a></li><li><a class="el" href="mspack_8h.html#81ec853a5fcfad25acdfab6bee1cd3cc">mspack_create_szdd_decompressor()</a> creates a <a class="el" href="structmsszdd__decompressor.html">msszdd_decompressor</a></li><li><a class="el" href="mspack_8h.html#beb6430c01e352502c8c5d4f285a2d97">mspack_create_kwaj_decompressor()</a> creates a <a class="el" href="structmskwaj__decompressor.html">mskwaj_decompressor</a></li></ul>
<p>
Once finished working with a format, each kind of compressor/decompressor has its own specific destructor:<ul>
<li><a class="el" href="mspack_8h.html#23263871d8dc8d64830e8ff827d6e32d">mspack_destroy_cab_compressor()</a></li><li><a class="el" href="mspack_8h.html#13e9100ea34b16693cacb92b212ccadc">mspack_destroy_cab_decompressor()</a></li><li><a class="el" href="mspack_8h.html#05c47f6572f3966d9495810332356b94">mspack_destroy_chm_compressor()</a></li><li><a class="el" href="mspack_8h.html#50c0799f5c1a128672c024a05c79cac8">mspack_destroy_chm_decompressor()</a></li><li><a class="el" href="mspack_8h.html#ba0e2b76f4998e914cc96db475e8b598">mspack_destroy_lit_compressor()</a></li><li><a class="el" href="mspack_8h.html#51fdfc5b9786dc914ec083510b11fe9f">mspack_destroy_lit_decompressor()</a></li><li><a class="el" href="mspack_8h.html#5d7d5d89c674847821bb7f270be828c8">mspack_destroy_hlp_compressor()</a></li><li><a class="el" href="mspack_8h.html#1e2dbd38bdcc255d63c43bbad2f7786f">mspack_destroy_hlp_decompressor()</a></li><li><a class="el" href="mspack_8h.html#4053f06c244cab5e880241ecd0a8a64f">mspack_destroy_szdd_compressor()</a></li><li><a class="el" href="mspack_8h.html#af070981f5d3a3a6bb430070cc2b3e73">mspack_destroy_szdd_decompressor()</a></li><li><a class="el" href="mspack_8h.html#ca7c302fbca1abd91c6d00df191e221c">mspack_destroy_kwaj_compressor()</a></li><li><a class="el" href="mspack_8h.html#e1d6e6754279bad79e73af8fab761f50">mspack_destroy_kwaj_decompressor()</a></li></ul>
<p>
Destroying a compressor or decompressor does not destroy any objects, structures or handles that have been created using that compressor or decompressor. Ensure that everything created or opened is destroyed or closed before compressor/decompressor is itself destroyed.<h2><a class="anchor" name="errors">
Error codes</a></h2>
All compressors and decompressors use the same set of error codes. Most methods return an error code directly. For methods which do not return error codes directly, the error code can be obtained with the last_error() method.<p>
<ul>
<li><a class="el" href="mspack_8h.html#30476cfa36ddee80950e715591cf8832">MSPACK_ERR_OK</a> is used to indicate success. This error code is defined as zero, all other code are non-zero.</li><li><a class="el" href="mspack_8h.html#a55388352a27b45993bc8f1399218a75">MSPACK_ERR_ARGS</a> indicates that a method was called with inappropriate arguments.</li><li><a class="el" href="mspack_8h.html#55cd1d9f2831f4568dc78a712548ae2d">MSPACK_ERR_OPEN</a> indicates that <a class="el" href="structmspack__system.html#7885678bf152f13adad6f6fec85f1653">mspack_system::open()</a> failed.</li><li><a class="el" href="mspack_8h.html#e3340b3e95a75e8a5b260fe27fdcfc80">MSPACK_ERR_READ</a> indicates that <a class="el" href="structmspack__system.html#c33dcc54409a7d5da9be475b3938101e">mspack_system::read()</a> failed.</li><li><a class="el" href="mspack_8h.html#6c492a68e998d1b01247b76e2a87d9e4">MSPACK_ERR_WRITE</a> indicates that <a class="el" href="structmspack__system.html#c57fb5944e7726abe2272822fa07a30f">mspack_system::write()</a> failed.</li><li><a class="el" href="mspack_8h.html#0ac9fe1b978784c7cadb221845bb8fb9">MSPACK_ERR_SEEK</a> indicates that <a class="el" href="structmspack__system.html#86ceffde52284d3a57d5d555d7484a03">mspack_system::seek()</a> failed.</li><li><a class="el" href="mspack_8h.html#f875f31a569da5be5402ad63d07bf63f">MSPACK_ERR_NOMEMORY</a> indicates that <a class="el" href="structmspack__system.html#c70dd55eb6eca7a390e5ae143525f36a">mspack_system::alloc()</a> failed.</li><li><a class="el" href="mspack_8h.html#95c571fa9e656de9f0a2976e5715706e">MSPACK_ERR_SIGNATURE</a> indicates that the file being read does not have the correct "signature". It is probably not a valid file for whatever format is being read.</li><li><a class="el" href="mspack_8h.html#b8d3d7e4d3000333be6e500874bcee98">MSPACK_ERR_DATAFORMAT</a> indicates that the file being used or read is corrupt.</li><li><a class="el" href="mspack_8h.html#94655174946aa06763341837d5fe8720">MSPACK_ERR_CHECKSUM</a> indicates that a data checksum has failed.</li><li><a class="el" href="mspack_8h.html#2d92886c9c02dd2ba2aa45fc36f8a477">MSPACK_ERR_CRUNCH</a> indicates an error occured during compression.</li><li><a class="el" href="mspack_8h.html#d2de97b7f91325169ca1646d123b1509">MSPACK_ERR_DECRUNCH</a> indicates an error occured during decompression. </li></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed Sep 20 22:45:37 2006 for libmspack by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
</body>
</html>
