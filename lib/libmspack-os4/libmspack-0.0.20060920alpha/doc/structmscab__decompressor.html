<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>libmspack: mscab_decompressor Struct Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li id="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
  </ul></div>
<h1>mscab_decompressor Struct Reference</h1><!-- doxytag: class="mscab_decompressor" -->A decompressor for .CAB (Microsoft Cabinet) files.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="mspack_8h-source.html">mspack.h</a>&gt;</code>
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Fields</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structmscabd__cabinet.html">mscabd_cabinet</a> *(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmscab__decompressor.html#495f925c3cc97bcdf65c644711cddf66">open</a> )(struct <a class="el" href="structmscab__decompressor.html">mscab_decompressor</a> *self, char *filename)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Opens a cabinet file and reads its contents.  <a href="#495f925c3cc97bcdf65c644711cddf66"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmscab__decompressor.html#b469fdadc4bd9a58574427bcd0138a01">close</a> )(struct <a class="el" href="structmscab__decompressor.html">mscab_decompressor</a> *self, struct <a class="el" href="structmscabd__cabinet.html">mscabd_cabinet</a> *cab)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Closes a previously opened cabinet or cabinet set.  <a href="#b469fdadc4bd9a58574427bcd0138a01"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structmscabd__cabinet.html">mscabd_cabinet</a> *(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmscab__decompressor.html#bf79b87610cf778e97b38e325ae61dd7">search</a> )(struct <a class="el" href="structmscab__decompressor.html">mscab_decompressor</a> *self, char *filename)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Searches a regular file for embedded cabinets.  <a href="#bf79b87610cf778e97b38e325ae61dd7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmscab__decompressor.html#00eb7059f80ef8bed33f8bd410c9d665">append</a> )(struct <a class="el" href="structmscab__decompressor.html">mscab_decompressor</a> *self, struct <a class="el" href="structmscabd__cabinet.html">mscabd_cabinet</a> *cab, struct <a class="el" href="structmscabd__cabinet.html">mscabd_cabinet</a> *nextcab)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Appends one <a class="el" href="structmscabd__cabinet.html">mscabd_cabinet</a> to another, forming or extending a cabinet set.  <a href="#00eb7059f80ef8bed33f8bd410c9d665"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmscab__decompressor.html#8cd61b0d08747508291a9e1e6c753ec7">prepend</a> )(struct <a class="el" href="structmscab__decompressor.html">mscab_decompressor</a> *self, struct <a class="el" href="structmscabd__cabinet.html">mscabd_cabinet</a> *cab, struct <a class="el" href="structmscabd__cabinet.html">mscabd_cabinet</a> *prevcab)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prepends one <a class="el" href="structmscabd__cabinet.html">mscabd_cabinet</a> to another, forming or extending a cabinet set.  <a href="#8cd61b0d08747508291a9e1e6c753ec7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmscab__decompressor.html#821c6cf1fa3a5659b69a1cf204252fb2">extract</a> )(struct <a class="el" href="structmscab__decompressor.html">mscab_decompressor</a> *self, struct <a class="el" href="structmscabd__file.html">mscabd_file</a> *file, char *filename)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Extracts a file from a cabinet or cabinet set.  <a href="#821c6cf1fa3a5659b69a1cf204252fb2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmscab__decompressor.html#e818d71d1b62101c063edefcaa43fb08">set_param</a> )(struct <a class="el" href="structmscab__decompressor.html">mscab_decompressor</a> *self, int param, int value)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets a CAB decompression engine parameter.  <a href="#e818d71d1b62101c063edefcaa43fb08"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmscab__decompressor.html#52b374b473d3144407ae2ca0e704a6a5">last_error</a> )(struct <a class="el" href="structmscab__decompressor.html">mscab_decompressor</a> *self)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the error code set by the most recently called method.  <a href="#52b374b473d3144407ae2ca0e704a6a5"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
A decompressor for .CAB (Microsoft Cabinet) files. 
<p>
All fields are READ ONLY.<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="mspack_8h.html#9964981ec0e6f49814301101e1708f95">mspack_create_cab_decompressor()</a>, <a class="el" href="mspack_8h.html#13e9100ea34b16693cacb92b212ccadc">mspack_destroy_cab_decompressor()</a> </dd></dl>

<p>
<hr><h2>Field Documentation</h2>
<a class="anchor" name="00eb7059f80ef8bed33f8bd410c9d665"></a><!-- doxytag: member="mscab_decompressor::append" ref="00eb7059f80ef8bed33f8bd410c9d665" args=")(struct mscab_decompressor *self, struct mscabd_cabinet *cab, struct mscabd_cabinet *nextcab)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int(* <a class="el" href="structmscab__decompressor.html#00eb7059f80ef8bed33f8bd410c9d665">mscab_decompressor::append</a>)(struct <a class="el" href="structmscab__decompressor.html">mscab_decompressor</a> *self, struct <a class="el" href="structmscabd__cabinet.html">mscabd_cabinet</a> *cab, struct <a class="el" href="structmscabd__cabinet.html">mscabd_cabinet</a> *nextcab)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Appends one <a class="el" href="structmscabd__cabinet.html">mscabd_cabinet</a> to another, forming or extending a cabinet set. 
<p>
This will attempt to append one cabinet to another such that <code>(cab-&gt;nextcab == nextcab) &amp;&amp; (nextcab-&gt;prevcab == cab)</code> and any folders split between the two cabinets are merged.<p>
The cabinets MUST be part of a cabinet set -- a cabinet set is a cabinet that spans more than one physical cabinet file on disk -- and must be appropriately matched.<p>
It can be determined if a cabinet has further parts to load by examining the <a class="el" href="structmscabd__cabinet.html#6c5b8d1773e14b12c70d64d5b8867b01">mscabd_cabinet::flags</a> field:<p>
<ul>
<li>if <code>(flags &amp; MSCAB_HDR_PREVCAB)</code> is non-zero, there is a predecessor cabinet to <a class="el" href="structmscab__decompressor.html#495f925c3cc97bcdf65c644711cddf66">open()</a> and <a class="el" href="structmscab__decompressor.html#8cd61b0d08747508291a9e1e6c753ec7">prepend()</a>. Its MS-DOS case-insensitive filename is <a class="el" href="structmscabd__cabinet.html#1f595a7655daa62ba709ecf40a0cb13c">mscabd_cabinet::prevname</a></li><li>if <code>(flags &amp; MSCAB_HDR_NEXTCAB)</code> is non-zero, there is a successor cabinet to <a class="el" href="structmscab__decompressor.html#495f925c3cc97bcdf65c644711cddf66">open()</a> and <a class="el" href="structmscab__decompressor.html#00eb7059f80ef8bed33f8bd410c9d665">append()</a>. Its MS-DOS case-insensitive filename is <a class="el" href="structmscabd__cabinet.html#be1b8a6ccc9eeeebf2a454bfbe2d4a1a">mscabd_cabinet::nextname</a></li></ul>
<p>
If the cabinets do not match, an error code will be returned. Neither cabinet has been altered, and both should be closed seperately.<p>
Files and folders in a cabinet set are a single entity. All cabinets in a set use the same file list, which is updated as cabinets in the set are added. All pointers to <a class="el" href="structmscabd__folder.html">mscabd_folder</a> and <a class="el" href="structmscabd__file.html">mscabd_file</a> structures in either cabinet must be discarded and re-obtained after merging.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>self</em>&nbsp;</td><td>a self-referential pointer to the <a class="el" href="structmscab__decompressor.html">mscab_decompressor</a> instance being called </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cab</em>&nbsp;</td><td>the cabinet which will be appended to, predecessor of nextcab </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nextcab</em>&nbsp;</td><td>the cabinet which will be appended, successor of cab </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>an error code, or MSPACK_ERR_OK if successful </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="structmscab__decompressor.html#8cd61b0d08747508291a9e1e6c753ec7">prepend()</a>, <a class="el" href="structmscab__decompressor.html#495f925c3cc97bcdf65c644711cddf66">open()</a>, <a class="el" href="structmscab__decompressor.html#b469fdadc4bd9a58574427bcd0138a01">close()</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="b469fdadc4bd9a58574427bcd0138a01"></a><!-- doxytag: member="mscab_decompressor::close" ref="b469fdadc4bd9a58574427bcd0138a01" args=")(struct mscab_decompressor *self, struct mscabd_cabinet *cab)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void(* <a class="el" href="structmscab__decompressor.html#b469fdadc4bd9a58574427bcd0138a01">mscab_decompressor::close</a>)(struct <a class="el" href="structmscab__decompressor.html">mscab_decompressor</a> *self, struct <a class="el" href="structmscabd__cabinet.html">mscabd_cabinet</a> *cab)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Closes a previously opened cabinet or cabinet set. 
<p>
This closes a cabinet, all cabinets associated with it via the <a class="el" href="structmscabd__cabinet.html#94d02cd4adb598945f544d77362d1658">mscabd_cabinet::next</a>, <a class="el" href="structmscabd__cabinet.html#d915066d3781892754b6cfd87b08d378">mscabd_cabinet::prevcab</a> and <a class="el" href="structmscabd__cabinet.html#e3ab25aa910ea50dca515659848ab5dc">mscabd_cabinet::nextcab</a> pointers, and all folders and files. All memory used by these entities is freed.<p>
The cabinet pointer is now invalid and cannot be used again. All <a class="el" href="structmscabd__folder.html">mscabd_folder</a> and <a class="el" href="structmscabd__file.html">mscabd_file</a> pointers from that cabinet or cabinet set are also now invalid, and cannot be used again.<p>
If the cabinet pointer given was created using <a class="el" href="structmscab__decompressor.html#bf79b87610cf778e97b38e325ae61dd7">search()</a>, it MUST be the cabinet pointer returned by <a class="el" href="structmscab__decompressor.html#bf79b87610cf778e97b38e325ae61dd7">search()</a> and not one of the later cabinet pointers further along the <a class="el" href="structmscabd__cabinet.html#94d02cd4adb598945f544d77362d1658">mscabd_cabinet::next</a> chain.<p>
If extra cabinets have been added using <a class="el" href="structmscab__decompressor.html#00eb7059f80ef8bed33f8bd410c9d665">append()</a> or <a class="el" href="structmscab__decompressor.html#8cd61b0d08747508291a9e1e6c753ec7">prepend()</a>, these will all be freed, even if the cabinet pointer given is not the first cabinet in the set. Do NOT <a class="el" href="structmscab__decompressor.html#b469fdadc4bd9a58574427bcd0138a01">close()</a> more than one cabinet in the set.<p>
The <a class="el" href="structmscabd__cabinet.html#71fe6d86cac86b54afbfb5f2dab213bf">mscabd_cabinet::filename</a> is not freed by the library, as it is not allocated by the library. The caller should free this itself if necessary, before it is lost forever.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>self</em>&nbsp;</td><td>a self-referential pointer to the <a class="el" href="structmscab__decompressor.html">mscab_decompressor</a> instance being called </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cab</em>&nbsp;</td><td>the cabinet to close </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="structmscab__decompressor.html#495f925c3cc97bcdf65c644711cddf66">open()</a>, <a class="el" href="structmscab__decompressor.html#bf79b87610cf778e97b38e325ae61dd7">search()</a>, <a class="el" href="structmscab__decompressor.html#00eb7059f80ef8bed33f8bd410c9d665">append()</a>, <a class="el" href="structmscab__decompressor.html#8cd61b0d08747508291a9e1e6c753ec7">prepend()</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="821c6cf1fa3a5659b69a1cf204252fb2"></a><!-- doxytag: member="mscab_decompressor::extract" ref="821c6cf1fa3a5659b69a1cf204252fb2" args=")(struct mscab_decompressor *self, struct mscabd_file *file, char *filename)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int(* <a class="el" href="structmscab__decompressor.html#821c6cf1fa3a5659b69a1cf204252fb2">mscab_decompressor::extract</a>)(struct <a class="el" href="structmscab__decompressor.html">mscab_decompressor</a> *self, struct <a class="el" href="structmscabd__file.html">mscabd_file</a> *file, char *filename)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Extracts a file from a cabinet or cabinet set. 
<p>
This extracts a compressed file in a cabinet and writes it to the given filename.<p>
The MS-DOS filename of the file, <a class="el" href="structmscabd__file.html#181b45655523f55ed114b51249d305f8">mscabd_file::filename</a>, is NOT USED by <a class="el" href="structmscab__decompressor.html#821c6cf1fa3a5659b69a1cf204252fb2">extract()</a>. The caller must examine this MS-DOS filename, copy and change it as necessary, create directories as necessary, and provide the correct filename as a parameter, which will be passed unchanged to the decompressor's <a class="el" href="structmspack__system.html#7885678bf152f13adad6f6fec85f1653">mspack_system::open()</a><p>
If the file belongs to a split folder in a multi-part cabinet set, and not enough parts of the cabinet set have been loaded and appended or prepended, an error will be returned immediately.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>self</em>&nbsp;</td><td>a self-referential pointer to the <a class="el" href="structmscab__decompressor.html">mscab_decompressor</a> instance being called </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>file</em>&nbsp;</td><td>the file to be decompressed </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>the filename of the file being written to </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>an error code, or MSPACK_ERR_OK if successful </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="52b374b473d3144407ae2ca0e704a6a5"></a><!-- doxytag: member="mscab_decompressor::last_error" ref="52b374b473d3144407ae2ca0e704a6a5" args=")(struct mscab_decompressor *self)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int(* <a class="el" href="structmscab__decompressor.html#52b374b473d3144407ae2ca0e704a6a5">mscab_decompressor::last_error</a>)(struct <a class="el" href="structmscab__decompressor.html">mscab_decompressor</a> *self)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the error code set by the most recently called method. 
<p>
This is useful for <a class="el" href="structmscab__decompressor.html#495f925c3cc97bcdf65c644711cddf66">open()</a> and <a class="el" href="structmscab__decompressor.html#bf79b87610cf778e97b38e325ae61dd7">search()</a>, which do not return an error code directly.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>self</em>&nbsp;</td><td>a self-referential pointer to the <a class="el" href="structmscab__decompressor.html">mscab_decompressor</a> instance being called </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the most recent error code </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="structmscab__decompressor.html#495f925c3cc97bcdf65c644711cddf66">open()</a>, <a class="el" href="structmscab__decompressor.html#bf79b87610cf778e97b38e325ae61dd7">search()</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="495f925c3cc97bcdf65c644711cddf66"></a><!-- doxytag: member="mscab_decompressor::open" ref="495f925c3cc97bcdf65c644711cddf66" args=")(struct mscab_decompressor *self, char *filename)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">struct <a class="el" href="structmscabd__cabinet.html">mscabd_cabinet</a>*(* <a class="el" href="structmscab__decompressor.html#495f925c3cc97bcdf65c644711cddf66">mscab_decompressor::open</a>)(struct <a class="el" href="structmscab__decompressor.html">mscab_decompressor</a> *self, char *filename)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Opens a cabinet file and reads its contents. 
<p>
If the file opened is a valid cabinet file, all headers will be read and a <a class="el" href="structmscabd__cabinet.html">mscabd_cabinet</a> structure will be returned, with a full list of folders and files.<p>
In the case of an error occuring, NULL is returned and the error code is available from <a class="el" href="structmscab__decompressor.html#52b374b473d3144407ae2ca0e704a6a5">last_error()</a>.<p>
The filename pointer should be considered "in use" until <a class="el" href="structmscab__decompressor.html#b469fdadc4bd9a58574427bcd0138a01">close()</a> is called on the cabinet.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>self</em>&nbsp;</td><td>a self-referential pointer to the <a class="el" href="structmscab__decompressor.html">mscab_decompressor</a> instance being called </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>the filename of the cabinet file. This is passed directly to <a class="el" href="structmspack__system.html#7885678bf152f13adad6f6fec85f1653">mspack_system::open()</a>. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>a pointer to a <a class="el" href="structmscabd__cabinet.html">mscabd_cabinet</a> structure, or NULL on failure </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="structmscab__decompressor.html#b469fdadc4bd9a58574427bcd0138a01">close()</a>, <a class="el" href="structmscab__decompressor.html#bf79b87610cf778e97b38e325ae61dd7">search()</a>, <a class="el" href="structmscab__decompressor.html#52b374b473d3144407ae2ca0e704a6a5">last_error()</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="8cd61b0d08747508291a9e1e6c753ec7"></a><!-- doxytag: member="mscab_decompressor::prepend" ref="8cd61b0d08747508291a9e1e6c753ec7" args=")(struct mscab_decompressor *self, struct mscabd_cabinet *cab, struct mscabd_cabinet *prevcab)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int(* <a class="el" href="structmscab__decompressor.html#8cd61b0d08747508291a9e1e6c753ec7">mscab_decompressor::prepend</a>)(struct <a class="el" href="structmscab__decompressor.html">mscab_decompressor</a> *self, struct <a class="el" href="structmscabd__cabinet.html">mscabd_cabinet</a> *cab, struct <a class="el" href="structmscabd__cabinet.html">mscabd_cabinet</a> *prevcab)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Prepends one <a class="el" href="structmscabd__cabinet.html">mscabd_cabinet</a> to another, forming or extending a cabinet set. 
<p>
This will attempt to prepend one cabinet to another, such that <code>(cab-&gt;prevcab == prevcab) &amp;&amp; (prevcab-&gt;nextcab == cab)</code>. In all other respects, it is identical to <a class="el" href="structmscab__decompressor.html#00eb7059f80ef8bed33f8bd410c9d665">append()</a>. See <a class="el" href="structmscab__decompressor.html#00eb7059f80ef8bed33f8bd410c9d665">append()</a> for the full documentation.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>self</em>&nbsp;</td><td>a self-referential pointer to the <a class="el" href="structmscab__decompressor.html">mscab_decompressor</a> instance being called </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cab</em>&nbsp;</td><td>the cabinet which will be prepended to, successor of prevcab </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>prevcab</em>&nbsp;</td><td>the cabinet which will be prepended, predecessor of cab </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>an error code, or MSPACK_ERR_OK if successful </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="structmscab__decompressor.html#00eb7059f80ef8bed33f8bd410c9d665">append()</a>, <a class="el" href="structmscab__decompressor.html#495f925c3cc97bcdf65c644711cddf66">open()</a>, <a class="el" href="structmscab__decompressor.html#b469fdadc4bd9a58574427bcd0138a01">close()</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="bf79b87610cf778e97b38e325ae61dd7"></a><!-- doxytag: member="mscab_decompressor::search" ref="bf79b87610cf778e97b38e325ae61dd7" args=")(struct mscab_decompressor *self, char *filename)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">struct <a class="el" href="structmscabd__cabinet.html">mscabd_cabinet</a>*(* <a class="el" href="structmscab__decompressor.html#bf79b87610cf778e97b38e325ae61dd7">mscab_decompressor::search</a>)(struct <a class="el" href="structmscab__decompressor.html">mscab_decompressor</a> *self, char *filename)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Searches a regular file for embedded cabinets. 
<p>
This opens a normal file with the given filename and will search the entire file for embedded cabinet files<p>
If any cabinets are found, the equivalent of <a class="el" href="structmscab__decompressor.html#495f925c3cc97bcdf65c644711cddf66">open()</a> is called on each potential cabinet file at the offset it was found. All successfully <a class="el" href="structmscab__decompressor.html#495f925c3cc97bcdf65c644711cddf66">open()</a>ed cabinets are kept in a list.<p>
The first cabinet found will be returned directly as the result of this method. Any further cabinets found will be chained in a list using the <a class="el" href="structmscabd__cabinet.html#94d02cd4adb598945f544d77362d1658">mscabd_cabinet::next</a> field.<p>
In the case of an error occuring anywhere other than the simulated <a class="el" href="structmscab__decompressor.html#495f925c3cc97bcdf65c644711cddf66">open()</a>, NULL is returned and the error code is available from <a class="el" href="structmscab__decompressor.html#52b374b473d3144407ae2ca0e704a6a5">last_error()</a>.<p>
If no error occurs, but no cabinets can be found in the file, NULL is returned and <a class="el" href="structmscab__decompressor.html#52b374b473d3144407ae2ca0e704a6a5">last_error()</a> returns MSPACK_ERR_OK.<p>
The filename pointer should be considered in use until <a class="el" href="structmscab__decompressor.html#b469fdadc4bd9a58574427bcd0138a01">close()</a> is called on the cabinet.<p>
<a class="el" href="structmscab__decompressor.html#b469fdadc4bd9a58574427bcd0138a01">close()</a> should only be called on the result of <a class="el" href="structmscab__decompressor.html#bf79b87610cf778e97b38e325ae61dd7">search()</a>, not on any subsequent cabinets in the <a class="el" href="structmscabd__cabinet.html#94d02cd4adb598945f544d77362d1658">mscabd_cabinet::next</a> chain.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>self</em>&nbsp;</td><td>a self-referential pointer to the <a class="el" href="structmscab__decompressor.html">mscab_decompressor</a> instance being called </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>the filename of the file to search for cabinets. This is passed directly to <a class="el" href="structmspack__system.html#7885678bf152f13adad6f6fec85f1653">mspack_system::open()</a>. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>a pointer to a <a class="el" href="structmscabd__cabinet.html">mscabd_cabinet</a> structure, or NULL </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="structmscab__decompressor.html#b469fdadc4bd9a58574427bcd0138a01">close()</a>, <a class="el" href="structmscab__decompressor.html#495f925c3cc97bcdf65c644711cddf66">open()</a>, <a class="el" href="structmscab__decompressor.html#52b374b473d3144407ae2ca0e704a6a5">last_error()</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="e818d71d1b62101c063edefcaa43fb08"></a><!-- doxytag: member="mscab_decompressor::set_param" ref="e818d71d1b62101c063edefcaa43fb08" args=")(struct mscab_decompressor *self, int param, int value)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int(* <a class="el" href="structmscab__decompressor.html#e818d71d1b62101c063edefcaa43fb08">mscab_decompressor::set_param</a>)(struct <a class="el" href="structmscab__decompressor.html">mscab_decompressor</a> *self, int param, int value)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets a CAB decompression engine parameter. 
<p>
The following parameters are defined:<ul>
<li><a class="el" href="mspack_8h.html#3888f5036eae320e691f5de290293a9f">MSCABD_PARAM_SEARCHBUF</a>: How many bytes should be allocated as a buffer when using <a class="el" href="structmscab__decompressor.html#bf79b87610cf778e97b38e325ae61dd7">search()</a>? The minimum value is 4. The default value is 32768.</li><li><a class="el" href="mspack_8h.html#852a791d880d602989063128d4ce33d1">MSCABD_PARAM_FIXMSZIP</a>: If non-zero, <a class="el" href="structmscab__decompressor.html#821c6cf1fa3a5659b69a1cf204252fb2">extract()</a> will ignore bad checksums and recover from decompression errors in MS-ZIP compressed folders. The default value is 0 (don't recover).</li><li><a class="el" href="mspack_8h.html#197cc07b45645f807bd400ed576b2968">MSCABD_PARAM_DECOMPBUF</a>: How many bytes should be used as an input bit buffer by decompressors? The minimum value is 4. The default value is 4096.</li></ul>
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>self</em>&nbsp;</td><td>a self-referential pointer to the <a class="el" href="structmscab__decompressor.html">mscab_decompressor</a> instance being called </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>param</em>&nbsp;</td><td>the parameter to set </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>value</em>&nbsp;</td><td>the value to set the parameter to </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>MSPACK_ERR_OK if all is OK, or MSPACK_ERR_ARGS if there is a problem with either parameter or value. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="structmscab__decompressor.html#bf79b87610cf778e97b38e325ae61dd7">search()</a>, <a class="el" href="structmscab__decompressor.html#821c6cf1fa3a5659b69a1cf204252fb2">extract()</a> </dd></dl>
    </td>
  </tr>
</table>
<hr>The documentation for this struct was generated from the following file:<ul>
<li>/home/kyz/devel/libmspack/libmspack/mspack/<a class="el" href="mspack_8h-source.html">mspack.h</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed Sep 20 22:45:37 2006 for libmspack by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
</body>
</html>
