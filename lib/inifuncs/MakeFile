####################################################################
#
#          gcc MAKEFILE FOR IniFuncsPPC.o targets
#
####################################################################
#
#
CC           = GCC:bin/gcc
#
CFLAGS       = -c -ISDK:Local/Include
#
CCPLUS       = GCC:bin/g++
#
CPLUSFLAGS   = -c -ISDK:Local/Include
#
DBGFLAGS     = -c -ggdb -gdwarf-2 -ISDK:Local/Include
#
DBGPLUSFLAGS = -c -ggdb -gdwarf-2 -ISDK:Local/Include
#
MAKE         = SDK:c/Make
#
LIBS         = -lm -lstringfuncs -lamiga -lauto
#
GLOB         = GlobalObjects/CommonFuncsPPC.o
#
GLOB2        = GlobalObjects/IniFuncsPPCDBG.o
#
clean :
	Delete *.o QUIET
#
all   :
	$(MAKE) IniFuncsPPC.o
	$(MAKE) IniFuncsPPCDBG      ## Update the header files as well:
	$(MAKE) IniFuncsPlusPPC.o
	$(MAKE) IniFuncsPlusPPCDBG      ## Update the header files as well:
	COPY  IniFuncs.h       TO CPGM:GlobalObjects/IniFuncs.h
	COPY  IniFuncs.h       TO SDK:Local/Include/IniFuncs.h
	COPY  IniFuncs.hpp     TO CPGM:GlobalObjects/IniFuncs.hpp
	COPY  IniFuncsLocale.h TO CPGM:GlobalObjects/IniFuncsLocale.h
#
# -------------------- Final PPC target: -------------------------------
#
IniFuncsPPC.o : IniFuncs.c IniFuncs.h IniFuncsLocale.h
	EnsureAscii $<     RAM:$<
	Copy        RAM:$< $<
	Delete      RAM:$<
	$(CC) $(CFLAGS) -o $@ $<
	Copy $@ TO CPGM:GlobalObjects/$@
#
IniFuncsPlusPPC.o : IniFuncs.cpp IniFuncs.hpp IniFuncsLocale.h
	EnsureAscii $<     RAM:$<
	Copy        RAM:$< $<
	Delete      RAM:$<
	$(CCPLUS) $(CPLUSFLAGS) -o $@ $<
	Copy $@ TO CPGM:GlobalObjects/$@
#
#IniFuncs.guide : IniFuncs.c IniFuncs.h
#	RoboDoc IniFuncs.c IniFuncs.guide -ts 3 SORT GUIDE TOC
#
IniFuncsLocale.h: inifuncs.cd
	CatComp $< CFILE  $@ NOCODE NOARRAY NOBLOCK
	CatComp $< CTFILE IniFuncs.ct
#   
# -------------- Archiving: ---------------------------------------
#
ACMD = LhArc
#
OPTS = -x -a 
#
listIniFuncs: IniFuncs.lha
	$(ACMD) list $< >IniFuncs.list
#
ARCS = IniFuncs.c IniFuncsPPC.o IniFuncs.h IniFuncs.guide IniFuncs.cd IniFuncsLocale.h inifuncs.ct IniFuncs.readme
#
IniFuncs.lha : $(ARCS)
	$(ACMD) $(OPTS) add $@ IniFuncs.readme
	$(ACMD) $(OPTS) add $@ IniFuncs.guide
	$(ACMD) $(OPTS) add $@ IniFuncs.guide.info
	$(ACMD) $(OPTS) add $@ IniFuncs.c
	$(ACMD) $(OPTS) add $@ IniFuncsPPC.o
	$(ACMD) $(OPTS) add $@ IniFuncs.cd
	$(ACMD) $(OPTS) add $@ IniFuncs.ct
	$(ACMD) $(OPTS) add $@ IniFuncs.h
	$(ACMD) $(OPTS) add $@ IniFuncsLocale.h
	$(ACMD) $(OPTS) add $@ CPGM:$(GLOB)
	$(ACMD) $(OPTS) add $@ CPGM:GlobalObjects/CommonFuncs.h
	$(ACMD) $(OPTS) add $@ CPGM:GlobalObjects/CommonFuncs.guide
	$(ACMD) $(OPTS) add $@ Test.ini
	$(ACMD) $(OPTS) add $@ MakeFile
#
#
# -------------------- DEBUG-stuff: --------------------------------------
#
IniFuncsPPCDBG :  IniFuncsPPCDBG.o
	$(CC) $< CPGM:$(GLOB) -o $@ $(LIBS)
#
#  CPR IniFuncsDBG Test.ini >TestResults
#
IniFuncsPPCDBG.o : IniFuncs.c IniFuncs.h IniFuncsLocale.h
	$(CC) $(DBGFLAGS) -o $@ IniFuncs.c
#
IniTesterPPCDBG :  IniTesterPPCDBG.o IniFuncsPPCDBG.o
	$(CC) CPGM:$(GLOB) IniTesterPPCDBG.o IniFuncsPPCDBG.o -o $@ $(LIBS) -lnet -lz
#
IniTesterLocale.h: initester.cd
	CatComp $< CFILE  $@ NOCODE NOARRAY NOBLOCK
	CatComp $< CTFILE IniTester.ct
#   
IniTesterPPCDBG.o : IniTester.c IniTesterLocale.h
	EnsureAscii $<     RAM:$<
	Copy        RAM:$< $<
	Delete      RAM:$<
	$(CC) $(DBGFLAGS) -o $@ $<
#
IniFuncsPlusPPCDBG :  IniFuncsPlusPPCDBG.o
	$(CCPLUS) $< CPGM:$(GLOB) -o $@ $(LIBS)
#
#  CPR IniFuncsDBG Test.ini >TestResults
#
IniFuncsPlusPPCDBG.o : IniFuncs.cpp IniFuncs.hpp IniFuncsLocale.h
	$(CCPLUS) $(DBGPLUSFLAGS) -o $@ IniFuncs.cpp
#

