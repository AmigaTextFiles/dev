<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>UniSupport Lib / UniConvertToUTF8()</title>
<meta name="author" content="J.v.d.Loo">
<meta name="description" content="AmigaOS and MorphOS Static Library">
<!-- This file was automatically created using "Templater", Templater (C) 2007 J.v.d.Loo -->
</head>
<body background="image/bg_big.png">
<table align="center" border="1" cellpadding="4" cellspacing="0" width="800">
  <tbody>
    <tr>
      <td><table border="0" cellpadding="4" cellspacing="0" width="100%">
          <tbody>
            <tr>
              <td width="50%"><b>UniSupp/UniConvertToUTF8</b></td>
              <td align="right" width="50%"><b>UniSupp/UniConvertToUTF8</b></td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
    <tr>
      <td><table border="0" cellpadding="4" cellspacing="0" width="100%">
          <tbody>
            <tr>
              <td width="2%"></td>
              <td width="98%"><b>NAME</b><br></td>
            </tr>
          </tbody>
        </table>
        <table border="0" cellpadding="4" cellspacing="0" width="100%">
          <tbody>
            <tr>
              <td width="5%"></td>
              <td width="95%">UniConvertToUTF8</td>
            </tr>
          </tbody>
        </table></td>
    </tr>
    <tr>
      <td><table border="0" cellpadding="4" cellspacing="0" width="100%">
          <tbody>
            <tr>
              <td width="2%"></td>
              <td width="98%"><b>SYNOPSIS</b><br></td>
            </tr>
          </tbody>
        </table>
        <table border="0" cellpadding="4" cellspacing="0" width="100%">
          <tbody>
            <tr>
              <td width="5%"></td>
              <td width="95%">BOOL UniConvertToUTF8( void *src, ULONG inlength, ULONG iana_id, ULONG encoding, TEXT **dest, ULONG *outlen, ULONG *cps)</td>
            </tr>
          </tbody>
        </table></td>
    </tr>
    <tr>
      <td><table border="0" cellpadding="4" cellspacing="0" width="100%">
          <tbody>
            <tr>
              <td width="2%"></td>
              <td width="98%"><b>FUNCTION</b><br></td>
            </tr>
          </tbody>
        </table>
        <table border="0" cellpadding="4" cellspacing="0" width="100%">
          <tbody>
            <tr>
              <td width="5%"></td>
              <td width="95%">UniConvertToUTF8() converts any type of plain text to UTF-8.<br>
               In case this text is already UTF-8 encoded and you receive successive data packets (i.e. it's a stream object) UniConvertToUTF8() ensures that the last multibyte sequence ends on a valid boundary (<b>outlen</b> differs to <b>inlength</b> in this special case).</td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
    <tr>
      <td><table border="0" cellpadding="4" cellspacing="0" width="100%">
          <tbody>
            <tr>
              <td width="2%"></td>
              <td width="98%"><b>INPUTS</b><br></td>
            </tr>
          </tbody>
        </table>
        <table border="0" cellpadding="4" cellspacing="0" width="100%">
          <tbody>
            <tr>
              <td width="5%"></td>
              <td width="95%"> <b>src</b> (POINTER) is the memory location where the text starts.<br>
              <b>inlength</b> is the size in bytes of <b>src</b> (amount bytes <b>src</b> is made of).<br>
              <b>iana_id</b> is one of the IANA-IDs that specifies the type of singlebyte character encoding scheme, i.e. you can specify what kind of encoding scheme was used to encode the input string - if none is set, IANA_ISO_8859_1 is assumed. For OS4 you should specify IANA_ISO_8859_15 since it is default here.<br>
               &nbsp; &nbsp; &nbsp; &nbsp; <b>WARNING</b> If UTF8_GUESSED is returned by UniCheckEncoding() and setting an IANA ID, it means that the input data will be interpreted as singlebyte character encoding scheme and not as UTF-8 encoded! With that you force UniConvertToUTF8() to ignore the result of UniCheckEncoding()!<br>
              <b>encoding</b> is the unmodified result of UniCheckEncoding()<br>
              <b>dest</b> is a pointer to a 32-bit variable that contains after successful transcoding the memory location where the UTF-8 encoded texts can be found.<br>
              <b>outlen</b> is a pointer to a 32-bit variable that informs how many bytes <b>dest</b> contains.<br>
              <b>cps</b> is a pointer to a 32-bit variable that informs how many code points (equal to number of UTF-8 multibyte sequences) <b>dest</b> contains.</td>
            </tr>
          </tbody>
        </table></td>
    </tr>
    <tr>
      <td><table border="0" cellpadding="4" cellspacing="0" width="100%">
          <tbody>
            <tr>
              <td width="2%"></td>
              <td width="98%"><b>RESULT</b><br></td>
            </tr>
          </tbody>
        </table>
        <table border="0" cellpadding="4" cellspacing="0" width="100%">
          <tbody>
            <tr>
              <td width="5%"></td>
              <td width="95%"></td>
            </tr>
          </tbody>
        </table></td>
    </tr>
    <tr>
      <td><table border="0" cellpadding="4" cellspacing="0" width="100%">
          <tbody>
            <tr>
              <td width="2%"></td>
              <td width="98%"><b>BUGS</b><br></td>
            </tr>
          </tbody>
        </table>
        <table border="0" cellpadding="4" cellspacing="0" width="100%">
          <tbody>
            <tr>
              <td width="5%"></td>
              <td width="95%"></td>
            </tr>
          </tbody>
        </table></td>
    </tr>
    <tr>
      <td><table border="0" cellpadding="4" cellspacing="0" width="100%">
          <tbody>
            <tr>
              <td width="2%"></td>
              <td width="98%"><b>NOTES</b><br></td>
            </tr>
          </tbody>
        </table>
        <table border="0" cellpadding="4" cellspacing="0" width="100%">
          <tbody>
            <tr>
              <td width="5%"></td>
              <td width="95%"> <b>dest</b> will be allocated by using AllocVec()!<br>
 You have to FreeVec() it once you don't need it anymore.<br>
<br>
 In case UTF-32 was encountered <b>dest</b> is zeroed because the initial buffer (<b>src</b>) contains the new UTF-8 sequences.<br>
 The same applies if UniCheckEncoding() returned as encoding UTF8_ENCODED, UTF8_GUESSED or ASCII_ENCODED.<br>
<br>
 <b>The following applies only if you deal with streaming texts and does not affect ordinary strings or text files loaded as one chunk into memory:</b><br>
 If the encoding is UTF8_GUESSED and <b>inlength</b> and <b>outlen</b> differ it means that you have passed in a stream where some trail bytes at the end of this stream were missing. In order to process now the left octets and the missing trail octets you should copy from:<br>
 &nbsp; &nbsp; &nbsp; &nbsp; (<b>src</b> + <b>outlen</b>) of size (<b>inlength</b> - <b>outlen</b>) the left processed octets to a new location and process them further once you retrieve the additional and missing octets.</td>
            </tr>
          </tbody>
        </table></td>
    </tr>
    <tr>
      <td><table border="0" cellpadding="4" cellspacing="0" width="100%">
          <tbody>
            <tr>
              <td width="2%"></td>
              <td width="98%"><b>SEE ALSO</b><br></td>
            </tr>
          </tbody>
        </table>
        <table border="0" cellpadding="4" cellspacing="0" width="100%">
          <tbody>
            <tr>
              <td width="5%"></td>
              <td width="95%"><a href="http://www.iana.org/assignments/character-sets">IANA database</a><br>I'm not responsible for the contents this link contains!<br></td>
            </tr>
          </tbody>
        </table></td>
    </tr>
    <tr>
      <td><table border="0" cellpadding="4" cellspacing="0" width="100%">
          <tbody>
            <tr>
              <td width="2%"></td>
              <td width="98%"><b>EXAMPLE</b><br></td>
            </tr>
          </tbody>
        </table>
        <table border="0" cellpadding="4" cellspacing="0" width="100%">
          <tbody>
            <tr>
              <td width="5%"></td>
              <td width="95%"><p></p></td>
            </tr>
          </tbody>
        </table></td>
    </tr>
  </tbody>
</table>
<br>
<div align="center">As of version <b>1.0</b> of <b>UniSupportLib</b> - Coypright 2008 Joerg van de Loo</div>
</body>
</html>
