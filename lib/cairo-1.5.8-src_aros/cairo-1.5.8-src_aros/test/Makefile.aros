
SUBMAKEFILE = 1

include ../Makefile.aros

CFLAGS += -I../src -I../boilerplate -I./pdiff

LDFLAGS += ./pdiff/libpdiff.a ../boilerplate/libboiler.a ../src/libcairo.a $(PIXMAN_LIBS) $(EXE_LDFLAGS)

TESTS = 			\
a1-image-sample			\
a1-traps-sample			\
a8-mask				\
caps-joins			\
caps-joins-alpha		\
caps-sub-paths			\
clip-all			\
clip-fill-rule			\
clip-fill-rule-pixel-aligned	\
clip-nesting			\
clip-operator			\
clip-twice			\
composite-integer-translate-source \
composite-integer-translate-over \
composite-integer-translate-over-repeat \
create-for-stream		\
create-from-png			\
create-from-png-stream		\
dash-caps-joins			\
dash-curve			\
dash-no-dash			\
dash-offset-negative		\
dash-scale			\
dash-zero-length		\
degenerate-path			\
device-offset			\
device-offset-positive		\
extend-reflect			\
extend-pad			\
extend-reflect-similar		\
extend-repeat			\
extend-repeat-similar		\
fill-and-stroke			\
fill-and-stroke-alpha		\
fill-and-stroke-alpha-add	\
fill-rule			\
filter-nearest-offset		\
font-face-get-type		\
font-options			\
font-matrix-translation		\
glyph-cache-pressure		\
get-and-set			\
get-clip			\
get-group-target		\
get-path-extents		\
gradient-alpha			\
in-fill-trapezoid		\
leaky-dash			\
leaky-polygon			\
line-width			\
line-width-scale		\
linear-gradient			\
mask				\
mask-ctm			\
mask-surface-ctm		\
move-to-show-surface		\
new-sub-path			\
nil-surface			\
operator-clear			\
operator-source			\
paint				\
paint-source-alpha		\
paint-with-alpha		\
pattern-get-type		\
pattern-getters			\
pixman-rotate			\
rectangle-rounding-error	\
rectilinear-miter-limit		\
scale-source-surface-paint	\
select-font-face		\
select-font-no-show-text	\
self-copy			\
self-intersecting		\
set-source			\
show-text-current-point		\
source-clip			\
source-surface-scale-paint	\
surface-finish-twice		\
surface-pattern			\
text-antialias-gray		\
text-antialias-none		\
text-antialias-subpixel		\
text-cache-crash		\
text-pattern			\
text-rotate			\
transforms			\
translate-show-surface		\
trap-clip			\
unantialiased-shapes		\
unbounded-operator		\
user-data			\
rel-path                        \
push-group			\
zero-alpha			\
$(NULL)

TESTCORE_SOURCES = \
	cairo-test.c \
	buffer-diff.c \
	$(NULL)

TEST_EXE = $(addsuffix .exe,$(TESTS))

all: $(TEST_EXE)

%.exe: %.c ./pdiff/libpdiff.a ../boilerplate/libboiler.a ../src/libcairo.a
	$(CC) $(CFLAGS) -o $@ $< $(TESTCORE_SOURCES) $(LDFLAGS)

./pdiff/libpdiff.a:
	(cd pdiff ; $(MAKE) -f Makefile.aros)

html:
	echo Creating index.html...
	perl make-html.pl > index.html

clean:
	rm -f $(TEST_EXE)
